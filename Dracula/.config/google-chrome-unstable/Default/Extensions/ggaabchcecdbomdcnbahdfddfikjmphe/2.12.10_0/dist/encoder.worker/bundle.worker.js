(()=>{var e={470:e=>{"use strict";function n(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function t(e,n){for(var t,r="",i=0,o=-1,a=0,f=0;f<=e.length;++f){if(f<e.length)t=e.charCodeAt(f);else{if(47===t)break;t=47}if(47===t){if(o===f-1||1===a);else if(o!==f-1&&2===a){if(r.length<2||2!==i||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){var s=r.lastIndexOf("/");if(s!==r.length-1){-1===s?(r="",i=0):i=(r=r.slice(0,s)).length-1-r.lastIndexOf("/"),o=f,a=0;continue}}else if(2===r.length||1===r.length){r="",i=0,o=f,a=0;continue}n&&(r.length>0?r+="/..":r="..",i=2)}else r.length>0?r+="/"+e.slice(o+1,f):r=e.slice(o+1,f),i=f-o-1;o=f,a=0}else 46===t&&-1!==a?++a:a=-1}return r}var r={resolve:function(){for(var e,r="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a;o>=0?a=arguments[o]:(void 0===e&&(e=process.cwd()),a=e),n(a),0!==a.length&&(r=a+"/"+r,i=47===a.charCodeAt(0))}return r=t(r,!i),i?r.length>0?"/"+r:"/":r.length>0?r:"."},normalize:function(e){if(n(e),0===e.length)return".";var r=47===e.charCodeAt(0),i=47===e.charCodeAt(e.length-1);return 0!==(e=t(e,!r)).length||r||(e="."),e.length>0&&i&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return n(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var i=arguments[t];n(i),i.length>0&&(void 0===e?e=i:e+="/"+i)}return void 0===e?".":r.normalize(e)},relative:function(e,t){if(n(e),n(t),e===t)return"";if((e=r.resolve(e))===(t=r.resolve(t)))return"";for(var i=1;i<e.length&&47===e.charCodeAt(i);++i);for(var o=e.length,a=o-i,f=1;f<t.length&&47===t.charCodeAt(f);++f);for(var s=t.length-f,u=a<s?a:s,c=-1,l=0;l<=u;++l){if(l===u){if(s>u){if(47===t.charCodeAt(f+l))return t.slice(f+l+1);if(0===l)return t.slice(f+l)}else a>u&&(47===e.charCodeAt(i+l)?c=l:0===l&&(c=0));break}var h=e.charCodeAt(i+l);if(h!==t.charCodeAt(f+l))break;47===h&&(c=l)}var p="";for(l=i+c+1;l<=o;++l)l!==o&&47!==e.charCodeAt(l)||(0===p.length?p+="..":p+="/..");return p.length>0?p+t.slice(f+c):(f+=c,47===t.charCodeAt(f)&&++f,t.slice(f))},_makeLong:function(e){return e},dirname:function(e){if(n(e),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,i=-1,o=!0,a=e.length-1;a>=1;--a)if(47===(t=e.charCodeAt(a))){if(!o){i=a;break}}else o=!1;return-1===i?r?"/":".":r&&1===i?"//":e.slice(0,i)},basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');n(e);var r,i=0,o=-1,a=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var f=t.length-1,s=-1;for(r=e.length-1;r>=0;--r){var u=e.charCodeAt(r);if(47===u){if(!a){i=r+1;break}}else-1===s&&(a=!1,s=r+1),f>=0&&(u===t.charCodeAt(f)?-1==--f&&(o=r):(f=-1,o=s))}return i===o?o=s:-1===o&&(o=e.length),e.slice(i,o)}for(r=e.length-1;r>=0;--r)if(47===e.charCodeAt(r)){if(!a){i=r+1;break}}else-1===o&&(a=!1,o=r+1);return-1===o?"":e.slice(i,o)},extname:function(e){n(e);for(var t=-1,r=0,i=-1,o=!0,a=0,f=e.length-1;f>=0;--f){var s=e.charCodeAt(f);if(47!==s)-1===i&&(o=!1,i=f+1),46===s?-1===t?t=f:1!==a&&(a=1):-1!==t&&(a=-1);else if(!o){r=f+1;break}}return-1===t||-1===i||0===a||1===a&&t===i-1&&t===r+1?"":e.slice(t,i)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,n){var t=n.dir||n.root,r=n.base||(n.name||"")+(n.ext||"");return t?t===n.root?t+r:t+"/"+r:r}(0,e)},parse:function(e){n(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var r,i=e.charCodeAt(0),o=47===i;o?(t.root="/",r=1):r=0;for(var a=-1,f=0,s=-1,u=!0,c=e.length-1,l=0;c>=r;--c)if(47!==(i=e.charCodeAt(c)))-1===s&&(u=!1,s=c+1),46===i?-1===a?a=c:1!==l&&(l=1):-1!==a&&(l=-1);else if(!u){f=c+1;break}return-1===a||-1===s||0===l||1===l&&a===s-1&&a===f+1?-1!==s&&(t.base=t.name=0===f&&o?e.slice(1,s):e.slice(f,s)):(0===f&&o?(t.name=e.slice(1,a),t.base=e.slice(1,s)):(t.name=e.slice(f,a),t.base=e.slice(f,s)),t.ext=e.slice(a,s)),f>0?t.dir=e.slice(0,f-1):o&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};r.posix=r,e.exports=r},2:()=>{}},n={};function t(r){var i=n[r];if(void 0!==i)return i.exports;var o=n[r]={exports:{}};return e[r](o,o.exports,t),o.exports}(()=>{"use strict";var e;const n=(e=(e="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(n){var r,i;(n=void 0!==(n=n||{})?n:{}).ready=new Promise((function(e,n){r=e,i=n}));var o,a={};for(o in n)n.hasOwnProperty(o)&&(a[o]=n[o]);var f=[],s=function(e,n){throw n},u=!1,c=!1,l=!1,h=!1;u="object"==typeof window,c="function"==typeof importScripts,l="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,h=!u&&!l&&!c;var p,d,m,g,v="";function y(e){return n.locateFile?n.locateFile(e,v):v+e}l?(v=c?t(470).dirname(v)+"/":"//",p=function(e,n){return m||(m=t(2)),g||(g=t(470)),e=g.normalize(e),m.readFileSync(e,n?null:"utf8")},d=function(e){var n=p(e,!0);return n.buffer||(n=new Uint8Array(n)),S(n.buffer),n},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),f=process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof Ce))throw e})),process.on("unhandledRejection",$),s=function(e){process.exit(e)},n.inspect=function(){return"[Emscripten Module object]"}):h?("undefined"!=typeof read&&(p=function(e){return read(e)}),d=function(e){var n;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(S("object"==typeof(n=read(e,"binary"))),n)},"undefined"!=typeof scriptArgs?f=scriptArgs:void 0!==arguments&&(f=arguments),"function"==typeof quit&&(s=function(e){quit(e)}),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(u||c)&&(c?v=self.location.href:document.currentScript&&(v=document.currentScript.src),e&&(v=e),v=0!==v.indexOf("blob:")?v.substr(0,v.lastIndexOf("/")+1):"",p=function(e){var n=new XMLHttpRequest;return n.open("GET",e,!1),n.send(null),n.responseText},c&&(d=function(e){var n=new XMLHttpRequest;return n.open("GET",e,!1),n.responseType="arraybuffer",n.send(null),new Uint8Array(n.response)}));var b=n.print||console.log.bind(console),w=n.printErr||console.warn.bind(console);for(o in a)a.hasOwnProperty(o)&&(n[o]=a[o]);a=null,n.arguments&&(f=n.arguments),n.thisProgram&&n.thisProgram,n.quit&&(s=n.quit);var _,A,x,C,R=function(e){};n.wasmBinary&&(_=n.wasmBinary),n.noExitRuntime&&(A=n.noExitRuntime),"object"!=typeof WebAssembly&&$("no native wasm support detected");var E=!1;function S(e,n){e||$("Assertion failed: "+n)}var k="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function I(e,n,t){for(var r=n+t,i=n;e[i]&&!(i>=r);)++i;if(i-n>16&&e.subarray&&k)return k.decode(e.subarray(n,i));for(var o="";n<i;){var a=e[n++];if(128&a){var f=63&e[n++];if(192!=(224&a)){var s=63&e[n++];if((a=224==(240&a)?(15&a)<<12|f<<6|s:(7&a)<<18|f<<12|s<<6|63&e[n++])<65536)o+=String.fromCharCode(a);else{var u=a-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&a)<<6|f)}else o+=String.fromCharCode(a)}return o}function j(e,n){return e?I(W,e,n):""}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var T,W,P,U=65536;function M(e,n){return e%n>0&&(e+=n-e%n),e}function O(e){T=e,n.HEAP8=new Int8Array(e),n.HEAP16=new Int16Array(e),n.HEAP32=P=new Int32Array(e),n.HEAPU8=W=new Uint8Array(e),n.HEAPU16=new Uint16Array(e),n.HEAPU32=new Uint32Array(e),n.HEAPF32=new Float32Array(e),n.HEAPF64=new Float64Array(e)}var H=n.INITIAL_MEMORY||16777216;(x=n.wasmMemory?n.wasmMemory:new WebAssembly.Memory({initial:H/U,maximum:2147483648/U}))&&(T=x.buffer),H=T.byteLength,O(T);var L=[],F=[],D=[],q=[];function z(){if(n.preRun)for("function"==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)X(n.preRun.shift());ue(L)}function B(){ue(F)}function G(){ue(D)}function N(){if(n.postRun)for("function"==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;)J(n.postRun.shift());ue(q)}function X(e){L.unshift(e)}function J(e){q.unshift(e)}var Y=0,K=null,Q=null;function V(e){Y++,n.monitorRunDependencies&&n.monitorRunDependencies(Y)}function Z(e){if(Y--,n.monitorRunDependencies&&n.monitorRunDependencies(Y),0==Y&&(null!==K&&(clearInterval(K),K=null),Q)){var t=Q;Q=null,t()}}function $(e){n.onAbort&&n.onAbort(e),w(e+=""),E=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw i(t),t}function ee(e,n){return String.prototype.startsWith?e.startsWith(n):0===e.indexOf(n)}n.preloadedImages={},n.preloadedAudios={};var ne="data:application/octet-stream;base64,";function te(e){return ee(e,ne)}var re="file://";function ie(e){return ee(e,re)}var oe="encoder.wasm";function ae(){try{if(_)return new Uint8Array(_);if(d)return d(oe);throw"both async and sync fetching of the wasm failed"}catch(e){$(e)}}function fe(){return _||!u&&!c||"function"!=typeof fetch||ie(oe)?Promise.resolve().then(ae):fetch(oe,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+oe+"'";return e.arrayBuffer()})).catch((function(){return ae()}))}function se(){var e={env:Ae,wasi_snapshot_preview1:Ae};function t(e,t){var r=e.exports;n.asm=r,C=n.asm.__indirect_function_table,Z()}function r(e){t(e.instance)}function i(n){return fe().then((function(n){return WebAssembly.instantiate(n,e)})).then(n,(function(e){w("failed to asynchronously prepare wasm: "+e),$(e)}))}if(V(),n.instantiateWasm)try{return n.instantiateWasm(e,t)}catch(e){return w("Module.instantiateWasm callback failed with error: "+e),!1}return function(){if(_||"function"!=typeof WebAssembly.instantiateStreaming||te(oe)||ie(oe)||"function"!=typeof fetch)return i(r);fetch(oe,{credentials:"same-origin"}).then((function(n){return WebAssembly.instantiateStreaming(n,e).then(r,(function(e){return w("wasm streaming compile failed: "+e),w("falling back to ArrayBuffer instantiation"),i(r)}))}))}(),{}}function ue(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var r=t.func;"number"==typeof r?void 0===t.arg?C.get(r)():C.get(r)(t.arg):r(void 0===t.arg?null:t.arg)}else t(n)}}function ce(e,n,t,r){$("Assertion failed: "+j(e)+", at: "+[n?j(n):"unknown filename",t,r?j(r):"unknown function"])}function le(e,n,t){W.copyWithin(e,n,n+t)}function he(){return W.length}function pe(e){try{return x.grow(e-T.byteLength+65535>>>16),O(x.buffer),1}catch(e){}}function de(e){e>>>=0;var n=he(),t=2147483648;if(e>t)return!1;for(var r=1;r<=4;r*=2){var i=n*(1+.2/r);if(i=Math.min(i,e+100663296),pe(Math.min(t,M(Math.max(16777216,e,i),65536))))return!0}return!1}function me(e){Ee(e)}te(oe)||(oe=y(oe));var ge={mappings:{},buffers:[null,[],[]],printChar:function(e,n){var t=ge.buffers[e];0===n||10===n?((1===e?b:w)(I(t,0)),t.length=0):t.push(n)},varargs:void 0,get:function(){return ge.varargs+=4,P[ge.varargs-4>>2]},getStr:function(e){return j(e)},get64:function(e,n){return e}};function ve(e){return 0}function ye(e,n,t,r,i){}function be(e,n,t,r){for(var i=0,o=0;o<t;o++){for(var a=P[n+8*o>>2],f=P[n+(8*o+4)>>2],s=0;s<f;s++)ge.printChar(e,W[a+s]);i+=f}return P[r>>2]=i,0}function we(e){R(0|e)}F.push({func:function(){xe()}});var _e,Ae={__assert_fail:ce,emscripten_memcpy_big:le,emscripten_resize_heap:de,exit:me,fd_close:ve,fd_seek:ye,fd_write:be,memory:x,setTempRet0:we},xe=(se(),n.___wasm_call_ctors=function(){return(xe=n.___wasm_call_ctors=n.asm.__wasm_call_ctors).apply(null,arguments)});function Ce(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function Re(e){function t(){_e||(_e=!0,n.calledRun=!0,E||(B(),G(),r(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),N()))}e=e||f,Y>0||(z(),Y>0||(n.setStatus?(n.setStatus("Running..."),setTimeout((function(){setTimeout((function(){n.setStatus("")}),1),t()}),1)):t()))}function Ee(e,t){t&&A&&0===e||(A||(n.onExit&&n.onExit(e),E=!0),s(e,new Ce(e)))}if(n._encoder_new=function(){return(n._encoder_new=n.asm.encoder_new).apply(null,arguments)},n._encoder_add_frame=function(){return(n._encoder_add_frame=n.asm.encoder_add_frame).apply(null,arguments)},n._free=function(){return(n._free=n.asm.free).apply(null,arguments)},n._encoder_finish=function(){return(n._encoder_finish=n.asm.encoder_finish).apply(null,arguments)},n.___errno_location=function(){return(n.___errno_location=n.asm.__errno_location).apply(null,arguments)},n._malloc=function(){return(n._malloc=n.asm.malloc).apply(null,arguments)},n.stackSave=function(){return(n.stackSave=n.asm.stackSave).apply(null,arguments)},n.stackRestore=function(){return(n.stackRestore=n.asm.stackRestore).apply(null,arguments)},n.stackAlloc=function(){return(n.stackAlloc=n.asm.stackAlloc).apply(null,arguments)},n.dynCall_jiji=function(){return(n.dynCall_jiji=n.asm.dynCall_jiji).apply(null,arguments)},Q=function e(){_e||Re(),_e||(Q=e)},n.run=Re,n.preInit)for("function"==typeof n.preInit&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return A=!0,Re(),n.ready});let r,i,o=!1;const a=[];let f;function s(){if(!o)return;let e;for(;e=a.shift();){const n=e.width*e.height,t=i._malloc(e.paletteLength+n);new Uint8Array(i.HEAPU8.buffer,t,e.paletteLength+n).set(new Uint8Array(e.buffer)),i._encoder_add_frame(f,e.top,e.left,e.width,e.height,t,e.delay/10,e.paletteLength),i._free(t)}}var u;self.onmessage=async e=>{self.onmessage=e=>{"finish"===e.data?function(){if(!f)return;const e=function(e,n){var t,r=i.asm.__indirect_function_table;if(!u){u=new WeakMap;for(var o=0;o<r.length;o++){var a=r.get(o);a&&u.set(a,o)}}if(u.has(e))return u.get(e);if(c.length)t=c.pop();else{t=r.length;try{r.grow(1)}catch(e){if(!(e instanceof RangeError))throw e;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}}try{r.set(t,e)}catch(n){if(!(n instanceof TypeError))throw n;var f=function(e,n){if("function"==typeof WebAssembly.Function){for(var t={i:"i32",j:"i64",f:"f32",d:"f64"},r={parameters:[],results:"v"==n[0]?[]:[t[n[0]]]},i=1;i<n.length;++i)r.parameters.push(t[n[i]]);return new WebAssembly.Function(r,e)}var o=[1,0,1,96],a=n.slice(0,1),f=n.slice(1),s={i:127,j:126,f:125,d:124};for(o.push(f.length),i=0;i<f.length;++i)o.push(s[f[i]]);"v"==a?o.push(0):o=o.concat([1,s[a]]),o[1]=o.length-2;var u=new Uint8Array([0,97,115,109,1,0,0,0].concat(o,[2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0])),c=new WebAssembly.Module(u);return new WebAssembly.Instance(c,{e:{f:e}}).exports.f}(e,"vii");r.set(t,f)}return u.set(e,t),t}(((e,n)=>{const t=new Uint8Array(n);t.set(new Uint8Array(i.HEAPU8.buffer,e,n)),self.postMessage(t.buffer,{transfer:[t.buffer]})}));i._encoder_finish(f,e),f=void 0}():(a.push(e.data),s())},r=e.data,i=await n({locateFile:(e,n)=>r.wasmFileLocation}),f=i._encoder_new(r.width,r.height),o=!0,s()};var c=[]})()})();