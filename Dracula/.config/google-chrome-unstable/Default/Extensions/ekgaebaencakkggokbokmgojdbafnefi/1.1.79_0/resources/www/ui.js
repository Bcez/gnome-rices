function PictaCastLoopback(a){var b=atob(a)}var PictaCastUI=function(){function d(a){return document.getElementById(a)}function e(){c&&(clearInterval(c),c=null)}function f(a){e(),a=a||0,a=parseInt(a,0),a>0?c=setInterval(function(){p({type:"request",data:{type:"getAlbumList",skipMusic:!0}})},1e3*60*a):e()}function g(a){var b=d("message");b.innerHTML=a,b.style.opacity=1,ib&&clearTimeout(ib),document.getElementById("cardContainerView").style.marginTop="-140px",document.getElementById("musicPlaylist").style.marginTop="60px"}function h(){var a=d("message");a.style.opacity=0,document.getElementById("cardContainerView").style.marginTop="-200px",document.getElementById("musicPlaylist").style.marginTop="0px"}function i(){d("progressbar").value=0}function j(){var a=d("progressbar");a.value=100,a.max=100}function k(){var a=0,b=new XMLHttpRequest;b.open("GET","dataretrieve?"+Math.random(),!0),b.onprogress=function(){var c=b.responseText.trim().split("\r\n"),d=c.length;for(var e=a;e<d;e++){var f=c[e];if(!f||f.substr(0,2)!="*:")continue;a=e+1;var g=JSON.parse(decodeURIComponent(atob(f.substr(2))));W(g)}},b.onreadystatechange=function(){b.readyState==4&&(Z(),setTimeout(function(){window.close()},1500))},b.send("")}function m(a){function c(){if(b)return!1;b=!0,a()}a=a||function(){};var b=!1;l&&clearTimeout(l),l=setTimeout(function(){d.abort(),m(a)},1e3);var d=new XMLHttpRequest;d.open("GET","status",!0),d.onreadystatechange=function(){clearTimeout(l);if(d.readyState==4)switch(d.status){case 0:l=setTimeout(function(){m(a)},1e3);break;case 200:c()}};try{d.send("")}catch(e){}}function n(a){function e(){if(b)return!1;b=!0,a()}a=a||function(){};var b=!1,c=setTimeout(function(){e()},1e4),f=new XMLHttpRequest;f.open("GET","status",!0),f.onreadystatechange=function(){clearTimeout(c);if(f.readyState==4)if(f.status===200){var b;try{b=JSON.parse(f.responseText)}catch(g){b={}}setTimeout(function(){n(a)},4e3),b.version&&d("appVersion").innerHTML.length===0&&(d("appVersion").innerHTML="(v"+b.version+")")}else e()},f.send("")}function o(){var a=[];for(var b=0;b<arguments.length;b++)a.push(arguments[b]);p({type:"track",data:a})}function p(a){var b=new XMLHttpRequest;b.open("GET","datasend?"+btoa(unescape(encodeURIComponent(JSON.stringify(a)))),!0),b.send("")}function q(a){p({type:"state",data:{state:a,deviceName:PictaCast.getDeviceName()}})}function s(a){function b(a,b){var c;return a==1?c=b.stringsingle:a===0?c=b.stringnone:c=b.stringmulti.split("[total]").join(a),c}r||(PictaCast.init(),r=!0),d("nofolders").style.display="none";var c=B(a.id,!0),e=F("albumCard"),f=e.getRoot();if(c){var g=c.getElementsByClassName("total")[0];return g.innerHTML=b(a.total,f.dataset),!1}f.setAttribute("data-entryId",a.id),e.setText("title",a.title),e.setText("total",b(a.total,f.dataset)),d("cardContainer").appendChild(f);var h=f.cloneNode(!0);d("cardContainerView").appendChild(h),h.style.left=f.offsetLeft+"px",h.style.top=f.offsetTop+"px",a.paused&&h.classList.add("paused");var i=h.getElementsByClassName("thumb")[0];a.total!==0?(i.style.backgroundImage="url('/file/"+a.firstIndex+"?width=160&height=120&s="+Math.random()+"')",i.classList.remove("empty")):i.classList.add("empty");var j=h.getElementsByClassName("action");for(var k=0;k<j.length;k++)j[k].addEventListener("click",function(){if(this.classList.contains("disabled"))return!1;var b=this.className.split("action").join("").trim();z(a.id,b,a)},!1);var l=h.getElementsByClassName("castnow")[0];ab.isDeviceOnline()&&l.classList.remove("disabled")}function t(a){a=parseInt(a,10),sb("playTrack",{index:a})}function u(a){p({type:"request",data:{type:"removeTrack",id:a}})}function v(a){var b=B(a),c=B(a,!0);b.parentNode.removeChild(b),c.parentNode.removeChild(c),kb(),document.getElementsByClassName("albumCard").length===1&&A()}function w(a){var b=B(a,!0);b.classList.add("paused")}function x(a){var b=B(a,!0);b.classList.remove("paused")}function y(){var a=[],b=document.getElementById("cardContainerView"),c=b.getElementsByClassName("albumCard");for(var d=0;d<c.length;d++)a.push(B(c[d].dataset.entryid,!0));return a}function z(a,b,c){switch(b){case"unpause":x(a),p({type:"request",data:{type:"unpauseFolder",id:a}});break;case"pause":w(a),p({type:"request",data:{type:"pauseFolder",id:a}});break;case"delete":confirm(vb.remove_album_prompt)&&(v(a),p({type:"request",data:{type:"removeFolder",id:a}}));break;case"castnow":sb("setImageIndex",{index:c.firstIndex,total:c.total,title:c.title,id:c.id}),D(c.id),o("album","Instant Cast");break;default:console.warn("Unhandled Album Action",b)}}function A(){d("nofolders").style.display="block",d("addfolderLink").onclick=function(){p({type:"request",data:{type:"addFolder"}})},r||(PictaCast.init(),r=!0)}function B(a,b){var c="cardContainer";b&&(c="cardContainerView");var e=d(c),f=e.getElementsByClassName("albumCard");for(var g=0;g<f.length;g++)if(f[g].getAttribute("data-entryId")==a)return f[g];return null}function C(){var a=y();for(var b=0;b<a.length;b++){var c=a[b],d=c.getElementsByClassName("info")[0];d.classList.remove("castwait")}}function D(a){C();var b=B(a,!0),c=b.getElementsByClassName("info")[0];c.classList.add("castwait")}function E(a){var b=B(a,!0),c=b.getElementsByClassName("info")[0];c.classList.remove("castwait")}function F(a){var b=d("templates"),c=b.getElementsByClassName(a)[0],e=c.cloneNode(!0),f=e.getElementsByTagName("*"),g={};for(var h=0;h<f.length;h++){if(f[h].className.length===0)continue;g[f[h].className]=f[h]}return{setText:function(a,b){if(!g[a])return!1;var c=g[a];return c.innerHTML="",c.appendChild(document.createTextNode(b)),!0},getRoot:function(){return e}}}function H(a,b){b=b||function(){};var c=d("addSubsMsg"),e=c.dataset.includesubs;c.innerHTML=e,d("addSubs").click();var f=function(){d("bttAddSubs").removeEventListener("click",f,!1),b({button:"yes",folderId:a.folderId})};d("bttAddSubs").addEventListener("click",f,!1)}function I(){var a=d("musicPlaylist"),b=a.getElementsByClassName("entries")[0],c=b.getElementsByClassName("list-group-item");for(var e=0;e<c.length;e++)if(c[e].classList.contains("active"))return c[e].dataset.trackid;return null}function J(a){var b=d("musicPlaylist"),c=b.getElementsByClassName("entries")[0],e=c.getElementsByClassName("list-group-item");for(var f=0;f<e.length;f++){if(f===a){e[f].classList.add("active");continue}e[f].classList.remove("active")}}function K(a){var b=d("musicPlaylist"),c=b.getElementsByClassName("noItems")[0],e=b.getElementsByClassName("progress")[0],f=b.getElementsByClassName("entries")[0];if(a.length==0){c.style.display="block",e.style.display="none",f.innerHTML="";return}e.style.display="none",c.style.display="none";var g=I();f.innerHTML="";for(var h=0;h<a.length;h++)(function(a){var b=document.createElement("a");b.href="#",b.className="list-group-item",b.dataset.trackid=a.id,a.id===g&&b.classList.add("active");var c=document.createElement("p");c.className="list-group-item-text",c.appendChild(document.createTextNode(a.title));var d=document.createElement("div");d.className="delete glyphicon glyphicon-remove",d.onclick=function(){u(a.id)},b.onclick=function(){return t(a.index),!1},b.appendChild(d),b.appendChild(c),f.appendChild(b)})(a[h])}function L(){var a=d("mobileSettings"),b=a.getElementsByClassName("checkbox");for(var c=0;c<b.length;c++)b[c].classList.add("disabled"),b[c].getElementsByTagName("input")[0].disabled=!0;M(),d("mobileInfoMsg").style.display="none"}function M(){var a=d("nptEnableMobile");a.disabled||!a.checked?(d("nptShowLink").disabled=!0,d("nptShowLink").parentNode.parentNode.classList.add("disabled"),d("nptShortLink").disabled=!0,d("nptShortLink").parentNode.parentNode.classList.add("disabled")):(d("nptShowLink").disabled=!1,d("nptShowLink").parentNode.parentNode.classList.remove("disabled"),d("nptShortLink").disabled=!1,d("nptShortLink").parentNode.parentNode.classList.remove("disabled"))}function N(){a=!0;var b=document.getElementsByClassName("ifChromeOS");for(var c=0;c<b.length;c++)b[c].style.display="block";d("noMobileChromeOS").style.display="block",L()}function O(){b=!0}function P(){var a=document.getElementsByClassName("ifFirewall");for(var b=0;b<a.length;b++)a[b].style.display="none"}function Q(){var c=document.getElementsByClassName("ifFirewall");for(var d=0;d<c.length;d++)c[d].style.display="block";!!a,b&&(console.log("SHOW HELP"),p({type:"request",data:{type:"showFirewallHelp"}}))}function T(){R&&clearTimeout(R);if(!S)return!1;PictaCastLan.register("http://"+S+":"+window.location.port),R=setTimeout(function(){T()},12e4)}function U(){d("buynotice").style.display="block";var a=d("buynotice").getElementsByClassName("buybutton")[0],b=a.offsetWidth,c=b-185;c<0&&(c=0);var e=d("buynotice").getElementsByClassName("txtnotice")[0];e.style.marginLeft=c+"px",e.style.left=d("buyFull").offsetWidth+15+"px",p({type:"info",data:{type:"shownBuyNotice"}}),tb(),d("contactButton").dataset.recipient="help@pictacast.com"}function V(a){var b="",c=d("remainingTime");a==1?b=c.dataset.singleminute:b=c.dataset.multiminutes.split("[total]").join(a),c.innerHTML="("+b+")"}function W(a){switch(a.type){case"forwardToDevice":PictaCast.send(a.message);break;case"closeWindow":G&&window.close();break;case"pageAction":switch(a.message.type){case"W":a.message.data||U();break;case"T":a.message.data&&V(a.message.data);break;case"localAddress":S=a.message.data,ob.mobile&&ob.mobile.enabled&&T();break;case"updateMusicList":K(a.message.data);break;case"addAlbumCard":s(a.message.data);break;case"noFolders":A();break;case"hasFirewall":Q();break;case"isChromeOS":N();break;case"isWindowsOS":O();break;case"setOptions":JSON.stringify(a.message.data)!="{}"&&(ob=a.message.data),rb(ob),G||(p({type:"request",data:{type:"getAlbumList"}}),G=!0,ob.autoUpdateMin>0&&f(ob.autoUpdateMin)),ob&&ob.shownBuyNotice===!0&&U(),ob.tracking==="UNSET"&&$("#usageInfoMessage").modal("show");break;case"setTitle":var b=a.message.data;document.title=b,d("fpIcon").innerHTML=b;break;case"promptAddSubs":H(a.message.data,function(a){a.button=="yes"&&p({type:"request",data:{type:"addFolderSubs",id:a.folderId,state:!0}})})}}}function X(a){var b=vb.close_window_warning;return(a||window.event).returnValue=b,b}function Y(){window.addEventListener("beforeunload",X)}function Z(){window.removeEventListener("beforeunload",X)}function _(){var a={},b=document.body.getElementsByClassName("_localeStr");for(var c=0;c<b.length;c++)a[b[c].dataset.name]=b[c].dataset.value;return a}function bb(a){var b=d("bttPausePlay");a?(b.classList.remove("glyphicon-pause"),b.classList.add("glyphicon-play"),b.setAttribute("title",b.dataset.stringresume)):(b.classList.add("glyphicon-pause"),b.classList.remove("glyphicon-play"),b.setAttribute("title",b.dataset.stringpause))}function cb(a){d("bttGoForward").disabled=a,d("bttGoBack").disabled=a}function db(){fb(),bb(!1)}function eb(){d("bttStop").disabled=!1,d("bttPausePlay").disabled=!1,d("bttGoForward").disabled=!1,d("bttGoBack").disabled=!1}function fb(){d("bttStop").disabled=!0,d("bttPausePlay").disabled=!0,d("bttGoForward").disabled=!0,d("bttGoBack").disabled=!0}function gb(){var a=y();for(var b=0;b<a.length;b++){var c=a[b].getElementsByClassName("menu")[0],d=c.getElementsByClassName("castnow")[0];d.classList.remove("disabled")}}function hb(){var a=y();for(var b=0;b<a.length;b++){var c=a[b].getElementsByClassName("menu")[0],d=c.getElementsByClassName("castnow")[0];d.classList.add("disabled")}}function jb(){var a=document.body,b=document.documentElement,c=Math.max(a.scrollHeight,a.offsetHeight,b.clientHeight,b.scrollHeight,b.offsetHeight),e=d("playlistFiles");e.style.maxHeight=b.clientHeight-350+"px"}function kb(){var a=d("cardContainer").getElementsByClassName("albumCard"),b=d("cardContainerView").getElementsByClassName("albumCard"),c,e,f={};for(c=0;c<b.length;c++)e=b[c].getAttribute("data-entryid"),f[e]=b[c];for(c=0;c<a.length;c++){e=a[c].getAttribute("data-entryid");var g=f[e];g.style.top=a[c].offsetTop+"px",g.style.left=a[c].offsetLeft+"px"}}function mb(){var a={},b=document.getElementById("actions"),c=[],d=b.getElementsByClassName("dropdown-menu");for(var e=0;e<d.length;e++)c.push(d[e]);var f=b.getElementsByClassName("btn-group");for(var e=0;e<f.length;e++)c.push(f[e]);for(var e=0;e<c.length;e++){var g=c[e],h=g.dataset,i=h.section;if(!i)continue;a[i]={};var j=g.getElementsByTagName("*");for(var k=0;k<j.length;k++){var l=j[k],m=l.getElementsByTagName("a")[0],n=l.dataset;n.opt&&(a[i].options||(a[i].options={}),a[i].options[n.optval]=l);var o=n.value;if(!o)continue;m.style.paddingLeft="10px";var p=document.createElement("span");p.className="glyphicon glyphicon-remove",p.style.marginRight="10px",p.style.visibility="hidden",m.insertBefore(p,m.firstChild),function(b,c){function d(b,d){var e=a[b][d];c.addEventListener("click",function(){if(this.parentNode.classList.contains("disabled"))return!1;nb(b,d,e.getValue())},!1)}a[i][o]={getValue:function(){if(b.style.visibility=="hidden")return"";if(b.classList.contains("glyphicon-remove"))return!1;if(b.classList.contains("glyphicon-ok"))return!0},setValue:function(a){a===""?b.style.visibility="hidden":b.style.visibility="visible";switch(a){case!0:b.classList.add("glyphicon-ok"),b.classList.remove("glyphicon-remove");break;case!1:b.classList.add("glyphicon-remove"),b.classList.remove("glyphicon-ok")}}},d(i,o)}(p,m)}}return a}function nb(a,b,c){switch(a){case"mode":b=="shuffle"?c===!0?ob.shuffle=!1:ob.shuffle=!0:b=="croptofit"?c===!0?ob.croptofit=!1:ob.croptofit=!0:ob.mode=b;break;case"speed":b!=="custom"&&(ob.speed=b);break;case"settings":var d=ob.display,e=d.indexOf(b);e!=-1&&d.splice(e,1),c!==!0&&d.push(b)}rb(ob)}function pb(a){ob.tracking=a,qb()}function qb(){p({type:"request",data:{type:"saveOptions",data:ob}})}function rb(a){function f(){for(var a in e)e[a].disabled=!1}function g(){for(var a in e)e[a].disabled=!0}function h(){for(var a in e)e[a].classList.remove("active")}d("addFolder").disabled=!1,d("modeMenu").disabled=!1,d("speedMenu").disabled=!1,d("settingsMenu").disabled=!1,d("addMusic").disabled=!1,d("musicSettingsMenu").disabled=!1,a.shuffle===!0?lb.mode.shuffle.setValue(!0):lb.mode.shuffle.setValue(""),a.croptofit===!0?lb.mode.croptofit.setValue(!0):lb.mode.croptofit.setValue("");var b=["slide","wall"];for(var c=0;c<b.length;c++)lb.mode[b[c]].setValue("");var e=lb.wallmode.options;h();switch(a.mode){case"slide":lb.mode.slide.setValue(!0),g(),d("optCropToFit").classList.remove("disabled"),d("optCropToFit").title="";break;case"wall":case"wall2":case"wall3":case"wall4":f(),e[a.mode].classList.add("active"),lb.mode.wall.setValue(!0),d("optCropToFit").classList.add("disabled"),d("optCropToFit").title="Available only for 'Fade-in' Mode"}for(var i in lb.speed)lb.speed[i].setValue("");lb.speed[a.speed]&&lb.speed[a.speed].setValue(!0);for(var j in lb.settings)a.display.indexOf(j)!=-1?lb.settings[j].setValue(!0):lb.settings[j].setValue("");qb()}function sb(a,b){b=b||{},PictaCast.send({type:"control",data:{action:a,params:b}})}function tb(){var a=document.createElement("script");a.src="https://www.pictacast.com/app/info.js?"+Math.random(),a.type="text/javascript",document.body.appendChild(a)}function ub(a){if(typeof a=="undefined")return!1;var b=document.getElementById("buynotice"),c=b.getElementsByClassName("discount")[0];typeof a.discount!="undefined"?(c.innerHTML="",c.appendChild(document.createTextNode(a.discount)),b.classList.add("hasDiscount")):b.classList.remove("hasDiscount")}function wb(){var a=d("grpCustSpeedType"),b=a.getElementsByTagName("button"),c={};for(var e=0;e<b.length;e++)c[b[e].dataset.val]=b[e];return c}function xb(){var a=wb(),b=[];for(var c in a)a[c].classList.contains("active")&&b.push(a[c]);return b}function yb(){var a=xb();for(var b=0;b<a.length;b++)a[b].classList.remove("active")}function zb(a){return wb()[a]}function Ab(a){yb();var b=zb(a);b&&b.classList.add("active")}function Bb(){function e(a){a=parseInt(a),b.style.transform="rotate("+a+"deg)"}function f(){for(var a=0;a<c.length;a++)c[a].classList.remove("active")}var a=d("grpScrOrient"),b=d("orientIco"),c=a.getElementsByTagName("button");for(var g=0;g<c.length;g++){var h=c[g];h.addEventListener("click",function(){e(this.dataset.val),f(),this.classList.add("active")},!1)}}function Cb(){function c(){for(var a=0;a<b.length;a++)b[a].classList.remove("active")}var a=d("grpTimeFormat"),b=a.getElementsByTagName("button");for(var e=0;e<b.length;e++){var f=b[e];f.addEventListener("click",function(){c(),this.classList.add("active")},!1)}}function Db(){d("nptShowLink").checked&&!d("nptShowLink").disabled?(d("txtCustomMobMsg").classList.remove("disabled"),d("nptCustomMessage").disabled=!1):(d("txtCustomMobMsg").classList.add("disabled"),d("nptCustomMessage").disabled=!0)}"use strict";var a=!1,b=!1,c=null,l=null,r=!1,G=!1,R=null,S=null;window.__onGCastApiAvailable=function(a){if(!a){var b=setInterval(function(){if(typeof vb=="undefined")return!1;clearInterval(b);var a=vb.install_chromecast_ext,c=a.match(/\[.*?]/g),d=c[0],e=d.substr(1,d.length-2),f="<a target='_blank' href='https://chrome.google.com/webstore/detail/google-cast/boadgeojelhgndaghljhdicfkmllpafd'>"+e+"</a>",h=c[1],j=h.substr(1,h.length-2),k="<a href='javascript:location.reload()'>"+j+"</a>",l=a.split(h).join(k);l=l.split(d).join(f),g(l),clearTimeout(ib),i(),o("ui_state","cast_extension_missing")},500);return!1}ab.init(),ab.player(!0),q("connecting"),ib=setTimeout(function(){var a=vb.check_chromecast_device,b=a.match(/\[.*]/),c=b[0],d=c.substr(1,c.length-2),e="<a href='javascript:location.reload()'>"+d+"</a>";a=a.split(c).join(e),g(a)},5e3),PictaCast.on("readyToPlay",function(){g(vb.select_chromecast_device)}),PictaCast.on("sendPlayerStateToDevice",function(){p({type:"request",data:{type:"state"}})}),PictaCast.on("sendMusicStateToDevice",function(){p({type:"request",data:{type:"music"}})}),PictaCast.on("appStateChange",function(a){o("cast_state",a)}),PictaCast.on("musicState",function(a){J(a.index)}),PictaCast.on("albumStarted",function(a){E(a.id)}),PictaCast.on("registerReceiver",function(a){p({type:"request",data:{type:"registerReceiver",data:a}})}),PictaCast.on("requestMetadata",function(a){p({type:"request",data:{type:"metadata",data:{index:a.index}}})}),PictaCast.on("rtcAnswer",function(a){p({type:"request",data:{type:"rtcAnswer",data:a}})}),PictaCast.on("deviceState",function(a){bb(a.paused),cb(a.stepping)}),PictaCast.on("ping",function(){ab.isPlayerOnline()&&(PictaCast.pong(),p({type:"request",data:{type:"registerPing"}}))}),PictaCast.on("requestImage",function(a){p({type:"request",data:{type:"image",image:a}})}),PictaCast.on("sessionInit",function(a){ab.cast(!0),j(),q("connected"),h(),!a||!a.resync}),PictaCast.on("sessionEnd",function(){d("remainingTime").innerHTML="",ab.cast(!1),q("disconnected"),J(-1)}),PictaCast.on("sessionInitError",function(){d("remainingTime").innerHTML="",ab.cast(!1),i();var a=vb.chromecast_error_reload,b=a.match(/\[.*]/),c=b[0],e=c.substr(1,c.length-2),f="<a href='javascript:location.reload()'>"+e+"</a>";a=a.split(c).join(f),g(a),q("disconnected"),o("ui_state","cast_context_closed")})};var ab=function(){function g(a,b){if(!f[a])return!1;for(var c=0;c<f[a].length;c++)f[a][c].apply(e,b)}function h(){c.player||c.cast?c.player&&c.cast?g("fullLink"):g("halfLink",[c]):g("deadLink")}function i(a,b){c[a]=b,h()}var a=null,b=null,c={},e=this,f={};return{init:function(){a=d("fpIcon"),b=d("ccIcon")},player:function(b){switch(b){case!0:a.className="connected";break;case!1:a.className="disconnected"}i("player",b)},cast:function(a){switch(a){case!0:b.className="connected";break;case!1:b.className="disconnected"}i("cast",a)},isPlayerOnline:function(){return c.player||!1},isDeviceOnline:function(){return c.cast||!1},on:function(a,b){f[a]=f[a]||[],f[a].push(b)}}}();ab.on("fullLink",function(){Y(),d("container").style.boxShadow="0px 0px 8px 1px forestgreen",clearTimeout(ib),eb(),gb()}),ab.on("halfLink",function(){Z(),h(),d("container").style.boxShadow="0px 0px 8px 1px chocolate",db(),P(),hb()}),ab.on("deadLink",function(){Z(),d("container").style.boxShadow="0px 0px 8px 1px maroon",setTimeout(function(){window.close()},1500),db(),hb()});var ib=null,lb={},ob={};window.addEventListener("resize",function(){kb(),jb()},!1);var vb;return window.addEventListener("load",function(){vb=_(),d("addFolder").addEventListener("click",function(){p({type:"request",data:{type:"addFolder"}})},!1),d("addMusic").addEventListener("click",function(){p({type:"request",data:{type:"addMusic"}})},!1),d("bttStop").addEventListener("click",function(){sb("stop"),o("cast","stop")},!1),d("bttPausePlay").addEventListener("click",function(){sb("pause"),o("cast","pause")},!1),d("bttGoForward").addEventListener("click",function(){sb("forward")},!1),d("bttGoBack").addEventListener("click",function(){sb("back")},!1),n(function(){ab.player(!1),m(function(){window.location.reload()})}),k(),lb=mb();for(var a in lb.wallmode.options){var b=lb.wallmode.options[a];b.addEventListener("click",function(){ob.mode=this.dataset.optval,rb(ob)})}p({type:"request",data:{type:"getOptions"}}),jb(),d("nptEnableMobile").addEventListener("change",function(){M(),Db()},!1),$("#mobileSettings").on("show.bs.modal",function(a){var b=ob.mobile||{enabled:!1,showLink:!1,shortLink:!0,message:""};d("nptEnableMobile").checked=!1,d("nptShowLink").checked=!1,d("nptShortLink").checked=!1,b.enabled===!0&&(d("nptEnableMobile").checked=!0),M(),b.showLink===!0&&(d("nptShowLink").checked=!0),b.shortLink===!0&&(d("nptShortLink").checked=!0),typeof b.message=="string"&&b.message.trim().length>0&&(d("nptCustomMessage").value=b.message),Db()}),d("nptSaveMobile").addEventListener("click",function(){var a={enabled:d("nptEnableMobile").checked&&!d("nptEnableMobile").disabled,showLink:d("nptShowLink").checked&&!d("nptShowLink").disabled,shortLink:d("nptShortLink").checked&&!d("nptShortLink").disabled,message:d("nptCustomMessage").value};a.enabled&&a.shortLink?T():clearTimeout(R),ob.mobile=a,qb()},!1),d("nptShowLink").addEventListener("click",function(){Db()},!1),M();var c=null;$("#advancedSettings").on("hide.bs.modal",function(){c&&(clearInterval(c),c=null)}),$("#advancedSettings").on("show.bs.modal",function(a){function p(){var a=new Date,b="",c="",d=!0,e=a.getHours(),f="";e>11&&(d=!1),e===0?f=12:e>12?f=e-12:f=e,f+="",e+="",e.length==1&&(e="0"+e);var g=a.getMinutes()+"";return g.length==1&&(g="0"+g),b=f+":"+g,c=e+":"+g,{standard:b,military:c,morning:d}}function q(){var a=p();n.innerHTML="",o.innerHTML="";var b=a.standard+=" "+(a.morning?vb.time_am:vb.time_pm),c=a.military;n.appendChild(document.createTextNode(b)),o.appendChild(document.createTextNode(c))}var b=ob.orientation||0,e=d("grpScrOrient"),f=d("orientIco"),g=e.getElementsByTagName("button");for(var h=0;h<g.length;h++){var i=g[h],j=parseInt(i.dataset.val,10);i.classList.remove("active"),j===b&&(i.selected=!0,f.style.transform="rotate("+j+"deg)",i.classList.add("active"))}var k=d("nptEnableAutoUpdate"),l=d("nptAutoUpdateInterval");l.onkeydown=function(a){if(a.keyCode===13)return!1},ob.autoUpdateMin>0?(k.checked=!0,l.value=parseInt(ob.autoUpdateMin,0)):(k.checked=!1,l.value=5),k.onclick=function(){l.disabled=!this.checked},l.disabled=!k.checked;var m=d("nptEnableTracking");m.checked=!1,ob.tracking===!0&&(m.checked=!0);var n=d("timeValAMPM"),o=d("timeVal24HR");c&&(clearInterval(c),c=null),q(),c=setInterval(function(){q()},900);var r=ob.timeformat||"24HR",e=d("grpTimeFormat"),g=e.getElementsByTagName("button");for(var h=0;h<g.length;h++){var i=g[h],j=i.dataset.val;i.classList.remove("active"),j===r&&(i.selected=!0,i.classList.add("active"))}});var g=wb();for(var h in g){var i=g[h];i.addEventListener("click",function(){var a=this.dataset.val;Ab(a),ob.speedType=a,qb()})}$("#customSpeed").on("show.bs.modal",function(a){var b=ob.speedType||"seconds";Ab(b),d("custSpeedValue").onkeydown=function(a){if(a.keyCode===13)return!1};var c=ob.speedValue||5;d("custSpeedValue").value=c}),d("nptSaveCustSpeed").addEventListener("click",function(){var a=d("custSpeedValue"),b=parseInt(a.value.trim(),10);if(!b||b<0)b=0;if(!b)return!1;ob.speed="custom",ob.speedValue=b,qb(),rb(ob)}),d("nptSaveAdvsett").addEventListener("click",function(){var a=0,b=d("grpScrOrient"),c=d("orientIco"),g=b.getElementsByTagName("button");for(var h=0;h<g.length;h++){var i=g[h],j=parseInt(i.dataset.val,10);i.classList.contains("active")&&(a=parseInt(i.dataset.val,10))}ob.orientation=a;var k=0;d("nptAutoUpdateInterval").disabled===!1&&(k=parseInt(d("nptAutoUpdateInterval").value||0,10)),k<1?ob.autoUpdateMin=0:ob.autoUpdateMin=k,ob.autoUpdateMin<1?e():f(ob.autoUpdateMin),ob.tracking=d("nptEnableTracking").checked;var l=0,b=d("grpTimeFormat"),g=b.getElementsByTagName("button");for(var h=0;h<g.length;h++){var i=g[h],j=i.dataset.val;i.classList.contains("active")&&(l=i.dataset.val)}ob.timeformat=l,qb()},!1),Bb(),Cb(),d("contactButton").addEventListener("click",function(){var a=document.createElement("a"),b="support@pictacast.com";this.dataset.recipient&&(b=this.dataset.recipient),a.href="mailto:"+b,a.target="bgloader",a.innerHTML="&nbsp",a.style.position="absolute",a.style.top="-100px",document.body.appendChild(a),a.click(),a.parentNode.removeChild(a)}),d("nptSaveUsageInfo").addEventListener("click",function(){pb(d("nptModalEnableTracking").checked)})},!1),{setInfo:function(){ub.apply(null,arguments)}}}(),PictaCastLan=function(){function a(a){var b=document.getElementsByClassName("lancmd");b[0]&&b[0].parentNode&&b[0].parentNode.removeChild(b[0]);var c="https://pictacast.appspot.com",d=c+a,e=document.createElement("script");e.className="lancmd",e.setAttribute("type","text/javascript"),e.setAttribute("src",d),document.body.appendChild(e)}function b(a){return encodeURIComponent(btoa(a))}function c(c){a("/add/"+b(c))}return{register:function(a){c(a)}}}()