(window.webpackJsonp=window.webpackJsonp||[]).push([[22,4,5,27,33,35,37,40],[function(t,e,r){"use strict";r.d(e,"t",(function(){return c})),r.d(e,"j",(function(){return u})),r.d(e,"q",(function(){return l})),r.d(e,"s",(function(){return h})),r.d(e,"h",(function(){return p})),r.d(e,"i",(function(){return d})),r.d(e,"n",(function(){return f})),r.d(e,"k",(function(){return g})),r.d(e,"r",(function(){return m})),r.d(e,"e",(function(){return y})),r.d(e,"c",(function(){return v})),r.d(e,"z",(function(){return b})),r.d(e,"d",(function(){return w})),r.d(e,"l",(function(){return x})),r.d(e,"m",(function(){return k})),r.d(e,"o",(function(){return S})),r.d(e,"p",(function(){return O})),r.d(e,"w",(function(){return _})),r.d(e,"a",(function(){return A})),r.d(e,"v",(function(){return T})),r.d(e,"y",(function(){return j})),r.d(e,"u",(function(){return C})),r.d(e,"x",(function(){return E})),r.d(e,"B",(function(){return L})),r.d(e,"A",(function(){return R})),r.d(e,"f",(function(){return P})),r.d(e,"b",(function(){return M})),r.d(e,"g",(function(){return I})),r.d(e,"G",(function(){return B})),r.d(e,"C",(function(){return U})),r.d(e,"E",(function(){return N})),r.d(e,"D",(function(){return W})),r.d(e,"F",(function(){return $}));r(31),r(89);var n,i=r(159),o=r.n(i),a=r(15),s=r.n(a);const c="object"!=typeof window,u=!1,l=!0,h=!1,p=!1,d=!0,f=!1,g=!1,m=!1,y="pro",v="chrome",b="10.0.85",w="1662104603796",x=d||f||g||p||m,k=(d||f||g||m)&&!p,S=navigator.platform.indexOf("Mac")>=0,O=!1,_=l?"jiaocheng.inftab.com":"qzeuoq1yf.hn-bkt.clouddn.com",A="https://infinityicon.infinitynewtab.com/assets",T=l?"https://ws.infinitynewtab.com":"https://test-ws.infinitynewtab.com",j=l?"https://api.infinitynewtab.com/v2":"https://api-infinitynewtab-com.test690.com/v2",C=l?"https://api.infinitynewtab.com/privacy":"https://test-api.infinitynewtab.com/privacy",E="https://infinity-api.infinitynewtab.com",L=h?location.origin:l?"https://inftab.com":"https://test.inftab.com",R="https://weather-api.extfans.com",P="https://mail.google.com",M="https://suggestion.baidu.com",I="https://google.com",D=["cs","da","de","el","en","en-GB","en-US","es","es-419","fi","fr","hi","hu","id","it","ja","ko","ms","nl","no","pl","pt-BR","pt-PT","ro","ru","sk","sv","th","tr","uk","vi","zh-CN","zh-TW"],B=!!(null===(n=o.a.chrome)||void 0===n?void 0:n.abp),U=function(){if(h)return{baiduLabel:"Infinity新标签页web版",trackingId:"UA-202382853-4"};if(p)return{baiduLabel:"Infinity新标签页app版",trackingId:"UA-202382853-3"};if(x){if("pro"===y)return{baiduLabel:"Infinity新标签页pro版",trackingId:"UA-202382853-1"};if("basic"===y)return{baiduLabel:"Infinity新标签页basic版",trackingId:"UA-202382853-2"}}throw new Error("no ga info")}();function N(t="",e="_"){const r=t.split(e);return 2===r.length?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),r.join(e)):t}function z(t){const e=N(t.replace("_","-"),"-");return s()(D).call(D,e)?e:"zh"===t||0===e.indexOf("zh-")?"zh-CN":"en-US"}const W={get lang(){return h?function(){if(!c){const t=localStorage.getItem("langCode");if(null!==localStorage.getItem("setLangCode")&&null!==t)return t}return z(navigator.language||"en-us")}():z(chrome.i18n.getUILanguage())},get extVersion(){return h?"web":chrome.runtime.getManifest().version},get extId(){return h?"web":chrome.runtime.id},get platform(){return h?"web":"chrome"},get supportCookie(){return!m&&"safari"!==this.runtimePlatform},get runtimePlatform(){return B?"360":q().broswer},get platformVersion(){return q().version},get isZh(){return"zh-CN"===W.lang},get isEn(){return/^(en|en-GB|en-US)$/.test(W.lang)},get isWindows(){return/windows|win32/i.test(navigator.userAgent)},get isMac(){return-1!==navigator.platform.toLowerCase().indexOf("mac")},get vendor(){let t=v;return"web"===v&&(t=q().broswer),t.charAt(0).toUpperCase()+t.slice(1)}};function q(){const t={},e=navigator.userAgent.toLowerCase();let r;return(r=e.match(/edg\/([\d.]+)/i))?t.edge=r[1]:(r=e.match(/rv:([\d.]+)\) like gecko/))||(r=e.match(/msie ([\d.]+)/))?t.ie=r[1]:(r=e.match(/firefox\/([\d.]+)/))?t.firefox=r[1]:(r=e.match(/chrome\/([\d.]+)/))?t.chrome=r[1]:(r=e.match(/opera.([\d.]+)/))?t.opera=r[1]:(r=e.match(/version\/([\d.]+).*safari/))&&(t.safari=r[1]),t.edge?{broswer:"edge",version:t.edge}:t.ie?{broswer:"ie",version:t.ie}:t.firefox?{broswer:"firefox",version:t.firefox}:t.chrome?{broswer:"chrome",version:t.chrome}:t.opera?{broswer:"opera",version:t.opera}:t.safari?{broswer:"safari",version:t.safari}:{broswer:"none",version:"0"}}const $=()=>{const t=navigator.userAgent,e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"];let r=!1;for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>0){r=!0;break}try{document.createEvent("TouchEvent"),r=!0}catch(t){}return!r}},,function(t,e,r){"use strict";r.r(e),r.d(e,"i18n",(function(){return h})),r.d(e,"IS_ZH",(function(){return p})),r.d(e,"initMasterI18n",(function(){return d})),r.d(e,"initI18n",(function(){return f})),r.d(e,"setLangToLocal",(function(){return m})),r.d(e,"getLangFromLocal",(function(){return y}));var n=r(159),i=r.n(n),o=(r(17),r(19),r(31),r(89),r(11),r(0)),a=r(105),s=r.n(a),c=r(35),u=r.n(c);let l={};const h=function(t,e){var r;if(o.l&&!o.r)return chrome.i18n.getMessage(t,e)||t;if(o.s||o.r){if(o.r&&void 0===e)return chrome.i18n.getMessage(t,e)||t;const n=null===(r=l[t])||void 0===r?void 0:r.message,i=[];"string"==typeof e?i.push(e):Array.isArray(e)&&i.push(...e);const a=/(\$.+?\$)/g;let s=a.exec(n),c=n;for(;s;){let[t]=i.splice(0,1);void 0===t&&(t=""),c=c.replace(s[1],t),s=a.exec(n)}return c||t}return t};o.t?i.a.i18n=h:window.i18n=h;const p="zh-CN"===o.D.lang;async function d(){const t=await y();l=t}async function f(){if(!o.s&&!o.r)return;const{slave:t}=await Promise.all([r.e(27),r.e(33)]).then(r.bind(null,210)),e=o.D.lang;try{const r=await y(),n=localStorage.getItem("setLangCode"),i=localStorage.getItem("langCode");null!==n&&null!==r||i===e&&null!==r?(l=r,g(n?i:e)):await g(n?i:e),t.postTask("slave:master-init-i18n",l)}catch(t){}}async function g(t){const e=t.replace("-","_"),r=(await s.a.get(`${o.B}/_locales/${Object(o.E)(e)}/messages.json?v=1648693770916`)).data;Object.keys(r).length>50&&(l=r,localStorage.setItem("langCode",t),m(r))}function m(t){return u.a.setItem("current-language",t)}function y(){return u.a.getItem("current-language")}},function(t,e,r){"use strict";r.d(e,"b",(function(){return S})),r.d(e,"a",(function(){return O}));r(31),r(11),r(17),r(19);var n=r(7),i=r.n(n),o=r(15),a=r.n(o),s=r(105),c=r.n(s),u=r(0),l=r(4),h=r(85),p=r(12);const d=c.a.create({timeout:3e4});let f=!1;const g=[],m=()=>new i.a(async(t,e)=>{if(g.push({resolve:t,reject:e}),!f){f=!0;try{let t;if(h.a){const e=u.l&&window.updateFromThirtyFiveStatus,{data:r}=await p.k.read(e?"localstorage":null);t=r}else{const e=await Promise.all([r.e(0),r.e(1),r.e(5)]).then(r.bind(null,603));t=e.userStore}const{refreshToken:e}=t;if(!e)return t.setOutdated(),f=!1,void g.forEach(t=>{t.reject(new Error("no refreshtoken"))});const{status:n,data:i}=await d.post(u.y+"/refresh_token",{refresh_token:e},{headers:{"i-lang":u.D.lang}});if(200===n&&0===i.code){const{token:e,refreshToken:r}=i.data;Object(l.i)(()=>{t.token=e,t.refreshToken=r}),f=!1,g.forEach(t=>{t.resolve(e)})}else{if(200!==n||3010!==i.code&&3012!==i.code)throw new Error(null==i?void 0:i.message);t.setOutdated(),f=!1,g.forEach(t=>{t.reject(i.message)})}}catch(t){f=!1,g.forEach(e=>{e.reject(t)})}}});var y=r(26);r(60);const v=["params","data","_auth"],b=async t=>{const{slave:e}=await r.e(37).then(r.bind(null,210)),n=((t,e={})=>{const r=Object.keys(e).map(t=>`${t}=${encodeURIComponent(e[t])}`);return r.length?a()(t).call(t,"?")?t+r.join("&"):t+"?"+r.join("&"):t})(t.url,t.params),{request:i,option:o}=(t=>{const e={},r={};return t.data&&!e.body&&(e.body=JSON.stringify(t.data)),Object.keys(t).forEach(n=>{a()(v).call(v,n)||(n.startsWith("_")?r[n]=t[n]:e[n]=t[n])}),{request:e,option:r}})(t);return e.postTask("slave:fetch",{url:n,request:i,option:o})},w=c.a.CancelToken,x=c.a.create({timeout:6e4});x.interceptors.response.use(null,t=>(t.message=i18n("network_error"),i.a.reject(t)));const k=Object.create(null),S=t=>{k[t]&&k[t]()},O=async t=>{var e,n;if(t._single){const e=(t=>{let e;return e=!0===t._single?t.method+"-"+t.url.split("?")[0]:t._single,e})(t);k[e]&&k[e](),t.cancelToken=new w(t=>{k[e]=t})}t._delay&&await(n=t._delay,new i.a(t=>{setTimeout(t,n)}));const o={};if(t._auth){let e=null;if(h.a){const t=u.l&&window.updateFromThirtyFiveStatus,{data:r}=await p.k.read(t?"localstorage":null);e=r}else{const{userStore:t}=await Promise.all([r.e(0),r.e(1),r.e(5)]).then(r.bind(null,603));e=t}if(!e||!e.token)throw new Error("error token");{const r=y.a.parseJwt(e.token),n=await y.a.getTimestamp();if(t._Authorization)o.Authorization=t._Authorization,o["i-token"]=t._Authorization;else if(Math.floor(n/1e3)>r.exp-60){const t=await m();o.Authorization="Bearer "+t,o["i-token"]="Bearer "+t}else o.Authorization="Bearer "+e.token,o["i-token"]="Bearer "+e.token}}let s;if(a()(e=t.url).call(e,u.y)&&(o["i-lang"]=u.D.lang,o["i-edition"]=u.e,o["i-version"]=u.D.extVersion),t.headers=Object.assign(Object.assign({},o),t.headers),s=t._proxy?await b(t):await x(t),t._responseAll)return s;let{data:c}=s;if(!t._Authorization&&3010===(null==c?void 0:c.code)){const e=await m();t._Authorization="Bearer "+e,delete t.headers.Authorization,delete t.headers["i-token"],c=await O(t)}return c};["get","delete"].forEach(t=>{O[t]=(e,r,n={})=>O(Object.assign({url:e,params:r,method:t},n))}),["post","patch","put"].forEach(t=>{O[t]=(e,r,n={})=>O(Object.assign({url:e,data:r,method:t},n))}),O.jsonp=(t,e,r={})=>O(Object.assign({url:t,params:e},r))},function(t,e,r){"use strict";(function(t,n){r.d(e,"a",(function(){return Nt})),r.d(e,"b",(function(){return Kt})),r.d(e,"c",(function(){return Jt})),r.d(e,"d",(function(){return _})),r.d(e,"e",(function(){return rt})),r.d(e,"f",(function(){return ne})),r.d(e,"g",(function(){return X})),r.d(e,"h",(function(){return te})),r.d(e,"i",(function(){return Yt})),r.d(e,"j",(function(){return fe}));var i=[];Object.freeze(i);var o={};function a(){return++Lt.mobxGuid}function s(t){throw c(!1,t),"X"}function c(t,e){if(!t)throw new Error("[mobx] "+(e||"An invariant failed, however the error is obfuscated because this is a production build."))}Object.freeze(o);function u(t){var e=!1;return function(){if(!e)return e=!0,t.apply(this,arguments)}}var l=function(){};function h(t){return null!==t&&"object"==typeof t}function p(t){if(null===t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}function d(t,e,r){Object.defineProperty(t,e,{enumerable:!1,writable:!0,configurable:!0,value:r})}function f(t,e){var r="isMobX"+t;return e.prototype[r]=!0,function(t){return h(t)&&!0===t[r]}}function g(t){return t instanceof Map}function m(t){return t instanceof Set}function y(t){var e=new Set;for(var r in t)e.add(r);return Object.getOwnPropertySymbols(t).forEach((function(r){Object.getOwnPropertyDescriptor(t,r).enumerable&&e.add(r)})),Array.from(e)}function v(t){return t&&t.toString?t.toString():new String(t).toString()}function b(t){return null===t?null:"object"==typeof t?""+t:t}var w="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,x=Symbol("mobx administration"),k=function(){function t(t){void 0===t&&(t="Atom@"+a()),this.name=t,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=Z.NOT_TRACKING}return t.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach((function(t){return t()}))},t.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach((function(t){return t()}))},t.prototype.reportObserved=function(){return Bt(this)},t.prototype.reportChanged=function(){It(),function(t){if(t.lowestObserverState===Z.STALE)return;t.lowestObserverState=Z.STALE,t.observers.forEach((function(e){e.dependenciesState===Z.UP_TO_DATE&&(e.isTracing!==Q.NONE&&Ut(e,t),e.onBecomeStale()),e.dependenciesState=Z.STALE}))}(this),Dt()},t.prototype.toString=function(){return this.name},t}(),S=f("Atom",k);function O(t,e,r){void 0===e&&(e=l),void 0===r&&(r=l);var n,i=new k(t);return e!==l&&re("onBecomeObserved",i,e,n),r!==l&&ee(i,r),i}var _={identity:function(t,e){return t===e},structural:function(t,e){return Je(t,e)},default:function(t,e){return Object.is(t,e)},shallow:function(t,e){return Je(t,e,1)}},A=function(t,e){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var T=function(){return(T=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function j(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}function C(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function E(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(C(arguments[e]));return t}var L=Symbol("mobx did run lazy initializers"),R=Symbol("mobx pending decorators"),P={},M={};function I(t,e){var r=e?P:M;return r[t]||(r[t]={configurable:!0,enumerable:e,get:function(){return D(this),this[t]},set:function(e){D(this),this[t]=e}})}function D(t){var e,r;if(!0!==t[L]){var n=t[R];if(n){d(t,L,!0);var i=E(Object.getOwnPropertySymbols(n),Object.keys(n));try{for(var o=j(i),a=o.next();!a.done;a=o.next()){var s=n[a.value];s.propertyCreator(t,s.prop,s.descriptor,s.decoratorTarget,s.decoratorArguments)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}}}}function B(t,e){return function(){var r,n=function(n,i,o,a){if(!0===a)return e(n,i,o,n,r),null;if(!Object.prototype.hasOwnProperty.call(n,R)){var s=n[R];d(n,R,T({},s))}return n[R][i]={prop:i,propertyCreator:e,descriptor:o,decoratorTarget:n,decoratorArguments:r},I(i,t)};return U(arguments)?(r=i,n.apply(null,arguments)):(r=Array.prototype.slice.call(arguments),n)}}function U(t){return(2===t.length||3===t.length)&&("string"==typeof t[1]||"symbol"==typeof t[1])||4===t.length&&!0===t[3]}function N(t,e,r){return le(t)?t:Array.isArray(t)?X.array(t,{name:r}):p(t)?X.object(t,void 0,{name:r}):g(t)?X.map(t,{name:r}):m(t)?X.set(t,{name:r}):t}function z(t){return t}function W(e){c(e);var r=B(!0,(function(t,r,n,i,o){var a=n?n.initializer?n.initializer.call(t):n.value:void 0;qe(t).addObservableProp(r,a,e)})),n=(void 0!==t&&t.env,r);return n.enhancer=e,n}var q={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function $(t){return null==t?q:"string"==typeof t?{name:t,deep:!0,proxy:!0}:t}Object.freeze(q);var H=W(N),V=W((function(t,e,r){return null==t||Ge(t)||Pe(t)||Be(t)||ze(t)?t:Array.isArray(t)?X.array(t,{name:r,deep:!1}):p(t)?X.object(t,void 0,{name:r,deep:!1}):g(t)?X.map(t,{name:r,deep:!1}):m(t)?X.set(t,{name:r,deep:!1}):s(!1)})),F=W(z),G=W((function(t,e,r){return Je(t,e)?e:t}));function K(t){return t.defaultDecorator?t.defaultDecorator.enhancer:!1===t.deep?z:N}var Y={box:function(t,e){arguments.length>2&&J("box");var r=$(e);return new kt(t,K(r),r.name,!0,r.equals)},array:function(t,e){arguments.length>2&&J("array");var r=$(e);return je(t,K(r),r.name)},map:function(t,e){arguments.length>2&&J("map");var r=$(e);return new De(t,K(r),r.name)},set:function(t,e){arguments.length>2&&J("set");var r=$(e);return new Ne(t,K(r),r.name)},object:function(t,e,r){"string"==typeof arguments[1]&&J("object");var n=$(r);if(!1===n.proxy)return ie({},t,e,n);var i=oe(n),o=ie({},void 0,void 0,n),a=we(o);return ae(a,t,e,i),a},ref:F,shallow:V,deep:H,struct:G},X=function(t,e,r){if("string"==typeof arguments[1]||"symbol"==typeof arguments[1])return H.apply(null,arguments);if(le(t))return t;var n=p(t)?X.object(t,e,r):Array.isArray(t)?X.array(t,e):g(t)?X.map(t,e):m(t)?X.set(t,e):t;if(n!==t)return n;s(!1)};function J(t){s("Expected one or two arguments to observable."+t+". Did you accidentally try to use observable."+t+" as decorator?")}Object.keys(Y).forEach((function(t){return X[t]=Y[t]}));var Z,Q,tt=B(!1,(function(t,e,r,n,i){var o=r.get,a=r.set,s=i[0]||{};qe(t).addComputedProp(t,e,T({get:o,set:a,context:t},s))})),et=tt({equals:_.structural}),rt=function(t,e,r){if("string"==typeof e)return tt.apply(null,arguments);if(null!==t&&"object"==typeof t&&1===arguments.length)return tt.apply(null,arguments);var n="object"==typeof e?e:{};return n.get=t,n.set="function"==typeof e?e:n.set,n.name=n.name||t.name||"",new Ot(n)};rt.struct=et,function(t){t[t.NOT_TRACKING=-1]="NOT_TRACKING",t[t.UP_TO_DATE=0]="UP_TO_DATE",t[t.POSSIBLY_STALE=1]="POSSIBLY_STALE",t[t.STALE=2]="STALE"}(Z||(Z={})),function(t){t[t.NONE=0]="NONE",t[t.LOG=1]="LOG",t[t.BREAK=2]="BREAK"}(Q||(Q={}));var nt=function(t){this.cause=t};function it(t){return t instanceof nt}function ot(t){switch(t.dependenciesState){case Z.UP_TO_DATE:return!1;case Z.NOT_TRACKING:case Z.STALE:return!0;case Z.POSSIBLY_STALE:for(var e=pt(!0),r=lt(),n=t.observing,i=n.length,o=0;o<i;o++){var a=n[o];if(_t(a)){if(Lt.disableErrorBoundaries)a.get();else try{a.get()}catch(t){return ht(r),dt(e),!0}if(t.dependenciesState===Z.STALE)return ht(r),dt(e),!0}}return ft(t),ht(r),dt(e),!1}}function at(t){var e=t.observers.size>0;Lt.computationDepth>0&&e&&s(!1),Lt.allowStateChanges||!e&&"strict"!==Lt.enforceActions||s(!1)}function st(t,e,r){var n=pt(!0);ft(t),t.newObserving=new Array(t.observing.length+100),t.unboundDepsCount=0,t.runId=++Lt.runId;var i,o=Lt.trackingDerivation;if(Lt.trackingDerivation=t,!0===Lt.disableErrorBoundaries)i=e.call(r);else try{i=e.call(r)}catch(t){i=new nt(t)}return Lt.trackingDerivation=o,function(t){for(var e=t.observing,r=t.observing=t.newObserving,n=Z.UP_TO_DATE,i=0,o=t.unboundDepsCount,a=0;a<o;a++){0===(s=r[a]).diffValue&&(s.diffValue=1,i!==a&&(r[i]=s),i++),s.dependenciesState>n&&(n=s.dependenciesState)}r.length=i,t.newObserving=null,o=e.length;for(;o--;){0===(s=e[o]).diffValue&&Pt(s,t),s.diffValue=0}for(;i--;){var s;1===(s=r[i]).diffValue&&(s.diffValue=0,Rt(s,t))}n!==Z.UP_TO_DATE&&(t.dependenciesState=n,t.onBecomeStale())}(t),dt(n),i}function ct(t){var e=t.observing;t.observing=[];for(var r=e.length;r--;)Pt(e[r],t);t.dependenciesState=Z.NOT_TRACKING}function ut(t){var e=lt();try{return t()}finally{ht(e)}}function lt(){var t=Lt.trackingDerivation;return Lt.trackingDerivation=null,t}function ht(t){Lt.trackingDerivation=t}function pt(t){var e=Lt.allowStateReads;return Lt.allowStateReads=t,e}function dt(t){Lt.allowStateReads=t}function ft(t){if(t.dependenciesState!==Z.UP_TO_DATE){t.dependenciesState=Z.UP_TO_DATE;for(var e=t.observing,r=e.length;r--;)e[r].lowestObserverState=Z.UP_TO_DATE}}var gt=0,mt=1,yt=Object.getOwnPropertyDescriptor((function(){}),"name");yt&&yt.configurable;function vt(t,e,r){var n=function(){return bt(t,e,r||this,arguments)};return n.isMobxAction=!0,n}function bt(t,e,r,n){var i=function(t,e,r){var n=0;var i=lt();It();var o=wt(!0),a=pt(!0),s={prevDerivation:i,prevAllowStateChanges:o,prevAllowStateReads:a,notifySpy:!1,startTime:n,actionId:mt++,parentActionId:gt};return gt=s.actionId,s}();try{return e.apply(r,n)}catch(t){throw i.error=t,t}finally{!function(t){gt!==t.actionId&&s("invalid action stack. did you forget to finish an action?");gt=t.parentActionId,void 0!==t.error&&(Lt.suppressReactionErrors=!0);xt(t.prevAllowStateChanges),dt(t.prevAllowStateReads),Dt(),ht(t.prevDerivation),t.notifySpy&&!1;Lt.suppressReactionErrors=!1}(i)}}function wt(t){var e=Lt.allowStateChanges;return Lt.allowStateChanges=t,e}function xt(t){Lt.allowStateChanges=t}var kt=function(t){function e(e,r,n,i,o){void 0===n&&(n="ObservableValue@"+a()),void 0===i&&(i=!0),void 0===o&&(o=_.default);var s=t.call(this,n)||this;return s.enhancer=r,s.name=n,s.equals=o,s.hasUnreportedChange=!1,s.value=r(e,void 0,n),s}return function(t,e){function r(){this.constructor=t}A(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.prototype.set=function(t){this.value;if((t=this.prepareNewValue(t))!==Lt.UNCHANGED){0,this.setNewValue(t)}},e.prototype.prepareNewValue=function(t){if(at(this),xe(this)){var e=Se(this,{object:this,type:"update",newValue:t});if(!e)return Lt.UNCHANGED;t=e.newValue}return t=this.enhancer(t,this.value,this.name),this.equals(this.value,t)?Lt.UNCHANGED:t},e.prototype.setNewValue=function(t){var e=this.value;this.value=t,this.reportChanged(),Oe(this)&&Ae(this,{type:"update",object:this,newValue:t,oldValue:e})},e.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},e.prototype.intercept=function(t){return ke(this,t)},e.prototype.observe=function(t,e){return e&&t({object:this,type:"update",newValue:this.value,oldValue:void 0}),_e(this,t)},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.value+"]"},e.prototype.valueOf=function(){return b(this.get())},e.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},e}(k),St=f("ObservableValue",kt),Ot=function(){function t(t){this.dependenciesState=Z.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=Z.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+a(),this.value=new nt(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=Q.NONE,c(t.get,"missing option for computed: get"),this.derivation=t.get,this.name=t.name||"ComputedValue@"+a(),t.set&&(this.setter=vt(this.name+"-setter",t.set)),this.equals=t.equals||(t.compareStructural||t.struct?_.structural:_.default),this.scope=t.context,this.requiresReaction=!!t.requiresReaction,this.keepAlive=!!t.keepAlive}return t.prototype.onBecomeStale=function(){!function(t){if(t.lowestObserverState!==Z.UP_TO_DATE)return;t.lowestObserverState=Z.POSSIBLY_STALE,t.observers.forEach((function(e){e.dependenciesState===Z.UP_TO_DATE&&(e.dependenciesState=Z.POSSIBLY_STALE,e.isTracing!==Q.NONE&&Ut(e,t),e.onBecomeStale())}))}(this)},t.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach((function(t){return t()}))},t.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach((function(t){return t()}))},t.prototype.get=function(){this.isComputing&&s("Cycle detected in computation "+this.name+": "+this.derivation),0!==Lt.inBatch||0!==this.observers.size||this.keepAlive?(Bt(this),ot(this)&&this.trackAndCompute()&&function(t){if(t.lowestObserverState===Z.STALE)return;t.lowestObserverState=Z.STALE,t.observers.forEach((function(e){e.dependenciesState===Z.POSSIBLY_STALE?e.dependenciesState=Z.STALE:e.dependenciesState===Z.UP_TO_DATE&&(t.lowestObserverState=Z.UP_TO_DATE)}))}(this)):ot(this)&&(this.warnAboutUntrackedRead(),It(),this.value=this.computeValue(!1),Dt());var t=this.value;if(it(t))throw t.cause;return t},t.prototype.peek=function(){var t=this.computeValue(!1);if(it(t))throw t.cause;return t},t.prototype.set=function(t){if(this.setter){c(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,t)}finally{this.isRunningSetter=!1}}else c(!1,!1)},t.prototype.trackAndCompute=function(){var t=this.value,e=this.dependenciesState===Z.NOT_TRACKING,r=this.computeValue(!0),n=e||it(t)||it(r)||!this.equals(t,r);return n&&(this.value=r),n},t.prototype.computeValue=function(t){var e;if(this.isComputing=!0,Lt.computationDepth++,t)e=st(this,this.derivation,this.scope);else if(!0===Lt.disableErrorBoundaries)e=this.derivation.call(this.scope);else try{e=this.derivation.call(this.scope)}catch(t){e=new nt(t)}return Lt.computationDepth--,this.isComputing=!1,e},t.prototype.suspend=function(){this.keepAlive||(ct(this),this.value=void 0)},t.prototype.observe=function(t,e){var r=this,n=!0,i=void 0;return Jt((function(){var o=r.get();if(!n||e){var a=lt();t({type:"update",object:r,newValue:o,oldValue:i}),ht(a)}n=!1,i=o}))},t.prototype.warnAboutUntrackedRead=function(){},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},t.prototype.valueOf=function(){return b(this.get())},t.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},t}(),_t=f("ComputedValue",Ot),At=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},Tt={};function jt(){return"undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:Tt}var Ct=!0,Et=!1,Lt=function(){var t=jt();return t.__mobxInstanceCount>0&&!t.__mobxGlobals&&(Ct=!1),t.__mobxGlobals&&t.__mobxGlobals.version!==(new At).version&&(Ct=!1),Ct?t.__mobxGlobals?(t.__mobxInstanceCount+=1,t.__mobxGlobals.UNCHANGED||(t.__mobxGlobals.UNCHANGED={}),t.__mobxGlobals):(t.__mobxInstanceCount=1,t.__mobxGlobals=new At):(setTimeout((function(){Et||s("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")}),1),new At)}();function Rt(t,e){t.observers.add(e),t.lowestObserverState>e.dependenciesState&&(t.lowestObserverState=e.dependenciesState)}function Pt(t,e){t.observers.delete(e),0===t.observers.size&&Mt(t)}function Mt(t){!1===t.isPendingUnobservation&&(t.isPendingUnobservation=!0,Lt.pendingUnobservations.push(t))}function It(){Lt.inBatch++}function Dt(){if(0==--Lt.inBatch){Wt();for(var t=Lt.pendingUnobservations,e=0;e<t.length;e++){var r=t[e];r.isPendingUnobservation=!1,0===r.observers.size&&(r.isBeingObserved&&(r.isBeingObserved=!1,r.onBecomeUnobserved()),r instanceof Ot&&r.suspend())}Lt.pendingUnobservations=[]}}function Bt(t){var e=Lt.trackingDerivation;return null!==e?(e.runId!==t.lastAccessedBy&&(t.lastAccessedBy=e.runId,e.newObserving[e.unboundDepsCount++]=t,t.isBeingObserved||(t.isBeingObserved=!0,t.onBecomeObserved())),!0):(0===t.observers.size&&Lt.inBatch>0&&Mt(t),!1)}function Ut(t,e){if(console.log("[mobx.trace] '"+t.name+"' is invalidated due to a change in: '"+e.name+"'"),t.isTracing===Q.BREAK){var r=[];!function t(e,r,n){if(r.length>=1e3)return void r.push("(and many more)");r.push(""+new Array(n).join("\t")+e.name),e.dependencies&&e.dependencies.forEach((function(e){return t(e,r,n+1)}))}((n=t,se(Ke(n,i))),r,1),new Function("debugger;\n/*\nTracing '"+t.name+"'\n\nYou are entering this break point because derivation '"+t.name+"' is being traced and '"+e.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(t instanceof Ot?t.derivation.toString().replace(/[*]\//g,"/"):"")+"\n\nThe dependencies for this derivation are:\n\n"+r.join("\n")+"\n*/\n    ")()}var n,i}var Nt=function(){function t(t,e,r,n){void 0===t&&(t="Reaction@"+a()),void 0===n&&(n=!1),this.name=t,this.onInvalidate=e,this.errorHandler=r,this.requiresObservable=n,this.observing=[],this.newObserving=[],this.dependenciesState=Z.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+a(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=Q.NONE}return t.prototype.onBecomeStale=function(){this.schedule()},t.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Lt.pendingReactions.push(this),Wt())},t.prototype.isScheduled=function(){return this._isScheduled},t.prototype.runReaction=function(){if(!this.isDisposed){if(It(),this._isScheduled=!1,ot(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending}catch(t){this.reportExceptionInDerivation(t)}}Dt()}},t.prototype.track=function(t){if(!this.isDisposed){It();0,this._isRunning=!0;var e=st(this,t,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&ct(this),it(e)&&this.reportExceptionInDerivation(e.cause),Dt()}},t.prototype.reportExceptionInDerivation=function(t){var e=this;if(this.errorHandler)this.errorHandler(t,this);else{if(Lt.disableErrorBoundaries)throw t;var r="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";Lt.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(r,t),Lt.globalReactionErrorHandlers.forEach((function(r){return r(t,e)}))}},t.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(It(),ct(this),Dt()))},t.prototype.getDisposer=function(){var t=this.dispose.bind(this);return t[x]=this,t},t.prototype.toString=function(){return"Reaction["+this.name+"]"},t.prototype.trace=function(t){void 0===t&&(t=!1),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=!1;"boolean"==typeof t[t.length-1]&&(r=t.pop());var n=ge(t);if(!n)return s(!1);n.isTracing===Q.NONE&&console.log("[mobx.trace] '"+n.name+"' tracing enabled");n.isTracing=r?Q.BREAK:Q.LOG}(this,t)},t}();var zt=function(t){return t()};function Wt(){Lt.inBatch>0||Lt.isRunningReactions||zt(qt)}function qt(){Lt.isRunningReactions=!0;for(var t=Lt.pendingReactions,e=0;t.length>0;){100==++e&&(console.error("Reaction doesn't converge to a stable state after 100 iterations. Probably there is a cycle in the reactive function: "+t[0]),t.splice(0));for(var r=t.splice(0),n=0,i=r.length;n<i;n++)r[n].runReaction()}Lt.isRunningReactions=!1}var $t=f("Reaction",Nt);function Ht(t){var e=zt;zt=function(r){return t((function(){return e(r)}))}}function Vt(){s(!1)}function Ft(t){return function(e,r,n){if(n){if(n.value)return{value:vt(t,n.value),enumerable:!1,configurable:!0,writable:!0};var i=n.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return vt(t,i.call(this))}}}return Gt(t).apply(this,arguments)}}function Gt(t){return function(e,r,n){Object.defineProperty(e,r,{configurable:!0,enumerable:!1,get:function(){},set:function(e){d(this,r,Kt(t,e))}})}}var Kt=function(t,e,r,n){return 1===arguments.length&&"function"==typeof t?vt(t.name||"<unnamed action>",t):2===arguments.length&&"function"==typeof e?vt(t,e):1===arguments.length&&"string"==typeof t?Ft(t):!0!==n?Ft(e).apply(null,arguments):void d(t,e,vt(t.name||e,r.value,this))};function Yt(t,e){"string"==typeof t||t.name;return bt(0,"function"==typeof t?t:e,this,void 0)}function Xt(t,e,r){d(t,e,vt(e,r.bind(t)))}function Jt(t,e){void 0===e&&(e=o);var r,n=e&&e.name||t.name||"Autorun@"+a();if(!e.scheduler&&!e.delay)r=new Nt(n,(function(){this.track(c)}),e.onError,e.requiresObservable);else{var i=Qt(e),s=!1;r=new Nt(n,(function(){s||(s=!0,i((function(){s=!1,r.isDisposed||r.track(c)})))}),e.onError,e.requiresObservable)}function c(){t(r)}return r.schedule(),r.getDisposer()}Kt.bound=function(t,e,r,n){return!0===n?(Xt(t,e,r.value),null):r?{configurable:!0,enumerable:!1,get:function(){return Xt(this,e,r.value||r.initializer.call(this)),this[e]},set:Vt}:{enumerable:!1,configurable:!0,set:function(t){Xt(this,e,t)},get:function(){}}};var Zt=function(t){return t()};function Qt(t){return t.scheduler?t.scheduler:t.delay?function(e){return setTimeout(e,t.delay)}:Zt}function te(t,e,r){void 0===r&&(r=o);var n,i,s,c=r.name||"Reaction@"+a(),u=Kt(c,r.onError?(n=r.onError,i=e,function(){try{return i.apply(this,arguments)}catch(t){n.call(this,t)}}):e),l=!r.scheduler&&!r.delay,h=Qt(r),p=!0,d=!1,f=r.compareStructural?_.structural:r.equals||_.default,g=new Nt(c,(function(){p||l?m():d||(d=!0,h(m))}),r.onError,r.requiresObservable);function m(){if(d=!1,!g.isDisposed){var e=!1;g.track((function(){var r=t(g);e=p||!f(s,r),s=r})),p&&r.fireImmediately&&u(s,g),p||!0!==e||u(s,g),p&&(p=!1)}}return g.schedule(),g.getDisposer()}function ee(t,e,r){return re("onBecomeUnobserved",t,e,r)}function re(t,e,r,n){var i="function"==typeof n?Ke(e,r):Ke(e),o="function"==typeof n?n:r,a=t+"Listeners";return i[a]?i[a].add(o):i[a]=new Set([o]),"function"!=typeof i[t]?s(!1):function(){var t=i[a];t&&(t.delete(o),0===t.size&&delete i[a])}}function ne(t){var e=t.enforceActions,r=t.computedRequiresReaction,n=t.computedConfigurable,i=t.disableErrorBoundaries,o=t.reactionScheduler,a=t.reactionRequiresObservable,c=t.observableRequiresReaction;if(!0===t.isolateGlobalState&&((Lt.pendingReactions.length||Lt.inBatch||Lt.isRunningReactions)&&s("isolateGlobalState should be called before MobX is running any reactions"),Et=!0,Ct&&(0==--jt().__mobxInstanceCount&&(jt().__mobxGlobals=void 0),Lt=new At)),void 0!==e){var u=void 0;switch(e){case!0:case"observed":u=!0;break;case!1:case"never":u=!1;break;case"strict":case"always":u="strict";break;default:s("Invalid value for 'enforceActions': '"+e+"', expected 'never', 'always' or 'observed'")}Lt.enforceActions=u,Lt.allowStateChanges=!0!==u&&"strict"!==u}void 0!==r&&(Lt.computedRequiresReaction=!!r),void 0!==a&&(Lt.reactionRequiresObservable=!!a),void 0!==c&&(Lt.observableRequiresReaction=!!c,Lt.allowStateReads=!Lt.observableRequiresReaction),void 0!==n&&(Lt.computedConfigurable=!!n),void 0!==i&&(!0===i&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled."),Lt.disableErrorBoundaries=!!i),o&&Ht(o)}function ie(t,e,r,n){var i=oe(n=$(n));return D(t),qe(t,n.name,i.enhancer),e&&ae(t,e,r,i),t}function oe(t){return t.defaultDecorator||(!1===t.deep?F:H)}function ae(t,e,r,n){var i,o;It();try{var a=w(e);try{for(var s=j(a),c=s.next();!c.done;c=s.next()){var u=c.value,l=Object.getOwnPropertyDescriptor(e,u);0;var h=(r&&u in r?r[u]:l.get?tt:n)(t,u,l,!0);h&&Object.defineProperty(t,u,h)}}catch(t){i={error:t}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}finally{Dt()}}function se(t){var e,r,n={name:t.name};return t.observing&&t.observing.length>0&&(n.dependencies=(e=t.observing,r=[],e.forEach((function(t){-1===r.indexOf(t)&&r.push(t)})),r).map(se)),n}function ce(){this.message="FLOW_CANCELLED"}function ue(t,e){return null!=t&&(void 0!==e?!!Ge(t)&&t[x].values.has(e):Ge(t)||!!t[x]||S(t)||$t(t)||_t(t))}function le(t){return 1!==arguments.length&&s(!1),ue(t)}function he(t){return Ge(t)?t[x].getKeys():Be(t)||ze(t)?Array.from(t.keys()):Pe(t)?t.map((function(t,e){return e})):s(!1)}ce.prototype=Object.create(Error.prototype);var pe={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function de(t,e,r,n){return n.detectCycles&&t.set(e,r),r}function fe(t,e){var r;return"boolean"==typeof e&&(e={detectCycles:e}),e||(e=pe),e.detectCycles=void 0===e.detectCycles?!0===e.recurseEverything:!0===e.detectCycles,e.detectCycles&&(r=new Map),function t(e,r,n){if(!r.recurseEverything&&!le(e))return e;if("object"!=typeof e)return e;if(null===e)return null;if(e instanceof Date)return e;if(St(e))return t(e.get(),r,n);if(le(e)&&he(e),!0===r.detectCycles&&null!==e&&n.has(e))return n.get(e);if(Pe(e)||Array.isArray(e)){var i=de(n,e,[],r),o=e.map((function(e){return t(e,r,n)}));i.length=o.length;for(var a=0,s=o.length;a<s;a++)i[a]=o[a];return i}if(ze(e)||Object.getPrototypeOf(e)===Set.prototype){if(!1===r.exportMapsAsObjects){var c=de(n,e,new Set,r);return e.forEach((function(e){c.add(t(e,r,n))})),c}var u=de(n,e,[],r);return e.forEach((function(e){u.push(t(e,r,n))})),u}if(Be(e)||Object.getPrototypeOf(e)===Map.prototype){if(!1===r.exportMapsAsObjects){var l=de(n,e,new Map,r);return e.forEach((function(e,i){l.set(i,t(e,r,n))})),l}var h=de(n,e,{},r);return e.forEach((function(e,i){h[i]=t(e,r,n)})),h}var p=de(n,e,{},r);return y(e).forEach((function(i){p[i]=t(e[i],r,n)})),p}(t,e,r)}function ge(t){switch(t.length){case 0:return Lt.trackingDerivation;case 1:return Ke(t[0]);case 2:return Ke(t[0],t[1])}}function me(t,e){void 0===e&&(e=void 0),It();try{return t.apply(e)}finally{Dt()}}function ye(t){return t[x]}function ve(t){return"string"==typeof t||"number"==typeof t||"symbol"==typeof t}var be={has:function(t,e){if(e===x||"constructor"===e||e===L)return!0;var r=ye(t);return ve(e)?r.has(e):e in t},get:function(t,e){if(e===x||"constructor"===e||e===L)return t[e];var r=ye(t),n=r.values.get(e);if(n instanceof k){var i=n.get();return void 0===i&&r.has(e),i}return ve(e)&&r.has(e),t[e]},set:function(t,e,r){return!!ve(e)&&(function t(e,r,n){if(2!==arguments.length||ze(e))if(Ge(e)){var i=e[x],o=i.values.get(r);o?i.write(r,n):i.addObservableProp(r,n,i.defaultEnhancer)}else if(Be(e))e.set(r,n);else if(ze(e))e.add(r);else{if(!Pe(e))return s(!1);"number"!=typeof r&&(r=parseInt(r,10)),c(r>=0,"Not a valid index: '"+r+"'"),It(),r>=e.length&&(e.length=r+1),e[r]=n,Dt()}else{It();var a=r;try{for(var u in a)t(e,u,a[u])}finally{Dt()}}}(t,e,r),!0)},deleteProperty:function(t,e){return!!ve(e)&&(ye(t).remove(e),!0)},ownKeys:function(t){return ye(t).keysAtom.reportObserved(),Reflect.ownKeys(t)},preventExtensions:function(t){return s("Dynamic observable objects cannot be frozen"),!1}};function we(t){var e=new Proxy(t,be);return t[x].proxy=e,e}function xe(t){return void 0!==t.interceptors&&t.interceptors.length>0}function ke(t,e){var r=t.interceptors||(t.interceptors=[]);return r.push(e),u((function(){var t=r.indexOf(e);-1!==t&&r.splice(t,1)}))}function Se(t,e){var r=lt();try{for(var n=E(t.interceptors||[]),i=0,o=n.length;i<o&&(c(!(e=n[i](e))||e.type,"Intercept handlers should return nothing or a change object"),e);i++);return e}finally{ht(r)}}function Oe(t){return void 0!==t.changeListeners&&t.changeListeners.length>0}function _e(t,e){var r=t.changeListeners||(t.changeListeners=[]);return r.push(e),u((function(){var t=r.indexOf(e);-1!==t&&r.splice(t,1)}))}function Ae(t,e){var r=lt(),n=t.changeListeners;if(n){for(var i=0,o=(n=n.slice()).length;i<o;i++)n[i](e);ht(r)}}var Te={get:function(t,e){return e===x?t[x]:"length"===e?t[x].getArrayLength():"number"==typeof e?Ee.get.call(t,e):"string"!=typeof e||isNaN(e)?Ee.hasOwnProperty(e)?Ee[e]:t[e]:Ee.get.call(t,parseInt(e))},set:function(t,e,r){return"length"===e&&t[x].setArrayLength(r),"number"==typeof e&&Ee.set.call(t,e,r),"symbol"==typeof e||isNaN(e)?t[e]=r:Ee.set.call(t,parseInt(e),r),!0},preventExtensions:function(t){return s("Observable arrays cannot be frozen"),!1}};function je(t,e,r,n){void 0===r&&(r="ObservableArray@"+a()),void 0===n&&(n=!1);var i,o,s,c=new Ce(r,e,n);i=c.values,o=x,s=c,Object.defineProperty(i,o,{enumerable:!1,writable:!1,configurable:!0,value:s});var u=new Proxy(c.values,Te);if(c.proxy=u,t&&t.length){var l=wt(!0);c.spliceWithArray(0,0,t),xt(l)}return u}var Ce=function(){function t(t,e,r){this.owned=r,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new k(t||"ObservableArray@"+a()),this.enhancer=function(r,n){return e(r,n,t+"[..]")}}return t.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},t.prototype.dehanceValues=function(t){return void 0!==this.dehancer&&t.length>0?t.map(this.dehancer):t},t.prototype.intercept=function(t){return ke(this,t)},t.prototype.observe=function(t,e){return void 0===e&&(e=!1),e&&t({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),_e(this,t)},t.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},t.prototype.setArrayLength=function(t){if("number"!=typeof t||t<0)throw new Error("[mobx.array] Out of range: "+t);var e=this.values.length;if(t!==e)if(t>e){for(var r=new Array(t-e),n=0;n<t-e;n++)r[n]=void 0;this.spliceWithArray(e,0,r)}else this.spliceWithArray(t,e-t)},t.prototype.updateArrayLength=function(t,e){if(t!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=e},t.prototype.spliceWithArray=function(t,e,r){var n=this;at(this.atom);var o=this.values.length;if(void 0===t?t=0:t>o?t=o:t<0&&(t=Math.max(0,o+t)),e=1===arguments.length?o-t:null==e?0:Math.max(0,Math.min(e,o-t)),void 0===r&&(r=i),xe(this)){var a=Se(this,{object:this.proxy,type:"splice",index:t,removedCount:e,added:r});if(!a)return i;e=a.removedCount,r=a.added}r=0===r.length?r:r.map((function(t){return n.enhancer(t,void 0)}));var s=this.spliceItemsIntoValues(t,e,r);return 0===e&&0===r.length||this.notifyArraySplice(t,r,s),this.dehanceValues(s)},t.prototype.spliceItemsIntoValues=function(t,e,r){var n;if(r.length<1e4)return(n=this.values).splice.apply(n,E([t,e],r));var i=this.values.slice(t,t+e);return this.values=this.values.slice(0,t).concat(r,this.values.slice(t+e)),i},t.prototype.notifyArrayChildUpdate=function(t,e,r){var n=!this.owned&&!1,i=Oe(this),o=i||n?{object:this.proxy,type:"update",index:t,newValue:e,oldValue:r}:null;this.atom.reportChanged(),i&&Ae(this,o)},t.prototype.notifyArraySplice=function(t,e,r){var n=!this.owned&&!1,i=Oe(this),o=i||n?{object:this.proxy,type:"splice",index:t,removed:r,added:e,removedCount:r.length,addedCount:e.length}:null;this.atom.reportChanged(),i&&Ae(this,o)},t}(),Ee={intercept:function(t){return this[x].intercept(t)},observe:function(t,e){return void 0===e&&(e=!1),this[x].observe(t,e)},clear:function(){return this.splice(0)},replace:function(t){var e=this[x];return e.spliceWithArray(0,e.values.length,t)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=this[x];switch(arguments.length){case 0:return[];case 1:return i.spliceWithArray(t);case 2:return i.spliceWithArray(t,e)}return i.spliceWithArray(t,e,r)},spliceWithArray:function(t,e,r){return this[x].spliceWithArray(t,e,r)},push:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this[x];return r.spliceWithArray(r.values.length,0,t),r.values.length},pop:function(){return this.splice(Math.max(this[x].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this[x];return r.spliceWithArray(0,0,t),r.values.length},reverse:function(){var t=this.slice();return t.reverse.apply(t,arguments)},sort:function(t){var e=this.slice();return e.sort.apply(e,arguments)},remove:function(t){var e=this[x],r=e.dehanceValues(e.values).indexOf(t);return r>-1&&(this.splice(r,1),!0)},get:function(t){var e=this[x];if(e){if(t<e.values.length)return e.atom.reportObserved(),e.dehanceValue(e.values[t]);console.warn("[mobx.array] Attempt to read an array index ("+t+") that is out of bounds ("+e.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},set:function(t,e){var r=this[x],n=r.values;if(t<n.length){at(r.atom);var i=n[t];if(xe(r)){var o=Se(r,{type:"update",object:r.proxy,index:t,newValue:e});if(!o)return;e=o.newValue}(e=r.enhancer(e,i))!==i&&(n[t]=e,r.notifyArrayChildUpdate(t,e,i))}else{if(t!==n.length)throw new Error("[mobx.array] Index out of bounds, "+t+" is larger than "+n.length);r.spliceWithArray(t,0,[e])}}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach((function(t){"function"==typeof Array.prototype[t]&&(Ee[t]=function(){var e=this[x];e.atom.reportObserved();var r=e.dehanceValues(e.values);return r[t].apply(r,arguments)})})),["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach((function(t){"function"==typeof Array.prototype[t]&&(Ee[t]=function(e,r){var n=this,i=this[x];return i.atom.reportObserved(),i.dehanceValues(i.values)[t]((function(t,i){return e.call(r,t,i,n)}),r)})})),["reduce","reduceRight"].forEach((function(t){Ee[t]=function(){var e=this,r=this[x];r.atom.reportObserved();var n=arguments[0];return arguments[0]=function(t,i,o){return i=r.dehanceValue(i),n(t,i,o,e)},r.values[t].apply(r.values,arguments)}}));var Le,Re=f("ObservableArrayAdministration",Ce);function Pe(t){return h(t)&&Re(t[x])}var Me,Ie={},De=function(){function t(t,e,r){if(void 0===e&&(e=N),void 0===r&&(r="ObservableMap@"+a()),this.enhancer=e,this.name=r,this[Le]=Ie,this._keysAtom=O(this.name+".keys()"),this[Symbol.toStringTag]="Map","function"!=typeof Map)throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(t)}return t.prototype._has=function(t){return this._data.has(t)},t.prototype.has=function(t){var e=this;if(!Lt.trackingDerivation)return this._has(t);var r=this._hasMap.get(t);if(!r){var n=r=new kt(this._has(t),z,this.name+"."+v(t)+"?",!1);this._hasMap.set(t,n),ee(n,(function(){return e._hasMap.delete(t)}))}return r.get()},t.prototype.set=function(t,e){var r=this._has(t);if(xe(this)){var n=Se(this,{type:r?"update":"add",object:this,newValue:e,name:t});if(!n)return this;e=n.newValue}return r?this._updateValue(t,e):this._addValue(t,e),this},t.prototype.delete=function(t){var e=this;if((at(this._keysAtom),xe(this))&&!(n=Se(this,{type:"delete",object:this,name:t})))return!1;if(this._has(t)){var r=Oe(this),n=r?{type:"delete",object:this,oldValue:this._data.get(t).value,name:t}:null;return me((function(){e._keysAtom.reportChanged(),e._updateHasMapEntry(t,!1),e._data.get(t).setNewValue(void 0),e._data.delete(t)})),r&&Ae(this,n),!0}return!1},t.prototype._updateHasMapEntry=function(t,e){var r=this._hasMap.get(t);r&&r.setNewValue(e)},t.prototype._updateValue=function(t,e){var r=this._data.get(t);if((e=r.prepareNewValue(e))!==Lt.UNCHANGED){var n=Oe(this),i=n?{type:"update",object:this,oldValue:r.value,name:t,newValue:e}:null;0,r.setNewValue(e),n&&Ae(this,i)}},t.prototype._addValue=function(t,e){var r=this;at(this._keysAtom),me((function(){var n=new kt(e,r.enhancer,r.name+"."+v(t),!1);r._data.set(t,n),e=n.value,r._updateHasMapEntry(t,!0),r._keysAtom.reportChanged()}));var n=Oe(this),i=n?{type:"add",object:this,name:t,newValue:e}:null;n&&Ae(this,i)},t.prototype.get=function(t){return this.has(t)?this.dehanceValue(this._data.get(t).get()):this.dehanceValue(void 0)},t.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},t.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},t.prototype.values=function(){var t=this,e=this.keys();return tr({next:function(){var r=e.next(),n=r.done,i=r.value;return{done:n,value:n?void 0:t.get(i)}}})},t.prototype.entries=function(){var t=this,e=this.keys();return tr({next:function(){var r=e.next(),n=r.done,i=r.value;return{done:n,value:n?void 0:[i,t.get(i)]}}})},t.prototype[(Le=x,Symbol.iterator)]=function(){return this.entries()},t.prototype.forEach=function(t,e){var r,n;try{for(var i=j(this),o=i.next();!o.done;o=i.next()){var a=C(o.value,2),s=a[0],c=a[1];t.call(e,c,s,this)}}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},t.prototype.merge=function(t){var e=this;return Be(t)&&(t=t.toJS()),me((function(){var r=wt(!0);try{p(t)?y(t).forEach((function(r){return e.set(r,t[r])})):Array.isArray(t)?t.forEach((function(t){var r=C(t,2),n=r[0],i=r[1];return e.set(n,i)})):g(t)?(t.constructor!==Map&&s("Cannot initialize from classes that inherit from Map: "+t.constructor.name),t.forEach((function(t,r){return e.set(r,t)}))):null!=t&&s("Cannot initialize map from "+t)}finally{xt(r)}})),this},t.prototype.clear=function(){var t=this;me((function(){ut((function(){var e,r;try{for(var n=j(t.keys()),i=n.next();!i.done;i=n.next()){var o=i.value;t.delete(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}}))}))},t.prototype.replace=function(t){var e=this;return me((function(){var r,n,i,o,a=function(t){if(g(t)||Be(t))return t;if(Array.isArray(t))return new Map(t);if(p(t)){var e=new Map;for(var r in t)e.set(r,t[r]);return e}return s("Cannot convert to map from '"+t+"'")}(t),c=new Map,u=!1;try{for(var l=j(e._data.keys()),h=l.next();!h.done;h=l.next()){var d=h.value;if(!a.has(d))if(e.delete(d))u=!0;else{var f=e._data.get(d);c.set(d,f)}}}catch(t){r={error:t}}finally{try{h&&!h.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}try{for(var m=j(a.entries()),y=m.next();!y.done;y=m.next()){var v=C(y.value,2),b=(d=v[0],f=v[1],e._data.has(d));if(e.set(d,f),e._data.has(d)){var w=e._data.get(d);c.set(d,w),b||(u=!0)}}}catch(t){i={error:t}}finally{try{y&&!y.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}if(!u)if(e._data.size!==c.size)e._keysAtom.reportChanged();else for(var x=e._data.keys(),k=c.keys(),S=x.next(),O=k.next();!S.done;){if(S.value!==O.value){e._keysAtom.reportChanged();break}S=x.next(),O=k.next()}e._data=c})),this},Object.defineProperty(t.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),t.prototype.toPOJO=function(){var t,e,r={};try{for(var n=j(this),i=n.next();!i.done;i=n.next()){var o=C(i.value,2),a=o[0],s=o[1];r["symbol"==typeof a?a:v(a)]=s}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return r},t.prototype.toJS=function(){return new Map(this)},t.prototype.toJSON=function(){return this.toPOJO()},t.prototype.toString=function(){var t=this;return this.name+"[{ "+Array.from(this.keys()).map((function(e){return v(e)+": "+t.get(e)})).join(", ")+" }]"},t.prototype.observe=function(t,e){return _e(this,t)},t.prototype.intercept=function(t){return ke(this,t)},t}(),Be=f("ObservableMap",De),Ue={},Ne=function(){function t(t,e,r){if(void 0===e&&(e=N),void 0===r&&(r="ObservableSet@"+a()),this.name=r,this[Me]=Ue,this._data=new Set,this._atom=O(this.name),this[Symbol.toStringTag]="Set","function"!=typeof Set)throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(t,n){return e(t,n,r)},t&&this.replace(t)}return t.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},t.prototype.clear=function(){var t=this;me((function(){ut((function(){var e,r;try{for(var n=j(t._data.values()),i=n.next();!i.done;i=n.next()){var o=i.value;t.delete(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}}))}))},t.prototype.forEach=function(t,e){var r,n;try{for(var i=j(this),o=i.next();!o.done;o=i.next()){var a=o.value;t.call(e,a,a,this)}}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},Object.defineProperty(t.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),t.prototype.add=function(t){var e=this;if((at(this._atom),xe(this))&&!(n=Se(this,{type:"add",object:this,newValue:t})))return this;if(!this.has(t)){me((function(){e._data.add(e.enhancer(t,void 0)),e._atom.reportChanged()}));var r=Oe(this),n=r?{type:"add",object:this,newValue:t}:null;0,r&&Ae(this,n)}return this},t.prototype.delete=function(t){var e=this;if(xe(this)&&!(n=Se(this,{type:"delete",object:this,oldValue:t})))return!1;if(this.has(t)){var r=Oe(this),n=r?{type:"delete",object:this,oldValue:t}:null;return me((function(){e._atom.reportChanged(),e._data.delete(t)})),r&&Ae(this,n),!0}return!1},t.prototype.has=function(t){return this._atom.reportObserved(),this._data.has(this.dehanceValue(t))},t.prototype.entries=function(){var t=0,e=Array.from(this.keys()),r=Array.from(this.values());return tr({next:function(){var n=t;return t+=1,n<r.length?{value:[e[n],r[n]],done:!1}:{done:!0}}})},t.prototype.keys=function(){return this.values()},t.prototype.values=function(){this._atom.reportObserved();var t=this,e=0,r=Array.from(this._data.values());return tr({next:function(){return e<r.length?{value:t.dehanceValue(r[e++]),done:!1}:{done:!0}}})},t.prototype.replace=function(t){var e=this;return ze(t)&&(t=t.toJS()),me((function(){var r=wt(!0);try{Array.isArray(t)||m(t)?(e.clear(),t.forEach((function(t){return e.add(t)}))):null!=t&&s("Cannot initialize set from "+t)}finally{xt(r)}})),this},t.prototype.observe=function(t,e){return _e(this,t)},t.prototype.intercept=function(t){return ke(this,t)},t.prototype.toJS=function(){return new Set(this)},t.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},t.prototype[(Me=x,Symbol.iterator)]=function(){return this.values()},t}(),ze=f("ObservableSet",Ne),We=function(){function t(t,e,r,n){void 0===e&&(e=new Map),this.target=t,this.values=e,this.name=r,this.defaultEnhancer=n,this.keysAtom=new k(r+".keys")}return t.prototype.read=function(t){return this.values.get(t).get()},t.prototype.write=function(t,e){var r=this.target,n=this.values.get(t);if(n instanceof Ot)n.set(e);else{if(xe(this)){if(!(o=Se(this,{type:"update",object:this.proxy||r,name:t,newValue:e})))return;e=o.newValue}if((e=n.prepareNewValue(e))!==Lt.UNCHANGED){var i=Oe(this),o=i?{type:"update",object:this.proxy||r,oldValue:n.value,name:t,newValue:e}:null;0,n.setNewValue(e),i&&Ae(this,o)}}},t.prototype.has=function(t){var e=this.pendingKeys||(this.pendingKeys=new Map),r=e.get(t);if(r)return r.get();var n=!!this.values.get(t);return r=new kt(n,z,this.name+"."+v(t)+"?",!1),e.set(t,r),r.get()},t.prototype.addObservableProp=function(t,e,r){void 0===r&&(r=this.defaultEnhancer);var n=this.target;if(xe(this)){var i=Se(this,{object:this.proxy||n,name:t,type:"add",newValue:e});if(!i)return;e=i.newValue}var o=new kt(e,r,this.name+"."+v(t),!1);this.values.set(t,o),e=o.value,Object.defineProperty(n,t,function(t){return $e[t]||($e[t]={configurable:!0,enumerable:!0,get:function(){return this[x].read(t)},set:function(e){this[x].write(t,e)}})}(t)),this.notifyPropertyAddition(t,e)},t.prototype.addComputedProp=function(t,e,r){var n,i,o,a=this.target;r.name=r.name||this.name+"."+v(e),this.values.set(e,new Ot(r)),(t===a||(n=t,i=e,!(o=Object.getOwnPropertyDescriptor(n,i))||!1!==o.configurable&&!1!==o.writable))&&Object.defineProperty(t,e,function(t){return He[t]||(He[t]={configurable:Lt.computedConfigurable,enumerable:!1,get:function(){return Ve(this).read(t)},set:function(e){Ve(this).write(t,e)}})}(e))},t.prototype.remove=function(t){if(this.values.has(t)){var e=this.target;if(xe(this))if(!(a=Se(this,{object:this.proxy||e,name:t,type:"remove"})))return;try{It();var r=Oe(this),n=this.values.get(t),i=n&&n.get();if(n&&n.set(void 0),this.keysAtom.reportChanged(),this.values.delete(t),this.pendingKeys){var o=this.pendingKeys.get(t);o&&o.set(!1)}delete this.target[t];var a=r?{type:"remove",object:this.proxy||e,oldValue:i,name:t}:null;0,r&&Ae(this,a)}finally{Dt()}}},t.prototype.illegalAccess=function(t,e){console.warn("Property '"+e+"' of '"+t+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},t.prototype.observe=function(t,e){return _e(this,t)},t.prototype.intercept=function(t){return ke(this,t)},t.prototype.notifyPropertyAddition=function(t,e){var r=Oe(this),n=r?{type:"add",object:this.proxy||this.target,name:t,newValue:e}:null;if(r&&Ae(this,n),this.pendingKeys){var i=this.pendingKeys.get(t);i&&i.set(!0)}this.keysAtom.reportChanged()},t.prototype.getKeys=function(){var t,e;this.keysAtom.reportObserved();var r=[];try{for(var n=j(this.values),i=n.next();!i.done;i=n.next()){var o=C(i.value,2),a=o[0];o[1]instanceof kt&&r.push(a)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return r},t}();function qe(t,e,r){if(void 0===e&&(e=""),void 0===r&&(r=N),Object.prototype.hasOwnProperty.call(t,x))return t[x];p(t)||(e=(t.constructor.name||"ObservableObject")+"@"+a()),e||(e="ObservableObject@"+a());var n=new We(t,new Map,v(e),r);return d(t,x,n),n}var $e=Object.create(null),He=Object.create(null);function Ve(t){var e=t[x];return e||(D(t),t[x])}var Fe=f("ObservableObjectAdministration",We);function Ge(t){return!!h(t)&&(D(t),Fe(t[x]))}function Ke(t,e){if("object"==typeof t&&null!==t){if(Pe(t))return void 0!==e&&s(!1),t[x].atom;if(ze(t))return t[x];if(Be(t)){var r=t;return void 0===e?r._keysAtom:((n=r._data.get(e)||r._hasMap.get(e))||s(!1),n)}var n;if(D(t),e&&!t[x]&&t[e],Ge(t))return e?((n=t[x].values.get(e))||s(!1),n):s(!1);if(S(t)||_t(t)||$t(t))return t}else if("function"==typeof t&&$t(t[x]))return t[x];return s(!1)}function Ye(t,e){return t||s("Expecting some object"),void 0!==e?Ye(Ke(t,e)):S(t)||_t(t)||$t(t)||Be(t)||ze(t)?t:(D(t),t[x]?t[x]:void s(!1))}var Xe=Object.prototype.toString;function Je(t,e,r){return void 0===r&&(r=-1),function t(e,r,n,i,o){if(e===r)return 0!==e||1/e==1/r;if(null==e||null==r)return!1;if(e!=e)return r!=r;var a=typeof e;if("function"!==a&&"object"!==a&&"object"!=typeof r)return!1;var s=Xe.call(e);if(s!==Xe.call(r))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+r;case"[object Number]":return+e!=+e?+r!=+r:0==+e?1/+e==1/r:+e==+r;case"[object Date]":case"[object Boolean]":return+e==+r;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(r);case"[object Map]":case"[object Set]":n>=0&&n++}e=Ze(e),r=Ze(r);var c="[object Array]"===s;if(!c){if("object"!=typeof e||"object"!=typeof r)return!1;var u=e.constructor,l=r.constructor;if(u!==l&&!("function"==typeof u&&u instanceof u&&"function"==typeof l&&l instanceof l)&&"constructor"in e&&"constructor"in r)return!1}if(0===n)return!1;n<0&&(n=-1);o=o||[];var h=(i=i||[]).length;for(;h--;)if(i[h]===e)return o[h]===r;if(i.push(e),o.push(r),c){if((h=e.length)!==r.length)return!1;for(;h--;)if(!t(e[h],r[h],n-1,i,o))return!1}else{var p=Object.keys(e),d=void 0;if(h=p.length,Object.keys(r).length!==h)return!1;for(;h--;)if(d=p[h],!Qe(r,d)||!t(e[d],r[d],n-1,i,o))return!1}return i.pop(),o.pop(),!0}(t,e,r)}function Ze(t){return Pe(t)?t.slice():g(t)||Be(t)||m(t)||ze(t)?Array.from(t.entries()):t}function Qe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function tr(t){return t[Symbol.iterator]=er,t}function er(){return this}if("undefined"==typeof Proxy||"undefined"==typeof Symbol)throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(t){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName:function(t,e){return(void 0!==e?Ke(t,e):Ge(t)||Be(t)||ze(t)?Ye(t):Ke(t)).name}},$mobx:x})}).call(this,r(232),r(84))},,,function(t,e,r){t.exports=r(351)},,,,,function(t,e,r){"use strict";r.d(e,"a",(function(){return p})),r.d(e,"d",(function(){return m})),r.d(e,"f",(function(){return y})),r.d(e,"g",(function(){return v})),r.d(e,"h",(function(){return b})),r.d(e,"i",(function(){return w})),r.d(e,"j",(function(){return x})),r.d(e,"k",(function(){return k})),r.d(e,"m",(function(){return S})),r.d(e,"n",(function(){return O})),r.d(e,"l",(function(){return _})),r.d(e,"b",(function(){return A})),r.d(e,"c",(function(){return T})),r.d(e,"e",(function(){return j}));var n,i=r(292),o=r.n(i),a=r(7),s=r.n(a),c=(r(11),r(17),r(19),r(60),r(35)),u=r.n(c);async function l(t,e,r,n=!1){try{if("idb"===r)await u.a.setItem(t,e);else if("localstorage"===r){let r=e;n||(r=JSON.stringify(e)),localStorage.setItem(t,r)}else"storage.local"===r&&await new s.a((r,n)=>chrome.storage.local.set({[t]:e},()=>{const t=chrome.runtime.lastError;t&&n(t),r(!0)}));return{data:!0}}catch(t){return console.error("setStorage -> error",t),{error:t}}}async function h(t,e){try{return"idb"===e?await u.a.removeItem(t):"localstorage"===e?localStorage.removeItem(t):"storage.local"===e&&await new s.a((e,r)=>chrome.storage.local.remove(t,()=>{const t=chrome.runtime.lastError;t&&r(t),e(null)})),{data:!0}}catch(t){return console.error("clearStorage -> error",t),{error:t}}}!function(t){t.storeNote="store-notes",t.storeSearch="store-search",t.storeSetting="store-setting",t.storeSite="store-site",t.storeSync="store-sync",t.storeTodo="store-todo",t.storeUser="store-user",t.storeWallpaper="store-wallpaper",t.storeWeather="store-weather",t.storeBookmarks="store-bookmarks",t.storeGmail="store-gmail",t.storePrivacy="store-privacy",t.storeWallpaperAutoData="store-wallpaper-auto-data"}(n||(n={}));class p{constructor(t,e,r){this.options={ensureStringValue:!1,keepWithLogout:!1},this.key=t,this.type=e,this.options=Object.assign(Object.assign({},this.options),r),this.setInstanceMapper()}static getInstanceFromKey(t){return this.instanceKeyMapper.has(t)?this.instanceKeyMapper.get(t):null}static async deleteAllForLogout(){var t;const e=Array.from(o()(t=this.instanceKeyMapper).call(t));let r;return(await s.a.all(e.map(async t=>await t.deleteForLogout()))).some(t=>!!t.error&&(r=t.error,!0))?{error:r}:{data:!0}}setInstanceMapper(){p.instanceKeyMapper.set(this.key,this)}async create(t){return await l(this.key,t,this.type)}async read(t){return await async function(t,e,r=!1){try{if("idb"===e){return{data:await u.a.getItem(t)}}if("localstorage"===e){const e=localStorage.getItem(t);return!r&&e?"undefined"===e?{data:void 0}:{data:JSON.parse(e)}:{data:e}}if("storage.local"===e){return{data:await new s.a((e,r)=>chrome.storage.local.get(t,n=>{const i=chrome.runtime.lastError;i&&r(i),e(null==n?void 0:n[t])}))}}}catch(t){return console.error("getStorage -> error",t),{error:t}}}(this.key,t||this.type)}async update(t){const{data:e,error:r}=await this.read();if(r)return{error:r};if(e&&"object"==typeof e){const r=Object.assign(Object.assign({},e),t);return await this.create(r)}return{error:{data:e}}}async delete(t){return await h(this.key,t||this.type)}async deleteWithRetain(...t){if(0===t.length)return{error:{keys:t}};const{data:e,error:r}=await this.read();if(r)return{error:r};if(e&&"object"==typeof e){const r={};return t.forEach(t=>{r[t]=e[t]}),await this.create(r)}return{error:{data:e}}}async deleteForLogout(){return this.options.keepWithLogout?{data:!0}:await this.delete()}}p.instanceKeyMapper=new Map;var d=r(15),f=r.n(d);var g=r(0);const m=new p(n.storeNote,"idb"),y=new class extends p{async create(t){return"localstorage"!==this.type&&setTimeout(()=>{l(this.key,t,"localstorage")},0),super.create(t)}async delete(){return"localstorage"!==this.type&&requestAnimationFrame(()=>{h(this.key,"localstorage")}),super.delete()}async deleteForLogout(){return await super.deleteWithRetain("ignoreSuggest")}}(n.storeSearch,g.i?"localstorage":"idb"),v=new class extends p{async create(t){return"localstorage"!==this.type&&setTimeout(()=>{l(this.key,t,"localstorage")},0),super.create(t)}async delete(){return"localstorage"!==this.type&&requestAnimationFrame(()=>{h(this.key,"localstorage")}),super.delete()}async deleteForLogout(){return await super.deleteWithRetain("permission")}}(n.storeSetting,g.i?"localstorage":"idb"),b=new class extends p{async create(t){return"localstorage"!==this.type&&setTimeout(()=>{l(this.key,t,"localstorage")},0),super.create(t)}async delete(){return"localstorage"!==this.type&&requestAnimationFrame(()=>{h(this.key,"localstorage")}),super.delete()}}(n.storeSite,g.i?"localstorage":"idb"),w=new class extends p{constructor(){super(...arguments),this.userStore=null,this.sendTabsSync=t=>{console.warn("SyncStorageManager ~ sync: need inject sendTabsSync",t)}}injectUserStore(t){this.userStore=t}injectSendTabsSync(t){this.sendTabsSync=t}async updateSyncPipe(t,e){var r,n;if(!(null===(n=this.userStore)||void 0===n?void 0:n.isLogin))return{error:"isLogin false"};const{data:i,error:o}=await this.read();if(o||!i)return{error:"read error"};if(!i.isOpenSync)return{error:"isOpenSync false"};const{autoBackupPipe:a}=i;a.data[t]=e,a.timestamp=Date.now(),f()(r=a.websocketKeys).call(r,t)||a.websocketKeys.push(t);const s=await this.update({autoBackupPipe:a});return this.sendTabsSync(this.key),s}}(n.storeSync,"idb"),x=new p(n.storeTodo,"idb"),k=new p(n.storeUser,g.i?"localstorage":"idb"),S=new p(n.storeWallpaper,"idb"),O=new p(n.storeWeather,"idb"),_=new p(n.storeWallpaperAutoData,"idb"),A=new p(n.storeBookmarks,"localstorage",{keepWithLogout:!0}),T=new p(n.storeGmail,"localstorage",{keepWithLogout:!0}),j=new p(n.storePrivacy,"localstorage",{keepWithLogout:!0})},,,,,,,,,,,,,,function(t,e,r){"use strict";var n=r(15),i=r.n(n),o=r(7),a=r.n(o),s=r(55),c=r.n(s),u=(r(11),r(17),r(19),r(31),r(89),r(60),r(273),r(274),r(275),r(0)),l=r(2),h=r(102),p=r(293),d=r(165);const f=t=>{t&&(u.s?window.open(t,"_self"):window.chrome.tabs.getCurrent(e=>window.chrome.tabs.update(e.id,{url:t},()=>{chrome.runtime.lastError&&(t.startsWith("http")?window.open(t,"_self"):window.chrome.tabs.create({url:t}))})))},g={randomId:d.c,group:(t,e)=>{const r=[],n=Math.ceil(t.length/e);for(let i=0;i<n;i++)i===n-1?r.push(t.slice(i*e,t.length)):r.push(t.slice(i*e,(i+1)*e));return r},openUrl:(t,e=!0,r)=>{!r||1!==r.button&&!g.ctrlKeyStatus(r)?e?u.s?window.open(t,"_blank").focus():window.chrome.tabs.create({url:t,active:!0}):f(t):u.s?window.open(t,"_blank"):window.chrome.tabs.create({url:t,active:!1})},openChromeApp:async(t,e=!0,n)=>{if(!await h.a.has(["management"]))try{await h.a.request(["management"])}catch(t){const{message:e}=await Promise.all([r.e(0),r.e(1),r.e(5)]).then(r.bind(null,128));return void e.error(i18n("no_permission_to_open_app",u.D.vendor))}chrome.management.get(t,async({type:i,launchType:o,enabled:a,appLaunchUrl:s}={})=>{if(chrome.runtime.lastError){const{message:t}=await Promise.all([r.e(0),r.e(1),r.e(5)]).then(r.bind(null,128));t.error(i18n("target_chrome_app_not_installed",u.D.vendor))}else{const c=()=>{!n||1!==n.button&&!g.ctrlKeyStatus(n)?e||"hosted_app"!==i||"OPEN_AS_REGULAR_TAB"!==o?chrome.management.launchApp(t):f(s):chrome.management.launchApp(t)};if(a)c();else{const{IConfirm:e}=await Promise.all([r.e(0),r.e(38)]).then(r.bind(null,606));e.create().toShow({text:i18n("app_disabled_enable_first"),onConfirm:()=>{window.chrome.management.setEnabled(t,!0,()=>{c()})}})}}})},send:async function({key:t,data:e}){u.s||window.chrome.runtime.sendMessage({key:t,data:e})},downloadImg:function(t,e,r){if(!e)if(e="infinity-"+Math.ceil(Date.now()*Math.random()/(555555*Math.random())),t.startsWith("blob:"))e=`${e}.${r||"png"}`;else{const r=t.indexOf("?");let n=t;~r&&(n=t.slice(0,r));e=`${e}.${n.split("/").reverse()[0].split(".").reverse()[0]}`}const n=e,o=document.createElement("a");let a=t;t.startsWith("blob:")||(a=i()(t).call(t,"?")?`${t}&attname=${n}`:`${t}?attname=${n}`),u.r?window.open(a,"_blank"):(u.n&&o.setAttribute("target","_blank"),o.setAttribute("download",n),o.setAttribute("href",a),document.body.appendChild(o),o.click(),document.body.removeChild(o))},fmtTime:(t,e)=>new Date(t).toLocaleString(u.D.lang,e||{year:"numeric",month:"long",day:"2-digit",hour:"2-digit",minute:"2-digit"}),getTimestamp:async function(){return Date.now()},parseJwt:t=>{const e=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(atob(e).split("").map(t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(r)},compress:(t,e=10,r)=>new a.a(n=>{const i=new Image,o=document.createElement("canvas"),a=o.getContext("2d");i.onload=()=>{r=r||i.height*e/i.width,o.width=e,o.height=r,a.fillRect(0,0,e,r),a.drawImage(i,0,0,e,r),o.toBlob(n,"image/jpeg")},i.src=t}),mergeArray:function(t=[],e=[],r="id",n="updatetime"){if(!t||0===t.length)return{result:e||[],isLocalEffective:!1};const i=e.filter(t=>!!t),o=Object.create(null);e.forEach((t,e)=>{if(t[r]){const n=t[r];o[n]=e}});let a=!1;return t.filter(t=>0!==t[n]).forEach(t=>{const e=t[r],s=o[e];if(void 0!==s){(i[s][n]||0)<(t[n]||0)&&(i[s]=t,a=!0)}else a=!0,i.push(t)}),{result:i.filter(t=>!!t),isLocalEffective:a}},throttle:function(t,e){let r;return function(...n){const i=this;r||(r=setTimeout(()=>{t.apply(i,n),r=null},e))}},debounce:function(t,e){let r=null;return function(){const n=this,i=arguments;r&&(clearTimeout(r),r=null),r=setTimeout(()=>{t.apply(n,i)},e)}},setStyle:function(t,e=document.body){Object.keys(t).forEach(r=>{e.style.setProperty(r,t[r])})},isInputType:t=>!!t&&(!("INPUT"!==t.tagName||t.getAttribute("type")&&"text"!==t.getAttribute("type")&&"search"!==t.getAttribute("type"))||("TEXTAREA"===t.tagName||(!!t.getAttribute("contenteditable")||void 0))),convertBase64ToBlob:t=>{const e=t.split(",");let r="",n="";e.length>1&&(n=e[1],r=e[0].substring(e[0].indexOf(":")+1,e[0].indexOf(";")));const i=atob(n),o=new ArrayBuffer(i.length),a=new Uint8Array(o);for(let t=0;t<i.length;t++)a[t]=i.charCodeAt(t);return new Blob([o],{type:r})},isTouchScreendevice:()=>!(!("ontouchstart"in window)&&!navigator.maxTouchPoints),stopBubble(t){t.stopPropagation()},hexColorDelta(t,e){let r,n,i,o,a,s;Array.isArray(t)?[r,n,i]=t:(r=parseInt(t.substring(0,2),16),n=parseInt(t.substring(2,4),16),i=parseInt(t.substring(4,6),16)),Array.isArray(e)?[o,a,s]=e:(o=parseInt(e.substring(0,2),16),a=parseInt(e.substring(2,4),16),s=parseInt(e.substring(4,6),16));let c=255-Math.abs(r-o),u=255-Math.abs(n-a),l=255-Math.abs(i-s);return c/=255,u/=255,l/=255,(c+u+l)/3},async getSimilarColor(t){const e=c.a.createObjectURL(t),r=await new a.a(t=>{const r=new Image;r.onload=()=>t(r),r.src=e}),n=(new ColorThief).getColor(r),i=window.__INFINITY__.color_list,o=i.map(t=>g.hexColorDelta(n,t)),s=Math.max.apply(null,o),u=i[o.indexOf(s)];return c.a.revokeObjectURL(e),u},getPrivacyUrl(){const t=l.IS_ZH?"zh":"en";return u.n?`/privacy/${t}/privacy.html`:`${u.u}/${u.e}/${u.c}/${t}/privacy.html`},sleep:(t=0)=>new a.a(e=>{setTimeout(()=>{e(null)},t)}),checkImage(){let t;return[e=>new a.a((r,n)=>{t=new Image,t.onload=r,t.onerror=n,t.src=e}),()=>{t&&(t.src="")}]},requestFirefoxThrottle(t,e,r=!1){if(u.n||r){const r="throttle-"+t;if("boolean"==typeof e&&localStorage.setItem(r,Date.now()+""),"number"==typeof e){const t=localStorage.getItem(r),n=Date.now();if(t&&Number(t)<n&&Number(t)+e>n)return!1}}return!0},chooseFile:(t,e)=>(t=t||"image/jpg,image/jpeg,image/png,image/gif,image/bmp,image/webp,image/svg",e=e||"readAsDataURL",new a.a(r=>{try{document.querySelectorAll(".choose-file").forEach(t=>{document.body.removeChild(t)})}catch(t){}const n=document.createElement("input");n.setAttribute("type","file"),n.setAttribute("class","choose-file"),n.setAttribute("accept",t),n.style.opacity="0",n.style.width="0",n.style.height="0",n.value="",n.addEventListener("change",t=>{const i=t.target.files[0],o=new FileReader;o[e](i),o.onload=function(t){const e=t.target.result;r(e);try{document.body.removeChild(n)}catch(t){}}},{once:!0}),document.body.appendChild(n),n.click()})),exportJsonFile(t,e){const r=JSON.stringify(t);let n="text/infinity";u.r&&(n="custom/infinity");const i=new Blob([r],{type:n}),o=c.a.createObjectURL(i);if(u.r)window.open(o,"_blank");else{const t=new Date,r=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),n=document.createElement("a");n.href=o,n.download=e+r+".infinity",document.body.appendChild(n),n.click(),document.body.removeChild(n)}c.a.revokeObjectURL(o)},stopShowMenu(t){if(!g.isInputType(t.target))return t.stopPropagation(),t.preventDefault(),document.querySelector("i-menu").toHide(),!1},ctrlKeyStatus:t=>u.o?t.metaKey:t.ctrlKey,getFavIconSrc:t=>y(t)?t:function(t){try{return new p.a(t).host}catch(e){return t}}(function(t){if(function(t){return/^(.+?):\/\//.test(t)}(t)||y(t))return t;return"http://"+t}(t)).replace("^www.",""),getLastReqValue(t){const e=[],r=this;return async function(n,i,o){const a=r.randomId("req");e.push(a);const s=await t(n,i,o),c=e.findIndex(t=>t===a),u=e.length;return e.splice(0,c+1),c===u-1?s:null}},isFirstDate(t){const e=new Date("2013/11/30").toLocaleDateString(t);let r="";if(e.replace(/(\d{1,4})\D+(\d{1,2})\D+(\d{1,4})/,(t,e)=>(r=e,"")),"2013"===r)return!0;const n=String(new Date("2013/11/30").getDate());return r===n},internaDateToStan:d.a,getTargetLogDomain(t){if(!t)return"";try{if(t.startsWith("http://")||t.startsWith("https://")){const e=new c.a(t);if(e.host)return e.host}return t.split("?")[0]}catch(e){return t}}};const m=/^\w+:\w/;function y(t){return m.test(t)}e.a=g;const v=document.createElement("script");v.src="/vendor/color-thief.min.js",document.head.appendChild(v),v.onload=()=>{v.remove()}},,,,,,,,,,,function(t,e,r){"use strict";r.d(e,"i",(function(){return n})),r.d(e,"d",(function(){return i})),r.d(e,"h",(function(){return T})),r.d(e,"b",(function(){return o})),r.d(e,"a",(function(){return a})),r.d(e,"g",(function(){return s})),r.d(e,"e",(function(){return u})),r.d(e,"f",(function(){return Wt})),r.d(e,"c",(function(){return c}));var n={};r.r(n),r.d(n,"getLocalCity",(function(){return p})),r.d(n,"getForecastWeather",(function(){return d})),r.d(n,"getCityList",(function(){return f}));var i={};r.r(i),r.d(i,"getSearchSuggest",(function(){return w})),r.d(i,"getEnginesList",(function(){return x}));var o={};r.r(o),r.d(o,"getIcon",(function(){return B})),r.d(o,"getUrlInfoWithPermission",(function(){return z})),r.d(o,"getUrlIcon",(function(){return H})),r.d(o,"getFetchiconUrls",(function(){return V})),r.d(o,"getLogoList",(function(){return F})),r.d(o,"getRedirectTargets",(function(){return G}));var a={};r.r(a),r.d(a,"getUnreadEmails",(function(){return Y}));var s={};r.r(s),r.d(s,"register",(function(){return Q})),r.d(s,"login",(function(){return tt})),r.d(s,"updateProfile",(function(){return et})),r.d(s,"getUserProfile",(function(){return rt})),r.d(s,"uploadAvatar",(function(){return nt})),r.d(s,"modifyPassword",(function(){return it})),r.d(s,"forgetPassword",(function(){return ot})),r.d(s,"resetPassword",(function(){return at})),r.d(s,"getEmailCode",(function(){return st})),r.d(s,"getRegisterCode",(function(){return ct})),r.d(s,"inspceCode",(function(){return ut})),r.d(s,"checkTokenIsExpired",(function(){return lt})),r.d(s,"deleteAccount",(function(){return ht})),r.d(s,"loginWithUid",(function(){return pt})),r.d(s,"v1BasicLogin",(function(){return dt})),r.d(s,"getMobileUid",(function(){return ft})),r.d(s,"getMobileloginUrl",(function(){return gt})),r.d(s,"checkMobileloginUrl",(function(){return mt})),r.d(s,"sendPhoneCode",(function(){return yt})),r.d(s,"sendEmailCode",(function(){return vt})),r.d(s,"bindEmail",(function(){return bt})),r.d(s,"bindPhoneNumber",(function(){return wt})),r.d(s,"unbindEmail",(function(){return xt})),r.d(s,"unbindPhoneNumber",(function(){return kt})),r.d(s,"verifyPhoneVCode",(function(){return St})),r.d(s,"ThirdLoginType",(function(){return Ot})),r.d(s,"bindThird",(function(){return _t})),r.d(s,"unbindThird",(function(){return At})),r.d(s,"getAreaCodeList",(function(){return Tt})),r.d(s,"verifyPassword",(function(){return jt})),r.d(s,"geVerifyTokenImg",(function(){return Ct}));var c={};r.r(c),r.d(c,"getRepairConcat",(function(){return Et})),r.d(c,"postErrorCollect",(function(){return Lt})),r.d(c,"sendLog",(function(){return Rt}));var u={};r.r(u),r.d(u,"getSyncList",(function(){return Dt})),r.d(u,"getSyncDetail",(function(){return Bt})),r.d(u,"autoBackup",(function(){return Ut})),r.d(u,"manualBackup",(function(){return Nt})),r.d(u,"getV2DataFromV1",(function(){return zt}));r(11);var l=r(0),h=r(3);const p=async()=>{try{const t=await h.a.get(l.A+"/city/locate",{lang:l.D.lang},{timeout:1e4});if(t&&t.city)return{data:t.city}}catch(t){return{error:t}}},d=async t=>{try{return{data:(await h.a.get(l.A+"/weather/forecast",{lang:l.D.lang,cid:t},{timeout:1e4})).forecast}}catch(t){return{error:t}}},f=async t=>{try{return{data:await h.a.get(l.A+"/city/list",{lang:l.D.lang,searchkey:t},{timeout:1e4})}}catch(t){return{error:t}}};r(31);var g=r(26),m=r(120),y=r.n(m),v=r(316),b=r.n(v);const w=async t=>l.D.isZh?l.h||l.s?S(t):_(t):l.h||l.s?O(t):A(t),x=async t=>{let e=l.q?36e5:6e4;t||(e=0);try{if(!g.a.requestFirefoxThrottle("/search/list",e,!0))return{error:"request throttle error"};const r=await h.a.get(l.y+"/search/list",{lang:l.D.lang,platform:l.D.platform,platformVersion:l.D.platformVersion,edition:l.e,maybe360:l.G,version:t||""+Date.now()});if(0===r.code){const t=r.data.map(t=>{const e={};return e.name=t.name,e.uuid=t.seId,e.logo=t.logo,e.desc=t.desc,e.types=t.types,e.hide=t.hide,e});return g.a.requestFirefoxThrottle("/search/list",!0,!0),{data:{list:t,hash:y()(JSON.stringify(t)),meta:r.meta}}}if(2005===r.code)return g.a.requestFirefoxThrottle("/search/list",!0,!0),{error:r};throw r}catch(t){return{error:t}}},k=g.a.getLastReqValue(h.a.jsonp),S=async t=>{var e;try{const r=await k(l.b+"/su?ie=utf-8&p=3",{wd:t},{adapter:b.a,callbackParamName:"cb"});return{data:(null===(e=null==r?void 0:r.s)||void 0===e?void 0:e.map(t=>({text:t})))||[]}}catch(t){return{error:t}}},O=async t=>{var e;try{const r=await k(l.g+"/complete/search?client=chrome",{q:t},{adapter:b.a,callbackParamName:"jsonp"});return{data:(null==r?void 0:r.length)&&(null===(e=r[1])||void 0===e?void 0:e.length)?r[1].map(t=>({text:t})):[]}}catch(t){return{error:t}}},_=async t=>{try{const e=await h.a.get(l.b+"/su?p=3&ie=UTF-8&cb=",{wd:t},{_single:!0,_delay:0}),r=/s:(\[[\w\W]*\])/.exec(e),n=JSON.parse(r[1]);return{data:n.map(t=>({text:t}))}}catch(t){return{error:t}}},A=async t=>{try{const e=await h.a.get(l.g+"/complete/search?client=chrome",{q:t},{_single:!0,_delay:200});return{data:e[2].map((t,r)=>(t||(t=e[1][r]),{text:t}))}}catch(t){return{error:t}}};var T=r(160),j=r(7),C=r.n(j),E=r(135),L=r.n(E),R=r(55),P=r.n(R),M=r(15),I=r.n(M);r(60),r(330),r(17),r(19),r(89);const D=l.D.lang,B=async({page:t=0,type:e,keyword:r,source:n}={})=>{try{const i=await h.a.get(l.x+"/get-icons",{lang:D,page:t,type:e,source:n,keyword:r},{_single:!0,_delay:200});if(i.success)return i.icons.forEach(t=>{if("infinity"===t.source)switch("infinity://wallpaper"===t.url&&(t.name="wallpaper_library"),t.url){case"infinity://wallpaper":case"infinity://weather":case"infinity://todos":case"infinity://notes":case"infinity://history":case"infinity://bookmarks":case"infinity://settings":t.name=i18n(t.name),t.description=i18n(t.description);break;case"infinity://extension":t.name=i18n(t.name),t.description=i18n(t.description,l.D.vendor)}t._footer=t.description||i18n("no_description")}),{data:i};throw i}catch(t){return{error:t}}},U=async t=>{try{const e=await h.a.get(l.y+"/icon/title",{url:t},{_single:!0,_delay:0,timeout:3e3});if(0===e.code)return{data:{name:e.data.title}};throw e}catch(t){return{error:t}}},N=/<title[^>]*>\s*(.*)\s*<\/title>/,z=t=>window.__INFINITY__.hasAllUrlPermission?new C.a(async e=>{let r=0;U(t).then(t=>{r+=1,t.error&&2!==r||e(t)}),(async t=>{try{const e=await h.a.get(t,{},{_single:"getUrlInfoFromFE",timeout:3e3,responseType:"text",_responseAll:!0}),r=e.data;if(r&&e.status>=200&&e.status<300){const t=r.indexOf("<title");if(t>0){const e=r.slice(t,t+200),n=N.exec(e),i=null==n?void 0:n[1];if(i)return{data:{name:i}}}}return{error:"error"}}catch(t){return{error:t}}})(t).then(t=>{r+=1,t.error&&2!==r||e(t)})}):new C.a(async e=>{e(await U(t))}),W=(t,e)=>{if(0===e.length)return e;const r=new Map,n=[];return t.forEach((t,e)=>{r.set(t,e)}),e.forEach(t=>{const e=r.get(t);n[e]=t}),n.filter(t=>!!t)},q=t=>new C.a(e=>{const r=()=>{const e=W(t,o),r=W(t,a),n=W(t,s);return e.concat(r,n)},n=t.length;let i=0;const o=[],a=[],s=[];t.forEach(t=>{const c=new Image;c.onload=function(){i+=1;const{width:c,height:u}=this,l=Math.max(c,u),h=Math.min(c,u);l/h<5?h>50&&l>100?o.push(t):h>50||l>100?a.push(t):s.push(t):s.push(t),i===n&&e(r())},c.onerror=()=>{i+=1,i===n&&e(r())},c.src=t}),setTimeout(()=>{e(r())},3e3)}),$=/\.(ico|png|jpg|jpeg|svg|webp)$/,H=async t=>{var e;try{const r=await h.a.get(t,{},{_single:"getUrlIcon",_delay:100,timeout:3e3,responseType:"text",_responseAll:!0}),n=r.data;if(n&&r.status>=200&&r.status<300){const i=(null===(e=r.request)||void 0===e?void 0:e.responseURL)||t;let o=((t,e)=>{const r=[];return e.replace(/<link [^>]*href=['"]([^'"]+)[^>]*/gi,(t,e)=>{r.push(e)}),L()(r).call(r,(e,r)=>{if(r&&$.test(r)){const n=new P.a(r,t);e.push(n.href)}return e},[])})(i,n);if(o.length<6){const t=((t,e)=>{const r=[];return e.replace(/<img [^>]*src=['"]([^'"]+)[^>]*/gi,(t,e)=>{r.push(e)}),L()(r).call(r,(e,r)=>{if(r&&$.test(r)){const n=new P.a(r,t);e.push(n.href)}return e},[])})(i,n);o=o.concat(t)}o.length>4&&(o.length=4);let a=await q(o);return a=Array.from(new Set(a)),a.length>2&&(a.length=2),{data:a}}return{error:""}}catch(t){return{error:t}}},V=async t=>{try{const{host:e}=new P.a(t),r=await h.a.get(l.y+"/icon/get_icon_urls",{host:e});return 0!==r.code?{error:r}:{data:r.data.map(t=>t.url)}}catch(t){return{error:t}}},F=async t=>{try{const{host:e}=new P.a(t);if(!I()(e).call(e,"."))return{data:[]};const r=await h.a.get(l.y+"/icon/get_logo_list",{host:e,limit:2},{_single:!0,_delay:100});return 0!==r.code?{error:r}:{data:r.data.map(t=>t.src)}}catch(t){return{error:t}}},G=async t=>{var e;let r=l.q?36e5:6e4;t||(r=0);try{if(!g.a.requestFirefoxThrottle("/icon/rt",r,!0))return{error:"request throttle error"};const n=await h.a.post(l.y+"/icon/rt",{version:t||""+Date.now()});return 0===n.code&&g.a.requestFirefoxThrottle("/icon/rt",!0,!0),0===n.code&&n.data?{data:{list:n.data,version:null===(e=n.meta)||void 0===e?void 0:e.version}}:{error:n}}catch(t){return{error:t}}};function K(t){return t?t.textContent:null}function Y(t){return new C.a((e,r)=>{const n=new XMLHttpRequest;n.onreadystatechange=function(){var t,i;if(4==n.readyState)if(n.responseXML){const r=n.responseXML;let o=K(r.querySelector("title"));if(o)try{o=/(\w+)@(\w+\.\w+)/.exec(o)[0]}catch(t){}const a=parseInt(K(r.querySelector("fullcount")),10),s=r.querySelectorAll("entry"),c=[];let u=-1;for(let e=0,r=s.length;e<r;e++){const r=s[e],n={id:K(r.querySelector("id")),issued:K(r.querySelector("issued")),title:K(r.querySelector("title")),summary:K(r.querySelector("summary")),link:(t=r.querySelector("link"),i="href",t?t.getAttribute(i):null),authorName:K(r.querySelector("author name")),authorEmail:K(r.querySelector("author email"))};n.issued&&(n.issued=new Date(n.issued).valueOf(),u=Math.max(u,n.issued)),c.push(n)}e({account:o,lastIssuedTime:u,count:a,emails:c})}else r()},n.onerror=r,n.open("GET",function(t){return l.f+"/mail/feed/atom?zx="+encodeURIComponent(t)}(t),!0),n.send(null)})}var X=r(123),J=r.n(X),Z=r(12);const Q=async({email:t,password:e,repeatPassword:r,code:n})=>{const i={email:J()(t).call(t),password:y()(e),repeatPassword:y()(r),code:J()(n).call(n)};try{return await h.a.post(l.y+"/user/register",i)}catch(t){return t}},tt=async({email:t,password:e,phone_number:r})=>{const n={email:t?J()(t).call(t):void 0,phone_number:r?J()(r).call(r):void 0,password:y()(e)};try{return await h.a.post(l.y+"/user/login",n)}catch(t){return t}};async function et(t){const{data:e}=await Z.k.read(),r=e.userInfo.uid;try{return await h.a.post(l.y+"/user/update_profile/"+r,t,{_auth:!0})}catch(t){throw new Error(t.message)}}async function rt(){try{return await h.a.get(l.y+"/user/get_user_profile",{},{_auth:!0,_proxy:!0})}catch(t){return t}}async function nt(t){const e=new FormData;e.append("file",t);try{const t=await h.a.post(l.y+"/upload/avatar",e,{_auth:!0,headers:{"Content-Type":"multipart/form-data"}});if(0===(null==t?void 0:t.code))return t;throw new Error(i18n("upload_avatar_failure"))}catch(t){throw new Error(t)}}async function it({originPassword:t,newPassword:e}){const{data:r}=await Z.k.read(),n=r.userInfo.uid,{token:i}=r;if(!i)throw new Error(i18n("unknown_mistake"));const o={originPassword:y()(t),newPassword:y()(e)};try{return await h.a.post(l.y+"/user/modify_password/"+n,o,{_auth:!0})}catch(t){return t}}async function ot(t){try{const e=await h.a.post(l.y+"/user/forget_password",t);return 0===e.code?{data:e.data}:{error:e}}catch(t){return{error:t}}}async function at({password:t,repeatPassword:e,email:r,code:n,phone_number:i}){const o={password:y()(t),repeatPassword:y()(e),email:r?J()(r).call(r):void 0,code:J()(n).call(n),phone_number:i?J()(i).call(i):void 0};try{return await h.a.post(l.y+"/user/reset_password",o)}catch(t){return t}}async function st(t){try{const e=await h.a.post(`${l.y}/get_code2?lang=${l.D.lang}`,t,{withCredentials:!0});return 0===e.code?{data:e.data}:{error:e}}catch(t){return{error:t}}}async function ct(t){try{return await h.a.post(`${l.y}/get_register_code2?lang=${l.D.lang}`,t,{withCredentials:!0})}catch(t){return t}}async function ut(t){try{return await h.a.post(l.y+"/inspce_code",t)}catch(t){return t}}async function lt(){try{return await h.a.get(l.y+"/check_token",{},{_auth:!0})}catch(t){return t}}async function ht(){const{data:t}=await Z.k.read(),e=t.userInfo.uid;try{return await h.a.post(l.y+"/user/delete/"+e,{},{_auth:!0})}catch(t){return t}}const pt=async t=>{try{return await h.a.post(l.y+"/user/login_uid",t,{timeout:1e4})}catch(t){return t}},dt=async t=>{try{return await h.a.post(l.y+"/user/v1_basic_login",t,{timeout:1e4})}catch(t){return t}},ft=async(t,e)=>{try{return await h.a.get(`${l.y}/user/user_hash?uid=${t}&secret=${e}`)}catch(t){return t}},gt=async()=>{try{const t=await h.a.get(l.y+"/login_code/mobile_code",{},{_auth:!0});return 0===t.code?{data:t.data}:{error:t}}catch(t){return{error:t}}},mt=async(t,e)=>{try{const r=await h.a.post(l.y+"/login_code/check",{code:t,type:e},{_auth:!0});return 0===r.code?{data:r.data}:{error:r}}catch(t){return{error:t}}};async function yt(t){try{const e=await h.a.post(l.y+"/phone/send_code",t,{withCredentials:!0});return 0===e.code?{data:e.data}:{error:e}}catch(t){return{error:t}}}async function vt(t){try{const e=await h.a.post(l.y+"/get_email_bind_code",t,{_auth:!0,withCredentials:!0});return 0===e.code?{data:e.data}:{error:e}}catch(t){return{error:t}}}async function bt(t){try{const e=await h.a.post(l.y+"/bind/email",t,{_auth:!0});return 0===e.code?{data:e.data}:{error:e}}catch(t){return{error:t}}}async function wt(t){try{const e=await h.a.post(l.y+"/bind/phone",t,{_auth:!0});return 0===e.code?{data:e.data}:{error:e}}catch(t){return{error:t}}}async function xt(){try{const t=await h.a.post(l.y+"/unbind/email",{},{_auth:!0});return 0===t.code?{data:t.data}:{error:t}}catch(t){return{error:t}}}async function kt(){try{const t=await h.a.post(l.y+"/unbind/phone",{},{_auth:!0});return 0===t.code?{data:t.data}:{error:t}}catch(t){return{error:t}}}async function St(t,e){try{const r=await h.a.post(l.y+"/phone/verify_code",{phone_number:t,code:e});return 0===r.code?{data:r.data}:{error:r}}catch(t){return{error:t}}}var Ot;async function _t(t,e){try{const r=await h.a.post(`${l.y}/bind/${t}`,{access_code:e},{_auth:!0});return 0===r.code?{data:r.data}:{error:r}}catch(t){return{error:t}}}async function At(t){try{const e=await h.a.post(`${l.y}/unbind/${t}`,{},{_auth:!0});return 0===e.code?{data:e.data}:{error:e}}catch(t){return{error:t}}}async function Tt(){try{const t=await(await h.a.get(l.y+"/phone/area_list"));return 0===t.code?{data:t.data}:{error:t}}catch(t){return{error:t}}}async function jt(t){try{const e=await h.a.post(l.y+"/user/verify_password",{password:y()(t)},{_auth:!0});return 0===e.code?{data:e.data}:{error:e}}catch(t){return{error:t}}}async function Ct(){try{const t=await h.a.get(l.y+"/verify/get_token_img");return 0===t.code?{data:t.data}:{error:t}}catch(t){return{error:t}}}!function(t){t.weibo="weibo",t.facebook="facebook",t.google="google",t.wechat="wechat",t.qq="qq"}(Ot||(Ot={}));const Et=async()=>{try{const t=await h.a.get(l.y+"/get_concat_info");if(0===t.code)return{data:t.data};throw t}catch(t){return{error:t}}},Lt=async(t,e)=>{try{const{response:r,stack:n,config:i}=e;let o=r||i;o&&(o=JSON.stringify(o,(t,e)=>{if(e instanceof FormData){const t={};for(const[r,n]of e)t[r]=n;return t}if(e instanceof File){return{lastModified:e.lastModified,name:e.name,size:e.size,type:e.type}}return e}));let{data:a,error:s}=await Z.k.read();if(!s&&a){const t=["mobileuid","avatar","refreshToken","secret","gender","name"];a=JSON.stringify(a,(e,r)=>{if(!I()(t).call(t,e))return r})}const c=await h.a.post(l.y+"/collect",{type:t,user:a,stack:n,info:o,env:Object.assign({},l.D)});if(0===c.code)return{data:c.data};throw c}catch(t){return{error:t}}},Rt=async t=>{await h.a.get(t,void 0,{_proxy:!0,_proxyIgnoreRes:!0})},Pt=t=>{const e=JSON.stringify(t),r=(new TextEncoder).encode(e);return new Blob([r],{type:"application/json;charset=utf-8"})},Mt=t=>{const e={};return t.forEach(t=>{const{platform:r}=t;e[r]?e[r].push(t):e[r]=[t]}),e},It=t=>{const{_id:e,_platform:r="pc"}=t;return{id:e,time:g.a.fmtTime(Number(e)),platform:r}},Dt=async()=>{try{const t=await h.a.get(l.y+"/sync/list",void 0,{_auth:!0,_proxy:!0});if(0!==t.code)return{error:t};const e={};return e.auto=t.meta.auto.map(It),e.manual=Mt(t.meta.manual.map(It)),{data:e}}catch(t){return{error:t}}},Bt=async(t,e,r="all")=>{try{const n=await h.a.get(l.y+"/sync/download_url",{id:t,type:e,keys:r},{_auth:!0});if(0!==n.code)return{error:n};const i=n.data;let o={};const a=await C.a.all(i.map(e=>h.a.get(e.url+"&timestampid="+("latest"===t?Date.now():t),{},{timeout:18e4})));return i.forEach((t,r)=>{const n=t.fileKey;"manual"===e?o=Object.assign(Object.assign({},o),a[r]):"auto"===e&&(o[n]=a[r])}),{data:o}}catch(t){return Lt("getSyncDetail",t),{error:t}}},Ut=async(t,e="")=>{const r=Object.keys(t).join(",");try{const n=await h.a.get(l.y+"/sync/token",{type:"auto",keys:r},{_auth:!0});if(0!==n.code||!n.data.length)return{error:n};const i=n.data;await C.a.all(i.map(e=>{const{url:r,key:n,token:i,host:o}=e,a=new FormData;return a.append("token",i),a.append("key",r),a.append("file",Pt(t[n])),h.a.post(o,a,{headers:{"Content-Type":"multipart/form-data"},timeout:18e4})})),localStorage.setItem("pre-sync-id",i[0].timestamp+"");const o=await h.a.post(l.y+"/sync/done",{type:"auto",websocketkeys:e,keys:r,record_time:i[0].timestamp},{_auth:!0});return 0!==o.code?{error:o}:{data:o.meta.map(It)}}catch(t){return Lt("autoBackup",t),{error:t}}},Nt=async t=>{try{const e=await h.a.get(l.y+"/sync/token",{type:"manual",keys:"data"},{_auth:!0});if(0!==e.code||!e.data.length)return{error:e};const{token:r,url:n,timestamp:i,host:o}=e.data[0],a=new FormData;a.append("token",r),a.append("key",n),a.append("file",Pt(t)),await h.a.post(o,a,{headers:{"Content-Type":"multipart/form-data"},timeout:18e4});const s=await h.a.post(l.y+"/sync/done",{type:"manual",keys:"data",record_time:i},{_auth:!0});return 0!==s.code?{error:s}:{data:Mt(s.meta.map(It))}}catch(t){return Lt("manualBackup",t),{error:t}}},zt=t=>"pro"===t?async function(){try{const{data:{userInfo:t}}=await Z.k.read(),{uid:e,secret:r}=t,n=await h.a.get(l.x+"/user/recovery-pro",{uid:e,secret:r},{timeout:2e5});if(n.success)return{data:n.data};throw n}catch(t){return Lt("getProV1Data",t),{error:t}}}():"basic"===t?async function(){try{const t=await h.a.get(l.y+"/sync/recover_basic",{},{_auth:!0,timeout:2e5});return 0!==t.code?{error:t}:{data:t.data}}catch(t){return Lt("getBasicV1Data",t),{error:t}}}():void 0;var Wt=r(342)},,,,,,,,function(t,e,r){"use strict";r.d(e,"a",(function(){return c})),r.d(e,"b",(function(){return u})),r.d(e,"c",(function(){return l}));var n=r(15),i=r.n(n),o=(r(31),r(47));const a=/^http[s]?:\/\//;function s(t){return a.test(t)}const c=(t,e)=>{const r="https://infinityicon.infinitynewtab.com/assets/images/"+t;return!0===e?u(r):!1===e?r:/\.(png|jpg|jpeg)$/.test(t)?u(r):r};function u(t){return s(t)?i()(t).call(t,"?")?t:o.e?t+"?imageView2/0/q/100":t+"?imageView2/0/format/webp/q/100":t}function l(t){return s(t)?i()(t).call(t,"?")?t:o.e?t+"?imageMogr2/thumbnail/240x/blur/1x0/quality/100|imageslim":t+"?imageMogr2/thumbnail/240x/format/webp/blur/1x0/quality/100|imageslim":t}},,function(t,e,r){"use strict";r.d(e,"c",(function(){return n})),r.d(e,"d",(function(){return i})),r.d(e,"e",(function(){return o})),r.d(e,"f",(function(){return a})),r.d(e,"a",(function(){return s})),r.d(e,"b",(function(){return c}));r(31);const n="store-wallpaper-cache",i="infinity-image-base64",o=navigator.userAgent.toLowerCase().match(/version\/([\d.]+).*safari/),a="format/webp/",s="https://infinitypro-img.infinitynewtab.com/findaphoto/bigLink/default.png",c=`${s}?imageView2/2/w/${screen.width}/${o?"":a}interlace/1`},,,,,,,,function(t,e,r){t.exports=r(399)},,,,,function(t,e,r){var n=r(6),i=r(139),o=r(140),a=r(345),s=r(38),c=function(t){if(t&&t.forEach!==a)try{s(t,"forEach",a)}catch(e){t.forEach=a}};for(var u in i)i[u]&&c(n[u]&&n[u].prototype);c(o)},,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return i})),r.d(e,"d",(function(){return o})),r.d(e,"c",(function(){return a}));r(31);const n=r(0).s?"serviceworker":"background";let i=!1;"background"===n?i="undefined"==typeof ServiceWorkerGlobalScope&&chrome.extension.getBackgroundPage()===window:"serviceworker"===n&&(i="undefined"!=typeof ServiceWorkerGlobalScope);const o={timeout:0,taskId:""},a=()=>(""+Date.now()/1e3/1e5).split(".")[1].substr(0,8)+(""+Math.random()).split(".")[1].substr(0,8).padEnd(8,"0")},,function(t,e,r){var n=r(90);t.exports=function(t,e,r,i){return i&&i.enumerable?t[e]=r:n(t,e,r),t}},function(t,e,r){"use strict";var n=r(69),i=TypeError,o=function(t){var e,r;this.promise=new t((function(t,n){if(void 0!==e||void 0!==r)throw i("Bad Promise constructor");e=t,r=n})),this.resolve=n(e),this.reject=n(r)};t.exports.f=function(t){return new o(t)}},,,,,,,,,,,,,,function(t,e,r){"use strict";r.d(e,"a",(function(){return u}));r(17),r(19);var n=r(15),i=r.n(n),o=r(7),a=r.n(o),s=r(0);const c={};const u=new class{constructor(){this.request=(t,e)=>((s.n||s.k||s.h)&&e&&i()(e).call(e,"chrome://favicon/")&&(e=Array.from(new Set(e))).splice(e.findIndex(t=>"chrome://favicon/"===t),1),new a.a((r,n)=>{if(s.s)return void n();let i="";if(s.n){if(i=t.join(",")+(null==e?void 0:e.join(",")),c[i])return void n(new Error("repeat"));c[i]=!0}chrome.permissions.request({permissions:t,origins:e},t=>{s.n&&c[i]&&delete c[i],chrome.runtime.lastError?n(chrome.runtime.lastError):t?r(!0):n(new Error("REJECT"))})})),this.has=(t,e)=>((s.n||s.k||s.h)&&e&&i()(e).call(e,"chrome://favicon/")&&(e=Array.from(new Set(e))).splice(e.findIndex(t=>"chrome://favicon/"===t),1),new a.a(r=>{s.s?r(!1):chrome.permissions.contains({permissions:t,origins:e},t=>{r(t)})}))}}},,,,,,,,,,,,,,,,,,,,,function(t,e,r){t.exports=r(439)},,function(t,e){t.exports={}},function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},function(t,e,r){var n=r(27);t.exports=n.Promise},function(t,e,r){"use strict";r.r(e),r.d(e,"iMessage",(function(){return h})),r.d(e,"message",(function(){return p}));r(17),r(19);var n=r(518),i=r(1),o=r(505),a=r(608),s=r.n(a),c=r(609),u=r.n(c),l=function(t,e,r,n){var i,o=arguments.length,a=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,r,a):i(e,r))||a);return o>3&&a&&Object.defineProperty(e,r,a),a};let h=class extends i.a{constructor(){super(...arguments),this.content="",this.type="error"}render(){const t={"infinity-message":!0,"position-top":"top"===this.type};return i.e`
      <div class=${Object(o.a)(t)}>
        ${this.renderImg()}
        <span>${this.content}</span>
      </div>
    `}renderImg(){return"error"===this.type?i.e`<img .src=${s.a} />`:"warn"===this.type?i.e`<img .src=${u.a} />`:void 0}};h.styles=i.b`
    :host {
      box-sizing: border-box;
      display: flex;
      position: fixed;
      min-width: 330px;
      padding: 0 20px;
      height: 60px;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(255, 255, 255, 1);
      box-shadow: 0px 6px 48px 0px rgba(0, 0, 0, 0.24);
      border-radius: 6px;
      z-index: 99999999999;
    }
    :host([type='top']) {
      width: 100%;
      margin: 0;
      left: 0;
      top: var(--top-bar-height);
      height: auto;
      padding: 5px;
      border-radius: 0;
      background: rgba(95, 92, 92, 0.6);
      color: #fff;
      transform: none;
      transition: all 300ms;
      opacity: 0;
      pointer-events: none;
    }
    :host(.anim[type='top']) {
      opacity: 1;
    }

    .infinity-message {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 100%;
    }
    img {
      width: 20px;
      height: 20px;
      margin-right: 8px;
    }
  `,l([Object(i.g)({type:String})],h.prototype,"content",void 0),l([Object(i.g)({type:String})],h.prototype,"type",void 0),h=l([Object(i.c)("i-message")],h);const p={newInstance:function(t,e=2,r,n){let i;if(document.querySelector("i-message"))return void clearInterval(i);const o=document.createElement("i-message");return o.setAttribute("content",t),o.setAttribute("type",r),document.body.appendChild(o),0!==e&&(i=setTimeout(()=>{document.body.removeChild(o),n&&n()},1e3*e)),o},error:function(t,e,r){n.default.error(t,e),r&&setTimeout(r,e)},success:function(t,e,r){n.default.success(t,e),r&&setTimeout(r,e)},top:function(t,e,r){const n=this.newInstance(t,e,"top",r);setTimeout(()=>null==n?void 0:n.classList.add("anim"))},warn:function(t,e,r){this.newInstance(t,e,"warn",r)}}},,,function(t,e,r){var n=r(158),i=r(27);t.exports="process"==n(i.process)},function(t,e,r){var n,i,o,a=r(367),s=r(27),c=r(25),u=r(61),l=r(90),h=r(46),p=r(226),d=r(216),f=r(218),g=s.TypeError,m=s.WeakMap;if(a||p.state){var y=p.state||(p.state=new m),v=c(y.get),b=c(y.has),w=c(y.set);n=function(t,e){if(b(y,t))throw g("Object already initialized");return e.facade=t,w(y,t,e),e},i=function(t){return v(y,t)||{}},o=function(t){return b(y,t)}}else{var x=d("state");f[x]=!0,n=function(t,e){if(h(t,x))throw g("Object already initialized");return e.facade=t,l(t,x,e),e},i=function(t){return h(t,x)?t[x]:{}},o=function(t){return h(t,x)}}t.exports={set:n,get:i,has:o,enforce:function(t){return o(t)?i(t):n(t,{})},getterFor:function(t){return function(e){var r;if(!u(e)||(r=i(e)).type!==t)throw g("Incompatible receiver, "+t+" required");return r}}}},,,function(t,e,r){t.exports=r(432)},,,,,,,,,function(t,e,r){"use strict";r.d(e,"c",(function(){return c})),r.d(e,"d",(function(){return u})),r.d(e,"b",(function(){return l})),r.d(e,"e",(function(){return h})),r.d(e,"a",(function(){return p}));var n=r(7),i=r.n(n),o=(r(11),r(17),r(19),r(0)),a=r(35),s=r.n(a);function c(t,e){if(o.l){if(t=window.chrome.runtime.getURL(t),null==e?void 0:e.isNewTab)return window.chrome.tabs.create({url:t});window.chrome.tabs.getCurrent(e=>window.chrome.tabs.update(e.id,{url:t},()=>{chrome.runtime.lastError&&t&&(t.startsWith("http")?window.open(t,"_self"):window.chrome.tabs.create({url:t}))}))}else{if(null==e?void 0:e.isNewTab)return window.open(t);window.open(t,"_self")}}async function u(){if(o.l){const{slave:t}=await r.e(40).then(r.bind(null,210));window.chrome.tabs.getCurrent(e=>{t.sendMessage("tabs-reload"),setTimeout(()=>{window.chrome.tabs.remove(e.id)},16)})}else setTimeout(()=>{c("/")},16)}async function l(t,e){try{if(e){return await s.a.getItem(t)}{const e=localStorage.getItem(t);if(e)return"string"==typeof e?JSON.parse(e):e}}catch(t){throw new Error(t)}}async function h(t,e,r){r?await s.a.setItem(t,e):localStorage.setItem(t,JSON.stringify(e))}async function p(){const t=await new i.a(t=>chrome.bookmarks.getTree(t));if(o.n){const e=t[0].children.findIndex(t=>"unfiled_____"===t.id),r=t[0].children.findIndex(t=>"toolbar_____"===t.id);if(-1!==e&&-1!==r)if(e>r){const[n]=t[0].children.splice(e,1),[i]=t[0].children.splice(r,1);t[0].children.unshift(i,n)}else{const[n]=t[0].children.splice(r,1),[i]=t[0].children.splice(e,1);t[0].children.unshift(n,i)}}return t}},,,function(t,e,r){"use strict";r.d(e,"b",(function(){return i})),r.d(e,"a",(function(){return o}));var n=r(162);const i={notice:{gmail:!1,gmailVoice:!1,gmailNumber:!1,todoNumber:!0},link:{icon:!!r(0).s,search:!0,bookmark:!1,history:!1},view:{topBookmark:!1,topUseful:!1,windmill:!0,pagin:!1,isShowHomepageBtn:!0,isHideIcp:!1,scaleSide:1,scaleMain:1},layout:{row:2,col:5,rowGap:.2,colGap:.3,custom:!1,customItem:[3,4]},animation:{easing:"linear"},icon:{miniMode:!1,shadow:!1,startAnimation:!1,opacity:1,radius:.5,scale:.5,isHideIconName:!1},search:{hide:!1,searchSuggest:!0,keepSearchInput:!1,hideCategory:!1,hideButton:!0,shadow:!0,scale:.82,radius:n.j,opacity:1},font:{shadow:!0,size:15,color:"rgb(221, 221, 221)"}},o=function(t,e){let r=null;switch(t+"*"+e){case"2*4":case"2*5":r={iconScale:.5,colGap:.3,rowGap:.2,searchScale:.82};break;case"2*6":r={iconScale:.6,colGap:.3,rowGap:.3,searchScale:.9};break;case"2*7":r={iconScale:.7,colGap:.3,rowGap:.3,searchScale:.9};break;case"3*3":r={iconScale:.7,colGap:.24,rowGap:.2,searchScale:.82}}return r}},function(t,e,r){var n=r(103),i=r(36),o=r(51),a=r(161),s=r(264),c=r(134),u=r(71),l=r(220),h=r(205),p=r(265),d=TypeError,f=function(t,e){this.stopped=t,this.result=e},g=f.prototype;t.exports=function(t,e,r){var m,y,v,b,w,x,k,S=r&&r.that,O=!(!r||!r.AS_ENTRIES),_=!(!r||!r.IS_RECORD),A=!(!r||!r.IS_ITERATOR),T=!(!r||!r.INTERRUPTED),j=n(e,S),C=function(t){return m&&p(m,"normal",t),new f(!0,t)},E=function(t){return O?(o(t),T?j(t[0],t[1],C):j(t[0],t[1])):T?j(t,C):j(t)};if(_)m=t.iterator;else if(A)m=t;else{if(!(y=h(t)))throw d(a(t)+" is not iterable");if(s(y)){for(v=0,b=c(t);b>v;v++)if((w=E(t[v]))&&u(g,w))return w;return new f(!1)}m=l(t,y)}for(x=_?t.next:m.next;!(k=i(x,m)).done;){try{w=E(k.value)}catch(t){p(m,"throw",t)}if("object"==typeof w&&w&&u(g,w))return w}return new f(!1)}},function(t,e,r){var n=r(27),i=r(127),o=r(28),a=r(282),s=r(254),c=r(33),u=r(379),l=r(257),h=r(68),p=r(211),d=i&&i.prototype,f=c("species"),g=!1,m=o(n.PromiseRejectionEvent),y=a("Promise",(function(){var t=s(i),e=t!==String(i);if(!e&&66===p)return!0;if(h&&(!d.catch||!d.finally))return!0;if(!p||p<51||!/native code/.test(t)){var r=new i((function(t){t(1)})),n=function(t){t((function(){}),(function(){}))};if((r.constructor={})[f]=n,!(g=r.then((function(){}))instanceof n))return!0}return!e&&(u||l)&&!m}));t.exports={CONSTRUCTOR:y,REJECTION_EVENT:m,SUBCLASSING:g}},function(t,e,r){var n=r(228),i=r(91).f,o=r(90),a=r(46),s=r(368),c=r(33)("toStringTag");t.exports=function(t,e,r,u){if(t){var l=r?t:t.prototype;a(l,c)||i(l,c,{configurable:!0,value:e}),u&&!n&&o(l,"toString",s)}}},,,,,,function(t,e,r){"use strict";var n=r(152),i=r(285),o=r(125),a=r(132),s=r(91).f,c=r(252),u=r(68),l=r(59),h=a.set,p=a.getterFor("Array Iterator");t.exports=c(Array,"Array",(function(t,e){h(this,{type:"Array Iterator",target:n(t),index:0,kind:e})}),(function(){var t=p(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}}),"values");var d=o.Arguments=o.Array;if(i("keys"),i("values"),i("entries"),!u&&l&&"values"!==d.name)try{s(d,"name",{value:"values"})}catch(t){}},,,,function(t,e,r){"use strict";r.r(e),r.d(e,"imgConfig",(function(){return c})),r.d(e,"getRandomWallpaper",(function(){return u})),r.d(e,"getBingWallpaper",(function(){return l})),r.d(e,"getWallpapers",(function(){return h})),r.d(e,"getWallpaperListByType",(function(){return p})),r.d(e,"likeWallpaper",(function(){return d})),r.d(e,"collectionWallpaper",(function(){return f})),r.d(e,"addCustomColor",(function(){return g})),r.d(e,"setCustomColorItems",(function(){return m})),r.d(e,"getCustomColor",(function(){return y})),r.d(e,"removeCustomColor",(function(){return v})),r.d(e,"uploadWallpaper",(function(){return b})),r.d(e,"getWallpapersById",(function(){return w})),r.d(e,"createWallpaperLibrary",(function(){return x})),r.d(e,"getUserWallpaperLibrary",(function(){return k})),r.d(e,"hasWallpaperLibrary",(function(){return S})),r.d(e,"getLikedWallpaper",(function(){return O})),r.d(e,"getCollectionWallpaper",(function(){return _})),r.d(e,"getWallpaperLibraryItems",(function(){return A})),r.d(e,"getUserWallpaperLibraryItemsById",(function(){return T})),r.d(e,"removeWallpaperLibraryItem",(function(){return j})),r.d(e,"removeWallpaperLibrary",(function(){return C})),r.d(e,"addImagesToLibrary",(function(){return E})),r.d(e,"renameWallpaperLibrary",(function(){return L})),r.d(e,"getNextWallpaper",(function(){return R})),r.d(e,"convertURL",(function(){return P}));r(11),r(60);var n=r(0),i=r(3),o=r(47);const a=Math.floor(screen.width*window.devicePixelRatio),s=Math.floor(203*window.devicePixelRatio),c={smallWidth:s>3840?3840:s,normalWidth:a>3840?3840:a,format:o.e?"":o.f},u=async()=>{try{const t=await i.a.get(n.x+"/random-wallpaper",{_:(new Date).getTime()});if(!t.success)throw t;const{src:e,_id:r,source:o}=t.data[0],{url:a,rawUrl:s}=P(e.rawSrc);return{data:{url:a,rawUrl:s,id:r,source:o}}}catch(t){return{error:t}}},l=async()=>{try{const t=await i.a.get(n.y+"/get_bing_wallpaper",null,{_single:"getBingWallpaper"});if(t.error)throw t.error;const{data:e}=t,{content:r,url:o,rawUrl:a}=P(e.src.rawSrc);return e.thumbnail=r,e.url=o,e.rawUrl=a,t}catch(t){return{error:t}}},h=async t=>{const{source:e}=t;t.source="all"===e?"":e;try{const e=await i.a.get(n.x+"/get-wallpaper",t,{_single:"getWallpapers"}),{data:r}=e;return r.forEach(t=>{const{content:e,url:r,rawUrl:n}=P(t.src.rawSrc);t.thumbnail=e,t.url=r,t.rawUrl=n}),{result:e}}catch(t){return{error:t}}};async function p(t){"1"===t.order?t.order="like":"2"===t.order&&(t.order="_id");try{const e=await i.a.get(n.y+"/get_wallpaper_list",Object.assign({client:"pc"},t),{_single:"getWallpaperListByType"});if(0!==e.code)throw new Error(e.message);const{data:r}=e;return r.list.forEach(t=>{const{content:e,url:r,rawUrl:n}=P(t.src.rawSrc);t.thumbnail=e,t.url=r,t.rawUrl=n}),r.data=r.list,r.success=1,{result:r}}catch(t){return{error:t}}}const d=async(t,e)=>{try{const r=await i.a.post(n.y+"/like_wallpaper",{id:t,state:e},{_auth:!0});if(0!==r.code)throw r;return r}catch(t){return{error:t}}},f=async(t,e)=>{try{const r=await i.a.post(n.y+"/collection_wallpaper",{id:t,state:e},{_auth:!0});if(0!==r.code)throw r;return r}catch(t){return{error:t}}},g=async t=>{try{const e=await i.a.post(n.y+"/add_custom_color",Object.assign(Object.assign({},t),{newVer:!0}),{_auth:!0});if(0!==e.code)throw e;return e}catch(t){return{error:t}}},m=async t=>{try{const e=await i.a.post(n.y+"/set_custom_color_items",t,{_auth:!0});if(0!==e.code)throw e;return e}catch(t){return{error:t}}},y=async()=>{try{const t=await i.a.get(n.y+"/get_custom_color",null,{_auth:!0});if(0!==t.code)throw t;return t}catch(t){return{error:t}}},v=async t=>{try{const e=await i.a.post(n.y+"/remove_custom_color",{id:t,newVer:!0},{_auth:!0});if(0!==e.code)throw e;return e}catch(t){return{error:t}}},b=async t=>{try{const e=await i.a.post(n.y+"/upload_wallpaper",t,{headers:{"Content-Type":"multipart/form-data"}});if(0!==e.code)throw e;return{data:e.data}}catch(t){return{error:t}}},w=async t=>{try{const e=await i.a.get(n.y+"/get_wallpapers_by_id",{id:t});if(0!==e.code)throw e;const{data:r}=e;return r.forEach(t=>{const{content:e,url:r,rawUrl:n}=P(t.src.rawSrc);t.thumbnail=e,t.url=r,t.rawUrl=n}),{data:r}}catch(t){return{error:t}}},x=async({libraryName:t,libraryId:e,wallpapers:r})=>{try{return await i.a.post(n.y+"/create_wallpaper_library",{libraryName:t,libraryId:e,wallpapers:r},{_auth:!0})}catch(t){return{error:t}}},k=async()=>await i.a.get(n.y+"/get_user_wallpaper_library",null,{_auth:!0}),S=async t=>{try{return await i.a.get(n.y+"/has_wallpaper_library",{libraryId:t},{_auth:!0,_proxy:!0})}catch(t){return{error:t}}},O=async()=>{try{return await i.a.get(n.y+"/get_liked_wallpaper",null,{_auth:!0})}catch(t){return{error:t}}},_=async()=>{try{return await i.a.get(n.y+"/get_collection_wallpaper",null,{_auth:!0})}catch(t){return{error:t}}},A=async t=>{const e=await i.a.get(n.y+"/get_user_wallpaper_library_items",{libraryId:t});e.data.map(t=>{const{content:e,url:r,rawUrl:n}=P(t.url);return t.content=e,t.url=r,t.rawUrl=n,t});const{data:r}=e;return e.data={items:r,count:r.length},e.data},T=async t=>{try{const e=await i.a.get(n.y+"/get_user_wallpaper_library_items_by_id",{libraryItemsId:t}),{data:r}=e;return e.data={items:r,count:r.length},e.data}catch(t){return{error:t}}},j=async(t,e,r)=>{try{return await i.a.post(n.y+"/remove_wallpaper_library_item",{libraryId:t,libraryItemId:e,ext:r},{_auth:!0})}catch(t){return{error:t}}},C=async t=>{try{return await i.a.post(n.y+"/remove_wallpaper_library",{libraryId:t},{_auth:!0})}catch(t){return{error:t}}},E=async(t,e)=>{try{return await i.a.post(n.y+"/add_images_to_library",{libraryId:t,wallpapers:e},{_auth:!0})}catch(t){return{error:t}}},L=async(t,e)=>{try{return await i.a.post(n.y+"/rename_wallpaper_library",{libraryId:t,libraryName:e},{_auth:!0})}catch(t){return{error:t}}},R=async(t,e,r="library")=>{const o={source:t,type:r};e&&(o._id=e);const a=await i.a.get(n.y+"/get_next_wallpaper",o,{_single:"getNextWallpaper"});if(0!==a.code)throw new Error;const{data:s}=a,{content:c,url:u,rawUrl:l}=P(s.rawUrl);return s.thumbnail=c,s.url=u,s.rawUrl=l,a},P=t=>({rawUrl:t,url:`${t}?imageView2/2/w/${c.normalWidth}/${c.format}interlace/1`,content:`${t}?imageView2/2/w/${c.smallWidth}/${c.format}interlace/1`})},,function(t,e,r){"use strict";r.d(e,"j",(function(){return i})),r.d(e,"c",(function(){return o})),r.d(e,"a",(function(){return a})),r.d(e,"d",(function(){return s})),r.d(e,"i",(function(){return c})),r.d(e,"h",(function(){return u})),r.d(e,"f",(function(){return l})),r.d(e,"e",(function(){return h})),r.d(e,"b",(function(){return p})),r.d(e,"g",(function(){return d}));var n=r(0);const i=.1;function o(t){return`https://chrome.google.com/webstore/detail/infinity-new-tab-pro/${t}/reviews?utm_source=infinity-rate`}const a="https://addons.mozilla.org/"+n.D.lang+"/firefox/addon/infinity-new-tab-pro-firefox/";function s(t){return"https://microsoftedge.microsoft.com/addons/detail/infinity-new-tab-pro/"+t}const c="privacy_data_uninstall_title_pro",u="privacy_data_uninstall_confirm_pro",l=!0,h=()=>{},p=()=>{n.D.isZh?chrome.runtime.setUninstallURL("https://hello.wetab.link/"):chrome.runtime.setUninstallURL("")},d="https://infinityicon.infinitynewtab.com/assets/logo-pro.png"},,,function(t,e,r){"use strict";r.d(e,"c",(function(){return a})),r.d(e,"a",(function(){return s})),r.d(e,"d",(function(){return c})),r.d(e,"b",(function(){return u}));var n=r(7),i=r.n(n),o=(r(17),r(273),r(274),r(275),r(31),r(89),r(0));function a(t){return function(e){const r=new Uint8Array((e||40)/2);return window.crypto.getRandomValues(r),t+(new Date).getTime().toString(32)+function(t){let e="";const r="abcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<t;n++)e+=r.charAt(Math.floor(Math.random()*r.length));return e}(18)}()}function s(t,e=o.D.lang){const r=this,n=/(\d{1,4})\D+(\d{1,2})\D+(\d{1,4})/;let i,a,s;return n.test(t)?(t.replace(n,(t,n,o,c)=>{4===n.length?(i=n,a=o,s=c):r.isFirstDate(e)?(s=n,a=o,i=c):(s=o,a=n,i=c),"th"===e&&(i=Number(i)-543)}),new Date(`${i}/${a}/${s}`)):null}function c(t){return t.slice(0,1).toUpperCase()+t.slice(1)}function u(t,e,r){return new i.a((n,i)=>{const o=new Image(e,r);o.onload=()=>n(o),o.onerror=i,o.crossOrigin="anonymous",o.src=t})}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){var n,i=r(51),o=r(362),a=r(219),s=r(218),c=r(251),u=r(227),l=r(216),h=l("IE_PROTO"),p=function(){},d=function(t){return"<script>"+t+"<\/script>"},f=function(t){t.write(d("")),t.close();var e=t.parentWindow.Object;return t=null,e},g=function(){try{n=new ActiveXObject("htmlfile")}catch(t){}var t,e;g="undefined"!=typeof document?document.domain&&n?f(n):((e=u("iframe")).style.display="none",c.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(d("document.F=Object")),t.close(),t.F):f(n);for(var r=a.length;r--;)delete g.prototype[a[r]];return g()};s[h]=!0,t.exports=Object.create||function(t,e){var r;return null!==t?(p.prototype=i(t),r=new p,p.prototype=null,r[h]=t):r=g(),void 0===e?r:o.f(r,e)}},function(t,e,r){var n=r(100),i=r(214),o=r(163),a=r(125),s=r(33)("iterator");t.exports=function(t){if(!o(t))return i(t,s)||i(t,"@@iterator")||a[n(t)]}},,,,,function(t,e,r){"use strict";r.r(e),r.d(e,"slave",(function(){return s}));r(11),r(17),r(19),r(60);var n=r(7),i=r.n(n),o=r(343),a=r(85);const s=new class{constructor(){if(this.channel=null,this.initResolve=[],this.initReject=[],this.messageScheduler=new o.a,this.initChannel=()=>{"serviceworker"===a.b?this.initServiceworker():"background"===a.b&&this.initBackground()},this.awaitChannel=()=>new i.a(async(t,e)=>{"serviceworker"===a.b?this.channel?(await this.channel.active,await this.channel.controlling,t(null)):(this.initResolve.push(t),this.initReject.push(e)):"background"===a.b&&t(null)}),this.initServiceworker=async()=>{try{const{createWorkBox:t}=await r.e(11).then(r.bind(null,753)),e=await t();if(!e)return;e.addEventListener("message",t=>{const{type:e,payload:r={}}=t.data;"master:bordcast-message"===e&&this.messageScheduler.execTask(r.type,r.payload)}),await e.active,await e.controlling,this.channel=e,this.initResolve.forEach(t=>{t()}),this.channel.postTask=this.channel.messageSW}catch(t){console.log("slave初始化错误：",t),this.initReject.forEach(t=>{t()})}},this.initBackground=()=>{this.channel={postTask:t=>new i.a((e,r)=>{chrome.runtime.sendMessage(t,t=>{chrome.runtime.lastError&&r(chrome.runtime.lastError),e(t)})})},chrome.runtime.onMessage.addListener(({type:t,payload:e,ignoreId:r})=>{"master:bordcast-message"===t?chrome.tabs.getCurrent(t=>{r!==t.id&&this.messageScheduler.execTask(e.type,e.payload)}):"slave:bordcast-message"===t&&this.messageScheduler.execTask(e.data.type,e.data.payload)})},a.a)throw new Error("it's not page");this.initChannel()}postTask(t,e,r){return new i.a(async(n,i)=>{let o=!1;await this.awaitChannel();const s=Object.assign(Object.assign(Object.assign({},a.d),{taskId:Object(a.c)()}),r);s.timeout&&setTimeout(()=>{o||n({error:"timeout"})},s.timeout);try{const r=await this.channel.postTask({type:t,payload:Object.assign({data:e},s)});o=!0,n(r)}catch(t){n({error:t})}})}listenMessage(t,e){this.messageScheduler.listenTask(t,e)}sendMessage(t,e=""){this.postTask("slave:bordcast-message",{type:t,payload:e})}}},,,,,function(t,e,r){var n=r(46),i=r(28),o=r(133),a=r(216),s=r(357),c=a("IE_PROTO"),u=Object,l=u.prototype;t.exports=s?u.getPrototypeOf:function(t){var e=o(t);if(n(e,c))return e[c];var r=e.constructor;return i(r)&&e instanceof r?r.prototype:e instanceof u?l:null}},function(t,e,r){var n=r(280),i=r(281),o=n("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},function(t,e,r){var n=r(25),i=r(51),o=r(358);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=n(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return i(r),o(n),e?t(r,n):r.__proto__=n,r}}():void 0)},function(t,e){t.exports={}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e,r){var n=r(36),i=r(69),o=r(51),a=r(161),s=r(205),c=TypeError;t.exports=function(t,e){var r=arguments.length<2?s(t):e;if(i(r))return o(n(r,t));throw c(a(t)+" is not iterable")}},function(t,e,r){var n=r(71),i=TypeError;t.exports=function(t,e){if(n(e,t))return t;throw i("Incorrect invocation")}},function(t,e){var r=TypeError;t.exports=function(t,e){if(t<e)throw r("Not enough arguments");return t}},function(t,e,r){"use strict";var n,i,o,a=r(413),s=r(18),c=r(6),u=r(5),l=r(20),h=r(14),p=r(72),d=r(49),f=r(38),g=r(34),m=r(21).f,y=r(48),v=r(97),b=r(86),w=r(9),x=r(94),k=r(54),S=k.enforce,O=k.get,_=c.Int8Array,A=_&&_.prototype,T=c.Uint8ClampedArray,j=T&&T.prototype,C=_&&v(_),E=A&&v(A),L=Object.prototype,R=c.TypeError,P=w("toStringTag"),M=x("TYPED_ARRAY_TAG"),I=a&&!!b&&"Opera"!==p(c.opera),D=!1,B={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},U={BigInt64Array:8,BigUint64Array:8},N=function(t){var e=v(t);if(l(e)){var r=O(e);return r&&h(r,"TypedArrayConstructor")?r.TypedArrayConstructor:N(e)}},z=function(t){if(!l(t))return!1;var e=p(t);return h(B,e)||h(U,e)};for(n in B)(o=(i=c[n])&&i.prototype)?S(o).TypedArrayConstructor=i:I=!1;for(n in U)(o=(i=c[n])&&i.prototype)&&(S(o).TypedArrayConstructor=i);if((!I||!u(C)||C===Function.prototype)&&(C=function(){throw R("Incorrect invocation")},I))for(n in B)c[n]&&b(c[n],C);if((!I||!E||E===L)&&(E=C.prototype,I))for(n in B)c[n]&&b(c[n].prototype,E);if(I&&v(j)!==E&&b(j,E),s&&!h(E,P))for(n in D=!0,m(E,P,{get:function(){return l(this)?this[M]:void 0}}),B)c[n]&&f(c[n],M,n);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:I,TYPED_ARRAY_TAG:D&&M,aTypedArray:function(t){if(z(t))return t;throw R("Target is not a typed array")},aTypedArrayConstructor:function(t){if(u(t)&&(!b||y(C,t)))return t;throw R(d(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,r,n){if(s){if(r)for(var i in B){var o=c[i];if(o&&h(o.prototype,t))try{delete o.prototype[t]}catch(r){try{o.prototype[t]=e}catch(t){}}}E[t]&&!r||g(E,t,r?e:I&&A[t]||e,n)}},exportTypedArrayStaticMethod:function(t,e,r){var n,i;if(s){if(b){if(r)for(n in B)if((i=c[n])&&h(i,t))try{delete i[t]}catch(t){}if(C[t]&&!r)return;try{return g(C,t,r?e:I&&C[t]||e)}catch(t){}}for(n in B)!(i=c[n])||i[t]&&!r||g(i,t,e)}},getTypedArrayConstructor:N,isView:function(t){if(!l(t))return!1;var e=p(t);return"DataView"===e||h(B,e)||h(U,e)},isTypedArray:z,TypedArray:C,TypedArrayPrototype:E}},function(t,e){},,,,,,,,,,function(t,e,r){r(156);var n=r(387),i=r(27),o=r(100),a=r(90),s=r(125),c=r(33)("toStringTag");for(var u in n){var l=i[u],h=l&&l.prototype;h&&o(h)!==c&&a(h,c,u),s[u]=s.Array}},,function(t,e,r){var n=r(51),i=r(372),o=r(163),a=r(33)("species");t.exports=function(t,e){var r,s=n(t).constructor;return void 0===s||o(r=n(s)[a])?e:i(r)}},function(t,e,r){"use strict";var n=r(253).IteratorPrototype,i=r(204),o=r(104),a=r(150),s=r(125),c=function(){return this};t.exports=function(t,e,r,u){var l=e+" Iterator";return t.prototype=i(n,{next:o(+!u,r)}),a(t,l,!1,!0),s[l]=c,t}},function(t,e,r){var n=r(25),i=r(230),o=r(101),a=r(136),s=n("".charAt),c=n("".charCodeAt),u=n("".slice),l=function(t){return function(e,r){var n,l,h=o(a(e)),p=i(r),d=h.length;return p<0||p>=d?t?"":void 0:(n=c(h,p))<55296||n>56319||p+1===d||(l=c(h,p+1))<56320||l>57343?t?s(h,p):n:t?u(h,p,p+2):l-56320+(n-55296<<10)+65536}};t.exports={codeAt:l(!1),charAt:l(!0)}},,,,,,,,,,,function(t,e,r){r(356)},function(t,e,r){var n=r(25),i=r(46),o=r(152),a=r(284).indexOf,s=r(218),c=n([].push);t.exports=function(t,e){var r,n=o(t),u=0,l=[];for(r in n)!i(s,r)&&i(n,r)&&c(l,r);for(;e.length>u;)i(n,r=e[u++])&&(~a(l,r)||c(l,r));return l}},function(t,e,r){var n=r(70);t.exports=n("document","documentElement")},function(t,e,r){"use strict";var n=r(30),i=r(36),o=r(68),a=r(266),s=r(28),c=r(237),u=r(215),l=r(217),h=r(150),p=r(90),d=r(87),f=r(33),g=r(125),m=r(253),y=a.PROPER,v=a.CONFIGURABLE,b=m.IteratorPrototype,w=m.BUGGY_SAFARI_ITERATORS,x=f("iterator"),k=function(){return this};t.exports=function(t,e,r,a,f,m,S){c(r,e,a);var O,_,A,T=function(t){if(t===f&&R)return R;if(!w&&t in E)return E[t];switch(t){case"keys":case"values":case"entries":return function(){return new r(this,t)}}return function(){return new r(this)}},j=e+" Iterator",C=!1,E=t.prototype,L=E[x]||E["@@iterator"]||f&&E[f],R=!w&&L||T(f),P="Array"==e&&E.entries||L;if(P&&(O=u(P.call(new t)))!==Object.prototype&&O.next&&(o||u(O)===b||(l?l(O,b):s(O[x])||d(O,x,k)),h(O,j,!0,!0),o&&(g[j]=k)),y&&"values"==f&&L&&"values"!==L.name&&(!o&&v?p(E,"name","values"):(C=!0,R=function(){return i(L,this)})),f)if(_={values:T("values"),keys:m?R:T("keys"),entries:T("entries")},S)for(A in _)(w||C||!(A in E))&&d(E,A,_[A]);else n({target:e,proto:!0,forced:w||C},_);return o&&!S||E[x]===R||d(E,x,R,{name:f}),g[e]=R,_}},function(t,e,r){"use strict";var n,i,o,a=r(32),s=r(28),c=r(61),u=r(204),l=r(215),h=r(87),p=r(33),d=r(68),f=p("iterator"),g=!1;[].keys&&("next"in(o=[].keys())?(i=l(l(o)))!==Object.prototype&&(n=i):g=!0),!c(n)||a((function(){var t={};return n[f].call(t)!==t}))?n={}:d&&(n=u(n)),s(n[f])||h(n,f,(function(){return this})),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:g}},function(t,e,r){var n=r(25),i=r(28),o=r(226),a=n(Function.toString);i(o.inspectSource)||(o.inspectSource=function(t){return a(t)}),t.exports=o.inspectSource},function(t,e,r){var n,i,o,a,s=r(27),c=r(279),u=r(103),l=r(28),h=r(46),p=r(32),d=r(251),f=r(373),g=r(227),m=r(222),y=r(256),v=r(131),b=s.setImmediate,w=s.clearImmediate,x=s.process,k=s.Dispatch,S=s.Function,O=s.MessageChannel,_=s.String,A=0,T={};try{n=s.location}catch(t){}var j=function(t){if(h(T,t)){var e=T[t];delete T[t],e()}},C=function(t){return function(){j(t)}},E=function(t){j(t.data)},L=function(t){s.postMessage(_(t),n.protocol+"//"+n.host)};b&&w||(b=function(t){m(arguments.length,1);var e=l(t)?t:S(t),r=f(arguments,1);return T[++A]=function(){c(e,void 0,r)},i(A),A},w=function(t){delete T[t]},v?i=function(t){x.nextTick(C(t))}:k&&k.now?i=function(t){k.now(C(t))}:O&&!y?(a=(o=new O).port2,o.port1.onmessage=E,i=u(a.postMessage,a)):s.addEventListener&&l(s.postMessage)&&!s.importScripts&&n&&"file:"!==n.protocol&&!p(L)?(i=L,s.addEventListener("message",E,!1)):i="onreadystatechange"in g("script")?function(t){d.appendChild(g("script")).onreadystatechange=function(){d.removeChild(this),j(t)}}:function(t){setTimeout(C(t),0)}),t.exports={set:b,clear:w}},function(t,e,r){var n=r(151);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},function(t,e){t.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},function(t,e,r){var n=r(127),i=r(381),o=r(149).CONSTRUCTOR;t.exports=o||!i((function(t){n.all(t).then(void 0,(function(){}))}))},function(t,e,r){var n=r(51),i=r(61),o=r(88);t.exports=function(t,e){if(n(t),i(e)&&e.constructor===t)return e;var r=o.f(t);return(0,r.resolve)(e),r.promise}},function(t,e,r){"use strict";var n=r(30),i=r(36),o=r(69),a=r(88),s=r(126),c=r(148);n({target:"Promise",stat:!0},{allSettled:function(t){var e=this,r=a.f(e),n=r.resolve,u=r.reject,l=s((function(){var r=o(e.resolve),a=[],s=0,u=1;c(t,(function(t){var o=s++,c=!1;u++,i(r,e,t).then((function(t){c||(c=!0,a[o]={status:"fulfilled",value:t},--u||n(a))}),(function(t){c||(c=!0,a[o]={status:"rejected",reason:t},--u||n(a))}))})),--u||n(a)}));return l.error&&u(l.value),r.promise}})},function(t,e,r){"use strict";var n=r(30),i=r(36),o=r(69),a=r(70),s=r(88),c=r(126),u=r(148);n({target:"Promise",stat:!0},{any:function(t){var e=this,r=a("AggregateError"),n=s.f(e),l=n.resolve,h=n.reject,p=c((function(){var n=o(e.resolve),a=[],s=0,c=1,p=!1;u(t,(function(t){var o=s++,u=!1;c++,i(n,e,t).then((function(t){u||p||(p=!0,l(t))}),(function(t){u||p||(u=!0,a[o]=t,--c||h(new r(a,"No one promise resolved")))}))})),--c||h(new r(a,"No one promise resolved"))}));return p.error&&h(p.value),n.promise}})},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,r){var n=r(250),i=r(219);t.exports=Object.keys||function(t){return n(t,i)}},function(t,e,r){var n=r(33),i=r(125),o=n("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||a[o]===t)}},function(t,e,r){var n=r(36),i=r(51),o=r(214);t.exports=function(t,e,r){var a,s;i(t);try{if(!(a=o(t,"return"))){if("throw"===e)throw r;return r}a=n(a,t)}catch(t){s=!0,a=t}if("throw"===e)throw r;if(s)throw a;return i(a),r}},function(t,e,r){var n=r(59),i=r(46),o=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,s=i(o,"name"),c=s&&"something"===function(){}.name,u=s&&(!n||n&&a(o,"name").configurable);t.exports={EXISTS:s,PROPER:c,CONFIGURABLE:u}},function(t,e,r){var n=r(25),i=r(32),o=r(28),a=r(100),s=r(70),c=r(254),u=function(){},l=[],h=s("Reflect","construct"),p=/^\s*(?:class|function)\b/,d=n(p.exec),f=!p.exec(u),g=function(t){if(!o(t))return!1;try{return h(u,l,t),!0}catch(t){return!1}},m=function(t){if(!o(t))return!1;switch(a(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!d(p,c(t))}catch(t){return!0}};m.sham=!0,t.exports=!h||i((function(){var t;return g(g.call)||!g(Object)||!g((function(){t=!0}))||t}))?m:g},function(t,e,r){"use strict";var n=r(238).charAt,i=r(101),o=r(132),a=r(252),s=o.set,c=o.getterFor("String Iterator");a(String,"String",(function(t){s(this,{type:"String Iterator",string:i(t),index:0})}),(function(){var t,e=c(this),r=e.string,i=e.index;return i>=r.length?{value:void 0,done:!0}:(t=n(r,i),e.index+=t.length,{value:t,done:!1})}))},function(t,e,r){var n=r(32),i=r(33),o=r(68),a=i("iterator");t.exports=!n((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,r="";return t.pathname="c%20d",e.forEach((function(t,n){e.delete("b"),r+=n+t})),o&&!t.toJSON||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host}))},function(t,e,r){"use strict";var n=r(231),i=r(91),o=r(104);t.exports=function(t,e,r){var a=n(e);a in t?i.f(t,a,o(0,r)):t[a]=r}},function(t,e,r){var n=r(291),i=r(134),o=r(270),a=Array,s=Math.max;t.exports=function(t,e,r){for(var c=i(t),u=n(e,c),l=n(void 0===r?c:r,c),h=a(s(l-u,0)),p=0;u<l;u++,p++)o(h,p,t[u]);return h.length=p,h}},function(t,e,r){"use strict";r(156);var n=r(30),i=r(27),o=r(36),a=r(25),s=r(59),c=r(269),u=r(87),l=r(411),h=r(150),p=r(237),d=r(132),f=r(221),g=r(28),m=r(46),y=r(103),v=r(100),b=r(51),w=r(61),x=r(101),k=r(204),S=r(104),O=r(220),_=r(205),A=r(222),T=r(33),j=r(331),C=T("iterator"),E=d.set,L=d.getterFor("URLSearchParams"),R=d.getterFor("URLSearchParamsIterator"),P=Object.getOwnPropertyDescriptor,M=function(t){if(!s)return i[t];var e=P(i,t);return e&&e.value},I=M("fetch"),D=M("Request"),B=M("Headers"),U=D&&D.prototype,N=B&&B.prototype,z=i.RegExp,W=i.TypeError,q=i.decodeURIComponent,$=i.encodeURIComponent,H=a("".charAt),V=a([].join),F=a([].push),G=a("".replace),K=a([].shift),Y=a([].splice),X=a("".split),J=a("".slice),Z=/\+/g,Q=Array(4),tt=function(t){return Q[t-1]||(Q[t-1]=z("((?:%[\\da-f]{2}){"+t+"})","gi"))},et=function(t){try{return q(t)}catch(e){return t}},rt=function(t){var e=G(t,Z," "),r=4;try{return q(e)}catch(t){for(;r;)e=G(e,tt(r--),et);return e}},nt=/[!'()~]|%20/g,it={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ot=function(t){return it[t]},at=function(t){return G($(t),nt,ot)},st=p((function(t,e){E(this,{type:"URLSearchParamsIterator",iterator:O(L(t).entries),kind:e})}),"Iterator",(function(){var t=R(this),e=t.kind,r=t.iterator.next(),n=r.value;return r.done||(r.value="keys"===e?n.key:"values"===e?n.value:[n.key,n.value]),r}),!0),ct=function(t){this.entries=[],this.url=null,void 0!==t&&(w(t)?this.parseObject(t):this.parseQuery("string"==typeof t?"?"===H(t,0)?J(t,1):t:x(t)))};ct.prototype={type:"URLSearchParams",bindURL:function(t){this.url=t,this.update()},parseObject:function(t){var e,r,n,i,a,s,c,u=_(t);if(u)for(r=(e=O(t,u)).next;!(n=o(r,e)).done;){if(a=(i=O(b(n.value))).next,(s=o(a,i)).done||(c=o(a,i)).done||!o(a,i).done)throw W("Expected sequence with length 2");F(this.entries,{key:x(s.value),value:x(c.value)})}else for(var l in t)m(t,l)&&F(this.entries,{key:l,value:x(t[l])})},parseQuery:function(t){if(t)for(var e,r,n=X(t,"&"),i=0;i<n.length;)(e=n[i++]).length&&(r=X(e,"="),F(this.entries,{key:rt(K(r)),value:rt(V(r,"="))}))},serialize:function(){for(var t,e=this.entries,r=[],n=0;n<e.length;)t=e[n++],F(r,at(t.key)+"="+at(t.value));return V(r,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var ut=function(){f(this,lt);var t=arguments.length>0?arguments[0]:void 0;E(this,new ct(t))},lt=ut.prototype;if(l(lt,{append:function(t,e){A(arguments.length,2);var r=L(this);F(r.entries,{key:x(t),value:x(e)}),r.updateURL()},delete:function(t){A(arguments.length,1);for(var e=L(this),r=e.entries,n=x(t),i=0;i<r.length;)r[i].key===n?Y(r,i,1):i++;e.updateURL()},get:function(t){A(arguments.length,1);for(var e=L(this).entries,r=x(t),n=0;n<e.length;n++)if(e[n].key===r)return e[n].value;return null},getAll:function(t){A(arguments.length,1);for(var e=L(this).entries,r=x(t),n=[],i=0;i<e.length;i++)e[i].key===r&&F(n,e[i].value);return n},has:function(t){A(arguments.length,1);for(var e=L(this).entries,r=x(t),n=0;n<e.length;)if(e[n++].key===r)return!0;return!1},set:function(t,e){A(arguments.length,1);for(var r,n=L(this),i=n.entries,o=!1,a=x(t),s=x(e),c=0;c<i.length;c++)(r=i[c]).key===a&&(o?Y(i,c--,1):(o=!0,r.value=s));o||F(i,{key:a,value:s}),n.updateURL()},sort:function(){var t=L(this);j(t.entries,(function(t,e){return t.key>e.key?1:-1})),t.updateURL()},forEach:function(t){for(var e,r=L(this).entries,n=y(t,arguments.length>1?arguments[1]:void 0),i=0;i<r.length;)n((e=r[i++]).value,e.key,this)},keys:function(){return new st(this,"keys")},values:function(){return new st(this,"values")},entries:function(){return new st(this,"entries")}},{enumerable:!0}),u(lt,C,lt.entries,{name:"entries"}),u(lt,"toString",(function(){return L(this).serialize()}),{enumerable:!0}),h(ut,"URLSearchParams"),n({global:!0,constructor:!0,forced:!c},{URLSearchParams:ut}),!c&&g(B)){var ht=a(N.has),pt=a(N.set),dt=function(t){if(w(t)){var e,r=t.body;if("URLSearchParams"===v(r))return e=t.headers?new B(t.headers):new B,ht(e,"content-type")||pt(e,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),k(t,{body:S(0,x(r)),headers:S(0,e)})}return t};if(g(I)&&n({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return I(t,arguments.length>1?dt(arguments[1]):{})}}),g(D)){var ft=function(t){return f(this,U),new D(t,arguments.length>1?dt(arguments[1]):{})};U.constructor=ft,ft.prototype=U,n({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:ft})}}t.exports={URLSearchParams:ut,getState:L}},function(t,e,r){"use strict";var n=r(223),i=r(414),o=r(415),a=r(72),s=r(13),c=r(8),u=r(10),l=n.aTypedArray,h=n.exportTypedArrayMethod,p=c("".slice);h("fill",(function(t){var e=arguments.length;l(this);var r="Big"===p(a(this),0,3)?o(t):+t;return s(i,this,r,e>1?arguments[1]:void 0,e>2?arguments[2]:void 0)}),u((function(){var t=0;return new Int8Array(2).fill({valueOf:function(){return t++}}),1!==t})))},function(t,e,r){"use strict";var n=r(6),i=r(13),o=r(223),a=r(62),s=r(416),c=r(63),u=r(10),l=n.RangeError,h=n.Int8Array,p=h&&h.prototype,d=p&&p.set,f=o.aTypedArray,g=o.exportTypedArrayMethod,m=!u((function(){var t=new Uint8ClampedArray(2);return i(d,t,{length:1,0:3},1),3!==t[1]})),y=m&&o.NATIVE_ARRAY_BUFFER_VIEWS&&u((function(){var t=new h(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));g("set",(function(t){f(this);var e=s(arguments.length>1?arguments[1]:void 0,1),r=c(t);if(m)return i(d,this,r,e);var n=this.length,o=a(r),u=0;if(o+e>n)throw l("Wrong length");for(;u<o;)this[e+u]=r[u++]}),!m||y)},function(t,e,r){"use strict";var n=r(6),i=r(8),o=r(10),a=r(29),s=r(418),c=r(223),u=r(421),l=r(422),h=r(93),p=r(423),d=c.aTypedArray,f=c.exportTypedArrayMethod,g=n.Uint16Array,m=g&&i(g.prototype.sort),y=!(!m||o((function(){m(new g(2),null)}))&&o((function(){m(new g(2),{})}))),v=!!m&&!o((function(){if(h)return h<74;if(u)return u<67;if(l)return!0;if(p)return p<602;var t,e,r=new g(516),n=Array(516);for(t=0;t<516;t++)e=t%4,r[t]=515-t,n[t]=t-2*e+3;for(m(r,(function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(r[t]!==n[t])return!0}));f("sort",(function(t){return void 0!==t&&a(t),v?m(this,t):s(d(this),function(t){return function(e,r){return void 0!==t?+t(e,r)||0:r!=r?-1:e!=e?1:0===e&&0===r?1/e>0&&1/r<0?1:-1:e>r}}(t))}),!v||y)},function(t,e,r){"use strict";var n=r(430).start,i=r(431);t.exports=i("trimStart")?function(){return n(this)}:"".trimStart},function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},,,,,,,,,,,,,,function(t,e,r){t.exports=r(393)},function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return d}));r(344),r(31),r(89),r(428);var n=r(294),i=r.n(n),o=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,a=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,s=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function c(t){return(t||"").toString().replace(s,"")}var u=[["#","hash"],["?","query"],function(t){return t.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],l={hash:1,query:1};function h(e){var r,n=("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{}).location||{},i={},a=typeof(e=e||n);if("blob:"===e.protocol)i=new d(unescape(e.pathname),{});else if("string"===a)for(r in i=new d(e,{}),l)delete i[r];else if("object"===a){for(r in e)r in l||(i[r]=e[r]);void 0===i.slashes&&(i.slashes=o.test(e.href))}return i}function p(t){t=c(t);var e=a.exec(t);return{protocol:e[1]?e[1].toLowerCase():"",slashes:!!e[2],rest:e[3]}}function d(t,e){t=c(t);var r,n,o,a,s,l,d=u.slice(),f=this,g=0;for(e=h(e),r=!(n=p(t||"")).protocol&&!n.slashes,f.slashes=n.slashes||r&&e.slashes,f.protocol=n.protocol||e.protocol||"",t=n.rest,n.slashes||(d[3]=[/(.*)/,"pathname"]);g<d.length;g++)"function"!=typeof(a=d[g])?(o=a[0],l=a[1],o!=o?f[l]=t:"string"==typeof o?~(s=t.indexOf(o))&&("number"==typeof a[2]?(f[l]=t.slice(0,s),t=t.slice(s+a[2])):(f[l]=t.slice(s),t=t.slice(0,s))):(s=o.exec(t))&&(f[l]=s[1],t=t.slice(0,s.index)),f[l]=f[l]||r&&a[3]&&e[l]||"",a[4]&&(f[l]=f[l].toLowerCase())):t=a(t);r&&e.slashes&&"/"!==f.pathname.charAt(0)&&(""!==f.pathname||""!==e.pathname)&&(f.pathname=function(t,e){if(""===t)return e;for(var r=(e||"/").split("/").slice(0,-1).concat(t.split("/")),n=r.length,i=r[n-1],o=!1,a=0;n--;)"."===r[n]?r.splice(n,1):".."===r[n]?(r.splice(n,1),a++):a&&(0===n&&(o=!0),r.splice(n,1),a--);return o&&r.unshift(""),"."!==i&&".."!==i||r.push(""),r.join("/")}(f.pathname,e.pathname)),i()(f.port,f.protocol)||(f.host=f.hostname,f.port=""),f.username=f.password="",f.auth&&(a=f.auth.split(":"),f.username=a[0]||"",f.password=a[1]||""),f.origin=f.protocol&&f.host&&"file:"!==f.protocol?f.protocol+"//"+f.host:"null",f.href=f.toString()}d.prototype={toString:function(){var t,e=this,r=e.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var n=r+(e.slashes?"//":"");return e.username&&(n+=e.username,e.password&&(n+=":"+e.password),n+="@"),n+=e.host+e.pathname,(t=e.query)&&(n+="?"!==t.charAt(0)?"?"+t:t),e.hash&&(n+=e.hash),n}},d.extractProtocol=p,d.location=h,d.trimLeft=c}).call(this,r(84))},function(t,e,r){"use strict";t.exports=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},,,,,,,,,,,,,,,,,,,,,function(t,e,r){"use strict";var n=r(32);t.exports=function(t,e){var r=[][t];return!!r&&n((function(){r.call(null,e||function(){return 1},1)}))}},,,,,,,,,,,,function(t,e,r){"use strict";r.d(e,"a",(function(){return l})),r.d(e,"b",(function(){return h}));var n=r(15),i=r.n(n),o=(r(17),r(19),r(11),r(60),r(4)),a=r(210),s=function(t,e,r,n){var i,o=arguments.length,a=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,r,a):i(e,r))||a);return o>3&&a&&Object.defineProperty(e,r,a),a};const c={},u=new Set;class l{constructor(){this.firstSync=!1,this.syncTabTime=0,this._lockRollback=!1,this.isRollbackFromStorage=!1,this.backupFileKey="",this.backupValueKeys=[],this.rollbackFromStorage=()=>null,this.stopToStorageReaction=()=>{},this.stopAutoBackupReaction=()=>{},this.convertBackupEquals=t=>t}async initSyncStore(t,e,r={},n=20){const s=t.key;if(c[s])throw new Error("storage key 重复");c[s]=this,0!==e.length&&(this.rollbackFromStorage=async()=>{let a=!1;const s=Object.create(null);Object.keys(r).forEach(t=>{i()(e).call(e,t)&&(s[t]=r[t])});try{const{data:r,error:n}=await t.read();if(n)throw n;const o=r?Object.keys(r):[];r&&o.forEach(t=>{i()(e).call(e,t)&&(s[t]=r[t])}),this.firstSync||r&&!e.some(t=>!i()(o).call(o,t))||(a=!0)}catch(t){console.error("storageSync",t)}this.isRollbackFromStorage=!0,this.stopToStorageReaction(),this.stopAutoBackupReaction(),Object(o.i)(()=>{for(const t in s)this[t]=s[t];this.firstSync||(this.firstSync=!0)}),this.restartAutoBackupReaction(),this.stopToStorageReaction=Object(o.h)(()=>{const t={};return e.forEach(e=>{t[e]=Object(o.j)(this[e])}),t},e=>{this.isRollbackFromStorage=!1,t.create(e).then(()=>{Object(o.i)(()=>{this.syncTabTime=Date.now()})})},{equals:o.d.structural,delay:n,fireImmediately:a})},await this.rollbackFromStorage(),Object(o.h)(()=>this.syncTabTime,t=>{t&&a.slave.sendMessage("tabs-sync",s)},{delay:60}))}restartAutoBackupReaction(t=!1){this.stopAutoBackupReaction(),this.stopAutoBackupReaction=Object(o.h)(()=>{const t={};return this.backupValueKeys.forEach(e=>{t[e]=Object(o.j)(this[e])}),t},t=>{(async(t,e)=>{try{const{syncStore:n}=await Promise.all([r.e(6),r.e(7),r.e(30)]).then(r.bind(null,752));n.pushAutoBackupPipe({[t]:e})}catch(t){}})(this.backupFileKey,t).catch()},{fireImmediately:t,equals:(t,e)=>{const r=this.convertBackupEquals(t),n=this.convertBackupEquals(e);return o.d.structural(r,n)},delay:40})}initAutoBackup(t,e){if(u.has(t))throw new Error("file key 重复");u.add(t),0!==e.length&&(this.backupFileKey=t,this.backupValueKeys=[...e])}async getBackupData(){const t={};return this.backupValueKeys.forEach(e=>{t[e]=Object(o.j)(this[e])}),t}}s([o.g],l.prototype,"firstSync",void 0),s([o.g],l.prototype,"syncTabTime",void 0),s([o.b],l.prototype,"initSyncStore",null);const h=t=>{const e=c[t];(null==e?void 0:e._lockRollback)||e.rollbackFromStorage()}},,function(t,e,r){"use strict";r.d(e,"a",(function(){return p}));r(11),r(17),r(19),r(60);var n=r(0),i=r(612),o=r(15),a=r.n(o),s=r(55),c=r.n(s),u=r(3);const l=Object(n.F)()?"pc":"mobile";var h=r(37);const p=new class{constructor(){this.ga=null,this.localKey="analytics-status-time",this.gap=432e5,this.getPermission=async()=>{let t=!0;if(n.n)try{const{privacyStore:e}=await Promise.all([r.e(6),r.e(7),r.e(29)]).then(r.bind(null,759));1!==e.collectData&&(t=!1)}catch(e){t=!1}return t},this.trySendStatus=t=>{const e=localStorage.getItem(this.localKey);e?(Date.now()-Number(e)>this.gap||Number(e)>Date.now())&&this.sendStatus(t):this.sendStatus(t)},this.sendPageView=async t=>{if(!await this.getPermission())return;const e=this.ga.getPageviewUrl(t);h.c.sendLog(e)},this.sendEvent=async(t,e=!1)=>{await this.getPermission()&&Object.keys(t).forEach(r=>{const n=t[r];if("object"==typeof n)Object.keys(n).forEach(t=>{const i=n[t],o=this.ga.getEventUrl({category:r,action:t,label:String(i),nonInteraction:e});h.c.sendLog(o)});else{const t=this.ga.getEventUrl({category:r,action:String(n),nonInteraction:e});h.c.sendLog(t)}})},this.sendBaidu=async t=>{await this.getPermission()&&(async(t="")=>{const e=n.D.runtimePlatform,r=l+"-"+e;if(null==t?void 0:a()(t).call(t,"baidu.com")){const e=new c.a(t).searchParams.get("tn"),i=`https://manage-api.infinitytab.com/analysis-manager/send/60efd763a741942ac60374e1?label=${n.C.baiduLabel}&action=${e}&event=${r}`;n.s?navigator.sendBeacon(i):u.a.post(i,null,{_proxy:!0})}})(t)},this.ga=new i.a({trackingId:n.C.trackingId})}async sendStatus(t){try{this.sendEvent(t,!0),localStorage.setItem(this.localKey,""+Date.now())}catch(t){}}}},,function(t,e,r){var n=r(271),i=Math.floor,o=function(t,e){var r=t.length,c=i(r/2);return r<8?a(t,e):s(t,o(n(t,0,c),e),o(n(t,c),e),e)},a=function(t,e){for(var r,n,i=t.length,o=1;o<i;){for(n=o,r=t[o];n&&e(t[n-1],r)>0;)t[n]=t[--n];n!==o++&&(t[n]=r)}return t},s=function(t,e,r,n){for(var i=e.length,o=r.length,a=0,s=0;a<i||s<o;)t[a+s]=a<i&&s<o?n(e[a],r[s])<=0?e[a++]:r[s++]:a<i?e[a++]:r[s++];return t};t.exports=o},function(t,e,r){var n=r(69),i=r(133),o=r(229),a=r(134),s=TypeError,c=function(t){return function(e,r,c,u){n(r);var l=i(e),h=o(l),p=a(l),d=t?p-1:0,f=t?-1:1;if(c<2)for(;;){if(d in h){u=h[d],d+=f;break}if(d+=f,t?d<0:p<=d)throw s("Reduce of empty array with no initial value")}for(;t?d>=0:p>d;d+=f)d in h&&(u=r(u,h[d],d,l));return u}};t.exports={left:c(!1),right:c(!0)}},function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));const n=t=>{const e=i(t),r=o(t,e);return{searchWidth:e.width,searchHeight:e.height,searchMarginTop:e.marginTop,searchMarginBottom:e.marginBottom,searchRatio:e.searchRatio,iconBoxWidth:r.boxWidth,iconBoxHeight:r.boxHeight,iconOneHeight:r.iconOneHeight,iconWidth:r.width,miniIconPadding:r.miniIconPadding,iconRatio:r.iconRatio,iconsMargin:r.iconsMargin}},i=t=>{const{searchScale:e,innerHeight:r,innerWidth:n,miniMode:i,topBookmark:o,topUseful:a,mainRatio:s}=t;let c=0;a&&(c+=36),o&&(c+=36);const u=r-c,l=n-.2*n;let h=n,p=9*h/16;p>u&&(p=u,h=16*p/9);const d=h*(.575-.1818*Math.max(Math.min(720,h-1200),0)/720),f={width:d*e,height:p*(.0963-.0296*Math.max(Math.min(405,p-675),0)/405)*e};f.width>l&&(f.height=l/f.width*f.height,f.width=l);const g={width:f.width*s,height:f.height*s};let m=null;m=i?-.3:-.06;const y=f.width/d*s,v=Math.floor(m*u*y)+"px",b=Math.floor(.775*g.height)+"px";return{width:Math.floor(g.width)+"px",height:Math.floor(g.height)+"px",searchRatio:Number((g.width/625).toFixed(2)),marginTop:v,marginBottom:b,appContentWidth:l,appContentHeight:u,searcherSizeWithRatio:f}},o=(t,e)=>{const{row:r,col:n,rowGap:i,colGap:o,iconScale:a,innerWidth:s,mainRatio:c,fontSize:u}=t;let l=s;l<1200?l=1200:l>1920&&(l=1920);const{appContentHeight:h,appContentWidth:p,searcherSizeWithRatio:d}=e,f=p,g=.8*h-2.451*d.height,m=1+.5*(1920-l)/720,y=f/n,v=g/r,b=Math.min(Math.min(y,v)*a*m,y,v),w=(g-r*b)/r*i/2,x=n*(b+2*((f-n*b)/n*o/2));let k=Math.min(Math.ceil(x*c),s);let S=r*(b+2*w)*c;const O=b*c,_=1.3*Math.max(u*c,12)+.9*O*.08,A=1.2*(25+_);k<n*A&&(k=n*A),S<r*A&&(S=r*A);let T=.9*O-_-1;T<25&&(T=25);const j=.1*s*c;return{width:Math.floor(T)+"px",miniIconPadding:Math.floor(T/7+4)+"px",boxWidth:Math.ceil(k)+"px",boxHeight:Math.floor(S)+"px",iconOneHeight:Math.floor(S/r)+"px",iconRatio:Number((T/106).toFixed(2)),iconsMargin:Math.floor(j)+"px"}}},,,,,,,,,function(t,e,r){"use strict";r.r(e),r.d(e,"uploadFile",(function(){return u}));var n=r(15),i=r.n(n),o=(r(11),r(0)),a=r(3);const s=["infinity-notes-img","custom-wallpaper-library"],c={},u=async(t,e,r)=>{let n;try{if(c[r]&&c[r].endTime>Date.now())n=c[r];else{let t=null;if(t=i()(s).call(s,r)?await a.a.get(o.y+"/upload/public_private_token",{type:r},{_auth:!0}):await a.a.get(o.y+"/upload/token",{type:r}),0!==t.code||!t.data.token)return{error:t};n=t.data,n.endTime=Date.now()+1e3*(n.expires-600),c[r]=n}const{token:u,prefix:l}=n,h=new FormData;h.append("token",u),h.append("key",l+e),h.append("file",t,e);const{key:p,url:d}=await a.a.post(n.host,h,{timeout:18e4,headers:{"Content-Type":"multipart/form-data"}});return{data:{url:d,key:p}}}catch(t){return{error:t}}}},function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));r(17),r(19);class n{constructor(){this._events=new Map}listenTask(t,e){if("function"!=typeof e)return;this._events.has(t)||this._events.set(t,new Set);this._events.get(t).add(e)}execTask(t,e,...r){if(this._events.has(t)){const n=this._events.get(t);for(const t of n)t(e,...r)}}}},function(t,e,r){var n=r(18),i=r(6),o=r(8),a=r(96),s=r(424),c=r(38),u=r(142).f,l=r(48),h=r(425),p=r(130),d=r(426),f=r(287),g=r(427),m=r(34),y=r(10),v=r(14),b=r(54).enforce,w=r(143),x=r(9),k=r(288),S=r(289),O=x("match"),_=i.RegExp,A=_.prototype,T=i.SyntaxError,j=o(A.exec),C=o("".charAt),E=o("".replace),L=o("".indexOf),R=o("".slice),P=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,M=/a/g,I=/a/g,D=new _(M)!==M,B=f.MISSED_STICKY,U=f.UNSUPPORTED_Y,N=n&&(!D||B||k||S||y((function(){return I[O]=!1,_(M)!=M||_(I)==I||"/a/i"!=_(M,"i")})));if(a("RegExp",N)){for(var z=function(t,e){var r,n,i,o,a,u,f=l(A,this),g=h(t),m=void 0===e,y=[],w=t;if(!f&&g&&m&&t.constructor===z)return t;if((g||l(A,t))&&(t=t.source,m&&(e=d(w))),t=void 0===t?"":p(t),e=void 0===e?"":p(e),w=t,k&&"dotAll"in M&&(n=!!e&&L(e,"s")>-1)&&(e=E(e,/s/g,"")),r=e,B&&"sticky"in M&&(i=!!e&&L(e,"y")>-1)&&U&&(e=E(e,/y/g,"")),S&&(t=(o=function(t){for(var e,r=t.length,n=0,i="",o=[],a={},s=!1,c=!1,u=0,l="";n<=r;n++){if("\\"===(e=C(t,n)))e+=C(t,++n);else if("]"===e)s=!1;else if(!s)switch(!0){case"["===e:s=!0;break;case"("===e:j(P,R(t,n+1))&&(n+=2,c=!0),i+=e,u++;continue;case">"===e&&c:if(""===l||v(a,l))throw new T("Invalid capture group name");a[l]=!0,o[o.length]=[l,u],c=!1,l="";continue}c?l+=e:i+=e}return[i,o]}(t))[0],y=o[1]),a=s(_(t,e),f?this:A,z),(n||i||y.length)&&(u=b(a),n&&(u.dotAll=!0,u.raw=z(function(t){for(var e,r=t.length,n=0,i="",o=!1;n<=r;n++)"\\"!==(e=C(t,n))?o||"."!==e?("["===e?o=!0:"]"===e&&(o=!1),i+=e):i+="[\\s\\S]":i+=e+C(t,++n);return i}(t),r)),i&&(u.sticky=!0),y.length&&(u.groups=y)),t!==w)try{c(a,"source",""===w?"(?:)":w)}catch(t){}return a},W=u(_),q=0;W.length>q;)g(z,_,W[q++]);A.constructor=z,z.prototype=A,m(i,"RegExp",z,{constructor:!0})}w("RegExp")},function(t,e,r){"use strict";var n=r(346).forEach,i=r(350)("forEach");t.exports=i?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},function(t,e,r){var n=r(64),i=r(8),o=r(137),a=r(63),s=r(62),c=r(347),u=i([].push),l=function(t){var e=1==t,r=2==t,i=3==t,l=4==t,h=6==t,p=7==t,d=5==t||h;return function(f,g,m,y){for(var v,b,w=a(f),x=o(w),k=n(g,m),S=s(x),O=0,_=y||c,A=e?_(f,S):r||p?_(f,0):void 0;S>O;O++)if((d||O in x)&&(b=k(v=x[O],O,w),t))if(e)A[O]=b;else if(b)switch(t){case 3:return!0;case 5:return v;case 6:return O;case 2:u(A,v)}else switch(t){case 4:return!1;case 7:u(A,v)}return h?-1:i||l?l:A}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},function(t,e,r){var n=r(348);t.exports=function(t,e){return new(n(t))(0===e?0:e)}},function(t,e,r){var n=r(349),i=r(138),o=r(20),a=r(9)("species"),s=Array;t.exports=function(t){var e;return n(t)&&(e=t.constructor,(i(e)&&(e===s||n(e.prototype))||o(e)&&null===(e=e[a]))&&(e=void 0)),void 0===e?s:e}},function(t,e,r){var n=r(53);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,r){"use strict";var n=r(10);t.exports=function(t,e){var r=[][t];return!!r&&n((function(){r.call(null,e||function(){return 1},1)}))}},function(t,e,r){t.exports=r(352)},function(t,e,r){var n=r(353);r(388),r(389),r(390),r(391),t.exports=n},function(t,e,r){var n=r(354);t.exports=n},function(t,e,r){var n=r(355);r(234),t.exports=n},function(t,e,r){r(249),r(156),r(224),r(369),r(260),r(261),r(386),r(268);var n=r(153);t.exports=n.Promise},function(t,e,r){"use strict";var n=r(30),i=r(71),o=r(215),a=r(217),s=r(359),c=r(204),u=r(90),l=r(104),h=r(363),p=r(364),d=r(148),f=r(365),g=r(33),m=r(366),y=g("toStringTag"),v=Error,b=[].push,w=function(t,e){var r,n=arguments.length>2?arguments[2]:void 0,s=i(x,this);a?r=a(v(),s?o(this):x):(r=s?this:c(x),u(r,y,"Error")),void 0!==e&&u(r,"message",f(e)),m&&u(r,"stack",h(r.stack,1)),p(r,n);var l=[];return d(t,b,{that:l}),u(r,"errors",l),r};a?a(w,v):s(w,v,{name:!0});var x=w.prototype=c(v.prototype,{constructor:l(1,w),message:l(1,""),name:l(1,"AggregateError")});n({global:!0,constructor:!0,arity:2},{AggregateError:w})},function(t,e,r){var n=r(32);t.exports=!n((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},function(t,e,r){var n=r(28),i=String,o=TypeError;t.exports=function(t){if("object"==typeof t||n(t))return t;throw o("Can't set "+i(t)+" as a prototype")}},function(t,e,r){var n=r(46),i=r(360),o=r(225),a=r(91);t.exports=function(t,e,r){for(var s=i(e),c=a.f,u=o.f,l=0;l<s.length;l++){var h=s[l];n(t,h)||r&&n(r,h)||c(t,h,u(e,h))}}},function(t,e,r){var n=r(70),i=r(25),o=r(361),a=r(262),s=r(51),c=i([].concat);t.exports=n("Reflect","ownKeys")||function(t){var e=o.f(s(t)),r=a.f;return r?c(e,r(t)):e}},function(t,e,r){var n=r(250),i=r(219).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,i)}},function(t,e,r){var n=r(59),i=r(283),o=r(91),a=r(51),s=r(152),c=r(263);e.f=n&&!i?Object.defineProperties:function(t,e){a(t);for(var r,n=s(e),i=c(e),u=i.length,l=0;u>l;)o.f(t,r=i[l++],n[r]);return t}},function(t,e,r){var n=r(25),i=Error,o=n("".replace),a=String(i("zxcasd").stack),s=/\n\s*at [^:]*:[^\n]*/,c=s.test(a);t.exports=function(t,e){if(c&&"string"==typeof t&&!i.prepareStackTrace)for(;e--;)t=o(t,s,"");return t}},function(t,e,r){var n=r(61),i=r(90);t.exports=function(t,e){n(e)&&"cause"in e&&i(t,"cause",e.cause)}},function(t,e,r){var n=r(101);t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:n(t)}},function(t,e,r){var n=r(32),i=r(104);t.exports=!n((function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",i(1,7)),7!==t.stack)}))},function(t,e,r){var n=r(27),i=r(28),o=n.WeakMap;t.exports=i(o)&&/native code/.test(String(o))},function(t,e,r){"use strict";var n=r(228),i=r(100);t.exports=n?{}.toString:function(){return"[object "+i(this)+"]"}},function(t,e,r){r(370),r(380),r(382),r(383),r(384),r(385)},function(t,e,r){"use strict";var n,i,o,a=r(30),s=r(68),c=r(131),u=r(27),l=r(36),h=r(87),p=r(217),d=r(150),f=r(371),g=r(69),m=r(28),y=r(61),v=r(221),b=r(236),w=r(255).set,x=r(374),k=r(377),S=r(126),O=r(378),_=r(132),A=r(127),T=r(149),j=r(88),C=T.CONSTRUCTOR,E=T.REJECTION_EVENT,L=T.SUBCLASSING,R=_.getterFor("Promise"),P=_.set,M=A&&A.prototype,I=A,D=M,B=u.TypeError,U=u.document,N=u.process,z=j.f,W=z,q=!!(U&&U.createEvent&&u.dispatchEvent),$=function(t){var e;return!(!y(t)||!m(e=t.then))&&e},H=function(t,e){var r,n,i,o=e.value,a=1==e.state,s=a?t.ok:t.fail,c=t.resolve,u=t.reject,h=t.domain;try{s?(a||(2===e.rejection&&Y(e),e.rejection=1),!0===s?r=o:(h&&h.enter(),r=s(o),h&&(h.exit(),i=!0)),r===t.promise?u(B("Promise-chain cycle")):(n=$(r))?l(n,r,c,u):c(r)):u(o)}catch(t){h&&!i&&h.exit(),u(t)}},V=function(t,e){t.notified||(t.notified=!0,x((function(){for(var r,n=t.reactions;r=n.get();)H(r,t);t.notified=!1,e&&!t.rejection&&G(t)})))},F=function(t,e,r){var n,i;q?((n=U.createEvent("Event")).promise=e,n.reason=r,n.initEvent(t,!1,!0),u.dispatchEvent(n)):n={promise:e,reason:r},!E&&(i=u["on"+t])?i(n):"unhandledrejection"===t&&k("Unhandled promise rejection",r)},G=function(t){l(w,u,(function(){var e,r=t.facade,n=t.value;if(K(t)&&(e=S((function(){c?N.emit("unhandledRejection",n,r):F("unhandledrejection",r,n)})),t.rejection=c||K(t)?2:1,e.error))throw e.value}))},K=function(t){return 1!==t.rejection&&!t.parent},Y=function(t){l(w,u,(function(){var e=t.facade;c?N.emit("rejectionHandled",e):F("rejectionhandled",e,t.value)}))},X=function(t,e,r){return function(n){t(e,n,r)}},J=function(t,e,r){t.done||(t.done=!0,r&&(t=r),t.value=e,t.state=2,V(t,!0))},Z=function(t,e,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===e)throw B("Promise can't be resolved itself");var n=$(e);n?x((function(){var r={done:!1};try{l(n,e,X(Z,r,t),X(J,r,t))}catch(e){J(r,e,t)}})):(t.value=e,t.state=1,V(t,!1))}catch(e){J({done:!1},e,t)}}};if(C&&(D=(I=function(t){v(this,D),g(t),l(n,this);var e=R(this);try{t(X(Z,e),X(J,e))}catch(t){J(e,t)}}).prototype,(n=function(t){P(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new O,rejection:!1,state:0,value:void 0})}).prototype=h(D,"then",(function(t,e){var r=R(this),n=z(b(this,I));return r.parent=!0,n.ok=!m(t)||t,n.fail=m(e)&&e,n.domain=c?N.domain:void 0,0==r.state?r.reactions.add(n):x((function(){H(n,r)})),n.promise})),i=function(){var t=new n,e=R(t);this.promise=t,this.resolve=X(Z,e),this.reject=X(J,e)},j.f=z=function(t){return t===I||void 0===t?new i(t):W(t)},!s&&m(A)&&M!==Object.prototype)){o=M.then,L||h(M,"then",(function(t,e){var r=this;return new I((function(t,e){l(o,r,t,e)})).then(t,e)}),{unsafe:!0});try{delete M.constructor}catch(t){}p&&p(M,D)}a({global:!0,constructor:!0,wrap:!0,forced:C},{Promise:I}),d(I,"Promise",!1,!0),f("Promise")},function(t,e,r){"use strict";var n=r(70),i=r(91),o=r(33),a=r(59),s=o("species");t.exports=function(t){var e=n(t),r=i.f;a&&e&&!e[s]&&r(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,r){var n=r(267),i=r(161),o=TypeError;t.exports=function(t){if(n(t))return t;throw o(i(t)+" is not a constructor")}},function(t,e,r){var n=r(25);t.exports=n([].slice)},function(t,e,r){var n,i,o,a,s,c,u,l,h=r(27),p=r(103),d=r(225).f,f=r(255).set,g=r(256),m=r(375),y=r(376),v=r(131),b=h.MutationObserver||h.WebKitMutationObserver,w=h.document,x=h.process,k=h.Promise,S=d(h,"queueMicrotask"),O=S&&S.value;O||(n=function(){var t,e;for(v&&(t=x.domain)&&t.exit();i;){e=i.fn,i=i.next;try{e()}catch(t){throw i?a():o=void 0,t}}o=void 0,t&&t.enter()},g||v||y||!b||!w?!m&&k&&k.resolve?((u=k.resolve(void 0)).constructor=k,l=p(u.then,u),a=function(){l(n)}):v?a=function(){x.nextTick(n)}:(f=p(f,h),a=function(){f(n)}):(s=!0,c=w.createTextNode(""),new b(n).observe(c,{characterData:!0}),a=function(){c.data=s=!s})),t.exports=O||function(t){var e={fn:t,next:void 0};o&&(o.next=e),i||(i=e,a()),o=e}},function(t,e,r){var n=r(151),i=r(27);t.exports=/ipad|iphone|ipod/i.test(n)&&void 0!==i.Pebble},function(t,e,r){var n=r(151);t.exports=/web0s(?!.*chrome)/i.test(n)},function(t,e,r){var n=r(27);t.exports=function(t,e){var r=n.console;r&&r.error&&(1==arguments.length?r.error(t):r.error(t,e))}},function(t,e){var r=function(){this.head=null,this.tail=null};r.prototype={add:function(t){var e={item:t,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}},t.exports=r},function(t,e,r){var n=r(257),i=r(131);t.exports=!n&&!i&&"object"==typeof window&&"object"==typeof document},function(t,e,r){"use strict";var n=r(30),i=r(36),o=r(69),a=r(88),s=r(126),c=r(148);n({target:"Promise",stat:!0,forced:r(258)},{all:function(t){var e=this,r=a.f(e),n=r.resolve,u=r.reject,l=s((function(){var r=o(e.resolve),a=[],s=0,l=1;c(t,(function(t){var o=s++,c=!1;l++,i(r,e,t).then((function(t){c||(c=!0,a[o]=t,--l||n(a))}),u)})),--l||n(a)}));return l.error&&u(l.value),r.promise}})},function(t,e,r){var n=r(33)("iterator"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[n]=function(){return this},Array.from(a,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var r=!1;try{var o={};o[n]=function(){return{next:function(){return{done:r=!0}}}},t(o)}catch(t){}return r}},function(t,e,r){"use strict";var n=r(30),i=r(68),o=r(149).CONSTRUCTOR,a=r(127),s=r(70),c=r(28),u=r(87),l=a&&a.prototype;if(n({target:"Promise",proto:!0,forced:o,real:!0},{catch:function(t){return this.then(void 0,t)}}),!i&&c(a)){var h=s("Promise").prototype.catch;l.catch!==h&&u(l,"catch",h,{unsafe:!0})}},function(t,e,r){"use strict";var n=r(30),i=r(36),o=r(69),a=r(88),s=r(126),c=r(148);n({target:"Promise",stat:!0,forced:r(258)},{race:function(t){var e=this,r=a.f(e),n=r.reject,u=s((function(){var a=o(e.resolve);c(t,(function(t){i(a,e,t).then(r.resolve,n)}))}));return u.error&&n(u.value),r.promise}})},function(t,e,r){"use strict";var n=r(30),i=r(36),o=r(88);n({target:"Promise",stat:!0,forced:r(149).CONSTRUCTOR},{reject:function(t){var e=o.f(this);return i(e.reject,void 0,t),e.promise}})},function(t,e,r){"use strict";var n=r(30),i=r(70),o=r(68),a=r(127),s=r(149).CONSTRUCTOR,c=r(259),u=i("Promise"),l=o&&!s;n({target:"Promise",stat:!0,forced:o||s},{resolve:function(t){return c(l&&this===u?a:this,t)}})},function(t,e,r){"use strict";var n=r(30),i=r(68),o=r(127),a=r(32),s=r(70),c=r(28),u=r(236),l=r(259),h=r(87),p=o&&o.prototype;if(n({target:"Promise",proto:!0,real:!0,forced:!!o&&a((function(){p.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=u(this,s("Promise")),r=c(t);return this.then(r?function(r){return l(e,t()).then((function(){return r}))}:t,r?function(r){return l(e,t()).then((function(){throw r}))}:t)}}),!i&&c(o)){var d=s("Promise").prototype.finally;p.finally!==d&&h(p,"finally",d,{unsafe:!0})}},function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,e,r){r(249)},function(t,e,r){r(260)},function(t,e,r){"use strict";var n=r(30),i=r(88),o=r(126);n({target:"Promise",stat:!0,forced:!0},{try:function(t){var e=i.f(this),r=o(t);return(r.error?e.reject:e.resolve)(r.value),e.promise}})},function(t,e,r){r(261)},function(t,e,r){r(272)},function(t,e,r){t.exports=r(394)},function(t,e,r){var n=r(395);t.exports=n},function(t,e,r){var n=r(396);t.exports=n},function(t,e,r){r(234);var n=r(100),i=r(46),o=r(71),a=r(397),s=Array.prototype,c={DOMTokenList:!0,NodeList:!0};t.exports=function(t){var e=t.values;return t===s||o(s,t)&&e===s.values||i(c,n(t))?a:e}},function(t,e,r){var n=r(398);t.exports=n},function(t,e,r){r(156),r(224);var n=r(121);t.exports=n("Array").values},function(t,e,r){t.exports=r(400)},function(t,e,r){var n=r(401);t.exports=n},function(t,e,r){var n=r(402);t.exports=n},function(t,e,r){var n=r(403);t.exports=n},function(t,e,r){r(404),r(412),r(392);var n=r(153);t.exports=n.URL},function(t,e,r){r(405)},function(t,e,r){"use strict";r(268);var n,i=r(30),o=r(59),a=r(269),s=r(27),c=r(103),u=r(25),l=r(87),h=r(406),p=r(221),d=r(46),f=r(407),g=r(408),m=r(271),y=r(238).codeAt,v=r(410),b=r(101),w=r(150),x=r(222),k=r(272),S=r(132),O=S.set,_=S.getterFor("URL"),A=k.URLSearchParams,T=k.getState,j=s.URL,C=s.TypeError,E=s.parseInt,L=Math.floor,R=Math.pow,P=u("".charAt),M=u(/./.exec),I=u([].join),D=u(1..toString),B=u([].pop),U=u([].push),N=u("".replace),z=u([].shift),W=u("".split),q=u("".slice),$=u("".toLowerCase),H=u([].unshift),V=/[a-z]/i,F=/[\d+-.a-z]/i,G=/\d/,K=/^0x/i,Y=/^[0-7]+$/,X=/^\d+$/,J=/^[\da-f]+$/i,Z=/[\0\t\n\r #%/:<>?@[\\\]^|]/,Q=/[\0\t\n\r #/:<>?@[\\\]^|]/,tt=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,et=/[\t\n\r]/g,rt=function(t){var e,r,n,i;if("number"==typeof t){for(e=[],r=0;r<4;r++)H(e,t%256),t=L(t/256);return I(e,".")}if("object"==typeof t){for(e="",n=function(t){for(var e=null,r=1,n=null,i=0,o=0;o<8;o++)0!==t[o]?(i>r&&(e=n,r=i),n=null,i=0):(null===n&&(n=o),++i);return i>r&&(e=n,r=i),e}(t),r=0;r<8;r++)i&&0===t[r]||(i&&(i=!1),n===r?(e+=r?":":"::",i=!0):(e+=D(t[r],16),r<7&&(e+=":")));return"["+e+"]"}return t},nt={},it=f({},nt,{" ":1,'"':1,"<":1,">":1,"`":1}),ot=f({},it,{"#":1,"?":1,"{":1,"}":1}),at=f({},ot,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),st=function(t,e){var r=y(t,0);return r>32&&r<127&&!d(e,t)?t:encodeURIComponent(t)},ct={ftp:21,file:null,http:80,https:443,ws:80,wss:443},ut=function(t,e){var r;return 2==t.length&&M(V,P(t,0))&&(":"==(r=P(t,1))||!e&&"|"==r)},lt=function(t){var e;return t.length>1&&ut(q(t,0,2))&&(2==t.length||"/"===(e=P(t,2))||"\\"===e||"?"===e||"#"===e)},ht=function(t){return"."===t||"%2e"===$(t)},pt={},dt={},ft={},gt={},mt={},yt={},vt={},bt={},wt={},xt={},kt={},St={},Ot={},_t={},At={},Tt={},jt={},Ct={},Et={},Lt={},Rt={},Pt=function(t,e,r){var n,i,o,a=b(t);if(e){if(i=this.parse(a))throw C(i);this.searchParams=null}else{if(void 0!==r&&(n=new Pt(r,!0)),i=this.parse(a,null,n))throw C(i);(o=T(new A)).bindURL(this),this.searchParams=o}};Pt.prototype={type:"URL",parse:function(t,e,r){var i,o,a,s,c,u=this,l=e||pt,h=0,p="",f=!1,y=!1,v=!1;for(t=b(t),e||(u.scheme="",u.username="",u.password="",u.host=null,u.port=null,u.path=[],u.query=null,u.fragment=null,u.cannotBeABaseURL=!1,t=N(t,tt,"")),t=N(t,et,""),i=g(t);h<=i.length;){switch(o=i[h],l){case pt:if(!o||!M(V,o)){if(e)return"Invalid scheme";l=ft;continue}p+=$(o),l=dt;break;case dt:if(o&&(M(F,o)||"+"==o||"-"==o||"."==o))p+=$(o);else{if(":"!=o){if(e)return"Invalid scheme";p="",l=ft,h=0;continue}if(e&&(u.isSpecial()!=d(ct,p)||"file"==p&&(u.includesCredentials()||null!==u.port)||"file"==u.scheme&&!u.host))return;if(u.scheme=p,e)return void(u.isSpecial()&&ct[u.scheme]==u.port&&(u.port=null));p="","file"==u.scheme?l=_t:u.isSpecial()&&r&&r.scheme==u.scheme?l=gt:u.isSpecial()?l=bt:"/"==i[h+1]?(l=mt,h++):(u.cannotBeABaseURL=!0,U(u.path,""),l=Et)}break;case ft:if(!r||r.cannotBeABaseURL&&"#"!=o)return"Invalid scheme";if(r.cannotBeABaseURL&&"#"==o){u.scheme=r.scheme,u.path=m(r.path),u.query=r.query,u.fragment="",u.cannotBeABaseURL=!0,l=Rt;break}l="file"==r.scheme?_t:yt;continue;case gt:if("/"!=o||"/"!=i[h+1]){l=yt;continue}l=wt,h++;break;case mt:if("/"==o){l=xt;break}l=Ct;continue;case yt:if(u.scheme=r.scheme,o==n)u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=m(r.path),u.query=r.query;else if("/"==o||"\\"==o&&u.isSpecial())l=vt;else if("?"==o)u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=m(r.path),u.query="",l=Lt;else{if("#"!=o){u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=m(r.path),u.path.length--,l=Ct;continue}u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=m(r.path),u.query=r.query,u.fragment="",l=Rt}break;case vt:if(!u.isSpecial()||"/"!=o&&"\\"!=o){if("/"!=o){u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,l=Ct;continue}l=xt}else l=wt;break;case bt:if(l=wt,"/"!=o||"/"!=P(p,h+1))continue;h++;break;case wt:if("/"!=o&&"\\"!=o){l=xt;continue}break;case xt:if("@"==o){f&&(p="%40"+p),f=!0,a=g(p);for(var w=0;w<a.length;w++){var x=a[w];if(":"!=x||v){var k=st(x,at);v?u.password+=k:u.username+=k}else v=!0}p=""}else if(o==n||"/"==o||"?"==o||"#"==o||"\\"==o&&u.isSpecial()){if(f&&""==p)return"Invalid authority";h-=g(p).length+1,p="",l=kt}else p+=o;break;case kt:case St:if(e&&"file"==u.scheme){l=Tt;continue}if(":"!=o||y){if(o==n||"/"==o||"?"==o||"#"==o||"\\"==o&&u.isSpecial()){if(u.isSpecial()&&""==p)return"Invalid host";if(e&&""==p&&(u.includesCredentials()||null!==u.port))return;if(s=u.parseHost(p))return s;if(p="",l=jt,e)return;continue}"["==o?y=!0:"]"==o&&(y=!1),p+=o}else{if(""==p)return"Invalid host";if(s=u.parseHost(p))return s;if(p="",l=Ot,e==St)return}break;case Ot:if(!M(G,o)){if(o==n||"/"==o||"?"==o||"#"==o||"\\"==o&&u.isSpecial()||e){if(""!=p){var S=E(p,10);if(S>65535)return"Invalid port";u.port=u.isSpecial()&&S===ct[u.scheme]?null:S,p=""}if(e)return;l=jt;continue}return"Invalid port"}p+=o;break;case _t:if(u.scheme="file","/"==o||"\\"==o)l=At;else{if(!r||"file"!=r.scheme){l=Ct;continue}if(o==n)u.host=r.host,u.path=m(r.path),u.query=r.query;else if("?"==o)u.host=r.host,u.path=m(r.path),u.query="",l=Lt;else{if("#"!=o){lt(I(m(i,h),""))||(u.host=r.host,u.path=m(r.path),u.shortenPath()),l=Ct;continue}u.host=r.host,u.path=m(r.path),u.query=r.query,u.fragment="",l=Rt}}break;case At:if("/"==o||"\\"==o){l=Tt;break}r&&"file"==r.scheme&&!lt(I(m(i,h),""))&&(ut(r.path[0],!0)?U(u.path,r.path[0]):u.host=r.host),l=Ct;continue;case Tt:if(o==n||"/"==o||"\\"==o||"?"==o||"#"==o){if(!e&&ut(p))l=Ct;else if(""==p){if(u.host="",e)return;l=jt}else{if(s=u.parseHost(p))return s;if("localhost"==u.host&&(u.host=""),e)return;p="",l=jt}continue}p+=o;break;case jt:if(u.isSpecial()){if(l=Ct,"/"!=o&&"\\"!=o)continue}else if(e||"?"!=o)if(e||"#"!=o){if(o!=n&&(l=Ct,"/"!=o))continue}else u.fragment="",l=Rt;else u.query="",l=Lt;break;case Ct:if(o==n||"/"==o||"\\"==o&&u.isSpecial()||!e&&("?"==o||"#"==o)){if(".."===(c=$(c=p))||"%2e."===c||".%2e"===c||"%2e%2e"===c?(u.shortenPath(),"/"==o||"\\"==o&&u.isSpecial()||U(u.path,"")):ht(p)?"/"==o||"\\"==o&&u.isSpecial()||U(u.path,""):("file"==u.scheme&&!u.path.length&&ut(p)&&(u.host&&(u.host=""),p=P(p,0)+":"),U(u.path,p)),p="","file"==u.scheme&&(o==n||"?"==o||"#"==o))for(;u.path.length>1&&""===u.path[0];)z(u.path);"?"==o?(u.query="",l=Lt):"#"==o&&(u.fragment="",l=Rt)}else p+=st(o,ot);break;case Et:"?"==o?(u.query="",l=Lt):"#"==o?(u.fragment="",l=Rt):o!=n&&(u.path[0]+=st(o,nt));break;case Lt:e||"#"!=o?o!=n&&("'"==o&&u.isSpecial()?u.query+="%27":u.query+="#"==o?"%23":st(o,nt)):(u.fragment="",l=Rt);break;case Rt:o!=n&&(u.fragment+=st(o,it))}h++}},parseHost:function(t){var e,r,n;if("["==P(t,0)){if("]"!=P(t,t.length-1))return"Invalid host";if(!(e=function(t){var e,r,n,i,o,a,s,c=[0,0,0,0,0,0,0,0],u=0,l=null,h=0,p=function(){return P(t,h)};if(":"==p()){if(":"!=P(t,1))return;h+=2,l=++u}for(;p();){if(8==u)return;if(":"!=p()){for(e=r=0;r<4&&M(J,p());)e=16*e+E(p(),16),h++,r++;if("."==p()){if(0==r)return;if(h-=r,u>6)return;for(n=0;p();){if(i=null,n>0){if(!("."==p()&&n<4))return;h++}if(!M(G,p()))return;for(;M(G,p());){if(o=E(p(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;h++}c[u]=256*c[u]+i,2!=++n&&4!=n||u++}if(4!=n)return;break}if(":"==p()){if(h++,!p())return}else if(p())return;c[u++]=e}else{if(null!==l)return;h++,l=++u}}if(null!==l)for(a=u-l,u=7;0!=u&&a>0;)s=c[u],c[u--]=c[l+a-1],c[l+--a]=s;else if(8!=u)return;return c}(q(t,1,-1))))return"Invalid host";this.host=e}else if(this.isSpecial()){if(t=v(t),M(Z,t))return"Invalid host";if(null===(e=function(t){var e,r,n,i,o,a,s,c=W(t,".");if(c.length&&""==c[c.length-1]&&c.length--,(e=c.length)>4)return t;for(r=[],n=0;n<e;n++){if(""==(i=c[n]))return t;if(o=10,i.length>1&&"0"==P(i,0)&&(o=M(K,i)?16:8,i=q(i,8==o?1:2)),""===i)a=0;else{if(!M(10==o?X:8==o?Y:J,i))return t;a=E(i,o)}U(r,a)}for(n=0;n<e;n++)if(a=r[n],n==e-1){if(a>=R(256,5-e))return null}else if(a>255)return null;for(s=B(r),n=0;n<r.length;n++)s+=r[n]*R(256,3-n);return s}(t)))return"Invalid host";this.host=e}else{if(M(Q,t))return"Invalid host";for(e="",r=g(t),n=0;n<r.length;n++)e+=st(r[n],nt);this.host=e}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return d(ct,this.scheme)},shortenPath:function(){var t=this.path,e=t.length;!e||"file"==this.scheme&&1==e&&ut(t[0],!0)||t.length--},serialize:function(){var t=this,e=t.scheme,r=t.username,n=t.password,i=t.host,o=t.port,a=t.path,s=t.query,c=t.fragment,u=e+":";return null!==i?(u+="//",t.includesCredentials()&&(u+=r+(n?":"+n:"")+"@"),u+=rt(i),null!==o&&(u+=":"+o)):"file"==e&&(u+="//"),u+=t.cannotBeABaseURL?a[0]:a.length?"/"+I(a,"/"):"",null!==s&&(u+="?"+s),null!==c&&(u+="#"+c),u},setHref:function(t){var e=this.parse(t);if(e)throw C(e);this.searchParams.update()},getOrigin:function(){var t=this.scheme,e=this.port;if("blob"==t)try{return new Mt(t.path[0]).origin}catch(t){return"null"}return"file"!=t&&this.isSpecial()?t+"://"+rt(this.host)+(null!==e?":"+e:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(t){this.parse(b(t)+":",pt)},getUsername:function(){return this.username},setUsername:function(t){var e=g(b(t));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<e.length;r++)this.username+=st(e[r],at)}},getPassword:function(){return this.password},setPassword:function(t){var e=g(b(t));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<e.length;r++)this.password+=st(e[r],at)}},getHost:function(){var t=this.host,e=this.port;return null===t?"":null===e?rt(t):rt(t)+":"+e},setHost:function(t){this.cannotBeABaseURL||this.parse(t,kt)},getHostname:function(){var t=this.host;return null===t?"":rt(t)},setHostname:function(t){this.cannotBeABaseURL||this.parse(t,St)},getPort:function(){var t=this.port;return null===t?"":b(t)},setPort:function(t){this.cannotHaveUsernamePasswordPort()||(""==(t=b(t))?this.port=null:this.parse(t,Ot))},getPathname:function(){var t=this.path;return this.cannotBeABaseURL?t[0]:t.length?"/"+I(t,"/"):""},setPathname:function(t){this.cannotBeABaseURL||(this.path=[],this.parse(t,jt))},getSearch:function(){var t=this.query;return t?"?"+t:""},setSearch:function(t){""==(t=b(t))?this.query=null:("?"==P(t,0)&&(t=q(t,1)),this.query="",this.parse(t,Lt)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var t=this.fragment;return t?"#"+t:""},setHash:function(t){""!=(t=b(t))?("#"==P(t,0)&&(t=q(t,1)),this.fragment="",this.parse(t,Rt)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Mt=function(t){var e=p(this,It),r=x(arguments.length,1)>1?arguments[1]:void 0,n=O(e,new Pt(t,!1,r));o||(e.href=n.serialize(),e.origin=n.getOrigin(),e.protocol=n.getProtocol(),e.username=n.getUsername(),e.password=n.getPassword(),e.host=n.getHost(),e.hostname=n.getHostname(),e.port=n.getPort(),e.pathname=n.getPathname(),e.search=n.getSearch(),e.searchParams=n.getSearchParams(),e.hash=n.getHash())},It=Mt.prototype,Dt=function(t,e){return{get:function(){return _(this)[t]()},set:e&&function(t){return _(this)[e](t)},configurable:!0,enumerable:!0}};if(o&&(h(It,"href",Dt("serialize","setHref")),h(It,"origin",Dt("getOrigin")),h(It,"protocol",Dt("getProtocol","setProtocol")),h(It,"username",Dt("getUsername","setUsername")),h(It,"password",Dt("getPassword","setPassword")),h(It,"host",Dt("getHost","setHost")),h(It,"hostname",Dt("getHostname","setHostname")),h(It,"port",Dt("getPort","setPort")),h(It,"pathname",Dt("getPathname","setPathname")),h(It,"search",Dt("getSearch","setSearch")),h(It,"searchParams",Dt("getSearchParams")),h(It,"hash",Dt("getHash","setHash"))),l(It,"toJSON",(function(){return _(this).serialize()}),{enumerable:!0}),l(It,"toString",(function(){return _(this).serialize()}),{enumerable:!0}),j){var Bt=j.createObjectURL,Ut=j.revokeObjectURL;Bt&&l(Mt,"createObjectURL",c(Bt,j)),Ut&&l(Mt,"revokeObjectURL",c(Ut,j))}w(Mt,"URL"),i({global:!0,constructor:!0,forced:!a,sham:!o},{URL:Mt})},function(t,e,r){var n=r(91);t.exports=function(t,e,r){return n.f(t,e,r)}},function(t,e,r){"use strict";var n=r(59),i=r(25),o=r(36),a=r(32),s=r(263),c=r(262),u=r(290),l=r(133),h=r(229),p=Object.assign,d=Object.defineProperty,f=i([].concat);t.exports=!p||a((function(){if(n&&1!==p({b:1},p(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},r=Symbol();return t[r]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=p({},t)[r]||"abcdefghijklmnopqrst"!=s(p({},e)).join("")}))?function(t,e){for(var r=l(t),i=arguments.length,a=1,p=c.f,d=u.f;i>a;)for(var g,m=h(arguments[a++]),y=p?f(s(m),p(m)):s(m),v=y.length,b=0;v>b;)g=y[b++],n&&!o(d,m,g)||(r[g]=m[g]);return r}:p},function(t,e,r){"use strict";var n=r(103),i=r(36),o=r(133),a=r(409),s=r(264),c=r(267),u=r(134),l=r(270),h=r(220),p=r(205),d=Array;t.exports=function(t){var e=o(t),r=c(this),f=arguments.length,g=f>1?arguments[1]:void 0,m=void 0!==g;m&&(g=n(g,f>2?arguments[2]:void 0));var y,v,b,w,x,k,S=p(e),O=0;if(!S||this===d&&s(S))for(y=u(e),v=r?new this(y):d(y);y>O;O++)k=m?g(e[O],O):e[O],l(v,O,k);else for(x=(w=h(e,S)).next,v=r?new this:[];!(b=i(x,w)).done;O++)k=m?a(w,g,[b.value,O],!0):b.value,l(v,O,k);return v.length=O,v}},function(t,e,r){var n=r(51),i=r(265);t.exports=function(t,e,r,o){try{return o?e(n(r)[0],r[1]):e(r)}catch(e){i(t,"throw",e)}}},function(t,e,r){"use strict";var n=r(25),i=/[^\0-\u007E]/,o=/[.\u3002\uFF0E\uFF61]/g,a="Overflow: input needs wider integers to process",s=RangeError,c=n(o.exec),u=Math.floor,l=String.fromCharCode,h=n("".charCodeAt),p=n([].join),d=n([].push),f=n("".replace),g=n("".split),m=n("".toLowerCase),y=function(t){return t+22+75*(t<26)},v=function(t,e,r){var n=0;for(t=r?u(t/700):t>>1,t+=u(t/e);t>455;)t=u(t/35),n+=36;return u(n+36*t/(t+38))},b=function(t){var e,r,n=[],i=(t=function(t){for(var e=[],r=0,n=t.length;r<n;){var i=h(t,r++);if(i>=55296&&i<=56319&&r<n){var o=h(t,r++);56320==(64512&o)?d(e,((1023&i)<<10)+(1023&o)+65536):(d(e,i),r--)}else d(e,i)}return e}(t)).length,o=128,c=0,f=72;for(e=0;e<t.length;e++)(r=t[e])<128&&d(n,l(r));var g=n.length,m=g;for(g&&d(n,"-");m<i;){var b=2147483647;for(e=0;e<t.length;e++)(r=t[e])>=o&&r<b&&(b=r);var w=m+1;if(b-o>u((2147483647-c)/w))throw s(a);for(c+=(b-o)*w,o=b,e=0;e<t.length;e++){if((r=t[e])<o&&++c>2147483647)throw s(a);if(r==o){for(var x=c,k=36;;){var S=k<=f?1:k>=f+26?26:k-f;if(x<S)break;var O=x-S,_=36-S;d(n,l(y(S+O%_))),x=u(O/_),k+=36}d(n,l(y(x))),f=v(c,w,m==g),c=0,m++}}c++,o++}return p(n,"")};t.exports=function(t){var e,r,n=[],a=g(f(m(t),o,"."),".");for(e=0;e<a.length;e++)r=a[e],d(n,c(i,r)?"xn--"+b(r):r);return p(n,".")}},function(t,e,r){var n=r(87);t.exports=function(t,e,r){for(var i in e)r&&r.unsafe&&t[i]?t[i]=e[i]:n(t,i,e[i],r);return t}},function(t,e){},function(t,e){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},function(t,e,r){"use strict";var n=r(63),i=r(124),o=r(62);t.exports=function(t){for(var e=n(this),r=o(e),a=arguments.length,s=i(a>1?arguments[1]:void 0,r),c=a>2?arguments[2]:void 0,u=void 0===c?r:i(c,r);u>s;)e[s++]=t;return e}},function(t,e,r){var n=r(141),i=TypeError;t.exports=function(t){var e=n(t,"number");if("number"==typeof e)throw i("Can't convert number to bigint");return BigInt(e)}},function(t,e,r){var n=r(417),i=RangeError;t.exports=function(t,e){var r=n(t);if(r%e)throw i("Wrong offset");return r}},function(t,e,r){var n=r(74),i=RangeError;t.exports=function(t){var e=n(t);if(e<0)throw i("The argument can't be less than 0");return e}},function(t,e,r){var n=r(419),i=Math.floor,o=function(t,e){var r=t.length,c=i(r/2);return r<8?a(t,e):s(t,o(n(t,0,c),e),o(n(t,c),e),e)},a=function(t,e){for(var r,n,i=t.length,o=1;o<i;){for(n=o,r=t[o];n&&e(t[n-1],r)>0;)t[n]=t[--n];n!==o++&&(t[n]=r)}return t},s=function(t,e,r,n){for(var i=e.length,o=r.length,a=0,s=0;a<i||s<o;)t[a+s]=a<i&&s<o?n(e[a],r[s])<=0?e[a++]:r[s++]:a<i?e[a++]:r[s++];return t};t.exports=o},function(t,e,r){var n=r(124),i=r(62),o=r(420),a=Array,s=Math.max;t.exports=function(t,e,r){for(var c=i(t),u=n(e,c),l=n(void 0===r?c:r,c),h=a(s(l-u,0)),p=0;u<l;u++,p++)o(h,p,t[u]);return h.length=p,h}},function(t,e,r){"use strict";var n=r(92),i=r(21),o=r(65);t.exports=function(t,e,r){var a=n(e);a in t?i.f(t,a,o(0,r)):t[a]=r}},function(t,e,r){var n=r(39).match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},function(t,e,r){var n=r(39);t.exports=/MSIE|Trident/.test(n)},function(t,e,r){var n=r(39).match(/AppleWebKit\/(\d+)\./);t.exports=!!n&&+n[1]},function(t,e,r){var n=r(5),i=r(20),o=r(86);t.exports=function(t,e,r){var a,s;return o&&n(a=e.constructor)&&a!==r&&i(s=a.prototype)&&s!==r.prototype&&o(t,s),t}},function(t,e,r){var n=r(20),i=r(53),o=r(9)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},function(t,e,r){var n=r(13),i=r(14),o=r(48),a=r(286),s=RegExp.prototype;t.exports=function(t){var e=t.flags;return void 0!==e||"flags"in s||i(t,"flags")||!o(s,t)?e:n(a,t)}},function(t,e,r){var n=r(21).f;t.exports=function(t,e,r){r in t||n(t,r,{configurable:!0,get:function(){return e[r]},set:function(t){e[r]=t}})}},function(t,e,r){r(429);var n=r(22),i=r(276);n({target:"String",proto:!0,name:"trimStart",forced:"".trimStart!==i},{trimStart:i})},function(t,e,r){var n=r(22),i=r(276);n({target:"String",proto:!0,name:"trimStart",forced:"".trimLeft!==i},{trimLeft:i})},function(t,e,r){var n=r(8),i=r(73),o=r(130),a=r(277),s=n("".replace),c="["+a+"]",u=RegExp("^"+c+c+"*"),l=RegExp(c+c+"*$"),h=function(t){return function(e){var r=o(i(e));return 1&t&&(r=s(r,u,"")),2&t&&(r=s(r,l,"")),r}};t.exports={start:h(1),end:h(2),trim:h(3)}},function(t,e,r){var n=r(95).PROPER,i=r(10),o=r(277);t.exports=function(t){return i((function(){return!!o[t]()||"​᠎"!=="​᠎"[t]()||n&&o[t].name!==t}))}},function(t,e,r){t.exports=r(433)},function(t,e,r){var n=r(434);t.exports=n},function(t,e,r){var n=r(435);t.exports=n},function(t,e,r){var n=r(436);t.exports=n},function(t,e,r){var n=r(71),i=r(437),o=Array.prototype;t.exports=function(t){var e=t.reduce;return t===o||n(o,t)&&e===o.reduce?i:e}},function(t,e,r){r(438);var n=r(121);t.exports=n("Array").reduce},function(t,e,r){"use strict";var n=r(30),i=r(332).left,o=r(315),a=r(211),s=r(131);n({target:"Array",proto:!0,forced:!o("reduce")||!s&&a>79&&a<83},{reduce:function(t){var e=arguments.length;return i(this,t,e,e>1?arguments[1]:void 0)}})},function(t,e,r){t.exports=r(440)},function(t,e,r){var n=r(441);t.exports=n},function(t,e,r){var n=r(442);t.exports=n},function(t,e,r){var n=r(443);t.exports=n},function(t,e,r){var n=r(71),i=r(444),o=String.prototype;t.exports=function(t){var e=t.trim;return"string"==typeof t||t===o||n(o,t)&&e===o.trim?i:e}},function(t,e,r){r(445);var n=r(121);t.exports=n("String").trim},function(t,e,r){"use strict";var n=r(30),i=r(446).trim;n({target:"String",proto:!0,forced:r(447)("trim")},{trim:function(){return i(this)}})},function(t,e,r){var n=r(25),i=r(136),o=r(101),a=r(278),s=n("".replace),c="["+a+"]",u=RegExp("^"+c+c+"*"),l=RegExp(c+c+"*$"),h=function(t){return function(e){var r=o(i(e));return 1&t&&(r=s(r,u,"")),2&t&&(r=s(r,l,"")),r}};t.exports={start:h(1),end:h(2),trim:h(3)}},function(t,e,r){var n=r(266).PROPER,i=r(32),o=r(278);t.exports=function(t){return i((function(){return!!o[t]()||"​᠎"!=="​᠎"[t]()||n&&o[t].name!==t}))}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){"use strict";r.d(e,"a",(function(){return g}));var n=r(123),i=r.n(n),o=(r(17),r(19),r(11),r(4)),a=r(521),s=r.n(a),c=r(327),u=r(26),l=r(12),h=r(210),p=function(t,e,r,n){var i,o=arguments.length,a=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,r,a):i(e,r))||a);return o>3&&a&&Object.defineProperty(e,r,a),a};const d=[{text:i18n("todo_welcome"),todoId:"todo-id1dtkk87it2iepal6dv4hr2uig0c",time:Date.now(),updatetime:0,done:!1}];class f extends c.a{constructor(){super(...arguments),this.todoList=d,this.currenetState="done",this.listLength=localStorage.getItem("todo-length")||0}toggleState(t){this.currenetState=t}get needNotificationPermission(){return this.todoList.some(t=>!!t.dueDate)}diffRemote(t){const e=t=>{if(null==t?void 0:t.updatetime){const e={updatetime:void 0};return t.done=!!t.done,Object.assign(Object.assign({},t),e)}},r=s()(t.todoList||[],e),n=s()(Object(o.j)(this.todoList),e);return!o.d.structural(r,n)}mergeRemote(t,e){if(t.todoList)if(e)this.todoList=t.todoList;else{const e=this.todoList,r=t.todoList,{result:n}=u.a.mergeArray(e,r,"todoId");this.todoList=n}}edit(t){this.todoList=this.todoList.map(e=>e.todoId===t?Object.assign(Object.assign({},e),{edit:!e.edit}):e)}get hasDoneTodo(){return this.todoList.filter(t=>t.done).length}async addTodo(t){if(!i()(t).call(t).length)return;const e={done:!1,time:+new Date,todoId:u.a.randomId("todo-"),updatetime:await u.a.getTimestamp(),text:t};Object(o.i)(()=>{this.todoList=[e,...this.todoList]})}removeTodo(){this.todoList=this.todoList.filter(t=>!t.done)}deleteTodo(t){this.todoList=this.todoList.filter(e=>e.todoId!==t)}async toggleTodo(t){const e=await u.a.getTimestamp();Object(o.i)(()=>{this.todoList=this.todoList.map(r=>r.todoId===t?Object.assign(Object.assign({},r),{done:!r.done,updatetime:e}):Object.assign({},r))})}async updateTodo(t,e){const r=await u.a.getTimestamp();Object(o.i)(()=>{this.todoList=this.todoList.map(n=>n.todoId===t?Object.assign(Object.assign(Object.assign({},n),e),{updatetime:r,edit:!1}):Object.assign({},n))})}removeTime(t){this.todoList=this.todoList.map(e=>e.todoId===t?Object.assign(Object.assign({},e),{dueDate:"",dueTime:"",dueTimestamp:null}):e)}}p([o.g],f.prototype,"todoList",void 0),p([o.g],f.prototype,"currenetState",void 0),p([o.b],f.prototype,"toggleState",null),p([o.e],f.prototype,"needNotificationPermission",null),p([o.b],f.prototype,"mergeRemote",null),p([o.b],f.prototype,"edit",null),p([o.g],f.prototype,"listLength",void 0),p([o.e],f.prototype,"hasDoneTodo",null),p([o.b],f.prototype,"addTodo",null),p([o.b],f.prototype,"removeTodo",null),p([o.b],f.prototype,"deleteTodo",null),p([o.b],f.prototype,"toggleTodo",null),p([o.b],f.prototype,"updateTodo",null),p([o.b],f.prototype,"removeTime",null);const g=new f;g.initSyncStore(l.j,["todoList","listLength"],{}),g.initAutoBackup("todo",["todoList"]),Object(o.c)(()=>{if(g.firstSync){const t=g.todoList.filter(t=>!t.done).length;Object(o.i)(()=>{g.listLength=t}),localStorage.setItem("todo-length",t+"")}});let m=!1;Object(o.c)(()=>{if(g.firstSync){const t=g.todoList.filter(t=>!t.done&&t.dueTimestamp>Date.now()).map(t=>Object(o.j)(t));if(!m)return void(m=!0);h.slave.postTask("slave:change-todo",t)}}),Object(o.c)(()=>{let t=!1;const{todoList:e}=g;for(let r=0;r<e.length-1;r++){const{done:n}=e[r],i=e[r+1].done;if(n&&!i){t=!0;break}}t&&(Object(o.i)(()=>{const t=e.filter(t=>t.done),r=e.filter(t=>!t.done);g.todoList=[...r,...t]}),t=!1)},{delay:300})},,,,,,,,,,,,function(t,e,r){"use strict";r.r(e);var n=r(7),i=r.n(n),o=(r(17),r(19),r(248)),a=r(603),s=r(1),c=r(4),u=s.b`.i-bubble {
  position: fixed;
  top: 80px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 99999999;
}
.i-bubble.network-error .i-bubble-wrap,
.i-bubble.error .i-bubble-wrap,
.i-bubble.success .i-bubble-wrap {
  padding-left: 30px;
  padding-right: 32px;
}
.i-bubble + .i-bubble-mask {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(255, 255, 255, 0.7);
  z-index: 999999;
  display: none;
  opacity: 0;
  transition: opacity 150ms ease-in 0s;
}
.i-bubble.loading + .i-bubble-mask {
  display: block;
}
.i-bubble.loading.popup + .i-bubble-mask {
  opacity: 1;
}
.i-bubble .i-bubble-wrap {
  margin: 0 auto;
  box-sizing: border-box;
  padding: 12px 20px;
  background-color: #333;
  box-shadow: 0px 2px 20px 0px rgba(0, 0, 0, 0.1);
  border-radius: 4px;
  display: flex;
  flex-flow: row nowrap;
  align-items: center;
  font-size: 14px;
  line-height: 1.4em;
  transition: opacity 0.15s cubic-bezier(0, 0, 0.2, 1) 0ms, transform 0.15s cubic-bezier(0, 0, 0.2, 1) 0ms;
  transform: scale(0.8);
  opacity: 0;
  box-shadow: 0 3px 5px -1px rgba(0, 0, 0, 0.2), 0 6px 10px 0 rgba(0, 0, 0, 0.14), 0 1px 18px 0 rgba(0, 0, 0, 0.12);
  max-width: 600px;
}
.i-bubble.popup .i-bubble-wrap {
  transform: scale(1);
  opacity: 1;
}
@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}
.i-bubble .icon {
  width: 18px;
  height: 18px;
  flex-shrink: 0;
  margin-right: 12px;
  display: none;
}
.i-bubble .icon.icon-loading {
  animation: spin 700ms linear infinite;
}
.i-bubble .i-bubble-text {
  color: #e4e4e4;
  display: block;
  box-sizing: border-box;
  flex-grow: 1;
  width: 100%;
  word-break: break-all;
}
.i-bubble .i-bubble-button {
  width: 70px;
  height: 28px;
  color: #4caf50;
  background-color: initial;
  border: none;
  padding: 0;
  cursor: pointer;
  transition: color, background-color 200ms;
  border-radius: 4px;
  outline: none;
  max-width: 180px;
  margin-left: 46px;
  flex-shrink: 0;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}
.i-bubble .i-bubble-button:hover {
  background-color: rgba(76, 175, 80, 0.14);
}
`,l=r(26),h=r(45),p=function(t,e,r,n){var i,o=arguments.length,a=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,r,a):i(e,r))||a);return o>3&&a&&Object.defineProperty(e,r,a),a};const d=Object(h.a)("network-error.png",!1),f=Object(h.a)("error.png",!1),g=Object(h.a)("success.png",!1),m=Object(h.a)("loading.png",!1);class y extends o.a{constructor(){super(...arguments),this.popup=!1,this.showButton=!1}static _timeToHideHandler(t){if(t.showButton){const e=t.shadowRoot.querySelector(".i-bubble .i-bubble-button");e.onclick&&(e.onclick=null)}const e=t.shadowRoot.querySelector(".i-bubble > .i-bubble-wrap");let r=!1;const n=()=>{t.onmouseenter=null,t.onmouseleave=null,document.body.contains(t)&&document.body.removeChild(t),r=!0};e.addEventListener("transitionend",n,{once:!0}),e.addEventListener("transitioncancel",n,{once:!0}),setTimeout(()=>{r||n()},150),t.setPopup(!1)}static _setTimerToHide(t,e){this._clearTimerToHide(t),t.hideTimer=setTimeout(()=>this._timeToHideHandler(t),e)}static _clearTimerToHide(t){t.hideTimer&&(clearTimeout(t.hideTimer),t.hideTimer=null)}static _messageMisc(t,e,r){this.setText(t),document.body.appendChild(this),window.customElements.whenDefined("i-bubble").then(()=>(this.offsetWidth,this.setPopup(!0),new i.a(t=>requestAnimationFrame(t)))).then(()=>{r&&r(this)}),e>0&&y._setTimerToHide(this,e)}static message(t,e){const r=document.createElement("i-bubble");r.setType("message"),e=null!=e?e:this.duration,this._messageMisc.call(r,t,e)}static networkError(t,e){const r=document.createElement("i-bubble");r.setType("network-error"),e=null!=e?e:this.duration,this._messageMisc.call(r,t,e)}static success(t,e){const r=document.createElement("i-bubble");r.setType("success"),e=null!=e?e:this.duration,this._messageMisc.call(r,t,e)}static error(t,e){const r=document.createElement("i-bubble");r.setType("error"),e=null!=e?e:this.duration,this._messageMisc.call(r,t,e)}static popupLogin(t){const e=this.popup(i18n("reqeust_login_message"),{showButton:!0,btnValue:i18n("to_login"),type:"message",onBtnClick:null!=t?t:()=>{a.userStore.openModal()}}),r=Date.now();let n=this.duration2;e.onmouseenter=()=>{n=Date.now()-r,y._clearTimerToHide(e)},e.onmouseleave=()=>{y._setTimerToHide(e,n)}}static popupLoading(t){const e=this.popup(i18n("wallpaper_loading"),{duration:0,showButton:!0,btnValue:i18n("cancel"),type:"loading",onBtnClick:t});return()=>setTimeout(()=>this._timeToHideHandler(e),y.waitForReady)}static loading(t){const e=this.popup(t,{type:"loading",duration:0});return()=>setTimeout(()=>this._timeToHideHandler(e),y.waitForReady)}static popup(t,e){const{duration:r=this.duration2,btnValue:n,onBtnClick:i,type:o,showButton:a}=e,s=document.createElement("i-bubble");return s.setType(o),n&&s.setBtnValue(n),a&&s.setShowButton(a),this._messageMisc.call(s,t,r,()=>{if(s.showButton){s.shadowRoot.querySelector(".i-bubble .i-bubble-button").onclick=t=>{i&&i(t),this._timeToHideHandler(s)}}}),s}firstUpdated(){const t="\n      background-size: cover;\n      background-repeat: no-repeat;\n      background-position: center;\n      display: block;\n    ",e=document.createElement("style");e.appendChild(document.createTextNode(`\n      .i-bubble .icon.icon-network-error{\n        background-image: url(${d});${t}\n      }\n      .i-bubble .icon.icon-success{\n        background-image: url(${g});${t}\n      }\n      .i-bubble .icon.icon-error{\n        background-image: url(${f});${t}\n      }\n      .i-bubble .icon.icon-loading{\n        background-image: url(${m});${t}\n      }\n      `)),this.shadowRoot.appendChild(e)}render(){return s.e`
      <section class="i-bubble ${this.type}${this.popup?" popup":""}">
        <section class="i-bubble-wrap">
          <i class="icon icon-${this.type}"></i>
          <span class="i-bubble-text">${this.text}</span>
          <input
            class="i-bubble-button"
            type="button"
            .value=${this.btnValue}
            style="${this.showButton?"":"display: none;"}"
          />
        </section>
      </section>
      <section class="i-bubble-mask" @click=${l.a.stopBubble}></section>
    `}setType(t){this.type=t}setText(t){this.text=t}setBtnValue(t){this.btnValue=t}setPopup(t){this.popup=t}setShowButton(t){this.showButton=t}}y.duration=3e3,y.duration2=5e3,y.waitForReady=1e3/60,y.styles=u,p([c.g],y.prototype,"type",void 0),p([c.g],y.prototype,"text",void 0),p([c.g],y.prototype,"btnValue",void 0),p([c.g],y.prototype,"popup",void 0),p([c.g],y.prototype,"showButton",void 0),p([c.b],y.prototype,"setType",null),p([c.b],y.prototype,"setText",null),p([c.b],y.prototype,"setBtnValue",null),p([c.b],y.prototype,"setPopup",null),p([c.b],y.prototype,"setShowButton",null),window.customElements.define("i-bubble",y);e.default=y},function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return s}));r(17),r(19);var n=r(15),i=r.n(n);class o{constructor(){this._caches={},this._setCaches=t=>(...e)=>{this._caches[t]=e}}}const a=[],s=t=>new Proxy(t,{set:(t,e,r)=>null===r?(t[e]=r,!0):"function"==typeof t[e]?(console.warn("失败：重复注册"),!0):(t[e]=r,i()(a).call(a,e)&&delete t._caches[e],t._caches.hasOwnProperty(e)&&(t[e](...t._caches[e]),delete t._caches[e]),!0),get:(t,e)=>"function"==typeof t[e]?t[e]:t._setCaches(e)})},function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var n=r(7),i=r.n(n),o=(r(11),r(0)),a=r(102);async function s(){if(o.s||o.r){if("granted"!==await new i.a(t=>{!function(){try{Notification.requestPermission().then()}catch(t){return!1}return!0}()?Notification.requestPermission(t):Notification.requestPermission().then(t)}))throw new Error}else await a.a.request(["notifications"])}},,,function(t,e,r){"use strict";r.d(e,"a",(function(){return u}));r(17),r(19),r(31),r(89);var n=r(1),i=r(613),o=r.n(i),a=(r(644),r(642),n.b`/*!
 * Cropper.js v1.5.12
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2021-06-12T08:00:11.623Z
 */
.cropper-container {
  direction: ltr;
  font-size: 0;
  line-height: 0;
  position: relative;
  -ms-touch-action: none;
  touch-action: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
.cropper-container img {
  display: block;
  height: 100%;
  image-orientation: 0deg;
  max-height: none !important;
  max-width: none !important;
  min-height: 0 !important;
  min-width: 0 !important;
  width: 100%;
}
.cropper-wrap-box,
.cropper-canvas,
.cropper-drag-box,
.cropper-crop-box,
.cropper-modal {
  bottom: 0;
  left: 0;
  position: absolute;
  right: 0;
  top: 0;
}
.cropper-wrap-box,
.cropper-canvas {
  overflow: hidden;
}
.cropper-drag-box {
  background-color: #fff;
  opacity: 0;
}
.cropper-modal {
  background-color: #000;
  opacity: 0.5;
}
.cropper-view-box {
  display: block;
  height: 100%;
  outline: 1px solid #39f;
  outline-color: rgba(51, 153, 255, 0.75);
  overflow: hidden;
  width: 100%;
}
.cropper-dashed {
  border: 0 dashed #eee;
  display: block;
  opacity: 0.5;
  position: absolute;
}
.cropper-dashed.dashed-h {
  border-bottom-width: 1px;
  border-top-width: 1px;
  height: calc(100% / 3);
  left: 0;
  top: calc(100% / 3);
  width: 100%;
}
.cropper-dashed.dashed-v {
  border-left-width: 1px;
  border-right-width: 1px;
  height: 100%;
  left: calc(100% / 3);
  top: 0;
  width: calc(100% / 3);
}
.cropper-center {
  display: block;
  height: 0;
  left: 50%;
  opacity: 0.75;
  position: absolute;
  top: 50%;
  width: 0;
}
.cropper-center::before,
.cropper-center::after {
  background-color: #eee;
  content: ' ';
  display: block;
  position: absolute;
}
.cropper-center::before {
  height: 1px;
  left: -3px;
  top: 0;
  width: 7px;
}
.cropper-center::after {
  height: 7px;
  left: 0;
  top: -3px;
  width: 1px;
}
.cropper-face,
.cropper-line,
.cropper-point {
  display: block;
  height: 100%;
  opacity: 0.1;
  position: absolute;
  width: 100%;
}
.cropper-face {
  background-color: #fff;
  left: 0;
  top: 0;
}
.cropper-line {
  background-color: #39f;
}
.cropper-line.line-e {
  cursor: ew-resize;
  right: -3px;
  top: 0;
  width: 5px;
}
.cropper-line.line-n {
  cursor: ns-resize;
  height: 5px;
  left: 0;
  top: -3px;
}
.cropper-line.line-w {
  cursor: ew-resize;
  left: -3px;
  top: 0;
  width: 5px;
}
.cropper-line.line-s {
  bottom: -3px;
  cursor: ns-resize;
  height: 5px;
  left: 0;
}
.cropper-point {
  background-color: #39f;
  height: 5px;
  opacity: 0.75;
  width: 5px;
}
.cropper-point.point-e {
  cursor: ew-resize;
  margin-top: -3px;
  right: -3px;
  top: 50%;
}
.cropper-point.point-n {
  cursor: ns-resize;
  left: 50%;
  margin-left: -3px;
  top: -3px;
}
.cropper-point.point-w {
  cursor: ew-resize;
  left: -3px;
  margin-top: -3px;
  top: 50%;
}
.cropper-point.point-s {
  bottom: -3px;
  cursor: s-resize;
  left: 50%;
  margin-left: -3px;
}
.cropper-point.point-ne {
  cursor: nesw-resize;
  right: -3px;
  top: -3px;
}
.cropper-point.point-nw {
  cursor: nwse-resize;
  left: -3px;
  top: -3px;
}
.cropper-point.point-sw {
  bottom: -3px;
  cursor: nesw-resize;
  left: -3px;
}
.cropper-point.point-se {
  bottom: -3px;
  cursor: nwse-resize;
  height: 20px;
  opacity: 1;
  right: -3px;
  width: 20px;
}
@media (min-width: 768px) {
  .cropper-point.point-se {
    height: 15px;
    width: 15px;
  }
}
@media (min-width: 992px) {
  .cropper-point.point-se {
    height: 10px;
    width: 10px;
  }
}
@media (min-width: 1200px) {
  .cropper-point.point-se {
    height: 5px;
    opacity: 0.75;
    width: 5px;
  }
}
.cropper-point.point-se::before {
  background-color: #39f;
  bottom: -50%;
  content: ' ';
  display: block;
  height: 200%;
  opacity: 0;
  position: absolute;
  right: -50%;
  width: 200%;
}
.cropper-invisible {
  opacity: 0;
}
.cropper-bg {
  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC');
}
.cropper-hide {
  display: block;
  height: 0;
  position: absolute;
  width: 0;
}
.cropper-hidden {
  display: none !important;
}
.cropper-move {
  cursor: move;
}
.cropper-crop {
  cursor: crosshair;
}
.cropper-disabled .cropper-drag-box,
.cropper-disabled .cropper-face,
.cropper-disabled .cropper-line,
.cropper-disabled .cropper-point {
  cursor: not-allowed;
}
`),s=n.b`:host {
  display: block;
  position: relative;
  z-index: 99999999;
}
.img-modal {
  position: fixed;
  z-index: 111;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.img-modal.hide {
  display: none;
}
.img-modal .img-modal-mask {
  position: absolute;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
}
.img-modal .img-modal-content {
  width: 640px;
  padding: 0 20px;
  box-sizing: border-box;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background-color: #fff;
  box-shadow: 0 6px 6px rgba(0, 0, 0, 0.2);
  border-radius: 3px;
}
.img-modal .modal-header .close {
  margin-top: 18px;
  text-align: right;
}
.img-modal .modal-header .close i-usesvg {
  color: #d9d6d7;
  width: 14px;
  height: 14px;
  cursor: pointer;
}
.img-modal .modal-header .title {
  margin-top: 8px;
  margin-bottom: 50px;
  text-align: center;
  font-size: 20px;
  font-weight: 500;
  color: #333333;
  line-height: 28px;
}
.img-modal .modal-body {
  display: flex;
  padding-bottom: 20px;
}
.img-modal .cropper {
  position: relative;
  width: 260px;
  height: 260px;
  margin-right: 24px;
  flex-shrink: 0;
  margin-bottom: 32px;
}
.img-modal .float-option {
  position: absolute;
  bottom: -32px;
  width: 100%;
  box-sizing: border-box;
  display: flex;
  justify-content: space-between;
}
.img-modal .float-option i-usesvg {
  cursor: pointer;
  width: 18px;
  height: 18px;
  color: #333;
  opacity: 0.3;
  transition: opacity 0.2s;
}
.img-modal .float-option i-usesvg:hover {
  opacity: 1;
}
.img-modal .float-option-left > i-usesvg {
  margin-right: 16px;
}
.img-modal .float-option-right > i-usesvg {
  margin-left: 16px;
}
.img-modal .option {
  position: relative;
  flex-grow: 1;
}
.img-modal .option .title {
  display: block;
  margin-bottom: 14px;
  line-height: 1;
  font-weight: 500;
  color: #333333;
}
.img-modal .preview-box .preview {
  border: 1px solid #DADCE0;
  box-sizing: border-box;
  overflow: hidden;
  margin-bottom: 30px;
  width: 80px;
  height: 80px;
  border-radius: 6px;
  -webkit-mask-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYGBgAAgwAAAEAAGbA+oJAAAAAElFTkSuQmCC);
          mask-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYGBgAAgwAAAEAAGbA+oJAAAAAElFTkSuQmCC);
}
.img-modal .color-box {
  position: relative;
}
.img-modal .color-box i-colorpicker {
  margin-right: 28px;
}
.modal-footer {
  margin-top: 20px;
  margin-bottom: 40px;
}
.modal-footer .btn-box {
  padding: 0 100px;
  display: flex;
  justify-content: space-between;
}
.modal-footer .btn-box infinito-button {
  outline: none;
  border: none;
  width: 120px;
  height: 42px;
  background: #efefef;
  border-radius: 6px;
  font-size: 16px;
  font-weight: 500;
  line-height: 22px;
  color: #333333;
  cursor: pointer;
}
.cropper .cropper-wrap-box {
  background-color: currentColor;
}
.cropper img {
  max-width: 100%;
  max-height: 100%;
}
.cropper .cropper-wrap-box {
  background-color: currentColor;
}
.cropper .cropper-crop-box {
  background-color: currentColor;
}
.cropper .cropper-point.point-se {
  height: 5px;
  width: 5px;
}
`,c=function(t,e,r,n){var i,o=arguments.length,a=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,r,a):i(e,r))||a);return o>3&&a&&Object.defineProperty(e,r,a),a};let u=class extends n.a{constructor(){super(...arguments),this.modalStatus=!1,this.rgba="",this.needBackground=!1,this.initRgba="",this.title="",this.borderRadius="3px",this.showImg=!1,this.changed=!1,this.cropper=null}static create(t){const e=null==t?void 0:t.title,r=null==t?void 0:t.needBackground,n=(null==t?void 0:t.borderRadius)||"3px",i=document.body,o=document.createElement("i-cropper");return o.borderRadius=n,e&&o.setAttribute("title",e),r&&o.setAttribute("needBackground",""+r),i.appendChild(o),this.instance=o,o}static destroy(){var t,e;null===(e=null===(t=this.instance)||void 0===t?void 0:t.parentNode)||void 0===e||e.removeChild(this.instance),this.instance=null}init(t,e){this.showImg=!1,this.rgba=e||"transparent",this.initRgba=e||"transparent",this.cropper?(this.cropper.replace(t),this.cropper.reset()):(this.$img.src=t,this.cropper=new o.a(this.$img,{aspectRatio:1,zoomOnWheel:!0,autoCropArea:.9999,preview:this.$preview,checkCrossOrigin:!1,dragMode:"move",ready:()=>{this.showImg=!0},zoom:()=>{this.changed=!0},cropend:()=>{this.changed=!0}}))}close(t=!0){this.modalStatus=!1,this.showImg=!1,t&&(this.rgba=""),this.changed=!1;const e=new CustomEvent("on-close-cropper",{bubbles:!0,composed:!0});this.dispatchEvent(e)}show(){this.modalStatus=!0;const t=new CustomEvent("on-show-cropper",{bubbles:!0,composed:!0});this.dispatchEvent(t)}_rotateCropper(t){this.cropper.rotate(t),this.changed=!0}_scaleCropper(t){this.cropper.zoom(t),this.changed=!0}_resetCropper(){this.rgba=this.initRgba,this.cropper.reset(),this.changed=!1,requestAnimationFrame(()=>{this.$colorPicker.resetActiveIndex()})}_onSubmitImg(){const t={minWidth:512,minHeight:512,maxWidth:600,maxHeight:600};this.needBackground&&(t.fillColor=this.rgba||"transparent"),this.cropper.getCroppedCanvas(t).toBlob(t=>{const e=new CustomEvent("on-change",{detail:{data:t,color:this.rgba,changed:this.changed}});this.dispatchEvent(e),this.close()},"image/png")}_pickColor(t){const{value:e}=t.detail;this.rgba=e,this.changed=!0}render(){return n.e` <div class="img-modal ${this.modalStatus?"show":"hide"}">
      <div class="img-modal-mask"></div>
      <div class="img-modal-content" style="border-radius:${this.borderRadius}">
        <section class="modal-header">
          <div class="close">
            <i-usesvg @click="${this.close}" type="icon-guanbi1" iconfont></i-usesvg>
          </div>
          <div class="title">${this.title||i18n("custom_icon")}</div>
        </section>
        <section class="modal-body">
          <div
            style="${this.rgba?`color:${this.rgba};`:"color:transparent;"}${this.showImg?"opacity:1;":"opacity:0;"}"
            class="cropper"
          >
            <img class="file-img" crossorigin="anonymous" src="" alt="" />
            <div class="float-option">
              <div class="float-option-left">
                <i-usesvg @click="${()=>this._rotateCropper(90)}" type="infinity-pro-pure-icon-redo"></i-usesvg>
                <i-usesvg @click="${()=>this._rotateCropper(-90)}" type="infinity-pro-pure-icon-undo"></i-usesvg>
              </div>
              <div class="float-option-right">
                <i-usesvg @click="${()=>this._scaleCropper(-.1)}" type="infinity-pro-pure-icon-zoom-out"></i-usesvg>
                <i-usesvg @click="${()=>this._scaleCropper(.1)}" type="infinity-pro-pure-icon-zoom-in"></i-usesvg>
              </div>
            </div>
          </div>
          <div class="option">
            <div class="preview-box">
              <span class="title">${i18n("preview")}</span>
              <div
                style="${this.rgba?`background-color:${this.rgba};`:"background-color:transparent;"}"
                class="preview"
              ></div>
            </div>
            <div class="color-box">
              <span class="title">${i18n("bg_color")}</span>
              <i-colorpicker .value="${this.rgba||"transparent"}" @on-change="${this._pickColor}"></i-colorpicker>
            </div>
          </div>
        </section>
        <section class="modal-footer">
          <div class="btn-box">
            <infinito-button @click="${this.close}">${i18n("cancel")}</infinito-button>
            <infinito-button @click="${this._resetCropper}">${i18n("reset")}</infinito-button>
            <infinito-button primary @click="${this._onSubmitImg}">${i18n("confirm")}</infinito-button>
          </div>
        </section>
      </div>
    </div>`}};u.styles=[s,a],u.instance=null,c([Object(n.h)(".file-img")],u.prototype,"$img",void 0),c([Object(n.h)(".preview")],u.prototype,"$preview",void 0),c([Object(n.h)("i-colorpicker")],u.prototype,"$colorPicker",void 0),c([Object(n.g)({type:Boolean})],u.prototype,"modalStatus",void 0),c([Object(n.g)({type:String})],u.prototype,"rgba",void 0),c([Object(n.g)({type:Boolean})],u.prototype,"needBackground",void 0),c([Object(n.g)({type:String})],u.prototype,"title",void 0),c([Object(n.g)({type:String})],u.prototype,"borderRadius",void 0),c([Object(n.f)()],u.prototype,"showImg",void 0),u=c([Object(n.c)("i-cropper")],u)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){"use strict";r.r(e),r.d(e,"userStore",(function(){return A}));r(11),r(60),r(17),r(19),r(31);var n=r(7),i=r.n(n),o=r(15),a=r.n(o),s=r(334),c=r.n(s),u=r(135),l=r.n(u),h=r(4),p=r(327),d=r(37),f=r(0),g=r(128),m=r(35),y=r.n(m),v=r(162),b=r(210),w=r(605),x=r(604),k=r(12),S=r(47),O=function(t,e,r,n){var i,o=arguments.length,a=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,r,a):i(e,r))||a);return o>3&&a&&Object.defineProperty(e,r,a),a};class _ extends p.a{constructor(){super(),this.isExpired=!1,this.isLogin=!1,this.token="",this.userInfo={},this.refreshToken="",this.mobileloginExpire=0,this.mobileloginUrl="",this.areaCodeList=[],this.thirdList=[{type:d.g.ThirdLoginType.wechat,title:i18n("wechat"),bindStatus:!1,nick_name:""},{type:d.g.ThirdLoginType.qq,title:"QQ",bindStatus:!1,nick_name:""},{type:d.g.ThirdLoginType.google,title:"Google",bindStatus:!1,nick_name:""},{type:d.g.ThirdLoginType.facebook,title:"Facebook",bindStatus:!1,abondon:!0,nick_name:""},{type:d.g.ThirdLoginType.weibo,title:i18n("xin_lang_weibo"),bindStatus:!1,abondon:!0,nick_name:""}],this.userProfilePromise=i.a.resolve(),this.wpColorUpdate=0,this.logining=!1,this.modalOpen=!1,this.removeAccountDisableSec=10,this.removeAccountDisableTimer=null,this.showLoginTipModal=!1,this.profileModal=!1,this.syncListModal=!1,this.isModify=!1,this.openMiniWindow=t=>{const e=Math.floor(window.screenY+200),r=Math.floor(window.screenX+window.innerWidth/3);return window.open(t,"_blank",`top=${e},left=${r},height=600,width=770,menubar=no,toolbar=yes,location=yes,status=no,resizable=no`)},this.binding=!1,this.bindListener=t=>{let e;const r=()=>{e=setTimeout(()=>{t.postMessage({from:"origin_login"},"*"),t.closed?(window.removeEventListener("message",n),this.binding=!1):r()},500)};r();const n=async t=>{try{if(!t.data&&!t.data.key&&"login"!==t.data.key)return;clearTimeout(e),window.removeEventListener("message",n,!1);const{message:r}=t.data;let i;switch(r.type){case d.g.ThirdLoginType.weibo:case d.g.ThirdLoginType.google:case d.g.ThirdLoginType.facebook:case d.g.ThirdLoginType.wechat:case d.g.ThirdLoginType.qq:i=await d.g.bindThird(r.type,r.code)}if(i.error)return void g.message.error(i.error.message);this.bindSuccess("third",i.data),g.message.success(i18n("bind_success"))}catch(t){g.message.error(i18n("network_error"))}finally{this.binding=!1}};window.addEventListener("message",n,!1)},this.countdownTimer=null,this.checkMobileUrlTimer=null,this.isShowLogoutConfirm=!1,this.showConfirmOpt="",this.isShowSecondProfileModal=!1,this.secondProfileModalType=null,this.clearAllData=!1,this.loading=!1,this.URL=f.y}get thirdAccountList(){const t={};return this.userInfo.third_account&&this.userInfo.third_account.forEach(e=>{t[e.platform]=e}),this.thirdList.map(e=>t[e.type]?Object.assign(Object.assign({},e),{bindStatus:!0,nick_name:t[e.type].nick_name}):e)}setWpColorUpdate(t){this.wpColorUpdate=t}closeModal(){this.modalOpen=!1}openModal(){this.modalOpen=!0}toggleLoginTipModal(){this.showLoginTipModal=!this.showLoginTipModal}closeLoginTipModal(){this.showLoginTipModal=!1}closeProfileModal(){this.profileModal=!1}openProfileModal(){this.profileModal=!0,this.openModify()}closeSyncListModal(){this.syncListModal=!1}openSyncListModal(){this.syncListModal=!0}openModify(){this.isModify=!0}async modifyProfile(t){try{const e=await d.g.updateProfile(t);Object(h.i)(()=>{if(e&&0===e.code){const{user:{name:t,gender:r,avatar:n}}=e.data;this.userInfo.name=t,this.userInfo.gender=r,this.userInfo.avatar=n}else g.message.error(i18n("update_data_failure"))})}catch(t){g.message.error(t.message)}}async getUserProfile(){const t=await d.g.getUserProfile();Object(h.i)(()=>{if(t)if(0===t.code&&this.isLogin){const{gender:e,name:r,avatar:n}=t.data;this.userInfo.name=r,this.userInfo.gender=e,this.userInfo.avatar=n,this.userInfo["auto-backup"]=t.data["auto-backup"],this.userInfo["wp-color-update"]=t.data["wp-color-update"],this.userInfo["backup-version-v2"]=t.data["backup-version-v2"],this.userInfo.email=t.data.email,this.userInfo.phone_number=t.data.phone_number,this.userInfo.third_account=t.data.third_account}else 3012===t.code&&(g.message.error(t.message),this.exitAccount())})}async getAreaCodeList(){const{data:t,error:e}=await d.g.getAreaCodeList();e||(null==t?void 0:t.length)&&Object(h.i)(()=>{this.areaCodeList=t})}async updateAvatar(t){try{return await d.g.uploadAvatar(t)}catch(t){g.message.error(i18n("upload_avatar_failure"))}}closeModify(){this.isModify=!1}thirdPartyLogin(t){let e;switch(this.logining=!0,t){case"facebook":e=this.URL+"/login/facebook";break;case"google":e=this.URL+"/login/google";break;case"qq":e=this.URL+"/login/qq";break;case"sina":e=this.URL+"/login/weibo";break;case"wechat":e=this.URL+"/login/wechat"}setTimeout(async()=>{const t=this.openMiniWindow(e);if(this.opener=t,f.n)return;const r=setInterval(()=>{t.postMessage({from:"origin_login"},"*")},300),n=t=>{if(!t.data&&!t.data.key&&"login"!==t.data.key)return;clearInterval(r),window.removeEventListener("message",n,!1);const{message:e}=t.data;this.login3rdSuccess(e)};window.addEventListener("message",n,!1)},300)}get isLastId(){const t=this.userInfo||{},e=t.third_account||[];let r=0;return t.email&&++r,t.phone_number&&++r,r+=e.length,r<=1}thirdPartyBind(t){if(this.binding)return;let e;switch(this.binding=!0,t){case d.g.ThirdLoginType.weibo:case d.g.ThirdLoginType.google:case d.g.ThirdLoginType.facebook:case d.g.ThirdLoginType.wechat:case d.g.ThirdLoginType.qq:e=this.openMiniWindow(`${f.y}/bind/to?type=${t}`),this.bindListener(e)}}async thirdPartyUnbind(t){let e;switch(t){case d.g.ThirdLoginType.weibo:case d.g.ThirdLoginType.google:case d.g.ThirdLoginType.facebook:case d.g.ThirdLoginType.qq:case d.g.ThirdLoginType.wechat:e=await d.g.unbindThird(t)}return e}bindSuccess(t,e){if("email"===t)this.userInfo.email=e;else if("phone"===t)this.userInfo.phone_number=e;else if("third"===t){const t=this.userInfo.third_account||[];t.push(e),this.userInfo.third_account=t}}unbindSuccess(t,e){if("email"===t)this.userInfo.email=null;else if("phone"===t)this.userInfo.phone_number=null;else if("third"===t){const t=this.userInfo.third_account||[],r=t.findIndex(t=>t.platform===e);if(-1===r)return;t.splice(r,1),this.userInfo.third_account=t}}async login(t){const e={};if(e.password=t.password,"email"===t.type)e.email=t.account;else{if("phone"!==t.type)return;e.phone_number=t.account}const r=await d.g.login(e);Object(h.i)(()=>{if(!r||0!==r.code)throw g.message.error(r.message),new Error(r.code);this.loginEmailSuccess(r.data.user),this.setToken(r.data),this.setRefreshToken(r.data.refreshToken)})}async getMobileloginUrl(t=!1){if(t&&(this.mobileloginUrl="",this.mobileloginExpire=0),v.f){const{data:t,error:e}=await d.g.getMobileloginUrl();if(e)return void Object(h.i)(()=>{this.mobileloginExpire=0});Object(h.i)(()=>{this.mobileloginUrl=t.url,this.mobileloginExpire=Math.floor(t.expire/1e3)}),this.checkMobileloginUrl(t.code,t.type),0!==this.mobileloginExpire&&(this.countdownTimer=setInterval(()=>{Object(h.i)(()=>{this.mobileloginExpire-=1}),this.mobileloginExpire<=0&&clearInterval(this.countdownTimer)},1e3))}}async checkMobileloginUrl(t,e,r=5e3){v.f&&this.mobileloginExpire>3&&(clearTimeout(this.checkMobileUrlTimer),this.checkMobileUrlTimer=setTimeout(async()=>{const{data:n}=await d.g.checkMobileloginUrl(t,e);if(n&&n.expired)return clearInterval(this.countdownTimer),void Object(h.i)(()=>{this.mobileloginExpire=0});this.checkMobileloginUrl(t,e,r)},r))}async loginEmailSuccess(t){this.logining=!1,this.closeModal(),this.isLogin=!0,this.userInfo=t,this.isExpired=!1,this.settingLoginSuccess()}setUserData(t){this.logining=!1,this.closeModal(),this.isLogin=t.isLogin,this.userInfo=t,this.isExpired=!1;["token","refreshToken","isLogin"].forEach(t=>delete this.userInfo[t])}async login3rdSuccess(t){var e;if(!t||!Object.keys(t).length)return void this.cancelLogin();const r=t["login-type"];if(a()(e=["qq","wechat"]).call(e,r)){const e=await d.g.loginWithUid(t);0===e.code?Object(h.i)(()=>{this.setUserData(t),this.setToken(e.data),this.setRefreshToken(e.data.refreshToken)}):3006===e.code&&g.message.error("获取token失败")}else this.setUserData(t),this.setToken(t),this.setRefreshToken(t.refreshToken);this.settingLoginSuccess()}settingLoginSuccess(){x.b.changeSetting("view","isHideIcp",!0)}cancelLogin(){var t;this.logining=!1,null===(t=this.opener)||void 0===t||t.close()}toggleClear(t){this.clearAllData=t}logout(t){this.isShowLogoutConfirm=!0,this.showConfirmOpt=t,"remove"===t&&(this.removeAccountDisableSec=10,clearInterval(this.removeAccountDisableTimer),this.removeAccountDisableTimer=setInterval(()=>{Object(h.i)(()=>{this.removeAccountDisableSec-=1,0===this.removeAccountDisableSec&&(clearInterval(this.removeAccountDisableTimer),this.removeAccountDisableTimer=null)})},1e3))}showSecondProfileModal(t){this.isShowSecondProfileModal=!0,this.secondProfileModalType=t}closeSecondProfileModal(){this.isShowSecondProfileModal=!1,this.secondProfileModalType=null}async exitAccount(){this.loading=!0,await new i.a(t=>{setTimeout(()=>{this.clearAllData?this.clearAllStore().then(t):t(null)},200)}),Object(h.i)(()=>{this.isLogin=!1,this.userInfo={},this.clearToken()}),this.clearAllData?window.location.reload():(Object(h.i)(()=>this.loading=!1),this.closeLogoutConfirm(),this.closeProfileModal(),f.s&&w.pluginStore.hideLast())}async deleteAccount(){this.loading=!0;const t=await d.g.deleteAccount();Object(h.i)(()=>{t&&0===t.code?this.exitAccount():(3012===t.code&&this.exitAccount(),g.message.error(t.message)),this.loading=!1})}restoreKeysToStorage(t){t.forEach(({data:t,key:e})=>localStorage.setItem(e,t))}async clearAllStore(){this.stopAutoBackupReaction(),this.stopToStorageReaction(),await k.a.deleteAllForLogout();const t=[S.c,S.d];await this._deleteIdb(t),b.slave.sendMessage("tabs-reload")}async _deleteIdb(t){const e=await new i.a(t=>c()(y.a).call(y.a,(e,r)=>t(r)));await i.a.all(t.map(t=>new i.a(r=>{const n=t.split("->");if(1===n.length)return a()(e).call(e,t)?void y.a.removeItem(t,r):void r(null);r(null),a()(e).call(e,n[0])&&y.a.getItem(n[0],t=>{l()(n).call(n,(t,e,r)=>(r===n.length-1&&Reflect.deleteProperty(t,e),t[e]),t),y.a.setItem(n[0],r)})})))}_clearLocalStorage(t){const e=new Map;t.filter(Boolean).forEach(t=>{const r=t.split("->");if(1===r.length)return void e.set(t,localStorage.getItem(t));const n=JSON.parse(localStorage.getItem(r[0]));r.slice(1).forEach((t,e)=>{const i=0===e?n:n[r[e]];for(const e in i)t!==e&&Reflect.deleteProperty(i,e)}),e.set(r[0],JSON.stringify(n))}),localStorage.clear();for(const t of c()(e).call(e))localStorage.setItem(t,e.get(t))}closeLogoutConfirm(){this.isShowLogoutConfirm=!1}setToken(t){this.token=t.token}setRefreshToken(t){this.refreshToken=t}clearToken(){this.token="",this.refreshToken=""}setOutdated(){this.isExpired=!0,this.isLogin=!1}toggleReLogin(){this.isExpired=!1}getPhoneNumber(){if(this.userInfo.phone_number){const t=this.userInfo.phone_number+"";return`${t.slice(0,3)}****${t.slice(-4)}`}return""}}O([h.g],_.prototype,"isExpired",void 0),O([h.g],_.prototype,"isLogin",void 0),O([h.g],_.prototype,"token",void 0),O([h.g],_.prototype,"userInfo",void 0),O([h.g],_.prototype,"refreshToken",void 0),O([h.g],_.prototype,"mobileloginExpire",void 0),O([h.g],_.prototype,"mobileloginUrl",void 0),O([h.g],_.prototype,"areaCodeList",void 0),O([h.e],_.prototype,"thirdAccountList",null),O([h.g],_.prototype,"wpColorUpdate",void 0),O([h.b],_.prototype,"setWpColorUpdate",null),O([h.g],_.prototype,"opener",void 0),O([h.g],_.prototype,"logining",void 0),O([h.g],_.prototype,"modalOpen",void 0),O([h.g],_.prototype,"removeAccountDisableSec",void 0),O([h.g],_.prototype,"removeAccountDisableTimer",void 0),O([h.b],_.prototype,"closeModal",null),O([h.b],_.prototype,"openModal",null),O([h.g],_.prototype,"showLoginTipModal",void 0),O([h.b],_.prototype,"toggleLoginTipModal",null),O([h.b],_.prototype,"closeLoginTipModal",null),O([h.g],_.prototype,"profileModal",void 0),O([h.g],_.prototype,"syncListModal",void 0),O([h.b],_.prototype,"closeProfileModal",null),O([h.b],_.prototype,"openProfileModal",null),O([h.b],_.prototype,"closeSyncListModal",null),O([h.b],_.prototype,"openSyncListModal",null),O([h.g],_.prototype,"isModify",void 0),O([h.b],_.prototype,"openModify",null),O([h.b],_.prototype,"modifyProfile",null),O([h.b],_.prototype,"getUserProfile",null),O([h.b],_.prototype,"getAreaCodeList",null),O([h.b],_.prototype,"updateAvatar",null),O([h.b],_.prototype,"closeModify",null),O([h.b],_.prototype,"thirdPartyLogin",null),O([h.g],_.prototype,"binding",void 0),O([h.e],_.prototype,"isLastId",null),O([h.b],_.prototype,"thirdPartyBind",null),O([h.b],_.prototype,"thirdPartyUnbind",null),O([h.b],_.prototype,"bindSuccess",null),O([h.b],_.prototype,"unbindSuccess",null),O([h.b],_.prototype,"login",null),O([h.b],_.prototype,"getMobileloginUrl",null),O([h.b],_.prototype,"checkMobileloginUrl",null),O([h.b],_.prototype,"loginEmailSuccess",null),O([h.b],_.prototype,"setUserData",null),O([h.b],_.prototype,"login3rdSuccess",null),O([h.b],_.prototype,"cancelLogin",null),O([h.g],_.prototype,"isShowLogoutConfirm",void 0),O([h.g],_.prototype,"showConfirmOpt",void 0),O([h.g],_.prototype,"isShowSecondProfileModal",void 0),O([h.g],_.prototype,"secondProfileModalType",void 0),O([h.g],_.prototype,"clearAllData",void 0),O([h.b],_.prototype,"toggleClear",null),O([h.b],_.prototype,"logout",null),O([h.b],_.prototype,"showSecondProfileModal",null),O([h.b],_.prototype,"closeSecondProfileModal",null),O([h.g],_.prototype,"loading",void 0),O([h.b],_.prototype,"exitAccount",null),O([h.b],_.prototype,"deleteAccount",null),O([h.b],_.prototype,"clearAllStore",null),O([h.b],_.prototype,"closeLogoutConfirm",null),O([h.b],_.prototype,"setToken",null),O([h.b],_.prototype,"setRefreshToken",null),O([h.b],_.prototype,"clearToken",null),O([h.b],_.prototype,"setOutdated",null),O([h.b],_.prototype,"toggleReLogin",null);const A=new _;Object(h.c)(()=>{A.firstSync&&(A.isLogin?(A.closeModal(),A.toggleReLogin(),A.userProfilePromise=A.getUserProfile()):(A.closeProfileModal(),A.closeSecondProfileModal()))}),A.initSyncStore(k.k,["userInfo","isLogin","token","refreshToken","wpColorUpdate"]),k.i.injectUserStore(A),k.i.injectSendTabsSync(t=>{b.slave.sendMessage("tabs-sync",t)})},function(t,e,r){"use strict";r.d(e,"b",(function(){return v})),r.d(e,"a",(function(){return w}));var n=r(15),i=r.n(n),o=(r(17),r(19),r(31),r(11),r(60),r(4)),a=r(327),s=r(26),c=r(102),u=r(147),l=r(333),h=r(0),p=r(506),d=r(520),f=r(329),g=r(12),m=function(t,e,r,n){var i,o=arguments.length,a=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,r,a):i(e,r))||a);return o>3&&a&&Object.defineProperty(e,r,a),a};class y extends a.a{constructor(){super(...arguments),this.localSettings={},this.innerWidth=window.innerWidth,this.innerHeight=window.innerHeight,this.iconSpaceWidth=0,this.iconSpaceHeight=0,this.setting=this.init(),this.updatetime=0,this.permission={topUseful:-1,topBookmark:-1,searchSuggest:-1,gmailNotice:-1,gmailCount:-1,todoNotice:-1},this.logs=new Map,this.permissionMapper={topBookmark:[["bookmarks"],["chrome://favicon/"]],topUseful:[["topSites"],["chrome://favicon/"]],searchSuggest:[[],["https://suggestion.baidu.com/","https://google.com/"]],gmailNotice:[["notifications"],["https://mail.google.com/"]],gmailCount:[[],["https://mail.google.com/"]],todoNotice:[["notifications"],[]]},this.showSettingHomeModal=!1,this.webClickName=""}init(t={}){return{notice:Object.assign({},u.b.notice),link:Object.assign({},u.b.link),view:Object.assign({},u.b.view),layout:Object.assign({},u.b.layout),animation:Object.assign({},u.b.animation),icon:Object.assign({},u.b.icon),search:Object.assign({},u.b.search),font:Object.assign({},u.b.font),_v1Setting:t}}get withPermissionTopUseful(){return this.setting.view.topUseful&&1===this.permission.topUseful}get withPermissionTopBookmark(){return this.setting.view.topBookmark&&1===this.permission.topBookmark}get withPermissionSearchSuggest(){return this.setting.search.searchSuggest&&1===this.permission.searchSuggest}get needPermissionList(){const t=[],{view:e,notice:r,search:n}=this.setting,{topUseful:i,topBookmark:o,searchSuggest:a,gmailNotice:s,gmailCount:c,todoNotice:u}=this.permission;return h.m&&n.searchSuggest&&1!==a&&t.push({key:"searchSuggest",title:i18n("permission_serch_suggest_title"),content:i18n("permission_serch_suggest_content")}),h.m&&r.gmail&&1!==s&&t.push({key:"gmailNotice",title:i18n("permission_gmail_notice_title"),content:i18n("permission_gmail_notice_content")}),h.m&&r.gmailNumber&&1!==c&&t.push({key:"gmailCount",title:i18n("permission_gmail_num_title"),content:i18n("permission_gmail_num_content")}),h.s||h.r||!e.topBookmark||1===o||t.push({key:"topBookmark",title:i18n("permission_top_bookmark_title"),content:i18n("permission_top_bookmark_content")}),h.s||h.r||!e.topUseful||1===i||t.push({key:"topUseful",title:i18n("permission_top_useful_title"),content:i18n("permission_top_useful_content")}),p.a.needNotificationPermission&&1!==u&&((h.s||h.r)&&"denied"===Notification.permission||t.push({key:"todoNotice",title:i18n("permission_todo_notice_title"),content:i18n("permission_todo_notice_content")})),t}get sideRatio(){return this.setting.view.scaleSide}reset(){this.setting=this.init(this.setting._v1Setting),this.changeLayoutCb(this.setting.layout.col,this.setting.layout.row)}diffRemote(t){return!o.d.structural(t.setting||{},this.setting)}sendSettingValue(){Object.keys(this.localSettings).length&&(f.a.sendEvent({settingValue:this.localSettings}),this.localSettings={})}async mergeRemote(t){const e=t.setting;if(!t.setting)return;const r=this.setting;this.setting={notice:Object.assign(Object.assign({},r.notice),e.notice),link:Object.assign(Object.assign({},r.link),e.link),view:Object.assign(Object.assign({},r.view),e.view),layout:Object.assign(Object.assign({},r.layout),e.layout),animation:Object.assign(Object.assign({},r.animation),e.animation),icon:Object.assign(Object.assign({},r.icon),e.icon),search:Object.assign(Object.assign({},r.search),e.search),font:Object.assign(Object.assign({},r.font),e.font),_v1Setting:e._v1Setting};const n=await s.a.getTimestamp();Object(o.i)(()=>{this.updatetime=n})}sendSettingLog(t,e){this.logs.has(t)&&clearTimeout(this.logs.get(t)),this.logs.set(t,setTimeout(()=>{f.a.sendEvent({settingAction:{[t]:e}}),this.logs.delete(t)},2e3))}async changeSetting(t,e,r){if(this.setting[t][e]===r)return;this.setting[t][e]=r,"layout"===t&&("custom"===e&&!0===r||"customItem"===e)&&(this.setting.layout.row=this.setting.layout.customItem[0],this.setting.layout.col=this.setting.layout.customItem[1],this.changeLayoutCb(this.setting.layout.col,this.setting.layout.row));let n=`${t}_${e}`,i=r;"layout"!==t||"col"!==e&&"row"!==e||(this.changeLayoutCb(this.setting.layout.col,this.setting.layout.row),n="layout",i=this.setting.layout.row+"*"+this.setting.layout.col),this.sendSettingLog(n,i),this.localSettings[n]=i;const a=await s.a.getTimestamp();Object(o.i)(()=>{this.updatetime=a}),this.changeSettingEffect(t,e,r)}changeLayoutCb(t,e){console.log("col, row",t,e),console.log("changeLayoutCb 未注册")}changeLayout(t){this.changeLayoutCb=t}changeSettingEffect(t,e,r){switch(!0){case"topBookmark"===e:r&&this.requestPermission("topBookmark",!0);break;case"topUseful"===e:r&&this.requestPermission("topUseful",!0);break;case"notice"===t&&"gmail"===e:r&&this.requestPermission("gmailNotice",!0);break;case"notice"===t&&"gmailNumber"===e:r&&this.requestPermission("gmailCount",!0);break;case"searchSuggest"===e:r&&this.requestPermission("searchSuggest",!0)}}async checkPermission(t){if(h.s||h.r){switch(t){case"todoNotice":case"gmailNotice":return void("granted"===Notification.permission?this.permission[t]=1:"default"===Notification.permission?this.permission[t]=-1:this.permission[t]=0)}if(h.s)return}if(1===this.permission[t]){const e=this.permissionMapper[t];try{if(await c.a.has(e[0],e[1]))return}catch(t){console.log(t)}Object(o.i)(()=>{this.permission[t]=-1})}const e=this.permissionMapper[t];try{await c.a.has(e[0],e[1])&&Object(o.i)(()=>{this.permission[t]=1})}catch(t){}}async requestPermission(t,e=!1){var r;if((h.s||h.r)&&i()(r=["todoNotice","gmailNotice"]).call(r,t))return await Object(d.a)(),void Object(o.i)(()=>{this.permission.todoNotice=1,this.permission.gmailNotice=1});const n=this.permissionMapper[t];if(e||0!==this.permission[t]&&1!==this.permission[t])try{await c.a.request(n[0],n[1]),Object(o.i)(()=>{this.permission[t]=1}),"gmailNotice"===t&&this.checkPermission("todoNotice")}catch(e){e&&"REJECT"===e.message&&Object(o.i)(()=>{this.permission[t]=0})}}async requestAllPermission(){if(h.s||h.r)return await Object(d.a)(),void Object(o.i)(()=>{this.permission.todoNotice=1,this.permission.gmailNotice=1});const t=[[],[]];this.needPermissionList.forEach(e=>{const r=this.permissionMapper[e.key];t[0].push(...r[0]),r&&t[1].push(...r[1])});try{await c.a.request(t[0],t[1]),Object(o.i)(()=>{this.needPermissionList.forEach(t=>{this.permission[t.key]=1})})}catch(t){Object(o.i)(()=>{this.needPermissionList.forEach(t=>{this.permission[t.key]=0})})}}resetPermission(t){this.permission[t]=-1}setIconSpace(t){this.setting.icon.scale=t.iconScale,this.setting.layout.colGap=t.colGap,this.setting.layout.rowGap=t.rowGap,this.setting.search.scale=t.searchScale}openSearchSuggest(){this.setting.search.searchSuggest?this.requestPermission("searchSuggest",!0):this.setting.search.searchSuggest=!0}get sideScaleRatio(){return this.setting.view.scaleSide}toggleShowSettingHome(t){this.setting.view.isShowHomepageBtn=!t}toggleSettingHomeModal(){this.webClickName="",this.showSettingHomeModal=!this.showSettingHomeModal}closeSettingHomeModal(){this.showSettingHomeModal=!1}setWebClickName(t){this.webClickName=t}}m([o.g],y.prototype,"innerWidth",void 0),m([o.g],y.prototype,"innerHeight",void 0),m([o.g],y.prototype,"iconSpaceWidth",void 0),m([o.g],y.prototype,"iconSpaceHeight",void 0),m([o.g],y.prototype,"setting",void 0),m([o.g],y.prototype,"updatetime",void 0),m([o.g],y.prototype,"permission",void 0),m([o.e],y.prototype,"withPermissionTopUseful",null),m([o.e],y.prototype,"withPermissionTopBookmark",null),m([o.e],y.prototype,"withPermissionSearchSuggest",null),m([o.e],y.prototype,"needPermissionList",null),m([o.e],y.prototype,"sideRatio",null),m([o.b],y.prototype,"reset",null),m([o.b],y.prototype,"mergeRemote",null),m([o.b],y.prototype,"changeSetting",null),m([o.b],y.prototype,"checkPermission",null),m([o.b],y.prototype,"requestPermission",null),m([o.b],y.prototype,"requestAllPermission",null),m([o.b],y.prototype,"resetPermission",null),m([o.b],y.prototype,"setIconSpace",null),m([o.b],y.prototype,"openSearchSuggest",null),m([o.e],y.prototype,"sideScaleRatio",null),m([o.b],y.prototype,"toggleShowSettingHome",null),m([o.g],y.prototype,"showSettingHomeModal",void 0),m([o.b],y.prototype,"toggleSettingHomeModal",null),m([o.b],y.prototype,"closeSettingHomeModal",null),m([o.g],y.prototype,"webClickName",void 0),m([o.b],y.prototype,"setWebClickName",null);const v=new y;v.initSyncStore(g.g,["setting","permission","updatetime"],u.b),v.initAutoBackup("setting",["setting"]),Object(o.c)(()=>{v.firstSync&&v.setting.view.topBookmark&&v.checkPermission("topBookmark")},{delay:50}),Object(o.c)(()=>{v.firstSync&&v.setting.view.topUseful&&v.checkPermission("topUseful")},{delay:50}),Object(o.c)(()=>{v.firstSync&&v.setting.notice.gmail&&v.checkPermission("gmailNotice")},{delay:50}),Object(o.c)(()=>{p.a.firstSync&&p.a.needNotificationPermission&&v.checkPermission("todoNotice")},{delay:50}),Object(o.c)(()=>{v.firstSync&&v.setting.notice.gmailNumber&&v.checkPermission("gmailCount")},{delay:50}),Object(o.c)(()=>{v.firstSync&&v.setting.search.searchSuggest&&v.checkPermission("searchSuggest")},{delay:50}),Object(o.c)(()=>{v.firstSync&&1===v.permission.gmailNotice&&s.a.send({key:"bg-notice-gmail-permission",data:!0})}),Object(o.c)(()=>{if(v.firstSync){const{gmail:t,gmailVoice:e,gmailNumber:r}=v.setting.notice,{gmailCount:n,gmailNotice:i}=v.permission;s.a.send({key:"bg-notice-gmail-updated",data:{gmail:t&&1===i,gmailVoice:e,gmailNumber:r&&(1===i||1===n)}})}},{delay:100}),Object(o.c)(()=>{if(v.firstSync){const t={"--side-ratio":v.sideRatio,"--main-ratio":v.setting.view.scaleMain,"--icon-radius":Math.round(100*v.setting.icon.radius)+"%","--icon-font-color":v.setting.font.color,"--icon-font-size":Math.ceil(Math.max(v.setting.font.size*v.setting.view.scaleMain,12))+"px","--icon-opacity":v.setting.icon.opacity,"--icon-visible":v.setting.icon.isHideIconName?"hidden":"visible","--search-radius":""+v.setting.search.radius,"--search-opacity":v.setting.search.opacity};s.a.setStyle(t)}},{delay:50}),Object(o.c)(()=>{if(v.firstSync){let t=0,e=20;v.withPermissionTopBookmark&&(t+=36),v.withPermissionTopUseful&&(e+=26);const r={"--top-bar-height":t+"px","--settings-icon-top-offset":e+"px"};s.a.setStyle(r)}});const b=t=>{const e={"--search-height":t.searchHeight,"--search-width":t.searchWidth,"--search-margin-top":t.searchMarginTop,"--search-margin-bottom":t.searchMarginBottom,"--search-ratio":t.searchRatio,"--icon-box-width":t.iconBoxWidth,"--icon-box-height":t.iconBoxHeight,"--icon-one-height":t.iconOneHeight,"--icon-width":t.iconWidth,"--mini-icon-padding":t.miniIconPadding,"--icon-ratio":t.iconRatio,"--icon-row":v.setting.layout.row,"--icon-col":v.setting.layout.col,"--main-icons-margin":t.iconsMargin};s.a.setStyle(e)},w=(t=!0)=>{const e={row:v.setting.layout.row,col:v.setting.layout.col,rowGap:v.setting.layout.rowGap,colGap:v.setting.layout.colGap,iconScale:v.setting.icon.scale,searchScale:v.setting.search.scale,innerHeight:innerHeight,innerWidth:innerWidth,miniMode:v.setting.icon.miniMode,fontSize:v.setting.font.size,topUseful:v.withPermissionTopUseful,topBookmark:v.withPermissionTopBookmark,mainRatio:v.setting.view.scaleMain};if(t)requestIdleCallback(()=>{const t=Object(l.a)(e);b(t)});else{const t=Object(l.a)(e);b(t)}};Object(o.c)(()=>{v.firstSync&&w(!1)},{delay:40}),window.addEventListener("resize",s.a.throttle(()=>{w(!1)},56))},function(t,e,r){"use strict";r.r(e),r.d(e,"pluginStore",(function(){return p}));var n=r(15),i=r.n(n),o=(r(17),r(19),r(11),r(4)),a=r(102),s=r(519);class c extends s.a{opened(t){}}const u=Object(s.b)(new c);var l=function(t,e,r,n){var i,o=arguments.length,a=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,r,a):i(e,r))||a);return o>3&&a&&Object.defineProperty(e,r,a),a};class h{constructor(){this.pluginsMap={"infinity://weather":"side-weather","infinity://todos":"side-todos","infinity://notes":"side-notes","infinity://history":"side-history","infinity://bookmarks":"side-bookmarks","infinity://extension":"side-extension","infinity://chrome-apps":"chrome-apps","infinity://wallpaper":"wallpaper","infinity://settings":"side-profile",search:"side-search",profile:"side-profile",editIcon:"side-editicon","side-tutorial":"side-tutorial"},this.pluginsTags={"side-weather":!1,"side-todos":!1,"side-notes":!1,"side-history":!1,"side-bookmarks":!1,"side-extension":!1,"chrome-apps":!1,"side-profile":!1,"side-search":!1,"side-editicon":!1,"side-tutorial":!1,wallpaper:!1},this.pluginViews=[],this.focusRepair=!1,Object(o.h)(()=>this.pluginViews.map(t=>t),([t])=>{u.opened(t)})}initDom(t){this.pluginsTags[t]=!0}async show(t){var e;if(i()(e=this.pluginViews).call(e,t))return;const r=this.pluginsMap[t];if(!1===this.pluginsTags[r])try{await this.requestPermission(r),Object(o.i)(()=>{this.pluginsTags[r]=!0,this.pluginViews.push(t)})}catch(t){}else this.pluginViews.push(t)}async showRepair(){this.focusRepair=!0,this.show("profile"),localStorage.setItem("user-checkout-old-data","true")}blurRepair(){this.focusRepair=!1}requestPermission(t){switch(t){case"side-bookmarks":return a.a.request(["bookmarks"],["chrome://favicon/"]);case"side-extension":case"chrome-apps":return a.a.request(["management"]);case"side-history":return a.a.request(["history"],["chrome://favicon/"])}}hideLast(){const t=this.pluginViews.pop();return 0===this.pluginViews.length&&document.getElementsByTagName("newtab-main")[0].shadowRoot.querySelector(".swiper-content").style.setProperty("transform","none"),t}}l([o.g],h.prototype,"pluginsTags",void 0),l([o.b],h.prototype,"initDom",null),l([o.g],h.prototype,"pluginViews",void 0),l([o.g],h.prototype,"focusRepair",void 0),l([o.b],h.prototype,"show",null),l([o.b],h.prototype,"showRepair",null),l([o.b],h.prototype,"blurRepair",null),l([o.b],h.prototype,"hideLast",null);const p=new h},,,function(t,e,r){t.exports=r.p+"images/error.f782e7c.png"},function(t,e,r){t.exports=r.p+"images/remind.896ff6f.png"},function(t,e,r){"use strict";r(17),r(19);var n=r(1),i=function(t,e,r,n){var i,o=arguments.length,a=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,r,a):i(e,r))||a);return o>3&&a&&Object.defineProperty(e,r,a),a};let o=class extends n.a{constructor(){super(...arguments),this.src=""}render(){return n.e`
      <div class="svg" style="-webkit-mask-image: url(${this.src})"></div>
    `}};o.styles=n.b`
    :host{
      display: block;
      width: 30px;
      height: 30px;
      --size: 100%;
      -webkit-mask-size: var(--size);
      -webkit-mask-position: center;
      -webkit-mask-repeat: no-repeat;
      color: black;
    }
    .svg{
      width: inherit;
      height: inherit;
      -webkit-mask-size: inherit;
      -webkit-mask-position: inherit;
      color: inherit;
      background-color: currentcolor;
      -webkit-mask-repeat: inherit;
    }
  `,i([Object(n.g)({type:String})],o.prototype,"src",void 0),o=i([Object(n.c)("i-svg")],o)},,,function(t,e,r){
/*!
 * Cropper.js v1.5.12
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2021-06-12T08:00:17.411Z
 */
t.exports=function(){"use strict";function t(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function e(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?t(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var c="undefined"!=typeof window&&void 0!==window.document,u=c?window:{},l=!(!c||!u.document.documentElement)&&"ontouchstart"in u.document.documentElement,h=!!c&&"PointerEvent"in u,p="".concat("cropper","-crop"),d="".concat("cropper","-disabled"),f="".concat("cropper","-hidden"),g="".concat("cropper","-hide"),m="".concat("cropper","-invisible"),y="".concat("cropper","-modal"),v="".concat("cropper","-move"),b="".concat("cropper","Action"),w="".concat("cropper","Preview"),x=l?"touchstart":"mousedown",k=l?"touchmove":"mousemove",S=l?"touchend touchcancel":"mouseup",O=h?"pointerdown":x,_=h?"pointermove":k,A=h?"pointerup pointercancel":S,T=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,j=/^data:/,C=/^data:image\/jpeg;base64,/,E=/^img|canvas$/i,L={viewMode:0,dragMode:"crop",initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},R=Number.isNaN||u.isNaN;function P(t){return"number"==typeof t&&!R(t)}var M=function(t){return t>0&&t<1/0};function I(t){return void 0===t}function D(t){return"object"===r(t)&&null!==t}var B=Object.prototype.hasOwnProperty;function U(t){if(!D(t))return!1;try{var e=t.constructor,r=e.prototype;return e&&r&&B.call(r,"isPrototypeOf")}catch(t){return!1}}function N(t){return"function"==typeof t}var z=Array.prototype.slice;function W(t){return Array.from?Array.from(t):z.call(t)}function q(t,e){return t&&N(e)&&(Array.isArray(t)||P(t.length)?W(t).forEach((function(r,n){e.call(t,r,n,t)})):D(t)&&Object.keys(t).forEach((function(r){e.call(t,t[r],r,t)}))),t}var $=Object.assign||function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return D(t)&&r.length>0&&r.forEach((function(e){D(e)&&Object.keys(e).forEach((function(r){t[r]=e[r]}))})),t},H=/\.\d*(?:0|9){12}\d*$/;function V(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return H.test(t)?Math.round(t*e)/e:t}var F=/^width|height|left|top|marginLeft|marginTop$/;function G(t,e){var r=t.style;q(e,(function(t,e){F.test(e)&&P(t)&&(t="".concat(t,"px")),r[e]=t}))}function K(t,e){if(e)if(P(t.length))q(t,(function(t){K(t,e)}));else if(t.classList)t.classList.add(e);else{var r=t.className.trim();r?r.indexOf(e)<0&&(t.className="".concat(r," ").concat(e)):t.className=e}}function Y(t,e){e&&(P(t.length)?q(t,(function(t){Y(t,e)})):t.classList?t.classList.remove(e):t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,"")))}function X(t,e,r){e&&(P(t.length)?q(t,(function(t){X(t,e,r)})):r?K(t,e):Y(t,e))}var J=/([a-z\d])([A-Z])/g;function Z(t){return t.replace(J,"$1-$2").toLowerCase()}function Q(t,e){return D(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(Z(e)))}function tt(t,e,r){D(r)?t[e]=r:t.dataset?t.dataset[e]=r:t.setAttribute("data-".concat(Z(e)),r)}var et=/\s\s*/,rt=function(){var t=!1;if(c){var e=!1,r=function(){},n=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(t){e=t}});u.addEventListener("test",r,n),u.removeEventListener("test",r,n)}return t}();function nt(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r;e.trim().split(et).forEach((function(e){if(!rt){var o=t.listeners;o&&o[e]&&o[e][r]&&(i=o[e][r],delete o[e][r],0===Object.keys(o[e]).length&&delete o[e],0===Object.keys(o).length&&delete t.listeners)}t.removeEventListener(e,i,n)}))}function it(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r;e.trim().split(et).forEach((function(e){if(n.once&&!rt){var o=t.listeners,a=void 0===o?{}:o;i=function(){delete a[e][r],t.removeEventListener(e,i,n);for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];r.apply(t,s)},a[e]||(a[e]={}),a[e][r]&&t.removeEventListener(e,a[e][r],n),a[e][r]=i,t.listeners=a}t.addEventListener(e,i,n)}))}function ot(t,e,r){var n;return N(Event)&&N(CustomEvent)?n=new CustomEvent(e,{detail:r,bubbles:!0,cancelable:!0}):(n=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,r),t.dispatchEvent(n)}function at(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var st=u.location,ct=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function ut(t){var e=t.match(ct);return null!==e&&(e[1]!==st.protocol||e[2]!==st.hostname||e[3]!==st.port)}function lt(t){var e="timestamp=".concat((new Date).getTime());return t+(-1===t.indexOf("?")?"?":"&")+e}function ht(t){var e=t.rotate,r=t.scaleX,n=t.scaleY,i=t.translateX,o=t.translateY,a=[];P(i)&&0!==i&&a.push("translateX(".concat(i,"px)")),P(o)&&0!==o&&a.push("translateY(".concat(o,"px)")),P(e)&&0!==e&&a.push("rotate(".concat(e,"deg)")),P(r)&&1!==r&&a.push("scaleX(".concat(r,")")),P(n)&&1!==n&&a.push("scaleY(".concat(n,")"));var s=a.length?a.join(" "):"none";return{WebkitTransform:s,msTransform:s,transform:s}}function pt(t,r){var n=t.pageX,i=t.pageY,o={endX:n,endY:i};return r?o:e({startX:n,startY:i},o)}function dt(t){var e=t.aspectRatio,r=t.height,n=t.width,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",o=M(n),a=M(r);if(o&&a){var s=r*e;"contain"===i&&s>n||"cover"===i&&s<n?r=n/e:n=r*e}else o?r=n/e:a&&(n=r*e);return{width:n,height:r}}function ft(t,e,r,n){var i=e.aspectRatio,o=e.naturalWidth,s=e.naturalHeight,c=e.rotate,u=void 0===c?0:c,l=e.scaleX,h=void 0===l?1:l,p=e.scaleY,d=void 0===p?1:p,f=r.aspectRatio,g=r.naturalWidth,m=r.naturalHeight,y=n.fillColor,v=void 0===y?"transparent":y,b=n.imageSmoothingEnabled,w=void 0===b||b,x=n.imageSmoothingQuality,k=void 0===x?"low":x,S=n.maxWidth,O=void 0===S?1/0:S,_=n.maxHeight,A=void 0===_?1/0:_,T=n.minWidth,j=void 0===T?0:T,C=n.minHeight,E=void 0===C?0:C,L=document.createElement("canvas"),R=L.getContext("2d"),P=dt({aspectRatio:f,width:O,height:A}),M=dt({aspectRatio:f,width:j,height:E},"cover"),I=Math.min(P.width,Math.max(M.width,g)),D=Math.min(P.height,Math.max(M.height,m)),B=dt({aspectRatio:i,width:O,height:A}),U=dt({aspectRatio:i,width:j,height:E},"cover"),N=Math.min(B.width,Math.max(U.width,o)),z=Math.min(B.height,Math.max(U.height,s)),W=[-N/2,-z/2,N,z];return L.width=V(I),L.height=V(D),R.fillStyle=v,R.fillRect(0,0,I,D),R.save(),R.translate(I/2,D/2),R.rotate(u*Math.PI/180),R.scale(h,d),R.imageSmoothingEnabled=w,R.imageSmoothingQuality=k,R.drawImage.apply(R,[t].concat(a(W.map((function(t){return Math.floor(V(t))}))))),R.restore(),L}var gt=String.fromCharCode,mt=/^data:.*,/;function yt(t){var e,r=new DataView(t);try{var n,i,o;if(255===r.getUint8(0)&&216===r.getUint8(1))for(var a=r.byteLength,s=2;s+1<a;){if(255===r.getUint8(s)&&225===r.getUint8(s+1)){i=s;break}s+=1}if(i){var c=i+10;if("Exif"===function(t,e,r){var n="";r+=e;for(var i=e;i<r;i+=1)n+=gt(t.getUint8(i));return n}(r,i+4,4)){var u=r.getUint16(c);if(((n=18761===u)||19789===u)&&42===r.getUint16(c+2,n)){var l=r.getUint32(c+4,n);l>=8&&(o=c+l)}}}if(o){var h,p,d=r.getUint16(o,n);for(p=0;p<d;p+=1)if(h=o+12*p+2,274===r.getUint16(h,n)){h+=8,e=r.getUint16(h,n),r.setUint16(h,1,n);break}}}catch(t){e=1}return e}var vt={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.options,r=this.container,n=this.cropper,i=Number(e.minContainerWidth),o=Number(e.minContainerHeight);K(n,f),Y(t,f);var a={width:Math.max(r.offsetWidth,i>=0?i:200),height:Math.max(r.offsetHeight,o>=0?o:100)};this.containerData=a,G(n,{width:a.width,height:a.height}),K(t,f),Y(n,f)},initCanvas:function(){var t=this.containerData,e=this.imageData,r=this.options.viewMode,n=Math.abs(e.rotate)%180==90,i=n?e.naturalHeight:e.naturalWidth,o=n?e.naturalWidth:e.naturalHeight,a=i/o,s=t.width,c=t.height;t.height*a>t.width?3===r?s=t.height*a:c=t.width/a:3===r?c=t.width/a:s=t.height*a;var u={aspectRatio:a,naturalWidth:i,naturalHeight:o,width:s,height:c};this.canvasData=u,this.limited=1===r||2===r,this.limitCanvas(!0,!0),u.width=Math.min(Math.max(u.width,u.minWidth),u.maxWidth),u.height=Math.min(Math.max(u.height,u.minHeight),u.maxHeight),u.left=(t.width-u.width)/2,u.top=(t.height-u.height)/2,u.oldLeft=u.left,u.oldTop=u.top,this.initialCanvasData=$({},u)},limitCanvas:function(t,e){var r=this.options,n=this.containerData,i=this.canvasData,o=this.cropBoxData,a=r.viewMode,s=i.aspectRatio,c=this.cropped&&o;if(t){var u=Number(r.minCanvasWidth)||0,l=Number(r.minCanvasHeight)||0;a>1?(u=Math.max(u,n.width),l=Math.max(l,n.height),3===a&&(l*s>u?u=l*s:l=u/s)):a>0&&(u?u=Math.max(u,c?o.width:0):l?l=Math.max(l,c?o.height:0):c&&(u=o.width,(l=o.height)*s>u?u=l*s:l=u/s));var h=dt({aspectRatio:s,width:u,height:l});u=h.width,l=h.height,i.minWidth=u,i.minHeight=l,i.maxWidth=1/0,i.maxHeight=1/0}if(e)if(a>(c?0:1)){var p=n.width-i.width,d=n.height-i.height;i.minLeft=Math.min(0,p),i.minTop=Math.min(0,d),i.maxLeft=Math.max(0,p),i.maxTop=Math.max(0,d),c&&this.limited&&(i.minLeft=Math.min(o.left,o.left+(o.width-i.width)),i.minTop=Math.min(o.top,o.top+(o.height-i.height)),i.maxLeft=o.left,i.maxTop=o.top,2===a&&(i.width>=n.width&&(i.minLeft=Math.min(0,p),i.maxLeft=Math.max(0,p)),i.height>=n.height&&(i.minTop=Math.min(0,d),i.maxTop=Math.max(0,d))))}else i.minLeft=-i.width,i.minTop=-i.height,i.maxLeft=n.width,i.maxTop=n.height},renderCanvas:function(t,e){var r=this.canvasData,n=this.imageData;if(e){var i=function(t){var e=t.width,r=t.height,n=t.degree;if(90==(n=Math.abs(n)%180))return{width:r,height:e};var i=n%90*Math.PI/180,o=Math.sin(i),a=Math.cos(i),s=e*a+r*o,c=e*o+r*a;return n>90?{width:c,height:s}:{width:s,height:c}}({width:n.naturalWidth*Math.abs(n.scaleX||1),height:n.naturalHeight*Math.abs(n.scaleY||1),degree:n.rotate||0}),o=i.width,a=i.height,s=r.width*(o/r.naturalWidth),c=r.height*(a/r.naturalHeight);r.left-=(s-r.width)/2,r.top-=(c-r.height)/2,r.width=s,r.height=c,r.aspectRatio=o/a,r.naturalWidth=o,r.naturalHeight=a,this.limitCanvas(!0,!1)}(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft),(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),this.limitCanvas(!1,!0),r.left=Math.min(Math.max(r.left,r.minLeft),r.maxLeft),r.top=Math.min(Math.max(r.top,r.minTop),r.maxTop),r.oldLeft=r.left,r.oldTop=r.top,G(this.canvas,$({width:r.width,height:r.height},ht({translateX:r.left,translateY:r.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,r=this.imageData,n=r.naturalWidth*(e.width/e.naturalWidth),i=r.naturalHeight*(e.height/e.naturalHeight);$(r,{width:n,height:i,left:(e.width-n)/2,top:(e.height-i)/2}),G(this.image,$({width:r.width,height:r.height},ht($({translateX:r.left,translateY:r.top},r)))),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvasData,r=t.aspectRatio||t.initialAspectRatio,n=Number(t.autoCropArea)||.8,i={width:e.width,height:e.height};r&&(e.height*r>e.width?i.height=i.width/r:i.width=i.height*r),this.cropBoxData=i,this.limitCropBox(!0,!0),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),i.width=Math.max(i.minWidth,i.width*n),i.height=Math.max(i.minHeight,i.height*n),i.left=e.left+(e.width-i.width)/2,i.top=e.top+(e.height-i.height)/2,i.oldLeft=i.left,i.oldTop=i.top,this.initialCropBoxData=$({},i)},limitCropBox:function(t,e){var r=this.options,n=this.containerData,i=this.canvasData,o=this.cropBoxData,a=this.limited,s=r.aspectRatio;if(t){var c=Number(r.minCropBoxWidth)||0,u=Number(r.minCropBoxHeight)||0,l=a?Math.min(n.width,i.width,i.width+i.left,n.width-i.left):n.width,h=a?Math.min(n.height,i.height,i.height+i.top,n.height-i.top):n.height;c=Math.min(c,n.width),u=Math.min(u,n.height),s&&(c&&u?u*s>c?u=c/s:c=u*s:c?u=c/s:u&&(c=u*s),h*s>l?h=l/s:l=h*s),o.minWidth=Math.min(c,l),o.minHeight=Math.min(u,h),o.maxWidth=l,o.maxHeight=h}e&&(a?(o.minLeft=Math.max(0,i.left),o.minTop=Math.max(0,i.top),o.maxLeft=Math.min(n.width,i.left+i.width)-o.width,o.maxTop=Math.min(n.height,i.top+i.height)-o.height):(o.minLeft=0,o.minTop=0,o.maxLeft=n.width-o.width,o.maxTop=n.height-o.height))},renderCropBox:function(){var t=this.options,e=this.containerData,r=this.cropBoxData;(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft),(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),this.limitCropBox(!1,!0),r.left=Math.min(Math.max(r.left,r.minLeft),r.maxLeft),r.top=Math.min(Math.max(r.top,r.minTop),r.maxTop),r.oldLeft=r.left,r.oldTop=r.top,t.movable&&t.cropBoxMovable&&tt(this.face,b,r.width>=e.width&&r.height>=e.height?"move":"all"),G(this.cropBox,$({width:r.width,height:r.height},ht({translateX:r.left,translateY:r.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),ot(this.element,"crop",this.getData())}},bt={initPreview:function(){var t=this.element,e=this.crossOrigin,r=this.options.preview,n=e?this.crossOriginUrl:this.url,i=t.alt||"The image to preview",o=document.createElement("img");if(e&&(o.crossOrigin=e),o.src=n,o.alt=i,this.viewBox.appendChild(o),this.viewBoxImage=o,r){var a=r;"string"==typeof r?a=t.ownerDocument.querySelectorAll(r):r.querySelector&&(a=[r]),this.previews=a,q(a,(function(t){var r=document.createElement("img");tt(t,w,{width:t.offsetWidth,height:t.offsetHeight,html:t.innerHTML}),e&&(r.crossOrigin=e),r.src=n,r.alt=i,r.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',t.innerHTML="",t.appendChild(r)}))}},resetPreview:function(){q(this.previews,(function(t){var e=Q(t,w);G(t,{width:e.width,height:e.height}),t.innerHTML=e.html,function(t,e){if(D(t[e]))try{delete t[e]}catch(r){t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch(r){t.dataset[e]=void 0}else t.removeAttribute("data-".concat(Z(e)))}(t,w)}))},preview:function(){var t=this.imageData,e=this.canvasData,r=this.cropBoxData,n=r.width,i=r.height,o=t.width,a=t.height,s=r.left-e.left-t.left,c=r.top-e.top-t.top;this.cropped&&!this.disabled&&(G(this.viewBoxImage,$({width:o,height:a},ht($({translateX:-s,translateY:-c},t)))),q(this.previews,(function(e){var r=Q(e,w),u=r.width,l=r.height,h=u,p=l,d=1;n&&(p=i*(d=u/n)),i&&p>l&&(h=n*(d=l/i),p=l),G(e,{width:h,height:p}),G(e.getElementsByTagName("img")[0],$({width:o*d,height:a*d},ht($({translateX:-s*d,translateY:-c*d},t))))})))}},wt={bind:function(){var t=this.element,e=this.options,r=this.cropper;N(e.cropstart)&&it(t,"cropstart",e.cropstart),N(e.cropmove)&&it(t,"cropmove",e.cropmove),N(e.cropend)&&it(t,"cropend",e.cropend),N(e.crop)&&it(t,"crop",e.crop),N(e.zoom)&&it(t,"zoom",e.zoom),it(r,O,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&it(r,"wheel",this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&it(r,"dblclick",this.onDblclick=this.dblclick.bind(this)),it(t.ownerDocument,_,this.onCropMove=this.cropMove.bind(this)),it(t.ownerDocument,A,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&it(window,"resize",this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.options,r=this.cropper;N(e.cropstart)&&nt(t,"cropstart",e.cropstart),N(e.cropmove)&&nt(t,"cropmove",e.cropmove),N(e.cropend)&&nt(t,"cropend",e.cropend),N(e.crop)&&nt(t,"crop",e.crop),N(e.zoom)&&nt(t,"zoom",e.zoom),nt(r,O,this.onCropStart),e.zoomable&&e.zoomOnWheel&&nt(r,"wheel",this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&nt(r,"dblclick",this.onDblclick),nt(t.ownerDocument,_,this.onCropMove),nt(t.ownerDocument,A,this.onCropEnd),e.responsive&&nt(window,"resize",this.onResize)}},xt={resize:function(){if(!this.disabled){var t,e,r=this.options,n=this.container,i=this.containerData,o=n.offsetWidth/i.width,a=n.offsetHeight/i.height,s=Math.abs(o-1)>Math.abs(a-1)?o:a;1!==s&&(r.restore&&(t=this.getCanvasData(),e=this.getCropBoxData()),this.render(),r.restore&&(this.setCanvasData(q(t,(function(e,r){t[r]=e*s}))),this.setCropBoxData(q(e,(function(t,r){e[r]=t*s})))))}},dblclick:function(){var t,e;this.disabled||"none"===this.options.dragMode||this.setDragMode((t=this.dragBox,e=p,(t.classList?t.classList.contains(e):t.className.indexOf(e)>-1)?"move":"crop"))},wheel:function(t){var e=this,r=Number(this.options.wheelZoomRatio)||.1,n=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){e.wheeling=!1}),50),t.deltaY?n=t.deltaY>0?1:-1:t.wheelDelta?n=-t.wheelDelta/120:t.detail&&(n=t.detail>0?1:-1),this.zoom(-n*r,t)))},cropStart:function(t){var e=t.buttons,r=t.button;if(!(this.disabled||("mousedown"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType)&&(P(e)&&1!==e||P(r)&&0!==r||t.ctrlKey))){var n,i=this.options,o=this.pointers;t.changedTouches?q(t.changedTouches,(function(t){o[t.identifier]=pt(t)})):o[t.pointerId||0]=pt(t),n=Object.keys(o).length>1&&i.zoomable&&i.zoomOnTouch?"zoom":Q(t.target,b),T.test(n)&&!1!==ot(this.element,"cropstart",{originalEvent:t,action:n})&&(t.preventDefault(),this.action=n,this.cropping=!1,"crop"===n&&(this.cropping=!0,K(this.dragBox,y)))}},cropMove:function(t){var e=this.action;if(!this.disabled&&e){var r=this.pointers;t.preventDefault(),!1!==ot(this.element,"cropmove",{originalEvent:t,action:e})&&(t.changedTouches?q(t.changedTouches,(function(t){$(r[t.identifier]||{},pt(t,!0))})):$(r[t.pointerId||0]||{},pt(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var e=this.action,r=this.pointers;t.changedTouches?q(t.changedTouches,(function(t){delete r[t.identifier]})):delete r[t.pointerId||0],e&&(t.preventDefault(),Object.keys(r).length||(this.action=""),this.cropping&&(this.cropping=!1,X(this.dragBox,y,this.cropped&&this.options.modal)),ot(this.element,"cropend",{originalEvent:t,action:e}))}}},kt={change:function(t){var r,n=this.options,i=this.canvasData,o=this.containerData,a=this.cropBoxData,s=this.pointers,c=this.action,u=n.aspectRatio,l=a.left,h=a.top,p=a.width,d=a.height,g=l+p,m=h+d,y=0,v=0,b=o.width,w=o.height,x=!0;!u&&t.shiftKey&&(u=p&&d?p/d:1),this.limited&&(y=a.minLeft,v=a.minTop,b=y+Math.min(o.width,i.width,i.left+i.width),w=v+Math.min(o.height,i.height,i.top+i.height));var k=s[Object.keys(s)[0]],S={x:k.endX-k.startX,y:k.endY-k.startY},O=function(t){switch(t){case"e":g+S.x>b&&(S.x=b-g);break;case"w":l+S.x<y&&(S.x=y-l);break;case"n":h+S.y<v&&(S.y=v-h);break;case"s":m+S.y>w&&(S.y=w-m)}};switch(c){case"all":l+=S.x,h+=S.y;break;case"e":if(S.x>=0&&(g>=b||u&&(h<=v||m>=w))){x=!1;break}O("e"),(p+=S.x)<0&&(c="w",l-=p=-p),u&&(d=p/u,h+=(a.height-d)/2);break;case"n":if(S.y<=0&&(h<=v||u&&(l<=y||g>=b))){x=!1;break}O("n"),d-=S.y,h+=S.y,d<0&&(c="s",h-=d=-d),u&&(p=d*u,l+=(a.width-p)/2);break;case"w":if(S.x<=0&&(l<=y||u&&(h<=v||m>=w))){x=!1;break}O("w"),p-=S.x,l+=S.x,p<0&&(c="e",l-=p=-p),u&&(d=p/u,h+=(a.height-d)/2);break;case"s":if(S.y>=0&&(m>=w||u&&(l<=y||g>=b))){x=!1;break}O("s"),(d+=S.y)<0&&(c="n",h-=d=-d),u&&(p=d*u,l+=(a.width-p)/2);break;case"ne":if(u){if(S.y<=0&&(h<=v||g>=b)){x=!1;break}O("n"),d-=S.y,h+=S.y,p=d*u}else O("n"),O("e"),S.x>=0?g<b?p+=S.x:S.y<=0&&h<=v&&(x=!1):p+=S.x,S.y<=0?h>v&&(d-=S.y,h+=S.y):(d-=S.y,h+=S.y);p<0&&d<0?(c="sw",h-=d=-d,l-=p=-p):p<0?(c="nw",l-=p=-p):d<0&&(c="se",h-=d=-d);break;case"nw":if(u){if(S.y<=0&&(h<=v||l<=y)){x=!1;break}O("n"),d-=S.y,h+=S.y,p=d*u,l+=a.width-p}else O("n"),O("w"),S.x<=0?l>y?(p-=S.x,l+=S.x):S.y<=0&&h<=v&&(x=!1):(p-=S.x,l+=S.x),S.y<=0?h>v&&(d-=S.y,h+=S.y):(d-=S.y,h+=S.y);p<0&&d<0?(c="se",h-=d=-d,l-=p=-p):p<0?(c="ne",l-=p=-p):d<0&&(c="sw",h-=d=-d);break;case"sw":if(u){if(S.x<=0&&(l<=y||m>=w)){x=!1;break}O("w"),p-=S.x,l+=S.x,d=p/u}else O("s"),O("w"),S.x<=0?l>y?(p-=S.x,l+=S.x):S.y>=0&&m>=w&&(x=!1):(p-=S.x,l+=S.x),S.y>=0?m<w&&(d+=S.y):d+=S.y;p<0&&d<0?(c="ne",h-=d=-d,l-=p=-p):p<0?(c="se",l-=p=-p):d<0&&(c="nw",h-=d=-d);break;case"se":if(u){if(S.x>=0&&(g>=b||m>=w)){x=!1;break}O("e"),d=(p+=S.x)/u}else O("s"),O("e"),S.x>=0?g<b?p+=S.x:S.y>=0&&m>=w&&(x=!1):p+=S.x,S.y>=0?m<w&&(d+=S.y):d+=S.y;p<0&&d<0?(c="nw",h-=d=-d,l-=p=-p):p<0?(c="sw",l-=p=-p):d<0&&(c="ne",h-=d=-d);break;case"move":this.move(S.x,S.y),x=!1;break;case"zoom":this.zoom(function(t){var r=e({},t),n=0;return q(t,(function(t,e){delete r[e],q(r,(function(e){var r=Math.abs(t.startX-e.startX),i=Math.abs(t.startY-e.startY),o=Math.abs(t.endX-e.endX),a=Math.abs(t.endY-e.endY),s=Math.sqrt(r*r+i*i),c=(Math.sqrt(o*o+a*a)-s)/s;Math.abs(c)>Math.abs(n)&&(n=c)}))})),n}(s),t),x=!1;break;case"crop":if(!S.x||!S.y){x=!1;break}r=at(this.cropper),l=k.startX-r.left,h=k.startY-r.top,p=a.minWidth,d=a.minHeight,S.x>0?c=S.y>0?"se":"ne":S.x<0&&(l-=p,c=S.y>0?"sw":"nw"),S.y<0&&(h-=d),this.cropped||(Y(this.cropBox,f),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}x&&(a.width=p,a.height=d,a.left=l,a.top=h,this.action=c,this.renderCropBox()),q(s,(function(t){t.startX=t.endX,t.startY=t.endY}))}},St={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&K(this.dragBox,y),Y(this.cropBox,f),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=$({},this.initialImageData),this.canvasData=$({},this.initialCanvasData),this.cropBoxData=$({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&($(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),Y(this.dragBox,y),K(this.cropBox,f)),this},replace:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,q(this.previews,(function(e){e.getElementsByTagName("img")[0].src=t})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,Y(this.cropper,d)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,K(this.cropper,d)),this},destroy:function(){var t=this.element;return t.cropper?(t.cropper=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,r=this.canvasData,n=r.left,i=r.top;return this.moveTo(I(t)?t:n+Number(t),I(e)?e:i+Number(e))},moveTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,r=this.canvasData,n=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(P(t)&&(r.left=t,n=!0),P(e)&&(r.top=e,n=!0),n&&this.renderCanvas(!0)),this},zoom:function(t,e){var r=this.canvasData;return t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(r.width*t/r.naturalWidth,null,e)},zoomTo:function(t,e,r){var n=this.options,i=this.canvasData,o=i.width,a=i.height,s=i.naturalWidth,c=i.naturalHeight;if((t=Number(t))>=0&&this.ready&&!this.disabled&&n.zoomable){var u=s*t,l=c*t;if(!1===ot(this.element,"zoom",{ratio:t,oldRatio:o/s,originalEvent:r}))return this;if(r){var h=this.pointers,p=at(this.cropper),d=h&&Object.keys(h).length?function(t){var e=0,r=0,n=0;return q(t,(function(t){var i=t.startX,o=t.startY;e+=i,r+=o,n+=1})),{pageX:e/=n,pageY:r/=n}}(h):{pageX:r.pageX,pageY:r.pageY};i.left-=(u-o)*((d.pageX-p.left-i.left)/o),i.top-=(l-a)*((d.pageY-p.top-i.top)/a)}else U(e)&&P(e.x)&&P(e.y)?(i.left-=(u-o)*((e.x-i.left)/o),i.top-=(l-a)*((e.y-i.top)/a)):(i.left-=(u-o)/2,i.top-=(l-a)/2);i.width=u,i.height=l,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return P(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,P(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(P(e)?e:1,t)},scale:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,r=this.imageData,n=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(P(t)&&(r.scaleX=t,n=!0),P(e)&&(r.scaleY=e,n=!0),n&&this.renderCanvas(!0,!0)),this},getData:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.options,n=this.imageData,i=this.canvasData,o=this.cropBoxData;if(this.ready&&this.cropped){t={x:o.left-i.left,y:o.top-i.top,width:o.width,height:o.height};var a=n.width/n.naturalWidth;if(q(t,(function(e,r){t[r]=e/a})),e){var s=Math.round(t.y+t.height),c=Math.round(t.x+t.width);t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=c-t.x,t.height=s-t.y}}else t={x:0,y:0,width:0,height:0};return r.rotatable&&(t.rotate=n.rotate||0),r.scalable&&(t.scaleX=n.scaleX||1,t.scaleY=n.scaleY||1),t},setData:function(t){var e=this.options,r=this.imageData,n=this.canvasData,i={};if(this.ready&&!this.disabled&&U(t)){var o=!1;e.rotatable&&P(t.rotate)&&t.rotate!==r.rotate&&(r.rotate=t.rotate,o=!0),e.scalable&&(P(t.scaleX)&&t.scaleX!==r.scaleX&&(r.scaleX=t.scaleX,o=!0),P(t.scaleY)&&t.scaleY!==r.scaleY&&(r.scaleY=t.scaleY,o=!0)),o&&this.renderCanvas(!0,!0);var a=r.width/r.naturalWidth;P(t.x)&&(i.left=t.x*a+n.left),P(t.y)&&(i.top=t.y*a+n.top),P(t.width)&&(i.width=t.width*a),P(t.height)&&(i.height=t.height*a),this.setCropBoxData(i)}return this},getContainerData:function(){return this.ready?$({},this.containerData):{}},getImageData:function(){return this.sized?$({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&q(["left","top","width","height","naturalWidth","naturalHeight"],(function(r){e[r]=t[r]})),e},setCanvasData:function(t){var e=this.canvasData,r=e.aspectRatio;return this.ready&&!this.disabled&&U(t)&&(P(t.left)&&(e.left=t.left),P(t.top)&&(e.top=t.top),P(t.width)?(e.width=t.width,e.height=t.width/r):P(t.height)&&(e.height=t.height,e.width=t.height*r),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,e=this.cropBoxData;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(t){var e,r,n=this.cropBoxData,i=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&U(t)&&(P(t.left)&&(n.left=t.left),P(t.top)&&(n.top=t.top),P(t.width)&&t.width!==n.width&&(e=!0,n.width=t.width),P(t.height)&&t.height!==n.height&&(r=!0,n.height=t.height),i&&(e?n.height=n.width/i:r&&(n.width=n.height*i)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,r=ft(this.image,this.imageData,e,t);if(!this.cropped)return r;var n=this.getData(),i=n.x,o=n.y,s=n.width,c=n.height,u=r.width/Math.floor(e.naturalWidth);1!==u&&(i*=u,o*=u,s*=u,c*=u);var l=s/c,h=dt({aspectRatio:l,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),p=dt({aspectRatio:l,width:t.minWidth||0,height:t.minHeight||0},"cover"),d=dt({aspectRatio:l,width:t.width||(1!==u?r.width:s),height:t.height||(1!==u?r.height:c)}),f=d.width,g=d.height;f=Math.min(h.width,Math.max(p.width,f)),g=Math.min(h.height,Math.max(p.height,g));var m=document.createElement("canvas"),y=m.getContext("2d");m.width=V(f),m.height=V(g),y.fillStyle=t.fillColor||"transparent",y.fillRect(0,0,f,g);var v=t.imageSmoothingEnabled,b=void 0===v||v,w=t.imageSmoothingQuality;y.imageSmoothingEnabled=b,w&&(y.imageSmoothingQuality=w);var x,k,S,O,_,A,T=r.width,j=r.height,C=i,E=o;C<=-s||C>T?(C=0,x=0,S=0,_=0):C<=0?(S=-C,C=0,_=x=Math.min(T,s+C)):C<=T&&(S=0,_=x=Math.min(s,T-C)),x<=0||E<=-c||E>j?(E=0,k=0,O=0,A=0):E<=0?(O=-E,E=0,A=k=Math.min(j,c+E)):E<=j&&(O=0,A=k=Math.min(c,j-E));var L=[C,E,x,k];if(_>0&&A>0){var R=f/s;L.push(S*R,O*R,_*R,A*R)}return y.drawImage.apply(y,[r].concat(a(L.map((function(t){return Math.floor(V(t))}))))),m},setAspectRatio:function(t){var e=this.options;return this.disabled||I(t)||(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var e=this.options,r=this.dragBox,n=this.face;if(this.ready&&!this.disabled){var i="crop"===t,o=e.movable&&"move"===t;t=i||o?t:"none",e.dragMode=t,tt(r,b,t),X(r,p,i),X(r,v,o),e.cropBoxMovable||(tt(n,b,t),X(n,p,i),X(n,v,o))}return this}},Ot=u.Cropper,_t=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n(this,t),!e||!E.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=$({},L,U(r)&&r),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}var e,r,o;return e=t,o=[{key:"noConflict",value:function(){return window.Cropper=Ot,t}},{key:"setDefaults",value:function(t){$(L,U(t)&&t)}}],(r=[{key:"init",value:function(){var t,e=this.element,r=e.tagName.toLowerCase();if(!e.cropper){if(e.cropper=this,"img"===r){if(this.isImg=!0,t=e.getAttribute("src")||"",this.originalUrl=t,!t)return;t=e.src}else"canvas"===r&&window.HTMLCanvasElement&&(t=e.toDataURL());this.load(t)}}},{key:"load",value:function(t){var e=this;if(t){this.url=t,this.imageData={};var r=this.element,n=this.options;if(n.rotatable||n.scalable||(n.checkOrientation=!1),n.checkOrientation&&window.ArrayBuffer)if(j.test(t))C.test(t)?this.read((i=t.replace(mt,""),o=atob(i),a=new ArrayBuffer(o.length),q(s=new Uint8Array(a),(function(t,e){s[e]=o.charCodeAt(e)})),a)):this.clone();else{var i,o,a,s,c=new XMLHttpRequest,u=this.clone.bind(this);this.reloading=!0,this.xhr=c,c.onabort=u,c.onerror=u,c.ontimeout=u,c.onprogress=function(){"image/jpeg"!==c.getResponseHeader("content-type")&&c.abort()},c.onload=function(){e.read(c.response)},c.onloadend=function(){e.reloading=!1,e.xhr=null},n.checkCrossOrigin&&ut(t)&&r.crossOrigin&&(t=lt(t)),c.open("GET",t,!0),c.responseType="arraybuffer",c.withCredentials="use-credentials"===r.crossOrigin,c.send()}else this.clone()}}},{key:"read",value:function(t){var e=this.options,r=this.imageData,n=yt(t),i=0,o=1,a=1;if(n>1){this.url=function(t,e){for(var r=[],n=new Uint8Array(t);n.length>0;)r.push(gt.apply(null,W(n.subarray(0,8192)))),n=n.subarray(8192);return"data:".concat(e,";base64,").concat(btoa(r.join("")))}(t,"image/jpeg");var s=function(t){var e=0,r=1,n=1;switch(t){case 2:r=-1;break;case 3:e=-180;break;case 4:n=-1;break;case 5:e=90,n=-1;break;case 6:e=90;break;case 7:e=90,r=-1;break;case 8:e=-90}return{rotate:e,scaleX:r,scaleY:n}}(n);i=s.rotate,o=s.scaleX,a=s.scaleY}e.rotatable&&(r.rotate=i),e.scalable&&(r.scaleX=o,r.scaleY=a),this.clone()}},{key:"clone",value:function(){var t=this.element,e=this.url,r=t.crossOrigin,n=e;this.options.checkCrossOrigin&&ut(e)&&(r||(r="anonymous"),n=lt(e)),this.crossOrigin=r,this.crossOriginUrl=n;var i=document.createElement("img");r&&(i.crossOrigin=r),i.src=n||e,i.alt=t.alt||"The image to crop",this.image=i,i.onload=this.start.bind(this),i.onerror=this.stop.bind(this),K(i,g),t.parentNode.insertBefore(i,t.nextSibling)}},{key:"start",value:function(){var t=this,e=this.image;e.onload=null,e.onerror=null,this.sizing=!0;var r=u.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(u.navigator.userAgent),n=function(e,r){$(t.imageData,{naturalWidth:e,naturalHeight:r,aspectRatio:e/r}),t.initialImageData=$({},t.imageData),t.sizing=!1,t.sized=!0,t.build()};if(!e.naturalWidth||r){var i=document.createElement("img"),o=document.body||document.documentElement;this.sizingImage=i,i.onload=function(){n(i.width,i.height),r||o.removeChild(i)},i.src=e.src,r||(i.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",o.appendChild(i))}else n(e.naturalWidth,e.naturalHeight)}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var t=this.element,e=this.options,r=this.image,n=t.parentNode,i=document.createElement("div");i.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var o=i.querySelector(".".concat("cropper","-container")),a=o.querySelector(".".concat("cropper","-canvas")),s=o.querySelector(".".concat("cropper","-drag-box")),c=o.querySelector(".".concat("cropper","-crop-box")),u=c.querySelector(".".concat("cropper","-face"));this.container=n,this.cropper=o,this.canvas=a,this.dragBox=s,this.cropBox=c,this.viewBox=o.querySelector(".".concat("cropper","-view-box")),this.face=u,a.appendChild(r),K(t,f),n.insertBefore(o,t.nextSibling),this.isImg||Y(r,g),this.initPreview(),this.bind(),e.initialAspectRatio=Math.max(0,e.initialAspectRatio)||NaN,e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,K(c,f),e.guides||K(c.getElementsByClassName("".concat("cropper","-dashed")),f),e.center||K(c.getElementsByClassName("".concat("cropper","-center")),f),e.background&&K(o,"".concat("cropper","-bg")),e.highlight||K(u,m),e.cropBoxMovable&&(K(u,v),tt(u,b,"all")),e.cropBoxResizable||(K(c.getElementsByClassName("".concat("cropper","-line")),f),K(c.getElementsByClassName("".concat("cropper","-point")),f)),this.render(),this.ready=!0,this.setDragMode(e.dragMode),e.autoCrop&&this.crop(),this.setData(e.data),N(e.ready)&&it(t,"ready",e.ready,{once:!0}),ot(t,"ready")}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),Y(this.element,f))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}])&&i(e.prototype,r),o&&i(e,o),t}();return $(_t.prototype,vt,bt,wt,xt,kt,St),_t}()},function(t,e,r){t.exports=r.p+"images/color.321ebce.jpg"},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){"use strict";r(17),r(19);var n=r(1),i=function(t,e,r,n){var i,o=arguments.length,a=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,r,a):i(e,r))||a);return o>3&&a&&Object.defineProperty(e,r,a),a};let o=class extends n.a{constructor(){super(...arguments),this.type="",this.iconfont=!1}render(){return this.iconfont?n.e`
        <svg part="svg">
          <use href="${r(646)}#${this.type}" style=${this.color?`fill: ${this.color};`:""}></use>
        </svg>
      `:n.e`
        <svg part="svg">
          <use href="${r(647)}#${this.type}"></use>
        </svg>
      `}};o.styles=n.b`
    :host {
      display: inline-flex;
      justify-content: center;
      align-items: center;
      width: 20px;
      height: 20px;
      color: #333;
    }
    svg {
      width: inherit;
      height: inherit;
      color: inherit;
      fill: currentColor;
    }
  `,i([Object(n.g)({type:String})],o.prototype,"type",void 0),i([Object(n.g)({type:Boolean})],o.prototype,"iconfont",void 0),i([Object(n.g)({type:String})],o.prototype,"color",void 0),o=i([Object(n.c)("i-usesvg")],o)},,function(t,e,r){"use strict";var n=r(15),i=r.n(n),o=(r(17),r(19),r(11),r(1)),a=r(505),s=(r(610),o.b`:host {
  display: block;
  position: relative;
  z-index: 999;
}
.color-pick-list {
  width: 100%;
  box-sizing: border-box;
  padding: 1px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  backface-visibility: hidden;
}
.color-item {
  position: relative;
  width: 18px;
  height: 18px;
  box-sizing: border-box;
  border-radius: 6px;
  cursor: pointer;
  background-color: currentColor;
}
.color-item::before {
  content: "";
  display: none;
  width: 0px;
  height: 0px;
  color: #fff;
  border-width: 0px 0px 2px 2px;
  padding: 3px 3px 3px 6px;
  border-style: solid;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -78%) rotate(-45deg);
}
.color-item.active::before {
  display: block;
}
.color-item.transparent {
  color: #ddd !important;
  background-position: 0 0, 5px 5px;
  background-size: 10px 10px;
  background-image: linear-gradient(45deg, #fff 25%, transparent 0, transparent 75%, #fff 0), linear-gradient(45deg, #fff 25%, transparent 0, transparent 75%, #fff 0);
}
.color-item.transparent i-svg {
  color: #fff !important;
  background: #ddd !important;
}
.color-item.transparent.active {
  background: #ddd;
  background-image: none;
}
.color-picker {
  position: absolute;
  bottom: 30px;
  right: 0;
  transform-origin: bottom right;
}
.side {
  transform: scale(calc(1 / var(--side-ratio)));
}
`),c=r(614),u=r.n(c),l=function(t,e,r,n){var i,o=arguments.length,a=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,r,a):i(e,r))||a);return o>3&&a&&Object.defineProperty(e,r,a),a};let h=class extends o.a{constructor(){super(...arguments),this.value="",this.offsetRight=0,this.side=!1,this.name="",this.colors=["rgba(255,71,52,1)","rgba(255,122,9,1)","rgba(255,207,12,1)","rgba(42,233,121,1)","rgba(44,214,223,1)","rgba(0,116,255,1)","rgba(138,49,255,1)","transparent"],this.pickerStatus=!1,this.activeIndex=-1,this._close_picker_lock=!1,this._preClosePicker=()=>{this._close_picker_lock&&(this._close_picker_lock=!1)},this._postClosePicker=()=>{this._close_picker_lock||this._closePicker()},this._closePicker=()=>{this.pickerStatus=!1}}firstUpdated(){this._importColor(),this.resetActiveIndex(),window.addEventListener("mousedown",this._preClosePicker),window.addEventListener("mouseup",this._postClosePicker)}disconnectedCallback(){this._closePicker(),window.removeEventListener("mousedown",this._preClosePicker),window.removeEventListener("mouseup",this._postClosePicker),super.disconnectedCallback()}resetActiveIndex(){this.activeIndex=this.colors.findIndex(t=>t===this.value)}_importColor(){const t=document.querySelector("#script-vue"),e=document.querySelector("#script-color");if(!t){const t=document.createElement("script");t.src="/vendor/vue.min.js",t.id="script-vue",t.onload=()=>{if(!e){const t=document.createElement("script");t.src="/vendor/color-picker.min.js",t.id="script-color",document.body.append(t)}},document.body.append(t)}}_showPicker(t){t.stopPropagation(),this.pickerStatus=!0,"transparent"===this.value&&(this.value="#ff4734",this.activeIndex=-1,this._emitChange())}_pickColor(t){if(t instanceof CustomEvent){const{rgba:e}=t.detail[0],{r:r,g:n,b:i,a:o}=e;this.value=`rgba(${[r,n,i,o].join(",")})`,this.activeIndex=-1,this._emitChange()}}_pickThisColor(t){this.value=this.colors[t],this.activeIndex=t,this._emitChange()}_emitChange(){const t=new CustomEvent("on-change",{detail:{value:this.value}});this.dispatchEvent(t)}async performUpdate(){this.resetActiveIndex(),super.performUpdate()}updated(t){if(t.has("pickerStatus")&&!0===this.pickerStatus)try{this.$colorPicker.scrollIntoView({block:"nearest",behavior:"smooth"})}catch(t){}}render(){return o.e`
      <section class="color-pick-list">
        ${this.colors.map((t,e)=>o.e`<span
            @click="${()=>this._pickThisColor(e)}"
            class="${Object(a.a)({active:e===this.activeIndex,"color-item":!0,transparent:"transparent"===t})}"
            style="color:${i()(t).call(t,"255,255,255")?"rgb(221,221,221)":t};"
          >
          </span>`)}
        <span
          @click="${this._showPicker}"
          class="color-item color-dropper ${-1===this.activeIndex&&this.value?"active":""}"
          style="background: url(${u.a}) no-repeat center; background-size: contain;"
        >
        </span>
      </section>
      <section
        @click="${t=>{t.stopPropagation()}}"
        class="color-picker ${this.side?"side":""}"
        .hidden=${!this.pickerStatus}
        style="margin-right:${this.offsetRight}px"
      >
        ${this.pickerStatus?o.e` <color-picker
              @mousedown=${t=>{t.stopPropagation(),this._close_picker_lock=!0}}
              value="${this.value}"
              @input="${this._pickColor}"
            ></color-picker>`:null}
      </section>
    `}};h.styles=s,l([Object(o.g)({type:String})],h.prototype,"value",void 0),l([Object(o.g)({type:Number})],h.prototype,"offsetRight",void 0),l([Object(o.g)({type:Boolean})],h.prototype,"side",void 0),l([Object(o.g)({type:String})],h.prototype,"name",void 0),l([Object(o.g)({type:Array})],h.prototype,"colors",void 0),l([Object(o.f)()],h.prototype,"pickerStatus",void 0),l([Object(o.f)()],h.prototype,"activeIndex",void 0),l([Object(o.h)(".color-picker")],h.prototype,"$colorPicker",void 0),h=l([Object(o.c)("i-colorpicker")],h)},,function(t,e,r){t.exports=r.p+"images/iconfont.919d651.svg"},function(t,e,r){t.exports=r.p+"images/icon.196b87f.svg"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){"use strict";r.r(e),r.d(e,"SettingProfile",(function(){return _}));var n=r(55),i=r.n(n),o=(r(11),r(1)),a=r(769),s=r(37),c=r(144),u=r(2),l=r(523),h=r(128),p=r(162),d=r(210),f=(r(643),o.b`.wrapper {
  display: flex;
  height: 100%;
  width: 100%;
  justify-content: center;
  align-items: center;
}
.wrapper .container {
  display: flex;
}
.wrapper .form {
  box-sizing: border-box;
  width: 450px;
  padding: 60px;
  background: #f9f9f9;
  border-radius: 6px 0px 0px 6px;
}
.wrapper .bg {
  width: 400px;
}
.wrapper .bg img {
  width: 100%;
  height: 100%;
}
.large-title {
  margin: 0;
  margin-bottom: 2px;
  font-size: 30px;
  font-weight: 600;
  color: #333;
  line-height: 42px;
}
.large-title + p {
  margin: 0;
  color: #333;
  font-size: 16px;
  font-weight: 300;
  line-height: 22px;
}
.form-control {
  margin-top: 64px;
}
.form-control infinito-button {
  --button-color: #333;
  margin-top: 26px;
  width: 100%;
  height: 52px;
}
.form-control .cancel {
  display: block;
  margin: 0;
  font-size: 16px;
  color: #333;
  text-decoration: none;
  text-align: center;
  cursor: pointer;
}
infinito-input {
  --border-color: #999;
  margin-bottom: 24px;
}
.radio-control {
  display: flex;
}
.radio-control > span {
  font-size: 14px;
  margin-right: 24px;
}
.radio-control infinito-radio-group {
  flex: 1;
}
.radio-control .radio-content {
  display: flex;
}
.radio-control .radio-content p {
  margin: 0;
  margin-right: 6px;
}
.register-wrapper .register-form {
  padding: 45px 60px;
}
.register-wrapper .form-control {
  margin-top: 45px;
}
.register-wrapper .form-control infinito-button {
  margin-top: -4px;
}
.setting-wrapper .large-title {
  font-size: 23px;
  text-align: center;
  line-height: 32px;
}
.setting-wrapper .setting-form {
  padding: 45px 60px 40px;
}
.setting-wrapper .form-control {
  margin-top: 24px;
}
.setting-wrapper .form-control infinito-button {
  margin: 40px 0 30px;
  --font-size: 16px;
}
.setting-wrapper .upload-input-control {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-bottom: 16px;
}
.setting-wrapper .upload-input-control .border {
  position: relative;
  width: 64px;
  height: 64px;
  margin-bottom: 14px;
  border-radius: 50%;
  background: #ececec;
  overflow: hidden;
  cursor: pointer;
}
.setting-wrapper .upload-input-control .border input,
.setting-wrapper .upload-input-control .border .loading {
  width: 100%;
  height: 100%;
  outline: none;
  border: none;
  background: none;
  opacity: 0;
  cursor: pointer;
}
.setting-wrapper .upload-input-control .border .loading {
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.5);
  position: absolute;
  top: 0;
  z-index: 2;
  opacity: 1;
}
.setting-wrapper .upload-input-control .border .loading i-svg {
  color: #fff;
  width: 35px;
  height: 35px;
}
.setting-wrapper .upload-input-control .border .avatar {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  border-radius: 50%;
}
.setting-wrapper .upload-input-control .border + span {
  font-size: 14px;
}
.email-wrapper {
  display: flex;
  align-items: center;
  margin-bottom: 24px;
}
.email-wrapper infinito-input {
  margin: 0;
  flex: 1;
}
.email-wrapper infinito-button {
  --button-color: none;
  --border-color: #999;
  --font-color: #999;
  width: auto;
  min-width: 90px;
  margin: 0;
  margin-left: 10px;
}
`),g=r(780),m=r.n(g),y=r(957),v=r.n(y),b=r(958),w=r.n(b),x=r(779),k=r.n(x),S=r(12),O=function(t,e,r,n){var i,o=arguments.length,a=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,r,a):i(e,r))||a);return o>3&&a&&Object.defineProperty(e,r,a),a};let _=class extends o.a{constructor(){super(),this.cropper=null,this.preViewImgData=null,this.gender="x",this.avatar="",this.avatarKey="",this.userInfo={},this.error="",this.loading=!1,this.uploadLoading=!1,document.title=Object(u.i18n)("settings")}async firstUpdated(){const{data:t,error:e}=await S.k.read();!e&&t&&(this.userInfo=t.userInfo,this.initCropper())}render(){const{avatar:t="",name:e=""}=this.userInfo;return o.e`
      <div class="wrapper setting-wrapper">
        <div class="container">
          <div class="form setting-form">
            <div>
              <h2 class="large-title">${Object(u.i18n)("setting_your_avatar_nickname")}</h2>
            </div>
            <div class="form-control">
              <div class="upload-input-control">
                <div class="border">
                  ${this.avatar?o.e`<div class="avatar" style="background: url(${this.avatar}); background-size: cover;"></div>`:o.e`<img class="avatar" .src=${t||p.g} />`}
                  <input
                    type="file"
                    name="avatar"
                    @change=${this.chooseImage}
                    @drop=${this.chooseImage}
                    accept="image/png, image/jpeg"
                  />
                  ${this.uploadLoading?o.e`
                        <div class="loading">
                          <i-svg src=${k.a}></i-svg>
                        </div>
                      `:null}
                </div>
                <span>${Object(u.i18n)("please_chose_picture")}</span>
              </div>
              <div class="input-control">
                <infinito-input
                  name="username"
                  placeholder="${Object(u.i18n)("please_enter_nickname")}"
                  .value=${e}
                  .error="${this.error}"
                  @onfocus=${()=>{this.error=""}}
                >
                </infinito-input>
              </div>
              <!-- <div class="radio-control">
                <span>${Object(u.i18n)("gender")}</span>
                <infinito-radio-group selected="${this.gender}" @on-change=${this.radioChange}>
                  <infinito-radio value="male">
                    <div class="radio-content">
                      <p>${Object(u.i18n)("male")}</p>
                      <img .src=${v.a} />
                    </div>
                  </infinito-radio>
                  <infinito-radio value="female">
                    <div class="radio-content">
                      <p>${Object(u.i18n)("female")}</p>
                      <img .src=${w.a} />
                    </div>
                  </infinito-radio>
                  <infinito-radio value="x">${Object(u.i18n)("none")}</infinito-radio>
                </infinito-radio-group>
              </div> -->
              <infinito-button primary @click="${this.handleClick}" .loading=${this.loading}>
                ${Object(u.i18n)("confirm")}
              </infinito-button>
              <p class="cancel" @click="${this.handleCancel}">${Object(u.i18n)("skip")}</p>
            </div>
          </div>
          <div
            class="bg register-bg"
            style=${Object(a.a)({backgroundImage:`url(${m.a})`,backgroundSize:"cover"})}
          ></div>
        </div>
      </div>
    `}initCropper(){this.cropper=l.a.create({title:Object(u.i18n)("edit_avatar"),needBackground:!0}),this.cropper.addEventListener("on-change",async t=>{const{data:e}=t.detail;this.preViewImgData=e;const r=this.avatar;this.avatar=i.a.createObjectURL(this.preViewImgData),i.a.revokeObjectURL(r),setTimeout(()=>{this.uploadAvatar()},500)})}chooseImage(){const t=this.avatarInput.files[0];if(!("image/jpeg"===t.type||"image/png"===t.type))return h.message.error(Object(u.i18n)("please_chose_picture")),void(this.avatarInput.value="");if(!(t.size/1024/1024<2))return h.message.error(Object(u.i18n)("oversize")),void(this.avatarInput.value="");const e=new FileReader;e.readAsDataURL(t),this.avatarInput.value=null,e.onload=()=>{this.cropper.init(e.result),this.cropper.show()}}async uploadAvatar(){this.uploadLoading=!0;const t=await s.g.uploadAvatar(this.preViewImgData);0===(null==t?void 0:t.code)?this.avatarKey=t.data.key:(this.avatar="",this.preViewImgData=null,h.message.error(Object(u.i18n)("upload_avatar_failure"))),this.uploadLoading=!1}radioChange(t){this.gender=t.detail.selected}async handleClick(){if(this.loading)return;const t=this.userInput.value;if(!t)return void(this.error=Object(u.i18n)("username_cannot_empty"));const e={name:t,gender:this.gender,avatar:this.avatarKey};this.loading=!0;try{const t=await s.g.updateProfile(e),{data:r,error:n}=await S.k.read();if(n)throw n;if(0===(null==t?void 0:t.code)){const{user:e}=t.data,{error:n}=await S.k.update({userInfo:Object.assign(Object.assign({},r.userInfo),e)});if(n)throw n;d.slave.sendMessage("tabs-sync",S.k.key),Object(c.d)()}else h.message.error(Object(u.i18n)("update_data_failure"))}catch(t){h.message.error(t.message)}this.loading=!1}handleCancel(){Object(c.d)()}};_.styles=f,O([Object(o.h)('infinito-input[name="username"]')],_.prototype,"userInput",void 0),O([Object(o.h)('input[name="avatar"]')],_.prototype,"avatarInput",void 0),O([Object(o.g)({type:String})],_.prototype,"gender",void 0),O([Object(o.g)({type:String})],_.prototype,"avatar",void 0),O([Object(o.g)({type:String})],_.prototype,"avatarKey",void 0),O([Object(o.g)({type:Object})],_.prototype,"userInfo",void 0),O([Object(o.g)({type:String})],_.prototype,"error",void 0),O([Object(o.g)({type:Boolean})],_.prototype,"loading",void 0),O([Object(o.g)({type:Boolean})],_.prototype,"uploadLoading",void 0),_=O([Object(o.c)("setting-profile")],_)},,,,,,,,,,,function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(157);
/**
 * @license
 * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const i=new WeakMap,o=Object(n.e)(t=>e=>{if(!(e instanceof n.a)||e instanceof n.c||"style"!==e.committer.name||e.committer.parts.length>1)throw new Error("The `styleMap` directive must be used in the style attribute and must be the only part in the attribute.");const{committer:r}=e,{style:o}=r.element;let a=i.get(e);void 0===a&&(o.cssText=r.strings.join(" "),i.set(e,a=new Set)),a.forEach(e=>{e in t||(a.delete(e),-1===e.indexOf("-")?o[e]=null:o.removeProperty(e))});for(const e in t)a.add(e),-1===e.indexOf("-")?o[e]=t[e]:o.setProperty(e,t[e])})},,,,,,,,,,function(t,e,r){t.exports=r.p+"images/spin.f9360d9.svg"},function(t,e,r){t.exports=r.p+"images/user-bg3.85b6f67.png"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){t.exports=r.p+"images/boy.a9d76a0.svg"},function(t,e,r){t.exports=r.p+"images/girl.7feefef.svg"}]]);