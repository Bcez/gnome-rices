(window.webpackJsonp=window.webpackJsonp||[]).push([[15,7,35,37,38,40],Array(37).concat([function(e,t,i){"use strict";i.d(t,"i",(function(){return o})),i.d(t,"d",(function(){return r})),i.d(t,"h",(function(){return I})),i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return a})),i.d(t,"g",(function(){return s})),i.d(t,"e",(function(){return c})),i.d(t,"f",(function(){return Fe})),i.d(t,"c",(function(){return l}));var o={};i.r(o),i.d(o,"getLocalCity",(function(){return h})),i.d(o,"getForecastWeather",(function(){return u})),i.d(o,"getCityList",(function(){return g}));var r={};i.r(r),i.d(r,"getSearchSuggest",(function(){return w})),i.d(r,"getEnginesList",(function(){return x}));var n={};i.r(n),i.d(n,"getIcon",(function(){return M})),i.d(n,"getUrlInfoWithPermission",(function(){return B})),i.d(n,"getUrlIcon",(function(){return W})),i.d(n,"getFetchiconUrls",(function(){return G})),i.d(n,"getLogoList",(function(){return V})),i.d(n,"getRedirectTargets",(function(){return q}));var a={};i.r(a),i.d(a,"getUnreadEmails",(function(){return Q}));var s={};i.r(s),i.d(s,"register",(function(){return J})),i.d(s,"login",(function(){return ee})),i.d(s,"updateProfile",(function(){return te})),i.d(s,"getUserProfile",(function(){return ie})),i.d(s,"uploadAvatar",(function(){return oe})),i.d(s,"modifyPassword",(function(){return re})),i.d(s,"forgetPassword",(function(){return ne})),i.d(s,"resetPassword",(function(){return ae})),i.d(s,"getEmailCode",(function(){return se})),i.d(s,"getRegisterCode",(function(){return le})),i.d(s,"inspceCode",(function(){return ce})),i.d(s,"checkTokenIsExpired",(function(){return de})),i.d(s,"deleteAccount",(function(){return pe})),i.d(s,"loginWithUid",(function(){return he})),i.d(s,"v1BasicLogin",(function(){return ue})),i.d(s,"getMobileUid",(function(){return ge})),i.d(s,"getMobileloginUrl",(function(){return fe})),i.d(s,"checkMobileloginUrl",(function(){return me})),i.d(s,"sendPhoneCode",(function(){return be})),i.d(s,"sendEmailCode",(function(){return ye})),i.d(s,"bindEmail",(function(){return ve})),i.d(s,"bindPhoneNumber",(function(){return we})),i.d(s,"unbindEmail",(function(){return xe})),i.d(s,"unbindPhoneNumber",(function(){return _e})),i.d(s,"verifyPhoneVCode",(function(){return Ae})),i.d(s,"ThirdLoginType",(function(){return Se})),i.d(s,"bindThird",(function(){return ke})),i.d(s,"unbindThird",(function(){return Oe})),i.d(s,"getAreaCodeList",(function(){return Ie})),i.d(s,"verifyPassword",(function(){return $e})),i.d(s,"geVerifyTokenImg",(function(){return Ee}));var l={};i.r(l),i.d(l,"getRepairConcat",(function(){return Ce})),i.d(l,"postErrorCollect",(function(){return Te})),i.d(l,"sendLog",(function(){return je}));var c={};i.r(c),i.d(c,"getSyncList",(function(){return Ne})),i.d(c,"getSyncDetail",(function(){return Me})),i.d(c,"autoBackup",(function(){return De})),i.d(c,"manualBackup",(function(){return Ue})),i.d(c,"getV2DataFromV1",(function(){return Be}));i(11);var d=i(0),p=i(3);const h=async()=>{try{const e=await p.a.get(d.A+"/city/locate",{lang:d.D.lang},{timeout:1e4});if(e&&e.city)return{data:e.city}}catch(e){return{error:e}}},u=async e=>{try{return{data:(await p.a.get(d.A+"/weather/forecast",{lang:d.D.lang,cid:e},{timeout:1e4})).forecast}}catch(e){return{error:e}}},g=async e=>{try{return{data:await p.a.get(d.A+"/city/list",{lang:d.D.lang,searchkey:e},{timeout:1e4})}}catch(e){return{error:e}}};i(31);var f=i(26),m=i(120),b=i.n(m),y=i(316),v=i.n(y);const w=async e=>d.D.isZh?d.h||d.s?A(e):k(e):d.h||d.s?S(e):O(e),x=async e=>{let t=d.q?36e5:6e4;e||(t=0);try{if(!f.a.requestFirefoxThrottle("/search/list",t,!0))return{error:"request throttle error"};const i=await p.a.get(d.y+"/search/list",{lang:d.D.lang,platform:d.D.platform,platformVersion:d.D.platformVersion,edition:d.e,maybe360:d.G,version:e||""+Date.now()});if(0===i.code){const e=i.data.map(e=>{const t={};return t.name=e.name,t.uuid=e.seId,t.logo=e.logo,t.desc=e.desc,t.types=e.types,t.hide=e.hide,t});return f.a.requestFirefoxThrottle("/search/list",!0,!0),{data:{list:e,hash:b()(JSON.stringify(e)),meta:i.meta}}}if(2005===i.code)return f.a.requestFirefoxThrottle("/search/list",!0,!0),{error:i};throw i}catch(e){return{error:e}}},_=f.a.getLastReqValue(p.a.jsonp),A=async e=>{var t;try{const i=await _(d.b+"/su?ie=utf-8&p=3",{wd:e},{adapter:v.a,callbackParamName:"cb"});return{data:(null===(t=null==i?void 0:i.s)||void 0===t?void 0:t.map(e=>({text:e})))||[]}}catch(e){return{error:e}}},S=async e=>{var t;try{const i=await _(d.g+"/complete/search?client=chrome",{q:e},{adapter:v.a,callbackParamName:"jsonp"});return{data:(null==i?void 0:i.length)&&(null===(t=i[1])||void 0===t?void 0:t.length)?i[1].map(e=>({text:e})):[]}}catch(e){return{error:e}}},k=async e=>{try{const t=await p.a.get(d.b+"/su?p=3&ie=UTF-8&cb=",{wd:e},{_single:!0,_delay:0}),i=/s:(\[[\w\W]*\])/.exec(t),o=JSON.parse(i[1]);return{data:o.map(e=>({text:e}))}}catch(e){return{error:e}}},O=async e=>{try{const t=await p.a.get(d.g+"/complete/search?client=chrome",{q:e},{_single:!0,_delay:200});return{data:t[2].map((e,i)=>(e||(e=t[1][i]),{text:e}))}}catch(e){return{error:e}}};var I=i(160),$=i(7),E=i.n($),C=i(135),T=i.n(C),j=i(55),P=i.n(j),R=i(15),L=i.n(R);i(60),i(330),i(17),i(19),i(89);const N=d.D.lang,M=async({page:e=0,type:t,keyword:i,source:o}={})=>{try{const r=await p.a.get(d.x+"/get-icons",{lang:N,page:e,type:t,source:o,keyword:i},{_single:!0,_delay:200});if(r.success)return r.icons.forEach(e=>{if("infinity"===e.source)switch("infinity://wallpaper"===e.url&&(e.name="wallpaper_library"),e.url){case"infinity://wallpaper":case"infinity://weather":case"infinity://todos":case"infinity://notes":case"infinity://history":case"infinity://bookmarks":case"infinity://settings":e.name=i18n(e.name),e.description=i18n(e.description);break;case"infinity://extension":e.name=i18n(e.name),e.description=i18n(e.description,d.D.vendor)}e._footer=e.description||i18n("no_description")}),{data:r};throw r}catch(e){return{error:e}}},D=async e=>{try{const t=await p.a.get(d.y+"/icon/title",{url:e},{_single:!0,_delay:0,timeout:3e3});if(0===t.code)return{data:{name:t.data.title}};throw t}catch(e){return{error:e}}},U=/<title[^>]*>\s*(.*)\s*<\/title>/,B=e=>window.__INFINITY__.hasAllUrlPermission?new E.a(async t=>{let i=0;D(e).then(e=>{i+=1,e.error&&2!==i||t(e)}),(async e=>{try{const t=await p.a.get(e,{},{_single:"getUrlInfoFromFE",timeout:3e3,responseType:"text",_responseAll:!0}),i=t.data;if(i&&t.status>=200&&t.status<300){const e=i.indexOf("<title");if(e>0){const t=i.slice(e,e+200),o=U.exec(t),r=null==o?void 0:o[1];if(r)return{data:{name:r}}}}return{error:"error"}}catch(e){return{error:e}}})(e).then(e=>{i+=1,e.error&&2!==i||t(e)})}):new E.a(async t=>{t(await D(e))}),F=(e,t)=>{if(0===t.length)return t;const i=new Map,o=[];return e.forEach((e,t)=>{i.set(e,t)}),t.forEach(e=>{const t=i.get(e);o[t]=e}),o.filter(e=>!!e)},z=e=>new E.a(t=>{const i=()=>{const t=F(e,n),i=F(e,a),o=F(e,s);return t.concat(i,o)},o=e.length;let r=0;const n=[],a=[],s=[];e.forEach(e=>{const l=new Image;l.onload=function(){r+=1;const{width:l,height:c}=this,d=Math.max(l,c),p=Math.min(l,c);d/p<5?p>50&&d>100?n.push(e):p>50||d>100?a.push(e):s.push(e):s.push(e),r===o&&t(i())},l.onerror=()=>{r+=1,r===o&&t(i())},l.src=e}),setTimeout(()=>{t(i())},3e3)}),H=/\.(ico|png|jpg|jpeg|svg|webp)$/,W=async e=>{var t;try{const i=await p.a.get(e,{},{_single:"getUrlIcon",_delay:100,timeout:3e3,responseType:"text",_responseAll:!0}),o=i.data;if(o&&i.status>=200&&i.status<300){const r=(null===(t=i.request)||void 0===t?void 0:t.responseURL)||e;let n=((e,t)=>{const i=[];return t.replace(/<link [^>]*href=['"]([^'"]+)[^>]*/gi,(e,t)=>{i.push(t)}),T()(i).call(i,(t,i)=>{if(i&&H.test(i)){const o=new P.a(i,e);t.push(o.href)}return t},[])})(r,o);if(n.length<6){const e=((e,t)=>{const i=[];return t.replace(/<img [^>]*src=['"]([^'"]+)[^>]*/gi,(e,t)=>{i.push(t)}),T()(i).call(i,(t,i)=>{if(i&&H.test(i)){const o=new P.a(i,e);t.push(o.href)}return t},[])})(r,o);n=n.concat(e)}n.length>4&&(n.length=4);let a=await z(n);return a=Array.from(new Set(a)),a.length>2&&(a.length=2),{data:a}}return{error:""}}catch(e){return{error:e}}},G=async e=>{try{const{host:t}=new P.a(e),i=await p.a.get(d.y+"/icon/get_icon_urls",{host:t});return 0!==i.code?{error:i}:{data:i.data.map(e=>e.url)}}catch(e){return{error:e}}},V=async e=>{try{const{host:t}=new P.a(e);if(!L()(t).call(t,"."))return{data:[]};const i=await p.a.get(d.y+"/icon/get_logo_list",{host:t,limit:2},{_single:!0,_delay:100});return 0!==i.code?{error:i}:{data:i.data.map(e=>e.src)}}catch(e){return{error:e}}},q=async e=>{var t;let i=d.q?36e5:6e4;e||(i=0);try{if(!f.a.requestFirefoxThrottle("/icon/rt",i,!0))return{error:"request throttle error"};const o=await p.a.post(d.y+"/icon/rt",{version:e||""+Date.now()});return 0===o.code&&f.a.requestFirefoxThrottle("/icon/rt",!0,!0),0===o.code&&o.data?{data:{list:o.data,version:null===(t=o.meta)||void 0===t?void 0:t.version}}:{error:o}}catch(e){return{error:e}}};function Y(e){return e?e.textContent:null}function Q(e){return new E.a((t,i)=>{const o=new XMLHttpRequest;o.onreadystatechange=function(){var e,r;if(4==o.readyState)if(o.responseXML){const i=o.responseXML;let n=Y(i.querySelector("title"));if(n)try{n=/(\w+)@(\w+\.\w+)/.exec(n)[0]}catch(e){}const a=parseInt(Y(i.querySelector("fullcount")),10),s=i.querySelectorAll("entry"),l=[];let c=-1;for(let t=0,i=s.length;t<i;t++){const i=s[t],o={id:Y(i.querySelector("id")),issued:Y(i.querySelector("issued")),title:Y(i.querySelector("title")),summary:Y(i.querySelector("summary")),link:(e=i.querySelector("link"),r="href",e?e.getAttribute(r):null),authorName:Y(i.querySelector("author name")),authorEmail:Y(i.querySelector("author email"))};o.issued&&(o.issued=new Date(o.issued).valueOf(),c=Math.max(c,o.issued)),l.push(o)}t({account:n,lastIssuedTime:c,count:a,emails:l})}else i()},o.onerror=i,o.open("GET",function(e){return d.f+"/mail/feed/atom?zx="+encodeURIComponent(e)}(e),!0),o.send(null)})}var X=i(123),K=i.n(X),Z=i(12);const J=async({email:e,password:t,repeatPassword:i,code:o})=>{const r={email:K()(e).call(e),password:b()(t),repeatPassword:b()(i),code:K()(o).call(o)};try{return await p.a.post(d.y+"/user/register",r)}catch(e){return e}},ee=async({email:e,password:t,phone_number:i})=>{const o={email:e?K()(e).call(e):void 0,phone_number:i?K()(i).call(i):void 0,password:b()(t)};try{return await p.a.post(d.y+"/user/login",o)}catch(e){return e}};async function te(e){const{data:t}=await Z.k.read(),i=t.userInfo.uid;try{return await p.a.post(d.y+"/user/update_profile/"+i,e,{_auth:!0})}catch(e){throw new Error(e.message)}}async function ie(){try{return await p.a.get(d.y+"/user/get_user_profile",{},{_auth:!0,_proxy:!0})}catch(e){return e}}async function oe(e){const t=new FormData;t.append("file",e);try{const e=await p.a.post(d.y+"/upload/avatar",t,{_auth:!0,headers:{"Content-Type":"multipart/form-data"}});if(0===(null==e?void 0:e.code))return e;throw new Error(i18n("upload_avatar_failure"))}catch(e){throw new Error(e)}}async function re({originPassword:e,newPassword:t}){const{data:i}=await Z.k.read(),o=i.userInfo.uid,{token:r}=i;if(!r)throw new Error(i18n("unknown_mistake"));const n={originPassword:b()(e),newPassword:b()(t)};try{return await p.a.post(d.y+"/user/modify_password/"+o,n,{_auth:!0})}catch(e){return e}}async function ne(e){try{const t=await p.a.post(d.y+"/user/forget_password",e);return 0===t.code?{data:t.data}:{error:t}}catch(e){return{error:e}}}async function ae({password:e,repeatPassword:t,email:i,code:o,phone_number:r}){const n={password:b()(e),repeatPassword:b()(t),email:i?K()(i).call(i):void 0,code:K()(o).call(o),phone_number:r?K()(r).call(r):void 0};try{return await p.a.post(d.y+"/user/reset_password",n)}catch(e){return e}}async function se(e){try{const t=await p.a.post(`${d.y}/get_code2?lang=${d.D.lang}`,e,{withCredentials:!0});return 0===t.code?{data:t.data}:{error:t}}catch(e){return{error:e}}}async function le(e){try{return await p.a.post(`${d.y}/get_register_code2?lang=${d.D.lang}`,e,{withCredentials:!0})}catch(e){return e}}async function ce(e){try{return await p.a.post(d.y+"/inspce_code",e)}catch(e){return e}}async function de(){try{return await p.a.get(d.y+"/check_token",{},{_auth:!0})}catch(e){return e}}async function pe(){const{data:e}=await Z.k.read(),t=e.userInfo.uid;try{return await p.a.post(d.y+"/user/delete/"+t,{},{_auth:!0})}catch(e){return e}}const he=async e=>{try{return await p.a.post(d.y+"/user/login_uid",e,{timeout:1e4})}catch(e){return e}},ue=async e=>{try{return await p.a.post(d.y+"/user/v1_basic_login",e,{timeout:1e4})}catch(e){return e}},ge=async(e,t)=>{try{return await p.a.get(`${d.y}/user/user_hash?uid=${e}&secret=${t}`)}catch(e){return e}},fe=async()=>{try{const e=await p.a.get(d.y+"/login_code/mobile_code",{},{_auth:!0});return 0===e.code?{data:e.data}:{error:e}}catch(e){return{error:e}}},me=async(e,t)=>{try{const i=await p.a.post(d.y+"/login_code/check",{code:e,type:t},{_auth:!0});return 0===i.code?{data:i.data}:{error:i}}catch(e){return{error:e}}};async function be(e){try{const t=await p.a.post(d.y+"/phone/send_code",e,{withCredentials:!0});return 0===t.code?{data:t.data}:{error:t}}catch(e){return{error:e}}}async function ye(e){try{const t=await p.a.post(d.y+"/get_email_bind_code",e,{_auth:!0,withCredentials:!0});return 0===t.code?{data:t.data}:{error:t}}catch(e){return{error:e}}}async function ve(e){try{const t=await p.a.post(d.y+"/bind/email",e,{_auth:!0});return 0===t.code?{data:t.data}:{error:t}}catch(e){return{error:e}}}async function we(e){try{const t=await p.a.post(d.y+"/bind/phone",e,{_auth:!0});return 0===t.code?{data:t.data}:{error:t}}catch(e){return{error:e}}}async function xe(){try{const e=await p.a.post(d.y+"/unbind/email",{},{_auth:!0});return 0===e.code?{data:e.data}:{error:e}}catch(e){return{error:e}}}async function _e(){try{const e=await p.a.post(d.y+"/unbind/phone",{},{_auth:!0});return 0===e.code?{data:e.data}:{error:e}}catch(e){return{error:e}}}async function Ae(e,t){try{const i=await p.a.post(d.y+"/phone/verify_code",{phone_number:e,code:t});return 0===i.code?{data:i.data}:{error:i}}catch(e){return{error:e}}}var Se;async function ke(e,t){try{const i=await p.a.post(`${d.y}/bind/${e}`,{access_code:t},{_auth:!0});return 0===i.code?{data:i.data}:{error:i}}catch(e){return{error:e}}}async function Oe(e){try{const t=await p.a.post(`${d.y}/unbind/${e}`,{},{_auth:!0});return 0===t.code?{data:t.data}:{error:t}}catch(e){return{error:e}}}async function Ie(){try{const e=await(await p.a.get(d.y+"/phone/area_list"));return 0===e.code?{data:e.data}:{error:e}}catch(e){return{error:e}}}async function $e(e){try{const t=await p.a.post(d.y+"/user/verify_password",{password:b()(e)},{_auth:!0});return 0===t.code?{data:t.data}:{error:t}}catch(e){return{error:e}}}async function Ee(){try{const e=await p.a.get(d.y+"/verify/get_token_img");return 0===e.code?{data:e.data}:{error:e}}catch(e){return{error:e}}}!function(e){e.weibo="weibo",e.facebook="facebook",e.google="google",e.wechat="wechat",e.qq="qq"}(Se||(Se={}));const Ce=async()=>{try{const e=await p.a.get(d.y+"/get_concat_info");if(0===e.code)return{data:e.data};throw e}catch(e){return{error:e}}},Te=async(e,t)=>{try{const{response:i,stack:o,config:r}=t;let n=i||r;n&&(n=JSON.stringify(n,(e,t)=>{if(t instanceof FormData){const e={};for(const[i,o]of t)e[i]=o;return e}if(t instanceof File){return{lastModified:t.lastModified,name:t.name,size:t.size,type:t.type}}return t}));let{data:a,error:s}=await Z.k.read();if(!s&&a){const e=["mobileuid","avatar","refreshToken","secret","gender","name"];a=JSON.stringify(a,(t,i)=>{if(!L()(e).call(e,t))return i})}const l=await p.a.post(d.y+"/collect",{type:e,user:a,stack:o,info:n,env:Object.assign({},d.D)});if(0===l.code)return{data:l.data};throw l}catch(e){return{error:e}}},je=async e=>{await p.a.get(e,void 0,{_proxy:!0,_proxyIgnoreRes:!0})},Pe=e=>{const t=JSON.stringify(e),i=(new TextEncoder).encode(t);return new Blob([i],{type:"application/json;charset=utf-8"})},Re=e=>{const t={};return e.forEach(e=>{const{platform:i}=e;t[i]?t[i].push(e):t[i]=[e]}),t},Le=e=>{const{_id:t,_platform:i="pc"}=e;return{id:t,time:f.a.fmtTime(Number(t)),platform:i}},Ne=async()=>{try{const e=await p.a.get(d.y+"/sync/list",void 0,{_auth:!0,_proxy:!0});if(0!==e.code)return{error:e};const t={};return t.auto=e.meta.auto.map(Le),t.manual=Re(e.meta.manual.map(Le)),{data:t}}catch(e){return{error:e}}},Me=async(e,t,i="all")=>{try{const o=await p.a.get(d.y+"/sync/download_url",{id:e,type:t,keys:i},{_auth:!0});if(0!==o.code)return{error:o};const r=o.data;let n={};const a=await E.a.all(r.map(t=>p.a.get(t.url+"&timestampid="+("latest"===e?Date.now():e),{},{timeout:18e4})));return r.forEach((e,i)=>{const o=e.fileKey;"manual"===t?n=Object.assign(Object.assign({},n),a[i]):"auto"===t&&(n[o]=a[i])}),{data:n}}catch(e){return Te("getSyncDetail",e),{error:e}}},De=async(e,t="")=>{const i=Object.keys(e).join(",");try{const o=await p.a.get(d.y+"/sync/token",{type:"auto",keys:i},{_auth:!0});if(0!==o.code||!o.data.length)return{error:o};const r=o.data;await E.a.all(r.map(t=>{const{url:i,key:o,token:r,host:n}=t,a=new FormData;return a.append("token",r),a.append("key",i),a.append("file",Pe(e[o])),p.a.post(n,a,{headers:{"Content-Type":"multipart/form-data"},timeout:18e4})})),localStorage.setItem("pre-sync-id",r[0].timestamp+"");const n=await p.a.post(d.y+"/sync/done",{type:"auto",websocketkeys:t,keys:i,record_time:r[0].timestamp},{_auth:!0});return 0!==n.code?{error:n}:{data:n.meta.map(Le)}}catch(e){return Te("autoBackup",e),{error:e}}},Ue=async e=>{try{const t=await p.a.get(d.y+"/sync/token",{type:"manual",keys:"data"},{_auth:!0});if(0!==t.code||!t.data.length)return{error:t};const{token:i,url:o,timestamp:r,host:n}=t.data[0],a=new FormData;a.append("token",i),a.append("key",o),a.append("file",Pe(e)),await p.a.post(n,a,{headers:{"Content-Type":"multipart/form-data"},timeout:18e4});const s=await p.a.post(d.y+"/sync/done",{type:"manual",keys:"data",record_time:r},{_auth:!0});return 0!==s.code?{error:s}:{data:Re(s.meta.map(Le))}}catch(e){return Te("manualBackup",e),{error:e}}},Be=e=>"pro"===e?async function(){try{const{data:{userInfo:e}}=await Z.k.read(),{uid:t,secret:i}=e,o=await p.a.get(d.x+"/user/recovery-pro",{uid:t,secret:i},{timeout:2e5});if(o.success)return{data:o.data};throw o}catch(e){return Te("getProV1Data",e),{error:e}}}():"basic"===e?async function(){try{const e=await p.a.get(d.y+"/sync/recover_basic",{},{_auth:!0,timeout:2e5});return 0!==e.code?{error:e}:{data:e.data}}catch(e){return Te("getBasicV1Data",e),{error:e}}}():void 0;var Fe=i(342)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";i.r(t),i.d(t,"iMessage",(function(){return p})),i.d(t,"message",(function(){return h}));i(17),i(19);var o=i(518),r=i(1),n=i(505),a=i(608),s=i.n(a),l=i(609),c=i.n(l),d=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let p=class extends r.a{constructor(){super(...arguments),this.content="",this.type="error"}render(){const e={"infinity-message":!0,"position-top":"top"===this.type};return r.e`
      <div class=${Object(n.a)(e)}>
        ${this.renderImg()}
        <span>${this.content}</span>
      </div>
    `}renderImg(){return"error"===this.type?r.e`<img .src=${s.a} />`:"warn"===this.type?r.e`<img .src=${c.a} />`:void 0}};p.styles=r.b`
    :host {
      box-sizing: border-box;
      display: flex;
      position: fixed;
      min-width: 330px;
      padding: 0 20px;
      height: 60px;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(255, 255, 255, 1);
      box-shadow: 0px 6px 48px 0px rgba(0, 0, 0, 0.24);
      border-radius: 6px;
      z-index: 99999999999;
    }
    :host([type='top']) {
      width: 100%;
      margin: 0;
      left: 0;
      top: var(--top-bar-height);
      height: auto;
      padding: 5px;
      border-radius: 0;
      background: rgba(95, 92, 92, 0.6);
      color: #fff;
      transform: none;
      transition: all 300ms;
      opacity: 0;
      pointer-events: none;
    }
    :host(.anim[type='top']) {
      opacity: 1;
    }

    .infinity-message {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 100%;
    }
    img {
      width: 20px;
      height: 20px;
      margin-right: 8px;
    }
  `,d([Object(r.g)({type:String})],p.prototype,"content",void 0),d([Object(r.g)({type:String})],p.prototype,"type",void 0),p=d([Object(r.c)("i-message")],p);const h={newInstance:function(e,t=2,i,o){let r;if(document.querySelector("i-message"))return void clearInterval(r);const n=document.createElement("i-message");return n.setAttribute("content",e),n.setAttribute("type",i),document.body.appendChild(n),0!==t&&(r=setTimeout(()=>{document.body.removeChild(n),o&&o()},1e3*t)),n},error:function(e,t,i){o.default.error(e,t),i&&setTimeout(i,t)},success:function(e,t,i){o.default.success(e,t),i&&setTimeout(i,t)},top:function(e,t,i){const o=this.newInstance(e,t,"top",i);setTimeout(()=>null==o?void 0:o.classList.add("anim"))},warn:function(e,t,i){this.newInstance(e,t,"warn",i)}}},,,,,,,,,,,,,,,,function(e,t,i){"use strict";i.d(t,"c",(function(){return l})),i.d(t,"d",(function(){return c})),i.d(t,"b",(function(){return d})),i.d(t,"e",(function(){return p})),i.d(t,"a",(function(){return h}));var o=i(7),r=i.n(o),n=(i(11),i(17),i(19),i(0)),a=i(35),s=i.n(a);function l(e,t){if(n.l){if(e=window.chrome.runtime.getURL(e),null==t?void 0:t.isNewTab)return window.chrome.tabs.create({url:e});window.chrome.tabs.getCurrent(t=>window.chrome.tabs.update(t.id,{url:e},()=>{chrome.runtime.lastError&&e&&(e.startsWith("http")?window.open(e,"_self"):window.chrome.tabs.create({url:e}))}))}else{if(null==t?void 0:t.isNewTab)return window.open(e);window.open(e,"_self")}}async function c(){if(n.l){const{slave:e}=await i.e(40).then(i.bind(null,210));window.chrome.tabs.getCurrent(t=>{e.sendMessage("tabs-reload"),setTimeout(()=>{window.chrome.tabs.remove(t.id)},16)})}else setTimeout(()=>{l("/")},16)}async function d(e,t){try{if(t){return await s.a.getItem(e)}{const t=localStorage.getItem(e);if(t)return"string"==typeof t?JSON.parse(t):t}}catch(e){throw new Error(e)}}async function p(e,t,i){i?await s.a.setItem(e,t):localStorage.setItem(e,JSON.stringify(t))}async function h(){const e=await new r.a(e=>chrome.bookmarks.getTree(e));if(n.n){const t=e[0].children.findIndex(e=>"unfiled_____"===e.id),i=e[0].children.findIndex(e=>"toolbar_____"===e.id);if(-1!==t&&-1!==i)if(t>i){const[o]=e[0].children.splice(t,1),[r]=e[0].children.splice(i,1);e[0].children.unshift(r,o)}else{const[o]=e[0].children.splice(i,1),[r]=e[0].children.splice(t,1);e[0].children.unshift(o,r)}}return e}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";i.r(t),i.d(t,"slave",(function(){return s}));i(11),i(17),i(19),i(60);var o=i(7),r=i.n(o),n=i(343),a=i(85);const s=new class{constructor(){if(this.channel=null,this.initResolve=[],this.initReject=[],this.messageScheduler=new n.a,this.initChannel=()=>{"serviceworker"===a.b?this.initServiceworker():"background"===a.b&&this.initBackground()},this.awaitChannel=()=>new r.a(async(e,t)=>{"serviceworker"===a.b?this.channel?(await this.channel.active,await this.channel.controlling,e(null)):(this.initResolve.push(e),this.initReject.push(t)):"background"===a.b&&e(null)}),this.initServiceworker=async()=>{try{const{createWorkBox:e}=await i.e(11).then(i.bind(null,753)),t=await e();if(!t)return;t.addEventListener("message",e=>{const{type:t,payload:i={}}=e.data;"master:bordcast-message"===t&&this.messageScheduler.execTask(i.type,i.payload)}),await t.active,await t.controlling,this.channel=t,this.initResolve.forEach(e=>{e()}),this.channel.postTask=this.channel.messageSW}catch(e){console.log("slave初始化错误：",e),this.initReject.forEach(e=>{e()})}},this.initBackground=()=>{this.channel={postTask:e=>new r.a((t,i)=>{chrome.runtime.sendMessage(e,e=>{chrome.runtime.lastError&&i(chrome.runtime.lastError),t(e)})})},chrome.runtime.onMessage.addListener(({type:e,payload:t,ignoreId:i})=>{"master:bordcast-message"===e?chrome.tabs.getCurrent(e=>{i!==e.id&&this.messageScheduler.execTask(t.type,t.payload)}):"slave:bordcast-message"===e&&this.messageScheduler.execTask(t.data.type,t.data.payload)})},a.a)throw new Error("it's not page");this.initChannel()}postTask(e,t,i){return new r.a(async(o,r)=>{let n=!1;await this.awaitChannel();const s=Object.assign(Object.assign(Object.assign({},a.d),{taskId:Object(a.c)()}),i);s.timeout&&setTimeout(()=>{n||o({error:"timeout"})},s.timeout);try{const i=await this.channel.postTask({type:e,payload:Object.assign({data:t},s)});n=!0,o(i)}catch(e){o({error:e})}})}listenMessage(e,t){this.messageScheduler.listenTask(e,t)}sendMessage(e,t=""){this.postTask("slave:bordcast-message",{type:e,payload:t})}}},,,function(e,t,i){"use strict";var o=i(7),r=i.n(o),n=(i(11),i(0)),a=i(35),s=i.n(a);const l=new class{constructor(){this.errorList=[],this.clearAllData=async()=>{try{await s.a.removeItem("old-data"),await s.a.removeItem("error-data")}catch(e){}}}getLocalData(){const e={};for(let t=0,i=localStorage.length;t<i;t++){const i=localStorage.key(t);e[i]=localStorage[i]}return e}async getIndexedData(){const e={};try{return await s.a.iterate((t,i)=>{e[i]=t}),e}catch(e){return await this.trackOnError(e),null}}async getOldData(){try{return await s.a.getItem("old-data")}catch(e){return await this.trackOnError(e),null}}async getErrorData(){try{return await s.a.getItem("error-data")}catch(e){return await this.trackOnError(e),null}}async exportDebugData(){const e=await this.getOldData(),t=await this.getErrorData();let i={};n.s||(i=await new r.a(e=>chrome.storage.local.get(null,e)));return{oldData:e,errorData:t,localData:this.getLocalData(),chromeData:i}}async backupOldData(e,t){try{const i=this.getLocalData(),o=await new r.a(e=>chrome.storage.local.get(null,e));let a;e&&(a=await this.getIndexedData()),await s.a.setItem("old-data",{localData:i,chromeData:o,indexedData:a,beforeUpdateVersion:t,version:n.D.extVersion})}catch(e){await this.trackOnError(e)}}async track(e){if(e)try{this.errorList=await s.a.getItem("error-data")||[];let t=e;"string"==typeof e&&(t=new Error(e)),this.errorList.push({message:t.message,stack:t.stack,time:Date.now()}),await s.a.setItem("error-data",this.errorList)}catch(e){await this.trackOnError(e)}}async trackOnError(e){try{const t=await new r.a(e=>chrome.storage.local.get("error-data",e));Array.isArray(t["error-data"])||(t["error-data"]=[]),t["error-data"].push({message:e.message,stack:e.stack,time:Date.now()}),await new r.a(e=>chrome.storage.local.set(t,e))}catch(e){localStorage["error-data"]=JSON.stringify({message:e.message,stack:e.stack})}}};t.a=l},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";i.d(t,"a",(function(){return d})),i.d(t,"b",(function(){return p}));var o=i(15),r=i.n(o),n=(i(17),i(19),i(11),i(60),i(4)),a=i(210),s=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};const l={},c=new Set;class d{constructor(){this.firstSync=!1,this.syncTabTime=0,this._lockRollback=!1,this.isRollbackFromStorage=!1,this.backupFileKey="",this.backupValueKeys=[],this.rollbackFromStorage=()=>null,this.stopToStorageReaction=()=>{},this.stopAutoBackupReaction=()=>{},this.convertBackupEquals=e=>e}async initSyncStore(e,t,i={},o=20){const s=e.key;if(l[s])throw new Error("storage key 重复");l[s]=this,0!==t.length&&(this.rollbackFromStorage=async()=>{let a=!1;const s=Object.create(null);Object.keys(i).forEach(e=>{r()(t).call(t,e)&&(s[e]=i[e])});try{const{data:i,error:o}=await e.read();if(o)throw o;const n=i?Object.keys(i):[];i&&n.forEach(e=>{r()(t).call(t,e)&&(s[e]=i[e])}),this.firstSync||i&&!t.some(e=>!r()(n).call(n,e))||(a=!0)}catch(e){console.error("storageSync",e)}this.isRollbackFromStorage=!0,this.stopToStorageReaction(),this.stopAutoBackupReaction(),Object(n.i)(()=>{for(const e in s)this[e]=s[e];this.firstSync||(this.firstSync=!0)}),this.restartAutoBackupReaction(),this.stopToStorageReaction=Object(n.h)(()=>{const e={};return t.forEach(t=>{e[t]=Object(n.j)(this[t])}),e},t=>{this.isRollbackFromStorage=!1,e.create(t).then(()=>{Object(n.i)(()=>{this.syncTabTime=Date.now()})})},{equals:n.d.structural,delay:o,fireImmediately:a})},await this.rollbackFromStorage(),Object(n.h)(()=>this.syncTabTime,e=>{e&&a.slave.sendMessage("tabs-sync",s)},{delay:60}))}restartAutoBackupReaction(e=!1){this.stopAutoBackupReaction(),this.stopAutoBackupReaction=Object(n.h)(()=>{const e={};return this.backupValueKeys.forEach(t=>{e[t]=Object(n.j)(this[t])}),e},e=>{(async(e,t)=>{try{const{syncStore:o}=await Promise.all([i.e(6),i.e(7),i.e(30)]).then(i.bind(null,752));o.pushAutoBackupPipe({[e]:t})}catch(e){}})(this.backupFileKey,e).catch()},{fireImmediately:e,equals:(e,t)=>{const i=this.convertBackupEquals(e),o=this.convertBackupEquals(t);return n.d.structural(i,o)},delay:40})}initAutoBackup(e,t){if(c.has(e))throw new Error("file key 重复");c.add(e),0!==t.length&&(this.backupFileKey=e,this.backupValueKeys=[...t])}async getBackupData(){const e={};return this.backupValueKeys.forEach(t=>{e[t]=Object(n.j)(this[t])}),e}}s([n.g],d.prototype,"firstSync",void 0),s([n.g],d.prototype,"syncTabTime",void 0),s([n.b],d.prototype,"initSyncStore",null);const p=e=>{const t=l[e];(null==t?void 0:t._lockRollback)||t.rollbackFromStorage()}},function(e,t,i){"use strict";var o=i(1);t.a=o.b`.global-scrollbar {
  overflow: auto;
  scrollbar-width: thin;
  scrollbar-color: #ddd #f2f2f2;
}
.global-scrollbar::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}
.global-scrollbar::-webkit-scrollbar-thumb {
  border-radius: 3px;
  background-color: transparent;
  border: 1px dashed transparent;
  background-clip: padding-box;
  -webkit-transition: all 0.3s;
  transition: all 0.3s;
}
.global-scrollbar::-webkit-scrollbar-thumb:hover,
.global-scrollbar:hover::-webkit-scrollbar-thumb:hover {
  background-color: #ccc;
  background-clip: border-box;
}
.global-scrollbar::-webkit-scrollbar-track {
  background-color: transparent;
}
.global-scrollbar:hover::-webkit-scrollbar-thumb {
  background-color: #ddd;
}
@media only screen and (hover: none) {
  .global-scrollbar::-webkit-scrollbar-thumb {
    background-color: #ddd;
  }
}
`},function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));i(11),i(17),i(19),i(60);var o=i(0),r=i(612),n=i(15),a=i.n(n),s=i(55),l=i.n(s),c=i(3);const d=Object(o.F)()?"pc":"mobile";var p=i(37);const h=new class{constructor(){this.ga=null,this.localKey="analytics-status-time",this.gap=432e5,this.getPermission=async()=>{let e=!0;if(o.n)try{const{privacyStore:t}=await Promise.all([i.e(6),i.e(7),i.e(29)]).then(i.bind(null,759));1!==t.collectData&&(e=!1)}catch(t){e=!1}return e},this.trySendStatus=e=>{const t=localStorage.getItem(this.localKey);t?(Date.now()-Number(t)>this.gap||Number(t)>Date.now())&&this.sendStatus(e):this.sendStatus(e)},this.sendPageView=async e=>{if(!await this.getPermission())return;const t=this.ga.getPageviewUrl(e);p.c.sendLog(t)},this.sendEvent=async(e,t=!1)=>{await this.getPermission()&&Object.keys(e).forEach(i=>{const o=e[i];if("object"==typeof o)Object.keys(o).forEach(e=>{const r=o[e],n=this.ga.getEventUrl({category:i,action:e,label:String(r),nonInteraction:t});p.c.sendLog(n)});else{const e=this.ga.getEventUrl({category:i,action:String(o),nonInteraction:t});p.c.sendLog(e)}})},this.sendBaidu=async e=>{await this.getPermission()&&(async(e="")=>{const t=o.D.runtimePlatform,i=d+"-"+t;if(null==e?void 0:a()(e).call(e,"baidu.com")){const t=new l.a(e).searchParams.get("tn"),r=`https://manage-api.infinitytab.com/analysis-manager/send/60efd763a741942ac60374e1?label=${o.C.baiduLabel}&action=${t}&event=${i}`;o.s?navigator.sendBeacon(r):c.a.post(r,null,{_proxy:!0})}})(e)},this.ga=new r.a({trackingId:o.C.trackingId})}async sendStatus(e){try{this.sendEvent(e,!0),localStorage.setItem(this.localKey,""+Date.now())}catch(e){}}}},,,,,,,,,,,,,function(e,t,i){"use strict";i.r(t),i.d(t,"uploadFile",(function(){return c}));var o=i(15),r=i.n(o),n=(i(11),i(0)),a=i(3);const s=["infinity-notes-img","custom-wallpaper-library"],l={},c=async(e,t,i)=>{let o;try{if(l[i]&&l[i].endTime>Date.now())o=l[i];else{let e=null;if(e=r()(s).call(s,i)?await a.a.get(n.y+"/upload/public_private_token",{type:i},{_auth:!0}):await a.a.get(n.y+"/upload/token",{type:i}),0!==e.code||!e.data.token)return{error:e};o=e.data,o.endTime=Date.now()+1e3*(o.expires-600),l[i]=o}const{token:c,prefix:d}=o,p=new FormData;p.append("token",c),p.append("key",d+t),p.append("file",e,t);const{key:h,url:u}=await a.a.post(o.host,p,{timeout:18e4,headers:{"Content-Type":"multipart/form-data"}});return{data:{url:u,key:h}}}catch(e){return{error:e}}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));i(17),i(19);class o{constructor(){this._events=new Map}listenTask(e,t){if("function"!=typeof t)return;this._events.has(e)||this._events.set(e,new Set);this._events.get(e).add(t)}execTask(e,t,...i){if(this._events.has(e)){const o=this._events.get(e);for(const e of o)e(t,...i)}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var o=i(123),r=i.n(o),n=(i(17),i(19),i(11),i(4)),a=i(521),s=i.n(a),l=i(327),c=i(26),d=i(12),p=i(210),h=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};const u=[{text:i18n("todo_welcome"),todoId:"todo-id1dtkk87it2iepal6dv4hr2uig0c",time:Date.now(),updatetime:0,done:!1}];class g extends l.a{constructor(){super(...arguments),this.todoList=u,this.currenetState="done",this.listLength=localStorage.getItem("todo-length")||0}toggleState(e){this.currenetState=e}get needNotificationPermission(){return this.todoList.some(e=>!!e.dueDate)}diffRemote(e){const t=e=>{if(null==e?void 0:e.updatetime){const t={updatetime:void 0};return e.done=!!e.done,Object.assign(Object.assign({},e),t)}},i=s()(e.todoList||[],t),o=s()(Object(n.j)(this.todoList),t);return!n.d.structural(i,o)}mergeRemote(e,t){if(e.todoList)if(t)this.todoList=e.todoList;else{const t=this.todoList,i=e.todoList,{result:o}=c.a.mergeArray(t,i,"todoId");this.todoList=o}}edit(e){this.todoList=this.todoList.map(t=>t.todoId===e?Object.assign(Object.assign({},t),{edit:!t.edit}):t)}get hasDoneTodo(){return this.todoList.filter(e=>e.done).length}async addTodo(e){if(!r()(e).call(e).length)return;const t={done:!1,time:+new Date,todoId:c.a.randomId("todo-"),updatetime:await c.a.getTimestamp(),text:e};Object(n.i)(()=>{this.todoList=[t,...this.todoList]})}removeTodo(){this.todoList=this.todoList.filter(e=>!e.done)}deleteTodo(e){this.todoList=this.todoList.filter(t=>t.todoId!==e)}async toggleTodo(e){const t=await c.a.getTimestamp();Object(n.i)(()=>{this.todoList=this.todoList.map(i=>i.todoId===e?Object.assign(Object.assign({},i),{done:!i.done,updatetime:t}):Object.assign({},i))})}async updateTodo(e,t){const i=await c.a.getTimestamp();Object(n.i)(()=>{this.todoList=this.todoList.map(o=>o.todoId===e?Object.assign(Object.assign(Object.assign({},o),t),{updatetime:i,edit:!1}):Object.assign({},o))})}removeTime(e){this.todoList=this.todoList.map(t=>t.todoId===e?Object.assign(Object.assign({},t),{dueDate:"",dueTime:"",dueTimestamp:null}):t)}}h([n.g],g.prototype,"todoList",void 0),h([n.g],g.prototype,"currenetState",void 0),h([n.b],g.prototype,"toggleState",null),h([n.e],g.prototype,"needNotificationPermission",null),h([n.b],g.prototype,"mergeRemote",null),h([n.b],g.prototype,"edit",null),h([n.g],g.prototype,"listLength",void 0),h([n.e],g.prototype,"hasDoneTodo",null),h([n.b],g.prototype,"addTodo",null),h([n.b],g.prototype,"removeTodo",null),h([n.b],g.prototype,"deleteTodo",null),h([n.b],g.prototype,"toggleTodo",null),h([n.b],g.prototype,"updateTodo",null),h([n.b],g.prototype,"removeTime",null);const f=new g;f.initSyncStore(d.j,["todoList","listLength"],{}),f.initAutoBackup("todo",["todoList"]),Object(n.c)(()=>{if(f.firstSync){const e=f.todoList.filter(e=>!e.done).length;Object(n.i)(()=>{f.listLength=e}),localStorage.setItem("todo-length",e+"")}});let m=!1;Object(n.c)(()=>{if(f.firstSync){const e=f.todoList.filter(e=>!e.done&&e.dueTimestamp>Date.now()).map(e=>Object(n.j)(e));if(!m)return void(m=!0);p.slave.postTask("slave:change-todo",e)}}),Object(n.c)(()=>{let e=!1;const{todoList:t}=f;for(let i=0;i<t.length-1;i++){const{done:o}=t[i],r=t[i+1].done;if(o&&!r){e=!0;break}}e&&(Object(n.i)(()=>{const e=t.filter(e=>e.done),i=t.filter(e=>!e.done);f.todoList=[...i,...e]}),e=!1)},{delay:300})},function(e,t,i){"use strict";i.d(t,"a",(function(){return l})),i.d(t,"d",(function(){return c})),i.d(t,"b",(function(){return d})),i.d(t,"c",(function(){return p}));var o=i(7),r=i.n(o),n=(i(11),i(17),i(19),i(0)),a=i(209),s=i(160);function l(e){let t=0;switch(e){case"per-hour":t=n.q?36e5:2e4;break;case"twelve-hour":t=432e5;break;case"one-day":t=864e5}return t}async function c(e){let t;var i;return t="string"==typeof e?await(i=e,fetch(i).then(e=>e.blob())):e,await new r.a((e,i)=>{const o=new FileReader;o.readAsDataURL(t),o.onload=()=>{e(o.result)},o.onerror=i})}async function d(){const e=await Object(s.getBingWallpaper)();if(e.error)throw e.error;const[t]=Object(a.b)([e.data]);return t}async function p(){const e=await Object(s.getCustomColor)();if(!e.error)return e.data.map(e=>(e.type="color",e));console.warn(e.error)}},,,,,,,,,,,function(e,t,i){"use strict";i.r(t);var o=i(7),r=i.n(o),n=(i(17),i(19),i(248)),a=i(603),s=i(1),l=i(4),c=s.b`.i-bubble {
  position: fixed;
  top: 80px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 99999999;
}
.i-bubble.network-error .i-bubble-wrap,
.i-bubble.error .i-bubble-wrap,
.i-bubble.success .i-bubble-wrap {
  padding-left: 30px;
  padding-right: 32px;
}
.i-bubble + .i-bubble-mask {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(255, 255, 255, 0.7);
  z-index: 999999;
  display: none;
  opacity: 0;
  transition: opacity 150ms ease-in 0s;
}
.i-bubble.loading + .i-bubble-mask {
  display: block;
}
.i-bubble.loading.popup + .i-bubble-mask {
  opacity: 1;
}
.i-bubble .i-bubble-wrap {
  margin: 0 auto;
  box-sizing: border-box;
  padding: 12px 20px;
  background-color: #333;
  box-shadow: 0px 2px 20px 0px rgba(0, 0, 0, 0.1);
  border-radius: 4px;
  display: flex;
  flex-flow: row nowrap;
  align-items: center;
  font-size: 14px;
  line-height: 1.4em;
  transition: opacity 0.15s cubic-bezier(0, 0, 0.2, 1) 0ms, transform 0.15s cubic-bezier(0, 0, 0.2, 1) 0ms;
  transform: scale(0.8);
  opacity: 0;
  box-shadow: 0 3px 5px -1px rgba(0, 0, 0, 0.2), 0 6px 10px 0 rgba(0, 0, 0, 0.14), 0 1px 18px 0 rgba(0, 0, 0, 0.12);
  max-width: 600px;
}
.i-bubble.popup .i-bubble-wrap {
  transform: scale(1);
  opacity: 1;
}
@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}
.i-bubble .icon {
  width: 18px;
  height: 18px;
  flex-shrink: 0;
  margin-right: 12px;
  display: none;
}
.i-bubble .icon.icon-loading {
  animation: spin 700ms linear infinite;
}
.i-bubble .i-bubble-text {
  color: #e4e4e4;
  display: block;
  box-sizing: border-box;
  flex-grow: 1;
  width: 100%;
  word-break: break-all;
}
.i-bubble .i-bubble-button {
  width: 70px;
  height: 28px;
  color: #4caf50;
  background-color: initial;
  border: none;
  padding: 0;
  cursor: pointer;
  transition: color, background-color 200ms;
  border-radius: 4px;
  outline: none;
  max-width: 180px;
  margin-left: 46px;
  flex-shrink: 0;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}
.i-bubble .i-bubble-button:hover {
  background-color: rgba(76, 175, 80, 0.14);
}
`,d=i(26),p=i(45),h=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};const u=Object(p.a)("network-error.png",!1),g=Object(p.a)("error.png",!1),f=Object(p.a)("success.png",!1),m=Object(p.a)("loading.png",!1);class b extends n.a{constructor(){super(...arguments),this.popup=!1,this.showButton=!1}static _timeToHideHandler(e){if(e.showButton){const t=e.shadowRoot.querySelector(".i-bubble .i-bubble-button");t.onclick&&(t.onclick=null)}const t=e.shadowRoot.querySelector(".i-bubble > .i-bubble-wrap");let i=!1;const o=()=>{e.onmouseenter=null,e.onmouseleave=null,document.body.contains(e)&&document.body.removeChild(e),i=!0};t.addEventListener("transitionend",o,{once:!0}),t.addEventListener("transitioncancel",o,{once:!0}),setTimeout(()=>{i||o()},150),e.setPopup(!1)}static _setTimerToHide(e,t){this._clearTimerToHide(e),e.hideTimer=setTimeout(()=>this._timeToHideHandler(e),t)}static _clearTimerToHide(e){e.hideTimer&&(clearTimeout(e.hideTimer),e.hideTimer=null)}static _messageMisc(e,t,i){this.setText(e),document.body.appendChild(this),window.customElements.whenDefined("i-bubble").then(()=>(this.offsetWidth,this.setPopup(!0),new r.a(e=>requestAnimationFrame(e)))).then(()=>{i&&i(this)}),t>0&&b._setTimerToHide(this,t)}static message(e,t){const i=document.createElement("i-bubble");i.setType("message"),t=null!=t?t:this.duration,this._messageMisc.call(i,e,t)}static networkError(e,t){const i=document.createElement("i-bubble");i.setType("network-error"),t=null!=t?t:this.duration,this._messageMisc.call(i,e,t)}static success(e,t){const i=document.createElement("i-bubble");i.setType("success"),t=null!=t?t:this.duration,this._messageMisc.call(i,e,t)}static error(e,t){const i=document.createElement("i-bubble");i.setType("error"),t=null!=t?t:this.duration,this._messageMisc.call(i,e,t)}static popupLogin(e){const t=this.popup(i18n("reqeust_login_message"),{showButton:!0,btnValue:i18n("to_login"),type:"message",onBtnClick:null!=e?e:()=>{a.userStore.openModal()}}),i=Date.now();let o=this.duration2;t.onmouseenter=()=>{o=Date.now()-i,b._clearTimerToHide(t)},t.onmouseleave=()=>{b._setTimerToHide(t,o)}}static popupLoading(e){const t=this.popup(i18n("wallpaper_loading"),{duration:0,showButton:!0,btnValue:i18n("cancel"),type:"loading",onBtnClick:e});return()=>setTimeout(()=>this._timeToHideHandler(t),b.waitForReady)}static loading(e){const t=this.popup(e,{type:"loading",duration:0});return()=>setTimeout(()=>this._timeToHideHandler(t),b.waitForReady)}static popup(e,t){const{duration:i=this.duration2,btnValue:o,onBtnClick:r,type:n,showButton:a}=t,s=document.createElement("i-bubble");return s.setType(n),o&&s.setBtnValue(o),a&&s.setShowButton(a),this._messageMisc.call(s,e,i,()=>{if(s.showButton){s.shadowRoot.querySelector(".i-bubble .i-bubble-button").onclick=e=>{r&&r(e),this._timeToHideHandler(s)}}}),s}firstUpdated(){const e="\n      background-size: cover;\n      background-repeat: no-repeat;\n      background-position: center;\n      display: block;\n    ",t=document.createElement("style");t.appendChild(document.createTextNode(`\n      .i-bubble .icon.icon-network-error{\n        background-image: url(${u});${e}\n      }\n      .i-bubble .icon.icon-success{\n        background-image: url(${f});${e}\n      }\n      .i-bubble .icon.icon-error{\n        background-image: url(${g});${e}\n      }\n      .i-bubble .icon.icon-loading{\n        background-image: url(${m});${e}\n      }\n      `)),this.shadowRoot.appendChild(t)}render(){return s.e`
      <section class="i-bubble ${this.type}${this.popup?" popup":""}">
        <section class="i-bubble-wrap">
          <i class="icon icon-${this.type}"></i>
          <span class="i-bubble-text">${this.text}</span>
          <input
            class="i-bubble-button"
            type="button"
            .value=${this.btnValue}
            style="${this.showButton?"":"display: none;"}"
          />
        </section>
      </section>
      <section class="i-bubble-mask" @click=${d.a.stopBubble}></section>
    `}setType(e){this.type=e}setText(e){this.text=e}setBtnValue(e){this.btnValue=e}setPopup(e){this.popup=e}setShowButton(e){this.showButton=e}}b.duration=3e3,b.duration2=5e3,b.waitForReady=1e3/60,b.styles=c,h([l.g],b.prototype,"type",void 0),h([l.g],b.prototype,"text",void 0),h([l.g],b.prototype,"btnValue",void 0),h([l.g],b.prototype,"popup",void 0),h([l.g],b.prototype,"showButton",void 0),h([l.b],b.prototype,"setType",null),h([l.b],b.prototype,"setText",null),h([l.b],b.prototype,"setBtnValue",null),h([l.b],b.prototype,"setPopup",null),h([l.b],b.prototype,"setShowButton",null),window.customElements.define("i-bubble",b);t.default=b},function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return s}));i(17),i(19);var o=i(15),r=i.n(o);class n{constructor(){this._caches={},this._setCaches=e=>(...t)=>{this._caches[e]=t}}}const a=[],s=e=>new Proxy(e,{set:(e,t,i)=>null===i?(e[t]=i,!0):"function"==typeof e[t]?(console.warn("失败：重复注册"),!0):(e[t]=i,r()(a).call(a,t)&&delete e._caches[t],e._caches.hasOwnProperty(t)&&(e[t](...e._caches[t]),delete e._caches[t]),!0),get:(e,t)=>"function"==typeof e[t]?e[t]:e._setCaches(t)})},function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var o=i(7),r=i.n(o),n=(i(11),i(0)),a=i(102);async function s(){if(n.s||n.r){if("granted"!==await new r.a(e=>{!function(){try{Notification.requestPermission().then()}catch(e){return!1}return!0}()?Notification.requestPermission(e):Notification.requestPermission().then(e)}))throw new Error}else await a.a.request(["notifications"])}},,function(e,t,i){"use strict";i.d(t,"a",(function(){return O}));var o=i(15),r=i.n(o),n=(i(31),i(89),i(11),i(1)),a=i(248),s=n.b`:host {
  width: 100%;
  box-sizing: border-box;
  padding: 24px 20px 60px;
  display: flex;
  flex-direction: column;
  background-color: #fff;
}
textarea,
input {
  font-family: 'PingFang SC', 'Microsoft Yahei', Helvetica, Arial, sans-serif;
}
.error {
  margin-left: 6px;
  font-size: 14px;
  font-weight: 400;
  color: #ea4747;
}
.box-dynamic {
  padding-bottom: 30px;
}
.item-icon {
  height: 70px;
}
.img-item-box:not([hidden]) {
  display: flex;
  align-items: flex-end;
}
.img-item {
  width: 60px;
  background-color: #dddddd;
  background-image: linear-gradient(45deg, #ffffff 25%, transparent 0px, transparent 75%, #ffffff 0px), linear-gradient(45deg, #ffffff 25%, transparent 0px, transparent 75%, #ffffff 0px);
  background-position: 0px 0px, 5px 5px;
  background-size: 10px 10px;
  border-radius: 6px;
}
.item {
  position: relative;
  margin-bottom: 20px;
}
.item .label-box {
  margin-bottom: 8px;
  display: flex;
  align-items: center;
}
.item .label-box .label {
  font-weight: 500;
  color: #333333;
}
.item .label-box .tip-question {
  margin-left: 2px;
  width: 16px;
  height: 16px;
  cursor: pointer;
}
.item #icon-preview {
  border: 4px solid #f6f6f6;
  transform: scale(0.25);
  transform-origin: left top;
  position: relative;
  border-radius: 30px;
  background-color: #ddd;
  background-image: linear-gradient(45deg, #fff 25%, transparent 0, transparent 75%, #fff 0), linear-gradient(45deg, #fff 25%, transparent 0, transparent 75%, #fff 0);
  background-position: 0 0, 20px 20px;
  background-size: 40px 40px;
}
.item .img-dropper {
  position: relative;
  margin-right: 8px;
  display: inline-flex;
  justify-content: center;
  align-items: center;
  vertical-align: bottom;
  width: 60px;
  height: 60px;
  background: #ffffff;
  background-image: url("data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' rx='6' ry='6' stroke='%23C3C3C3FF' stroke-width='1' stroke-dasharray='5%2c 6' stroke-dashoffset='12' stroke-linecap='butt'/%3e%3c/svg%3e");
  border-radius: 6px;
  cursor: pointer;
}
.item .img-dropper[hidden] {
  display: none;
}
.item .img-preview {
  background-size: cover;
  border: 1px solid #dadce0;
  box-sizing: border-box;
}
.item .img-preview .editing:hover {
  opacity: 1;
}
.item .img-preview .editing {
  opacity: 0;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  border-radius: 6px;
  background: rgba(0, 0, 0, 0.3);
  transition: opacity 0.2s;
}
.item .img-preview .editing-icon {
  width: 28px;
  height: 28px;
}
.item .img-preview i-svg {
  --size: 90%;
  color: #fff;
  opacity: 0.8;
  cursor: pointer;
}
.item .img-preview i-svg:hover {
  opacity: 1;
  color: #fff;
}
.item input::placeholder,
.item .input::placeholder,
.item textarea::placeholder {
  color: #999999;
}
.item input[type='text'],
.item .input {
  outline: none;
  border: none;
  border-bottom: 1px solid #eee;
  line-height: 1;
  height: 30px;
  box-sizing: border-box;
  padding-bottom: 6px;
  width: 100%;
  color: #333333;
}
.item .input {
  height: auto;
  max-height: 50px;
  line-height: 16px;
  max-width: 100%;
  min-width: 100%;
  resize: none;
}
.item input:-moz-read-only {
  cursor: not-allowed;
}
.item input:read-only {
  cursor: not-allowed;
}
.item textarea.target {
  outline: none;
  width: 100%;
  height: 90px;
  box-sizing: border-box;
  padding: 10px;
  background: #ffffff;
  border-radius: 6px;
  border: 1px solid #eeeeee;
  resize: none;
  word-break: break-all;
  color: #333333;
}
.item input[type='file'] {
  width: 100px;
}
.item.btn-box {
  display: flex;
  flex-direction: column;
  align-items: center;
}
.item.btn-box infinito-button {
  width: 220px;
  height: 38px;
  background: #333333;
  border-radius: 6px;
  outline: none;
  border: none;
  cursor: pointer;
  font-weight: 500;
  color: #ffffff;
}
.item.btn-box infinito-button:disabled {
  background: rgba(51, 51, 51, 0.7);
}
.item.btn-box .btn-cancel {
  margin-top: 14px;
  background: #eeeeee;
  border-radius: 6px;
  font-size: 14px;
  color: #333333;
}
.item.btn-box .btn-cancel:hover {
  background: #c8c8c8;
}
.del {
  position: absolute;
  width: 18px;
  height: 18px;
  top: -6px;
  right: -6px;
  cursor: pointer;
  transition: transform 0.2s;
}
.del:hover {
  transform: scale(1.1);
}
.svg-box {
  width: 70px;
  height: 70px;
  border: 1px solid #f6f6f6;
  box-sizing: border-box;
  position: relative;
  border-radius: 6px;
  background-color: #ddd;
  background-image: linear-gradient(45deg, #fff 25%, transparent 0, transparent 75%, #fff 0), linear-gradient(45deg, #fff 25%, transparent 0, transparent 75%, #fff 0);
  background-position: 0 0, 5px 5px;
  background-size: 10px 10px;
  overflow: hidden;
}
`,l=(i(17),i(19),i(649),i(650),i(651),i(652),n.b`.ellipsis {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
i-input {
  display: block;
  margin-top: 20px;
}
.label-box {
  max-width: 100%;
  margin-bottom: 10px;
  display: flex;
  align-items: center;
}
.label-box .label {
  height: 20px;
  font-size: 14px;
  font-weight: 500;
  color: #333333;
  line-height: 20px;
  white-space: nowrap;
}
.imgs-box {
  display: flex;
}
.img-item-box {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 60px;
}
.img-item-box .name {
  margin-top: 8px;
  max-width: 80px;
  height: 16px;
  font-size: 11px;
  line-height: 16px;
  font-weight: 400;
  color: #b3b3b3;
}
.active .img-item {
  box-shadow: 0px 4px 8px 0px rgba(59, 62, 64, 0.73);
}
.active .name {
  font-weight: 500;
  color: #4d4d4d;
}
.img-item {
  width: 60px;
  height: 60px;
  border-radius: 6px;
  cursor: pointer;
  transition: 0.2s box-shadow;
}
.color-img {
  overflow: hidden;
}
.cloud-imgs-box {
  display: flex;
}
.cloud-imgs-box .cloud-img-box:not(:last-of-type) {
  margin-right: 10px;
}
.color-img-box {
  margin-right: 17px;
  position: relative;
}
.color-img-box:after {
  position: absolute;
  top: 8px;
  content: '';
  right: -17px;
  width: 1px;
  height: 48px;
  background: #eceeee;
}
.local-img-box {
  position: relative;
  margin-left: 17px;
}
.cloud-imgs-box + .local-img-box:after {
  position: absolute;
  top: 8px;
  content: '';
  left: -17px;
  width: 1px;
  height: 48px;
  background: #eceeee;
}
.cloud-imgs-box {
  margin: 0 17px;
}
.color-type-box {
  position: relative;
  margin-top: 18px;
  padding: 20px;
  padding-top: 1px;
  background: #f5f8fa;
}
.color-type-box:after {
  position: absolute;
  content: '';
  top: -19px;
  left: 20px;
  width: 0;
  height: 0;
  border: 10px solid transparent;
  border-bottom: 10px solid #f5f8fa;
}
.permission-img {
  background: #ffffff;
  background-image: url("data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' rx='6' ry='6' stroke='%23C3C3C3FF' stroke-width='1' stroke-dasharray='5%2c 6' stroke-dashoffset='12' stroke-linecap='butt'/%3e%3c/svg%3e");
  display: flex;
  align-items: center;
  justify-content: center;
}
.permission-img img {
  width: 28px;
  height: 28px;
}
.error {
  margin-left: 6px;
  font-size: 14px;
  font-weight: 400;
  color: #ea4747;
}
`),c=i(37),d=i(128),p=i(102),h=i(0),u=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let g=class extends a.a{constructor(){super(...arguments),this.hasPermission=!1,this.imgType="local",this.imgIndex=0,this.localImageError=!1,this.localImagePreViewUrl="",this.cloudImgs=[],this.offsetRight=0,this.modalBorderRadius="3px",this.isAutoBgText=!0,this.colors=["rgba(255,71,52,1)","rgba(255,122,9,1)","rgba(255,207,12,1)","rgba(42,233,121,1)","rgba(44,214,223,1)","rgba(0,116,255,1)","rgba(109,9,255,1)","rgba(255,36,160,1)"],this.handleValue=async()=>{try{await this.saveImage()}catch(e){return!!this.localImagePreViewUrl&&(e&&e.message?d.message.error(e.message):d.message.error(e||"upload error"),!1)}return!0},this.getPermissionUrl=()=>{let e=[];return e=h.k?["http://*/","https://*/"]:h.r?"<all_urls>":["<all_urls>"],e}}changeValue(e){const t=new CustomEvent("on-change",{detail:{value:e}});this.dispatchEvent(t)}getAutoBgText(){if(!this.isAutoBgText)return;const{name:e}=this.value;let t="";t=e.length>3?e.substr(0,2):e,this.changeValue({bgText:t})}choosetextImg(){this.changeValue({bgType:"color"})}chooseCloudImg(e){this.changeValue({bgType:"image"}),this.imgType="cloud",this.imgIndex=e}chooseLocalImg(){this.changeValue({bgType:"image"}),this.imgType="local"}async saveImage(){if("color"===this.value.bgType)this.value.bgColor||this.changeValue({bgColor:this.colors[0]});else if("image"===this.value.bgType){let e={};if("cloud"===this.imgType){const t=this.$cloudIcons.querySelectorAll("i-imgicon")[this.imgIndex];e=await t.getImg()}else if("local"===this.imgType)if(this.localImagePreViewUrl)e=await this.$localicon.getImg();else{if(!this.value.bgImage)throw this.localImageError=!0,new Error("none img");e={url:this.value.bgImage,bgColor:this.value.bgColor}}this.changeValue({bgImage:e.url,bgColor:e.bgColor})}}getFormateUrl(e){return r()(e).call(e,":")?e:"http://"+this.value.target}renderCloudImgs(){return n.e`
      <div class="cloud-imgs-box">
        ${this.cloudImgs.map((e,t)=>n.e`<div
            class="img-item-box cloud-img-box ${"image"===this.value.bgType&&"cloud"===this.imgType&&this.imgIndex===t?"active":""}"
          >
            <div class="img-item cloud-img">
              <i-imgicon
                .preViewImgUrl="${e.url}"
                .bgColor="${"transparent"}"
                .canDelete="${!1}"
                .modalBorderRadius="${this.modalBorderRadius}"
                .active="${"image"===this.value.bgType&&"cloud"===this.imgType&&this.imgIndex===t}"
                @on-change="${()=>{this.chooseCloudImg(t)}}"
                .iconType="${this.iconType}"
              ></i-imgicon>
            </div>
            <div class="name ellipsis">${i18n("icon")}${"0"+(t+1)}</div>
          </div>`)}
      </div>
    `}async getUrlIcon(){if(await this.checkPermission(),this.hasPermission||h.s){const e=this.getFormateUrl(this.value.target),t=await c.b.getLogoList(e);if(t.error&&t.error.__CANCEL__)return;const i=t.data||[];if(i.length<2&&h.l){const t=await c.b.getUrlIcon(e.split("?")[0]);t.data&&t.data.length>0&&(i.push(...t.data),i.length=2)}this.cloudImgs=i.map(e=>({url:e}))}}async getPermission(){try{await p.a.request([],this.getPermissionUrl()),this.hasPermission=!0,window.__INFINITY__.hasAllUrlPermission=this.hasPermission,this.getUrlIcon()}catch(e){console.log("getPermission ~ error",e)}}async checkPermission(){try{const e=await p.a.has([],this.getPermissionUrl());this.hasPermission=!!e,window.__INFINITY__.hasAllUrlPermission=this.hasPermission}catch(e){console.log("checkPermission ~ error",e)}}renderPermissionIcon(){return n.e`
      <div class="cloud-imgs-box">
        <div class="img-item-box cloud-img-box ">
          <div @click="${this.getPermission}" class="img-item permission-img">
            <img src="${i(680)}" alt="" />
          </div>
          <div class="name ellipsis">${i18n("get_cloud_icon")}</div>
        </div>
      </div>
    `}firstUpdated(e){this.checkPermission(),e.has("value")&&(this.value.name&&this.getAutoBgText(),this.value.target&&this.getUrlIcon())}updated(e){const t=t=>{const i=e.get("value");return!i||("target"===t?i[t].split("?")[0]!==this.value[t].split("?")[0]:i[t]!==this.value[t])};e.has("value")&&(t("name")&&this.getAutoBgText(),t("target")&&this.getUrlIcon())}render(){return n.e`
      <section class="i-edit-img">
        <div class="item">
          <div class="label-box">
            <span class="label">${i18n("select_icon")}</span>
            <span
              .hidden="${"image"!==this.value.bgType||"local"!==this.imgType||!this.localImageError}"
              class="error ellipsis"
              >* ${i18n("please_upload_photos")}</span
            >
          </div>
          <div class="imgs-box">
            <div class="img-item-box color-img-box ${"color"===this.value.bgType?"active":""}">
              <div class="img-item color-img" @click="${this.choosetextImg}">
                <i-texticon
                  .bgColor="${this.value.bgColor||this.colors[0]}"
                  .bgFont="${this.value.bgFont}"
                  .bgText="${this.value.bgText}"
                ></i-texticon>
              </div>
              <div class="name ellipsis">${i18n("color_icon")}</div>
            </div>
            ${this.cloudImgs.length?this.renderCloudImgs():!1===this.hasPermission&&h.l&&!h.h?this.renderPermissionIcon():null}
            <div
              class="img-item-box local-img-box ${"image"===this.value.bgType&&"local"===this.imgType?"active":""}"
            >
              <div class="img-item local-img">
                <i-imgicon
                  class="local-img-icon"
                  .qiniu="${!0}"
                  .preViewImgUrl="${this.value.bgImage}"
                  .bgColor="${this.value.bgColor||"transparent"}"
                  .canDelete="${!0}"
                  .modalBorderRadius="${this.modalBorderRadius}"
                  .active=${"image"===this.value.bgType&&"local"===this.imgType}
                  @on-change="${e=>{this.localImagePreViewUrl=e.detail.preViewImgUrl,this.localImagePreViewUrl&&this.chooseLocalImg()}}"
                ></i-imgicon>
              </div>
              <div class="name ellipsis">${i18n("local_icon")}</div>
            </div>
          </div>
        </div>
        <div .hidden="${"color"!==this.value.bgType}" class="color-type-box">
          <i-input name="displayname" .label=${i18n("icon_bg_text")} .placeholder=${i18n("please_input_bg_text")}>
            <div class="bg-text" slot="input">
              <i-textarea
                .value="${this.value.bgText}"
                .placeholder="${i18n("show_name")}"
                @on-change="${e=>{this.changeValue({bgText:e.detail.value}),this.isAutoBgText=!1}}"
              ></i-textarea>
            </div>
          </i-input>
          <i-input name="displayfont" .label=${i18n("font_size")}>
            <div class="slider" style="margin-top: -2px;" slot="input">
              <infinito-slider
                style="--bg-color: #f5f8fa;"
                @on-change="${e=>{this.changeValue({bgFont:e.detail.value})}}"
                .value=${this.value.bgFont}
                .min=${14}
                .max=${74}
              ></infinito-slider>
            </div>
          </i-input>
          <i-input name="displaycolor" style="margin-top: 16px;" .label=${i18n("color")}>
            <div class="color" style="margin-top:14px;" slot="input">
              <i-colorpicker
                .side="${!0}"
                .value="${this.value.bgColor||this.colors[0]}"
                .colors="${this.colors}"
                .offsetRight="${this.offsetRight}"
                @on-change="${e=>{this.changeValue({bgColor:e.detail.value})}}"
              ></i-colorpicker>
            </div>
          </i-input>
        </div>
      </section>
    `}};g.styles=[l],u([Object(n.f)()],g.prototype,"hasPermission",void 0),u([Object(n.f)()],g.prototype,"imgType",void 0),u([Object(n.f)()],g.prototype,"imgIndex",void 0),u([Object(n.f)()],g.prototype,"localImageError",void 0),u([Object(n.f)()],g.prototype,"localImagePreViewUrl",void 0),u([Object(n.f)()],g.prototype,"cloudImgs",void 0),u([Object(n.g)({type:Object})],g.prototype,"value",void 0),u([Object(n.g)({type:Number})],g.prototype,"offsetRight",void 0),u([Object(n.g)({type:String})],g.prototype,"iconType",void 0),u([Object(n.g)({type:String})],g.prototype,"modalBorderRadius",void 0),u([Object(n.h)(".cloud-imgs-box")],g.prototype,"$cloudIcons",void 0),u([Object(n.h)("i-texticon")],g.prototype,"$texticon",void 0),u([Object(n.h)(".local-img-icon")],g.prototype,"$localicon",void 0),g=u([Object(n.c)("i-edit-img")],g);var f=i(4),m=i(26),b=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};class y{async getTargetInfo(e,t){const{data:i,error:o}=await c.b.getUrlInfoWithPermission(e.split("?")[0]);if(null==o?void 0:o.__CANCEL__)return;if(o)return t?{name:"",bgText:""}:null;return{name:function(e){const t={lt:"<",gt:">",nbsp:" ",lrm:"",amp:"&",quot:'"'};return e.replace(/&(lt|gt|nbsp|amp|quot|lrm);/gi,(e,i)=>t[i])}(i.name),bgText:""}}async uploadIcon(e,t){var i,o;const{data:r,error:n}=await c.f.uploadFile(e,m.a.randomId("icon-")+".png",t);if(n){return{error:(null===(o=null===(i=n.response)||void 0===i?void 0:i.data)||void 0===o?void 0:o.error)?n.response.data.error:n.message,url:""}}return{url:r.url,error:""}}}b([f.b],y.prototype,"getTargetInfo",null),b([f.b],y.prototype,"uploadIcon",null);const v=new y;var w=i(2),x=i(328),_=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let A=class extends n.a{constructor(){super(...arguments),this.show=!1,this.closeModal=()=>{this.show=!1;const e=new CustomEvent("on-close",{});this.dispatchEvent(e)}}render(){return n.e`
      <infinito-modal style="--modal-padding:0;" .open=${this.show} .onCancel="${this.closeModal}">
        <div slot="body">
          <div class="container">
            <h2 class="title">${i18n("tip_question_title")}</h2>
            <span class="gap-line"></span>
            <div class="global-scrollbar" style="height: calc(100% - 81px);">
              <div class="content">
                <div class="card">
                  <div class="label">${i18n("tip_question_1")}</div>
                  <div class="img-box">
                    <img class="item-img" src="${i(681)}" alt="" />
                  </div>
                </div>
                <div class="card">
                  <div class="label">${i18n("tip_question_2")}</div>
                  <div class="img-box img-box-2">
                    <img class="item-img" src="${i(682)}" alt="" />
                    <div class="item-tip">${i18n("copy")}</div>
                  </div>
                </div>
                <div class="card">
                  <div class="label">${i18n("tip_question_3")}</div>
                  <div class="img-box img-box-3">
                    <img class="item-img" src="${i(683)}" alt="" />
                    <div class="item-tip tip3-box">
                      <div class="tip3-item">
                        <div class="tip3-label-box">
                          <span class="tip3-label">${i18n("search_engine")}</span>
                        </div>
                        <span class="input">${i18n("placeholder_name")}</span>
                      </div>
                      <div class="tip3-item">
                        <div class="tip3-label-box">
                          <span class="tip3-label">${i18n("website_search_replace_char")}</span
                          ><img class="tip-question" src="${i(615)}" alt="" />
                        </div>
                        <span class="input">https://www.google.com/search?sxsrf=ALeKk02...</span>
                        <img class="tip3-arrow" src="${i(684)}" alt="" />
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </infinito-modal>
    `}};A.styles=[x.a,n.b`
      .container {
        width: 800px;
        height: 70vh;
        min-height: 400px;
        max-height: 1000px;
        text-align: center;
        box-sizing: border-box;
        overflow: hidden;
      }
      .title {
        margin: 26px auto;
        height: 28px;
        font-size: 20px;
        font-weight: 500;
        color: #333333;
        line-height: 28px;
      }
      .gap-line {
        margin: auto;
        display: block;
        width: 720px;
        height: 1px;
        background: #ebebeb;
      }
      .content {
        padding: 33px 114px 50px;
        padding-right: 0;
        width: 572px;
        box-sizing: content-box;
        text-align: left;
      }
      .card {
        padding-bottom: 50px;
      }
      .label {
        font-size: 16px;
        font-weight: 400;
        color: #333333;
        line-height: 22px;
      }
      .img-box {
        position: relative;
        margin-top: 20px;
      }
      .img-box .item-img {
        width: 572px;
        height: 235px;
      }
      .item-tip {
        position: absolute;
        font-size: 14px;
        font-weight: 400;
        color: #333333;
        line-height: 20px;
      }
      .img-box-2 .item-tip {
        top: 86px;
        left: 396px;
      }
      .tip3-box {
        top: 64px;
        left: 138px;
      }
      .tip3-item {
        position: relative;
        margin-bottom: 20px;
        width: 320px;
      }
      .tip3-label-box {
        margin-bottom: 12px;
        display: flex;
        align-items: center;
      }
      .tip3-label {
        height: 20px;
        font-size: 14px;
        font-weight: 500;
        color: #333333;
        line-height: 20px;
      }
      .tip3-item .input {
        display: block;
        overflow: hidden;
        text-overflow: clip;
        white-space: nowrap;
        word-break: keep-all;
        border-bottom: 1px solid #eeeeee;
        box-sizing: content-box;
        padding-bottom: 6px;
        width: 100%;
        font-size: 14px;
        font-weight: 400;
        color: #656565;
        opacity: 0.8;
        width: 319px;
        height: 20px;
        line-height: 20px;
      }
      .tip-question {
        margin-left: 2px;
        width: 16px;
        height: 16px;
      }
      .tip3-arrow {
        width: 30px;
        height: 30px;
        position: absolute;
        left: -34px;
        bottom: 10px;
      }
    `],_([Object(n.g)({type:Boolean})],A.prototype,"show",void 0),A=_([Object(n.c)("tip-question")],A);var S,k=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let O=S=class extends a.a{constructor(){super(),this.sideRatio=1,this.popup=!1,this.iconType="custom-icon",this.readonlyTarget=!1,this.subSpin=!1,this.isAutoName=!0,this.validate={name:null,target:null},this.tipQuestion=!1,this.value=Object.assign({},S.defaultValue)}_changeTarget(e,t=!1){t?this.changeValue({target:e.currentTarget.value.replace(/%25s/g,"%s")}):this.changeValue({target:e.currentTarget.value}),this._validateTarget(),this.isAutoName&&this.getTargetInfo()}async getTargetInfo(){let e=this.value.target;if(!e)return;r()(e).call(e,":")||(e="http://"+e);if(!/^https?:\/\/(.+\.)+.+/.test(e))return;const t=await v.getTargetInfo(e,this.isAutoName);t&&this.changeValue({name:t.name})}_validateTarget(){const e=this.value.target;let t=!0;return e&&("search-engine-custom"!==this.iconType&&"search-engnie-add"!==this.iconType||r()(e).call(e,"%s"))||(t=!1),this.changeValidate({target:t}),t}_validateName(e){return e||"custom-icon"===this.iconType?this.changeValidate({name:!0}):this.changeValidate({name:!1}),e}_validateAll(){this.changeValue({name:this.$name.value,target:this.$target.value}),this._validateName(this.value.name),this._validateTarget();for(const e in this.validate)if(Object.prototype.hasOwnProperty.call(this.validate,e)){if(!1===this.validate[e])return!1}return!0}changeValidate(e){this.validate=Object.assign(Object.assign({},this.validate),e)}async _submit(){var e;if(!this._validateAll())return;this.subSpin=!0;const t=await this.$imgs.handleValue();if(this.subSpin=!1,!t)return;this.changeValue({bgColorImage:null});const i={value:Object.assign({},this.value)};r()(e=i.value.target).call(e,":")||(i.value.target="http://"+this.value.target);const o=Object.assign({},i.value);"color"===o.bgType?delete o.bgImage:"image"===o.bgType&&(delete o.bgFont,delete o.bgText,delete o.bgColorImage,"transparent"===o.bgColor&&(o.bgColor=void 0));const n=new CustomEvent("on-submit",{detail:{value:o}});this.dispatchEvent(n)}_cancel(){const e=new CustomEvent("on-cancel");this.dispatchEvent(e)}changeValue(e){this.value=Object.assign(Object.assign({},this.value),e)}reset(){this.validate={name:null,target:null},this.value=Object.assign({},S.defaultValue)}openTipQuestion(){this.tipQuestion=!0}_renderBasic(){const{value:e}=this;return"custom-icon"===this.iconType?n.e`<div .hidden="${this.popup}" class="item">
          <div class="label-box">
            <span class="label">${Object(w.i18n)("website_address")}</span
            ><span .hidden="${!1!==this.validate.target}" class="error">*${Object(w.i18n)("please_enter_url")}</span>
          </div>
          <input
            class="target"
            autocomplete="off"
            type="text"
            .value="${e.target||""}"
            .placeholder="${Object(w.i18n)("website_address")}"
            .readOnly="${this.readonlyTarget}"
            @input=${e=>{this._changeTarget(e)}}
          />
        </div>
        <div class="item">
          <div class="label-box">
            <span class="label">${Object(w.i18n)("website_name")}</span
            ><span .hidden="${!1!==this.validate.name}" class="error">*${Object(w.i18n)("name_error")}</span>
          </div>
          <input
            autocomplete="off"
            type="text"
            class="name"
            .value="${e.name||""}"
            .placeholder="${Object(w.i18n)("website_name")}"
            @input=${e=>{this.isAutoName=!1;const t=e.currentTarget.value;this.changeValue({name:t}),this._validateName(t)}}
          />
        </div>`:n.e` <div class="item">
          <div class="label-box">
            <span class="label">${Object(w.i18n)("search_engine")}</span
            ><span .hidden="${!1!==this.validate.name}" class="error">*${Object(w.i18n)("search_engine_error")}</span>
          </div>
          <input
            autocomplete="off"
            .value="${e.name||""}"
            type="text"
            class="name"
            .placeholder="${Object(w.i18n)("placeholder_name")}"
            @input=${e=>{const t=e.currentTarget.value;this.isAutoName=!1,this.changeValue({name:t}),this._validateName(t)}}
          />
        </div>
        <div class="item">
          <div class="label-box">
            <span class="label">${Object(w.i18n)("website_search_replace_char")}</span
            ><img
              @click="${this.openTipQuestion}"
              class="tip-question"
              src="${i(615)}"
              alt=""
            /><span .hidden="${!1!==this.validate.target}" class="error">*${Object(w.i18n)("format_error")}</span>
          </div>
          <textarea
            class="target global-scrollbar"
            rows="1"
            @input="${e=>this._changeTarget(e,!0)}"
            autocomplete="off"
            .value="${e.target||""}"
            .placeholder="${Object(w.i18n)("website_address")}"
          ></textarea>
        </div>`}_renderImgs(e,t){return n.e`<i-edit-img
      class="item"
      @on-change="${e=>this.changeValue(e.detail.value)}"
      .value=${e}
      .offsetRight=${t}
      .iconType="${this.iconType}"
      .modalBorderRadius="${this.popup?"0px":"3px"}"
    ></i-edit-img> `}render(){const e=this.sideRatio>.7?0:300*(this.sideRatio-.7);return n.e`
      ${this._renderBasic()} ${this._renderImgs(this.value,e)}
      <div class="item btn-box">
        <infinito-button primary .loading="${this.subSpin}" @click="${this._submit}"
          >${Object(w.i18n)("confirm")}</infinito-button
        >
        ${this.popup?"":n.e`<infinito-button class="btn-cancel" @click="${this._cancel}">${Object(w.i18n)("cancel")}</infinito-button>`}
      </div>
      <infinito-portal-entrance destination="tip-question">
        <tip-question
          @on-close="${()=>{this.tipQuestion=!1}}"
          .show="${this.tipQuestion}"
        ></tip-question>
      </infinito-portal-entrance>
    `}};O.styles=[x.a,s],O.defaultValue={bgType:"color",bgColor:"",bgFont:30,bgText:"",bgImage:"",target:"",name:"",bgColorImage:""},k([Object(n.g)({type:Number})],O.prototype,"sideRatio",void 0),k([Object(n.g)({type:Boolean})],O.prototype,"popup",void 0),k([Object(n.g)({type:String})],O.prototype,"iconType",void 0),k([Object(n.g)({type:Boolean})],O.prototype,"readonlyTarget",void 0),k([Object(n.g)({type:Object})],O.prototype,"value",void 0),k([Object(n.f)()],O.prototype,"subSpin",void 0),k([Object(n.f)()],O.prototype,"isAutoName",void 0),k([Object(n.f)()],O.prototype,"validate",void 0),k([Object(n.f)()],O.prototype,"tipQuestion",void 0),k([Object(n.h)(".target")],O.prototype,"$target",void 0),k([Object(n.h)(".name")],O.prototype,"$name",void 0),k([Object(n.h)("i-edit-img")],O.prototype,"$imgs",void 0),O=S=k([Object(n.c)("i-editicon")],O)},function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));i(17),i(19),i(31),i(89);var o=i(1),r=i(613),n=i.n(r),a=(i(644),i(642),o.b`/*!
 * Cropper.js v1.5.12
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2021-06-12T08:00:11.623Z
 */
.cropper-container {
  direction: ltr;
  font-size: 0;
  line-height: 0;
  position: relative;
  -ms-touch-action: none;
  touch-action: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
.cropper-container img {
  display: block;
  height: 100%;
  image-orientation: 0deg;
  max-height: none !important;
  max-width: none !important;
  min-height: 0 !important;
  min-width: 0 !important;
  width: 100%;
}
.cropper-wrap-box,
.cropper-canvas,
.cropper-drag-box,
.cropper-crop-box,
.cropper-modal {
  bottom: 0;
  left: 0;
  position: absolute;
  right: 0;
  top: 0;
}
.cropper-wrap-box,
.cropper-canvas {
  overflow: hidden;
}
.cropper-drag-box {
  background-color: #fff;
  opacity: 0;
}
.cropper-modal {
  background-color: #000;
  opacity: 0.5;
}
.cropper-view-box {
  display: block;
  height: 100%;
  outline: 1px solid #39f;
  outline-color: rgba(51, 153, 255, 0.75);
  overflow: hidden;
  width: 100%;
}
.cropper-dashed {
  border: 0 dashed #eee;
  display: block;
  opacity: 0.5;
  position: absolute;
}
.cropper-dashed.dashed-h {
  border-bottom-width: 1px;
  border-top-width: 1px;
  height: calc(100% / 3);
  left: 0;
  top: calc(100% / 3);
  width: 100%;
}
.cropper-dashed.dashed-v {
  border-left-width: 1px;
  border-right-width: 1px;
  height: 100%;
  left: calc(100% / 3);
  top: 0;
  width: calc(100% / 3);
}
.cropper-center {
  display: block;
  height: 0;
  left: 50%;
  opacity: 0.75;
  position: absolute;
  top: 50%;
  width: 0;
}
.cropper-center::before,
.cropper-center::after {
  background-color: #eee;
  content: ' ';
  display: block;
  position: absolute;
}
.cropper-center::before {
  height: 1px;
  left: -3px;
  top: 0;
  width: 7px;
}
.cropper-center::after {
  height: 7px;
  left: 0;
  top: -3px;
  width: 1px;
}
.cropper-face,
.cropper-line,
.cropper-point {
  display: block;
  height: 100%;
  opacity: 0.1;
  position: absolute;
  width: 100%;
}
.cropper-face {
  background-color: #fff;
  left: 0;
  top: 0;
}
.cropper-line {
  background-color: #39f;
}
.cropper-line.line-e {
  cursor: ew-resize;
  right: -3px;
  top: 0;
  width: 5px;
}
.cropper-line.line-n {
  cursor: ns-resize;
  height: 5px;
  left: 0;
  top: -3px;
}
.cropper-line.line-w {
  cursor: ew-resize;
  left: -3px;
  top: 0;
  width: 5px;
}
.cropper-line.line-s {
  bottom: -3px;
  cursor: ns-resize;
  height: 5px;
  left: 0;
}
.cropper-point {
  background-color: #39f;
  height: 5px;
  opacity: 0.75;
  width: 5px;
}
.cropper-point.point-e {
  cursor: ew-resize;
  margin-top: -3px;
  right: -3px;
  top: 50%;
}
.cropper-point.point-n {
  cursor: ns-resize;
  left: 50%;
  margin-left: -3px;
  top: -3px;
}
.cropper-point.point-w {
  cursor: ew-resize;
  left: -3px;
  margin-top: -3px;
  top: 50%;
}
.cropper-point.point-s {
  bottom: -3px;
  cursor: s-resize;
  left: 50%;
  margin-left: -3px;
}
.cropper-point.point-ne {
  cursor: nesw-resize;
  right: -3px;
  top: -3px;
}
.cropper-point.point-nw {
  cursor: nwse-resize;
  left: -3px;
  top: -3px;
}
.cropper-point.point-sw {
  bottom: -3px;
  cursor: nesw-resize;
  left: -3px;
}
.cropper-point.point-se {
  bottom: -3px;
  cursor: nwse-resize;
  height: 20px;
  opacity: 1;
  right: -3px;
  width: 20px;
}
@media (min-width: 768px) {
  .cropper-point.point-se {
    height: 15px;
    width: 15px;
  }
}
@media (min-width: 992px) {
  .cropper-point.point-se {
    height: 10px;
    width: 10px;
  }
}
@media (min-width: 1200px) {
  .cropper-point.point-se {
    height: 5px;
    opacity: 0.75;
    width: 5px;
  }
}
.cropper-point.point-se::before {
  background-color: #39f;
  bottom: -50%;
  content: ' ';
  display: block;
  height: 200%;
  opacity: 0;
  position: absolute;
  right: -50%;
  width: 200%;
}
.cropper-invisible {
  opacity: 0;
}
.cropper-bg {
  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC');
}
.cropper-hide {
  display: block;
  height: 0;
  position: absolute;
  width: 0;
}
.cropper-hidden {
  display: none !important;
}
.cropper-move {
  cursor: move;
}
.cropper-crop {
  cursor: crosshair;
}
.cropper-disabled .cropper-drag-box,
.cropper-disabled .cropper-face,
.cropper-disabled .cropper-line,
.cropper-disabled .cropper-point {
  cursor: not-allowed;
}
`),s=o.b`:host {
  display: block;
  position: relative;
  z-index: 99999999;
}
.img-modal {
  position: fixed;
  z-index: 111;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.img-modal.hide {
  display: none;
}
.img-modal .img-modal-mask {
  position: absolute;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
}
.img-modal .img-modal-content {
  width: 640px;
  padding: 0 20px;
  box-sizing: border-box;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background-color: #fff;
  box-shadow: 0 6px 6px rgba(0, 0, 0, 0.2);
  border-radius: 3px;
}
.img-modal .modal-header .close {
  margin-top: 18px;
  text-align: right;
}
.img-modal .modal-header .close i-usesvg {
  color: #d9d6d7;
  width: 14px;
  height: 14px;
  cursor: pointer;
}
.img-modal .modal-header .title {
  margin-top: 8px;
  margin-bottom: 50px;
  text-align: center;
  font-size: 20px;
  font-weight: 500;
  color: #333333;
  line-height: 28px;
}
.img-modal .modal-body {
  display: flex;
  padding-bottom: 20px;
}
.img-modal .cropper {
  position: relative;
  width: 260px;
  height: 260px;
  margin-right: 24px;
  flex-shrink: 0;
  margin-bottom: 32px;
}
.img-modal .float-option {
  position: absolute;
  bottom: -32px;
  width: 100%;
  box-sizing: border-box;
  display: flex;
  justify-content: space-between;
}
.img-modal .float-option i-usesvg {
  cursor: pointer;
  width: 18px;
  height: 18px;
  color: #333;
  opacity: 0.3;
  transition: opacity 0.2s;
}
.img-modal .float-option i-usesvg:hover {
  opacity: 1;
}
.img-modal .float-option-left > i-usesvg {
  margin-right: 16px;
}
.img-modal .float-option-right > i-usesvg {
  margin-left: 16px;
}
.img-modal .option {
  position: relative;
  flex-grow: 1;
}
.img-modal .option .title {
  display: block;
  margin-bottom: 14px;
  line-height: 1;
  font-weight: 500;
  color: #333333;
}
.img-modal .preview-box .preview {
  border: 1px solid #DADCE0;
  box-sizing: border-box;
  overflow: hidden;
  margin-bottom: 30px;
  width: 80px;
  height: 80px;
  border-radius: 6px;
  -webkit-mask-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYGBgAAgwAAAEAAGbA+oJAAAAAElFTkSuQmCC);
          mask-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYGBgAAgwAAAEAAGbA+oJAAAAAElFTkSuQmCC);
}
.img-modal .color-box {
  position: relative;
}
.img-modal .color-box i-colorpicker {
  margin-right: 28px;
}
.modal-footer {
  margin-top: 20px;
  margin-bottom: 40px;
}
.modal-footer .btn-box {
  padding: 0 100px;
  display: flex;
  justify-content: space-between;
}
.modal-footer .btn-box infinito-button {
  outline: none;
  border: none;
  width: 120px;
  height: 42px;
  background: #efefef;
  border-radius: 6px;
  font-size: 16px;
  font-weight: 500;
  line-height: 22px;
  color: #333333;
  cursor: pointer;
}
.cropper .cropper-wrap-box {
  background-color: currentColor;
}
.cropper img {
  max-width: 100%;
  max-height: 100%;
}
.cropper .cropper-wrap-box {
  background-color: currentColor;
}
.cropper .cropper-crop-box {
  background-color: currentColor;
}
.cropper .cropper-point.point-se {
  height: 5px;
  width: 5px;
}
`,l=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let c=class extends o.a{constructor(){super(...arguments),this.modalStatus=!1,this.rgba="",this.needBackground=!1,this.initRgba="",this.title="",this.borderRadius="3px",this.showImg=!1,this.changed=!1,this.cropper=null}static create(e){const t=null==e?void 0:e.title,i=null==e?void 0:e.needBackground,o=(null==e?void 0:e.borderRadius)||"3px",r=document.body,n=document.createElement("i-cropper");return n.borderRadius=o,t&&n.setAttribute("title",t),i&&n.setAttribute("needBackground",""+i),r.appendChild(n),this.instance=n,n}static destroy(){var e,t;null===(t=null===(e=this.instance)||void 0===e?void 0:e.parentNode)||void 0===t||t.removeChild(this.instance),this.instance=null}init(e,t){this.showImg=!1,this.rgba=t||"transparent",this.initRgba=t||"transparent",this.cropper?(this.cropper.replace(e),this.cropper.reset()):(this.$img.src=e,this.cropper=new n.a(this.$img,{aspectRatio:1,zoomOnWheel:!0,autoCropArea:.9999,preview:this.$preview,checkCrossOrigin:!1,dragMode:"move",ready:()=>{this.showImg=!0},zoom:()=>{this.changed=!0},cropend:()=>{this.changed=!0}}))}close(e=!0){this.modalStatus=!1,this.showImg=!1,e&&(this.rgba=""),this.changed=!1;const t=new CustomEvent("on-close-cropper",{bubbles:!0,composed:!0});this.dispatchEvent(t)}show(){this.modalStatus=!0;const e=new CustomEvent("on-show-cropper",{bubbles:!0,composed:!0});this.dispatchEvent(e)}_rotateCropper(e){this.cropper.rotate(e),this.changed=!0}_scaleCropper(e){this.cropper.zoom(e),this.changed=!0}_resetCropper(){this.rgba=this.initRgba,this.cropper.reset(),this.changed=!1,requestAnimationFrame(()=>{this.$colorPicker.resetActiveIndex()})}_onSubmitImg(){const e={minWidth:512,minHeight:512,maxWidth:600,maxHeight:600};this.needBackground&&(e.fillColor=this.rgba||"transparent"),this.cropper.getCroppedCanvas(e).toBlob(e=>{const t=new CustomEvent("on-change",{detail:{data:e,color:this.rgba,changed:this.changed}});this.dispatchEvent(t),this.close()},"image/png")}_pickColor(e){const{value:t}=e.detail;this.rgba=t,this.changed=!0}render(){return o.e` <div class="img-modal ${this.modalStatus?"show":"hide"}">
      <div class="img-modal-mask"></div>
      <div class="img-modal-content" style="border-radius:${this.borderRadius}">
        <section class="modal-header">
          <div class="close">
            <i-usesvg @click="${this.close}" type="icon-guanbi1" iconfont></i-usesvg>
          </div>
          <div class="title">${this.title||i18n("custom_icon")}</div>
        </section>
        <section class="modal-body">
          <div
            style="${this.rgba?`color:${this.rgba};`:"color:transparent;"}${this.showImg?"opacity:1;":"opacity:0;"}"
            class="cropper"
          >
            <img class="file-img" crossorigin="anonymous" src="" alt="" />
            <div class="float-option">
              <div class="float-option-left">
                <i-usesvg @click="${()=>this._rotateCropper(90)}" type="infinity-pro-pure-icon-redo"></i-usesvg>
                <i-usesvg @click="${()=>this._rotateCropper(-90)}" type="infinity-pro-pure-icon-undo"></i-usesvg>
              </div>
              <div class="float-option-right">
                <i-usesvg @click="${()=>this._scaleCropper(-.1)}" type="infinity-pro-pure-icon-zoom-out"></i-usesvg>
                <i-usesvg @click="${()=>this._scaleCropper(.1)}" type="infinity-pro-pure-icon-zoom-in"></i-usesvg>
              </div>
            </div>
          </div>
          <div class="option">
            <div class="preview-box">
              <span class="title">${i18n("preview")}</span>
              <div
                style="${this.rgba?`background-color:${this.rgba};`:"background-color:transparent;"}"
                class="preview"
              ></div>
            </div>
            <div class="color-box">
              <span class="title">${i18n("bg_color")}</span>
              <i-colorpicker .value="${this.rgba||"transparent"}" @on-change="${this._pickColor}"></i-colorpicker>
            </div>
          </div>
        </section>
        <section class="modal-footer">
          <div class="btn-box">
            <infinito-button @click="${this.close}">${i18n("cancel")}</infinito-button>
            <infinito-button @click="${this._resetCropper}">${i18n("reset")}</infinito-button>
            <infinito-button primary @click="${this._onSubmitImg}">${i18n("confirm")}</infinito-button>
          </div>
        </section>
      </div>
    </div>`}};c.styles=[s,a],c.instance=null,l([Object(o.h)(".file-img")],c.prototype,"$img",void 0),l([Object(o.h)(".preview")],c.prototype,"$preview",void 0),l([Object(o.h)("i-colorpicker")],c.prototype,"$colorPicker",void 0),l([Object(o.g)({type:Boolean})],c.prototype,"modalStatus",void 0),l([Object(o.g)({type:String})],c.prototype,"rgba",void 0),l([Object(o.g)({type:Boolean})],c.prototype,"needBackground",void 0),l([Object(o.g)({type:String})],c.prototype,"title",void 0),l([Object(o.g)({type:String})],c.prototype,"borderRadius",void 0),l([Object(o.f)()],c.prototype,"showImg",void 0),c=l([Object(o.c)("i-cropper")],c)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";i.r(t),i.d(t,"userStore",(function(){return O}));i(11),i(60),i(17),i(19),i(31);var o=i(7),r=i.n(o),n=i(15),a=i.n(n),s=i(334),l=i.n(s),c=i(135),d=i.n(c),p=i(4),h=i(327),u=i(37),g=i(0),f=i(128),m=i(35),b=i.n(m),y=i(162),v=i(210),w=i(605),x=i(604),_=i(12),A=i(47),S=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};class k extends h.a{constructor(){super(),this.isExpired=!1,this.isLogin=!1,this.token="",this.userInfo={},this.refreshToken="",this.mobileloginExpire=0,this.mobileloginUrl="",this.areaCodeList=[],this.thirdList=[{type:u.g.ThirdLoginType.wechat,title:i18n("wechat"),bindStatus:!1,nick_name:""},{type:u.g.ThirdLoginType.qq,title:"QQ",bindStatus:!1,nick_name:""},{type:u.g.ThirdLoginType.google,title:"Google",bindStatus:!1,nick_name:""},{type:u.g.ThirdLoginType.facebook,title:"Facebook",bindStatus:!1,abondon:!0,nick_name:""},{type:u.g.ThirdLoginType.weibo,title:i18n("xin_lang_weibo"),bindStatus:!1,abondon:!0,nick_name:""}],this.userProfilePromise=r.a.resolve(),this.wpColorUpdate=0,this.logining=!1,this.modalOpen=!1,this.removeAccountDisableSec=10,this.removeAccountDisableTimer=null,this.showLoginTipModal=!1,this.profileModal=!1,this.syncListModal=!1,this.isModify=!1,this.openMiniWindow=e=>{const t=Math.floor(window.screenY+200),i=Math.floor(window.screenX+window.innerWidth/3);return window.open(e,"_blank",`top=${t},left=${i},height=600,width=770,menubar=no,toolbar=yes,location=yes,status=no,resizable=no`)},this.binding=!1,this.bindListener=e=>{let t;const i=()=>{t=setTimeout(()=>{e.postMessage({from:"origin_login"},"*"),e.closed?(window.removeEventListener("message",o),this.binding=!1):i()},500)};i();const o=async e=>{try{if(!e.data&&!e.data.key&&"login"!==e.data.key)return;clearTimeout(t),window.removeEventListener("message",o,!1);const{message:i}=e.data;let r;switch(i.type){case u.g.ThirdLoginType.weibo:case u.g.ThirdLoginType.google:case u.g.ThirdLoginType.facebook:case u.g.ThirdLoginType.wechat:case u.g.ThirdLoginType.qq:r=await u.g.bindThird(i.type,i.code)}if(r.error)return void f.message.error(r.error.message);this.bindSuccess("third",r.data),f.message.success(i18n("bind_success"))}catch(e){f.message.error(i18n("network_error"))}finally{this.binding=!1}};window.addEventListener("message",o,!1)},this.countdownTimer=null,this.checkMobileUrlTimer=null,this.isShowLogoutConfirm=!1,this.showConfirmOpt="",this.isShowSecondProfileModal=!1,this.secondProfileModalType=null,this.clearAllData=!1,this.loading=!1,this.URL=g.y}get thirdAccountList(){const e={};return this.userInfo.third_account&&this.userInfo.third_account.forEach(t=>{e[t.platform]=t}),this.thirdList.map(t=>e[t.type]?Object.assign(Object.assign({},t),{bindStatus:!0,nick_name:e[t.type].nick_name}):t)}setWpColorUpdate(e){this.wpColorUpdate=e}closeModal(){this.modalOpen=!1}openModal(){this.modalOpen=!0}toggleLoginTipModal(){this.showLoginTipModal=!this.showLoginTipModal}closeLoginTipModal(){this.showLoginTipModal=!1}closeProfileModal(){this.profileModal=!1}openProfileModal(){this.profileModal=!0,this.openModify()}closeSyncListModal(){this.syncListModal=!1}openSyncListModal(){this.syncListModal=!0}openModify(){this.isModify=!0}async modifyProfile(e){try{const t=await u.g.updateProfile(e);Object(p.i)(()=>{if(t&&0===t.code){const{user:{name:e,gender:i,avatar:o}}=t.data;this.userInfo.name=e,this.userInfo.gender=i,this.userInfo.avatar=o}else f.message.error(i18n("update_data_failure"))})}catch(e){f.message.error(e.message)}}async getUserProfile(){const e=await u.g.getUserProfile();Object(p.i)(()=>{if(e)if(0===e.code&&this.isLogin){const{gender:t,name:i,avatar:o}=e.data;this.userInfo.name=i,this.userInfo.gender=t,this.userInfo.avatar=o,this.userInfo["auto-backup"]=e.data["auto-backup"],this.userInfo["wp-color-update"]=e.data["wp-color-update"],this.userInfo["backup-version-v2"]=e.data["backup-version-v2"],this.userInfo.email=e.data.email,this.userInfo.phone_number=e.data.phone_number,this.userInfo.third_account=e.data.third_account}else 3012===e.code&&(f.message.error(e.message),this.exitAccount())})}async getAreaCodeList(){const{data:e,error:t}=await u.g.getAreaCodeList();t||(null==e?void 0:e.length)&&Object(p.i)(()=>{this.areaCodeList=e})}async updateAvatar(e){try{return await u.g.uploadAvatar(e)}catch(e){f.message.error(i18n("upload_avatar_failure"))}}closeModify(){this.isModify=!1}thirdPartyLogin(e){let t;switch(this.logining=!0,e){case"facebook":t=this.URL+"/login/facebook";break;case"google":t=this.URL+"/login/google";break;case"qq":t=this.URL+"/login/qq";break;case"sina":t=this.URL+"/login/weibo";break;case"wechat":t=this.URL+"/login/wechat"}setTimeout(async()=>{const e=this.openMiniWindow(t);if(this.opener=e,g.n)return;const i=setInterval(()=>{e.postMessage({from:"origin_login"},"*")},300),o=e=>{if(!e.data&&!e.data.key&&"login"!==e.data.key)return;clearInterval(i),window.removeEventListener("message",o,!1);const{message:t}=e.data;this.login3rdSuccess(t)};window.addEventListener("message",o,!1)},300)}get isLastId(){const e=this.userInfo||{},t=e.third_account||[];let i=0;return e.email&&++i,e.phone_number&&++i,i+=t.length,i<=1}thirdPartyBind(e){if(this.binding)return;let t;switch(this.binding=!0,e){case u.g.ThirdLoginType.weibo:case u.g.ThirdLoginType.google:case u.g.ThirdLoginType.facebook:case u.g.ThirdLoginType.wechat:case u.g.ThirdLoginType.qq:t=this.openMiniWindow(`${g.y}/bind/to?type=${e}`),this.bindListener(t)}}async thirdPartyUnbind(e){let t;switch(e){case u.g.ThirdLoginType.weibo:case u.g.ThirdLoginType.google:case u.g.ThirdLoginType.facebook:case u.g.ThirdLoginType.qq:case u.g.ThirdLoginType.wechat:t=await u.g.unbindThird(e)}return t}bindSuccess(e,t){if("email"===e)this.userInfo.email=t;else if("phone"===e)this.userInfo.phone_number=t;else if("third"===e){const e=this.userInfo.third_account||[];e.push(t),this.userInfo.third_account=e}}unbindSuccess(e,t){if("email"===e)this.userInfo.email=null;else if("phone"===e)this.userInfo.phone_number=null;else if("third"===e){const e=this.userInfo.third_account||[],i=e.findIndex(e=>e.platform===t);if(-1===i)return;e.splice(i,1),this.userInfo.third_account=e}}async login(e){const t={};if(t.password=e.password,"email"===e.type)t.email=e.account;else{if("phone"!==e.type)return;t.phone_number=e.account}const i=await u.g.login(t);Object(p.i)(()=>{if(!i||0!==i.code)throw f.message.error(i.message),new Error(i.code);this.loginEmailSuccess(i.data.user),this.setToken(i.data),this.setRefreshToken(i.data.refreshToken)})}async getMobileloginUrl(e=!1){if(e&&(this.mobileloginUrl="",this.mobileloginExpire=0),y.f){const{data:e,error:t}=await u.g.getMobileloginUrl();if(t)return void Object(p.i)(()=>{this.mobileloginExpire=0});Object(p.i)(()=>{this.mobileloginUrl=e.url,this.mobileloginExpire=Math.floor(e.expire/1e3)}),this.checkMobileloginUrl(e.code,e.type),0!==this.mobileloginExpire&&(this.countdownTimer=setInterval(()=>{Object(p.i)(()=>{this.mobileloginExpire-=1}),this.mobileloginExpire<=0&&clearInterval(this.countdownTimer)},1e3))}}async checkMobileloginUrl(e,t,i=5e3){y.f&&this.mobileloginExpire>3&&(clearTimeout(this.checkMobileUrlTimer),this.checkMobileUrlTimer=setTimeout(async()=>{const{data:o}=await u.g.checkMobileloginUrl(e,t);if(o&&o.expired)return clearInterval(this.countdownTimer),void Object(p.i)(()=>{this.mobileloginExpire=0});this.checkMobileloginUrl(e,t,i)},i))}async loginEmailSuccess(e){this.logining=!1,this.closeModal(),this.isLogin=!0,this.userInfo=e,this.isExpired=!1,this.settingLoginSuccess()}setUserData(e){this.logining=!1,this.closeModal(),this.isLogin=e.isLogin,this.userInfo=e,this.isExpired=!1;["token","refreshToken","isLogin"].forEach(e=>delete this.userInfo[e])}async login3rdSuccess(e){var t;if(!e||!Object.keys(e).length)return void this.cancelLogin();const i=e["login-type"];if(a()(t=["qq","wechat"]).call(t,i)){const t=await u.g.loginWithUid(e);0===t.code?Object(p.i)(()=>{this.setUserData(e),this.setToken(t.data),this.setRefreshToken(t.data.refreshToken)}):3006===t.code&&f.message.error("获取token失败")}else this.setUserData(e),this.setToken(e),this.setRefreshToken(e.refreshToken);this.settingLoginSuccess()}settingLoginSuccess(){x.b.changeSetting("view","isHideIcp",!0)}cancelLogin(){var e;this.logining=!1,null===(e=this.opener)||void 0===e||e.close()}toggleClear(e){this.clearAllData=e}logout(e){this.isShowLogoutConfirm=!0,this.showConfirmOpt=e,"remove"===e&&(this.removeAccountDisableSec=10,clearInterval(this.removeAccountDisableTimer),this.removeAccountDisableTimer=setInterval(()=>{Object(p.i)(()=>{this.removeAccountDisableSec-=1,0===this.removeAccountDisableSec&&(clearInterval(this.removeAccountDisableTimer),this.removeAccountDisableTimer=null)})},1e3))}showSecondProfileModal(e){this.isShowSecondProfileModal=!0,this.secondProfileModalType=e}closeSecondProfileModal(){this.isShowSecondProfileModal=!1,this.secondProfileModalType=null}async exitAccount(){this.loading=!0,await new r.a(e=>{setTimeout(()=>{this.clearAllData?this.clearAllStore().then(e):e(null)},200)}),Object(p.i)(()=>{this.isLogin=!1,this.userInfo={},this.clearToken()}),this.clearAllData?window.location.reload():(Object(p.i)(()=>this.loading=!1),this.closeLogoutConfirm(),this.closeProfileModal(),g.s&&w.pluginStore.hideLast())}async deleteAccount(){this.loading=!0;const e=await u.g.deleteAccount();Object(p.i)(()=>{e&&0===e.code?this.exitAccount():(3012===e.code&&this.exitAccount(),f.message.error(e.message)),this.loading=!1})}restoreKeysToStorage(e){e.forEach(({data:e,key:t})=>localStorage.setItem(t,e))}async clearAllStore(){this.stopAutoBackupReaction(),this.stopToStorageReaction(),await _.a.deleteAllForLogout();const e=[A.c,A.d];await this._deleteIdb(e),v.slave.sendMessage("tabs-reload")}async _deleteIdb(e){const t=await new r.a(e=>l()(b.a).call(b.a,(t,i)=>e(i)));await r.a.all(e.map(e=>new r.a(i=>{const o=e.split("->");if(1===o.length)return a()(t).call(t,e)?void b.a.removeItem(e,i):void i(null);i(null),a()(t).call(t,o[0])&&b.a.getItem(o[0],e=>{d()(o).call(o,(e,t,i)=>(i===o.length-1&&Reflect.deleteProperty(e,t),e[t]),e),b.a.setItem(o[0],i)})})))}_clearLocalStorage(e){const t=new Map;e.filter(Boolean).forEach(e=>{const i=e.split("->");if(1===i.length)return void t.set(e,localStorage.getItem(e));const o=JSON.parse(localStorage.getItem(i[0]));i.slice(1).forEach((e,t)=>{const r=0===t?o:o[i[t]];for(const t in r)e!==t&&Reflect.deleteProperty(r,t)}),t.set(i[0],JSON.stringify(o))}),localStorage.clear();for(const e of l()(t).call(t))localStorage.setItem(e,t.get(e))}closeLogoutConfirm(){this.isShowLogoutConfirm=!1}setToken(e){this.token=e.token}setRefreshToken(e){this.refreshToken=e}clearToken(){this.token="",this.refreshToken=""}setOutdated(){this.isExpired=!0,this.isLogin=!1}toggleReLogin(){this.isExpired=!1}getPhoneNumber(){if(this.userInfo.phone_number){const e=this.userInfo.phone_number+"";return`${e.slice(0,3)}****${e.slice(-4)}`}return""}}S([p.g],k.prototype,"isExpired",void 0),S([p.g],k.prototype,"isLogin",void 0),S([p.g],k.prototype,"token",void 0),S([p.g],k.prototype,"userInfo",void 0),S([p.g],k.prototype,"refreshToken",void 0),S([p.g],k.prototype,"mobileloginExpire",void 0),S([p.g],k.prototype,"mobileloginUrl",void 0),S([p.g],k.prototype,"areaCodeList",void 0),S([p.e],k.prototype,"thirdAccountList",null),S([p.g],k.prototype,"wpColorUpdate",void 0),S([p.b],k.prototype,"setWpColorUpdate",null),S([p.g],k.prototype,"opener",void 0),S([p.g],k.prototype,"logining",void 0),S([p.g],k.prototype,"modalOpen",void 0),S([p.g],k.prototype,"removeAccountDisableSec",void 0),S([p.g],k.prototype,"removeAccountDisableTimer",void 0),S([p.b],k.prototype,"closeModal",null),S([p.b],k.prototype,"openModal",null),S([p.g],k.prototype,"showLoginTipModal",void 0),S([p.b],k.prototype,"toggleLoginTipModal",null),S([p.b],k.prototype,"closeLoginTipModal",null),S([p.g],k.prototype,"profileModal",void 0),S([p.g],k.prototype,"syncListModal",void 0),S([p.b],k.prototype,"closeProfileModal",null),S([p.b],k.prototype,"openProfileModal",null),S([p.b],k.prototype,"closeSyncListModal",null),S([p.b],k.prototype,"openSyncListModal",null),S([p.g],k.prototype,"isModify",void 0),S([p.b],k.prototype,"openModify",null),S([p.b],k.prototype,"modifyProfile",null),S([p.b],k.prototype,"getUserProfile",null),S([p.b],k.prototype,"getAreaCodeList",null),S([p.b],k.prototype,"updateAvatar",null),S([p.b],k.prototype,"closeModify",null),S([p.b],k.prototype,"thirdPartyLogin",null),S([p.g],k.prototype,"binding",void 0),S([p.e],k.prototype,"isLastId",null),S([p.b],k.prototype,"thirdPartyBind",null),S([p.b],k.prototype,"thirdPartyUnbind",null),S([p.b],k.prototype,"bindSuccess",null),S([p.b],k.prototype,"unbindSuccess",null),S([p.b],k.prototype,"login",null),S([p.b],k.prototype,"getMobileloginUrl",null),S([p.b],k.prototype,"checkMobileloginUrl",null),S([p.b],k.prototype,"loginEmailSuccess",null),S([p.b],k.prototype,"setUserData",null),S([p.b],k.prototype,"login3rdSuccess",null),S([p.b],k.prototype,"cancelLogin",null),S([p.g],k.prototype,"isShowLogoutConfirm",void 0),S([p.g],k.prototype,"showConfirmOpt",void 0),S([p.g],k.prototype,"isShowSecondProfileModal",void 0),S([p.g],k.prototype,"secondProfileModalType",void 0),S([p.g],k.prototype,"clearAllData",void 0),S([p.b],k.prototype,"toggleClear",null),S([p.b],k.prototype,"logout",null),S([p.b],k.prototype,"showSecondProfileModal",null),S([p.b],k.prototype,"closeSecondProfileModal",null),S([p.g],k.prototype,"loading",void 0),S([p.b],k.prototype,"exitAccount",null),S([p.b],k.prototype,"deleteAccount",null),S([p.b],k.prototype,"clearAllStore",null),S([p.b],k.prototype,"closeLogoutConfirm",null),S([p.b],k.prototype,"setToken",null),S([p.b],k.prototype,"setRefreshToken",null),S([p.b],k.prototype,"clearToken",null),S([p.b],k.prototype,"setOutdated",null),S([p.b],k.prototype,"toggleReLogin",null);const O=new k;Object(p.c)(()=>{O.firstSync&&(O.isLogin?(O.closeModal(),O.toggleReLogin(),O.userProfilePromise=O.getUserProfile()):(O.closeProfileModal(),O.closeSecondProfileModal()))}),O.initSyncStore(_.k,["userInfo","isLogin","token","refreshToken","wpColorUpdate"]),_.i.injectUserStore(O),_.i.injectSendTabsSync(e=>{v.slave.sendMessage("tabs-sync",e)})},function(e,t,i){"use strict";i.d(t,"b",(function(){return y})),i.d(t,"a",(function(){return w}));var o=i(15),r=i.n(o),n=(i(17),i(19),i(31),i(11),i(60),i(4)),a=i(327),s=i(26),l=i(102),c=i(147),d=i(333),p=i(0),h=i(506),u=i(520),g=i(329),f=i(12),m=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};class b extends a.a{constructor(){super(...arguments),this.localSettings={},this.innerWidth=window.innerWidth,this.innerHeight=window.innerHeight,this.iconSpaceWidth=0,this.iconSpaceHeight=0,this.setting=this.init(),this.updatetime=0,this.permission={topUseful:-1,topBookmark:-1,searchSuggest:-1,gmailNotice:-1,gmailCount:-1,todoNotice:-1},this.logs=new Map,this.permissionMapper={topBookmark:[["bookmarks"],["chrome://favicon/"]],topUseful:[["topSites"],["chrome://favicon/"]],searchSuggest:[[],["https://suggestion.baidu.com/","https://google.com/"]],gmailNotice:[["notifications"],["https://mail.google.com/"]],gmailCount:[[],["https://mail.google.com/"]],todoNotice:[["notifications"],[]]},this.showSettingHomeModal=!1,this.webClickName=""}init(e={}){return{notice:Object.assign({},c.b.notice),link:Object.assign({},c.b.link),view:Object.assign({},c.b.view),layout:Object.assign({},c.b.layout),animation:Object.assign({},c.b.animation),icon:Object.assign({},c.b.icon),search:Object.assign({},c.b.search),font:Object.assign({},c.b.font),_v1Setting:e}}get withPermissionTopUseful(){return this.setting.view.topUseful&&1===this.permission.topUseful}get withPermissionTopBookmark(){return this.setting.view.topBookmark&&1===this.permission.topBookmark}get withPermissionSearchSuggest(){return this.setting.search.searchSuggest&&1===this.permission.searchSuggest}get needPermissionList(){const e=[],{view:t,notice:i,search:o}=this.setting,{topUseful:r,topBookmark:n,searchSuggest:a,gmailNotice:s,gmailCount:l,todoNotice:c}=this.permission;return p.m&&o.searchSuggest&&1!==a&&e.push({key:"searchSuggest",title:i18n("permission_serch_suggest_title"),content:i18n("permission_serch_suggest_content")}),p.m&&i.gmail&&1!==s&&e.push({key:"gmailNotice",title:i18n("permission_gmail_notice_title"),content:i18n("permission_gmail_notice_content")}),p.m&&i.gmailNumber&&1!==l&&e.push({key:"gmailCount",title:i18n("permission_gmail_num_title"),content:i18n("permission_gmail_num_content")}),p.s||p.r||!t.topBookmark||1===n||e.push({key:"topBookmark",title:i18n("permission_top_bookmark_title"),content:i18n("permission_top_bookmark_content")}),p.s||p.r||!t.topUseful||1===r||e.push({key:"topUseful",title:i18n("permission_top_useful_title"),content:i18n("permission_top_useful_content")}),h.a.needNotificationPermission&&1!==c&&((p.s||p.r)&&"denied"===Notification.permission||e.push({key:"todoNotice",title:i18n("permission_todo_notice_title"),content:i18n("permission_todo_notice_content")})),e}get sideRatio(){return this.setting.view.scaleSide}reset(){this.setting=this.init(this.setting._v1Setting),this.changeLayoutCb(this.setting.layout.col,this.setting.layout.row)}diffRemote(e){return!n.d.structural(e.setting||{},this.setting)}sendSettingValue(){Object.keys(this.localSettings).length&&(g.a.sendEvent({settingValue:this.localSettings}),this.localSettings={})}async mergeRemote(e){const t=e.setting;if(!e.setting)return;const i=this.setting;this.setting={notice:Object.assign(Object.assign({},i.notice),t.notice),link:Object.assign(Object.assign({},i.link),t.link),view:Object.assign(Object.assign({},i.view),t.view),layout:Object.assign(Object.assign({},i.layout),t.layout),animation:Object.assign(Object.assign({},i.animation),t.animation),icon:Object.assign(Object.assign({},i.icon),t.icon),search:Object.assign(Object.assign({},i.search),t.search),font:Object.assign(Object.assign({},i.font),t.font),_v1Setting:t._v1Setting};const o=await s.a.getTimestamp();Object(n.i)(()=>{this.updatetime=o})}sendSettingLog(e,t){this.logs.has(e)&&clearTimeout(this.logs.get(e)),this.logs.set(e,setTimeout(()=>{g.a.sendEvent({settingAction:{[e]:t}}),this.logs.delete(e)},2e3))}async changeSetting(e,t,i){if(this.setting[e][t]===i)return;this.setting[e][t]=i,"layout"===e&&("custom"===t&&!0===i||"customItem"===t)&&(this.setting.layout.row=this.setting.layout.customItem[0],this.setting.layout.col=this.setting.layout.customItem[1],this.changeLayoutCb(this.setting.layout.col,this.setting.layout.row));let o=`${e}_${t}`,r=i;"layout"!==e||"col"!==t&&"row"!==t||(this.changeLayoutCb(this.setting.layout.col,this.setting.layout.row),o="layout",r=this.setting.layout.row+"*"+this.setting.layout.col),this.sendSettingLog(o,r),this.localSettings[o]=r;const a=await s.a.getTimestamp();Object(n.i)(()=>{this.updatetime=a}),this.changeSettingEffect(e,t,i)}changeLayoutCb(e,t){console.log("col, row",e,t),console.log("changeLayoutCb 未注册")}changeLayout(e){this.changeLayoutCb=e}changeSettingEffect(e,t,i){switch(!0){case"topBookmark"===t:i&&this.requestPermission("topBookmark",!0);break;case"topUseful"===t:i&&this.requestPermission("topUseful",!0);break;case"notice"===e&&"gmail"===t:i&&this.requestPermission("gmailNotice",!0);break;case"notice"===e&&"gmailNumber"===t:i&&this.requestPermission("gmailCount",!0);break;case"searchSuggest"===t:i&&this.requestPermission("searchSuggest",!0)}}async checkPermission(e){if(p.s||p.r){switch(e){case"todoNotice":case"gmailNotice":return void("granted"===Notification.permission?this.permission[e]=1:"default"===Notification.permission?this.permission[e]=-1:this.permission[e]=0)}if(p.s)return}if(1===this.permission[e]){const t=this.permissionMapper[e];try{if(await l.a.has(t[0],t[1]))return}catch(e){console.log(e)}Object(n.i)(()=>{this.permission[e]=-1})}const t=this.permissionMapper[e];try{await l.a.has(t[0],t[1])&&Object(n.i)(()=>{this.permission[e]=1})}catch(e){}}async requestPermission(e,t=!1){var i;if((p.s||p.r)&&r()(i=["todoNotice","gmailNotice"]).call(i,e))return await Object(u.a)(),void Object(n.i)(()=>{this.permission.todoNotice=1,this.permission.gmailNotice=1});const o=this.permissionMapper[e];if(t||0!==this.permission[e]&&1!==this.permission[e])try{await l.a.request(o[0],o[1]),Object(n.i)(()=>{this.permission[e]=1}),"gmailNotice"===e&&this.checkPermission("todoNotice")}catch(t){t&&"REJECT"===t.message&&Object(n.i)(()=>{this.permission[e]=0})}}async requestAllPermission(){if(p.s||p.r)return await Object(u.a)(),void Object(n.i)(()=>{this.permission.todoNotice=1,this.permission.gmailNotice=1});const e=[[],[]];this.needPermissionList.forEach(t=>{const i=this.permissionMapper[t.key];e[0].push(...i[0]),i&&e[1].push(...i[1])});try{await l.a.request(e[0],e[1]),Object(n.i)(()=>{this.needPermissionList.forEach(e=>{this.permission[e.key]=1})})}catch(e){Object(n.i)(()=>{this.needPermissionList.forEach(e=>{this.permission[e.key]=0})})}}resetPermission(e){this.permission[e]=-1}setIconSpace(e){this.setting.icon.scale=e.iconScale,this.setting.layout.colGap=e.colGap,this.setting.layout.rowGap=e.rowGap,this.setting.search.scale=e.searchScale}openSearchSuggest(){this.setting.search.searchSuggest?this.requestPermission("searchSuggest",!0):this.setting.search.searchSuggest=!0}get sideScaleRatio(){return this.setting.view.scaleSide}toggleShowSettingHome(e){this.setting.view.isShowHomepageBtn=!e}toggleSettingHomeModal(){this.webClickName="",this.showSettingHomeModal=!this.showSettingHomeModal}closeSettingHomeModal(){this.showSettingHomeModal=!1}setWebClickName(e){this.webClickName=e}}m([n.g],b.prototype,"innerWidth",void 0),m([n.g],b.prototype,"innerHeight",void 0),m([n.g],b.prototype,"iconSpaceWidth",void 0),m([n.g],b.prototype,"iconSpaceHeight",void 0),m([n.g],b.prototype,"setting",void 0),m([n.g],b.prototype,"updatetime",void 0),m([n.g],b.prototype,"permission",void 0),m([n.e],b.prototype,"withPermissionTopUseful",null),m([n.e],b.prototype,"withPermissionTopBookmark",null),m([n.e],b.prototype,"withPermissionSearchSuggest",null),m([n.e],b.prototype,"needPermissionList",null),m([n.e],b.prototype,"sideRatio",null),m([n.b],b.prototype,"reset",null),m([n.b],b.prototype,"mergeRemote",null),m([n.b],b.prototype,"changeSetting",null),m([n.b],b.prototype,"checkPermission",null),m([n.b],b.prototype,"requestPermission",null),m([n.b],b.prototype,"requestAllPermission",null),m([n.b],b.prototype,"resetPermission",null),m([n.b],b.prototype,"setIconSpace",null),m([n.b],b.prototype,"openSearchSuggest",null),m([n.e],b.prototype,"sideScaleRatio",null),m([n.b],b.prototype,"toggleShowSettingHome",null),m([n.g],b.prototype,"showSettingHomeModal",void 0),m([n.b],b.prototype,"toggleSettingHomeModal",null),m([n.b],b.prototype,"closeSettingHomeModal",null),m([n.g],b.prototype,"webClickName",void 0),m([n.b],b.prototype,"setWebClickName",null);const y=new b;y.initSyncStore(f.g,["setting","permission","updatetime"],c.b),y.initAutoBackup("setting",["setting"]),Object(n.c)(()=>{y.firstSync&&y.setting.view.topBookmark&&y.checkPermission("topBookmark")},{delay:50}),Object(n.c)(()=>{y.firstSync&&y.setting.view.topUseful&&y.checkPermission("topUseful")},{delay:50}),Object(n.c)(()=>{y.firstSync&&y.setting.notice.gmail&&y.checkPermission("gmailNotice")},{delay:50}),Object(n.c)(()=>{h.a.firstSync&&h.a.needNotificationPermission&&y.checkPermission("todoNotice")},{delay:50}),Object(n.c)(()=>{y.firstSync&&y.setting.notice.gmailNumber&&y.checkPermission("gmailCount")},{delay:50}),Object(n.c)(()=>{y.firstSync&&y.setting.search.searchSuggest&&y.checkPermission("searchSuggest")},{delay:50}),Object(n.c)(()=>{y.firstSync&&1===y.permission.gmailNotice&&s.a.send({key:"bg-notice-gmail-permission",data:!0})}),Object(n.c)(()=>{if(y.firstSync){const{gmail:e,gmailVoice:t,gmailNumber:i}=y.setting.notice,{gmailCount:o,gmailNotice:r}=y.permission;s.a.send({key:"bg-notice-gmail-updated",data:{gmail:e&&1===r,gmailVoice:t,gmailNumber:i&&(1===r||1===o)}})}},{delay:100}),Object(n.c)(()=>{if(y.firstSync){const e={"--side-ratio":y.sideRatio,"--main-ratio":y.setting.view.scaleMain,"--icon-radius":Math.round(100*y.setting.icon.radius)+"%","--icon-font-color":y.setting.font.color,"--icon-font-size":Math.ceil(Math.max(y.setting.font.size*y.setting.view.scaleMain,12))+"px","--icon-opacity":y.setting.icon.opacity,"--icon-visible":y.setting.icon.isHideIconName?"hidden":"visible","--search-radius":""+y.setting.search.radius,"--search-opacity":y.setting.search.opacity};s.a.setStyle(e)}},{delay:50}),Object(n.c)(()=>{if(y.firstSync){let e=0,t=20;y.withPermissionTopBookmark&&(e+=36),y.withPermissionTopUseful&&(t+=26);const i={"--top-bar-height":e+"px","--settings-icon-top-offset":t+"px"};s.a.setStyle(i)}});const v=e=>{const t={"--search-height":e.searchHeight,"--search-width":e.searchWidth,"--search-margin-top":e.searchMarginTop,"--search-margin-bottom":e.searchMarginBottom,"--search-ratio":e.searchRatio,"--icon-box-width":e.iconBoxWidth,"--icon-box-height":e.iconBoxHeight,"--icon-one-height":e.iconOneHeight,"--icon-width":e.iconWidth,"--mini-icon-padding":e.miniIconPadding,"--icon-ratio":e.iconRatio,"--icon-row":y.setting.layout.row,"--icon-col":y.setting.layout.col,"--main-icons-margin":e.iconsMargin};s.a.setStyle(t)},w=(e=!0)=>{const t={row:y.setting.layout.row,col:y.setting.layout.col,rowGap:y.setting.layout.rowGap,colGap:y.setting.layout.colGap,iconScale:y.setting.icon.scale,searchScale:y.setting.search.scale,innerHeight:innerHeight,innerWidth:innerWidth,miniMode:y.setting.icon.miniMode,fontSize:y.setting.font.size,topUseful:y.withPermissionTopUseful,topBookmark:y.withPermissionTopBookmark,mainRatio:y.setting.view.scaleMain};if(e)requestIdleCallback(()=>{const e=Object(d.a)(t);v(e)});else{const e=Object(d.a)(t);v(e)}};Object(n.c)(()=>{y.firstSync&&w(!1)},{delay:40}),window.addEventListener("resize",s.a.throttle(()=>{w(!1)},56))},function(e,t,i){"use strict";i.r(t),i.d(t,"pluginStore",(function(){return h}));var o=i(15),r=i.n(o),n=(i(17),i(19),i(11),i(4)),a=i(102),s=i(519);class l extends s.a{opened(e){}}const c=Object(s.b)(new l);var d=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};class p{constructor(){this.pluginsMap={"infinity://weather":"side-weather","infinity://todos":"side-todos","infinity://notes":"side-notes","infinity://history":"side-history","infinity://bookmarks":"side-bookmarks","infinity://extension":"side-extension","infinity://chrome-apps":"chrome-apps","infinity://wallpaper":"wallpaper","infinity://settings":"side-profile",search:"side-search",profile:"side-profile",editIcon:"side-editicon","side-tutorial":"side-tutorial"},this.pluginsTags={"side-weather":!1,"side-todos":!1,"side-notes":!1,"side-history":!1,"side-bookmarks":!1,"side-extension":!1,"chrome-apps":!1,"side-profile":!1,"side-search":!1,"side-editicon":!1,"side-tutorial":!1,wallpaper:!1},this.pluginViews=[],this.focusRepair=!1,Object(n.h)(()=>this.pluginViews.map(e=>e),([e])=>{c.opened(e)})}initDom(e){this.pluginsTags[e]=!0}async show(e){var t;if(r()(t=this.pluginViews).call(t,e))return;const i=this.pluginsMap[e];if(!1===this.pluginsTags[i])try{await this.requestPermission(i),Object(n.i)(()=>{this.pluginsTags[i]=!0,this.pluginViews.push(e)})}catch(e){}else this.pluginViews.push(e)}async showRepair(){this.focusRepair=!0,this.show("profile"),localStorage.setItem("user-checkout-old-data","true")}blurRepair(){this.focusRepair=!1}requestPermission(e){switch(e){case"side-bookmarks":return a.a.request(["bookmarks"],["chrome://favicon/"]);case"side-extension":case"chrome-apps":return a.a.request(["management"]);case"side-history":return a.a.request(["history"],["chrome://favicon/"])}}hideLast(){const e=this.pluginViews.pop();return 0===this.pluginViews.length&&document.getElementsByTagName("newtab-main")[0].shadowRoot.querySelector(".swiper-content").style.setProperty("transform","none"),e}}d([n.g],p.prototype,"pluginsTags",void 0),d([n.b],p.prototype,"initDom",null),d([n.g],p.prototype,"pluginViews",void 0),d([n.g],p.prototype,"focusRepair",void 0),d([n.b],p.prototype,"show",null),d([n.b],p.prototype,"showRepair",null),d([n.b],p.prototype,"blurRepair",null),d([n.b],p.prototype,"hideLast",null);const h=new p},function(e,t,i){"use strict";i.r(t),i.d(t,"IConfirm",(function(){return s}));i(17),i(19),i(11);var o=i(1),r=o.b`.container {
  height: 100%;
  z-index: 100001;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.8);
  display: flex;
  flex-flow: column;
  justify-content: center;
  align-items: center;
}
.container[hidden] {
  display: none;
}
.container .top,
.container .bottom {
  flex-grow: 1;
}
.container .bottom {
  height: var(--modal-top, 15vh);
}
.body {
  width: 360px;
  min-height: 200px;
  padding: 30px;
  box-sizing: border-box;
  background: #ffffff;
  box-shadow: 0px 2px 10px 0px rgba(0, 0, 0, 0.18);
  border-radius: 6px;
}
.title,
.text {
  text-align: center;
  font-size: 14px;
  font-weight: 400;
  color: #333333;
  line-height: 24px;
}
.title {
  font-size: 18px;
  font-weight: bolder;
  margin-bottom: 30px;
}
.footer {
  margin-top: 40px;
  display: flex;
  justify-content: center;
}
.footer infinito-button {
  width: 120px;
  height: 42px;
  --hover-color: #eee;
  --hover-font-color: #000;
}
.footer infinito-button[primary] {
  --hover-color: #000;
  --hover-font-color: #fff;
}
.footer infinito-button:not(:last-of-type) {
  margin-right: 20px;
}
`,n=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let a=null,s=class extends o.a{constructor(){super(...arguments),this.defaultData={title:i18n("info"),text:"",onCancel:()=>{},onConfirm:()=>{}},this.show=!1,this.title=this.defaultData.title,this.text=this.defaultData.text,this.onCancel=()=>{},this.onConfirm=()=>{}}static create(){if(a)return a;const e=document.body;return a=document.createElement("i-confirm"),e.appendChild(a),a}firstUpdated(){}async performUpdate(){super.performUpdate()}shouldUpdate(e){return!e.has("show")||!1!==this.show||(setTimeout(()=>{this.requestUpdate()},1),!1)}updated(e){e.has("show")&&this.show&&(this.$container.animate([{opacity:"0"},{opacity:"1"}],{duration:300,easing:"ease-in"}),this.$body.animate([{opacity:"0",transform:"scale(0.8)"},{opacity:"1",transform:"none"}],{duration:300,easing:"ease-in"}))}toShow(e){this.show=!0;const t=Object.assign(Object.assign({},this.defaultData),e);this.title=t.title,this.text=t.text,this.onCancel=t.onCancel,this.onConfirm=t.onConfirm}toHide(){this.show=!1}render(){return o.e`
      <div class="container" .hidden="${!this.show}">
        <div class="top"></div>
        <section class="body">
          <div class="title">${this.title}</div>
          <div class="text">${this.text}</div>
          <div class="footer">
            <infinito-button
              @click="${()=>{this.toHide(),this.onCancel()}}"
            >${i18n("cancel")}</infinito-button>
            <infinito-button
              @click="${()=>{this.toHide(),this.onConfirm()}}"
              primary
            >${i18n("confirm")}</infinito-button>
          </div>
        </section>
        <div class="bottom"></div>
      </div>
    `}};s.styles=r,n([Object(o.g)({type:Boolean})],s.prototype,"show",void 0),n([Object(o.g)({type:String})],s.prototype,"title",void 0),n([Object(o.g)({type:String})],s.prototype,"text",void 0),n([Object(o.g)({attribute:!1})],s.prototype,"onCancel",void 0),n([Object(o.g)({attribute:!1})],s.prototype,"onConfirm",void 0),n([Object(o.h)(".container")],s.prototype,"$container",void 0),n([Object(o.h)(".body")],s.prototype,"$body",void 0),s=n([Object(o.c)("i-confirm")],s)},function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var o=i(129),r=i(157);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const n=new WeakMap,a=Object(r.e)(e=>t=>{if(!(t instanceof r.b))throw new Error("unsafeHTML can only be used in text bindings");const i=n.get(t);if(void 0!==i&&Object(o.h)(e)&&e===i.value&&t.value===i.fragment)return;const a=document.createElement("template");a.innerHTML=e;const s=document.importNode(a.content,!0);t.setValue(s),n.set(t,{value:e,fragment:s})})},function(e,t,i){e.exports=i.p+"images/error.f782e7c.png"},function(e,t,i){e.exports=i.p+"images/remind.896ff6f.png"},function(e,t,i){"use strict";i(17),i(19);var o=i(1),r=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let n=class extends o.a{constructor(){super(...arguments),this.src=""}render(){return o.e`
      <div class="svg" style="-webkit-mask-image: url(${this.src})"></div>
    `}};n.styles=o.b`
    :host{
      display: block;
      width: 30px;
      height: 30px;
      --size: 100%;
      -webkit-mask-size: var(--size);
      -webkit-mask-position: center;
      -webkit-mask-repeat: no-repeat;
      color: black;
    }
    .svg{
      width: inherit;
      height: inherit;
      -webkit-mask-size: inherit;
      -webkit-mask-position: inherit;
      color: inherit;
      background-color: currentcolor;
      -webkit-mask-repeat: inherit;
    }
  `,r([Object(o.g)({type:String})],n.prototype,"src",void 0),n=r([Object(o.c)("i-svg")],n)},,,function(e,t,i){
/*!
 * Cropper.js v1.5.12
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2021-06-12T08:00:17.411Z
 */
e.exports=function(){"use strict";function e(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function t(t){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?e(Object(o),!0).forEach((function(e){n(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?s(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}var l="undefined"!=typeof window&&void 0!==window.document,c=l?window:{},d=!(!l||!c.document.documentElement)&&"ontouchstart"in c.document.documentElement,p=!!l&&"PointerEvent"in c,h="".concat("cropper","-crop"),u="".concat("cropper","-disabled"),g="".concat("cropper","-hidden"),f="".concat("cropper","-hide"),m="".concat("cropper","-invisible"),b="".concat("cropper","-modal"),y="".concat("cropper","-move"),v="".concat("cropper","Action"),w="".concat("cropper","Preview"),x=d?"touchstart":"mousedown",_=d?"touchmove":"mousemove",A=d?"touchend touchcancel":"mouseup",S=p?"pointerdown":x,k=p?"pointermove":_,O=p?"pointerup pointercancel":A,I=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,$=/^data:/,E=/^data:image\/jpeg;base64,/,C=/^img|canvas$/i,T={viewMode:0,dragMode:"crop",initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},j=Number.isNaN||c.isNaN;function P(e){return"number"==typeof e&&!j(e)}var R=function(e){return e>0&&e<1/0};function L(e){return void 0===e}function N(e){return"object"===i(e)&&null!==e}var M=Object.prototype.hasOwnProperty;function D(e){if(!N(e))return!1;try{var t=e.constructor,i=t.prototype;return t&&i&&M.call(i,"isPrototypeOf")}catch(e){return!1}}function U(e){return"function"==typeof e}var B=Array.prototype.slice;function F(e){return Array.from?Array.from(e):B.call(e)}function z(e,t){return e&&U(t)&&(Array.isArray(e)||P(e.length)?F(e).forEach((function(i,o){t.call(e,i,o,e)})):N(e)&&Object.keys(e).forEach((function(i){t.call(e,e[i],i,e)}))),e}var H=Object.assign||function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return N(e)&&i.length>0&&i.forEach((function(t){N(t)&&Object.keys(t).forEach((function(i){e[i]=t[i]}))})),e},W=/\.\d*(?:0|9){12}\d*$/;function G(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return W.test(e)?Math.round(e*t)/t:e}var V=/^width|height|left|top|marginLeft|marginTop$/;function q(e,t){var i=e.style;z(t,(function(e,t){V.test(t)&&P(e)&&(e="".concat(e,"px")),i[t]=e}))}function Y(e,t){if(t)if(P(e.length))z(e,(function(e){Y(e,t)}));else if(e.classList)e.classList.add(t);else{var i=e.className.trim();i?i.indexOf(t)<0&&(e.className="".concat(i," ").concat(t)):e.className=t}}function Q(e,t){t&&(P(e.length)?z(e,(function(e){Q(e,t)})):e.classList?e.classList.remove(t):e.className.indexOf(t)>=0&&(e.className=e.className.replace(t,"")))}function X(e,t,i){t&&(P(e.length)?z(e,(function(e){X(e,t,i)})):i?Y(e,t):Q(e,t))}var K=/([a-z\d])([A-Z])/g;function Z(e){return e.replace(K,"$1-$2").toLowerCase()}function J(e,t){return N(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-".concat(Z(t)))}function ee(e,t,i){N(i)?e[t]=i:e.dataset?e.dataset[t]=i:e.setAttribute("data-".concat(Z(t)),i)}var te=/\s\s*/,ie=function(){var e=!1;if(l){var t=!1,i=function(){},o=Object.defineProperty({},"once",{get:function(){return e=!0,t},set:function(e){t=e}});c.addEventListener("test",i,o),c.removeEventListener("test",i,o)}return e}();function oe(e,t,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=i;t.trim().split(te).forEach((function(t){if(!ie){var n=e.listeners;n&&n[t]&&n[t][i]&&(r=n[t][i],delete n[t][i],0===Object.keys(n[t]).length&&delete n[t],0===Object.keys(n).length&&delete e.listeners)}e.removeEventListener(t,r,o)}))}function re(e,t,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=i;t.trim().split(te).forEach((function(t){if(o.once&&!ie){var n=e.listeners,a=void 0===n?{}:n;r=function(){delete a[t][i],e.removeEventListener(t,r,o);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];i.apply(e,s)},a[t]||(a[t]={}),a[t][i]&&e.removeEventListener(t,a[t][i],o),a[t][i]=r,e.listeners=a}e.addEventListener(t,r,o)}))}function ne(e,t,i){var o;return U(Event)&&U(CustomEvent)?o=new CustomEvent(t,{detail:i,bubbles:!0,cancelable:!0}):(o=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,i),e.dispatchEvent(o)}function ae(e){var t=e.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var se=c.location,le=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function ce(e){var t=e.match(le);return null!==t&&(t[1]!==se.protocol||t[2]!==se.hostname||t[3]!==se.port)}function de(e){var t="timestamp=".concat((new Date).getTime());return e+(-1===e.indexOf("?")?"?":"&")+t}function pe(e){var t=e.rotate,i=e.scaleX,o=e.scaleY,r=e.translateX,n=e.translateY,a=[];P(r)&&0!==r&&a.push("translateX(".concat(r,"px)")),P(n)&&0!==n&&a.push("translateY(".concat(n,"px)")),P(t)&&0!==t&&a.push("rotate(".concat(t,"deg)")),P(i)&&1!==i&&a.push("scaleX(".concat(i,")")),P(o)&&1!==o&&a.push("scaleY(".concat(o,")"));var s=a.length?a.join(" "):"none";return{WebkitTransform:s,msTransform:s,transform:s}}function he(e,i){var o=e.pageX,r=e.pageY,n={endX:o,endY:r};return i?n:t({startX:o,startY:r},n)}function ue(e){var t=e.aspectRatio,i=e.height,o=e.width,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",n=R(o),a=R(i);if(n&&a){var s=i*t;"contain"===r&&s>o||"cover"===r&&s<o?i=o/t:o=i*t}else n?i=o/t:a&&(o=i*t);return{width:o,height:i}}function ge(e,t,i,o){var r=t.aspectRatio,n=t.naturalWidth,s=t.naturalHeight,l=t.rotate,c=void 0===l?0:l,d=t.scaleX,p=void 0===d?1:d,h=t.scaleY,u=void 0===h?1:h,g=i.aspectRatio,f=i.naturalWidth,m=i.naturalHeight,b=o.fillColor,y=void 0===b?"transparent":b,v=o.imageSmoothingEnabled,w=void 0===v||v,x=o.imageSmoothingQuality,_=void 0===x?"low":x,A=o.maxWidth,S=void 0===A?1/0:A,k=o.maxHeight,O=void 0===k?1/0:k,I=o.minWidth,$=void 0===I?0:I,E=o.minHeight,C=void 0===E?0:E,T=document.createElement("canvas"),j=T.getContext("2d"),P=ue({aspectRatio:g,width:S,height:O}),R=ue({aspectRatio:g,width:$,height:C},"cover"),L=Math.min(P.width,Math.max(R.width,f)),N=Math.min(P.height,Math.max(R.height,m)),M=ue({aspectRatio:r,width:S,height:O}),D=ue({aspectRatio:r,width:$,height:C},"cover"),U=Math.min(M.width,Math.max(D.width,n)),B=Math.min(M.height,Math.max(D.height,s)),F=[-U/2,-B/2,U,B];return T.width=G(L),T.height=G(N),j.fillStyle=y,j.fillRect(0,0,L,N),j.save(),j.translate(L/2,N/2),j.rotate(c*Math.PI/180),j.scale(p,u),j.imageSmoothingEnabled=w,j.imageSmoothingQuality=_,j.drawImage.apply(j,[e].concat(a(F.map((function(e){return Math.floor(G(e))}))))),j.restore(),T}var fe=String.fromCharCode,me=/^data:.*,/;function be(e){var t,i=new DataView(e);try{var o,r,n;if(255===i.getUint8(0)&&216===i.getUint8(1))for(var a=i.byteLength,s=2;s+1<a;){if(255===i.getUint8(s)&&225===i.getUint8(s+1)){r=s;break}s+=1}if(r){var l=r+10;if("Exif"===function(e,t,i){var o="";i+=t;for(var r=t;r<i;r+=1)o+=fe(e.getUint8(r));return o}(i,r+4,4)){var c=i.getUint16(l);if(((o=18761===c)||19789===c)&&42===i.getUint16(l+2,o)){var d=i.getUint32(l+4,o);d>=8&&(n=l+d)}}}if(n){var p,h,u=i.getUint16(n,o);for(h=0;h<u;h+=1)if(p=n+12*h+2,274===i.getUint16(p,o)){p+=8,t=i.getUint16(p,o),i.setUint16(p,1,o);break}}}catch(e){t=1}return t}var ye={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,t=this.options,i=this.container,o=this.cropper,r=Number(t.minContainerWidth),n=Number(t.minContainerHeight);Y(o,g),Q(e,g);var a={width:Math.max(i.offsetWidth,r>=0?r:200),height:Math.max(i.offsetHeight,n>=0?n:100)};this.containerData=a,q(o,{width:a.width,height:a.height}),Y(e,g),Q(o,g)},initCanvas:function(){var e=this.containerData,t=this.imageData,i=this.options.viewMode,o=Math.abs(t.rotate)%180==90,r=o?t.naturalHeight:t.naturalWidth,n=o?t.naturalWidth:t.naturalHeight,a=r/n,s=e.width,l=e.height;e.height*a>e.width?3===i?s=e.height*a:l=e.width/a:3===i?l=e.width/a:s=e.height*a;var c={aspectRatio:a,naturalWidth:r,naturalHeight:n,width:s,height:l};this.canvasData=c,this.limited=1===i||2===i,this.limitCanvas(!0,!0),c.width=Math.min(Math.max(c.width,c.minWidth),c.maxWidth),c.height=Math.min(Math.max(c.height,c.minHeight),c.maxHeight),c.left=(e.width-c.width)/2,c.top=(e.height-c.height)/2,c.oldLeft=c.left,c.oldTop=c.top,this.initialCanvasData=H({},c)},limitCanvas:function(e,t){var i=this.options,o=this.containerData,r=this.canvasData,n=this.cropBoxData,a=i.viewMode,s=r.aspectRatio,l=this.cropped&&n;if(e){var c=Number(i.minCanvasWidth)||0,d=Number(i.minCanvasHeight)||0;a>1?(c=Math.max(c,o.width),d=Math.max(d,o.height),3===a&&(d*s>c?c=d*s:d=c/s)):a>0&&(c?c=Math.max(c,l?n.width:0):d?d=Math.max(d,l?n.height:0):l&&(c=n.width,(d=n.height)*s>c?c=d*s:d=c/s));var p=ue({aspectRatio:s,width:c,height:d});c=p.width,d=p.height,r.minWidth=c,r.minHeight=d,r.maxWidth=1/0,r.maxHeight=1/0}if(t)if(a>(l?0:1)){var h=o.width-r.width,u=o.height-r.height;r.minLeft=Math.min(0,h),r.minTop=Math.min(0,u),r.maxLeft=Math.max(0,h),r.maxTop=Math.max(0,u),l&&this.limited&&(r.minLeft=Math.min(n.left,n.left+(n.width-r.width)),r.minTop=Math.min(n.top,n.top+(n.height-r.height)),r.maxLeft=n.left,r.maxTop=n.top,2===a&&(r.width>=o.width&&(r.minLeft=Math.min(0,h),r.maxLeft=Math.max(0,h)),r.height>=o.height&&(r.minTop=Math.min(0,u),r.maxTop=Math.max(0,u))))}else r.minLeft=-r.width,r.minTop=-r.height,r.maxLeft=o.width,r.maxTop=o.height},renderCanvas:function(e,t){var i=this.canvasData,o=this.imageData;if(t){var r=function(e){var t=e.width,i=e.height,o=e.degree;if(90==(o=Math.abs(o)%180))return{width:i,height:t};var r=o%90*Math.PI/180,n=Math.sin(r),a=Math.cos(r),s=t*a+i*n,l=t*n+i*a;return o>90?{width:l,height:s}:{width:s,height:l}}({width:o.naturalWidth*Math.abs(o.scaleX||1),height:o.naturalHeight*Math.abs(o.scaleY||1),degree:o.rotate||0}),n=r.width,a=r.height,s=i.width*(n/i.naturalWidth),l=i.height*(a/i.naturalHeight);i.left-=(s-i.width)/2,i.top-=(l-i.height)/2,i.width=s,i.height=l,i.aspectRatio=n/a,i.naturalWidth=n,i.naturalHeight=a,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,q(this.canvas,H({width:i.width,height:i.height},pe({translateX:i.left,translateY:i.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var t=this.canvasData,i=this.imageData,o=i.naturalWidth*(t.width/t.naturalWidth),r=i.naturalHeight*(t.height/t.naturalHeight);H(i,{width:o,height:r,left:(t.width-o)/2,top:(t.height-r)/2}),q(this.image,H({width:i.width,height:i.height},pe(H({translateX:i.left,translateY:i.top},i)))),e&&this.output()},initCropBox:function(){var e=this.options,t=this.canvasData,i=e.aspectRatio||e.initialAspectRatio,o=Number(e.autoCropArea)||.8,r={width:t.width,height:t.height};i&&(t.height*i>t.width?r.height=r.width/i:r.width=r.height*i),this.cropBoxData=r,this.limitCropBox(!0,!0),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),r.width=Math.max(r.minWidth,r.width*o),r.height=Math.max(r.minHeight,r.height*o),r.left=t.left+(t.width-r.width)/2,r.top=t.top+(t.height-r.height)/2,r.oldLeft=r.left,r.oldTop=r.top,this.initialCropBoxData=H({},r)},limitCropBox:function(e,t){var i=this.options,o=this.containerData,r=this.canvasData,n=this.cropBoxData,a=this.limited,s=i.aspectRatio;if(e){var l=Number(i.minCropBoxWidth)||0,c=Number(i.minCropBoxHeight)||0,d=a?Math.min(o.width,r.width,r.width+r.left,o.width-r.left):o.width,p=a?Math.min(o.height,r.height,r.height+r.top,o.height-r.top):o.height;l=Math.min(l,o.width),c=Math.min(c,o.height),s&&(l&&c?c*s>l?c=l/s:l=c*s:l?c=l/s:c&&(l=c*s),p*s>d?p=d/s:d=p*s),n.minWidth=Math.min(l,d),n.minHeight=Math.min(c,p),n.maxWidth=d,n.maxHeight=p}t&&(a?(n.minLeft=Math.max(0,r.left),n.minTop=Math.max(0,r.top),n.maxLeft=Math.min(o.width,r.left+r.width)-n.width,n.maxTop=Math.min(o.height,r.top+r.height)-n.height):(n.minLeft=0,n.minTop=0,n.maxLeft=o.width-n.width,n.maxTop=o.height-n.height))},renderCropBox:function(){var e=this.options,t=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,e.movable&&e.cropBoxMovable&&ee(this.face,v,i.width>=t.width&&i.height>=t.height?"move":"all"),q(this.cropBox,H({width:i.width,height:i.height},pe({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),ne(this.element,"crop",this.getData())}},ve={initPreview:function(){var e=this.element,t=this.crossOrigin,i=this.options.preview,o=t?this.crossOriginUrl:this.url,r=e.alt||"The image to preview",n=document.createElement("img");if(t&&(n.crossOrigin=t),n.src=o,n.alt=r,this.viewBox.appendChild(n),this.viewBoxImage=n,i){var a=i;"string"==typeof i?a=e.ownerDocument.querySelectorAll(i):i.querySelector&&(a=[i]),this.previews=a,z(a,(function(e){var i=document.createElement("img");ee(e,w,{width:e.offsetWidth,height:e.offsetHeight,html:e.innerHTML}),t&&(i.crossOrigin=t),i.src=o,i.alt=r,i.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',e.innerHTML="",e.appendChild(i)}))}},resetPreview:function(){z(this.previews,(function(e){var t=J(e,w);q(e,{width:t.width,height:t.height}),e.innerHTML=t.html,function(e,t){if(N(e[t]))try{delete e[t]}catch(i){e[t]=void 0}else if(e.dataset)try{delete e.dataset[t]}catch(i){e.dataset[t]=void 0}else e.removeAttribute("data-".concat(Z(t)))}(e,w)}))},preview:function(){var e=this.imageData,t=this.canvasData,i=this.cropBoxData,o=i.width,r=i.height,n=e.width,a=e.height,s=i.left-t.left-e.left,l=i.top-t.top-e.top;this.cropped&&!this.disabled&&(q(this.viewBoxImage,H({width:n,height:a},pe(H({translateX:-s,translateY:-l},e)))),z(this.previews,(function(t){var i=J(t,w),c=i.width,d=i.height,p=c,h=d,u=1;o&&(h=r*(u=c/o)),r&&h>d&&(p=o*(u=d/r),h=d),q(t,{width:p,height:h}),q(t.getElementsByTagName("img")[0],H({width:n*u,height:a*u},pe(H({translateX:-s*u,translateY:-l*u},e))))})))}},we={bind:function(){var e=this.element,t=this.options,i=this.cropper;U(t.cropstart)&&re(e,"cropstart",t.cropstart),U(t.cropmove)&&re(e,"cropmove",t.cropmove),U(t.cropend)&&re(e,"cropend",t.cropend),U(t.crop)&&re(e,"crop",t.crop),U(t.zoom)&&re(e,"zoom",t.zoom),re(i,S,this.onCropStart=this.cropStart.bind(this)),t.zoomable&&t.zoomOnWheel&&re(i,"wheel",this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&re(i,"dblclick",this.onDblclick=this.dblclick.bind(this)),re(e.ownerDocument,k,this.onCropMove=this.cropMove.bind(this)),re(e.ownerDocument,O,this.onCropEnd=this.cropEnd.bind(this)),t.responsive&&re(window,"resize",this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,t=this.options,i=this.cropper;U(t.cropstart)&&oe(e,"cropstart",t.cropstart),U(t.cropmove)&&oe(e,"cropmove",t.cropmove),U(t.cropend)&&oe(e,"cropend",t.cropend),U(t.crop)&&oe(e,"crop",t.crop),U(t.zoom)&&oe(e,"zoom",t.zoom),oe(i,S,this.onCropStart),t.zoomable&&t.zoomOnWheel&&oe(i,"wheel",this.onWheel,{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&oe(i,"dblclick",this.onDblclick),oe(e.ownerDocument,k,this.onCropMove),oe(e.ownerDocument,O,this.onCropEnd),t.responsive&&oe(window,"resize",this.onResize)}},xe={resize:function(){if(!this.disabled){var e,t,i=this.options,o=this.container,r=this.containerData,n=o.offsetWidth/r.width,a=o.offsetHeight/r.height,s=Math.abs(n-1)>Math.abs(a-1)?n:a;1!==s&&(i.restore&&(e=this.getCanvasData(),t=this.getCropBoxData()),this.render(),i.restore&&(this.setCanvasData(z(e,(function(t,i){e[i]=t*s}))),this.setCropBoxData(z(t,(function(e,i){t[i]=e*s})))))}},dblclick:function(){var e,t;this.disabled||"none"===this.options.dragMode||this.setDragMode((e=this.dragBox,t=h,(e.classList?e.classList.contains(t):e.className.indexOf(t)>-1)?"move":"crop"))},wheel:function(e){var t=this,i=Number(this.options.wheelZoomRatio)||.1,o=1;this.disabled||(e.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){t.wheeling=!1}),50),e.deltaY?o=e.deltaY>0?1:-1:e.wheelDelta?o=-e.wheelDelta/120:e.detail&&(o=e.detail>0?1:-1),this.zoom(-o*i,e)))},cropStart:function(e){var t=e.buttons,i=e.button;if(!(this.disabled||("mousedown"===e.type||"pointerdown"===e.type&&"mouse"===e.pointerType)&&(P(t)&&1!==t||P(i)&&0!==i||e.ctrlKey))){var o,r=this.options,n=this.pointers;e.changedTouches?z(e.changedTouches,(function(e){n[e.identifier]=he(e)})):n[e.pointerId||0]=he(e),o=Object.keys(n).length>1&&r.zoomable&&r.zoomOnTouch?"zoom":J(e.target,v),I.test(o)&&!1!==ne(this.element,"cropstart",{originalEvent:e,action:o})&&(e.preventDefault(),this.action=o,this.cropping=!1,"crop"===o&&(this.cropping=!0,Y(this.dragBox,b)))}},cropMove:function(e){var t=this.action;if(!this.disabled&&t){var i=this.pointers;e.preventDefault(),!1!==ne(this.element,"cropmove",{originalEvent:e,action:t})&&(e.changedTouches?z(e.changedTouches,(function(e){H(i[e.identifier]||{},he(e,!0))})):H(i[e.pointerId||0]||{},he(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var t=this.action,i=this.pointers;e.changedTouches?z(e.changedTouches,(function(e){delete i[e.identifier]})):delete i[e.pointerId||0],t&&(e.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,X(this.dragBox,b,this.cropped&&this.options.modal)),ne(this.element,"cropend",{originalEvent:e,action:t}))}}},_e={change:function(e){var i,o=this.options,r=this.canvasData,n=this.containerData,a=this.cropBoxData,s=this.pointers,l=this.action,c=o.aspectRatio,d=a.left,p=a.top,h=a.width,u=a.height,f=d+h,m=p+u,b=0,y=0,v=n.width,w=n.height,x=!0;!c&&e.shiftKey&&(c=h&&u?h/u:1),this.limited&&(b=a.minLeft,y=a.minTop,v=b+Math.min(n.width,r.width,r.left+r.width),w=y+Math.min(n.height,r.height,r.top+r.height));var _=s[Object.keys(s)[0]],A={x:_.endX-_.startX,y:_.endY-_.startY},S=function(e){switch(e){case"e":f+A.x>v&&(A.x=v-f);break;case"w":d+A.x<b&&(A.x=b-d);break;case"n":p+A.y<y&&(A.y=y-p);break;case"s":m+A.y>w&&(A.y=w-m)}};switch(l){case"all":d+=A.x,p+=A.y;break;case"e":if(A.x>=0&&(f>=v||c&&(p<=y||m>=w))){x=!1;break}S("e"),(h+=A.x)<0&&(l="w",d-=h=-h),c&&(u=h/c,p+=(a.height-u)/2);break;case"n":if(A.y<=0&&(p<=y||c&&(d<=b||f>=v))){x=!1;break}S("n"),u-=A.y,p+=A.y,u<0&&(l="s",p-=u=-u),c&&(h=u*c,d+=(a.width-h)/2);break;case"w":if(A.x<=0&&(d<=b||c&&(p<=y||m>=w))){x=!1;break}S("w"),h-=A.x,d+=A.x,h<0&&(l="e",d-=h=-h),c&&(u=h/c,p+=(a.height-u)/2);break;case"s":if(A.y>=0&&(m>=w||c&&(d<=b||f>=v))){x=!1;break}S("s"),(u+=A.y)<0&&(l="n",p-=u=-u),c&&(h=u*c,d+=(a.width-h)/2);break;case"ne":if(c){if(A.y<=0&&(p<=y||f>=v)){x=!1;break}S("n"),u-=A.y,p+=A.y,h=u*c}else S("n"),S("e"),A.x>=0?f<v?h+=A.x:A.y<=0&&p<=y&&(x=!1):h+=A.x,A.y<=0?p>y&&(u-=A.y,p+=A.y):(u-=A.y,p+=A.y);h<0&&u<0?(l="sw",p-=u=-u,d-=h=-h):h<0?(l="nw",d-=h=-h):u<0&&(l="se",p-=u=-u);break;case"nw":if(c){if(A.y<=0&&(p<=y||d<=b)){x=!1;break}S("n"),u-=A.y,p+=A.y,h=u*c,d+=a.width-h}else S("n"),S("w"),A.x<=0?d>b?(h-=A.x,d+=A.x):A.y<=0&&p<=y&&(x=!1):(h-=A.x,d+=A.x),A.y<=0?p>y&&(u-=A.y,p+=A.y):(u-=A.y,p+=A.y);h<0&&u<0?(l="se",p-=u=-u,d-=h=-h):h<0?(l="ne",d-=h=-h):u<0&&(l="sw",p-=u=-u);break;case"sw":if(c){if(A.x<=0&&(d<=b||m>=w)){x=!1;break}S("w"),h-=A.x,d+=A.x,u=h/c}else S("s"),S("w"),A.x<=0?d>b?(h-=A.x,d+=A.x):A.y>=0&&m>=w&&(x=!1):(h-=A.x,d+=A.x),A.y>=0?m<w&&(u+=A.y):u+=A.y;h<0&&u<0?(l="ne",p-=u=-u,d-=h=-h):h<0?(l="se",d-=h=-h):u<0&&(l="nw",p-=u=-u);break;case"se":if(c){if(A.x>=0&&(f>=v||m>=w)){x=!1;break}S("e"),u=(h+=A.x)/c}else S("s"),S("e"),A.x>=0?f<v?h+=A.x:A.y>=0&&m>=w&&(x=!1):h+=A.x,A.y>=0?m<w&&(u+=A.y):u+=A.y;h<0&&u<0?(l="nw",p-=u=-u,d-=h=-h):h<0?(l="sw",d-=h=-h):u<0&&(l="ne",p-=u=-u);break;case"move":this.move(A.x,A.y),x=!1;break;case"zoom":this.zoom(function(e){var i=t({},e),o=0;return z(e,(function(e,t){delete i[t],z(i,(function(t){var i=Math.abs(e.startX-t.startX),r=Math.abs(e.startY-t.startY),n=Math.abs(e.endX-t.endX),a=Math.abs(e.endY-t.endY),s=Math.sqrt(i*i+r*r),l=(Math.sqrt(n*n+a*a)-s)/s;Math.abs(l)>Math.abs(o)&&(o=l)}))})),o}(s),e),x=!1;break;case"crop":if(!A.x||!A.y){x=!1;break}i=ae(this.cropper),d=_.startX-i.left,p=_.startY-i.top,h=a.minWidth,u=a.minHeight,A.x>0?l=A.y>0?"se":"ne":A.x<0&&(d-=h,l=A.y>0?"sw":"nw"),A.y<0&&(p-=u),this.cropped||(Q(this.cropBox,g),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}x&&(a.width=h,a.height=u,a.left=d,a.top=p,this.action=l,this.renderCropBox()),z(s,(function(e){e.startX=e.endX,e.startY=e.endY}))}},Ae={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&Y(this.dragBox,b),Q(this.cropBox,g),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=H({},this.initialImageData),this.canvasData=H({},this.initialCanvasData),this.cropBoxData=H({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(H(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),Q(this.dragBox,b),Y(this.cropBox,g)),this},replace:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&e&&(this.isImg&&(this.element.src=e),t?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,z(this.previews,(function(t){t.getElementsByTagName("img")[0].src=e})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,Q(this.cropper,u)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,Y(this.cropper,u)),this},destroy:function(){var e=this.element;return e.cropper?(e.cropper=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,i=this.canvasData,o=i.left,r=i.top;return this.moveTo(L(e)?e:o+Number(e),L(t)?t:r+Number(t))},moveTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,i=this.canvasData,o=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.movable&&(P(e)&&(i.left=e,o=!0),P(t)&&(i.top=t,o=!0),o&&this.renderCanvas(!0)),this},zoom:function(e,t){var i=this.canvasData;return e=(e=Number(e))<0?1/(1-e):1+e,this.zoomTo(i.width*e/i.naturalWidth,null,t)},zoomTo:function(e,t,i){var o=this.options,r=this.canvasData,n=r.width,a=r.height,s=r.naturalWidth,l=r.naturalHeight;if((e=Number(e))>=0&&this.ready&&!this.disabled&&o.zoomable){var c=s*e,d=l*e;if(!1===ne(this.element,"zoom",{ratio:e,oldRatio:n/s,originalEvent:i}))return this;if(i){var p=this.pointers,h=ae(this.cropper),u=p&&Object.keys(p).length?function(e){var t=0,i=0,o=0;return z(e,(function(e){var r=e.startX,n=e.startY;t+=r,i+=n,o+=1})),{pageX:t/=o,pageY:i/=o}}(p):{pageX:i.pageX,pageY:i.pageY};r.left-=(c-n)*((u.pageX-h.left-r.left)/n),r.top-=(d-a)*((u.pageY-h.top-r.top)/a)}else D(t)&&P(t.x)&&P(t.y)?(r.left-=(c-n)*((t.x-r.left)/n),r.top-=(d-a)*((t.y-r.top)/a)):(r.left-=(c-n)/2,r.top-=(d-a)/2);r.width=c,r.height=d,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return P(e=Number(e))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var t=this.imageData.scaleY;return this.scale(e,P(t)?t:1)},scaleY:function(e){var t=this.imageData.scaleX;return this.scale(P(t)?t:1,e)},scale:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,i=this.imageData,o=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.scalable&&(P(e)&&(i.scaleX=e,o=!0),P(t)&&(i.scaleY=t,o=!0),o&&this.renderCanvas(!0,!0)),this},getData:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.options,o=this.imageData,r=this.canvasData,n=this.cropBoxData;if(this.ready&&this.cropped){e={x:n.left-r.left,y:n.top-r.top,width:n.width,height:n.height};var a=o.width/o.naturalWidth;if(z(e,(function(t,i){e[i]=t/a})),t){var s=Math.round(e.y+e.height),l=Math.round(e.x+e.width);e.x=Math.round(e.x),e.y=Math.round(e.y),e.width=l-e.x,e.height=s-e.y}}else e={x:0,y:0,width:0,height:0};return i.rotatable&&(e.rotate=o.rotate||0),i.scalable&&(e.scaleX=o.scaleX||1,e.scaleY=o.scaleY||1),e},setData:function(e){var t=this.options,i=this.imageData,o=this.canvasData,r={};if(this.ready&&!this.disabled&&D(e)){var n=!1;t.rotatable&&P(e.rotate)&&e.rotate!==i.rotate&&(i.rotate=e.rotate,n=!0),t.scalable&&(P(e.scaleX)&&e.scaleX!==i.scaleX&&(i.scaleX=e.scaleX,n=!0),P(e.scaleY)&&e.scaleY!==i.scaleY&&(i.scaleY=e.scaleY,n=!0)),n&&this.renderCanvas(!0,!0);var a=i.width/i.naturalWidth;P(e.x)&&(r.left=e.x*a+o.left),P(e.y)&&(r.top=e.y*a+o.top),P(e.width)&&(r.width=e.width*a),P(e.height)&&(r.height=e.height*a),this.setCropBoxData(r)}return this},getContainerData:function(){return this.ready?H({},this.containerData):{}},getImageData:function(){return this.sized?H({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,t={};return this.ready&&z(["left","top","width","height","naturalWidth","naturalHeight"],(function(i){t[i]=e[i]})),t},setCanvasData:function(e){var t=this.canvasData,i=t.aspectRatio;return this.ready&&!this.disabled&&D(e)&&(P(e.left)&&(t.left=e.left),P(e.top)&&(t.top=e.top),P(e.width)?(t.width=e.width,t.height=e.width/i):P(e.height)&&(t.height=e.height,t.width=e.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var e,t=this.cropBoxData;return this.ready&&this.cropped&&(e={left:t.left,top:t.top,width:t.width,height:t.height}),e||{}},setCropBoxData:function(e){var t,i,o=this.cropBoxData,r=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&D(e)&&(P(e.left)&&(o.left=e.left),P(e.top)&&(o.top=e.top),P(e.width)&&e.width!==o.width&&(t=!0,o.width=e.width),P(e.height)&&e.height!==o.height&&(i=!0,o.height=e.height),r&&(t?o.height=o.width/r:i&&(o.width=o.height*r)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var t=this.canvasData,i=ge(this.image,this.imageData,t,e);if(!this.cropped)return i;var o=this.getData(),r=o.x,n=o.y,s=o.width,l=o.height,c=i.width/Math.floor(t.naturalWidth);1!==c&&(r*=c,n*=c,s*=c,l*=c);var d=s/l,p=ue({aspectRatio:d,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),h=ue({aspectRatio:d,width:e.minWidth||0,height:e.minHeight||0},"cover"),u=ue({aspectRatio:d,width:e.width||(1!==c?i.width:s),height:e.height||(1!==c?i.height:l)}),g=u.width,f=u.height;g=Math.min(p.width,Math.max(h.width,g)),f=Math.min(p.height,Math.max(h.height,f));var m=document.createElement("canvas"),b=m.getContext("2d");m.width=G(g),m.height=G(f),b.fillStyle=e.fillColor||"transparent",b.fillRect(0,0,g,f);var y=e.imageSmoothingEnabled,v=void 0===y||y,w=e.imageSmoothingQuality;b.imageSmoothingEnabled=v,w&&(b.imageSmoothingQuality=w);var x,_,A,S,k,O,I=i.width,$=i.height,E=r,C=n;E<=-s||E>I?(E=0,x=0,A=0,k=0):E<=0?(A=-E,E=0,k=x=Math.min(I,s+E)):E<=I&&(A=0,k=x=Math.min(s,I-E)),x<=0||C<=-l||C>$?(C=0,_=0,S=0,O=0):C<=0?(S=-C,C=0,O=_=Math.min($,l+C)):C<=$&&(S=0,O=_=Math.min(l,$-C));var T=[E,C,x,_];if(k>0&&O>0){var j=g/s;T.push(A*j,S*j,k*j,O*j)}return b.drawImage.apply(b,[i].concat(a(T.map((function(e){return Math.floor(G(e))}))))),m},setAspectRatio:function(e){var t=this.options;return this.disabled||L(e)||(t.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var t=this.options,i=this.dragBox,o=this.face;if(this.ready&&!this.disabled){var r="crop"===e,n=t.movable&&"move"===e;e=r||n?e:"none",t.dragMode=e,ee(i,v,e),X(i,h,r),X(i,y,n),t.cropBoxMovable||(ee(o,v,e),X(o,h,r),X(o,y,n))}return this}},Se=c.Cropper,ke=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(o(this,e),!t||!C.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,this.options=H({},T,D(i)&&i),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}var t,i,n;return t=e,n=[{key:"noConflict",value:function(){return window.Cropper=Se,e}},{key:"setDefaults",value:function(e){H(T,D(e)&&e)}}],(i=[{key:"init",value:function(){var e,t=this.element,i=t.tagName.toLowerCase();if(!t.cropper){if(t.cropper=this,"img"===i){if(this.isImg=!0,e=t.getAttribute("src")||"",this.originalUrl=e,!e)return;e=t.src}else"canvas"===i&&window.HTMLCanvasElement&&(e=t.toDataURL());this.load(e)}}},{key:"load",value:function(e){var t=this;if(e){this.url=e,this.imageData={};var i=this.element,o=this.options;if(o.rotatable||o.scalable||(o.checkOrientation=!1),o.checkOrientation&&window.ArrayBuffer)if($.test(e))E.test(e)?this.read((r=e.replace(me,""),n=atob(r),a=new ArrayBuffer(n.length),z(s=new Uint8Array(a),(function(e,t){s[t]=n.charCodeAt(t)})),a)):this.clone();else{var r,n,a,s,l=new XMLHttpRequest,c=this.clone.bind(this);this.reloading=!0,this.xhr=l,l.onabort=c,l.onerror=c,l.ontimeout=c,l.onprogress=function(){"image/jpeg"!==l.getResponseHeader("content-type")&&l.abort()},l.onload=function(){t.read(l.response)},l.onloadend=function(){t.reloading=!1,t.xhr=null},o.checkCrossOrigin&&ce(e)&&i.crossOrigin&&(e=de(e)),l.open("GET",e,!0),l.responseType="arraybuffer",l.withCredentials="use-credentials"===i.crossOrigin,l.send()}else this.clone()}}},{key:"read",value:function(e){var t=this.options,i=this.imageData,o=be(e),r=0,n=1,a=1;if(o>1){this.url=function(e,t){for(var i=[],o=new Uint8Array(e);o.length>0;)i.push(fe.apply(null,F(o.subarray(0,8192)))),o=o.subarray(8192);return"data:".concat(t,";base64,").concat(btoa(i.join("")))}(e,"image/jpeg");var s=function(e){var t=0,i=1,o=1;switch(e){case 2:i=-1;break;case 3:t=-180;break;case 4:o=-1;break;case 5:t=90,o=-1;break;case 6:t=90;break;case 7:t=90,i=-1;break;case 8:t=-90}return{rotate:t,scaleX:i,scaleY:o}}(o);r=s.rotate,n=s.scaleX,a=s.scaleY}t.rotatable&&(i.rotate=r),t.scalable&&(i.scaleX=n,i.scaleY=a),this.clone()}},{key:"clone",value:function(){var e=this.element,t=this.url,i=e.crossOrigin,o=t;this.options.checkCrossOrigin&&ce(t)&&(i||(i="anonymous"),o=de(t)),this.crossOrigin=i,this.crossOriginUrl=o;var r=document.createElement("img");i&&(r.crossOrigin=i),r.src=o||t,r.alt=e.alt||"The image to crop",this.image=r,r.onload=this.start.bind(this),r.onerror=this.stop.bind(this),Y(r,f),e.parentNode.insertBefore(r,e.nextSibling)}},{key:"start",value:function(){var e=this,t=this.image;t.onload=null,t.onerror=null,this.sizing=!0;var i=c.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(c.navigator.userAgent),o=function(t,i){H(e.imageData,{naturalWidth:t,naturalHeight:i,aspectRatio:t/i}),e.initialImageData=H({},e.imageData),e.sizing=!1,e.sized=!0,e.build()};if(!t.naturalWidth||i){var r=document.createElement("img"),n=document.body||document.documentElement;this.sizingImage=r,r.onload=function(){o(r.width,r.height),i||n.removeChild(r)},r.src=t.src,i||(r.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",n.appendChild(r))}else o(t.naturalWidth,t.naturalHeight)}},{key:"stop",value:function(){var e=this.image;e.onload=null,e.onerror=null,e.parentNode.removeChild(e),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var e=this.element,t=this.options,i=this.image,o=e.parentNode,r=document.createElement("div");r.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var n=r.querySelector(".".concat("cropper","-container")),a=n.querySelector(".".concat("cropper","-canvas")),s=n.querySelector(".".concat("cropper","-drag-box")),l=n.querySelector(".".concat("cropper","-crop-box")),c=l.querySelector(".".concat("cropper","-face"));this.container=o,this.cropper=n,this.canvas=a,this.dragBox=s,this.cropBox=l,this.viewBox=n.querySelector(".".concat("cropper","-view-box")),this.face=c,a.appendChild(i),Y(e,g),o.insertBefore(n,e.nextSibling),this.isImg||Q(i,f),this.initPreview(),this.bind(),t.initialAspectRatio=Math.max(0,t.initialAspectRatio)||NaN,t.aspectRatio=Math.max(0,t.aspectRatio)||NaN,t.viewMode=Math.max(0,Math.min(3,Math.round(t.viewMode)))||0,Y(l,g),t.guides||Y(l.getElementsByClassName("".concat("cropper","-dashed")),g),t.center||Y(l.getElementsByClassName("".concat("cropper","-center")),g),t.background&&Y(n,"".concat("cropper","-bg")),t.highlight||Y(c,m),t.cropBoxMovable&&(Y(c,y),ee(c,v,"all")),t.cropBoxResizable||(Y(l.getElementsByClassName("".concat("cropper","-line")),g),Y(l.getElementsByClassName("".concat("cropper","-point")),g)),this.render(),this.ready=!0,this.setDragMode(t.dragMode),t.autoCrop&&this.crop(),this.setData(t.data),U(t.ready)&&re(e,"ready",t.ready,{once:!0}),ne(e,"ready")}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),Q(this.element,g))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}])&&r(t.prototype,i),n&&r(t,n),e}();return H(ke.prototype,ye,ve,we,xe,_e,Ae),ke}()},function(e,t,i){e.exports=i.p+"images/color.321ebce.jpg"},function(e,t,i){e.exports=i.p+"images/question.b0f36f5.svg"},function(e,t,i){var o=i(664),r=i(206);e.exports=function(e,t,i){var n=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return r(i)&&(n="leading"in i?!!i.leading:n,a="trailing"in i?!!i.trailing:a),o(e,t,{leading:n,maxWait:t,trailing:a})}},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";i(17),i(19);var o=i(1),r=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let n=class extends o.a{constructor(){super(...arguments),this.type="",this.iconfont=!1}render(){return this.iconfont?o.e`
        <svg part="svg">
          <use href="${i(646)}#${this.type}" style=${this.color?`fill: ${this.color};`:""}></use>
        </svg>
      `:o.e`
        <svg part="svg">
          <use href="${i(647)}#${this.type}"></use>
        </svg>
      `}};n.styles=o.b`
    :host {
      display: inline-flex;
      justify-content: center;
      align-items: center;
      width: 20px;
      height: 20px;
      color: #333;
    }
    svg {
      width: inherit;
      height: inherit;
      color: inherit;
      fill: currentColor;
    }
  `,r([Object(o.g)({type:String})],n.prototype,"type",void 0),r([Object(o.g)({type:Boolean})],n.prototype,"iconfont",void 0),r([Object(o.g)({type:String})],n.prototype,"color",void 0),n=r([Object(o.c)("i-usesvg")],n)},,function(e,t,i){"use strict";var o=i(15),r=i.n(o),n=(i(17),i(19),i(11),i(1)),a=i(505),s=(i(610),n.b`:host {
  display: block;
  position: relative;
  z-index: 999;
}
.color-pick-list {
  width: 100%;
  box-sizing: border-box;
  padding: 1px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  backface-visibility: hidden;
}
.color-item {
  position: relative;
  width: 18px;
  height: 18px;
  box-sizing: border-box;
  border-radius: 6px;
  cursor: pointer;
  background-color: currentColor;
}
.color-item::before {
  content: "";
  display: none;
  width: 0px;
  height: 0px;
  color: #fff;
  border-width: 0px 0px 2px 2px;
  padding: 3px 3px 3px 6px;
  border-style: solid;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -78%) rotate(-45deg);
}
.color-item.active::before {
  display: block;
}
.color-item.transparent {
  color: #ddd !important;
  background-position: 0 0, 5px 5px;
  background-size: 10px 10px;
  background-image: linear-gradient(45deg, #fff 25%, transparent 0, transparent 75%, #fff 0), linear-gradient(45deg, #fff 25%, transparent 0, transparent 75%, #fff 0);
}
.color-item.transparent i-svg {
  color: #fff !important;
  background: #ddd !important;
}
.color-item.transparent.active {
  background: #ddd;
  background-image: none;
}
.color-picker {
  position: absolute;
  bottom: 30px;
  right: 0;
  transform-origin: bottom right;
}
.side {
  transform: scale(calc(1 / var(--side-ratio)));
}
`),l=i(614),c=i.n(l),d=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let p=class extends n.a{constructor(){super(...arguments),this.value="",this.offsetRight=0,this.side=!1,this.name="",this.colors=["rgba(255,71,52,1)","rgba(255,122,9,1)","rgba(255,207,12,1)","rgba(42,233,121,1)","rgba(44,214,223,1)","rgba(0,116,255,1)","rgba(138,49,255,1)","transparent"],this.pickerStatus=!1,this.activeIndex=-1,this._close_picker_lock=!1,this._preClosePicker=()=>{this._close_picker_lock&&(this._close_picker_lock=!1)},this._postClosePicker=()=>{this._close_picker_lock||this._closePicker()},this._closePicker=()=>{this.pickerStatus=!1}}firstUpdated(){this._importColor(),this.resetActiveIndex(),window.addEventListener("mousedown",this._preClosePicker),window.addEventListener("mouseup",this._postClosePicker)}disconnectedCallback(){this._closePicker(),window.removeEventListener("mousedown",this._preClosePicker),window.removeEventListener("mouseup",this._postClosePicker),super.disconnectedCallback()}resetActiveIndex(){this.activeIndex=this.colors.findIndex(e=>e===this.value)}_importColor(){const e=document.querySelector("#script-vue"),t=document.querySelector("#script-color");if(!e){const e=document.createElement("script");e.src="/vendor/vue.min.js",e.id="script-vue",e.onload=()=>{if(!t){const e=document.createElement("script");e.src="/vendor/color-picker.min.js",e.id="script-color",document.body.append(e)}},document.body.append(e)}}_showPicker(e){e.stopPropagation(),this.pickerStatus=!0,"transparent"===this.value&&(this.value="#ff4734",this.activeIndex=-1,this._emitChange())}_pickColor(e){if(e instanceof CustomEvent){const{rgba:t}=e.detail[0],{r:i,g:o,b:r,a:n}=t;this.value=`rgba(${[i,o,r,n].join(",")})`,this.activeIndex=-1,this._emitChange()}}_pickThisColor(e){this.value=this.colors[e],this.activeIndex=e,this._emitChange()}_emitChange(){const e=new CustomEvent("on-change",{detail:{value:this.value}});this.dispatchEvent(e)}async performUpdate(){this.resetActiveIndex(),super.performUpdate()}updated(e){if(e.has("pickerStatus")&&!0===this.pickerStatus)try{this.$colorPicker.scrollIntoView({block:"nearest",behavior:"smooth"})}catch(e){}}render(){return n.e`
      <section class="color-pick-list">
        ${this.colors.map((e,t)=>n.e`<span
            @click="${()=>this._pickThisColor(t)}"
            class="${Object(a.a)({active:t===this.activeIndex,"color-item":!0,transparent:"transparent"===e})}"
            style="color:${r()(e).call(e,"255,255,255")?"rgb(221,221,221)":e};"
          >
          </span>`)}
        <span
          @click="${this._showPicker}"
          class="color-item color-dropper ${-1===this.activeIndex&&this.value?"active":""}"
          style="background: url(${c.a}) no-repeat center; background-size: contain;"
        >
        </span>
      </section>
      <section
        @click="${e=>{e.stopPropagation()}}"
        class="color-picker ${this.side?"side":""}"
        .hidden=${!this.pickerStatus}
        style="margin-right:${this.offsetRight}px"
      >
        ${this.pickerStatus?n.e` <color-picker
              @mousedown=${e=>{e.stopPropagation(),this._close_picker_lock=!0}}
              value="${this.value}"
              @input="${this._pickColor}"
            ></color-picker>`:null}
      </section>
    `}};p.styles=s,d([Object(n.g)({type:String})],p.prototype,"value",void 0),d([Object(n.g)({type:Number})],p.prototype,"offsetRight",void 0),d([Object(n.g)({type:Boolean})],p.prototype,"side",void 0),d([Object(n.g)({type:String})],p.prototype,"name",void 0),d([Object(n.g)({type:Array})],p.prototype,"colors",void 0),d([Object(n.f)()],p.prototype,"pickerStatus",void 0),d([Object(n.f)()],p.prototype,"activeIndex",void 0),d([Object(n.h)(".color-picker")],p.prototype,"$colorPicker",void 0),p=d([Object(n.c)("i-colorpicker")],p)},,function(e,t,i){e.exports=i.p+"images/iconfont.919d651.svg"},function(e,t,i){e.exports=i.p+"images/icon.196b87f.svg"},,function(e,t,i){"use strict";i(11),i(17),i(19);var o=i(1),r=o.b`:host {
  display: block;
}
.ellipsis {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.label-box {
  max-width: 100%;
  margin-bottom: 10px;
  display: flex;
  align-items: center;
}
.label-box .label {
  height: 20px;
  font-size: 14px;
  font-weight: 500;
  color: #333333;
  line-height: 20px;
  white-space: nowrap;
}
.error {
  margin-left: 6px;
  font-size: 14px;
  font-weight: 400;
  color: #ea4747;
}
.input {
  background-color: transparent;
  outline: none;
  border: none;
  border-bottom: 1px solid #eee;
  line-height: 1;
  height: 20px;
  box-sizing: content-box;
  padding-bottom: 10px;
  width: 100%;
  color: #333333;
  font-size: 14px;
  font-weight: 400;
  line-height: 20px;
  font-family: 'PingFang SC', 'Microsoft Yahei', Helvetica, Arial, sans-serif;
}
.input::placeholder {
  color: #999999;
}
.input:-moz-read-only {
  cursor: not-allowed;
  color: #999999;
}
.input:read-only {
  cursor: not-allowed;
  color: #999999;
}
`,n=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};const a=async e=>null;let s=class extends o.a{constructor(){super(...arguments),this.label="",this.defaultValue="",this.value="",this.validateMsg=i18n("format_error"),this.placeholder=i18n("please_enter_text"),this.readonly=!1,this.validate=a,this.validateStatus=null,this.onChange=e=>{const t=e.currentTarget.value;!1===this.validateStatus&&this.validate(t)&&(this.validateStatus=!0),this.value=t,this.emitChangeEvent(t)},this.emitChangeEvent=e=>{const t=new CustomEvent("on-change",{detail:{value:e}});this.dispatchEvent(t)},this.checkValidity=async()=>(this.validateStatus=await this.validate(this.value),this.validateStatus),this.reset=()=>{this.value=this.defaultValue,this.emitChangeEvent(this.defaultValue),this.validateStatus=null}}render(){return o.e`
      <div class="item">
        <div class="label-box">
          <span class="label">${this.label}</span
          ><span .hidden="${!1!==this.validateStatus}" class="error ellipsis">*${this.validateMsg}</span>
        </div>

        <slot name="input">
          <input
            class="input"
            autocomplete="off"
            type="text"
            .value="${this.value||""}"
            .placeholder="${this.placeholder}"
            .readOnly="${this.readonly}"
            @blur="${this.checkValidity}"
            @input=${e=>{this.onChange(e)}}
          />
        </slot>
      </div>
    `}};s.styles=r,n([Object(o.g)({type:String})],s.prototype,"label",void 0),n([Object(o.g)({type:String})],s.prototype,"defaultValue",void 0),n([Object(o.g)({type:String})],s.prototype,"value",void 0),n([Object(o.g)({type:String})],s.prototype,"validateMsg",void 0),n([Object(o.g)({type:String})],s.prototype,"placeholder",void 0),n([Object(o.g)({type:Boolean})],s.prototype,"readonly",void 0),n([Object(o.g)({attribute:!1})],s.prototype,"validate",void 0),n([Object(o.f)()],s.prototype,"validateStatus",void 0),s=n([Object(o.c)("i-input")],s)},function(e,t,i){"use strict";i(17),i(19),i(31);var o=i(1),r=o.b`.input {
  outline: none;
  border-top: none;
  border-right: none;
  border-left: none;
  border-image: initial;
  border-bottom: 1px solid #eeeeee;
  line-height: 1;
  height: 30px;
  box-sizing: border-box;
  padding-bottom: 6px;
  width: 100%;
  color: #333333;
  max-height: 50px;
  line-height: 16px;
  max-width: 100%;
  min-width: 100%;
  resize: none;
  background-color: transparent;
  font-family: 'PingFang SC', 'Microsoft Yahei', Helvetica, Arial, sans-serif;
}
`,n=i(328),a=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let s=class extends o.a{constructor(){super(...arguments),this.textareaHeight="auto",this.value="",this.placeholder="",this.emitChangeEvent=e=>{const t=new CustomEvent("on-change",{detail:{value:e}});this.dispatchEvent(t)}}setTextareaHeight(e){const t=e.split("\n");if(1===t.length)this.textareaHeight="auto";else{const e=16*t.length;this.textareaHeight=e+2+"px"}}updated(e){e.has("value")&&this.setTextareaHeight(this.value)}render(){return o.e`
      <textarea
        class="input global-scrollbar"
        rows="1"
        style="height:${this.textareaHeight}"
        autocomplete="off"
        @input="${e=>{const t=e.currentTarget.value;this.value=t,this.emitChangeEvent(t),this.setTextareaHeight(t)}}"
        .value="${this.value}"
        .placeholder="${this.placeholder}"
      ></textarea>
    `}};s.styles=[n.a,r],a([Object(o.f)()],s.prototype,"textareaHeight",void 0),a([Object(o.g)({type:String})],s.prototype,"value",void 0),a([Object(o.g)({type:String})],s.prototype,"placeholder",void 0),s=a([Object(o.c)("i-textarea")],s)},function(e,t,i){"use strict";var o=i(7),r=i.n(o),n=(i(17),i(19),i(1)),a=n.b`.icon-preview {
  transform: scale(0.25);
  transform-origin: left top;
}
.svg-box {
  width: 100%;
  height: 100%;
  box-sizing: border-box;
  position: relative;
  border-radius: 6px;
  background-color: #ddd;
  background-image: linear-gradient(45deg, #fff 25%, transparent 0, transparent 75%, #fff 0), linear-gradient(45deg, #fff 25%, transparent 0, transparent 75%, #fff 0);
  background-position: 0 0, 5px 5px;
  background-size: 10px 10px;
  overflow: hidden;
}
`,s=i(607),l=i(312),c=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let d=class extends n.a{constructor(){super(...arguments),this.bgText="",this.bgFont=30,this.bgColor="",this.iconType="custom-icon",this.fontScale=18/7,this.getImg=()=>new r.a(e=>{e(null)})}get previewFont(){return this.bgFont*this.fontScale+"px 'PingFang SC', 'Microsoft Yahei', monospace, sans-serif"}render(){return n.e`<div class="svg-box">
      <div class="svg-text" style="">
        ${Object(s.a)(Object(l.a)({bgFont:this.bgFont,bgText:this.bgText,bgColor:this.bgColor},"6px"))}
      </div>
    </div>`}};d.styles=a,c([Object(n.g)({type:String})],d.prototype,"bgText",void 0),c([Object(n.g)({type:Number})],d.prototype,"bgFont",void 0),c([Object(n.g)({type:String})],d.prototype,"bgColor",void 0),c([Object(n.g)({type:String})],d.prototype,"iconType",void 0),c([Object(n.h)(".icon-preview")],d.prototype,"$preview",void 0),d=c([Object(n.c)("i-texticon")],d)},function(e,t,i){"use strict";var o=i(55),r=i.n(o),n=(i(17),i(19),i(11),i(26)),a=i(37),s=i(1),l=s.b`.item {
  position: relative;
  width: 100%;
  height: 100%;
}
.img-item {
  position: relative;
  width: 100%;
  height: 100%;
  background-color: #dddddd;
  background-image: linear-gradient(45deg, #ffffff 25%, transparent 0px, transparent 75%, #ffffff 0px), linear-gradient(45deg, #ffffff 25%, transparent 0px, transparent 75%, #ffffff 0px);
  background-position: 0px 0px, 5px 5px;
  background-size: 10px 10px;
  border-radius: 6px;
}
.img-dropper {
  position: relative;
  margin-right: 8px;
  display: inline-flex;
  justify-content: center;
  align-items: center;
  vertical-align: bottom;
  width: 60px;
  height: 60px;
  background: #ffffff;
  background-image: url("data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' rx='6' ry='6' stroke='%23C3C3C3FF' stroke-width='1' stroke-dasharray='5%2c 6' stroke-dashoffset='12' stroke-linecap='butt'/%3e%3c/svg%3e");
  border-radius: 6px;
  cursor: pointer;
}
.img-dropper[hidden] {
  display: none;
}
.active .preview {
  border-color: transparent;
}
.img-preview {
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  box-sizing: border-box;
}
.img-preview .editing:hover {
  opacity: 1;
}
.img-preview .editing {
  opacity: 0;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  border-radius: 6px;
  background: rgba(0, 0, 0, 0.3);
  transition: opacity 0.2s;
}
.img-preview .editing-icon {
  width: 28px;
  height: 28px;
}
.img-preview i-svg {
  --size: 90%;
  color: #fff;
  opacity: 0.8;
  cursor: pointer;
}
.img-preview i-svg:hover {
  opacity: 1;
  color: #fff;
}
.del {
  position: absolute;
  width: 18px;
  height: 18px;
  top: -6px;
  right: -6px;
  cursor: pointer;
  transition: transform 0.2s;
}
.del:hover {
  transform: scale(1.1);
}
#imgType {
  width: 1px;
  height: 1px;
}
`,c=i(523),d=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let p=class extends s.a{constructor(){super(...arguments),this.cropper=null,this.preViewImgData=null,this.preViewImgUrl="",this.active=!1,this.bgColor="",this.iconType="custom-icon",this.canDelete=!1,this.modalBorderRadius="3px",this.qiniu=!1,this.emitChangeEvent=()=>{const e=new CustomEvent("on-change",{detail:{bgColor:this.bgColor,preViewImgData:this.preViewImgData,preViewImgUrl:this.preViewImgUrl}});this.dispatchEvent(e)},this.initCropper=()=>{this.cropper=c.a.create({borderRadius:this.modalBorderRadius}),this.cropper.addEventListener("on-change",async e=>{const{data:t,color:i,changed:o}=e.detail;if(!this.qiniu||o||!this.preViewImgUrl.startsWith("http")){this.bgColor=i,this.preViewImgData=t;const e=this.preViewImgUrl;this.preViewImgUrl=r.a.createObjectURL(this.preViewImgData),r.a.revokeObjectURL(e)}this.emitChangeEvent()})},this.getImg=async()=>{var e,t;if(this.preViewImgUrl.startsWith("http"))return{url:this.preViewImgUrl,bgColor:this.bgColor};const{data:i,error:o}=await a.f.uploadFile(this.preViewImgData,n.a.randomId("icon-")+".png",this.iconType);if(o){const i=(null===(t=null===(e=o.response)||void 0===e?void 0:e.data)||void 0===t?void 0:t.error)?o.response.data.error:o.message;throw new Error(i)}return{url:i.url,bgColor:this.bgColor}},this._chooseImg=e=>{const t=(e.target.files||e.dataTransfer.files)[0],i=new FileReader;i.readAsDataURL(t),e.currentTarget.value=null,i.onload=()=>{this.cropper.init(i.result,this.bgColor),this.cropper.show()}},this.reset=()=>{this.preViewImgUrl&&r.a.revokeObjectURL(this.preViewImgUrl),this.preViewImgData=null,this.preViewImgUrl="",this.bgColor="",this.emitChangeEvent()},this._delImg=e=>{e.stopPropagation(),this.preViewImgUrl&&r.a.revokeObjectURL(this.preViewImgUrl),this.preViewImgData=null,this.preViewImgUrl="",this.emitChangeEvent()},this._editImg=()=>{this.cropper.init(this.preViewImgUrl,this.bgColor),this.cropper.show()}}firstUpdated(){this.initCropper()}disconnectedCallback(){c.a.destroy(),super.disconnectedCallback()}render(){return s.e`
      <div class="item img-item">
        <div class="img-item">
          <input
            @drop="${this._chooseImg}"
            accept="image/*"
            @change="${this._chooseImg}"
            type="file"
            id="imgType"
            style="position:absolute;clip:rect(0 0 0 0);"
          />
          <label
            .hidden="${!!this.preViewImgUrl}"
            class="img-dropper"
            style="${this.active?"background-image: none;":""}"
            for="imgType"
          >
            <i-usesvg style="color:#C3C3C3;width:22px;height:22px" type="icon-xingzhuangjiehe2x" iconfont></i-usesvg>
          </label>
          <div
            .hidden="${!this.preViewImgUrl}"
            class="img-dropper img-preview"
            style="border:${this.active?"none":"1px solid #DADCE0"};background-color:${this.bgColor||"transparent"}; background-image: url('${this.preViewImgUrl}')"
            @click="${this._editImg}"
          >
            <div class="editing">
              <img class="editing-icon" src="${i(678)}" alt="" />
            </div>
            <img
              .hidden="${!this.canDelete}"
              class="del"
              @click="${this._delImg}"
              src="${i(679)}"
              alt=""
            />
          </div>
        </div>
      </div>
    `}};p.styles=l,d([Object(s.g)({type:String})],p.prototype,"preViewImgUrl",void 0),d([Object(s.g)({type:Boolean})],p.prototype,"active",void 0),d([Object(s.g)({type:String})],p.prototype,"bgColor",void 0),d([Object(s.g)({type:String})],p.prototype,"iconType",void 0),d([Object(s.g)({type:Boolean})],p.prototype,"canDelete",void 0),d([Object(s.g)({type:String})],p.prototype,"modalBorderRadius",void 0),d([Object(s.g)({type:Boolean})],p.prototype,"qiniu",void 0),p=d([Object(s.c)("i-imgicon")],p)},,,,,,,,,,,,function(e,t,i){var o=i(206),r=i(665),n=i(666),a=Math.max,s=Math.min;e.exports=function(e,t,i){var l,c,d,p,h,u,g=0,f=!1,m=!1,b=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var i=l,o=c;return l=c=void 0,g=t,p=e.apply(o,i)}function v(e){return g=e,h=setTimeout(x,t),f?y(e):p}function w(e){var i=e-u;return void 0===u||i>=t||i<0||m&&e-g>=d}function x(){var e=r();if(w(e))return _(e);h=setTimeout(x,function(e){var i=t-(e-u);return m?s(i,d-(e-g)):i}(e))}function _(e){return h=void 0,b&&l?y(e):(l=c=void 0,p)}function A(){var e=r(),i=w(e);if(l=arguments,c=this,u=e,i){if(void 0===h)return v(u);if(m)return clearTimeout(h),h=setTimeout(x,t),y(u)}return void 0===h&&(h=setTimeout(x,t)),p}return t=n(t)||0,o(i)&&(f=!!i.leading,d=(m="maxWait"in i)?a(n(i.maxWait)||0,t):d,b="trailing"in i?!!i.trailing:b),A.cancel=function(){void 0!==h&&clearTimeout(h),g=0,l=u=c=h=void 0},A.flush=function(){return void 0===h?p:_(r())},A}},function(e,t,i){var o=i(122);e.exports=function(){return o.Date.now()}},function(e,t,i){var o=i(667),r=i(206),n=i(669),a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(n(e))return NaN;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=o(e);var i=s.test(e);return i||l.test(e)?c(e.slice(2),i?2:8):a.test(e)?NaN:+e}},function(e,t,i){var o=i(668),r=/^\s+/;e.exports=function(e){return e?e.slice(0,o(e)+1).replace(r,""):e}},function(e,t){var i=/\s/;e.exports=function(e){for(var t=e.length;t--&&i.test(e.charAt(t)););return t}},function(e,t,i){var o=i(235),r=i(212);e.exports=function(e){return"symbol"==typeof e||r(e)&&"[object Symbol]"==o(e)}},,,,,,,,,function(e,t,i){e.exports=i.p+"images/edit.064f8e9.svg"},function(e,t,i){e.exports=i.p+"images/del.20d8e3b.svg"},function(e,t,i){e.exports=i.p+"images/permission_img.1fa8fa6.svg"},function(e,t,i){e.exports=i.p+"images/item_1.8b1e737.png"},function(e,t,i){e.exports=i.p+"images/item_2.f6e1bf0.png"},function(e,t,i){e.exports=i.p+"images/item_3.d04a54a.png"},function(e,t,i){e.exports=i.p+"images/arrow.1799f5d.png"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";i.r(t),i.d(t,"syncStore",(function(){return L}));var o=i(7),r=i.n(o),n=i(15),a=i.n(n),s=i(135),l=i.n(s),c=(i(17),i(19),i(11),i(60),i(31),i(4)),d=i(37),p=i(327),h=i(763),u=i(604),g=i(764),f=i(760),m=i(506),b=i(765),y=i(603),v=i(761),w=i(1),x=i(248),_=w.b`.container {
  width: 410px;
  box-sizing: border-box;
  padding: 40px 40px 34px 40px;
  background: #ffffff;
  border-radius: 6px;
}
.header {
  text-align: center;
  line-height: 30px;
  height: 28px;
  font-size: 20px;
  font-weight: 500;
  color: #333333;
  line-height: 28px;
}
.main {
  margin: 24px auto 40px;
}
.tips {
  margin-bottom: 30px;
  font-size: 14px;
  font-weight: 400;
  color: #656565;
  line-height: 20px;
}
.checkbox {
  display: flex;
  align-items: center;
  position: relative;
  margin-bottom: 20px;
  font-size: 14px;
  font-weight: 400;
  color: #333333;
  cursor: pointer;
}
.checkbox .input-box {
  display: flex;
  align-items: center;
  position: relative;
}
.checkbox label {
  box-sizing: border-box;
  position: absolute;
  top: 0;
  left: 0;
  width: 16px;
  height: 16px;
  border: 2px solid #333;
  border-radius: 8px;
  cursor: pointer;
}
.checkbox label::after {
  content: '';
  width: 9px;
  height: 5px;
  position: absolute;
  top: 1px;
  left: 1px;
  border: 2px solid #333;
  border-top: none;
  border-right: none;
  background: transparent;
  opacity: 0;
  transform: rotate(-45deg);
}
.checkbox input {
  visibility: hidden;
}
.checkbox input:checked + label::after {
  opacity: 1;
}
.checkbox:last-of-type {
  margin-bottom: 0;
}
.btn {
  width: 330px;
  height: 52px;
}
.footer-import {
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.btn-import {
  width: 155px;
  height: 52px;
}
`,A=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let S=class extends x.a{constructor(){super(...arguments),this.onChecked=e=>{},this.show=!1,this.checked=0,this.handleCheck=e=>{this.show=!1,"function"==typeof this.onChecked&&this.onChecked(e),this.checked=0,this.onChecked=()=>{}}}static create(e){const t=document.body.querySelector("#modal-first-sync");if(t){if(!this.instance){const e=document.createElement("modal-first-sync");t.appendChild(e),this.instance=e}return this.instance.show=!0,this.instance.onChecked=e,this.instance}}static hide(){this.instance&&this.instance.show&&this.instance.handleCheck(null)}firstUpdated(){}checkOne(e){this.checked=e}updated(){this.radios[this.checked].checked=!0}render(){return w.e`<infinito-modal style="--modal-padding:0;" .closeable="${!1}" .open=${this.show}>
      <div slot="body">
        <div class="container">
          <div class="header">${i18n("choose_sync_type")}</div>
          <div class="main">
            <div class="tips">${i18n("sync_type_tips")}</div>
            <div class="checkbox-box">
              <div class="checkbox" @click="${()=>this.checkOne(0)}">
                <div class="input-box">
                  <input name="first_sync" type="radio" value="0" id="first_sync_0" />
                  <label for="first_sync_0"></label>
                </div>
                <span>${i18n("merge_cloud_local")}</span>
              </div>
              <div class="checkbox" @click="${()=>this.checkOne(1)}">
                <div class="input-box">
                  <input name="first_sync" type="radio" value="1" id="first_sync_1" />
                  <label for="first_sync_1"></label>
                </div>
                <span>${i18n("use_local")}</span>
              </div>
              <div class="checkbox" @click="${()=>this.checkOne(2)}">
                <div class="input-box">
                  <input name="first_sync" type="radio" value="2" id="first_sync_2" />
                  <label for="first_sync_2"></label>
                </div>
                <span>${i18n("use_cloud")}</span>
              </div>
            </div>
          </div>
          <div class="footer">
            <infinito-button
              primary
              class="btn"
              @click="${()=>{this.handleCheck(this.checked)}}"
              >${i18n("confirm")}</infinito-button
            >
          </div>
        </div>
      </div>
    </infinito-modal> `}};S.styles=_,S.instance=null,A([Object(w.g)()],S.prototype,"onChecked",void 0),A([Object(w.g)({type:Boolean})],S.prototype,"show",void 0),A([Object(w.g)({type:Number})],S.prototype,"checked",void 0),A([Object(w.i)('[name="first_sync"]')],S.prototype,"radios",void 0),S=A([Object(w.c)("modal-first-sync")],S);var k=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let O=class extends x.a{constructor(){super(...arguments),this.onChecked=e=>{},this.show=!1,this.checked=0,this.handleCheck=e=>{this.show=!1,"function"==typeof this.onChecked&&this.onChecked(e),this.checked=0,this.onChecked=()=>{}}}static create(e){const t=document.body.querySelector("#modal-import-type");if(t){if(!this.instance){const e=document.createElement("modal-import-type");t.appendChild(e),this.instance=e}return this.instance.show=!0,this.instance.onChecked=e,this.instance}}static hide(){this.instance&&this.instance.show&&this.instance.handleCheck(null)}firstUpdated(){}checkOne(e){this.checked=e}updated(){this.radios[this.checked].checked=!0}render(){return w.e`<infinito-modal style="--modal-padding:0;" .closeable="${!1}" .open=${this.show}>
      <div slot="body">
        <div class="container">
          <div class="header">${i18n("import_select_tile")}</div>
          <div class="main">
            <div class="tips">${i18n("inportdata_desc")}</div>
            <div class="checkbox-box">
              <div class="checkbox" @click="${()=>this.checkOne(0)}">
                <div class="input-box">
                  <input name="first_sync" type="radio" value="0" id="first_sync_0" />
                  <label for="first_sync_0"></label>
                </div>
                <span>${i18n("merge_data")}</span>
              </div>
              <div class="checkbox" @click="${()=>this.checkOne(1)}">
                <div class="input-box">
                  <input name="first_sync" type="radio" value="1" id="first_sync_1" />
                  <label for="first_sync_1"></label>
                </div>
                <span>${i18n("overwrite_data")}</span>
              </div>
            </div>
          </div>
          <div class="footer-import">
            <infinito-button
              class="btn-import"
              @click="${()=>{this.handleCheck(null)}}"
              >${i18n("cancel")}</infinito-button
            >
            <infinito-button
              primary
              class="btn-import"
              @click="${()=>{this.handleCheck(this.checked)}}"
              >${i18n("confirm")}</infinito-button
            >
          </div>
        </div>
      </div>
    </infinito-modal> `}};O.styles=_,O.instance=null,k([Object(w.g)()],O.prototype,"onChecked",void 0),k([Object(w.g)({type:Boolean})],O.prototype,"show",void 0),k([Object(w.g)({type:Number})],O.prototype,"checked",void 0),k([Object(w.i)('[name="first_sync"]')],O.prototype,"radios",void 0),O=k([Object(w.c)("modal-import-type")],O);var I=i(210),$=i(0),E=i(507),C=i(329),T=i(12),j=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};const P=[h.a,u.b,f.a,g.a,m.a,b.a,v.weatherStore];class R extends p.a{constructor(){super(...arguments),this.timmer=null,this.downloading=!1,this.backuping=!1,this.isBackup=!1,this.isOpenSync=!0,this.syncId="",this.lastSyncTime=0,this.syncSucsess=!1,this.syncFail=!1,this.syncFailMsg="",this.autosSyncList=[],this.waitMergeData=null,this.waitMergeId=null,this.manualSyncList={},this.isRecovered=!1,this.recoverErrorTimes=0,this.master=!1,this.prerender=[],this.autoBackupPipe={data:{},websocketKeys:[],timestamp:0},this.getAllBackupData=async()=>{const e={};return await r.a.all(P.map(async t=>{const i=await t.getBackupData();e[t.backupFileKey]=i})),e},this.getAutoLatest=async(e="all")=>{const t=localStorage.getItem("lock-auto-recover");if(t&&Date.now()-Number(t)<3e3)return;if(localStorage.setItem("lock-auto-recover",""+Date.now()),await this.getSyncList(),0===this.autosSyncList.length){const e=y.userStore.userInfo["backup-version-v2"];if(y.userStore.userInfo["auto-backup"]&&!e){const e=y.userStore.userInfo.email?"basic":"pro";await this.getV1RemoteData(e)}else this.tiggerBackup();return}const i=this.autosSyncList[0];if((null==i?void 0:i.id)===this.syncId||this.waitMergeId===(null==i?void 0:i.id))return;const o=localStorage.getItem("pre-sync-id");o&&(null==i?void 0:i.id)===o||(await this.getDetail(i.id,"auto",e,!1,!0),localStorage.removeItem("lock-auto-recover"))},this.changeSyncStatus=e=>{this.master=!1,this.downloading=e.downloading,this.backuping=e.backuping,this.isBackup=e.isBackup,this.syncFail=e.syncFail,this.syncFailMsg=e.syncFailMsg,this.syncSucsess=e.syncSucsess,(this.syncSucsess||this.syncFail)&&this.syncEnd()}}get autoSyncing(){return this.downloading||this.backuping}async changeSyncSwitch(e){this.isOpenSync=e}async autoBackup(e,t=""){const i=await this.toSync(!0,e,t);return i.error||Object(c.i)(()=>{this.autosSyncList=i.data}),i}async manualBackup(){const{default:e}=await Promise.resolve().then(i.bind(null,518)),t=e.loading(i18n("backing_up")),{error:o,data:r}=await this.toSync();t(),o?e.error(i18n("backup_failed")):Object(c.i)(()=>{this.manualSyncList=r})}async toSync(e=!1,t={},i=""){var o,n;let a;if(this.master=!0,e)this.isBackup=!0,this.backuping=!0,a=await d.e.autoBackup(t,i);else{const e={};await r.a.all(P.map(async t=>{const i=await t.getBackupData();e[t.backupFileKey]=i})),a=await d.e.manualBackup(e)}const{error:s,data:l=[]}=a;return e&&(s||I.slave.postTask("slave:sync-to-server",i),s?this.backupEnd(s.message||"auto-backup error",null===(o=l[0])||void 0===o?void 0:o.id):this.backupEnd(null,null===(n=l[0])||void 0===n?void 0:n.id)),a}backupEnd(e,t=""){Object(c.i)(()=>{this.master=!0,this.backuping=!1,e?this.syncFail=!0:(this.syncSucsess=!0,t&&(this.syncId=t,this.lastSyncTime=Date.now()))}),this.syncEnd()}downloadEnd(e,t=""){Object(c.i)(()=>{this.master=!0,this.downloading=!1,this.backuping=!1,e?this.syncFail=!0:(this.syncSucsess=!0,t&&(this.syncId=t,this.lastSyncTime=Date.now()))}),this.syncEnd()}syncEnd(){clearTimeout(this.timmer),this.timmer=setTimeout(()=>{Object(c.i)(()=>{this.syncFail=!1,this.syncFailMsg="",this.syncSucsess=!1,this.isBackup=!1})},3e3)}async getSyncList(){const{data:e,error:t}=await d.e.getSyncList();if(t)throw t;Object(c.i)(()=>{this.autosSyncList=e.auto,this.manualSyncList=e.manual})}async getDetail(e,t,o="all",r=!1,n=!1){let a,s;if(this.master=!0,r){const{default:e}=await Promise.resolve().then(i.bind(null,518));a=e,s=a.loading(i18n("syncing"))}else this.downloading=!0,this.isBackup=!1;const{data:l,error:c}=await d.e.getSyncDetail(n?"latest":e,t,o);r&&(null==s||s()),c?r?null==a||a.error(i18n("sync_fail")):this.downloadEnd(c.message||"download error"):(await this.useRemote(l,r),this.downloadEnd(null,e),this.tiggerBackup())}tiggerBackup(){var e;this.changeRecoveredStatus(!0),(null===(e=this.autoBackupPipe.websocketKeys)||void 0===e?void 0:e.length)&&(this.autoBackupPipe.timestamp=Date.now())}async getV1RemoteData(e,t=!1){let o,r;if(this.master=!0,t){const{default:e}=await Promise.resolve().then(i.bind(null,518));o=e,r=o.loading(i18n("syncing"))}else this.downloading=!0,this.isBackup=!1;const{error:n,data:a}=await d.e.getV2DataFromV1(e);t&&(null==r||r()),n?(t?null==o||o.error(i18n("sync_fail")):this.downloadEnd(n.message||"download v1 error"),Object(c.i)(()=>{this.recoverErrorTimes+=1})):(this.downloadEnd(null),await this.useRemote(a,t,!0),this.tiggerBackup())}changeRecoveredStatus(e){this.isRecovered=e}autoRunGetAutoLatest(){setTimeout(()=>{this.getAutoLatest()},0)}showModalAndCheckType(e=!1){return new r.a((t,i)=>{var o;if(e&&S.hide(),null===(o=S.instance)||void 0===o?void 0:o.show)return void t(null);const n=Object(c.j)(this.waitMergeData);S.create(async o=>{this.mergeType=o,this.diffColorItems();try{localStorage.setItem("restoring","1"),await r.a.all(P.map(async e=>{if(n&&n[e.backupFileKey])if(1===o)e.restartAutoBackupReaction(!0);else if(2===o)try{await e.mergeRemote(n[e.backupFileKey],!0),"site"===e.backupFileKey&&h.a.setRedirectVersion("")}catch(e){}else{if(0!==o)throw new Error("not check");try{await e.mergeRemote(n[e.backupFileKey],!1),"site"===e.backupFileKey&&h.a.setRedirectVersion("")}catch(e){}e.restartAutoBackupReaction(!0)}})),this.downloadEnd(null,this.waitMergeId),this.tiggerBackup(),Object(c.i)(()=>{this.waitMergeData=null,this.waitMergeId=null})}catch(t){e&&i(t)}localStorage.removeItem("restoring"),t(null)})})}useLocalData(e){P.map(async t=>{if(null==e?void 0:e[t.backupFileKey])try{await t.mergeRemote(e[t.backupFileKey],!0)}catch(e){console.error("Store ~ syncStores.map ~ error",e)}})}async useLocalDataWithCheck(e){P.some(t=>{if(e&&e[t.backupFileKey]){console.log("diffData ~ st.backupFileKey",t.backupFileKey);return t.diffRemote(e[t.backupFileKey])}return!1})?await this.showModalAndCheckImportType(e):this.useLocalData(e)}showModalAndCheckImportType(e){return new r.a(t=>{O.create(async i=>{try{await r.a.all(P.map(async t=>{if(e&&e[t.backupFileKey])if(1===i)try{await t.mergeRemote(e[t.backupFileKey],!0),"site"===t.backupFileKey&&h.a.setRedirectVersion("")}catch(e){}else{if(0!==i)throw new Error("not check");try{await t.mergeRemote(e[t.backupFileKey],!1),"site"===t.backupFileKey&&h.a.setRedirectVersion("")}catch(e){}}}))}catch(e){console.log("ModalImportType.create ~ error",e)}t(null)})})}useRemote(e,t,i=!1){return new r.a(async o=>{if(Object(c.i)(()=>{this.waitMergeData=null,this.waitMergeId=null}),t)await r.a.all(P.map(async t=>{if(null==e?void 0:e[t.backupFileKey])try{await t.mergeRemote(e[t.backupFileKey],!0),"site"===t.backupFileKey&&h.a.setRedirectVersion("")}catch(e){}})),this.mergeType=2,this.diffColorItems(),o(null);else if(this.isRecovered)await r.a.all(P.map(async t=>{if(null==e?void 0:e[t.backupFileKey])if(i)try{await t.mergeRemote(e[t.backupFileKey],!0)}catch(e){}else{t.stopAutoBackupReaction();try{await t.mergeRemote(e[t.backupFileKey],!0)}catch(e){}t.restartAutoBackupReaction()}})),o(null);else{P.some(t=>{if(e&&e[t.backupFileKey]){console.log("diffData ~ st.backupFileKey",t.backupFileKey);return t.diffRemote(e[t.backupFileKey])}return!1})?(Object(c.i)(()=>{var t;this.waitMergeData=e,this.waitMergeId=null===(t=this.autosSyncList[0])||void 0===t?void 0:t.id}),await this.showModalAndCheckType(!0),o(null)):(this.mergeType=2,this.diffColorItems(),await r.a.all(P.map(async t=>{if(null==e?void 0:e[t.backupFileKey])try{await t.mergeRemote(e[t.backupFileKey],!0)}catch(e){}})),o(null))}})}pushAutoBackupPipe(e){y.userStore.isLogin&&this.isOpenSync&&(Object.keys(e).forEach(t=>{var i;this.autoBackupPipe.data[t]=e[t],a()(i=this.autoBackupPipe.websocketKeys).call(i,t)||this.autoBackupPipe.websocketKeys.push(t)}),this.autoBackupPipe.timestamp=Date.now())}cleanupPipe(e){e===this.autoBackupPipe.timestamp&&(this.autoBackupPipe={data:{},websocketKeys:[],timestamp:0})}clearList(){this.autosSyncList=[],this.manualSyncList=[]}async diffColorItems(){await y.userStore.userProfilePromise;const e=y.userStore.userInfo["wp-color-update"];if(e===y.userStore.wpColorUpdate)return;const{mergeType:t}=this,i=await Object(E.c)(),o=Object(c.j)(f.a.customColorItems);await f.a.mergeCustomColor(o,i,Number(t),!0),y.userStore.setWpColorUpdate(e)}}j([c.g],R.prototype,"downloading",void 0),j([c.g],R.prototype,"backuping",void 0),j([c.g],R.prototype,"isBackup",void 0),j([c.g],R.prototype,"isOpenSync",void 0),j([c.g],R.prototype,"syncId",void 0),j([c.g],R.prototype,"lastSyncTime",void 0),j([c.g],R.prototype,"syncSucsess",void 0),j([c.g],R.prototype,"syncFail",void 0),j([c.g],R.prototype,"syncFailMsg",void 0),j([c.g],R.prototype,"autosSyncList",void 0),j([c.g],R.prototype,"waitMergeData",void 0),j([c.g],R.prototype,"waitMergeId",void 0),j([c.g],R.prototype,"manualSyncList",void 0),j([c.g],R.prototype,"isRecovered",void 0),j([c.g],R.prototype,"recoverErrorTimes",void 0),j([c.g],R.prototype,"master",void 0),j([c.g],R.prototype,"prerender",void 0),j([c.g],R.prototype,"autoBackupPipe",void 0),j([c.e],R.prototype,"autoSyncing",null),j([c.b],R.prototype,"changeSyncSwitch",null),j([c.b],R.prototype,"autoBackup",null),j([c.b],R.prototype,"manualBackup",null),j([c.b],R.prototype,"toSync",null),j([c.b],R.prototype,"backupEnd",null),j([c.b],R.prototype,"downloadEnd",null),j([c.b],R.prototype,"syncEnd",null),j([c.b],R.prototype,"getSyncList",null),j([c.b],R.prototype,"getDetail",null),j([c.b],R.prototype,"tiggerBackup",null),j([c.b],R.prototype,"getV1RemoteData",null),j([c.b],R.prototype,"changeRecoveredStatus",null),j([c.b],R.prototype,"getAutoLatest",void 0),j([c.b],R.prototype,"pushAutoBackupPipe",null),j([c.b],R.prototype,"cleanupPipe",null),j([c.b],R.prototype,"clearList",null),j([c.b],R.prototype,"changeSyncStatus",void 0);const L=new R;L.initSyncStore(T.i,["autoBackupPipe","syncId","lastSyncTime","isOpenSync","isRecovered","recoverErrorTimes","prerender","waitMergeData","waitMergeId","manualSyncList","autosSyncList"],void 0,50);Object(c.c)(()=>{var e;if(L.firstSync){const{isOpenSync:t,isRecovered:i,downloading:o}=L;if(y.userStore.isLogin&&t&&i&&!o&&!(null===(e=S.instance)||void 0===e?void 0:e.show)){const{data:e,websocketKeys:t,timestamp:i}=L.autoBackupPipe;(async e=>{const{data:t,websocketKeys:i,timestamp:o}=e,n=Object.assign({},t);if(Object.keys(n).length)try{const e=localStorage.getItem("lock-auto-backup");if(e&&Date.now()-Number(e)<4e3)return;localStorage.setItem("lock-auto-backup",""+Date.now()),0===L.autosSyncList.length?await r.a.all(P.map(async e=>{const t=await e.getBackupData();n[e.backupFileKey]=t})):await r.a.all(P.map(async e=>{if(a()(i).call(i,e.backupFileKey)){const t=await e.getBackupData();n[e.backupFileKey]=t}}));const{error:t}=await L.autoBackup(Object(c.j)(n),i.join(","));if(t)return;L.cleanupPipe(o),localStorage.removeItem("lock-auto-backup")}catch(e){}})({data:e,websocketKeys:t,timestamp:i})}}},{delay:4e3}),Object(c.c)(()=>{if(L.firstSync){const e=L.isOpenSync&&y.userStore.isLogin;I.slave.postTask("slave:change-sync",{status:e,userInfo:{uid:y.userStore.userInfo.uid,secret:y.userStore.userInfo.secret}}),e?L.autoRunGetAutoLatest():y.userStore.isLogin&&0===L.autosSyncList.length&&0===L.manualSyncList.length?L.getSyncList():y.userStore.isLogin||L.clearList()}},{delay:100}),Object(c.c)(()=>{L.firstSync&&(L.isOpenSync&&y.userStore.isLogin||(L.changeRecoveredStatus(!1),Object(c.i)(()=>{L.syncId="",L.waitMergeId=null,L.waitMergeData=null}),localStorage.removeItem("pre-sync-id")))}),Object(c.c)(()=>{L.firstSync&&y.userStore.isLogin&&0===y.userStore.userInfo["auto-backup"]&&0===L.autosSyncList.length&&h.a.restartAutoBackupReaction(!0)}),Object(c.c)(()=>{if(L.firstSync&&L.master){const e={downloading:L.downloading,backuping:L.backuping,syncSucsess:L.syncSucsess,syncFail:L.syncFail,syncFailMsg:L.syncFailMsg,isBackup:L.isBackup};I.slave.sendMessage("tabs-sync-status",e)}},{delay:20}),Object(c.c)(()=>{var e;L.firstSync&&L.autosSyncList.length&&(L.waitMergeId===(null===(e=L.autosSyncList[0])||void 0===e?void 0:e.id)?L.showModalAndCheckType():S.hide())},{delay:1}),window.addEventListener("beforeunload",()=>{L.master&&I.slave.sendMessage("tabs-sync-status",{downloading:!1,backuping:!1,syncSucsess:!1,syncFail:!1,syncFailMsg:"",isBackup:!1})}),Object(c.h)(()=>L.firstSync,async e=>{if(e){const e=await N();C.a.trySendStatus(e)}},{delay:1e3});const N=async()=>({currentIsLogin:!!y.userStore.isLogin,currentIsOpenSync:y.userStore.isLogin&&L.isOpenSync,currentSearchEngine:g.a.searchEngine.current.types[0].url.split("?")[0],currentWallpaper:(()=>{try{const e=f.a.type,t=["userLibraryAuto","cloudAuto"],i=["cloud","color"],o=["local","default","bing"];if(a()(o).call(o,e))return e;if(a()(t).call(t,e))return{[e]:f.a.switchType};if(a()(i).call(i,e))return"color"===e?{[e]:f.a.color}:{[e]:f.a.rawUrl}}catch(e){return"error"}})(),currentIconCount:(()=>{try{var e;const t=l()(e=h.a.sites).call(e,(e,t)=>{if(null==t?void 0:t.length){return e+l()(t).call(t,(e,t)=>{var i;return(null===(i=null==t?void 0:t.children)||void 0===i?void 0:i.length)?e+t.children.length:e+1},0)}return e},0);return 10*Math.round(t/10)}catch(e){return"error"}})(),currentVersion:$.D.extVersion,currentBrowserEnv:$.c,currentRunBrowser:$.D.runtimePlatform,currentWidth:window.screen.width*window.devicePixelRatio});C.a.sendPageView({page:"newtab"})},,,,,,,function(e,t,i){"use strict";i.r(t),i.d(t,"LocalSync",(function(){return r.a})),i.d(t,"syncTabsStore",(function(){return r.b})),i.d(t,"pluginStore",(function(){return n.pluginStore})),i.d(t,"userStore",(function(){return a.userStore})),i.d(t,"settingStore",(function(){return s.b})),i.d(t,"requestCalcSize",(function(){return s.a})),i.d(t,"siteStore",(function(){return l.a})),i.d(t,"searchStore",(function(){return c.a})),i.d(t,"wallpaperStore",(function(){return d.a})),i.d(t,"todoStore",(function(){return p.a})),i.d(t,"noteStore",(function(){return h.a})),i.d(t,"weatherStore",(function(){return u.weatherStore})),i.d(t,"gmailStore",(function(){return b})),i.d(t,"syncStore",(function(){return y.syncStore})),i.d(t,"privacyStore",(function(){return x}));var o=i(4),r=i(327),n=i(605),a=i(603),s=i(604),l=i(763),c=i(764),d=i(760),p=i(506),h=i(765),u=i(761),g=(i(17),i(19),i(12)),f=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};class m extends r.a{constructor(){super(...arguments),this.unreadEmailCount=null}update(e){this.unreadEmailCount!==e&&(this.unreadEmailCount=e)}}f([o.g],m.prototype,"unreadEmailCount",void 0),f([o.b],m.prototype,"update",null);const b=new m;b.initSyncStore(g.c,["unreadEmailCount"]);var y=i(752),v=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};class w extends r.a{constructor(){super(...arguments),this.userDate=0,this.collectData=0}agreeUserData(){this.userDate=1}refuseUserData(){this.userDate=-1}resetUserData(){this.userDate=0}agreeCollectData(){this.collectData=1}refuseCollectData(){this.collectData=-1}}v([o.g],w.prototype,"userDate",void 0),v([o.g],w.prototype,"collectData",void 0),v([o.b],w.prototype,"agreeUserData",null),v([o.b],w.prototype,"refuseUserData",null),v([o.b],w.prototype,"resetUserData",null),v([o.b],w.prototype,"agreeCollectData",null),v([o.b],w.prototype,"refuseCollectData",null);const x=new w;x.initSyncStore(g.e,["userDate","collectData"]),Object(o.f)({enforceActions:"observed"})},function(e,t,i){"use strict";i.d(t,"a",(function(){return T}));var o=i(15),r=i.n(o),n=i(135),a=i.n(n),s=i(55),l=i.n(s),c=(i(31),i(89),i(60),i(17),i(19),i(11),i(4)),d=i(47),p=i(327),h=i(128),u=i(0),g=i(12),f=i(210),m=i(313),b=i(507);function y(){f.slave.postTask("slave:bg-run-clear-wallpaper-timer-task")}var v=i(209),w=i(603),x=i(160),_=i(775),A=i.n(_),S=i(26),k=i(772),O=i(518),I=i(773),$=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};const E=i(645);class C extends p.a{constructor(){super(),this.url=E,this.urlInUI=E,this.rawUrl=E,this.setWpSouceCount=e=>this.wpSourceCount=e,this.type="default",this.switchType="disabled",this.setSwitchType=e=>{this.switchType=e,this._updateTimer(!0)},this.setWpSourceCount=e=>this.wpSourceCount=e,this.wpExt="png",this.list=[],this.index=-1,this.timeEnd=0,this.remoteData=[],this.opacity=40,this.blur=0,this.setOpacity=e=>this.opacity=e,this.setBlur=e=>this.blur=e,this.liked=[],this.setLiked=e=>{this.liked=e},this.customColorItems=[],this.setCustomColorItems=e=>this.customColorItems=e,this._rgbaToHex=e=>{const t=e.replace(/rgba?\(/,"").replace(/\)/,"").replace(/[\s+]/g,"").split(","),i=parseFloat(t[3]||"1"),o=Math.floor(i*parseInt(t[0])+255*(1-i)),r=Math.floor(i*parseInt(t[1])+255*(1-i)),n=Math.floor(i*parseInt(t[2])+255*(1-i));return("0"+o.toString(16)).slice(-2)+("0"+r.toString(16)).slice(-2)+("0"+n.toString(16)).slice(-2)},this._maxCollectionlen=100,this.cloudCollection=[],this.appendCloudCollection=e=>this.cloudCollection.push(e),this.setCloudCollection=e=>this.cloudCollection=e,this._maxRecentUsedLen=100,this.cloudRecentUsedOrder={},this.setCloudRecentUsedOrder=e=>{const{cloudRecentUsedOrder:t,cloudRecentUsed:i}=this,o={};Object.keys(t).forEach(e=>{r()(i).call(i,e)&&(o[e]=t[e])}),o[e]=Date.now(),this.cloudRecentUsedOrder=o},this.cloudRecentUsed=[],this.setCloudRecentUsed=e=>{const t=Object.keys(this.cloudRecentUsedOrder);e.forEach(e=>{const i=t.indexOf(e);-1!==i&&t.splice(i,1)}),t.length>0&&t.forEach(e=>{delete this.localRecentUsedOrder[e]}),this.cloudRecentUsed=e},this.appendCloudRecentUsed=e=>{this.cloudRecentUsed.push(e),this.cloudRecentUsed=Array.from(new Set(this.cloudRecentUsed))},this.localRecentUsedOrder={},this.setLocalRecentUsedOrder=e=>{this.localRecentUsedOrder[e]=Date.now()},this.localRecentUsed=[],this.setLocalRecentUsed=e=>{const t=Object.keys(this.localRecentUsedOrder);e.forEach(e=>{const i=t.indexOf(e);-1!==i&&t.splice(i,1)}),t.length>0&&t.forEach(e=>{delete this.localRecentUsedOrder[e]}),this.localRecentUsed=e},this.appendLocalRecentUsed=e=>{this.localRecentUsed.push(e),this.localRecentUsed=Array.from(new Set(this.localRecentUsed))},this.isLibraryItem=e=>r()(e).call(e,window.__INFINITY__.wpLibraryItemId),this.isLocal=e=>r()(e).call(e,window.__INFINITY__.wpId),this.isColorItem=e=>r()(e).call(e,window.__INFINITY__.wpColorId),this.isCurrentWp=e=>this.id===e,this.diffRemote=e=>{const t=["type","switchType","timeEnd","id","wpSource","opacity","blur","customColorItems"],i=Object.keys(e).every(i=>!r()(t).call(t,i)||c.d.structural(this[i],e[i]));let o=!1;return"local"!==e.type&&e.url&&(o=this.urlInUI!==e.url),!i||o},this.nextPage=0,this.totalPage=-1,this.delay=-1,this._whenLocalSynced=async()=>{switch(function(e){Object(c.c)(()=>{const{opacity:t,blur:i}=e,o={"--wallpaper-alpha":t/100,"--wallpaper-filter":i/5+"px"};Object.keys(o).forEach(e=>{document.body.style.setProperty(e,o[e])})}),Object(c.h)(()=>e.type,t=>{r()(t).call(t,"Auto")||("bing"!==t?e.wpSource&&(e.wpSource=void 0):e.wpSource=t,e.switchType="disabled",y())}),Object(c.c)(()=>{const{id:t}=e;t&&e.addRecentUsedP(t)});const t=document.querySelector(".wallpaper");Object(c.h)(()=>[e.urlInUI,e.color],([i,o])=>{"color"!==e.type?t.style.backgroundColor?(Object(m.a)("#999"),setTimeout(()=>{Object(m.b)(i)},200)):Object(m.b)(i):Object(m.a)(o)})}(this),await I.a.initStore(),this.isAuto&&this._setCloudAutoAfterInit(),this.type){case"bing":this._setBingAfterInit();break;case"userLibraryAuto":this._checkLibraryExists()}},this._syncLock=!1,this.mergeRemote=async(e,t)=>{try{if(this._syncLock)return;if(this._syncLock=!0,!("type"in e))return;if(u.n&&delete e.blur,"cloudRecentUsed"in e){if(t)this.setCloudRecentUsed(e.cloudRecentUsed);else{const t=Array.from(new Set(e.cloudRecentUsed.concat(this.cloudRecentUsed)));this.setCloudRecentUsed(t)}delete e.cloudRecentUsed}if("customColorItems"in e&&(this.mergeCustomColor(this.customColorItems,e.customColorItems,t?2:0),delete e.customColorItems),"local"===e.type)return void await this._mergeLocal(e);e.urlInUI=e.url,this._merge(e),this._afterSynced()}catch(e){console.log(e)}finally{this._syncLock=!1}},this.windmillRotating=!1,this._windmillPrevRotateSpeed=0,this._windmillPrevRotateDegree=0,this._windmillPrevRotateTime=-1,this.performWindmillRotate=e=>{if(-1===this._windmillPrevRotateTime)return this._windmillPrevRotateTime=e,void requestAnimationFrame(this.performWindmillRotate);const t=e-this._windmillPrevRotateTime;let i=this._windmillPrevRotateDegree;const{_windmillPrevRotateSpeed:o}=this;let r=o,n=0;if(this.windmillRotating)if(o<.46){let e,i;r+=36e-5*t,r>.46?(i=(r-.46)/36e-5,e=t-i,r=.46):(e=t,i=0),n=.46*i+o*e+18e-5*e*e}else n=.46*t;else{let i;r-=36e-5*t,r<0?(i=o/36e-5,r=0):i=t,0===r&&(e=-1),n=o*i-18e-5*i*i}i-=n,i%=360,i<0&&(i=360+i),this.windmillParent&&this.windmillParent.rotateWindMill(i),this._windmillPrevRotateDegree=i,this._windmillPrevRotateTime=e,this._windmillPrevRotateSpeed=r,0!==r&&requestAnimationFrame(this.performWindmillRotate)},this._lockLoadRandomP=!1,this.needSwitchWallpaper=!1,this._afterWpAutoSwitched=()=>{if(this._updateTimer(!0),!I.a.onlyOneItem)return this._prepareNextWp()},this._lockSwitchWallpaper=!1,this.timeToSwitchWallpaper=async()=>{if(!I.a.onlyOneItem&&!this._lockSwitchWallpaper){this._lockSwitchWallpaper=!0;try{await this.switchWallpaper(),await this._afterWpAutoSwitched()}finally{this._lockSwitchWallpaper=!1}}},this.switchToNextWallpaper=async()=>{try{await this.timeToSwitchWallpaper()}catch(e){h.message.top(i18n("wallpaper_switch_failure"))}},this.initAutoBackup("wallpaper",["id","url","rawUrl","wpSource","wpSourceName","type","switchType","color","timeEnd","index","opacity","blur","cloudRecentUsed","cloudRecentUsedOrder","customColorItems","nextPage","totalPage","wpExt"]),function(e){return e.initSyncStore(g.m,["id","urlInUI","rawUrl","wpSource","wpSourceCount","wpSourceName","type","switchType","imageName","imageSource","imageType","color","index","timeEnd","remoteData","opacity","blur","cloudRecentUsed","localRecentUsed","cloudRecentUsedOrder","localRecentUsedOrder","nextPage","totalPage","wpExt","customColorItems","delay"],void 0)}(this).then(this._whenLocalSynced),setTimeout(()=>{this.windmillParent=document.querySelector("newtab-main")})}_updateTimer(e=!1){var t;const{switchType:i}=this;if(r()(t=["disabled","when-newtab"]).call(t,i))y(),this.setTimeEnd(0);else{if(e){const e=Date.now();this.setTimeEnd(e+Object(b.a)(i))}!function(e,t){const i=Date.now(),o=Object(b.a)(t),r=e.timeEnd;let n;r>i?n=r-i:(n=o,e.setTimeEnd(i+o)),f.slave.postTask("slave:bg-run-timer-to-switch-wallpaper",n)}(this,i)}}setWpSourceName(e){this.wpSourceName=e}setWallpaper(e){const{url:t,urlInUI:i,rawUrl:o,id:r,name:n,source:a}=e;n&&(this.imageName=n),this.id=r,this.url=t,this.urlInUI=i,this.rawUrl=o,this.imageSource=a,this.setBase64Wallpaper()}async setBase64Wallpaper(){var e;const{type:t,url:i}=this;if(r()(e=["local","color"]).call(e,t))return;const o=await Object(b.d)(i);await Object(v.g)(o)}setColor(e){this.type="color",this.id=e.id,this.color=e.content,this.urlInUI=void 0}setCloudWallpaper(e){this.type="cloud",this.setCloudWallpaperRaw(e)}setCloudWallpaperRaw(e){this.setWallpaper({type:e.type,id:e.id,url:e.url,urlInUI:e.url,rawUrl:e.rawUrl,source:e.source})}setAutoWallpaperRaw(e){this.setWallpaper({type:e.type,id:e.id,url:e.url,urlInUI:e.url,rawUrl:e.rawUrl,source:e.source})}setWpExt(e){this.wpExt=e}async setLocalWallpaper(e){const{file:t}=e;this.setWpExt(A.a.getExtension(t.type));const i=await Object(b.d)(t);await Object(v.g)(i),this.setType("local"),this.setWallpaper({type:e.type,url:null,urlInUI:e.url,rawUrl:e.url,id:e.id})}async enableBingWallpaper(e){this.type="bing",this.wpSource="bing",this.setBingWallpaper(e)}setBingWallpaper(e){this.setCloudWallpaperRaw(e)}setList(e){this.list=e}pushList(e){this.list.push(...e)}setIndex(e){this.index=e}setTimeEnd(e){this.timeEnd=e}setRemoteData(e){this.remoteData=e}pushRemoteData(e){this.remoteData.push(...e)}spliceRemoteData(e,t=0){this.remoteData.splice(t,e)}get isAuto(){var e;return r()(e=this.type).call(e,"Auto")}removeLiked(e){const t=this.liked.indexOf(e);-1!==t&&this.liked.splice(t,1)}addLiked(e){const t=Object(c.j)(this.liked);t.push(e);const i=Array.from(new Set(t));this.setLiked(i)}includeLiked(e){var t;return r()(t=this.liked).call(t,e)}async loadCollectionP(){const e=await Object(x.getCollectionWallpaper)();e.error||this.setCloudCollection(e.data)}async loadLikedP(){const e=await Object(x.getLikedWallpaper)();e.error||this.setLiked(e.data)}pushCustomColor(e){this.customColorItems.push(...e)}includesColorItem(e){return-1!==this.customColorItems.findIndex(({content:t})=>e===t)}appendCustomColor(e){if(-1===this.customColorItems.findIndex(({content:t})=>t===e.content)){const t=Object(c.j)(this.customColorItems);this.setCustomColorItems([e].concat(t))}}removeCustomColor(e){const t=this.customColorItems.findIndex(({id:t})=>t===e);-1!==t&&this.customColorItems.splice(t,1)}_rgbToHex(e){var t;return a()(t=e.map(e=>e.toString(16).padStart(0))).call(t,(e,t)=>e+t)}async addCustomColorItem(e){if(this.includesColorItem(e))return;const t=this._rgbaToHex(e),i=window.__INFINITY__.color_list,o=i.map(e=>S.a.hexColorDelta(t,e)),r=i[o.indexOf(Math.max.apply(null,o))],n={id:`${window.__INFINITY__.wpColorId}${Object(k.a)()}`,content:e,similarColor:r};try{w.userStore.isLogin&&await Object(x.addCustomColor)(n),this.appendCustomColor(Object.assign({type:"color"},n)),O.default.success(i18n("add_success"))}catch(e){O.default.error(i18n("network_error"))}}addCloudCollectionP(e){var t;if(r()(t=this.cloudCollection).call(t,e))return;this.appendCloudCollection(e);const i=this._maxCollectionlen-this.collectionLen;if(i<0){const e=Object(c.j)(this.cloudCollection).reverse();e.length+=i,this.setCloudCollection(e.reverse())}}removeCloudCollectionP(e){const t=this.cloudCollection.indexOf(e);-1!==t&&this.cloudCollection.splice(t,1)}get collectionLen(){return this.cloudCollection.length}removeCollectionP(e){this.removeCloudCollectionP(e)}addCollectionP(e){this.addCloudCollectionP(e)}includeCollection(e){var t;return r()(t=this.cloudCollection).call(t,e)}dropCloudRecentUsed(e){const t=this.cloudRecentUsed.indexOf(e);-1!==t&&this.cloudRecentUsed.splice(t,1)}get recentUsedLen(){return this.cloudRecentUsed.length+this.localRecentUsed.length}addLocalRecentP(e){var t;if(this.setLocalRecentUsedOrder(e),r()(t=this.localRecentUsed).call(t,e))return;this.appendLocalRecentUsed(e);const i=this._maxRecentUsedLen-this.recentUsedLen;if(i<0){const e=Object(c.j)(this.localRecentUsed).reverse();e.length+=i,this.setLocalRecentUsed(e.reverse())}}addCloudRecentP(e){var t;if(this.setCloudRecentUsedOrder(e),r()(t=this.cloudRecentUsed).call(t,e))return;this.appendCloudRecentUsed(e);const i=this._maxRecentUsedLen-this.recentUsedLen;if(i<0){const e=Object(c.j)(this.cloudRecentUsed).reverse();e.length+=i,this.setCloudRecentUsed(e.reverse())}}removeCloudRecentUsedP(e){const t=Object(c.j)(this.cloudRecentUsed);e.forEach(e=>{const i=t.indexOf(e);-1!==i&&t.splice(i,1)}),this.setCloudRecentUsed(t)}addRecentUsedP(e){this.addCloudRecentP(e)}async getBackupData(){const e={};this.backupValueKeys.forEach(t=>{e[t]=Object(c.j)(this[t])});try{if("local"===this.type){const t=await Object(v.c)();e.url=t}else e.url=this.urlInUI}catch(t){e.type="default"}return e}async _setBingAfterInit(){const e=await Object(b.b)();this.id!==e.id&&this.setCloudWallpaperRaw(e)}setDefaultWallpaper(){this.id=null,this.type="default",this.urlInUI=this.url=d.b,this.rawUrl=d.a}async _checkLibraryExists(){try{const e=await Object(x.hasWallpaperLibrary)(this.wpSource);if(e.error)throw e.error;1!==e.data&&this.setDefaultWallpaper()}catch(e){}}_setCloudAutoAfterInit(){I.a.ready?this._updateTimer(!0):this._afterWpAutoSwitched()}setType(e){this.type=e}_merge(e){Object.keys(e).forEach(t=>{this[t]!==e[t]&&(this[t]=e[t])})}async _mergeLocal(e){if("local"===this.type&&this.urlInUI.startsWith("blob:")){if(await Object(v.c)()!==e.url){const t=await Object(v.a)(e.url);e.urlInUI=e.rawUrl=l.a.createObjectURL(t),await Object(v.g)(e.url)}else delete e.urlInUI,delete e.rawUrl}else{const t=await Object(v.a)(e.url);e.urlInUI=e.rawUrl=l.a.createObjectURL(t),await Object(v.g)(e.url)}delete e.url;const t=e.wpExt;delete e.wpExt,this._merge(e),e.id?this.setWpExt(t):this.setWpExt(""),this._afterSynced()}async mergeCustomColor(e,t,i,o=!1){switch(i){case 1:if(0===e.length)return;await Object(x.setCustomColorItems)(e.map(e=>(delete e.type,e)));break;case 2:T.setCustomColorItems(t.map(e=>(e.type="color",e)));break;case 0:{const i=[],n=[];for(let t=0,o=e.length;t<o;++t){const o=e[t];r()(n).call(n,o.id)||(i.push(o),n.push(o.id))}for(let e=0,o=t.length;e<o;++e){const o=t[e];r()(n).call(n,o.id)||(i.push(o),n.push(o.id))}o&&await Object(x.setCustomColorItems)(i.map(e=>(delete e.type,e))),T.setCustomColorItems(i.map(e=>("type"in e||(e.type="color"),e)))}}}_afterSynced(){d.e&&Object(c.i)(()=>{this.url=this.url.replace(d.f,""),this.urlInUI=this.urlInUI.replace(d.f,"")}),this.setBase64Wallpaper(),this.isAuto&&(this._updateTimer(),this._prepareNextWp())}startRotateWindmill(){this.windmillRotating=!0,0===this._windmillPrevRotateSpeed&&requestAnimationFrame(this.performWindmillRotate)}endRotateWindmill(){this.windmillRotating=!1}async randomWallpaper(){if(!this._lockLoadRandomP){this._lockLoadRandomP=!0,this.startRotateWindmill();try{const{data:e,error:t}=await Object(x.getRandomWallpaper)();if(t)throw new Error(JSON.stringify(t));const i=await Object(v.f)(e.url);if(!i)throw new Error("fetch res to check :"+i);this.setCloudWallpaper(Object.assign({type:"cloud"},e)),h.message.top(i18n("wallpaper_switch_success"))}catch(e){h.message.top(i18n("wallpaper_switch_failure"))}finally{this._lockLoadRandomP=!1,this.endRotateWindmill()}}}async getNextWp(...e){const{data:t}=await Object(x.getNextWallpaper)(...e),[i]=Object(v.b)([t]);return i}async _prepareNextWp(){try{const e="userLibraryAuto"!==this.type?"library":"userLibrary",t=await this.getNextWp(this.wpSource,this.id,e);t.id===this.id?I.a.setOnlyOneItem(!0):I.a.setOnlyOneItem(!1),await Object(v.f)(t.url),I.a.setNextId(t.id),I.a.setNextRawURL(t.rawUrl),I.a.setNextURL(t.url),I.a.setNextItem(t),I.a.setReady(!0)}catch(e){if(!e.__CANCEL__)throw e}}enableUserLibraryAuto({libraryId:e,libraryName:t},i,o){this.type="userLibraryAuto",this.switchType=i,this.wpSource=e,this.wpSourceName=t,this._afterEnableWpAuto(o)}enableCloudAuto(e,t,i){this.type="cloudAuto",this.wpSource=e,this.switchType=t,this._afterEnableWpAuto(i)}_afterEnableWpAuto(e){this.setAutoWallpaperRaw(e),I.a.setOnlyOneItem(!1),this._afterWpAutoSwitched()}async switchWallpaper(){I.a.onlyOneItem||I.a.ready||await this._prepareNextWp(),this.setAutoWallpaperRaw(I.a.nextItem),I.a.setReady(!1),I.a.clearNextData()}}$([c.g],C.prototype,"id",void 0),$([c.g],C.prototype,"url",void 0),$([c.g],C.prototype,"urlInUI",void 0),$([c.g],C.prototype,"rawUrl",void 0),$([c.g],C.prototype,"wpSource",void 0),$([c.g],C.prototype,"wpSourceCount",void 0),$([c.b],C.prototype,"setWpSouceCount",void 0),$([c.g],C.prototype,"type",void 0),$([c.g],C.prototype,"switchType",void 0),$([c.b],C.prototype,"setSwitchType",void 0),$([c.b],C.prototype,"setWpSourceCount",void 0),$([c.g],C.prototype,"wpSourceName",void 0),$([c.b],C.prototype,"setWpSourceName",null),$([c.g],C.prototype,"imageName",void 0),$([c.g],C.prototype,"imageSource",void 0),$([c.g],C.prototype,"imageType",void 0),$([c.b],C.prototype,"setWallpaper",null),$([c.g],C.prototype,"color",void 0),$([c.b],C.prototype,"setColor",null),$([c.b],C.prototype,"setCloudWallpaper",null),$([c.b],C.prototype,"setCloudWallpaperRaw",null),$([c.b],C.prototype,"setAutoWallpaperRaw",null),$([c.g],C.prototype,"wpExt",void 0),$([c.b],C.prototype,"setWpExt",null),$([c.b],C.prototype,"enableBingWallpaper",null),$([c.b],C.prototype,"setBingWallpaper",null),$([c.g],C.prototype,"list",void 0),$([c.b],C.prototype,"setList",null),$([c.b],C.prototype,"pushList",null),$([c.g],C.prototype,"index",void 0),$([c.b],C.prototype,"setIndex",null),$([c.g],C.prototype,"timeEnd",void 0),$([c.b],C.prototype,"setTimeEnd",null),$([c.g],C.prototype,"remoteData",void 0),$([c.b],C.prototype,"setRemoteData",null),$([c.b],C.prototype,"pushRemoteData",null),$([c.b],C.prototype,"spliceRemoteData",null),$([c.g],C.prototype,"opacity",void 0),$([c.g],C.prototype,"blur",void 0),$([c.b],C.prototype,"setOpacity",void 0),$([c.b],C.prototype,"setBlur",void 0),$([c.e],C.prototype,"isAuto",null),$([c.g],C.prototype,"liked",void 0),$([c.b],C.prototype,"setLiked",void 0),$([c.b],C.prototype,"removeLiked",null),$([c.b],C.prototype,"addLiked",null),$([c.g],C.prototype,"customColorItems",void 0),$([c.b],C.prototype,"setCustomColorItems",void 0),$([c.b],C.prototype,"pushCustomColor",null),$([c.b],C.prototype,"removeCustomColor",null),$([c.b],C.prototype,"addCustomColorItem",null),$([c.g],C.prototype,"cloudCollection",void 0),$([c.b],C.prototype,"appendCloudCollection",void 0),$([c.b],C.prototype,"setCloudCollection",void 0),$([c.b],C.prototype,"addCloudCollectionP",null),$([c.b],C.prototype,"removeCloudCollectionP",null),$([c.e],C.prototype,"collectionLen",null),$([c.g],C.prototype,"cloudRecentUsed",void 0),$([c.b],C.prototype,"dropCloudRecentUsed",null),$([c.b],C.prototype,"setCloudRecentUsed",void 0),$([c.b],C.prototype,"appendCloudRecentUsed",void 0),$([c.g],C.prototype,"localRecentUsed",void 0),$([c.b],C.prototype,"setLocalRecentUsed",void 0),$([c.b],C.prototype,"appendLocalRecentUsed",void 0),$([c.e],C.prototype,"recentUsedLen",null),$([c.b],C.prototype,"addLocalRecentP",null),$([c.b],C.prototype,"addCloudRecentP",null),$([c.b],C.prototype,"removeCloudRecentUsedP",null),$([c.g],C.prototype,"delay",void 0),$([c.b],C.prototype,"setDefaultWallpaper",null),$([c.b],C.prototype,"_setCloudAutoAfterInit",null),$([c.b],C.prototype,"setType",null),$([c.b],C.prototype,"_merge",null),$([c.b],C.prototype,"mergeRemote",void 0),$([c.b],C.prototype,"randomWallpaper",null),$([c.b],C.prototype,"enableUserLibraryAuto",null),$([c.b],C.prototype,"enableCloudAuto",null),$([c.b],C.prototype,"switchWallpaper",null);const T=new C},function(e,t,i){"use strict";i.r(t),i.d(t,"weatherStore",(function(){return w})),i.d(t,"getCurrentWeather",(function(){return x}));var o=i(7),r=i.n(o),n=i(611),a=i.n(n),s=(i(17),i(19),i(11),i(31),i(4)),l=i(37),c=i(26),d=i(327),p=i(0);const h={100:i18n("w_100"),101:i18n("w_101"),102:i18n("w_102"),103:i18n("w_103"),104:i18n("w_104"),200:i18n("w_200"),201:i18n("w_201"),202:i18n("w_202"),203:i18n("w_203"),204:i18n("w_204"),205:i18n("w_205"),206:i18n("w_206"),207:i18n("w_207"),208:i18n("w_208"),209:i18n("w_209"),210:i18n("w_210"),211:i18n("w_211"),212:i18n("w_212"),213:i18n("w_213"),300:i18n("w_300"),301:i18n("w_301"),302:i18n("w_302"),303:i18n("w_303"),304:i18n("w_304"),305:i18n("w_305"),306:i18n("w_306"),307:i18n("w_307"),308:i18n("w_308"),309:i18n("w309"),310:i18n("w_310"),311:i18n("w_311"),312:i18n("w_312"),313:i18n("w_313"),314:i18n("w_314"),315:i18n("w_315"),316:i18n("w_316"),317:i18n("w_317"),318:i18n("w_318"),399:i18n("w_399"),400:i18n("w_400"),401:i18n("w_401"),402:i18n("w_402"),403:i18n("w_403"),404:i18n("w_404"),405:i18n("w_405"),406:i18n("w_406"),407:i18n("w_407"),408:i18n("w_408"),409:i18n("w_409"),410:i18n("w_410"),499:i18n("w_499"),500:i18n("w_500"),501:i18n("w_501"),502:i18n("w_502"),503:i18n("w_503"),504:i18n("w_504"),507:i18n("w_507"),508:i18n("w_508"),509:i18n("w_509"),510:i18n("w_510"),511:i18n("w_511"),512:i18n("w_512"),513:i18n("w_513"),514:i18n("w_514"),515:i18n("w_515"),900:i18n("w_900"),901:i18n("w_901"),999:i18n("w_999")},u={alyBGColor(e){let t="#36B3FF";switch(e.conditionCode){case"100":case"101":case"102":case"103":case"104":t="#0F7CFF";break;case"200":case"201":case"202":case"203":case"204":case"205":case"206":t="#10BDFF";break;case"207":case"208":case"209":case"210":case"211":case"212":t="#096BB2";break;case"213":case"900":t="#FF7F3B";break;case"300":case"301":case"302":case"303":case"304":case"305":case"306":case"307":case"308":case"309":case"310":case"311":case"312":case"313":case"314":case"315":case"316":case"317":case"318":case"399":t="#427BD1";break;case"301":case"300":case"402":case"403":case"404":case"405":case"406":case"407":case"408":case"409":case"410":case"4991":t="#87A6D5";break;case"500":case"501":case"502":case"503":case"504":case"505":case"506":case"507":case"508":case"509":case"510":case"511":case"512":case"513":case"514":case"515":case"999":t="#98A6BD";break;default:t="#0441C5"}return t},alyWIcon:e=>`${p.a}/weather/code_${e.conditionCode}.png`,alyText:e=>h[e.conditionCode]};function g(e,t,i){let o,r;return"celsius"===t?(o=e,r="°C"):(o=Math.floor(1.8*e+32),r="°F"),i&&(o+=r),o}var f=i(329),m=i(12),b=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a},y=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(i[o[r]]=e[o[r]])}return i};class v extends d.a{constructor(){super(...arguments),this.localData={},this.list=[],this.lastUpdated=+new Date,this.unit="celsius",this.isShowModal=!1,this.isShowSetting=!1,this.searchState="none",this.citys=[]}get formateList(){return this.list.filter(e=>e.items).map(e=>{var t=y(e,[]);return t.items=t.items.map((e,t)=>{var i=y(e,[]);return 0===t&&(i._bgColor=u.alyBGColor(i),i._text=u.alyText(i)),i._bgImg=u.alyWIcon(i),i}),t})}sortList(e){this.list=e}changeIndex(e,t){var i;if(e===t)return;let o=[...this.list];const r=o.findIndex(t=>t.cid===e);if(-1===r)return;if("bottom"===t){const[e]=o.splice(r,1);o.push(e)}else if("top"===t){const[e]=o.splice(r,1);o.unshift(e)}else{const e=o.findIndex(e=>e.cid===t);if(-1===e)return;const[i]=o.splice(r,1);o.splice(e,0,i)}const n=(null===(i=this.list.filter(e=>e.top)[0])||void 0===i?void 0:i.name)||"";(n===e||n===t)&&(o=this.list.map(e=>e.top?Object.assign(Object.assign({},e),{top:0}):e)),this.list=o}openModal(){this.isShowModal=!0}closeModal(){this.isShowModal=!1,this.searchCitys("")}updateList(e){this.list=e}diffRemote(e){var t;if((null===(t=null==e?void 0:e.list)||void 0===t?void 0:t.length)!==this.list.length)return!0;if(this.unit!==e.unit)return!0;return this.list.some((t,i)=>t.cid!==e.list[i].cid)}async mergeRemote(e,t){if(e.list)try{const i=await this.getWeatherByCid(e.list);Object(s.i)(()=>{if(this.unit=e.unit,t)this.list=i;else{const e=this.list,t=i,{result:o}=c.a.mergeArray(e,t,"cid","updateTime");this.list=o}})}catch(e){}}async getWeatherByCid(e){e=e.filter(e=>e.name&&e.cid&&e.items);return await r.a.all(e.map(async e=>{if(e.cid){const t=await l.i.getForecastWeather(e.cid);if(null==t?void 0:t.data){return Object.assign(Object.assign({},t.data),{name:e.name})}}}))}async initLocal(){const e=await l.i.getLocalCity();Object(s.i)(()=>{e&&(this.localData=e.data)})}async addCity(e,t){const{data:i}=await l.i.getForecastWeather(e);if(!i)throw new Error(i18n("no_current_city_weather_data"));Object(s.i)(()=>{for(const t in this.list)if(this.list[t].cid===e)throw new Error(i18n("repeat_city"));this.list.push(Object.assign(Object.assign({},i),{cid:e,name:t})),this.lastUpdated=+new Date,this.closeModal()})}async searchCitys(e){if(!e)return this.citys=[],void(this.searchState="none");this.searchState="ing";try{const{data:t}=await l.i.getCityList(e);t?Object(s.i)(()=>{if(200===t.status){this.searchState="done";const e=t.cities.filter(e=>!this.filterCity(e.cid));this.citys=e}}):Object(s.i)(()=>{this.searchState="error"})}catch(e){Object(s.i)(()=>{this.searchState="error"})}}filterCity(e){const t=e.substr(e.length-1);return/^[a-zA-Z]+$/.test(t)}changeSelected(e,t){this.citys[e].selected=t}deleteCityWeather(e){let t=-1;for(const i in this.list)e===this.list[i].cid&&(t=Number(i));this.list.splice(t,1),this.lastUpdated=+new Date}changeUnit(){this.unit="celsius"===this.unit?"fahrenheit":"celsius",f.a.sendEvent({settingAction:{weatherUnit:this.unit}})}toggleSetting(){this.isShowSetting=!this.isShowSetting}closeSetting(){this.isShowSetting=!1}reset(){this.isShowSetting=!1,this.isShowModal=!1}toTop(e,t){var i;this.list=a()(i=this.list.map(i=>i.cid===e?Object.assign(Object.assign({},i),{top:0===t?1:0}):Object.assign(Object.assign({},i),{top:0}))).call(i,(e,t)=>t.top-e.top)}toggleOpen(e){this.list=this.list.map(t=>t.cid===e?Object.assign(Object.assign({},t),{open:0===t.open?1:0}):Object.assign({},t))}}b([s.g],v.prototype,"localData",void 0),b([s.g],v.prototype,"list",void 0),b([s.g],v.prototype,"lastUpdated",void 0),b([s.g],v.prototype,"unit",void 0),b([s.g],v.prototype,"isShowModal",void 0),b([s.g],v.prototype,"isShowSetting",void 0),b([s.g],v.prototype,"searchState",void 0),b([s.g],v.prototype,"citys",void 0),b([s.e],v.prototype,"formateList",null),b([s.b],v.prototype,"sortList",null),b([s.b],v.prototype,"changeIndex",null),b([s.b],v.prototype,"openModal",null),b([s.b],v.prototype,"closeModal",null),b([s.b],v.prototype,"updateList",null),b([s.b],v.prototype,"mergeRemote",null),b([s.b],v.prototype,"addCity",null),b([s.b],v.prototype,"searchCitys",null),b([s.b],v.prototype,"changeSelected",null),b([s.b],v.prototype,"deleteCityWeather",null),b([s.b],v.prototype,"changeUnit",null),b([s.b],v.prototype,"toggleSetting",null),b([s.b],v.prototype,"closeSetting",null),b([s.b],v.prototype,"reset",null),b([s.b],v.prototype,"toTop",null),b([s.b],v.prototype,"toggleOpen",null);const w=new v;w.initSyncStore(m.n,["localData","list","unit","lastUpdated"],{}),w.initAutoBackup("weather",["list","unit"]);const x=()=>{const e=w.formateList[0],t=null==e?void 0:e.items[0];if(!t)return{};return{name:g(t.tmpMax,w.unit,!0),bgColor:t._bgColor,bgImg:t._bgImg}};Object(s.c)(()=>{w.list.some(e=>!e||!e.cid)&&(p.j&&alert("error"),Object(s.i)(()=>{w.list=w.list.filter(e=>(null==e?void 0:e.name)&&(null==e?void 0:e.cid)&&(null==e?void 0:e.items))}))})},function(e,t,i){"use strict";i.d(t,"b",(function(){return o}));i(31),i(17),i(19);const o={isNonEmpty:(e,t)=>""===e?t:void 0,minLength:(e,t,i)=>e.length<t?i:void 0,isEmail:(e,t)=>/^\w+([+-.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(e)?void 0:t,isPhone:(e,t)=>/^1[3456789]\d{9}$/.test(e)?void 0:t};t.a=class{constructor(){this.cache=[]}add(e,t){for(const i of t){const t=i.strategy.split(":"),r=i.errorMsg;this.cache.push(()=>{const i=t.shift();return t.unshift(e),t.push(r),o[i].apply(null,t)})}}start(){for(const e of this.cache){const t=e();if(t)return t}}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return A}));var o=i(135),r=i.n(o),n=i(611),a=i.n(n),s=i(15),l=i.n(s),c=(i(17),i(19),i(60),i(11),i(344),i(31),i(4)),d=i(521),p=i.n(d),h=i(327),u=i(604),g=i(26),f=i(0),m=i(244),b=i(605),y=i(761),v=i(37),w=i(12),x=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};class _ extends h.a{constructor(){super(...arguments),this.sites=[],this.editingId=null,this.currentPageIndex=0,this.redirectVersion="",this.mergeSiteArray=(e,t,i)=>{const o=e=>{if("object"==typeof e){if(e.target===m.i.target){const t=["target","uuid"];return r()(t).call(t,(t,i)=>t+e[i],"")}{var t;const i=a()(t=Object.keys(e).filter(e=>"id"!==e&&"updatetime"!==e)).call(t);return r()(i).call(i,(t,i)=>t+e[i],"")}}},n=(e=>{const t=Object.create(null),i=e=>{e.forEach(e=>{var o;if(Array.isArray(e))i(e);else if(e&&e.id){const r=e.id;t[r]=e,(null===(o=e.children)||void 0===o?void 0:o.length)>0&&i(e.children)}})};return i(e),t})(t),s=(e=>{const t=Object.create(null),i=e=>{e.forEach(e=>{var r;if(Array.isArray(e))i(e);else if("object"==typeof e)if((null===(r=e.children)||void 0===r?void 0:r.length)>0)i(e.children);else{const i=o(e);t[i]=!0}})};return i(e),t})(t);let l=!1;e.forEach((t,i)=>{e[i]=t.filter(e=>{var t;const i=n[e.id],r=e.updatetime||0;if((null===(t=e.children)||void 0===t?void 0:t.length)>0){if(i){return r>(i.updatetime||0)&&(l=!0,i.name=e.name),e.children.forEach(e=>{if(n[e.id]){const t=n[e.id].updatetime||0;(e.updatetime||0)>t&&(l=!0,Object.assign(n[e.id],e))}else l=!0,i.children.push(e)}),!1}return e.children=e.children.filter(e=>{if(n[e.id]){const t=n[e.id].updatetime||0;return(e.updatetime||0)>t&&(l=!0,Object.assign(n[e.id],e)),!1}return!0}),0!==e.children.length&&(1===e.children.length&&(Object.assign(e,e.children[0]),delete e.children),!0)}{if(!e.updatetime)return!1;const t=o(e);if(s[t])return!1;if(i){return r>(i.updatetime||0)&&(l=!0,Object.assign(n[e.id],e)),!1}return!0}})});const c=[];if(e.forEach(e=>{e.forEach(e=>{c.push(e)})}),c.length>0&&t.length>0){l=!0;let e=t.length-1;c.forEach(o=>{t[e].length<i?t[e].push(o):(e+=1,t[e]=[o])})}return{result:t,isLocalEffective:l}},this.convertBackupEquals=e=>{const{sites:t}=e;return(null==t?void 0:t.length)&&t.forEach(e=>{(null==e?void 0:e.length)&&e.forEach(e=>{(null==e?void 0:e.uuid)===m.i.uuid?(e.name=void 0,e.bgColor=void 0,e.bgImage=void 0):(null==e?void 0:e.children)&&e.children.forEach(e=>{(null==e?void 0:e.uuid)===m.i.uuid&&(e.name=void 0,e.bgColor=void 0,e.bgImage=void 0)})})}),e},this.reSortTimer=null,this.reSort=(e,t)=>{clearTimeout(this.reSortTimer),this.reSortTimer=setTimeout(()=>{var i;const o=e*t,n=r()(i=this.sites).call(i,(e,t)=>e.concat(t),[]),a=Array(Math.ceil(n.length/o)).fill(null);Object(c.i)(()=>{this.sites=a.map((e,t)=>n.slice(t*o,(t+1)*o))})},0)}}get uids(){var e,t;const i=new Set;return(l()(e=b.pluginStore.pluginViews).call(e,"infinity://settings")||l()(t=b.pluginStore.pluginViews).call(t,"profile"))&&this.sites.forEach(e=>{e.filter(e=>e).forEach(e=>{e.children?e.children.forEach(e=>{i.add(e.uuid+"#"+e.target)}):i.add(e.uuid+"#"+e.target)})}),i}changeCurrentPage(e){this.currentPageIndex=e}diffRemote(e){const t=e=>{if((null==e?void 0:e.target)===m.i.target){const t={name:void 0,bgColor:void 0,bgImage:void 0};return Object.assign(Object.assign({},e),t)}},i=p()(e.sites||[],t),o=p()(Object(c.j)(this.sites),t);return!c.d.structural(i,o)}mergeRemote(e,t){if(!e.sites)return;const i=Object(y.getCurrentWeather)();if(t)this.setWeatherIcon(e.sites,i),this.sites=e.sites;else{const{col:t,row:o}=u.b.setting.layout,r=t*o,{result:n}=this.mergeSiteArray(Object(c.j)(this.sites),e.sites,r);this.setWeatherIcon(n,i),this.sites=n}this.sites.length?this.sites.length-1<this.currentPageIndex&&document.querySelector("newtab-main").toPage(this.sites.length-1):this.currentPageIndex=0}clearEditSite(){this.editingId=null}setEditSite(e){this.editingId=e}delSites(e=[],t=!0){var i,o,r;const[n,a,s]=e;let l,c=null;return 2===e.length?l=this.sites[n].splice(a,1):3===e.length&&(l=null===(o=null===(i=this.sites[n][a])||void 0===i?void 0:i.children)||void 0===o?void 0:o.splice(s,1)),t&&this.finishingSites(e[0]),2===e.length&&0===(null===(r=this.sites[n])||void 0===r?void 0:r.length)&&(c=n),{data:l,clearPageIndex:c}}insertSite(e=[],t){var i,o;const[r,n,a]=e;2===e.length?r!==this.sites.length||this.sites[r]?this.sites[r].splice(n,0,t):this.sites.push([t]):3===e.length&&(null===(o=null===(i=this.sites[r][n])||void 0===i?void 0:i.children)||void 0===o||o.splice(a,0,t))}handelStatus(e,t,i,o,r){const[n]=e;let[a]=t;if(null!==r&&r<a&&(a-=1,document.querySelector("newtab-main")._toPrevPage(!0)),3===e.length&&i.children.length<2){const e=this.findIndex(n,i.id);this.destroyFolder(e),a-=1}const s=null!==r?Math.min(r,a):a;return this.finishingSites(Math.max(s,0)),this.findIndex(a,o.id)}findIndex(e,t){const i=[];for(let o=Math.max(e||0,0);o<this.sites.length;o++){const e=this.sites[o];i[0]=o;if(e.find((e,o)=>e.id===t?(i[1]=o,!0):!!e.children&&e.children.find((e,r)=>e.id===t&&(i[1]=o,i[2]=r,!0))))return i}}findIcon(e,t){let i={};for(let o=Math.max(e||0,0);o<this.sites.length;o++){if(this.sites[o].some(e=>e.id===t?(i=e,!0):!!e.children&&e.children.some(e=>e.id===t&&(i=e,!0))))return i}return i}destroyFolder(e){const[t,i]=e,o=this.sites[t][i].children;0===o.length?this.sites[t].splice(i,1):(this.sites[t][i]=o.shift(),o.length>0&&this.sites[t].push(...o))}manualDestroyFolder(e){const[t,i]=e,o=this.sites[t][i].children;this.sites[t].splice(i,1);const{col:r,row:n}=u.b.setting.layout,a=r*n-this.sites[t].length;if(a>=o.length)this.sites[t].push(...o);else{const e=o.splice(0,a);this.sites[t].push(...e);const i=this.sites.length-1;this.sites[i].push(...o),this.finishingSites(i)}}finishingSites(e=0){const{col:t,row:i}=u.b.setting.layout,o=t*i,r=e=>{if(this.sites.length<=e)return;const t=this.sites[e].length;if(t>o){const i=e+1,n=this.sites[e].splice(o,t-o);this.sites.length>i?this.sites[i].unshift(...n):this.sites.push(n),r(i)}else 0===t?(e&&e===this.sites.length-1&&document.querySelector("newtab-main").toPage(e-1),this.sites.splice(e,1),r(e)):r(e+1)};r(e);for(let e=0;e<this.sites.length;){const t=this.sites[e];t&&t.length||(this.sites.splice(e,1),e-=1),e+=1}}addSite(e,t=0){if(this.sites.length>t){const{col:i,row:o}=u.b.setting.layout,r=i*o;return this.sites[t].length<r?(this.sites[t].push(e),t):this.addSite(e,t+1)}return this.sites[t]=[e],t}isIcon(e,t){return!this.findIcon(e,t).children}changeFolderName(e,t){const[i,o]=e;this.sites[i][o].name=t,this.sites[i][o].updatetime=Date.now()}setWeatherIcon(e,t){e.forEach(e=>{e&&e.forEach(e=>{e.target===m.i.target&&(e.name=t.name||m.i.name,e.bgColor=t.bgColor||m.i.bgColor,e.bgImage=t.bgImg||m.i.bgImage),e.children&&e.children.forEach(e=>{e.target===m.i.target&&(e.name=t.name||m.i.name,e.bgColor=t.bgColor||m.i.bgColor,e.bgImage=t.bgImg||m.i.bgImage)})})})}async submitSite(e){if("color"===e.bgType?delete e.bgImage:"image"===e.bgType&&(delete e.bgFont,delete e.bgText,delete e.bgColorImage,"transparent"===e.bgColor&&(e.bgColor=void 0)),e.updatetime=await g.a.getTimestamp(),this.editingId){const t=document.querySelector("newtab-main").iconSearchShow,i=this.findIcon(t?0:this.currentPageIndex,this.editingId);let o={};Object(c.i)(()=>{if(o=Object.assign(i,e),o.target===m.i.target){const e=Object(y.getCurrentWeather)();this.setWeatherIcon(A.sites,e)}})}else{const t=Object.assign({uuid:g.a.randomId("site-"),id:g.a.randomId("siteId-"),type:"web"},e),i=A.addSite(t,this.currentPageIndex);if(t.target===m.i.target){const e=Object(y.getCurrentWeather)();this.setWeatherIcon(A.sites,e)}document.querySelector("newtab-main").toPage(i)}return null}async getRedirectTargets(){const{data:e,error:t}=await v.b.getRedirectTargets(this.redirectVersion);if(!t&&e){const{list:t,version:i}=e;this.setRedirectVersion(i),this.userRedirect(t)}}setRedirectVersion(e){this.redirectVersion=e}userRedirect(e){e.forEach(e=>{let{matchs:t,version:i,target:o}=e;t=t.map(e=>new RegExp(e)),this.sites.forEach(e=>{e.forEach(e=>{var r;(null===(r=e.children)||void 0===r?void 0:r.length)?e.children.forEach(e=>{e.target&&t.some(t=>t.test(e.target))&&e.rVersion!==i&&(e.rVersion=i,e.target=o)}):e.target&&t.some(t=>t.test(e.target))&&e.rVersion!==i&&(e.rVersion=i,e.target=o)})})})}}x([c.g],_.prototype,"sites",void 0),x([c.g],_.prototype,"editingId",void 0),x([c.g],_.prototype,"currentPageIndex",void 0),x([c.g],_.prototype,"redirectVersion",void 0),x([c.e],_.prototype,"uids",null),x([c.b],_.prototype,"changeCurrentPage",null),x([c.b],_.prototype,"mergeRemote",null),x([c.b],_.prototype,"clearEditSite",null),x([c.b],_.prototype,"setEditSite",null),x([c.b],_.prototype,"delSites",null),x([c.b],_.prototype,"insertSite",null),x([c.b],_.prototype,"destroyFolder",null),x([c.b],_.prototype,"manualDestroyFolder",null),x([c.b],_.prototype,"finishingSites",null),x([c.b],_.prototype,"reSort",void 0),x([c.b],_.prototype,"addSite",null),x([c.b],_.prototype,"changeFolderName",null),x([c.b],_.prototype,"setWeatherIcon",null),x([c.b],_.prototype,"submitSite",null),x([c.b],_.prototype,"setRedirectVersion",null),x([c.b],_.prototype,"userRedirect",null);const A=new _;A.initSyncStore(w.h,["sites","redirectVersion"],{sites:Object(m.f)(f.D.lang)}),A.initAutoBackup("site",["sites"]),Object(c.h)(()=>[u.b.setting.layout.col,u.b.setting.layout.row].join(","),()=>{A.firstSync&&setTimeout(()=>{Object(u.a)(!1)},0)},{delay:0});const S=()=>{requestIdleCallback(()=>{A.firstSync?(A.sites.forEach((e,t)=>{e&&0!==e.length||Object(c.i)(()=>{A.sites.splice(t,1)})}),A.sites.forEach((e,t)=>{e.forEach((e,i)=>{e||Object(c.i)(()=>{A.sites[t].splice(i,1)})})})):S()})};setTimeout(()=>{S()},60),Object(c.c)(()=>{if(y.weatherStore.firstSync){const e=Object(y.getCurrentWeather)();A.setWeatherIcon(A.sites,e)}},{delay:20}),Object(c.c)(()=>{A.firstSync&&requestIdleCallback(()=>{A.getRedirectTargets()})},{delay:20}),u.b.changeLayout(A.reSort)},function(e,t,i){"use strict";i.d(t,"a",(function(){return y}));var o=i(611),r=i.n(o),n=i(135),a=i.n(n),s=(i(17),i(19),i(60),i(11),i(4)),l=i(327),c=i(244),d=i(26),p=i(37),h=i(0),u=i(603),g=i(12),f=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};const m=h.D.isZh?c.a:c.b;class b extends l.a{constructor(){super(...arguments),this.list=[],this.defaultSearch=c.e,this.listHash="",this.version="",this.lang="",this.ignoreSuggest=!1,this.searchEngine={custom:[],addList:[],current:m,all:[]},this.convertBackupEquals=e=>{var t,i;let o=null===(t=null==e?void 0:e.searchEngine)||void 0===t?void 0:t.all,r=null===(i=null==e?void 0:e.searchEngine)||void 0===i?void 0:i.current;if(o&&(o=e.searchEngine.all.map(e=>e.uuid)),r&&(r=e.searchEngine.current.uuid),o||r){const t=Object.assign(Object.assign({},e.searchEngine),{all:o,current:r});return Object.assign(Object.assign({},e),{searchEngine:t})}return e},this.mergeAddArray=(e=[],t=[])=>{const i="uuid";if(!e||0===e.length)return{result:t||[],isLocalEffective:!1};const o=t.filter(e=>!!e),n=e=>{if("object"==typeof e){var t;const i=r()(t=Object.keys(e).filter(e=>"uuid"!==e&&"updatetime"!==e)).call(t);return a()(i).call(i,(t,i)=>t+e[i],"")}},s=(e=>{const t=Object.create(null);return e.forEach(e=>{const i=n(e);t[i]=!0}),t})(t),l=Object.create(null);t.forEach((e,t)=>{if(e[i]){const o=e[i];l[o]=t}});let c=!1;return e.filter(e=>0!==e.updatetime).forEach(e=>{const t=n(e);if(s[t])return;const r=e[i],a=l[r];if(void 0!==a){(o[a].updatetime||0)<(e.updatetime||0)&&(o[a]=e,c=!0)}else c=!0,o.push(e)}),{result:o.filter(e=>!!e),isLocalEffective:c}}}get allItems(){return[this.defaultSearch,...this.searchEngine.all]}diffRemote(e){var t,i;const o=e.searchEngine||{};if(JSON.stringify(o.addList||{})!==JSON.stringify(this.searchEngine.addList))return!0;if(JSON.stringify(o.custom||{})!==JSON.stringify(this.searchEngine.custom))return!0;if((null===(t=o.current)||void 0===t?void 0:t.uuid)!==this.searchEngine.current.uuid)return!0;if((null===(i=o.all)||void 0===i?void 0:i.length)!==this.searchEngine.all.length)return!0;return this.searchEngine.all.some((e,t)=>{var i,r;return(null===(r=null===(i=o.all)||void 0===i?void 0:i[t])||void 0===r?void 0:r.uuid)!==e.uuid})}mergeRemote(e,t){if(e.searchEngine)if(t)this.searchEngine=this.transformSearchI18n(e.searchEngine);else{const t=this.searchEngine.custom,i=e.searchEngine.custom,{result:o}=d.a.mergeArray(t,i,"uuid"),r=this.searchEngine.addList,n=e.searchEngine.addList,{result:a}=this.mergeAddArray(r,n),s=this.searchEngine.all,l=e.searchEngine.all,{result:c}=d.a.mergeArray(s,l,"uuid");this.searchEngine=this.transformSearchI18n({custom:o,addList:a,current:e.searchEngine.current,all:c})}}transformSearchI18n(e){const t=Object.create(null);this.list.forEach(e=>{t[e.uuid]=e});const i=e=>t[e.uuid]?Object.assign(Object.assign({},e),t[e.uuid]):e;return{custom:e.custom,addList:e.addList,current:i(e.current),all:e.all.map(e=>i(e))}}setActive(e){this.searchEngine.current=this.allItems[e]}closeSuggestTips(){this.ignoreSuggest=!0}delShortcut(e){const t=this.searchEngine.all.findIndex(t=>t.uuid===e);t>-1&&this.searchEngine.all.splice(t,1)}updateShortcut(e){if(e){this.searchEngine.all.some((t,i)=>t.uuid===e.uuid&&(this.searchEngine.all[i]=e,!0))||this.searchEngine.all.push(e);const t=this.searchEngine.current.uuid;e.uuid===t&&(this.searchEngine.current=e)}}createEngine(e,t=null){if(null===t){const t=d.a.randomId("custom-search-"),i=Object.assign(Object.assign({},e),{uuid:t});return this.searchEngine.custom.push(i),i}return this.searchEngine.custom[t]=Object.assign(Object.assign({},this.searchEngine.custom[t]),e),this.searchEngine.custom[t]}delEngine(e){const{uuid:t}=this.searchEngine.custom[e];return t!==this.searchEngine.current.uuid&&(this.delShortcut(t),this.searchEngine.custom.splice(e,1),!0)}createEngineAdd(e,t=null){if(null===t){const t=d.a.randomId("add-search-"),i=Object.assign(Object.assign({},e),{uuid:t});return this.searchEngine.addList.push(Object.assign(Object.assign({},e),{uuid:t})),i}return this.searchEngine.addList[t]=Object.assign(Object.assign({},this.searchEngine.addList[t]),e),this.searchEngine.addList[t]}delEngineAdd(e){return this.searchEngine.addList.splice(e,1),!0}async getEnginesList(){let e=this.version;this.lang!==h.D.lang&&(e="");const{data:t,error:i}=await p.d.getEnginesList(e);if(!i&&(Object(s.i)(()=>{var e;this.version=null===(e=t.meta)||void 0===e?void 0:e.version,this.lang=h.D.lang}),t.hash!==this.listHash))if(u.userStore.isLogin)this.updateEngines({list:t.list,listHash:t.hash});else{this.stopAutoBackupReaction();try{this.updateEngines({list:t.list,listHash:t.hash})}catch(i){}this.restartAutoBackupReaction()}}updateEngines({list:e,listHash:t}){this.list=e,this.listHash=t;const i={};e.forEach(e=>{i[e.uuid]=e});const o=this.searchEngine.current.uuid;i[o]&&(this.searchEngine.current=i[o]);const r=this.defaultSearch.uuid;i[r]&&(this.defaultSearch=i[r]);const n=[];this.searchEngine.all.forEach(e=>{const t=e.uuid;i[t]?0===e.updatetime?n.push(Object.assign(Object.assign({},i[t]),{updatetime:0})):n.push(Object.assign({},i[t])):n.push(e)}),this.searchEngine.all=n}sortShortcut(e,t){if(e===t)return;const i=[...this.searchEngine.all],o=i.findIndex(t=>t.uuid===e);if(-1!==o){if("all"===t){const[e]=i.splice(o,1);i.push(e)}else{const e=i.findIndex(e=>e.uuid===t);if(-1===e)return;const[r]=i.splice(o,1);i.splice(e,0,r)}this.searchEngine.all=i}}}f([s.g],b.prototype,"list",void 0),f([s.g],b.prototype,"defaultSearch",void 0),f([s.g],b.prototype,"listHash",void 0),f([s.g],b.prototype,"version",void 0),f([s.g],b.prototype,"lang",void 0),f([s.g],b.prototype,"ignoreSuggest",void 0),f([s.g],b.prototype,"searchEngine",void 0),f([s.e],b.prototype,"allItems",null),f([s.b],b.prototype,"mergeRemote",null),f([s.b],b.prototype,"setActive",null),f([s.b],b.prototype,"closeSuggestTips",null),f([s.b],b.prototype,"delShortcut",null),f([s.b],b.prototype,"updateShortcut",null),f([s.b],b.prototype,"createEngine",null),f([s.b],b.prototype,"delEngine",null),f([s.b],b.prototype,"createEngineAdd",null),f([s.b],b.prototype,"delEngineAdd",null),f([s.b],b.prototype,"getEnginesList",null),f([s.b],b.prototype,"updateEngines",null),f([s.b],b.prototype,"sortShortcut",null);const y=new b;y.initSyncStore(g.f,["searchEngine","list","listHash","ignoreSuggest","version","lang"],{list:c.g,searchEngine:{custom:[],addList:[],current:m,all:[Object.assign(Object.assign({},m),{updatetime:0}),Object.assign(Object.assign({},c.c),{updatetime:0})]}}),y.initAutoBackup("searcher",["searchEngine"]),Object(s.c)(()=>{y.firstSync&&y.getEnginesList()})},function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));i(17),i(19),i(60),i(11);var o=i(4),r=i(521),n=i.n(r),a=i(327),s=i(37),l=i(26),c=i(12),d=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};const p=[{title:"",content:"",time:+new Date,id:"note-default-1ehj4oc7ubn8bgu9zb2spjip0vj",updatetime:0,fontSize:14}];class h extends a.a{constructor(){super(...arguments),this.linkModal=!1,this.list=p,this.checkedId=this.list[0].id,this.boldActive=!1}toogleLinkModal(){this.linkModal=!this.linkModal}setBoldActive(e){this.boldActive=e}get isEmpty(){return 0===this.list.length}get checkedNote(){return this.checkedId?this.list.filter(e=>e.id===this.checkedId)[0]:this.list[0]}get noteList(){const e=[],t=[];return this.list.forEach(i=>{i.sticky?e.push(i):t.push(i)}),e.concat(t)}diffRemote(e){const t=e=>{if(null==e?void 0:e.updatetime){const t={updatetime:void 0};return Object.assign(Object.assign({},e),t)}},i=n()(e.list||[],t),r=n()(Object(o.j)(this.list),t);return!o.d.structural(i,r)}mergeRemote(e,t){if(e.list)if(t)this.list=e.list,this.checkedId=e.checkedId;else{const t=this.list,i=e.list;this.checkedId=e.checkedId;const{result:o}=l.a.mergeArray(t,i);this.list=o}}async add({title:e="",content:t=""}){const i=l.a.randomId("note-"),r=await l.a.getTimestamp(),n={title:e,content:t,time:+new Date,id:i,updatetime:r,fontSize:14};Object(o.i)(()=>{this.list=[n,...this.list],this.checkedId=i})}delete(e){this.list=this.list.filter(t=>t.id!==e),e!==this.checkedId||this.isEmpty||(this.checkedId=this.list[0].id)}setTop(e){const t=this.list.findIndex(t=>t.id===e);if(-1!==t){const[e]=this.list.splice(t,1);e.sticky=!0,this.list.unshift(e)}}cancelSetTop(e){const t=this.list.findIndex(t=>t.id===e);if(-1!==t){const[e]=this.list.splice(t,1);e.sticky=!1,this.list.unshift(e)}}updateId(e){this.checkedId=e}async updateNote(e){const t=await l.a.getTimestamp();Object(o.i)(()=>{var i;(null===(i=this.list)||void 0===i?void 0:i.length)&&(this.list=this.list.map(i=>i.id===e.id?Object.assign(Object.assign(Object.assign({},i),e),{updatetime:t}):Object.assign({},i)))})}async upload(e,t){var i,o;const{data:r,error:n}=await s.f.uploadFile(e,t+".png","infinity-notes-img");if(n){return{error:(null===(o=null===(i=n.response)||void 0===i?void 0:i.data)||void 0===o?void 0:o.error)?n.response.data.error:n.message,data:""}}return{data:r,error:""}}}d([o.g],h.prototype,"linkModal",void 0),d([o.b],h.prototype,"toogleLinkModal",null),d([o.g],h.prototype,"list",void 0),d([o.g],h.prototype,"checkedId",void 0),d([o.g],h.prototype,"boldActive",void 0),d([o.b],h.prototype,"setBoldActive",null),d([o.e],h.prototype,"isEmpty",null),d([o.e],h.prototype,"checkedNote",null),d([o.e],h.prototype,"noteList",null),d([o.b],h.prototype,"mergeRemote",null),d([o.b],h.prototype,"add",null),d([o.b],h.prototype,"delete",null),d([o.b],h.prototype,"setTop",null),d([o.b],h.prototype,"cancelSetTop",null),d([o.b],h.prototype,"updateId",null),d([o.b],h.prototype,"updateNote",null),d([o.b],h.prototype,"upload",null);const u=new h;u.initSyncStore(c.d,["list","checkedId"],{}),u.initAutoBackup("note",["list","checkedId"])},function(e,t){let i;const o=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];t.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},t.getSymbolTotalCodewords=function(e){return o[e]},t.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},t.setToSJISFunction=function(e){if("function"!=typeof e)throw new Error('"toSJISFunc" is not a valid function.');i=e},t.isKanjiModeEnabled=function(){return void 0!==i},t.toSJIS=function(e){return i(e)}},function(e,t,i){const o=i(798),r=i(799);t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!o.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},t.getBestModeForData=function(e){return r.testNumeric(e)?t.NUMERIC:r.testAlphanumeric(e)?t.ALPHANUMERIC:r.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},t.isValid=function(e){return e&&e.bit&&e.ccBits},t.from=function(e,i){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+e)}}(e)}catch(e){return i}}},function(e,t,i){"use strict";var o=i(7),r=i.n(o),n=i(15),a=i.n(n),s=i(123),l=i.n(s),c=(i(17),i(19),i(11),i(4)),d=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};class p{constructor(){this.list=[],this.searchList=[],this.searchTxt="",this.permissionList=[],this.isShowAppModal=!1}get extensionList(){return this.list.length?this.list.filter(e=>"extension"===e.type):[]}get appList(){return this.list.length?this.list.filter(e=>e.isApp):[]}get compuList(){return[...this.extensionList,...this.appList]}get isEmpty(){return!(0!==this.appList.length||0!==this.extensionList.length)}async getAll(){const e=await new r.a(e=>window.chrome.management.getAll(e));Object(c.i)(()=>{this.list=e})}toggleOpen(e){this.list=e?this.list.map(t=>t.id===e?Object.assign(Object.assign({},t),{open:!t.open}):Object.assign(Object.assign({},t),{open:!1})):this.list.map(e=>Object.assign(Object.assign({},e),{open:!1}))}setEnabled(e,t){window.chrome.management.setEnabled(e,!t)}uninstall(e){window.chrome.management.uninstall(e,{showConfirmDialog:!0})}async getPermissionWarningsById(e){const t=await new r.a(t=>window.chrome.management.getPermissionWarningsById(e,t));Object(c.i)(()=>{this.permissionList=t})}search(e){this.searchTxt=e,this.searchList=this.list.filter(t=>{const i=t.name.toLowerCase();return a()(i).call(i,l()(e).call(e).toLowerCase())})}closeModal(){this.isShowAppModal=!1}openModal(){this.isShowAppModal=!0}}d([c.g],p.prototype,"list",void 0),d([c.g],p.prototype,"searchList",void 0),d([c.g],p.prototype,"searchTxt",void 0),d([c.g],p.prototype,"permissionList",void 0),d([c.g],p.prototype,"isShowAppModal",void 0),d([c.e],p.prototype,"extensionList",null),d([c.e],p.prototype,"appList",null),d([c.e],p.prototype,"compuList",null),d([c.e],p.prototype,"isEmpty",null),d([c.b],p.prototype,"getAll",null),d([c.b],p.prototype,"toggleOpen",null),d([c.b],p.prototype,"setEnabled",null),d([c.b],p.prototype,"uninstall",null),d([c.b],p.prototype,"getPermissionWarningsById",null),d([c.b],p.prototype,"search",null),d([c.b],p.prototype,"closeModal",null),d([c.b],p.prototype,"openModal",null);const h=new p;t.a=h},function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var o=i(157);
/**
 * @license
 * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const r=new WeakMap,n=Object(o.e)(e=>t=>{if(!(t instanceof o.a)||t instanceof o.c||"style"!==t.committer.name||t.committer.parts.length>1)throw new Error("The `styleMap` directive must be used in the style attribute and must be the only part in the attribute.");const{committer:i}=t,{style:n}=i.element;let a=r.get(t);void 0===a&&(n.cssText=i.strings.join(" "),r.set(t,a=new Set)),a.forEach(t=>{t in e||(a.delete(t),-1===t.indexOf("-")?n[t]=null:n.removeProperty(t))});for(const t in e)a.add(t),-1===t.indexOf("-")?n[t]=e[t]:n.setProperty(t,e[t])})},,function(e,t,i){e.exports=i.p+"images/arrow-right.d51ffb7.svg"},,function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));i(17),i(19);var o=i(12),r=i(4),n=i(327),a=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};class s extends n.a{constructor(){super(...arguments),this.onlyOneItem=!1,this.ready=!1}initStore(){return this.initSyncStore(o.l,["onlyOneItem","ready","nextId","nextRawURL","nextURL","nextItem"])}setOnlyOneItem(e){this.onlyOneItem=e}setReady(e){this.ready=e}setNextId(e){this.nextId=e}setNextRawURL(e){this.nextRawURL=e}setNextURL(e){this.nextURL=e}setNextItem(e){this.nextItem=e}clearNextData(){this.nextURL=void 0,this.nextRawURL=void 0,this.nextId=void 0,this.nextItem=null}}a([r.g],s.prototype,"onlyOneItem",void 0),a([r.g],s.prototype,"ready",void 0),a([r.g],s.prototype,"nextId",void 0),a([r.g],s.prototype,"nextRawURL",void 0),a([r.g],s.prototype,"nextURL",void 0),a([r.g],s.prototype,"nextItem",void 0),a([r.b],s.prototype,"setOnlyOneItem",null),a([r.b],s.prototype,"setReady",null),a([r.b],s.prototype,"setNextId",null),a([r.b],s.prototype,"setNextRawURL",null),a([r.b],s.prototype,"setNextURL",null),a([r.b],s.prototype,"setNextItem",null),a([r.b],s.prototype,"clearNextData",null);const l=new s},function(e,t,i){"use strict";i(17),i(19);var o=i(1),r=i(0),n=i(26),a=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let s=class extends o.a{constructor(){super(...arguments),this.url="",this._once=!1,this.onError=({currentTarget:e})=>{if(!this._once){const t=n.a.getFavIconSrc(this.url);e.src="https://favicon.infinitynewtab.com/"+t+".png",this._once=!0}}}firstUpdated(){}getSrc(){if(r.n||r.h){return"https://favicon.infinitynewtab.com/"+n.a.getFavIconSrc(this.url)+".png"}return"chrome://favicon/size/32@2x/"+this.url}render(){const e=this.getSrc();return o.e` <img src="${e}" @error="${this.onError}" /> `}};s.styles=o.b`
    :host {
      display: inline-block;
      flex-shrink: 0;
      width: inherit;
      height: inherit;
    }
    img {
      width: 100%;
      height: 100%;
    }
  `,a([Object(o.g)()],s.prototype,"url",void 0),s=a([Object(o.c)("i-favicon")],s)},,function(e,t,i){"use strict";var o=i(22),r=i(24),n=i(40),a=i(10),s=i(23),l=i(5),c=i(166),d=i(167),p=i(34),h=n&&n.prototype;if(o({target:"Promise",proto:!0,real:!0,forced:!!n&&a((function(){h.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=c(this,s("Promise")),i=l(e);return this.then(i?function(i){return d(t,e()).then((function(){return i}))}:e,i?function(i){return d(t,e()).then((function(){throw i}))}:e)}}),!r&&l(n)){var u=s("Promise").prototype.finally;h.finally!==u&&p(h,"finally",u,{unsafe:!0})}},function(e,t,i){e.exports=i.p+"images/clear.31d5f14.png"},function(e,t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2},t.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},t.from=function(e,i){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+e)}}(e)}catch(e){return i}}},function(e,t,i){e.exports=i.p+"images/spin.f9360d9.svg"},,function(e,t,i){e.exports=i.p+"images/close-fff.a7cbff9.svg"},function(e,t,i){e.exports=i.p+"images/empty.1b04259.png"},function(e,t,i){"use strict";i(17),i(19);var o=i(1),r=i(505),n=(i(610),i(857)),a=i.n(n),s=i(777),l=i.n(s),c=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let d=class extends o.a{constructor(){super(...arguments),this.placeholder="",this.value="",this.isClear=!1,this.searchBtnPosition="right",this.type="black"}handleInputChange(e){const t=e.target.value;this.value=t,this.dispatchEvent(new CustomEvent("i-search",{detail:{text:t},bubbles:!0,composed:!0}))}handleBlur(e){this.dispatchEvent(new CustomEvent("i-blur",{detail:{text:e.target.value},bubbles:!0,composed:!0}))}set(e){this.value=e,this.forElement.value=e}focus(){this.forElement.focus()}clear(e=!0){this.value="",this.forElement.value="",e&&this.forElement.focus(),this.dispatchEvent(new CustomEvent("i-clear",{bubbles:!0,composed:!0}))}render(){return o.e`
      <div class="i-search-wrapper ${this.type}">
        ${"left"===this.searchBtnPosition?o.e`<i-svg class="search-icon-left" .src=${a.a}></i-svg>`:null}
        <input
          class=${Object(r.a)({"padding-left":"left"===this.searchBtnPosition})}
          placeholder="${this.placeholder}"
          @blur="${this.handleBlur}"
          @input=${e=>{e.target.keyEvent||this.handleInputChange(e)}}
        />
        <div class="search-icon">
          ${this.value?o.e`<i-svg class="clear-icon" .src=${l.a} @click=${this.clear}></i-svg>`:null}
          ${this.value||"right"!==this.searchBtnPosition?null:o.e`<img class="search-icons" .src=${a.a} />`}
        </div>
      </div>
    `}};d.styles=o.b`
    :host {
      display: block;
      width: 100%;
      --height: 52px;
    }
    .i-search-wrapper {
      box-sizing: border-box;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: relative;
      height: var(--height);
      background: rgba(255, 255, 255, 1);
      border: 1px solid #999;
      border-radius: 6px;
      overflow: hidden;
    }
    .i-search-wrapper:hover {
      border: 1px solid #333;
    }
    .i-search-wrapper:focus-within {
      border: 1px solid #333;
    }
    .white {
      border: none !important;
    }
    input {
      flex: 1;
      height: 100%;
      padding: 0px 48px 0px 20px;
      border: none;
      outline: none;
      font-size: 14px;
      min-width: 100px;
      font-family: PingFangSC-Regular, 'PingFang SC';
    }
    input.padding-left {
      padding-left: 44px;
    }
    .white input::placeholder {
      color: #bbb;
    }
    .search-icon {
      position: absolute;
      right: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 18px;
      height: 18px;
    }
    .i-search-wrapper:hover .search-icon-left {
      color: #333;
    }
    .i-search-wrapper:focus-within .search-icon-left {
      color: #333;
    }
    .search-icon-left {
      position: absolute;
      left: 16px;
      width: 18px;
      height: 18px;
      color: #999;
      transition: color 0.2s;
    }
    .search-icons {
      width: 18px;
      height: 18px;
    }
    .clear-icon {
      margin: 2px;
      width: 14px;
      height: 14px;
      color: #999;
      cursor: pointer;
      transition: color 0.2s;
      transform: translateZ(10px);
    }
    .clear-icon:hover {
      color: #333;
    }
  `,c([Object(o.g)({type:String})],d.prototype,"placeholder",void 0),c([Object(o.g)({type:String})],d.prototype,"value",void 0),c([Object(o.g)({type:Boolean,reflect:!0})],d.prototype,"isClear",void 0),c([Object(o.g)({type:String})],d.prototype,"searchBtnPosition",void 0),c([Object(o.g)({type:String})],d.prototype,"type",void 0),c([Object(o.h)("input")],d.prototype,"forElement",void 0),c([Object(o.d)({passive:!0})],d.prototype,"handleInputChange",null),d=c([Object(o.c)("i-search")],d)},function(e,t,i){e.exports=i.p+"images/link.15a4941.svg"},function(e,t,i){e.exports=i.p+"images/refresh.fbac946.svg"},function(e,t,i){e.exports=i.p+"images/payment.bdef3b5.png"},function(e,t,i){e.exports=i.p+"images/facebook-bg.10b1b46.png"},function(e,t,i){e.exports=i.p+"images/qq-bg.e497f75.png"},function(e,t,i){e.exports=i.p+"images/icon-backup.b9c87b9.svg"},function(e,t,i){e.exports=i.p+"images/arrow_qr_code.8fe97e0.png"},function(e,t,i){var o={"./icon_facebook.png":792,"./icon_google.png":793,"./icon_qq.png":794,"./icon_sina.png":795,"./icon_wechat.png":796};function r(e){var t=n(e);return i(t)}function n(e){if(!i.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}r.keys=function(){return Object.keys(o)},r.resolve=n,e.exports=r,r.id=791},function(e,t,i){e.exports=i.p+"images/icon_facebook.5e5a555.png"},function(e,t,i){e.exports=i.p+"images/icon_google.5a5277b.png"},function(e,t,i){e.exports=i.p+"images/icon_qq.dc39b28.png"},function(e,t,i){e.exports=i.p+"images/icon_sina.05f30d5.png"},function(e,t,i){e.exports=i.p+"images/icon_wechat.24b00c8.png"},function(e,t,i){const o=i(778),r=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],n=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];t.getBlocksCount=function(e,t){switch(t){case o.L:return r[4*(e-1)+0];case o.M:return r[4*(e-1)+1];case o.Q:return r[4*(e-1)+2];case o.H:return r[4*(e-1)+3];default:return}},t.getTotalCodewordsCount=function(e,t){switch(t){case o.L:return n[4*(e-1)+0];case o.M:return n[4*(e-1)+1];case o.Q:return n[4*(e-1)+2];case o.H:return n[4*(e-1)+3];default:return}}},function(e,t){t.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},function(e,t){let i="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";i=i.replace(/u/g,"\\u");const o="(?:(?![A-Z0-9 $%*+\\-./:]|"+i+")(?:.|[\r\n]))+";t.KANJI=new RegExp(i,"g"),t.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),t.BYTE=new RegExp(o,"g"),t.NUMERIC=new RegExp("[0-9]+","g"),t.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const r=new RegExp("^"+i+"$"),n=new RegExp("^[0-9]+$"),a=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");t.testKanji=function(e){return r.test(e)},t.testNumeric=function(e){return n.test(e)},t.testAlphanumeric=function(e){return a.test(e)}},function(e,t){function i(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw new Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map((function(e){return[e,e]})))),6===t.length&&t.push("F","F");const i=parseInt(t.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:255&i,hex:"#"+t.slice(0,6).join("")}}t.getOptions=function(e){e||(e={}),e.color||(e.color={});const t=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,o=e.width&&e.width>=21?e.width:void 0,r=e.scale||4;return{width:o,scale:o?4:r,margin:t,color:{dark:i(e.color.dark||"#000000ff"),light:i(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},t.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},t.getImageWidth=function(e,i){const o=t.getScale(e,i);return Math.floor((e+2*i.margin)*o)},t.qrToImageData=function(e,i,o){const r=i.modules.size,n=i.modules.data,a=t.getScale(r,o),s=Math.floor((r+2*o.margin)*a),l=o.margin*a,c=[o.color.light,o.color.dark];for(let t=0;t<s;t++)for(let i=0;i<s;i++){let d=4*(t*s+i),p=o.color.light;if(t>=l&&i>=l&&t<s-l&&i<s-l){p=c[n[Math.floor((t-l)/a)*r+Math.floor((i-l)/a)]?1:0]}e[d++]=p.r,e[d++]=p.g,e[d++]=p.b,e[d]=p.a}}},function(e,t,i){var o={"./arrow_qr_code.png":790,"./avator.png":911,"./douban_icon.png":912,"./facebook-bg.png":787,"./facebook_icon.png":913,"./google_icon.png":914,"./linked_icon.png":915,"./login/icon_facebook.png":792,"./login/icon_google.png":793,"./login/icon_qq.png":794,"./login/icon_sina.png":795,"./login/icon_wechat.png":796,"./payment.png":786,"./qq-bg.png":788,"./qq_icon.png":916,"./source/all.png":917,"./source/barn-images.png":918,"./source/bing.png":919,"./source/free-nature-stock.png":920,"./source/infinity.png":921,"./source/jay-mantri.png":922,"./source/life-of-pix.png":923,"./source/mmt.png":924,"./source/picography.png":925,"./source/realistic-shots.png":926,"./source/skitter-photo.png":927,"./source/startup-stock-photos.png":928,"./source/unsplash.png":929,"./twitter_icon.png":930,"./xinlang_icon.png":931,"./zone_icon.png":932};function r(e){var t=n(e);return i(t)}function n(e){if(!i.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}r.keys=function(){return Object.keys(o)},r.resolve=n,e.exports=r,r.id=801},function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";function _mergeNamespaces(e,t){return t.forEach((function(t){Object.keys(t).forEach((function(i){if("default"!==i&&!(i in e)){var o=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:function(){return t[i]}})}}))})),Object.freeze(e)}function ownKeys$1(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$1(Object(i),!0).forEach((function(t){_defineProperty(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ownKeys$1(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArrayLimit(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o,r,n=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw r}}return n}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}__webpack_require__.d(__webpack_exports__,"a",(function(){return imageCompression}));var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(e){var t={exports:{}};return e(t,t.exports),t.exports}var check=function(e){return e&&e.Math==Math&&e},global$1=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof commonjsGlobal&&commonjsGlobal)||function(){return this}()||Function("return this")(),isPure=!1,setGlobal=function(e,t){try{Object.defineProperty(global$1,e,{value:t,configurable:!0,writable:!0})}catch(i){global$1[e]=t}return t},SHARED="__core-js_shared__",store$1=global$1[SHARED]||setGlobal(SHARED,{}),sharedStore=store$1,shared=createCommonjsModule((function(e){(e.exports=function(e,t){return sharedStore[e]||(sharedStore[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.18.0",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})})),requireObjectCoercible=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},toObject=function(e){return Object(requireObjectCoercible(e))},hasOwnProperty={}.hasOwnProperty,has$1=Object.hasOwn||function(e,t){return hasOwnProperty.call(toObject(e),t)},id=0,postfix=Math.random(),uid=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++id+postfix).toString(36)},isCallable=function(e){return"function"==typeof e},aFunction=function(e){return isCallable(e)?e:void 0},getBuiltIn=function(e,t){return arguments.length<2?aFunction(global$1[e]):global$1[e]&&global$1[e][t]},engineUserAgent=getBuiltIn("navigator","userAgent")||"",process$3=global$1.process,Deno=global$1.Deno,versions=process$3&&process$3.versions||Deno&&Deno.version,v8=versions&&versions.v8,match,version;v8?(match=v8.split("."),version=match[0]<4?1:match[0]+match[1]):engineUserAgent&&(match=engineUserAgent.match(/Edge\/(\d+)/),(!match||match[1]>=74)&&(match=engineUserAgent.match(/Chrome\/(\d+)/),match&&(version=match[1])));var engineV8Version=version&&+version,fails=function(e){try{return!!e()}catch(e){return!0}},nativeSymbol=!!Object.getOwnPropertySymbols&&!fails((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&engineV8Version&&engineV8Version<41})),useSymbolAsUid=nativeSymbol&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,WellKnownSymbolsStore=shared("wks"),Symbol$1=global$1.Symbol,createWellKnownSymbol=useSymbolAsUid?Symbol$1:Symbol$1&&Symbol$1.withoutSetter||uid,wellKnownSymbol=function(e){return has$1(WellKnownSymbolsStore,e)&&(nativeSymbol||"string"==typeof WellKnownSymbolsStore[e])||(nativeSymbol&&has$1(Symbol$1,e)?WellKnownSymbolsStore[e]=Symbol$1[e]:WellKnownSymbolsStore[e]=createWellKnownSymbol("Symbol."+e)),WellKnownSymbolsStore[e]},TO_STRING_TAG$4=wellKnownSymbol("toStringTag"),test$1={};test$1[TO_STRING_TAG$4]="z";var toStringTagSupport="[object z]"===String(test$1),descriptors=!fails((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),isObject=function(e){return"object"==typeof e?null!==e:isCallable(e)},document$3=global$1.document,EXISTS$1=isObject(document$3)&&isObject(document$3.createElement),documentCreateElement=function(e){return EXISTS$1?document$3.createElement(e):{}},ie8DomDefine=!descriptors&&!fails((function(){return 7!=Object.defineProperty(documentCreateElement("div"),"a",{get:function(){return 7}}).a})),anObject=function(e){if(isObject(e))return e;throw TypeError(String(e)+" is not an object")},isSymbol=useSymbolAsUid?function(e){return"symbol"==typeof e}:function(e){var t=getBuiltIn("Symbol");return isCallable(t)&&Object(e)instanceof t},tryToString=function(e){try{return String(e)}catch(e){return"Object"}},aCallable=function(e){if(isCallable(e))return e;throw TypeError(tryToString(e)+" is not a function")},getMethod=function(e,t){var i=e[t];return null==i?void 0:aCallable(i)},ordinaryToPrimitive=function(e,t){var i,o;if("string"===t&&isCallable(i=e.toString)&&!isObject(o=i.call(e)))return o;if(isCallable(i=e.valueOf)&&!isObject(o=i.call(e)))return o;if("string"!==t&&isCallable(i=e.toString)&&!isObject(o=i.call(e)))return o;throw TypeError("Can't convert object to primitive value")},TO_PRIMITIVE=wellKnownSymbol("toPrimitive"),toPrimitive=function(e,t){if(!isObject(e)||isSymbol(e))return e;var i,o=getMethod(e,TO_PRIMITIVE);if(o){if(void 0===t&&(t="default"),i=o.call(e,t),!isObject(i)||isSymbol(i))return i;throw TypeError("Can't convert object to primitive value")}return void 0===t&&(t="number"),ordinaryToPrimitive(e,t)},toPropertyKey=function(e){var t=toPrimitive(e,"string");return isSymbol(t)?t:String(t)},$defineProperty=Object.defineProperty,f$5=descriptors?$defineProperty:function(e,t,i){if(anObject(e),t=toPropertyKey(t),anObject(i),ie8DomDefine)try{return $defineProperty(e,t,i)}catch(e){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(e[t]=i.value),e},objectDefineProperty={f:f$5},createPropertyDescriptor=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},createNonEnumerableProperty=descriptors?function(e,t,i){return objectDefineProperty.f(e,t,createPropertyDescriptor(1,i))}:function(e,t,i){return e[t]=i,e},functionToString=Function.toString;isCallable(sharedStore.inspectSource)||(sharedStore.inspectSource=function(e){return functionToString.call(e)});var inspectSource=sharedStore.inspectSource,WeakMap$1=global$1.WeakMap,nativeWeakMap=isCallable(WeakMap$1)&&/native code/.test(inspectSource(WeakMap$1)),keys$2=shared("keys"),sharedKey=function(e){return keys$2[e]||(keys$2[e]=uid(e))},hiddenKeys$1={},OBJECT_ALREADY_INITIALIZED="Object already initialized",WeakMap=global$1.WeakMap,set$2,get$1,has,enforce=function(e){return has(e)?get$1(e):set$2(e,{})},getterFor=function(e){return function(t){var i;if(!isObject(t)||(i=get$1(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return i}};if(nativeWeakMap||sharedStore.state){var store=sharedStore.state||(sharedStore.state=new WeakMap),wmget=store.get,wmhas=store.has,wmset=store.set;set$2=function(e,t){if(wmhas.call(store,e))throw new TypeError(OBJECT_ALREADY_INITIALIZED);return t.facade=e,wmset.call(store,e,t),t},get$1=function(e){return wmget.call(store,e)||{}},has=function(e){return wmhas.call(store,e)}}else{var STATE=sharedKey("state");hiddenKeys$1[STATE]=!0,set$2=function(e,t){if(has$1(e,STATE))throw new TypeError(OBJECT_ALREADY_INITIALIZED);return t.facade=e,createNonEnumerableProperty(e,STATE,t),t},get$1=function(e){return has$1(e,STATE)?e[STATE]:{}},has=function(e){return has$1(e,STATE)}}var internalState={set:set$2,get:get$1,has:has,enforce:enforce,getterFor:getterFor},FunctionPrototype$1=Function.prototype,getDescriptor=descriptors&&Object.getOwnPropertyDescriptor,EXISTS=has$1(FunctionPrototype$1,"name"),PROPER=EXISTS&&"something"===function(){}.name,CONFIGURABLE=EXISTS&&(!descriptors||descriptors&&getDescriptor(FunctionPrototype$1,"name").configurable),functionName={EXISTS:EXISTS,PROPER:PROPER,CONFIGURABLE:CONFIGURABLE},redefine=createCommonjsModule((function(e){var t=functionName.CONFIGURABLE,i=internalState.get,o=internalState.enforce,r=String(String).split("String");(e.exports=function(e,i,n,a){var s,l=!!a&&!!a.unsafe,c=!!a&&!!a.enumerable,d=!!a&&!!a.noTargetGet,p=a&&void 0!==a.name?a.name:i;isCallable(n)&&("Symbol("===String(p).slice(0,7)&&(p="["+String(p).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!has$1(n,"name")||t&&n.name!==p)&&createNonEnumerableProperty(n,"name",p),(s=o(n)).source||(s.source=r.join("string"==typeof p?p:""))),e!==global$1?(l?!d&&e[i]&&(c=!0):delete e[i],c?e[i]=n:createNonEnumerableProperty(e,i,n)):c?e[i]=n:setGlobal(i,n)})(Function.prototype,"toString",(function(){return isCallable(this)&&i(this).source||inspectSource(this)}))})),toString$1={}.toString,classofRaw=function(e){return toString$1.call(e).slice(8,-1)},TO_STRING_TAG$3=wellKnownSymbol("toStringTag"),CORRECT_ARGUMENTS="Arguments"==classofRaw(function(){return arguments}()),tryGet=function(e,t){try{return e[t]}catch(e){}},classof=toStringTagSupport?classofRaw:function(e){var t,i,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=tryGet(t=Object(e),TO_STRING_TAG$3))?i:CORRECT_ARGUMENTS?classofRaw(t):"Object"==(o=classofRaw(t))&&isCallable(t.callee)?"Arguments":o},objectToString=toStringTagSupport?{}.toString:function(){return"[object "+classof(this)+"]"};toStringTagSupport||redefine(Object.prototype,"toString",objectToString,{unsafe:!0});var $propertyIsEnumerable={}.propertyIsEnumerable,getOwnPropertyDescriptor$4=Object.getOwnPropertyDescriptor,NASHORN_BUG=getOwnPropertyDescriptor$4&&!$propertyIsEnumerable.call({1:2},1),f$4=NASHORN_BUG?function(e){var t=getOwnPropertyDescriptor$4(this,e);return!!t&&t.enumerable}:$propertyIsEnumerable,objectPropertyIsEnumerable={f:f$4},split="".split,indexedObject=fails((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==classofRaw(e)?split.call(e,""):Object(e)}:Object,toIndexedObject=function(e){return indexedObject(requireObjectCoercible(e))},$getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,f$3=descriptors?$getOwnPropertyDescriptor:function(e,t){if(e=toIndexedObject(e),t=toPropertyKey(t),ie8DomDefine)try{return $getOwnPropertyDescriptor(e,t)}catch(e){}if(has$1(e,t))return createPropertyDescriptor(!objectPropertyIsEnumerable.f.call(e,t),e[t])},objectGetOwnPropertyDescriptor={f:f$3},ceil=Math.ceil,floor$7=Math.floor,toInteger=function(e){return isNaN(e=+e)?0:(e>0?floor$7:ceil)(e)},min$6=Math.min,toLength=function(e){return e>0?min$6(toInteger(e),9007199254740991):0},max$2=Math.max,min$5=Math.min,toAbsoluteIndex=function(e,t){var i=toInteger(e);return i<0?max$2(i+t,0):min$5(i,t)},createMethod$5=function(e){return function(t,i,o){var r,n=toIndexedObject(t),a=toLength(n.length),s=toAbsoluteIndex(o,a);if(e&&i!=i){for(;a>s;)if((r=n[s++])!=r)return!0}else for(;a>s;s++)if((e||s in n)&&n[s]===i)return e||s||0;return!e&&-1}},arrayIncludes={includes:createMethod$5(!0),indexOf:createMethod$5(!1)},indexOf=arrayIncludes.indexOf,objectKeysInternal=function(e,t){var i,o=toIndexedObject(e),r=0,n=[];for(i in o)!has$1(hiddenKeys$1,i)&&has$1(o,i)&&n.push(i);for(;t.length>r;)has$1(o,i=t[r++])&&(~indexOf(n,i)||n.push(i));return n},enumBugKeys=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],hiddenKeys=enumBugKeys.concat("length","prototype"),f$2=Object.getOwnPropertyNames||function(e){return objectKeysInternal(e,hiddenKeys)},objectGetOwnPropertyNames={f:f$2},f$1=Object.getOwnPropertySymbols,objectGetOwnPropertySymbols={f:f$1},ownKeys=getBuiltIn("Reflect","ownKeys")||function(e){var t=objectGetOwnPropertyNames.f(anObject(e)),i=objectGetOwnPropertySymbols.f;return i?t.concat(i(e)):t},copyConstructorProperties=function(e,t){for(var i=ownKeys(t),o=objectDefineProperty.f,r=objectGetOwnPropertyDescriptor.f,n=0;n<i.length;n++){var a=i[n];has$1(e,a)||o(e,a,r(t,a))}},replacement=/#|\.prototype\./,isForced=function(e,t){var i=data[normalize(e)];return i==POLYFILL||i!=NATIVE&&(isCallable(t)?fails(t):!!t)},normalize=isForced.normalize=function(e){return String(e).replace(replacement,".").toLowerCase()},data=isForced.data={},NATIVE=isForced.NATIVE="N",POLYFILL=isForced.POLYFILL="P",isForced_1=isForced,getOwnPropertyDescriptor$3=objectGetOwnPropertyDescriptor.f,_export=function(e,t){var i,o,r,n,a,s=e.target,l=e.global,c=e.stat;if(i=l?global$1:c?global$1[s]||setGlobal(s,{}):(global$1[s]||{}).prototype)for(o in t){if(n=t[o],r=e.noTargetGet?(a=getOwnPropertyDescriptor$3(i,o))&&a.value:i[o],!isForced_1(l?o:s+(c?".":"#")+o,e.forced)&&void 0!==r){if(typeof n==typeof r)continue;copyConstructorProperties(n,r)}(e.sham||r&&r.sham)&&createNonEnumerableProperty(n,"sham",!0),redefine(i,o,n,e)}},nativePromiseConstructor=global$1.Promise,redefineAll=function(e,t,i){for(var o in t)redefine(e,o,t[o],i);return e},aPossiblePrototype=function(e){if("object"==typeof e||isCallable(e))return e;throw TypeError("Can't set "+String(e)+" as a prototype")},objectSetPrototypeOf=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,i={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(i,[]),t=i instanceof Array}catch(e){}return function(i,o){return anObject(i),aPossiblePrototype(o),t?e.call(i,o):i.__proto__=o,i}}():void 0),defineProperty$5=objectDefineProperty.f,TO_STRING_TAG$2=wellKnownSymbol("toStringTag"),setToStringTag=function(e,t,i){e&&!has$1(e=i?e:e.prototype,TO_STRING_TAG$2)&&defineProperty$5(e,TO_STRING_TAG$2,{configurable:!0,value:t})},SPECIES$6=wellKnownSymbol("species"),setSpecies=function(e){var t=getBuiltIn(e),i=objectDefineProperty.f;descriptors&&t&&!t[SPECIES$6]&&i(t,SPECIES$6,{configurable:!0,get:function(){return this}})},anInstance=function(e,t,i){if(e instanceof t)return e;throw TypeError("Incorrect "+(i?i+" ":"")+"invocation")},iterators={},ITERATOR$8=wellKnownSymbol("iterator"),ArrayPrototype$1=Array.prototype,isArrayIteratorMethod=function(e){return void 0!==e&&(iterators.Array===e||ArrayPrototype$1[ITERATOR$8]===e)},functionBindContext=function(e,t,i){if(aCallable(e),void 0===t)return e;switch(i){case 0:return function(){return e.call(t)};case 1:return function(i){return e.call(t,i)};case 2:return function(i,o){return e.call(t,i,o)};case 3:return function(i,o,r){return e.call(t,i,o,r)}}return function(){return e.apply(t,arguments)}},ITERATOR$7=wellKnownSymbol("iterator"),getIteratorMethod=function(e){if(null!=e)return getMethod(e,ITERATOR$7)||getMethod(e,"@@iterator")||iterators[classof(e)]},getIterator=function(e,t){var i=arguments.length<2?getIteratorMethod(e):t;if(aCallable(i))return anObject(i.call(e));throw TypeError(String(e)+" is not iterable")},iteratorClose=function(e,t,i){var o,r;anObject(e);try{if(!(o=getMethod(e,"return"))){if("throw"===t)throw i;return i}o=o.call(e)}catch(e){r=!0,o=e}if("throw"===t)throw i;if(r)throw o;return anObject(o),i},Result=function(e,t){this.stopped=e,this.result=t},iterate=function(e,t,i){var o,r,n,a,s,l,c,d=i&&i.that,p=!(!i||!i.AS_ENTRIES),h=!(!i||!i.IS_ITERATOR),u=!(!i||!i.INTERRUPTED),g=functionBindContext(t,d,1+p+u),f=function(e){return o&&iteratorClose(o,"normal",e),new Result(!0,e)},m=function(e){return p?(anObject(e),u?g(e[0],e[1],f):g(e[0],e[1])):u?g(e,f):g(e)};if(h)o=e;else{if(!(r=getIteratorMethod(e)))throw TypeError(String(e)+" is not iterable");if(isArrayIteratorMethod(r)){for(n=0,a=toLength(e.length);a>n;n++)if((s=m(e[n]))&&s instanceof Result)return s;return new Result(!1)}o=getIterator(e,r)}for(l=o.next;!(c=l.call(o)).done;){try{s=m(c.value)}catch(e){iteratorClose(o,"throw",e)}if("object"==typeof s&&s&&s instanceof Result)return s}return new Result(!1)},ITERATOR$6=wellKnownSymbol("iterator"),SAFE_CLOSING=!1;try{var called=0,iteratorWithReturn={next:function(){return{done:!!called++}},return:function(){SAFE_CLOSING=!0}};iteratorWithReturn[ITERATOR$6]=function(){return this},Array.from(iteratorWithReturn,(function(){throw 2}))}catch(e){}var checkCorrectnessOfIteration=function(e,t){if(!t&&!SAFE_CLOSING)return!1;var i=!1;try{var o={};o[ITERATOR$6]=function(){return{next:function(){return{done:i=!0}}}},e(o)}catch(e){}return i},empty=[],construct=getBuiltIn("Reflect","construct"),constructorRegExp=/^\s*(?:class|function)\b/,exec=constructorRegExp.exec,INCORRECT_TO_STRING=!constructorRegExp.exec((function(){})),isConstructorModern=function(e){if(!isCallable(e))return!1;try{return construct(Object,empty,e),!0}catch(e){return!1}},isConstructorLegacy=function(e){if(!isCallable(e))return!1;switch(classof(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return INCORRECT_TO_STRING||!!exec.call(constructorRegExp,inspectSource(e))},isConstructor=!construct||fails((function(){var e;return isConstructorModern(isConstructorModern.call)||!isConstructorModern(Object)||!isConstructorModern((function(){e=!0}))||e}))?isConstructorLegacy:isConstructorModern,aConstructor=function(e){if(isConstructor(e))return e;throw TypeError(tryToString(e)+" is not a constructor")},SPECIES$5=wellKnownSymbol("species"),speciesConstructor=function(e,t){var i,o=anObject(e).constructor;return void 0===o||null==(i=anObject(o)[SPECIES$5])?t:aConstructor(i)},html=getBuiltIn("document","documentElement"),engineIsIos=/(?:ipad|iphone|ipod).*applewebkit/i.test(engineUserAgent),engineIsNode="process"==classofRaw(global$1.process),set$1=global$1.setImmediate,clear=global$1.clearImmediate,process$2=global$1.process,MessageChannel=global$1.MessageChannel,Dispatch=global$1.Dispatch,counter=0,queue={},ONREADYSTATECHANGE="onreadystatechange",location,defer,channel,port;try{location=global$1.location}catch(e){}var run=function(e){if(queue.hasOwnProperty(e)){var t=queue[e];delete queue[e],t()}},runner=function(e){return function(){run(e)}},listener=function(e){run(e.data)},post=function(e){global$1.postMessage(String(e),location.protocol+"//"+location.host)};set$1&&clear||(set$1=function(e){for(var t=[],i=arguments.length,o=1;i>o;)t.push(arguments[o++]);return queue[++counter]=function(){(isCallable(e)?e:Function(e)).apply(void 0,t)},defer(counter),counter},clear=function(e){delete queue[e]},engineIsNode?defer=function(e){process$2.nextTick(runner(e))}:Dispatch&&Dispatch.now?defer=function(e){Dispatch.now(runner(e))}:MessageChannel&&!engineIsIos?(channel=new MessageChannel,port=channel.port2,channel.port1.onmessage=listener,defer=functionBindContext(port.postMessage,port,1)):global$1.addEventListener&&isCallable(global$1.postMessage)&&!global$1.importScripts&&location&&"file:"!==location.protocol&&!fails(post)?(defer=post,global$1.addEventListener("message",listener,!1)):defer=ONREADYSTATECHANGE in documentCreateElement("script")?function(e){html.appendChild(documentCreateElement("script"))[ONREADYSTATECHANGE]=function(){html.removeChild(this),run(e)}}:function(e){setTimeout(runner(e),0)});var task$1={set:set$1,clear:clear},engineIsIosPebble=/ipad|iphone|ipod/i.test(engineUserAgent)&&void 0!==global$1.Pebble,engineIsWebosWebkit=/web0s(?!.*chrome)/i.test(engineUserAgent),getOwnPropertyDescriptor$2=objectGetOwnPropertyDescriptor.f,macrotask=task$1.set,MutationObserver=global$1.MutationObserver||global$1.WebKitMutationObserver,document$2=global$1.document,process$1=global$1.process,Promise$1=global$1.Promise,queueMicrotaskDescriptor=getOwnPropertyDescriptor$2(global$1,"queueMicrotask"),queueMicrotask=queueMicrotaskDescriptor&&queueMicrotaskDescriptor.value,flush,head,last,notify$1,toggle,node,promise,then;queueMicrotask||(flush=function(){var e,t;for(engineIsNode&&(e=process$1.domain)&&e.exit();head;){t=head.fn,head=head.next;try{t()}catch(e){throw head?notify$1():last=void 0,e}}last=void 0,e&&e.enter()},engineIsIos||engineIsNode||engineIsWebosWebkit||!MutationObserver||!document$2?!engineIsIosPebble&&Promise$1&&Promise$1.resolve?(promise=Promise$1.resolve(void 0),promise.constructor=Promise$1,then=promise.then,notify$1=function(){then.call(promise,flush)}):notify$1=engineIsNode?function(){process$1.nextTick(flush)}:function(){macrotask.call(global$1,flush)}:(toggle=!0,node=document$2.createTextNode(""),new MutationObserver(flush).observe(node,{characterData:!0}),notify$1=function(){node.data=toggle=!toggle}));var microtask=queueMicrotask||function(e){var t={fn:e,next:void 0};last&&(last.next=t),head||(head=t,notify$1()),last=t},PromiseCapability=function(e){var t,i;this.promise=new e((function(e,o){if(void 0!==t||void 0!==i)throw TypeError("Bad Promise constructor");t=e,i=o})),this.resolve=aCallable(t),this.reject=aCallable(i)},f=function(e){return new PromiseCapability(e)},newPromiseCapability$1={f:f},promiseResolve=function(e,t){if(anObject(e),isObject(t)&&t.constructor===e)return t;var i=newPromiseCapability$1.f(e);return(0,i.resolve)(t),i.promise},hostReportErrors=function(e,t){var i=global$1.console;i&&i.error&&(1===arguments.length?i.error(e):i.error(e,t))},perform=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},engineIsBrowser="object"==typeof window,task=task$1.set,SPECIES$4=wellKnownSymbol("species"),PROMISE="Promise",getInternalState$4=internalState.get,setInternalState$5=internalState.set,getInternalPromiseState=internalState.getterFor(PROMISE),NativePromisePrototype=nativePromiseConstructor&&nativePromiseConstructor.prototype,PromiseConstructor=nativePromiseConstructor,PromiseConstructorPrototype=NativePromisePrototype,TypeError$1=global$1.TypeError,document$1=global$1.document,process=global$1.process,newPromiseCapability=newPromiseCapability$1.f,newGenericPromiseCapability=newPromiseCapability,DISPATCH_EVENT=!!(document$1&&document$1.createEvent&&global$1.dispatchEvent),NATIVE_REJECTION_EVENT=isCallable(global$1.PromiseRejectionEvent),UNHANDLED_REJECTION="unhandledrejection",REJECTION_HANDLED="rejectionhandled",PENDING=0,FULFILLED=1,REJECTED=2,HANDLED=1,UNHANDLED=2,SUBCLASSING=!1,Internal,OwnPromiseCapability,PromiseWrapper,nativeThen,FORCED$6=isForced_1(PROMISE,(function(){var e=inspectSource(PromiseConstructor),t=e!==String(PromiseConstructor);if(!t&&66===engineV8Version)return!0;if(engineV8Version>=51&&/native code/.test(e))return!1;var i=new PromiseConstructor((function(e){e(1)})),o=function(e){e((function(){}),(function(){}))};return(i.constructor={})[SPECIES$4]=o,!(SUBCLASSING=i.then((function(){}))instanceof o)||!t&&engineIsBrowser&&!NATIVE_REJECTION_EVENT})),INCORRECT_ITERATION=FORCED$6||!checkCorrectnessOfIteration((function(e){PromiseConstructor.all(e).catch((function(){}))})),isThenable=function(e){var t;return!(!isObject(e)||!isCallable(t=e.then))&&t},notify=function(e,t){if(!e.notified){e.notified=!0;var i=e.reactions;microtask((function(){for(var o=e.value,r=e.state==FULFILLED,n=0;i.length>n;){var a,s,l,c=i[n++],d=r?c.ok:c.fail,p=c.resolve,h=c.reject,u=c.domain;try{d?(r||(e.rejection===UNHANDLED&&onHandleUnhandled(e),e.rejection=HANDLED),!0===d?a=o:(u&&u.enter(),a=d(o),u&&(u.exit(),l=!0)),a===c.promise?h(TypeError$1("Promise-chain cycle")):(s=isThenable(a))?s.call(a,p,h):p(a)):h(o)}catch(e){u&&!l&&u.exit(),h(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&onUnhandled(e)}))}},dispatchEvent=function(e,t,i){var o,r;DISPATCH_EVENT?((o=document$1.createEvent("Event")).promise=t,o.reason=i,o.initEvent(e,!1,!0),global$1.dispatchEvent(o)):o={promise:t,reason:i},!NATIVE_REJECTION_EVENT&&(r=global$1["on"+e])?r(o):e===UNHANDLED_REJECTION&&hostReportErrors("Unhandled promise rejection",i)},onUnhandled=function(e){task.call(global$1,(function(){var t,i=e.facade,o=e.value;if(isUnhandled(e)&&(t=perform((function(){engineIsNode?process.emit("unhandledRejection",o,i):dispatchEvent(UNHANDLED_REJECTION,i,o)})),e.rejection=engineIsNode||isUnhandled(e)?UNHANDLED:HANDLED,t.error))throw t.value}))},isUnhandled=function(e){return e.rejection!==HANDLED&&!e.parent},onHandleUnhandled=function(e){task.call(global$1,(function(){var t=e.facade;engineIsNode?process.emit("rejectionHandled",t):dispatchEvent(REJECTION_HANDLED,t,e.value)}))},bind=function(e,t,i){return function(o){e(t,o,i)}},internalReject=function(e,t,i){e.done||(e.done=!0,i&&(e=i),e.value=t,e.state=REJECTED,notify(e,!0))},internalResolve=function(e,t,i){if(!e.done){e.done=!0,i&&(e=i);try{if(e.facade===t)throw TypeError$1("Promise can't be resolved itself");var o=isThenable(t);o?microtask((function(){var i={done:!1};try{o.call(t,bind(internalResolve,i,e),bind(internalReject,i,e))}catch(t){internalReject(i,t,e)}})):(e.value=t,e.state=FULFILLED,notify(e,!1))}catch(t){internalReject({done:!1},t,e)}}};if(FORCED$6&&(PromiseConstructor=function(e){anInstance(this,PromiseConstructor,PROMISE),aCallable(e),Internal.call(this);var t=getInternalState$4(this);try{e(bind(internalResolve,t),bind(internalReject,t))}catch(e){internalReject(t,e)}},PromiseConstructorPrototype=PromiseConstructor.prototype,Internal=function(e){setInternalState$5(this,{type:PROMISE,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:PENDING,value:void 0})},Internal.prototype=redefineAll(PromiseConstructorPrototype,{then:function(e,t){var i=getInternalPromiseState(this),o=newPromiseCapability(speciesConstructor(this,PromiseConstructor));return o.ok=!isCallable(e)||e,o.fail=isCallable(t)&&t,o.domain=engineIsNode?process.domain:void 0,i.parent=!0,i.reactions.push(o),i.state!=PENDING&&notify(i,!1),o.promise},catch:function(e){return this.then(void 0,e)}}),OwnPromiseCapability=function(){var e=new Internal,t=getInternalState$4(e);this.promise=e,this.resolve=bind(internalResolve,t),this.reject=bind(internalReject,t)},newPromiseCapability$1.f=newPromiseCapability=function(e){return e===PromiseConstructor||e===PromiseWrapper?new OwnPromiseCapability(e):newGenericPromiseCapability(e)},isCallable(nativePromiseConstructor)&&NativePromisePrototype!==Object.prototype)){nativeThen=NativePromisePrototype.then,SUBCLASSING||(redefine(NativePromisePrototype,"then",(function(e,t){var i=this;return new PromiseConstructor((function(e,t){nativeThen.call(i,e,t)})).then(e,t)}),{unsafe:!0}),redefine(NativePromisePrototype,"catch",PromiseConstructorPrototype.catch,{unsafe:!0}));try{delete NativePromisePrototype.constructor}catch(e){}objectSetPrototypeOf&&objectSetPrototypeOf(NativePromisePrototype,PromiseConstructorPrototype)}_export({global:!0,wrap:!0,forced:FORCED$6},{Promise:PromiseConstructor}),setToStringTag(PromiseConstructor,PROMISE,!1),setSpecies(PROMISE),PromiseWrapper=getBuiltIn(PROMISE),_export({target:PROMISE,stat:!0,forced:FORCED$6},{reject:function(e){var t=newPromiseCapability(this);return t.reject.call(void 0,e),t.promise}}),_export({target:PROMISE,stat:!0,forced:FORCED$6},{resolve:function(e){return promiseResolve(this,e)}}),_export({target:PROMISE,stat:!0,forced:INCORRECT_ITERATION},{all:function(e){var t=this,i=newPromiseCapability(t),o=i.resolve,r=i.reject,n=perform((function(){var i=aCallable(t.resolve),n=[],a=0,s=1;iterate(e,(function(e){var l=a++,c=!1;n.push(void 0),s++,i.call(t,e).then((function(e){c||(c=!0,n[l]=e,--s||o(n))}),r)})),--s||o(n)}));return n.error&&r(n.value),i.promise},race:function(e){var t=this,i=newPromiseCapability(t),o=i.reject,r=perform((function(){var r=aCallable(t.resolve);iterate(e,(function(e){r.call(t,e).then(i.resolve,o)}))}));return r.error&&o(r.value),i.promise}});var inheritIfRequired=function(e,t,i){var o,r;return objectSetPrototypeOf&&isCallable(o=t.constructor)&&o!==i&&isObject(r=o.prototype)&&r!==i.prototype&&objectSetPrototypeOf(e,r),e},objectKeys=Object.keys||function(e){return objectKeysInternal(e,enumBugKeys)},objectDefineProperties=descriptors?Object.defineProperties:function(e,t){anObject(e);for(var i,o=objectKeys(t),r=o.length,n=0;r>n;)objectDefineProperty.f(e,i=o[n++],t[i]);return e},GT=">",LT="<",PROTOTYPE$1="prototype",SCRIPT="script",IE_PROTO$1=sharedKey("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(e){return LT+SCRIPT+GT+e+LT+"/"+SCRIPT+GT},NullProtoObjectViaActiveX=function(e){e.write(scriptTag("")),e.close();var t=e.parentWindow.Object;return e=null,t},NullProtoObjectViaIFrame=function(){var e,t=documentCreateElement("iframe"),i="java"+SCRIPT+":";return t.style.display="none",html.appendChild(t),t.src=String(i),(e=t.contentWindow.document).open(),e.write(scriptTag("document.F=Object")),e.close(),e.F},activeXDocument,NullProtoObject=function(){try{activeXDocument=new ActiveXObject("htmlfile")}catch(e){}NullProtoObject="undefined"!=typeof document?document.domain&&activeXDocument?NullProtoObjectViaActiveX(activeXDocument):NullProtoObjectViaIFrame():NullProtoObjectViaActiveX(activeXDocument);for(var e=enumBugKeys.length;e--;)delete NullProtoObject[PROTOTYPE$1][enumBugKeys[e]];return NullProtoObject()};hiddenKeys$1[IE_PROTO$1]=!0;var objectCreate=Object.create||function(e,t){var i;return null!==e?(EmptyConstructor[PROTOTYPE$1]=anObject(e),i=new EmptyConstructor,EmptyConstructor[PROTOTYPE$1]=null,i[IE_PROTO$1]=e):i=NullProtoObject(),void 0===t?i:objectDefineProperties(i,t)},toString=function(e){if("Symbol"===classof(e))throw TypeError("Cannot convert a Symbol value to a string");return String(e)},whitespaces="\t\n\v\f\r                　\u2028\u2029\ufeff",whitespace="["+whitespaces+"]",ltrim=RegExp("^"+whitespace+whitespace+"*"),rtrim=RegExp(whitespace+whitespace+"*$"),createMethod$4=function(e){return function(t){var i=toString(requireObjectCoercible(t));return 1&e&&(i=i.replace(ltrim,"")),2&e&&(i=i.replace(rtrim,"")),i}},stringTrim={start:createMethod$4(1),end:createMethod$4(2),trim:createMethod$4(3)},getOwnPropertyNames$1=objectGetOwnPropertyNames.f,getOwnPropertyDescriptor$1=objectGetOwnPropertyDescriptor.f,defineProperty$4=objectDefineProperty.f,trim=stringTrim.trim,NUMBER="Number",NativeNumber=global$1[NUMBER],NumberPrototype=NativeNumber.prototype,BROKEN_CLASSOF=classofRaw(objectCreate(NumberPrototype))==NUMBER,toNumber=function(e){if(isSymbol(e))throw TypeError("Cannot convert a Symbol value to a number");var t,i,o,r,n,a,s,l,c=toPrimitive(e,"number");if("string"==typeof c&&c.length>2)if(43===(t=(c=trim(c)).charCodeAt(0))||45===t){if(88===(i=c.charCodeAt(2))||120===i)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:o=2,r=49;break;case 79:case 111:o=8,r=55;break;default:return+c}for(a=(n=c.slice(2)).length,s=0;s<a;s++)if((l=n.charCodeAt(s))<48||l>r)return NaN;return parseInt(n,o)}return+c};if(isForced_1(NUMBER,!NativeNumber(" 0o1")||!NativeNumber("0b1")||NativeNumber("+0x1"))){for(var NumberWrapper=function(e){var t=arguments.length<1?0:e,i=this;return i instanceof NumberWrapper&&(BROKEN_CLASSOF?fails((function(){NumberPrototype.valueOf.call(i)})):classofRaw(i)!=NUMBER)?inheritIfRequired(new NativeNumber(toNumber(t)),i,NumberWrapper):toNumber(t)},keys$1=descriptors?getOwnPropertyNames$1(NativeNumber):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),j$1=0,key$1;keys$1.length>j$1;j$1++)has$1(NativeNumber,key$1=keys$1[j$1])&&!has$1(NumberWrapper,key$1)&&defineProperty$4(NumberWrapper,key$1,getOwnPropertyDescriptor$1(NativeNumber,key$1));NumberWrapper.prototype=NumberPrototype,NumberPrototype.constructor=NumberWrapper,redefine(global$1,NUMBER,NumberWrapper)}var FUNCTION_NAME_EXISTS=functionName.EXISTS,defineProperty$3=objectDefineProperty.f,FunctionPrototype=Function.prototype,FunctionPrototypeToString=FunctionPrototype.toString,nameRE=/^\s*function ([^ (]*)/,NAME$1="name";descriptors&&!FUNCTION_NAME_EXISTS&&defineProperty$3(FunctionPrototype,NAME$1,{configurable:!0,get:function(){try{return FunctionPrototypeToString.call(this).match(nameRE)[1]}catch(e){return""}}}),_export({global:!0},{globalThis:global$1});var $assign=Object.assign,defineProperty$2=Object.defineProperty,objectAssign=!$assign||fails((function(){if(descriptors&&1!==$assign({b:1},$assign(defineProperty$2({},"a",{enumerable:!0,get:function(){defineProperty$2(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},i=Symbol();return e[i]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=$assign({},e)[i]||"abcdefghijklmnopqrst"!=objectKeys($assign({},t)).join("")}))?function(e,t){for(var i=toObject(e),o=arguments.length,r=1,n=objectGetOwnPropertySymbols.f,a=objectPropertyIsEnumerable.f;o>r;)for(var s,l=indexedObject(arguments[r++]),c=n?objectKeys(l).concat(n(l)):objectKeys(l),d=c.length,p=0;d>p;)s=c[p++],descriptors&&!a.call(l,s)||(i[s]=l[s]);return i}:$assign;_export({target:"Object",stat:!0,forced:Object.assign!==objectAssign},{assign:objectAssign});var path=global$1;path.Object.assign;var regexpFlags=function(){var e=anObject(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},$RegExp$2=global$1.RegExp,UNSUPPORTED_Y$2=fails((function(){var e=$RegExp$2("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),BROKEN_CARET=fails((function(){var e=$RegExp$2("^r","gy");return e.lastIndex=2,null!=e.exec("str")})),regexpStickyHelpers={UNSUPPORTED_Y:UNSUPPORTED_Y$2,BROKEN_CARET:BROKEN_CARET},$RegExp$1=global$1.RegExp,regexpUnsupportedDotAll=fails((function(){var e=$RegExp$1(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)})),$RegExp=global$1.RegExp,regexpUnsupportedNcg=fails((function(){var e=$RegExp("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})),getInternalState$3=internalState.get,nativeExec=RegExp.prototype.exec,nativeReplace=shared("native-string-replace",String.prototype.replace),patchedExec=nativeExec,UPDATES_LAST_INDEX_WRONG=(re1=/a/,re2=/b*/g,nativeExec.call(re1,"a"),nativeExec.call(re2,"a"),0!==re1.lastIndex||0!==re2.lastIndex),re1,re2,UNSUPPORTED_Y$1=regexpStickyHelpers.UNSUPPORTED_Y||regexpStickyHelpers.BROKEN_CARET,NPCG_INCLUDED=void 0!==/()??/.exec("")[1],PATCH=UPDATES_LAST_INDEX_WRONG||NPCG_INCLUDED||UNSUPPORTED_Y$1||regexpUnsupportedDotAll||regexpUnsupportedNcg;PATCH&&(patchedExec=function(e){var t,i,o,r,n,a,s,l=this,c=getInternalState$3(l),d=toString(e),p=c.raw;if(p)return p.lastIndex=l.lastIndex,t=patchedExec.call(p,d),l.lastIndex=p.lastIndex,t;var h=c.groups,u=UNSUPPORTED_Y$1&&l.sticky,g=regexpFlags.call(l),f=l.source,m=0,b=d;if(u&&(-1===(g=g.replace("y","")).indexOf("g")&&(g+="g"),b=d.slice(l.lastIndex),l.lastIndex>0&&(!l.multiline||l.multiline&&"\n"!==d.charAt(l.lastIndex-1))&&(f="(?: "+f+")",b=" "+b,m++),i=new RegExp("^(?:"+f+")",g)),NPCG_INCLUDED&&(i=new RegExp("^"+f+"$(?!\\s)",g)),UPDATES_LAST_INDEX_WRONG&&(o=l.lastIndex),r=nativeExec.call(u?i:l,b),u?r?(r.input=r.input.slice(m),r[0]=r[0].slice(m),r.index=l.lastIndex,l.lastIndex+=r[0].length):l.lastIndex=0:UPDATES_LAST_INDEX_WRONG&&r&&(l.lastIndex=l.global?r.index+r[0].length:o),NPCG_INCLUDED&&r&&r.length>1&&nativeReplace.call(r[0],i,(function(){for(n=1;n<arguments.length-2;n++)void 0===arguments[n]&&(r[n]=void 0)})),r&&h)for(r.groups=a=objectCreate(null),n=0;n<h.length;n++)a[(s=h[n])[0]]=r[s[1]];return r});var regexpExec=patchedExec;_export({target:"RegExp",proto:!0,forced:/./.exec!==regexpExec},{exec:regexpExec});var SPECIES$3=wellKnownSymbol("species"),RegExpPrototype$1=RegExp.prototype,fixRegexpWellKnownSymbolLogic=function(e,t,i,o){var r=wellKnownSymbol(e),n=!fails((function(){var t={};return t[r]=function(){return 7},7!=""[e](t)})),a=n&&!fails((function(){var t=!1,i=/a/;return"split"===e&&((i={}).constructor={},i.constructor[SPECIES$3]=function(){return i},i.flags="",i[r]=/./[r]),i.exec=function(){return t=!0,null},i[r](""),!t}));if(!n||!a||i){var s=/./[r],l=t(r,""[e],(function(e,t,i,o,r){var a=t.exec;return a===regexpExec||a===RegExpPrototype$1.exec?n&&!r?{done:!0,value:s.call(t,i,o)}:{done:!0,value:e.call(i,t,o)}:{done:!1}}));redefine(String.prototype,e,l[0]),redefine(RegExpPrototype$1,r,l[1])}o&&createNonEnumerableProperty(RegExpPrototype$1[r],"sham",!0)},MATCH$1=wellKnownSymbol("match"),isRegexp=function(e){var t;return isObject(e)&&(void 0!==(t=e[MATCH$1])?!!t:"RegExp"==classofRaw(e))},createMethod$3=function(e){return function(t,i){var o,r,n=toString(requireObjectCoercible(t)),a=toInteger(i),s=n.length;return a<0||a>=s?e?"":void 0:(o=n.charCodeAt(a))<55296||o>56319||a+1===s||(r=n.charCodeAt(a+1))<56320||r>57343?e?n.charAt(a):o:e?n.slice(a,a+2):r-56320+(o-55296<<10)+65536}},stringMultibyte={codeAt:createMethod$3(!1),charAt:createMethod$3(!0)},charAt$1=stringMultibyte.charAt,advanceStringIndex=function(e,t,i){return t+(i?charAt$1(e,t).length:1)},regexpExecAbstract=function(e,t){var i=e.exec;if(isCallable(i)){var o=i.call(e,t);return null!==o&&anObject(o),o}if("RegExp"===classofRaw(e))return regexpExec.call(e,t);throw TypeError("RegExp#exec called on incompatible receiver")},UNSUPPORTED_Y=regexpStickyHelpers.UNSUPPORTED_Y,arrayPush=[].push,min$4=Math.min,MAX_UINT32=4294967295,SPLIT_WORKS_WITH_OVERWRITTEN_EXEC=!fails((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var i="ab".split(e);return 2!==i.length||"a"!==i[0]||"b"!==i[1]}));fixRegexpWellKnownSymbolLogic("split",(function(e,t,i){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,i){var o=toString(requireObjectCoercible(this)),r=void 0===i?MAX_UINT32:i>>>0;if(0===r)return[];if(void 0===e)return[o];if(!isRegexp(e))return t.call(o,e,r);for(var n,a,s,l=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,p=new RegExp(e.source,c+"g");(n=regexpExec.call(p,o))&&!((a=p.lastIndex)>d&&(l.push(o.slice(d,n.index)),n.length>1&&n.index<o.length&&arrayPush.apply(l,n.slice(1)),s=n[0].length,d=a,l.length>=r));)p.lastIndex===n.index&&p.lastIndex++;return d===o.length?!s&&p.test("")||l.push(""):l.push(o.slice(d)),l.length>r?l.slice(0,r):l}:"0".split(void 0,0).length?function(e,i){return void 0===e&&0===i?[]:t.call(this,e,i)}:t,[function(t,i){var r=requireObjectCoercible(this),n=null==t?void 0:getMethod(t,e);return n?n.call(t,r,i):o.call(toString(r),t,i)},function(e,r){var n=anObject(this),a=toString(e),s=i(o,n,a,r,o!==t);if(s.done)return s.value;var l=speciesConstructor(n,RegExp),c=n.unicode,d=(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.unicode?"u":"")+(UNSUPPORTED_Y?"g":"y"),p=new l(UNSUPPORTED_Y?"^(?:"+n.source+")":n,d),h=void 0===r?MAX_UINT32:r>>>0;if(0===h)return[];if(0===a.length)return null===regexpExecAbstract(p,a)?[a]:[];for(var u=0,g=0,f=[];g<a.length;){p.lastIndex=UNSUPPORTED_Y?0:g;var m,b=regexpExecAbstract(p,UNSUPPORTED_Y?a.slice(g):a);if(null===b||(m=min$4(toLength(p.lastIndex+(UNSUPPORTED_Y?g:0)),a.length))===u)g=advanceStringIndex(a,g,c);else{if(f.push(a.slice(u,g)),f.length===h)return f;for(var y=1;y<=b.length-1;y++)if(f.push(b[y]),f.length===h)return f;g=u=m}}return f.push(a.slice(u)),f}]}),!SPLIT_WORKS_WITH_OVERWRITTEN_EXEC,UNSUPPORTED_Y),fixRegexpWellKnownSymbolLogic("match",(function(e,t,i){return[function(t){var i=requireObjectCoercible(this),o=null==t?void 0:getMethod(t,e);return o?o.call(t,i):new RegExp(t)[e](toString(i))},function(e){var o=anObject(this),r=toString(e),n=i(t,o,r);if(n.done)return n.value;if(!o.global)return regexpExecAbstract(o,r);var a=o.unicode;o.lastIndex=0;for(var s,l=[],c=0;null!==(s=regexpExecAbstract(o,r));){var d=toString(s[0]);l[c]=d,""===d&&(o.lastIndex=advanceStringIndex(r,toLength(o.lastIndex),a)),c++}return 0===c?null:l}]}));var UNSCOPABLES=wellKnownSymbol("unscopables"),ArrayPrototype=Array.prototype;null==ArrayPrototype[UNSCOPABLES]&&objectDefineProperty.f(ArrayPrototype,UNSCOPABLES,{configurable:!0,value:objectCreate(null)});var addToUnscopables=function(e){ArrayPrototype[UNSCOPABLES][e]=!0},correctPrototypeGetter=!fails((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),IE_PROTO=sharedKey("IE_PROTO"),ObjectPrototype$2=Object.prototype,objectGetPrototypeOf=correctPrototypeGetter?Object.getPrototypeOf:function(e){var t=toObject(e);if(has$1(t,IE_PROTO))return t[IE_PROTO];var i=t.constructor;return isCallable(i)&&t instanceof i?i.prototype:t instanceof Object?ObjectPrototype$2:null},ITERATOR$5=wellKnownSymbol("iterator"),BUGGY_SAFARI_ITERATORS$1=!1,IteratorPrototype$2,PrototypeOfArrayIteratorPrototype,arrayIterator;[].keys&&(arrayIterator=[].keys(),"next"in arrayIterator?(PrototypeOfArrayIteratorPrototype=objectGetPrototypeOf(objectGetPrototypeOf(arrayIterator)),PrototypeOfArrayIteratorPrototype!==Object.prototype&&(IteratorPrototype$2=PrototypeOfArrayIteratorPrototype)):BUGGY_SAFARI_ITERATORS$1=!0);var NEW_ITERATOR_PROTOTYPE=null==IteratorPrototype$2||fails((function(){var e={};return IteratorPrototype$2[ITERATOR$5].call(e)!==e}));NEW_ITERATOR_PROTOTYPE&&(IteratorPrototype$2={}),isCallable(IteratorPrototype$2[ITERATOR$5])||redefine(IteratorPrototype$2,ITERATOR$5,(function(){return this}));var iteratorsCore={IteratorPrototype:IteratorPrototype$2,BUGGY_SAFARI_ITERATORS:BUGGY_SAFARI_ITERATORS$1},IteratorPrototype$1=iteratorsCore.IteratorPrototype,returnThis$1=function(){return this},createIteratorConstructor=function(e,t,i){var o=t+" Iterator";return e.prototype=objectCreate(IteratorPrototype$1,{next:createPropertyDescriptor(1,i)}),setToStringTag(e,o,!1),iterators[o]=returnThis$1,e},PROPER_FUNCTION_NAME$3=functionName.PROPER,CONFIGURABLE_FUNCTION_NAME$1=functionName.CONFIGURABLE,IteratorPrototype=iteratorsCore.IteratorPrototype,BUGGY_SAFARI_ITERATORS=iteratorsCore.BUGGY_SAFARI_ITERATORS,ITERATOR$4=wellKnownSymbol("iterator"),KEYS="keys",VALUES="values",ENTRIES="entries",returnThis=function(){return this},defineIterator=function(e,t,i,o,r,n,a){createIteratorConstructor(i,t,o);var s,l,c,d=function(e){if(e===r&&f)return f;if(!BUGGY_SAFARI_ITERATORS&&e in u)return u[e];switch(e){case KEYS:case VALUES:case ENTRIES:return function(){return new i(this,e)}}return function(){return new i(this)}},p=t+" Iterator",h=!1,u=e.prototype,g=u[ITERATOR$4]||u["@@iterator"]||r&&u[r],f=!BUGGY_SAFARI_ITERATORS&&g||d(r),m="Array"==t&&u.entries||g;if(m&&(s=objectGetPrototypeOf(m.call(new e)))!==Object.prototype&&s.next&&(objectGetPrototypeOf(s)!==IteratorPrototype&&(objectSetPrototypeOf?objectSetPrototypeOf(s,IteratorPrototype):isCallable(s[ITERATOR$4])||redefine(s,ITERATOR$4,returnThis)),setToStringTag(s,p,!0)),PROPER_FUNCTION_NAME$3&&r==VALUES&&g&&g.name!==VALUES&&(CONFIGURABLE_FUNCTION_NAME$1?createNonEnumerableProperty(u,"name",VALUES):(h=!0,f=function(){return g.call(this)})),r)if(l={values:d(VALUES),keys:n?f:d(KEYS),entries:d(ENTRIES)},a)for(c in l)(BUGGY_SAFARI_ITERATORS||h||!(c in u))&&redefine(u,c,l[c]);else _export({target:t,proto:!0,forced:BUGGY_SAFARI_ITERATORS||h},l);return u[ITERATOR$4]!==f&&redefine(u,ITERATOR$4,f,{name:r}),iterators[t]=f,l},ARRAY_ITERATOR="Array Iterator",setInternalState$4=internalState.set,getInternalState$2=internalState.getterFor(ARRAY_ITERATOR),es_array_iterator=defineIterator(Array,"Array",(function(e,t){setInternalState$4(this,{type:ARRAY_ITERATOR,target:toIndexedObject(e),index:0,kind:t})}),(function(){var e=getInternalState$2(this),t=e.target,i=e.kind,o=e.index++;return!t||o>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==i?{value:o,done:!1}:"values"==i?{value:t[o],done:!1}:{value:[o,t[o]],done:!1}}),"values");iterators.Arguments=iterators.Array,addToUnscopables("keys"),addToUnscopables("values"),addToUnscopables("entries");var arrayBufferNative="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,defineProperty$1=objectDefineProperty.f,Int8Array$3=global$1.Int8Array,Int8ArrayPrototype=Int8Array$3&&Int8Array$3.prototype,Uint8ClampedArray=global$1.Uint8ClampedArray,Uint8ClampedArrayPrototype=Uint8ClampedArray&&Uint8ClampedArray.prototype,TypedArray=Int8Array$3&&objectGetPrototypeOf(Int8Array$3),TypedArrayPrototype=Int8ArrayPrototype&&objectGetPrototypeOf(Int8ArrayPrototype),ObjectPrototype$1=Object.prototype,isPrototypeOf=ObjectPrototype$1.isPrototypeOf,TO_STRING_TAG$1=wellKnownSymbol("toStringTag"),TYPED_ARRAY_TAG=uid("TYPED_ARRAY_TAG"),TYPED_ARRAY_CONSTRUCTOR$1=uid("TYPED_ARRAY_CONSTRUCTOR"),NATIVE_ARRAY_BUFFER_VIEWS$1=arrayBufferNative&&!!objectSetPrototypeOf&&"Opera"!==classof(global$1.opera),TYPED_ARRAY_TAG_REQIRED=!1,NAME,Constructor,Prototype,TypedArrayConstructorsList={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},BigIntArrayConstructorsList={BigInt64Array:8,BigUint64Array:8},isView=function(e){if(!isObject(e))return!1;var t=classof(e);return"DataView"===t||has$1(TypedArrayConstructorsList,t)||has$1(BigIntArrayConstructorsList,t)},isTypedArray=function(e){if(!isObject(e))return!1;var t=classof(e);return has$1(TypedArrayConstructorsList,t)||has$1(BigIntArrayConstructorsList,t)},aTypedArray$m=function(e){if(isTypedArray(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor$2=function(e){if(isCallable(e)&&(!objectSetPrototypeOf||isPrototypeOf.call(TypedArray,e)))return e;throw TypeError(tryToString(e)+" is not a typed array constructor")},exportTypedArrayMethod$n=function(e,t,i){if(descriptors){if(i)for(var o in TypedArrayConstructorsList){var r=global$1[o];if(r&&has$1(r.prototype,e))try{delete r.prototype[e]}catch(e){}}TypedArrayPrototype[e]&&!i||redefine(TypedArrayPrototype,e,i?t:NATIVE_ARRAY_BUFFER_VIEWS$1&&Int8ArrayPrototype[e]||t)}},exportTypedArrayStaticMethod=function(e,t,i){var o,r;if(descriptors){if(objectSetPrototypeOf){if(i)for(o in TypedArrayConstructorsList)if((r=global$1[o])&&has$1(r,e))try{delete r[e]}catch(e){}if(TypedArray[e]&&!i)return;try{return redefine(TypedArray,e,i?t:NATIVE_ARRAY_BUFFER_VIEWS$1&&TypedArray[e]||t)}catch(e){}}for(o in TypedArrayConstructorsList)!(r=global$1[o])||r[e]&&!i||redefine(r,e,t)}};for(NAME in TypedArrayConstructorsList)Constructor=global$1[NAME],Prototype=Constructor&&Constructor.prototype,Prototype?createNonEnumerableProperty(Prototype,TYPED_ARRAY_CONSTRUCTOR$1,Constructor):NATIVE_ARRAY_BUFFER_VIEWS$1=!1;for(NAME in BigIntArrayConstructorsList)Constructor=global$1[NAME],Prototype=Constructor&&Constructor.prototype,Prototype&&createNonEnumerableProperty(Prototype,TYPED_ARRAY_CONSTRUCTOR$1,Constructor);if((!NATIVE_ARRAY_BUFFER_VIEWS$1||!isCallable(TypedArray)||TypedArray===Function.prototype)&&(TypedArray=function(){throw TypeError("Incorrect invocation")},NATIVE_ARRAY_BUFFER_VIEWS$1))for(NAME in TypedArrayConstructorsList)global$1[NAME]&&objectSetPrototypeOf(global$1[NAME],TypedArray);if((!NATIVE_ARRAY_BUFFER_VIEWS$1||!TypedArrayPrototype||TypedArrayPrototype===ObjectPrototype$1)&&(TypedArrayPrototype=TypedArray.prototype,NATIVE_ARRAY_BUFFER_VIEWS$1))for(NAME in TypedArrayConstructorsList)global$1[NAME]&&objectSetPrototypeOf(global$1[NAME].prototype,TypedArrayPrototype);if(NATIVE_ARRAY_BUFFER_VIEWS$1&&objectGetPrototypeOf(Uint8ClampedArrayPrototype)!==TypedArrayPrototype&&objectSetPrototypeOf(Uint8ClampedArrayPrototype,TypedArrayPrototype),descriptors&&!has$1(TypedArrayPrototype,TO_STRING_TAG$1))for(NAME in TYPED_ARRAY_TAG_REQIRED=!0,defineProperty$1(TypedArrayPrototype,TO_STRING_TAG$1,{get:function(){return isObject(this)?this[TYPED_ARRAY_TAG]:void 0}}),TypedArrayConstructorsList)global$1[NAME]&&createNonEnumerableProperty(global$1[NAME],TYPED_ARRAY_TAG,NAME);var arrayBufferViewCore={NATIVE_ARRAY_BUFFER_VIEWS:NATIVE_ARRAY_BUFFER_VIEWS$1,TYPED_ARRAY_CONSTRUCTOR:TYPED_ARRAY_CONSTRUCTOR$1,TYPED_ARRAY_TAG:TYPED_ARRAY_TAG_REQIRED&&TYPED_ARRAY_TAG,aTypedArray:aTypedArray$m,aTypedArrayConstructor:aTypedArrayConstructor$2,exportTypedArrayMethod:exportTypedArrayMethod$n,exportTypedArrayStaticMethod:exportTypedArrayStaticMethod,isView:isView,isTypedArray:isTypedArray,TypedArray:TypedArray,TypedArrayPrototype:TypedArrayPrototype},NATIVE_ARRAY_BUFFER_VIEWS=arrayBufferViewCore.NATIVE_ARRAY_BUFFER_VIEWS,ArrayBuffer$1=global$1.ArrayBuffer,Int8Array$2=global$1.Int8Array,typedArrayConstructorsRequireWrappers=!NATIVE_ARRAY_BUFFER_VIEWS||!fails((function(){Int8Array$2(1)}))||!fails((function(){new Int8Array$2(-1)}))||!checkCorrectnessOfIteration((function(e){new Int8Array$2,new Int8Array$2(null),new Int8Array$2(1.5),new Int8Array$2(e)}),!0)||fails((function(){return 1!==new Int8Array$2(new ArrayBuffer$1(2),1,void 0).length})),toIndex=function(e){if(void 0===e)return 0;var t=toInteger(e),i=toLength(t);if(t!==i)throw RangeError("Wrong length or index");return i},abs=Math.abs,pow$1=Math.pow,floor$6=Math.floor,log=Math.log,LN2=Math.LN2,pack=function(e,t,i){var o,r,n,a=new Array(i),s=8*i-t-1,l=(1<<s)-1,c=l>>1,d=23===t?pow$1(2,-24)-pow$1(2,-77):0,p=e<0||0===e&&1/e<0?1:0,h=0;for((e=abs(e))!=e||e===1/0?(r=e!=e?1:0,o=l):(o=floor$6(log(e)/LN2),e*(n=pow$1(2,-o))<1&&(o--,n*=2),(e+=o+c>=1?d/n:d*pow$1(2,1-c))*n>=2&&(o++,n/=2),o+c>=l?(r=0,o=l):o+c>=1?(r=(e*n-1)*pow$1(2,t),o+=c):(r=e*pow$1(2,c-1)*pow$1(2,t),o=0));t>=8;a[h++]=255&r,r/=256,t-=8);for(o=o<<t|r,s+=t;s>0;a[h++]=255&o,o/=256,s-=8);return a[--h]|=128*p,a},unpack=function(e,t){var i,o=e.length,r=8*o-t-1,n=(1<<r)-1,a=n>>1,s=r-7,l=o-1,c=e[l--],d=127&c;for(c>>=7;s>0;d=256*d+e[l],l--,s-=8);for(i=d&(1<<-s)-1,d>>=-s,s+=t;s>0;i=256*i+e[l],l--,s-=8);if(0===d)d=1-a;else{if(d===n)return i?NaN:c?-1/0:1/0;i+=pow$1(2,t),d-=a}return(c?-1:1)*i*pow$1(2,d-t)},ieee754={pack:pack,unpack:unpack},arrayFill=function(e){for(var t=toObject(this),i=toLength(t.length),o=arguments.length,r=toAbsoluteIndex(o>1?arguments[1]:void 0,i),n=o>2?arguments[2]:void 0,a=void 0===n?i:toAbsoluteIndex(n,i);a>r;)t[r++]=e;return t},getOwnPropertyNames=objectGetOwnPropertyNames.f,defineProperty=objectDefineProperty.f,PROPER_FUNCTION_NAME$2=functionName.PROPER,CONFIGURABLE_FUNCTION_NAME=functionName.CONFIGURABLE,getInternalState$1=internalState.get,setInternalState$3=internalState.set,ARRAY_BUFFER="ArrayBuffer",DATA_VIEW="DataView",PROTOTYPE="prototype",WRONG_LENGTH="Wrong length",WRONG_INDEX="Wrong index",NativeArrayBuffer=global$1[ARRAY_BUFFER],$ArrayBuffer=NativeArrayBuffer,$DataView=global$1[DATA_VIEW],$DataViewPrototype=$DataView&&$DataView[PROTOTYPE],ObjectPrototype=Object.prototype,RangeError$1=global$1.RangeError,packIEEE754=ieee754.pack,unpackIEEE754=ieee754.unpack,packInt8=function(e){return[255&e]},packInt16=function(e){return[255&e,e>>8&255]},packInt32=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},unpackInt32=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},packFloat32=function(e){return packIEEE754(e,23,4)},packFloat64=function(e){return packIEEE754(e,52,8)},addGetter=function(e,t){defineProperty(e[PROTOTYPE],t,{get:function(){return getInternalState$1(this)[t]}})},get=function(e,t,i,o){var r=toIndex(i),n=getInternalState$1(e);if(r+t>n.byteLength)throw RangeError$1(WRONG_INDEX);var a=getInternalState$1(n.buffer).bytes,s=r+n.byteOffset,l=a.slice(s,s+t);return o?l:l.reverse()},set=function(e,t,i,o,r,n){var a=toIndex(i),s=getInternalState$1(e);if(a+t>s.byteLength)throw RangeError$1(WRONG_INDEX);for(var l=getInternalState$1(s.buffer).bytes,c=a+s.byteOffset,d=o(+r),p=0;p<t;p++)l[c+p]=d[n?p:t-p-1]};if(arrayBufferNative){var INCORRECT_ARRAY_BUFFER_NAME=PROPER_FUNCTION_NAME$2&&NativeArrayBuffer.name!==ARRAY_BUFFER;if(fails((function(){NativeArrayBuffer(1)}))&&fails((function(){new NativeArrayBuffer(-1)}))&&!fails((function(){return new NativeArrayBuffer,new NativeArrayBuffer(1.5),new NativeArrayBuffer(NaN),INCORRECT_ARRAY_BUFFER_NAME&&!CONFIGURABLE_FUNCTION_NAME})))INCORRECT_ARRAY_BUFFER_NAME&&CONFIGURABLE_FUNCTION_NAME&&createNonEnumerableProperty(NativeArrayBuffer,"name",ARRAY_BUFFER);else{$ArrayBuffer=function(e){return anInstance(this,$ArrayBuffer),new NativeArrayBuffer(toIndex(e))};for(var ArrayBufferPrototype=$ArrayBuffer[PROTOTYPE]=NativeArrayBuffer[PROTOTYPE],keys=getOwnPropertyNames(NativeArrayBuffer),j=0,key;keys.length>j;)(key=keys[j++])in $ArrayBuffer||createNonEnumerableProperty($ArrayBuffer,key,NativeArrayBuffer[key]);ArrayBufferPrototype.constructor=$ArrayBuffer}objectSetPrototypeOf&&objectGetPrototypeOf($DataViewPrototype)!==ObjectPrototype&&objectSetPrototypeOf($DataViewPrototype,ObjectPrototype);var testView=new $DataView(new $ArrayBuffer(2)),$setInt8=$DataViewPrototype.setInt8;testView.setInt8(0,2147483648),testView.setInt8(1,2147483649),!testView.getInt8(0)&&testView.getInt8(1)||redefineAll($DataViewPrototype,{setInt8:function(e,t){$setInt8.call(this,e,t<<24>>24)},setUint8:function(e,t){$setInt8.call(this,e,t<<24>>24)}},{unsafe:!0})}else $ArrayBuffer=function(e){anInstance(this,$ArrayBuffer,ARRAY_BUFFER);var t=toIndex(e);setInternalState$3(this,{bytes:arrayFill.call(new Array(t),0),byteLength:t}),descriptors||(this.byteLength=t)},$DataView=function(e,t,i){anInstance(this,$DataView,DATA_VIEW),anInstance(e,$ArrayBuffer,DATA_VIEW);var o=getInternalState$1(e).byteLength,r=toInteger(t);if(r<0||r>o)throw RangeError$1("Wrong offset");if(r+(i=void 0===i?o-r:toLength(i))>o)throw RangeError$1(WRONG_LENGTH);setInternalState$3(this,{buffer:e,byteLength:i,byteOffset:r}),descriptors||(this.buffer=e,this.byteLength=i,this.byteOffset=r)},descriptors&&(addGetter($ArrayBuffer,"byteLength"),addGetter($DataView,"buffer"),addGetter($DataView,"byteLength"),addGetter($DataView,"byteOffset")),redefineAll($DataView[PROTOTYPE],{getInt8:function(e){return get(this,1,e)[0]<<24>>24},getUint8:function(e){return get(this,1,e)[0]},getInt16:function(e){var t=get(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=get(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return unpackInt32(get(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return unpackInt32(get(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return unpackIEEE754(get(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return unpackIEEE754(get(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){set(this,1,e,packInt8,t)},setUint8:function(e,t){set(this,1,e,packInt8,t)},setInt16:function(e,t){set(this,2,e,packInt16,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){set(this,2,e,packInt16,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){set(this,4,e,packInt32,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){set(this,4,e,packInt32,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){set(this,4,e,packFloat32,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){set(this,8,e,packFloat64,t,arguments.length>2?arguments[2]:void 0)}});setToStringTag($ArrayBuffer,ARRAY_BUFFER),setToStringTag($DataView,DATA_VIEW);var arrayBuffer={ArrayBuffer:$ArrayBuffer,DataView:$DataView},floor$5=Math.floor,isInteger=function(e){return!isObject(e)&&isFinite(e)&&floor$5(e)===e},toPositiveInteger=function(e){var t=toInteger(e);if(t<0)throw RangeError("The argument can't be less than 0");return t},toOffset=function(e,t){var i=toPositiveInteger(e);if(i%t)throw RangeError("Wrong offset");return i},aTypedArrayConstructor$1=arrayBufferViewCore.aTypedArrayConstructor,typedArrayFrom=function(e){var t,i,o,r,n,a,s=aConstructor(this),l=toObject(e),c=arguments.length,d=c>1?arguments[1]:void 0,p=void 0!==d,h=getIteratorMethod(l);if(h&&!isArrayIteratorMethod(h))for(a=(n=getIterator(l,h)).next,l=[];!(r=a.call(n)).done;)l.push(r.value);for(p&&c>2&&(d=functionBindContext(d,arguments[2],2)),i=toLength(l.length),o=new(aTypedArrayConstructor$1(s))(i),t=0;i>t;t++)o[t]=p?d(l[t],t):l[t];return o},isArray=Array.isArray||function(e){return"Array"==classofRaw(e)},SPECIES$2=wellKnownSymbol("species"),arraySpeciesConstructor=function(e){var t;return isArray(e)&&(t=e.constructor,(isConstructor(t)&&(t===Array||isArray(t.prototype))||isObject(t)&&null===(t=t[SPECIES$2]))&&(t=void 0)),void 0===t?Array:t},arraySpeciesCreate=function(e,t){return new(arraySpeciesConstructor(e))(0===t?0:t)},push=[].push,createMethod$2=function(e){var t=1==e,i=2==e,o=3==e,r=4==e,n=6==e,a=7==e,s=5==e||n;return function(l,c,d,p){for(var h,u,g=toObject(l),f=indexedObject(g),m=functionBindContext(c,d,3),b=toLength(f.length),y=0,v=p||arraySpeciesCreate,w=t?v(l,b):i||a?v(l,0):void 0;b>y;y++)if((s||y in f)&&(u=m(h=f[y],y,g),e))if(t)w[y]=u;else if(u)switch(e){case 3:return!0;case 5:return h;case 6:return y;case 2:push.call(w,h)}else switch(e){case 4:return!1;case 7:push.call(w,h)}return n?-1:o||r?r:w}},arrayIteration={forEach:createMethod$2(0),map:createMethod$2(1),filter:createMethod$2(2),some:createMethod$2(3),every:createMethod$2(4),find:createMethod$2(5),findIndex:createMethod$2(6),filterReject:createMethod$2(7)},typedArrayConstructor=createCommonjsModule((function(e){var t=objectGetOwnPropertyNames.f,i=arrayIteration.forEach,o=internalState.get,r=internalState.set,n=objectDefineProperty.f,a=objectGetOwnPropertyDescriptor.f,s=Math.round,l=global$1.RangeError,c=arrayBuffer.ArrayBuffer,d=arrayBuffer.DataView,p=arrayBufferViewCore.NATIVE_ARRAY_BUFFER_VIEWS,h=arrayBufferViewCore.TYPED_ARRAY_CONSTRUCTOR,u=arrayBufferViewCore.TYPED_ARRAY_TAG,g=arrayBufferViewCore.TypedArray,f=arrayBufferViewCore.TypedArrayPrototype,m=arrayBufferViewCore.aTypedArrayConstructor,b=arrayBufferViewCore.isTypedArray,y=function(e,t){for(var i=0,o=t.length,r=new(m(e))(o);o>i;)r[i]=t[i++];return r},v=function(e,t){n(e,t,{get:function(){return o(this)[t]}})},w=function(e){var t;return e instanceof c||"ArrayBuffer"==(t=classof(e))||"SharedArrayBuffer"==t},x=function(e,t){return b(e)&&!isSymbol(t)&&t in e&&isInteger(+t)&&t>=0},_=function(e,t){return t=toPropertyKey(t),x(e,t)?createPropertyDescriptor(2,e[t]):a(e,t)},A=function(e,t,i){return t=toPropertyKey(t),!(x(e,t)&&isObject(i)&&has$1(i,"value"))||has$1(i,"get")||has$1(i,"set")||i.configurable||has$1(i,"writable")&&!i.writable||has$1(i,"enumerable")&&!i.enumerable?n(e,t,i):(e[t]=i.value,e)};descriptors?(p||(objectGetOwnPropertyDescriptor.f=_,objectDefineProperty.f=A,v(f,"buffer"),v(f,"byteOffset"),v(f,"byteLength"),v(f,"length")),_export({target:"Object",stat:!0,forced:!p},{getOwnPropertyDescriptor:_,defineProperty:A}),e.exports=function(e,a,m){var v=e.match(/\d+$/)[0]/8,x=e+(m?"Clamped":"")+"Array",_="get"+e,A="set"+e,S=global$1[x],k=S,O=k&&k.prototype,I={},$=function(e,t){n(e,t,{get:function(){return function(e,t){var i=o(e);return i.view[_](t*v+i.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,i){var r=o(e);m&&(i=(i=s(i))<0?0:i>255?255:255&i),r.view[A](t*v+r.byteOffset,i,!0)}(this,t,e)},enumerable:!0})};p?typedArrayConstructorsRequireWrappers&&(k=a((function(e,t,i,o){return anInstance(e,k,x),inheritIfRequired(isObject(t)?w(t)?void 0!==o?new S(t,toOffset(i,v),o):void 0!==i?new S(t,toOffset(i,v)):new S(t):b(t)?y(k,t):typedArrayFrom.call(k,t):new S(toIndex(t)),e,k)})),objectSetPrototypeOf&&objectSetPrototypeOf(k,g),i(t(S),(function(e){e in k||createNonEnumerableProperty(k,e,S[e])})),k.prototype=O):(k=a((function(e,t,i,o){anInstance(e,k,x);var n,a,s,p=0,h=0;if(isObject(t)){if(!w(t))return b(t)?y(k,t):typedArrayFrom.call(k,t);n=t,h=toOffset(i,v);var u=t.byteLength;if(void 0===o){if(u%v)throw l("Wrong length");if((a=u-h)<0)throw l("Wrong length")}else if((a=toLength(o)*v)+h>u)throw l("Wrong length");s=a/v}else s=toIndex(t),n=new c(a=s*v);for(r(e,{buffer:n,byteOffset:h,byteLength:a,length:s,view:new d(n)});p<s;)$(e,p++)})),objectSetPrototypeOf&&objectSetPrototypeOf(k,g),O=k.prototype=objectCreate(f)),O.constructor!==k&&createNonEnumerableProperty(O,"constructor",k),createNonEnumerableProperty(O,h,k),u&&createNonEnumerableProperty(O,u,x),I[x]=k,_export({global:!0,forced:k!=S,sham:!p},I),"BYTES_PER_ELEMENT"in k||createNonEnumerableProperty(k,"BYTES_PER_ELEMENT",v),"BYTES_PER_ELEMENT"in O||createNonEnumerableProperty(O,"BYTES_PER_ELEMENT",v),setSpecies(x)}):e.exports=function(){}}));typedArrayConstructor("Uint8",(function(e){return function(t,i,o){return e(this,t,i,o)}}));var min$3=Math.min,arrayCopyWithin=[].copyWithin||function(e,t){var i=toObject(this),o=toLength(i.length),r=toAbsoluteIndex(e,o),n=toAbsoluteIndex(t,o),a=arguments.length>2?arguments[2]:void 0,s=min$3((void 0===a?o:toAbsoluteIndex(a,o))-n,o-r),l=1;for(n<r&&r<n+s&&(l=-1,n+=s-1,r+=s-1);s-- >0;)n in i?i[r]=i[n]:delete i[r],r+=l,n+=l;return i},aTypedArray$l=arrayBufferViewCore.aTypedArray,exportTypedArrayMethod$m=arrayBufferViewCore.exportTypedArrayMethod;exportTypedArrayMethod$m("copyWithin",(function(e,t){return arrayCopyWithin.call(aTypedArray$l(this),e,t,arguments.length>2?arguments[2]:void 0)}));var $every=arrayIteration.every,aTypedArray$k=arrayBufferViewCore.aTypedArray,exportTypedArrayMethod$l=arrayBufferViewCore.exportTypedArrayMethod;exportTypedArrayMethod$l("every",(function(e){return $every(aTypedArray$k(this),e,arguments.length>1?arguments[1]:void 0)}));var aTypedArray$j=arrayBufferViewCore.aTypedArray,exportTypedArrayMethod$k=arrayBufferViewCore.exportTypedArrayMethod;exportTypedArrayMethod$k("fill",(function(e){return arrayFill.apply(aTypedArray$j(this),arguments)}));var arrayFromConstructorAndList=function(e,t){for(var i=0,o=t.length,r=new e(o);o>i;)r[i]=t[i++];return r},TYPED_ARRAY_CONSTRUCTOR=arrayBufferViewCore.TYPED_ARRAY_CONSTRUCTOR,aTypedArrayConstructor=arrayBufferViewCore.aTypedArrayConstructor,typedArraySpeciesConstructor=function(e){return aTypedArrayConstructor(speciesConstructor(e,e[TYPED_ARRAY_CONSTRUCTOR]))},typedArrayFromSpeciesAndList=function(e,t){return arrayFromConstructorAndList(typedArraySpeciesConstructor(e),t)},$filter$1=arrayIteration.filter,aTypedArray$i=arrayBufferViewCore.aTypedArray,exportTypedArrayMethod$j=arrayBufferViewCore.exportTypedArrayMethod;exportTypedArrayMethod$j("filter",(function(e){var t=$filter$1(aTypedArray$i(this),e,arguments.length>1?arguments[1]:void 0);return typedArrayFromSpeciesAndList(this,t)}));var $find=arrayIteration.find,aTypedArray$h=arrayBufferViewCore.aTypedArray,exportTypedArrayMethod$i=arrayBufferViewCore.exportTypedArrayMethod;exportTypedArrayMethod$i("find",(function(e){return $find(aTypedArray$h(this),e,arguments.length>1?arguments[1]:void 0)}));var $findIndex=arrayIteration.findIndex,aTypedArray$g=arrayBufferViewCore.aTypedArray,exportTypedArrayMethod$h=arrayBufferViewCore.exportTypedArrayMethod;exportTypedArrayMethod$h("findIndex",(function(e){return $findIndex(aTypedArray$g(this),e,arguments.length>1?arguments[1]:void 0)}));var $forEach$1=arrayIteration.forEach,aTypedArray$f=arrayBufferViewCore.aTypedArray,exportTypedArrayMethod$g=arrayBufferViewCore.exportTypedArrayMethod;exportTypedArrayMethod$g("forEach",(function(e){$forEach$1(aTypedArray$f(this),e,arguments.length>1?arguments[1]:void 0)}));var $includes$1=arrayIncludes.includes,aTypedArray$e=arrayBufferViewCore.aTypedArray,exportTypedArrayMethod$f=arrayBufferViewCore.exportTypedArrayMethod;exportTypedArrayMethod$f("includes",(function(e){return $includes$1(aTypedArray$e(this),e,arguments.length>1?arguments[1]:void 0)}));var $indexOf=arrayIncludes.indexOf,aTypedArray$d=arrayBufferViewCore.aTypedArray,exportTypedArrayMethod$e=arrayBufferViewCore.exportTypedArrayMethod;exportTypedArrayMethod$e("indexOf",(function(e){return $indexOf(aTypedArray$d(this),e,arguments.length>1?arguments[1]:void 0)}));var PROPER_FUNCTION_NAME$1=functionName.PROPER,ITERATOR$3=wellKnownSymbol("iterator"),Uint8Array$2=global$1.Uint8Array,arrayValues=es_array_iterator.values,arrayKeys=es_array_iterator.keys,arrayEntries=es_array_iterator.entries,aTypedArray$c=arrayBufferViewCore.aTypedArray,exportTypedArrayMethod$d=arrayBufferViewCore.exportTypedArrayMethod,nativeTypedArrayIterator=Uint8Array$2&&Uint8Array$2.prototype[ITERATOR$3],PROPER_ARRAY_VALUES_NAME=!!nativeTypedArrayIterator&&"values"===nativeTypedArrayIterator.name,typedArrayValues=function(){return arrayValues.call(aTypedArray$c(this))};exportTypedArrayMethod$d("entries",(function(){return arrayEntries.call(aTypedArray$c(this))})),exportTypedArrayMethod$d("keys",(function(){return arrayKeys.call(aTypedArray$c(this))})),exportTypedArrayMethod$d("values",typedArrayValues,PROPER_FUNCTION_NAME$1&&!PROPER_ARRAY_VALUES_NAME),exportTypedArrayMethod$d(ITERATOR$3,typedArrayValues,PROPER_FUNCTION_NAME$1&&!PROPER_ARRAY_VALUES_NAME);var aTypedArray$b=arrayBufferViewCore.aTypedArray,exportTypedArrayMethod$c=arrayBufferViewCore.exportTypedArrayMethod,$join=[].join;exportTypedArrayMethod$c("join",(function(e){return $join.apply(aTypedArray$b(this),arguments)}));var arrayMethodIsStrict=function(e,t){var i=[][e];return!!i&&fails((function(){i.call(null,t||function(){throw 1},1)}))},min$2=Math.min,$lastIndexOf=[].lastIndexOf,NEGATIVE_ZERO=!!$lastIndexOf&&1/[1].lastIndexOf(1,-0)<0,STRICT_METHOD$2=arrayMethodIsStrict("lastIndexOf"),FORCED$5=NEGATIVE_ZERO||!STRICT_METHOD$2,arrayLastIndexOf=FORCED$5?function(e){if(NEGATIVE_ZERO)return $lastIndexOf.apply(this,arguments)||0;var t=toIndexedObject(this),i=toLength(t.length),o=i-1;for(arguments.length>1&&(o=min$2(o,toInteger(arguments[1]))),o<0&&(o=i+o);o>=0;o--)if(o in t&&t[o]===e)return o||0;return-1}:$lastIndexOf,aTypedArray$a=arrayBufferViewCore.aTypedArray,exportTypedArrayMethod$b=arrayBufferViewCore.exportTypedArrayMethod;exportTypedArrayMethod$b("lastIndexOf",(function(e){return arrayLastIndexOf.apply(aTypedArray$a(this),arguments)}));var $map=arrayIteration.map,aTypedArray$9=arrayBufferViewCore.aTypedArray,exportTypedArrayMethod$a=arrayBufferViewCore.exportTypedArrayMethod;exportTypedArrayMethod$a("map",(function(e){return $map(aTypedArray$9(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(typedArraySpeciesConstructor(e))(t)}))}));var createMethod$1=function(e){return function(t,i,o,r){aCallable(i);var n=toObject(t),a=indexedObject(n),s=toLength(n.length),l=e?s-1:0,c=e?-1:1;if(o<2)for(;;){if(l in a){r=a[l],l+=c;break}if(l+=c,e?l<0:s<=l)throw TypeError("Reduce of empty array with no initial value")}for(;e?l>=0:s>l;l+=c)l in a&&(r=i(r,a[l],l,n));return r}},arrayReduce={left:createMethod$1(!1),right:createMethod$1(!0)},$reduce=arrayReduce.left,aTypedArray$8=arrayBufferViewCore.aTypedArray,exportTypedArrayMethod$9=arrayBufferViewCore.exportTypedArrayMethod;exportTypedArrayMethod$9("reduce",(function(e){return $reduce(aTypedArray$8(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}));var $reduceRight=arrayReduce.right,aTypedArray$7=arrayBufferViewCore.aTypedArray,exportTypedArrayMethod$8=arrayBufferViewCore.exportTypedArrayMethod;exportTypedArrayMethod$8("reduceRight",(function(e){return $reduceRight(aTypedArray$7(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}));var aTypedArray$6=arrayBufferViewCore.aTypedArray,exportTypedArrayMethod$7=arrayBufferViewCore.exportTypedArrayMethod,floor$4=Math.floor;exportTypedArrayMethod$7("reverse",(function(){for(var e,t=aTypedArray$6(this).length,i=floor$4(t/2),o=0;o<i;)e=this[o],this[o++]=this[--t],this[t]=e;return this}));var aTypedArray$5=arrayBufferViewCore.aTypedArray,exportTypedArrayMethod$6=arrayBufferViewCore.exportTypedArrayMethod,FORCED$4=fails((function(){new Int8Array(1).set({})}));exportTypedArrayMethod$6("set",(function(e){aTypedArray$5(this);var t=toOffset(arguments.length>1?arguments[1]:void 0,1),i=this.length,o=toObject(e),r=toLength(o.length),n=0;if(r+t>i)throw RangeError("Wrong length");for(;n<r;)this[t+n]=o[n++]}),FORCED$4);var aTypedArray$4=arrayBufferViewCore.aTypedArray,exportTypedArrayMethod$5=arrayBufferViewCore.exportTypedArrayMethod,$slice$1=[].slice,FORCED$3=fails((function(){new Int8Array(1).slice()}));exportTypedArrayMethod$5("slice",(function(e,t){for(var i=$slice$1.call(aTypedArray$4(this),e,t),o=typedArraySpeciesConstructor(this),r=0,n=i.length,a=new o(n);n>r;)a[r]=i[r++];return a}),FORCED$3);var $some=arrayIteration.some,aTypedArray$3=arrayBufferViewCore.aTypedArray,exportTypedArrayMethod$4=arrayBufferViewCore.exportTypedArrayMethod;exportTypedArrayMethod$4("some",(function(e){return $some(aTypedArray$3(this),e,arguments.length>1?arguments[1]:void 0)}));var floor$3=Math.floor,mergeSort=function(e,t){var i=e.length,o=floor$3(i/2);return i<8?insertionSort(e,t):merge(mergeSort(e.slice(0,o),t),mergeSort(e.slice(o),t),t)},insertionSort=function(e,t){for(var i,o,r=e.length,n=1;n<r;){for(o=n,i=e[n];o&&t(e[o-1],i)>0;)e[o]=e[--o];o!==n++&&(e[o]=i)}return e},merge=function(e,t,i){for(var o=e.length,r=t.length,n=0,a=0,s=[];n<o||a<r;)n<o&&a<r?s.push(i(e[n],t[a])<=0?e[n++]:t[a++]):s.push(n<o?e[n++]:t[a++]);return s},arraySort=mergeSort,firefox=engineUserAgent.match(/firefox\/(\d+)/i),engineFfVersion=!!firefox&&+firefox[1],engineIsIeOrEdge=/MSIE|Trident/.test(engineUserAgent),webkit=engineUserAgent.match(/AppleWebKit\/(\d+)\./),engineWebkitVersion=!!webkit&&+webkit[1],aTypedArray$2=arrayBufferViewCore.aTypedArray,exportTypedArrayMethod$3=arrayBufferViewCore.exportTypedArrayMethod,Uint16Array$1=global$1.Uint16Array,nativeSort$1=Uint16Array$1&&Uint16Array$1.prototype.sort,ACCEPT_INCORRECT_ARGUMENTS=!!nativeSort$1&&!fails((function(){var e=new Uint16Array$1(2);e.sort(null),e.sort({})})),STABLE_SORT$1=!!nativeSort$1&&!fails((function(){if(engineV8Version)return engineV8Version<74;if(engineFfVersion)return engineFfVersion<67;if(engineIsIeOrEdge)return!0;if(engineWebkitVersion)return engineWebkitVersion<602;var e,t,i=new Uint16Array$1(516),o=Array(516);for(e=0;e<516;e++)t=e%4,i[e]=515-e,o[e]=e-2*t+3;for(i.sort((function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(i[e]!==o[e])return!0})),getSortCompare$1=function(e){return function(t,i){return void 0!==e?+e(t,i)||0:i!=i?-1:t!=t?1:0===t&&0===i?1/t>0&&1/i<0?1:-1:t>i}};exportTypedArrayMethod$3("sort",(function(e){if(void 0!==e&&aCallable(e),STABLE_SORT$1)return nativeSort$1.call(this,e);aTypedArray$2(this);var t,i=toLength(this.length),o=Array(i);for(t=0;t<i;t++)o[t]=this[t];for(o=arraySort(this,getSortCompare$1(e)),t=0;t<i;t++)this[t]=o[t];return this}),!STABLE_SORT$1||ACCEPT_INCORRECT_ARGUMENTS);var aTypedArray$1=arrayBufferViewCore.aTypedArray,exportTypedArrayMethod$2=arrayBufferViewCore.exportTypedArrayMethod;exportTypedArrayMethod$2("subarray",(function(e,t){var i=aTypedArray$1(this),o=i.length,r=toAbsoluteIndex(e,o);return new(typedArraySpeciesConstructor(i))(i.buffer,i.byteOffset+r*i.BYTES_PER_ELEMENT,toLength((void 0===t?o:toAbsoluteIndex(t,o))-r))}));var Int8Array$1=global$1.Int8Array,aTypedArray=arrayBufferViewCore.aTypedArray,exportTypedArrayMethod$1=arrayBufferViewCore.exportTypedArrayMethod,$toLocaleString=[].toLocaleString,$slice=[].slice,TO_LOCALE_STRING_BUG=!!Int8Array$1&&fails((function(){$toLocaleString.call(new Int8Array$1(1))})),FORCED$2=fails((function(){return[1,2].toLocaleString()!=new Int8Array$1([1,2]).toLocaleString()}))||!fails((function(){Int8Array$1.prototype.toLocaleString.call([1,2])}));exportTypedArrayMethod$1("toLocaleString",(function(){return $toLocaleString.apply(TO_LOCALE_STRING_BUG?$slice.call(aTypedArray(this)):aTypedArray(this),arguments)}),FORCED$2);var exportTypedArrayMethod=arrayBufferViewCore.exportTypedArrayMethod,Uint8Array$1=global$1.Uint8Array,Uint8ArrayPrototype=Uint8Array$1&&Uint8Array$1.prototype||{},arrayToString=[].toString,arrayJoin=[].join;fails((function(){arrayToString.call({})}))&&(arrayToString=function(){return arrayJoin.call(this)});var IS_NOT_ARRAY_METHOD=Uint8ArrayPrototype.toString!=arrayToString;exportTypedArrayMethod("toString",arrayToString,IS_NOT_ARRAY_METHOD);var $includes=arrayIncludes.includes;_export({target:"Array",proto:!0},{includes:function(e){return $includes(this,e,arguments.length>1?arguments[1]:void 0)}}),addToUnscopables("includes");var notARegexp=function(e){if(isRegexp(e))throw TypeError("The method doesn't accept regular expressions");return e},MATCH=wellKnownSymbol("match"),correctIsRegexpLogic=function(e){var t=/./;try{"/./"[e](t)}catch(i){try{return t[MATCH]=!1,"/./"[e](t)}catch(e){}}return!1};_export({target:"String",proto:!0,forced:!correctIsRegexpLogic("includes")},{includes:function(e){return!!~toString(requireObjectCoercible(this)).indexOf(toString(notARegexp(e)),arguments.length>1?arguments[1]:void 0)}});var createProperty=function(e,t,i){var o=toPropertyKey(t);o in e?objectDefineProperty.f(e,o,createPropertyDescriptor(0,i)):e[o]=i},SPECIES$1=wellKnownSymbol("species"),arrayMethodHasSpeciesSupport=function(e){return engineV8Version>=51||!fails((function(){var t=[];return(t.constructor={})[SPECIES$1]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},HAS_SPECIES_SUPPORT$1=arrayMethodHasSpeciesSupport("slice"),SPECIES=wellKnownSymbol("species"),nativeSlice=[].slice,max$1=Math.max;_export({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT$1},{slice:function(e,t){var i,o,r,n=toIndexedObject(this),a=toLength(n.length),s=toAbsoluteIndex(e,a),l=toAbsoluteIndex(void 0===t?a:t,a);if(isArray(n)&&(i=n.constructor,(isConstructor(i)&&(i===Array||isArray(i.prototype))||isObject(i)&&null===(i=i[SPECIES]))&&(i=void 0),i===Array||void 0===i))return nativeSlice.call(n,s,l);for(o=new(void 0===i?Array:i)(max$1(l-s,0)),r=0;s<l;s++,r++)s in n&&createProperty(o,r,n[s]);return o.length=r,o}}),typedArrayConstructor("Uint32",(function(e){return function(t,i,o){return e(this,t,i,o)}})),typedArrayConstructor("Uint16",(function(e){return function(t,i,o){return e(this,t,i,o)}}));var $filter=arrayIteration.filter,HAS_SPECIES_SUPPORT=arrayMethodHasSpeciesSupport("filter");_export({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT},{filter:function(e){return $filter(this,e,arguments.length>1?arguments[1]:void 0)}});var PROPER_FUNCTION_NAME=functionName.PROPER,TO_STRING="toString",RegExpPrototype=RegExp.prototype,nativeToString=RegExpPrototype[TO_STRING],NOT_GENERIC=fails((function(){return"/a/b"!=nativeToString.call({source:"a",flags:"b"})})),INCORRECT_NAME=PROPER_FUNCTION_NAME&&nativeToString.name!=TO_STRING;(NOT_GENERIC||INCORRECT_NAME)&&redefine(RegExp.prototype,TO_STRING,(function(){var e=anObject(this),t=toString(e.source),i=e.flags;return"/"+t+"/"+toString(void 0===i&&e instanceof RegExp&&!("flags"in RegExpPrototype)?regexpFlags.call(e):i)}),{unsafe:!0});var test=[],nativeSort=test.sort,FAILS_ON_UNDEFINED=fails((function(){test.sort(void 0)})),FAILS_ON_NULL=fails((function(){test.sort(null)})),STRICT_METHOD$1=arrayMethodIsStrict("sort"),STABLE_SORT=!fails((function(){if(engineV8Version)return engineV8Version<70;if(!(engineFfVersion&&engineFfVersion>3)){if(engineIsIeOrEdge)return!0;if(engineWebkitVersion)return engineWebkitVersion<603;var e,t,i,o,r="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:i=3;break;case 68:case 71:i=4;break;default:i=2}for(o=0;o<47;o++)test.push({k:t+o,v:i})}for(test.sort((function(e,t){return t.v-e.v})),o=0;o<test.length;o++)t=test[o].k.charAt(0),r.charAt(r.length-1)!==t&&(r+=t);return"DGBEFHACIJK"!==r}})),FORCED$1=FAILS_ON_UNDEFINED||!FAILS_ON_NULL||!STRICT_METHOD$1||!STABLE_SORT,getSortCompare=function(e){return function(t,i){return void 0===i?-1:void 0===t?1:void 0!==e?+e(t,i)||0:toString(t)>toString(i)?1:-1}};_export({target:"Array",proto:!0,forced:FORCED$1},{sort:function(e){void 0!==e&&aCallable(e);var t=toObject(this);if(STABLE_SORT)return void 0===e?nativeSort.call(t):nativeSort.call(t,e);var i,o,r=[],n=toLength(t.length);for(o=0;o<n;o++)o in t&&r.push(t[o]);for(i=(r=arraySort(r,getSortCompare(e))).length,o=0;o<i;)t[o]=r[o++];for(;o<n;)delete t[o++];return t}});var UZIP_1=createCommonjsModule((function(e){var t,i,o={};e.exports=o,o.parse=function(e,t){for(var i=o.bin.readUshort,r=o.bin.readUint,n=0,a={},s=new Uint8Array(e),l=s.length-4;101010256!=r(s,l);)l--;n=l,n+=4;var c=i(s,n+=4);i(s,n+=2);var d=r(s,n+=2),p=r(s,n+=4);n+=4,n=p;for(var h=0;h<c;h++){r(s,n),n+=4,n+=4,n+=4,r(s,n+=4),d=r(s,n+=4);var u=r(s,n+=4),g=i(s,n+=4),f=i(s,n+2),m=i(s,n+4);n+=6;var b=r(s,n+=8);n+=4,n+=g+f+m,o._readLocal(s,b,a,d,u,t)}return a},o._readLocal=function(e,t,i,r,n,a){var s=o.bin.readUshort,l=o.bin.readUint;l(e,t),s(e,t+=4),s(e,t+=2);var c=s(e,t+=2);l(e,t+=2),l(e,t+=4),t+=4;var d=s(e,t+=8),p=s(e,t+=2);t+=2;var h=o.bin.readUTF8(e,t,d);if(t+=d,t+=p,a)i[h]={size:n,csize:r};else{var u=new Uint8Array(e.buffer,t);if(0==c)i[h]=new Uint8Array(u.buffer.slice(t,t+r));else{if(8!=c)throw"unknown compression method: "+c;var g=new Uint8Array(n);o.inflateRaw(u,g),i[h]=g}}},o.inflateRaw=function(e,t){return o.F.inflate(e,t)},o.inflate=function(e,t){return e[0],e[1],o.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),t)},o.deflate=function(e,t){null==t&&(t={level:6});var i=0,r=new Uint8Array(50+Math.floor(1.1*e.length));r[i]=120,r[i+1]=156,i+=2,i=o.F.deflateRaw(e,r,i,t.level);var n=o.adler(e,0,e.length);return r[i+0]=n>>>24&255,r[i+1]=n>>>16&255,r[i+2]=n>>>8&255,r[i+3]=n>>>0&255,new Uint8Array(r.buffer,0,i+4)},o.deflateRaw=function(e,t){null==t&&(t={level:6});var i=new Uint8Array(50+Math.floor(1.1*e.length)),r=o.F.deflateRaw(e,i,r,t.level);return new Uint8Array(i.buffer,0,r)},o.encode=function(e,t){null==t&&(t=!1);var i=0,r=o.bin.writeUint,n=o.bin.writeUshort,a={};for(var s in e){var l=!o._noNeed(s)&&!t,c=e[s],d=o.crc.crc(c,0,c.length);a[s]={cpr:l,usize:c.length,crc:d,file:l?o.deflateRaw(c):c}}for(var s in a)i+=a[s].file.length+30+46+2*o.bin.sizeUTF8(s);i+=22;var p=new Uint8Array(i),h=0,u=[];for(var s in a){var g=a[s];u.push(h),h=o._writeHeader(p,h,s,g,0)}var f=0,m=h;for(var s in a)g=a[s],u.push(h),h=o._writeHeader(p,h,s,g,1,u[f++]);var b=h-m;return r(p,h,101010256),h+=4,n(p,h+=4,f),n(p,h+=2,f),r(p,h+=2,b),r(p,h+=4,m),h+=4,h+=2,p.buffer},o._noNeed=function(e){var t=e.split(".").pop().toLowerCase();return-1!="png,jpg,jpeg,zip".indexOf(t)},o._writeHeader=function(e,t,i,r,n,a){var s=o.bin.writeUint,l=o.bin.writeUshort,c=r.file;return s(e,t,0==n?67324752:33639248),t+=4,1==n&&(t+=2),l(e,t,20),l(e,t+=2,0),l(e,t+=2,r.cpr?8:0),s(e,t+=2,0),s(e,t+=4,r.crc),s(e,t+=4,c.length),s(e,t+=4,r.usize),l(e,t+=4,o.bin.sizeUTF8(i)),l(e,t+=2,0),t+=2,1==n&&(t+=2,t+=2,s(e,t+=6,a),t+=4),t+=o.bin.writeUTF8(e,t,i),0==n&&(e.set(c,t),t+=c.length),t},o.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var i=t,o=0;o<8;o++)1&i?i=3988292384^i>>>1:i>>>=1;e[t]=i}return e}(),update:function(e,t,i,r){for(var n=0;n<r;n++)e=o.crc.table[255&(e^t[i+n])]^e>>>8;return e},crc:function(e,t,i){return 4294967295^o.crc.update(4294967295,e,t,i)}},o.adler=function(e,t,i){for(var o=1,r=0,n=t,a=t+i;n<a;){for(var s=Math.min(n+5552,a);n<s;)r+=o+=e[n++];o%=65521,r%=65521}return r<<16|o},o.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,i){e[t]=255&i,e[t+1]=i>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,i){e[t]=255&i,e[t+1]=i>>8&255,e[t+2]=i>>16&255,e[t+3]=i>>24&255},readASCII:function(e,t,i){for(var o="",r=0;r<i;r++)o+=String.fromCharCode(e[t+r]);return o},writeASCII:function(e,t,i){for(var o=0;o<i.length;o++)e[t+o]=i.charCodeAt(o)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,i){for(var r,n="",a=0;a<i;a++)n+="%"+o.bin.pad(e[t+a].toString(16));try{r=decodeURIComponent(n)}catch(r){return o.bin.readASCII(e,t,i)}return r},writeUTF8:function(e,t,i){for(var o=i.length,r=0,n=0;n<o;n++){var a=i.charCodeAt(n);if(0==(4294967168&a))e[t+r]=a,r++;else if(0==(4294965248&a))e[t+r]=192|a>>6,e[t+r+1]=128|a>>0&63,r+=2;else if(0==(4294901760&a))e[t+r]=224|a>>12,e[t+r+1]=128|a>>6&63,e[t+r+2]=128|a>>0&63,r+=3;else{if(0!=(4292870144&a))throw"e";e[t+r]=240|a>>18,e[t+r+1]=128|a>>12&63,e[t+r+2]=128|a>>6&63,e[t+r+3]=128|a>>0&63,r+=4}}return r},sizeUTF8:function(e){for(var t=e.length,i=0,o=0;o<t;o++){var r=e.charCodeAt(o);if(0==(4294967168&r))i++;else if(0==(4294965248&r))i+=2;else if(0==(4294901760&r))i+=3;else{if(0!=(4292870144&r))throw"e";i+=4}}return i}},o.F={},o.F.deflateRaw=function(e,t,i,r){var n=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][r],a=o.F.U,s=o.F._goodIndex;o.F._hash;var l=o.F._putsE,c=0,d=i<<3,p=0,h=e.length;if(0==r){for(;c<h;)l(t,d,c+(S=Math.min(65535,h-c))==h?1:0),d=o.F._copyExact(e,c,S,t,d+8),c+=S;return d>>>3}var u=a.lits,g=a.strt,f=a.prev,m=0,b=0,y=0,v=0,w=0,x=0;for(h>2&&(g[x=o.F._hash(e,0)]=0),c=0;c<h;c++){if(w=x,c+1<h-2){x=o.F._hash(e,c+1);var _=c+1&32767;f[_]=g[x],g[x]=_}if(p<=c){(m>14e3||b>26697)&&h-c>100&&(p<c&&(u[m]=c-p,m+=2,p=c),d=o.F._writeBlock(c==h-1||p==h?1:0,u,m,v,e,y,c-y,t,d),m=b=v=0,y=c);var A=0;c<h-2&&(A=o.F._bestMatch(e,c,f,w,Math.min(n[2],h-c),n[3]));var S=A>>>16,k=65535&A;if(0!=A){k=65535&A;var O=s(S=A>>>16,a.of0);a.lhst[257+O]++;var I=s(k,a.df0);a.dhst[I]++,v+=a.exb[O]+a.dxb[I],u[m]=S<<23|c-p,u[m+1]=k<<16|O<<8|I,m+=2,p=c+S}else a.lhst[e[c]]++;b++}}for(y==c&&0!=e.length||(p<c&&(u[m]=c-p,m+=2,p=c),d=o.F._writeBlock(1,u,m,v,e,y,c-y,t,d),m=0,b=0,m=b=v=0,y=c);0!=(7&d);)d++;return d>>>3},o.F._bestMatch=function(e,t,i,r,n,a){var s=32767&t,l=i[s],c=s-l+32768&32767;if(l==s||r!=o.F._hash(e,t-c))return 0;for(var d=0,p=0,h=Math.min(32767,t);c<=h&&0!=--a&&l!=s;){if(0==d||e[t+d]==e[t+d-c]){var u=o.F._howLong(e,t,c);if(u>d){if(p=c,(d=u)>=n)break;c+2<u&&(u=c+2);for(var g=0,f=0;f<u-2;f++){var m=t-c+f+32768&32767,b=m-i[m]+32768&32767;b>g&&(g=b,l=m)}}}c+=(s=l)-(l=i[s])+32768&32767}return d<<16|p},o.F._howLong=function(e,t,i){if(e[t]!=e[t-i]||e[t+1]!=e[t+1-i]||e[t+2]!=e[t+2-i])return 0;var o=t,r=Math.min(e.length,t+258);for(t+=3;t<r&&e[t]==e[t-i];)t++;return t-o},o.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},o.saved=0,o.F._writeBlock=function(e,t,i,r,n,a,s,l,c){var d,p,h,u,g,f,m,b,y,v=o.F.U,w=o.F._putsF,x=o.F._putsE;v.lhst[256]++,p=(d=o.F.getTrees())[0],h=d[1],u=d[2],g=d[3],f=d[4],m=d[5],b=d[6],y=d[7];var _=32+(0==(c+3&7)?0:8-(c+3&7))+(s<<3),A=r+o.F.contSize(v.fltree,v.lhst)+o.F.contSize(v.fdtree,v.dhst),S=r+o.F.contSize(v.ltree,v.lhst)+o.F.contSize(v.dtree,v.dhst);S+=14+3*m+o.F.contSize(v.itree,v.ihst)+(2*v.ihst[16]+3*v.ihst[17]+7*v.ihst[18]);for(var k=0;k<286;k++)v.lhst[k]=0;for(k=0;k<30;k++)v.dhst[k]=0;for(k=0;k<19;k++)v.ihst[k]=0;var O=_<A&&_<S?0:A<S?1:2;if(w(l,c,e),w(l,c+1,O),c+=3,0==O){for(;0!=(7&c);)c++;c=o.F._copyExact(n,a,s,l,c)}else{var I,$;if(1==O&&(I=v.fltree,$=v.fdtree),2==O){o.F.makeCodes(v.ltree,p),o.F.revCodes(v.ltree,p),o.F.makeCodes(v.dtree,h),o.F.revCodes(v.dtree,h),o.F.makeCodes(v.itree,u),o.F.revCodes(v.itree,u),I=v.ltree,$=v.dtree,x(l,c,g-257),x(l,c+=5,f-1),x(l,c+=5,m-4),c+=4;for(var E=0;E<m;E++)x(l,c+3*E,v.itree[1+(v.ordr[E]<<1)]);c+=3*m,c=o.F._codeTiny(b,v.itree,l,c),c=o.F._codeTiny(y,v.itree,l,c)}for(var C=a,T=0;T<i;T+=2){for(var j=t[T],P=j>>>23,R=C+(8388607&j);C<R;)c=o.F._writeLit(n[C++],I,l,c);if(0!=P){var L=t[T+1],N=L>>16,M=L>>8&255,D=255&L;x(l,c=o.F._writeLit(257+M,I,l,c),P-v.of0[M]),c+=v.exb[M],w(l,c=o.F._writeLit(D,$,l,c),N-v.df0[D]),c+=v.dxb[D],C+=P}}c=o.F._writeLit(256,I,l,c)}return c},o.F._copyExact=function(e,t,i,o,r){var n=r>>>3;return o[n]=i,o[n+1]=i>>>8,o[n+2]=255-o[n],o[n+3]=255-o[n+1],n+=4,o.set(new Uint8Array(e.buffer,t,i),n),r+(i+4<<3)},o.F.getTrees=function(){for(var e=o.F.U,t=o.F._hufTree(e.lhst,e.ltree,15),i=o.F._hufTree(e.dhst,e.dtree,15),r=[],n=o.F._lenCodes(e.ltree,r),a=[],s=o.F._lenCodes(e.dtree,a),l=0;l<r.length;l+=2)e.ihst[r[l]]++;for(l=0;l<a.length;l+=2)e.ihst[a[l]]++;for(var c=o.F._hufTree(e.ihst,e.itree,7),d=19;d>4&&0==e.itree[1+(e.ordr[d-1]<<1)];)d--;return[t,i,c,n,s,d,r,a]},o.F.getSecond=function(e){for(var t=[],i=0;i<e.length;i+=2)t.push(e[i+1]);return t},o.F.nonZero=function(e){for(var t="",i=0;i<e.length;i+=2)0!=e[i+1]&&(t+=(i>>1)+",");return t},o.F.contSize=function(e,t){for(var i=0,o=0;o<t.length;o++)i+=t[o]*e[1+(o<<1)];return i},o.F._codeTiny=function(e,t,i,r){for(var n=0;n<e.length;n+=2){var a=e[n],s=e[n+1];r=o.F._writeLit(a,t,i,r);var l=16==a?2:17==a?3:7;a>15&&(o.F._putsE(i,r,s,l),r+=l)}return r},o.F._lenCodes=function(e,t){for(var i=e.length;2!=i&&0==e[i-1];)i-=2;for(var o=0;o<i;o+=2){var r=e[o+1],n=o+3<i?e[o+3]:-1,a=o+5<i?e[o+5]:-1,s=0==o?-1:e[o-1];if(0==r&&n==r&&a==r){for(var l=o+5;l+2<i&&e[l+2]==r;)l+=2;(c=Math.min(l+1-o>>>1,138))<11?t.push(17,c-3):t.push(18,c-11),o+=2*c-2}else if(r==s&&n==r&&a==r){for(l=o+5;l+2<i&&e[l+2]==r;)l+=2;var c=Math.min(l+1-o>>>1,6);t.push(16,c-3),o+=2*c-2}else t.push(r,0)}return i>>>1},o.F._hufTree=function(e,t,i){var r=[],n=e.length,a=t.length,s=0;for(s=0;s<a;s+=2)t[s]=0,t[s+1]=0;for(s=0;s<n;s++)0!=e[s]&&r.push({lit:s,f:e[s]});var l=r.length,c=r.slice(0);if(0==l)return 0;if(1==l){var d=r[0].lit;return c=0==d?1:0,t[1+(d<<1)]=1,t[1+(c<<1)]=1,1}r.sort((function(e,t){return e.f-t.f}));var p=r[0],h=r[1],u=0,g=1,f=2;for(r[0]={lit:-1,f:p.f+h.f,l:p,r:h,d:0};g!=l-1;)p=u!=g&&(f==l||r[u].f<r[f].f)?r[u++]:r[f++],h=u!=g&&(f==l||r[u].f<r[f].f)?r[u++]:r[f++],r[g++]={lit:-1,f:p.f+h.f,l:p,r:h};var m=o.F.setDepth(r[g-1],0);for(m>i&&(o.F.restrictDepth(c,i,m),m=i),s=0;s<l;s++)t[1+(c[s].lit<<1)]=c[s].d;return m},o.F.setDepth=function(e,t){return-1!=e.lit?(e.d=t,t):Math.max(o.F.setDepth(e.l,t+1),o.F.setDepth(e.r,t+1))},o.F.restrictDepth=function(e,t,i){var o=0,r=1<<i-t,n=0;for(e.sort((function(e,t){return t.d==e.d?e.f-t.f:t.d-e.d})),o=0;o<e.length&&e[o].d>t;o++){var a=e[o].d;e[o].d=t,n+=r-(1<<i-a)}for(n>>>=i-t;n>0;)(a=e[o].d)<t?(e[o].d++,n-=1<<t-a-1):o++;for(;o>=0;o--)e[o].d==t&&n<0&&(e[o].d--,n++);0!=n&&console.log("debt left")},o.F._goodIndex=function(e,t){var i=0;return t[16|i]<=e&&(i|=16),t[8|i]<=e&&(i|=8),t[4|i]<=e&&(i|=4),t[2|i]<=e&&(i|=2),t[1|i]<=e&&(i|=1),i},o.F._writeLit=function(e,t,i,r){return o.F._putsF(i,r,t[e<<1]),r+t[1+(e<<1)]},o.F.inflate=function(e,t){var i=Uint8Array;if(3==e[0]&&0==e[1])return t||new i(0);var r=o.F,n=r._bitsF,a=r._bitsE,s=r._decodeTiny,l=r.makeCodes,c=r.codes2map,d=r._get17,p=r.U,h=null==t;h&&(t=new i(e.length>>>2<<3));for(var u,g,f=0,m=0,b=0,y=0,v=0,w=0,x=0,_=0,A=0;0==f;)if(f=n(e,A,1),m=n(e,A+1,2),A+=3,0!=m){if(h&&(t=o.F._check(t,_+(1<<17))),1==m&&(u=p.flmap,g=p.fdmap,w=511,x=31),2==m){b=a(e,A,5)+257,y=a(e,A+5,5)+1,v=a(e,A+10,4)+4,A+=14;for(var S=0;S<38;S+=2)p.itree[S]=0,p.itree[S+1]=0;var k=1;for(S=0;S<v;S++){var O=a(e,A+3*S,3);p.itree[1+(p.ordr[S]<<1)]=O,O>k&&(k=O)}A+=3*v,l(p.itree,k),c(p.itree,k,p.imap),u=p.lmap,g=p.dmap,A=s(p.imap,(1<<k)-1,b+y,e,A,p.ttree);var I=r._copyOut(p.ttree,0,b,p.ltree);w=(1<<I)-1;var $=r._copyOut(p.ttree,b,y,p.dtree);x=(1<<$)-1,l(p.ltree,I),c(p.ltree,I,u),l(p.dtree,$),c(p.dtree,$,g)}for(;;){var E=u[d(e,A)&w];A+=15&E;var C=E>>>4;if(C>>>8==0)t[_++]=C;else{if(256==C)break;var T=_+C-254;if(C>264){var j=p.ldef[C-257];T=_+(j>>>3)+a(e,A,7&j),A+=7&j}var P=g[d(e,A)&x];A+=15&P;var R=P>>>4,L=p.ddef[R],N=(L>>>4)+n(e,A,15&L);for(A+=15&L,h&&(t=o.F._check(t,_+(1<<17)));_<T;)t[_]=t[_++-N],t[_]=t[_++-N],t[_]=t[_++-N],t[_]=t[_++-N];_=T}}}else{0!=(7&A)&&(A+=8-(7&A));var M=4+(A>>>3),D=e[M-4]|e[M-3]<<8;h&&(t=o.F._check(t,_+D)),t.set(new i(e.buffer,e.byteOffset+M,D),_),A=M+D<<3,_+=D}return t.length==_?t:t.slice(0,_)},o.F._check=function(e,t){var i=e.length;if(t<=i)return e;var o=new Uint8Array(Math.max(i<<1,t));return o.set(e,0),o},o.F._decodeTiny=function(e,t,i,r,n,a){for(var s=o.F._bitsE,l=o.F._get17,c=0;c<i;){var d=e[l(r,n)&t];n+=15&d;var p=d>>>4;if(p<=15)a[c]=p,c++;else{var h=0,u=0;16==p?(u=3+s(r,n,2),n+=2,h=a[c-1]):17==p?(u=3+s(r,n,3),n+=3):18==p&&(u=11+s(r,n,7),n+=7);for(var g=c+u;c<g;)a[c]=h,c++}}return n},o.F._copyOut=function(e,t,i,o){for(var r=0,n=0,a=o.length>>>1;n<i;){var s=e[n+t];o[n<<1]=0,o[1+(n<<1)]=s,s>r&&(r=s),n++}for(;n<a;)o[n<<1]=0,o[1+(n<<1)]=0,n++;return r},o.F.makeCodes=function(e,t){for(var i,r,n,a,s=o.F.U,l=e.length,c=s.bl_count,d=0;d<=t;d++)c[d]=0;for(d=1;d<l;d+=2)c[e[d]]++;var p=s.next_code;for(i=0,c[0]=0,r=1;r<=t;r++)i=i+c[r-1]<<1,p[r]=i;for(n=0;n<l;n+=2)0!=(a=e[n+1])&&(e[n]=p[a],p[a]++)},o.F.codes2map=function(e,t,i){for(var r=e.length,n=o.F.U.rev15,a=0;a<r;a+=2)if(0!=e[a+1])for(var s=a>>1,l=e[a+1],c=s<<4|l,d=t-l,p=e[a]<<d,h=p+(1<<d);p!=h;)i[n[p]>>>15-t]=c,p++},o.F.revCodes=function(e,t){for(var i=o.F.U.rev15,r=15-t,n=0;n<e.length;n+=2){var a=e[n]<<t-e[n+1];e[n]=i[a]>>>r}},o.F._putsE=function(e,t,i){i<<=7&t;var o=t>>>3;e[o]|=i,e[o+1]|=i>>>8},o.F._putsF=function(e,t,i){i<<=7&t;var o=t>>>3;e[o]|=i,e[o+1]|=i>>>8,e[o+2]|=i>>>16},o.F._bitsE=function(e,t,i){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<i)-1},o.F._bitsF=function(e,t,i){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<i)-1},o.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},o.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},o.F.U=(t=Uint16Array,i=Uint32Array,{next_code:new t(16),bl_count:new t(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new t(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new i(32),flmap:new t(512),fltree:[],fdmap:new t(32),fdtree:[],lmap:new t(32768),ltree:[],ttree:[],dmap:new t(32768),dtree:[],imap:new t(512),itree:[],rev15:new t(32768),lhst:new i(286),dhst:new i(30),ihst:new i(19),lits:new i(15e3),strt:new t(65536),prev:new t(32768)}),function(){for(var e=o.F.U,t=0;t<32768;t++){var i=t;i=(4278255360&(i=(4042322160&(i=(3435973836&(i=(2863311530&i)>>>1|(1431655765&i)<<1))>>>2|(858993459&i)<<2))>>>4|(252645135&i)<<4))>>>8|(16711935&i)<<8,e.rev15[t]=(i>>>16|i<<16)>>>17}function r(e,t,i){for(;0!=t--;)e.push(0,i)}for(t=0;t<32;t++)e.ldef[t]=e.of0[t]<<3|e.exb[t],e.ddef[t]=e.df0[t]<<4|e.dxb[t];r(e.fltree,144,8),r(e.fltree,112,9),r(e.fltree,24,7),r(e.fltree,8,8),o.F.makeCodes(e.fltree,9),o.F.codes2map(e.fltree,9,e.flmap),o.F.revCodes(e.fltree,9),r(e.fdtree,32,5),o.F.makeCodes(e.fdtree,5),o.F.codes2map(e.fdtree,5,e.fdmap),o.F.revCodes(e.fdtree,5),r(e.itree,19,0),r(e.ltree,286,0),r(e.dtree,30,0),r(e.ttree,320,0)}()})),UZIP=Object.freeze(_mergeNamespaces({__proto__:null,default:UZIP_1},[UZIP_1])),UPNG={},N,W,H;UPNG.toRGBA8=function(e){var t=e.width,i=e.height;if(null==e.tabs.acTL)return[UPNG.toRGBA8.decodeImage(e.data,t,i,e).buffer];var o=[];null==e.frames[0].data&&(e.frames[0].data=e.data);for(var r=t*i*4,n=new Uint8Array(r),a=new Uint8Array(r),s=new Uint8Array(r),l=0;l<e.frames.length;l++){var c=e.frames[l],d=c.rect.x,p=c.rect.y,h=c.rect.width,u=c.rect.height,g=UPNG.toRGBA8.decodeImage(c.data,h,u,e);if(0!=l)for(var f=0;f<r;f++)s[f]=n[f];if(0==c.blend?UPNG._copyTile(g,h,u,n,t,i,d,p,0):1==c.blend&&UPNG._copyTile(g,h,u,n,t,i,d,p,1),o.push(n.buffer.slice(0)),0==c.dispose);else if(1==c.dispose)UPNG._copyTile(a,h,u,n,t,i,d,p,0);else if(2==c.dispose)for(f=0;f<r;f++)n[f]=s[f]}return o},UPNG.toRGBA8.decodeImage=function(e,t,i,o){var r=t*i,n=UPNG.decode._getBPP(o),a=Math.ceil(t*n/8),s=new Uint8Array(4*r),l=new Uint32Array(s.buffer),c=o.ctype,d=o.depth,p=UPNG._bin.readUshort;if(6==c){var h=r<<2;if(8==d)for(var u=0;u<h;u+=4)s[u]=e[u],s[u+1]=e[u+1],s[u+2]=e[u+2],s[u+3]=e[u+3];if(16==d)for(u=0;u<h;u++)s[u]=e[u<<1]}else if(2==c){var g=o.tabs.tRNS;if(null==g){if(8==d)for(u=0;u<r;u++){var f=3*u;l[u]=255<<24|e[f+2]<<16|e[f+1]<<8|e[f]}if(16==d)for(u=0;u<r;u++)f=6*u,l[u]=255<<24|e[f+4]<<16|e[f+2]<<8|e[f]}else{var m=g[0],b=g[1],y=g[2];if(8==d)for(u=0;u<r;u++){var v=u<<2;f=3*u,l[u]=255<<24|e[f+2]<<16|e[f+1]<<8|e[f],e[f]==m&&e[f+1]==b&&e[f+2]==y&&(s[v+3]=0)}if(16==d)for(u=0;u<r;u++)v=u<<2,f=6*u,l[u]=255<<24|e[f+4]<<16|e[f+2]<<8|e[f],p(e,f)==m&&p(e,f+2)==b&&p(e,f+4)==y&&(s[v+3]=0)}}else if(3==c){var w=o.tabs.PLTE,x=o.tabs.tRNS,_=x?x.length:0;if(1==d)for(var A=0;A<i;A++){var S=A*a,k=A*t;for(u=0;u<t;u++){v=k+u<<2;var O=3*(I=e[S+(u>>3)]>>7-((7&u)<<0)&1);s[v]=w[O],s[v+1]=w[O+1],s[v+2]=w[O+2],s[v+3]=I<_?x[I]:255}}if(2==d)for(A=0;A<i;A++)for(S=A*a,k=A*t,u=0;u<t;u++)v=k+u<<2,O=3*(I=e[S+(u>>2)]>>6-((3&u)<<1)&3),s[v]=w[O],s[v+1]=w[O+1],s[v+2]=w[O+2],s[v+3]=I<_?x[I]:255;if(4==d)for(A=0;A<i;A++)for(S=A*a,k=A*t,u=0;u<t;u++)v=k+u<<2,O=3*(I=e[S+(u>>1)]>>4-((1&u)<<2)&15),s[v]=w[O],s[v+1]=w[O+1],s[v+2]=w[O+2],s[v+3]=I<_?x[I]:255;if(8==d)for(u=0;u<r;u++){var I;v=u<<2,O=3*(I=e[u]),s[v]=w[O],s[v+1]=w[O+1],s[v+2]=w[O+2],s[v+3]=I<_?x[I]:255}}else if(4==c){if(8==d)for(u=0;u<r;u++){v=u<<2;var $=e[E=u<<1];s[v]=$,s[v+1]=$,s[v+2]=$,s[v+3]=e[E+1]}if(16==d)for(u=0;u<r;u++){var E;v=u<<2,$=e[E=u<<2],s[v]=$,s[v+1]=$,s[v+2]=$,s[v+3]=e[E+2]}}else if(0==c)for(m=o.tabs.tRNS?o.tabs.tRNS:-1,A=0;A<i;A++){var C=A*a,T=A*t;if(1==d)for(var j=0;j<t;j++){var P=($=255*(e[C+(j>>>3)]>>>7-(7&j)&1))==255*m?0:255;l[T+j]=P<<24|$<<16|$<<8|$}else if(2==d)for(j=0;j<t;j++)P=($=85*(e[C+(j>>>2)]>>>6-((3&j)<<1)&3))==85*m?0:255,l[T+j]=P<<24|$<<16|$<<8|$;else if(4==d)for(j=0;j<t;j++)P=($=17*(e[C+(j>>>1)]>>>4-((1&j)<<2)&15))==17*m?0:255,l[T+j]=P<<24|$<<16|$<<8|$;else if(8==d)for(j=0;j<t;j++)P=($=e[C+j])==m?0:255,l[T+j]=P<<24|$<<16|$<<8|$;else if(16==d)for(j=0;j<t;j++)$=e[C+(j<<1)],P=p(e,C+(j<<u))==m?0:255,l[T+j]=P<<24|$<<16|$<<8|$}return s},UPNG.decode=function(e){for(var t,i=new Uint8Array(e),o=8,r=UPNG._bin,n=r.readUshort,a=r.readUint,s={tabs:{},frames:[]},l=new Uint8Array(i.length),c=0,d=0,p=[137,80,78,71,13,10,26,10],h=0;h<8;h++)if(i[h]!=p[h])throw"The input is not a PNG file!";for(;o<i.length;){var u=r.readUint(i,o);o+=4;var g=r.readASCII(i,o,4);if(o+=4,"IHDR"==g)UPNG.decode._IHDR(i,o,s);else if("CgBI"==g)s.tabs[g]=i.slice(o,o+4);else if("IDAT"==g){for(h=0;h<u;h++)l[c+h]=i[o+h];c+=u}else if("acTL"==g)s.tabs[g]={num_frames:a(i,o),num_plays:a(i,o+4)},t=new Uint8Array(i.length);else if("fcTL"==g){var f;0!=d&&((f=s.frames[s.frames.length-1]).data=UPNG.decode._decompress(s,t.slice(0,d),f.rect.width,f.rect.height),d=0);var m={x:a(i,o+12),y:a(i,o+16),width:a(i,o+4),height:a(i,o+8)},b=n(i,o+22);b=n(i,o+20)/(0==b?100:b);var y={rect:m,delay:Math.round(1e3*b),dispose:i[o+24],blend:i[o+25]};s.frames.push(y)}else if("fdAT"==g){for(h=0;h<u-4;h++)t[d+h]=i[o+h+4];d+=u-4}else if("pHYs"==g)s.tabs[g]=[r.readUint(i,o),r.readUint(i,o+4),i[o+8]];else if("cHRM"==g)for(s.tabs[g]=[],h=0;h<8;h++)s.tabs[g].push(r.readUint(i,o+4*h));else if("tEXt"==g||"zTXt"==g){null==s.tabs[g]&&(s.tabs[g]={});var v=r.nextZero(i,o),w=r.readASCII(i,o,v-o),x=o+u-v-1;if("tEXt"==g)S=r.readASCII(i,v+1,x);else{var _=UPNG.decode._inflate(i.slice(v+2,v+2+x));S=r.readUTF8(_,0,_.length)}s.tabs[g][w]=S}else if("iTXt"==g){null==s.tabs[g]&&(s.tabs[g]={}),v=0;var A=o;v=r.nextZero(i,A),w=r.readASCII(i,A,v-A);var S,k=i[A=v+1];i[A+1],A+=2,v=r.nextZero(i,A),r.readASCII(i,A,v-A),A=v+1,v=r.nextZero(i,A),r.readUTF8(i,A,v-A),x=u-((A=v+1)-o),0==k?S=r.readUTF8(i,A,x):(_=UPNG.decode._inflate(i.slice(A,A+x)),S=r.readUTF8(_,0,_.length)),s.tabs[g][w]=S}else if("PLTE"==g)s.tabs[g]=r.readBytes(i,o,u);else if("hIST"==g){var O=s.tabs.PLTE.length/3;for(s.tabs[g]=[],h=0;h<O;h++)s.tabs[g].push(n(i,o+2*h))}else if("tRNS"==g)3==s.ctype?s.tabs[g]=r.readBytes(i,o,u):0==s.ctype?s.tabs[g]=n(i,o):2==s.ctype&&(s.tabs[g]=[n(i,o),n(i,o+2),n(i,o+4)]);else if("gAMA"==g)s.tabs[g]=r.readUint(i,o)/1e5;else if("sRGB"==g)s.tabs[g]=i[o];else if("bKGD"==g)0==s.ctype||4==s.ctype?s.tabs[g]=[n(i,o)]:2==s.ctype||6==s.ctype?s.tabs[g]=[n(i,o),n(i,o+2),n(i,o+4)]:3==s.ctype&&(s.tabs[g]=i[o]);else if("IEND"==g)break;o+=u,r.readUint(i,o),o+=4}return 0!=d&&((f=s.frames[s.frames.length-1]).data=UPNG.decode._decompress(s,t.slice(0,d),f.rect.width,f.rect.height),d=0),s.data=UPNG.decode._decompress(s,l,s.width,s.height),delete s.compress,delete s.interlace,delete s.filter,s},UPNG.decode._decompress=function(e,t,i,o){var r=UPNG.decode._getBPP(e),n=Math.ceil(i*r/8),a=new Uint8Array((n+1+e.interlace)*o);return t=e.tabs.CgBI?UPNG.inflateRaw(t,a):UPNG.decode._inflate(t,a),0==e.interlace?t=UPNG.decode._filterZero(t,e,0,i,o):1==e.interlace&&(t=UPNG.decode._readInterlace(t,e)),t},UPNG.decode._inflate=function(e,t){return UPNG.inflateRaw(new Uint8Array(e.buffer,2,e.length-6),t)},UPNG.inflateRaw=(H={},H.H={},H.H.N=function(e,t){var i,o,r=Uint8Array,n=0,a=0,s=0,l=0,c=0,d=0,p=0,h=0,u=0;if(3==e[0]&&0==e[1])return t||new r(0);var g=H.H,f=g.b,m=g.e,b=g.R,y=g.n,v=g.A,w=g.Z,x=g.m,_=null==t;for(_&&(t=new r(e.length>>>2<<5));0==n;)if(n=f(e,u,1),a=f(e,u+1,2),u+=3,0!=a){if(_&&(t=H.H.W(t,h+(1<<17))),1==a&&(i=x.J,o=x.h,d=511,p=31),2==a){s=m(e,u,5)+257,l=m(e,u+5,5)+1,c=m(e,u+10,4)+4,u+=14;for(var A=1,S=0;S<38;S+=2)x.Q[S]=0,x.Q[S+1]=0;for(S=0;S<c;S++){var k=m(e,u+3*S,3);x.Q[1+(x.X[S]<<1)]=k,k>A&&(A=k)}u+=3*c,y(x.Q,A),v(x.Q,A,x.u),i=x.w,o=x.d,u=b(x.u,(1<<A)-1,s+l,e,u,x.v);var O=g.V(x.v,0,s,x.C);d=(1<<O)-1;var I=g.V(x.v,s,l,x.D);p=(1<<I)-1,y(x.C,O),v(x.C,O,i),y(x.D,I),v(x.D,I,o)}for(;;){var $=i[w(e,u)&d];u+=15&$;var E=$>>>4;if(E>>>8==0)t[h++]=E;else{if(256==E)break;var C=h+E-254;if(E>264){var T=x.q[E-257];C=h+(T>>>3)+m(e,u,7&T),u+=7&T}var j=o[w(e,u)&p];u+=15&j;var P=j>>>4,R=x.c[P],L=(R>>>4)+f(e,u,15&R);for(u+=15&R;h<C;)t[h]=t[h++-L],t[h]=t[h++-L],t[h]=t[h++-L],t[h]=t[h++-L];h=C}}}else{0!=(7&u)&&(u+=8-(7&u));var N=4+(u>>>3),M=e[N-4]|e[N-3]<<8;_&&(t=H.H.W(t,h+M)),t.set(new r(e.buffer,e.byteOffset+N,M),h),u=N+M<<3,h+=M}return t.length==h?t:t.slice(0,h)},H.H.W=function(e,t){var i=e.length;if(t<=i)return e;var o=new Uint8Array(i<<1);return o.set(e,0),o},H.H.R=function(e,t,i,o,r,n){for(var a=H.H.e,s=H.H.Z,l=0;l<i;){var c=e[s(o,r)&t];r+=15&c;var d=c>>>4;if(d<=15)n[l]=d,l++;else{var p=0,h=0;16==d?(h=3+a(o,r,2),r+=2,p=n[l-1]):17==d?(h=3+a(o,r,3),r+=3):18==d&&(h=11+a(o,r,7),r+=7);for(var u=l+h;l<u;)n[l]=p,l++}}return r},H.H.V=function(e,t,i,o){for(var r=0,n=0,a=o.length>>>1;n<i;){var s=e[n+t];o[n<<1]=0,o[1+(n<<1)]=s,s>r&&(r=s),n++}for(;n<a;)o[n<<1]=0,o[1+(n<<1)]=0,n++;return r},H.H.n=function(e,t){for(var i,o,r,n,a=H.H.m,s=e.length,l=a.j,c=0;c<=t;c++)l[c]=0;for(c=1;c<s;c+=2)l[e[c]]++;var d=a.K;for(i=0,l[0]=0,o=1;o<=t;o++)i=i+l[o-1]<<1,d[o]=i;for(r=0;r<s;r+=2)0!=(n=e[r+1])&&(e[r]=d[n],d[n]++)},H.H.A=function(e,t,i){for(var o=e.length,r=H.H.m.r,n=0;n<o;n+=2)if(0!=e[n+1])for(var a=n>>1,s=e[n+1],l=a<<4|s,c=t-s,d=e[n]<<c,p=d+(1<<c);d!=p;)i[r[d]>>>15-t]=l,d++},H.H.l=function(e,t){for(var i=H.H.m.r,o=15-t,r=0;r<e.length;r+=2){var n=e[r]<<t-e[r+1];e[r]=i[n]>>>o}},H.H.M=function(e,t,i){i<<=7&t;var o=t>>>3;e[o]|=i,e[o+1]|=i>>>8},H.H.I=function(e,t,i){i<<=7&t;var o=t>>>3;e[o]|=i,e[o+1]|=i>>>8,e[o+2]|=i>>>16},H.H.e=function(e,t,i){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<i)-1},H.H.b=function(e,t,i){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<i)-1},H.H.Z=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},H.H.i=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},H.H.m=(N=Uint16Array,W=Uint32Array,{K:new N(16),j:new N(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new N(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new W(32),J:new N(512),_:[],h:new N(32),$:[],w:new N(32768),C:[],v:[],d:new N(32768),D:[],u:new N(512),Q:[],r:new N(32768),s:new W(286),Y:new W(30),a:new W(19),t:new W(15e3),k:new N(65536),g:new N(32768)}),function(){for(var e=H.H.m,t=0;t<32768;t++){var i=t;i=(4278255360&(i=(4042322160&(i=(3435973836&(i=(2863311530&i)>>>1|(1431655765&i)<<1))>>>2|(858993459&i)<<2))>>>4|(252645135&i)<<4))>>>8|(16711935&i)<<8,e.r[t]=(i>>>16|i<<16)>>>17}function o(e,t,i){for(;0!=t--;)e.push(0,i)}for(t=0;t<32;t++)e.q[t]=e.S[t]<<3|e.T[t],e.c[t]=e.p[t]<<4|e.z[t];o(e._,144,8),o(e._,112,9),o(e._,24,7),o(e._,8,8),H.H.n(e._,9),H.H.A(e._,9,e.J),H.H.l(e._,9),o(e.$,32,5),H.H.n(e.$,5),H.H.A(e.$,5,e.h),H.H.l(e.$,5),o(e.Q,19,0),o(e.C,286,0),o(e.D,30,0),o(e.v,320,0)}(),H.H.N),UPNG.decode._readInterlace=function(e,t){for(var i=t.width,o=t.height,r=UPNG.decode._getBPP(t),n=r>>3,a=Math.ceil(i*r/8),s=new Uint8Array(o*a),l=0,c=[0,0,4,0,2,0,1],d=[0,4,0,2,0,1,0],p=[8,8,8,4,4,2,2],h=[8,8,4,4,2,2,1],u=0;u<7;){for(var g=p[u],f=h[u],m=0,b=0,y=c[u];y<o;)y+=g,b++;for(var v=d[u];v<i;)v+=f,m++;var w=Math.ceil(m*r/8);UPNG.decode._filterZero(e,t,l,m,b);for(var x=0,_=c[u];_<o;){for(var A=d[u],S=l+x*w<<3;A<i;){var k;if(1==r&&(k=(k=e[S>>3])>>7-(7&S)&1,s[_*a+(A>>3)]|=k<<7-((7&A)<<0)),2==r&&(k=(k=e[S>>3])>>6-(7&S)&3,s[_*a+(A>>2)]|=k<<6-((3&A)<<1)),4==r&&(k=(k=e[S>>3])>>4-(7&S)&15,s[_*a+(A>>1)]|=k<<4-((1&A)<<2)),r>=8)for(var O=_*a+A*n,I=0;I<n;I++)s[O+I]=e[(S>>3)+I];S+=r,A+=f}x++,_+=g}m*b!=0&&(l+=b*(1+w)),u+=1}return s},UPNG.decode._getBPP=function(e){return[1,null,3,1,2,null,4][e.ctype]*e.depth},UPNG.decode._filterZero=function(e,t,i,o,r){var n=UPNG.decode._getBPP(t),a=Math.ceil(o*n/8),s=UPNG.decode._paeth;n=Math.ceil(n/8);var l=0,c=1,d=e[i],p=0;if(d>1&&(e[i]=[0,0,1][d-2]),3==d)for(p=n;p<a;p++)e[p+1]=e[p+1]+(e[p+1-n]>>>1)&255;for(var h=0;h<r;h++)if(p=0,0==(d=e[(c=(l=i+h*a)+h+1)-1]))for(;p<a;p++)e[l+p]=e[c+p];else if(1==d){for(;p<n;p++)e[l+p]=e[c+p];for(;p<a;p++)e[l+p]=e[c+p]+e[l+p-n]}else if(2==d)for(;p<a;p++)e[l+p]=e[c+p]+e[l+p-a];else if(3==d){for(;p<n;p++)e[l+p]=e[c+p]+(e[l+p-a]>>>1);for(;p<a;p++)e[l+p]=e[c+p]+(e[l+p-a]+e[l+p-n]>>>1)}else{for(;p<n;p++)e[l+p]=e[c+p]+s(0,e[l+p-a],0);for(;p<a;p++)e[l+p]=e[c+p]+s(e[l+p-n],e[l+p-a],e[l+p-n-a])}return e},UPNG.decode._paeth=function(e,t,i){var o=e+t-i,r=o-e,n=o-t,a=o-i;return r*r<=n*n&&r*r<=a*a?e:n*n<=a*a?t:i},UPNG.decode._IHDR=function(e,t,i){var o=UPNG._bin;i.width=o.readUint(e,t),t+=4,i.height=o.readUint(e,t),t+=4,i.depth=e[t],t++,i.ctype=e[t],t++,i.compress=e[t],t++,i.filter=e[t],t++,i.interlace=e[t],t++},UPNG._bin={nextZero:function(e,t){for(;0!=e[t];)t++;return t},readUshort:function(e,t){return e[t]<<8|e[t+1]},writeUshort:function(e,t,i){e[t]=i>>8&255,e[t+1]=255&i},readUint:function(e,t){return 16777216*e[t]+(e[t+1]<<16|e[t+2]<<8|e[t+3])},writeUint:function(e,t,i){e[t]=i>>24&255,e[t+1]=i>>16&255,e[t+2]=i>>8&255,e[t+3]=255&i},readASCII:function(e,t,i){for(var o="",r=0;r<i;r++)o+=String.fromCharCode(e[t+r]);return o},writeASCII:function(e,t,i){for(var o=0;o<i.length;o++)e[t+o]=i.charCodeAt(o)},readBytes:function(e,t,i){for(var o=[],r=0;r<i;r++)o.push(e[t+r]);return o},pad:function(e){return e.length<2?"0".concat(e):e},readUTF8:function(e,t,i){for(var o,r="",n=0;n<i;n++)r+="%".concat(UPNG._bin.pad(e[t+n].toString(16)));try{o=decodeURIComponent(r)}catch(o){return UPNG._bin.readASCII(e,t,i)}return o}},UPNG._copyTile=function(e,t,i,o,r,n,a,s,l){for(var c=Math.min(t,r),d=Math.min(i,n),p=0,h=0,u=0;u<d;u++)for(var g=0;g<c;g++)if(a>=0&&s>=0?(p=u*t+g<<2,h=(s+u)*r+a+g<<2):(p=(-s+u)*t-a+g<<2,h=u*r+g<<2),0==l)o[h]=e[p],o[h+1]=e[p+1],o[h+2]=e[p+2],o[h+3]=e[p+3];else if(1==l){var f=e[p+3]*(1/255),m=e[p]*f,b=e[p+1]*f,y=e[p+2]*f,v=o[h+3]*(1/255),w=o[h]*v,x=o[h+1]*v,_=o[h+2]*v,A=1-f,S=f+v*A,k=0==S?0:1/S;o[h+3]=255*S,o[h+0]=(m+w*A)*k,o[h+1]=(b+x*A)*k,o[h+2]=(y+_*A)*k}else if(2==l)f=e[p+3],m=e[p],b=e[p+1],y=e[p+2],v=o[h+3],w=o[h],x=o[h+1],_=o[h+2],f==v&&m==w&&b==x&&y==_?(o[h]=0,o[h+1]=0,o[h+2]=0,o[h+3]=0):(o[h]=m,o[h+1]=b,o[h+2]=y,o[h+3]=f);else if(3==l){if(f=e[p+3],m=e[p],b=e[p+1],y=e[p+2],v=o[h+3],w=o[h],x=o[h+1],_=o[h+2],f==v&&m==w&&b==x&&y==_)continue;if(f<220&&v>20)return!1}return!0},UPNG.encode=function(e,t,i,o,r,n,a){null==o&&(o=0),null==a&&(a=!1);var s=UPNG.encode.compress(e,t,i,o,[!1,!1,!1,0,a]);return UPNG.encode.compressPNG(s,-1),UPNG.encode._main(s,t,i,r,n)},UPNG.encodeLL=function(e,t,i,o,r,n,a,s){for(var l={ctype:0+(1==o?0:2)+(0==r?0:4),depth:n,frames:[]},c=(o+r)*n,d=c*t,p=0;p<e.length;p++)l.frames.push({rect:{x:0,y:0,width:t,height:i},img:new Uint8Array(e[p]),blend:0,dispose:1,bpp:Math.ceil(c/8),bpl:Math.ceil(d/8)});return UPNG.encode.compressPNG(l,0,!0),UPNG.encode._main(l,t,i,a,s)},UPNG.encode._main=function(e,t,i,o,r){null==r&&(r={});var n=UPNG.crc.crc,a=UPNG._bin.writeUint,s=UPNG._bin.writeUshort,l=UPNG._bin.writeASCII,c=8,d=e.frames.length>1,p=!1,h=33+(d?20:0);if(null!=r.sRGB&&(h+=13),null!=r.pHYs&&(h+=21),3==e.ctype){for(var u=e.plte.length,g=0;g<u;g++)e.plte[g]>>>24!=255&&(p=!0);h+=8+3*u+4+(p?8+1*u+4:0)}for(var f=0;f<e.frames.length;f++)d&&(h+=38),h+=(S=e.frames[f]).cimg.length+12,0!=f&&(h+=4);h+=12;var m=new Uint8Array(h),b=[137,80,78,71,13,10,26,10];for(g=0;g<8;g++)m[g]=b[g];if(a(m,c,13),l(m,c+=4,"IHDR"),a(m,c+=4,t),a(m,c+=4,i),m[c+=4]=e.depth,m[++c]=e.ctype,m[++c]=0,m[++c]=0,m[++c]=0,a(m,++c,n(m,c-17,17)),c+=4,null!=r.sRGB&&(a(m,c,1),l(m,c+=4,"sRGB"),m[c+=4]=r.sRGB,a(m,++c,n(m,c-5,5)),c+=4),null!=r.pHYs&&(a(m,c,9),l(m,c+=4,"pHYs"),a(m,c+=4,r.pHYs[0]),a(m,c+=4,r.pHYs[1]),m[c+=4]=r.pHYs[2],a(m,++c,n(m,c-13,13)),c+=4),d&&(a(m,c,8),l(m,c+=4,"acTL"),a(m,c+=4,e.frames.length),a(m,c+=4,null!=r.loop?r.loop:0),a(m,c+=4,n(m,c-12,12)),c+=4),3==e.ctype){for(a(m,c,3*(u=e.plte.length)),l(m,c+=4,"PLTE"),c+=4,g=0;g<u;g++){var y=3*g,v=e.plte[g],w=255&v,x=v>>>8&255,_=v>>>16&255;m[c+y+0]=w,m[c+y+1]=x,m[c+y+2]=_}if(a(m,c+=3*u,n(m,c-3*u-4,3*u+4)),c+=4,p){for(a(m,c,u),l(m,c+=4,"tRNS"),c+=4,g=0;g<u;g++)m[c+g]=e.plte[g]>>>24&255;a(m,c+=u,n(m,c-u-4,u+4)),c+=4}}var A=0;for(f=0;f<e.frames.length;f++){var S=e.frames[f];d&&(a(m,c,26),l(m,c+=4,"fcTL"),a(m,c+=4,A++),a(m,c+=4,S.rect.width),a(m,c+=4,S.rect.height),a(m,c+=4,S.rect.x),a(m,c+=4,S.rect.y),s(m,c+=4,o[f]),s(m,c+=2,1e3),m[c+=2]=S.dispose,m[++c]=S.blend,a(m,++c,n(m,c-30,30)),c+=4);var k=S.cimg;a(m,c,(u=k.length)+(0==f?0:4));var O=c+=4;l(m,c,0==f?"IDAT":"fdAT"),c+=4,0!=f&&(a(m,c,A++),c+=4),m.set(k,c),a(m,c+=u,n(m,O,c-O)),c+=4}return a(m,c,0),l(m,c+=4,"IEND"),a(m,c+=4,n(m,c-4,4)),c+=4,m.buffer},UPNG.encode.compressPNG=function(e,t,i){for(var o=0;o<e.frames.length;o++){var r=e.frames[o];r.rect.width;var n=r.rect.height,a=new Uint8Array(n*r.bpl+n);r.cimg=UPNG.encode._filterZero(r.img,n,r.bpp,r.bpl,a,t,i)}},UPNG.encode.compress=function(e,t,i,o,r){for(var n=r[0],a=r[1],s=r[2],l=r[3],c=r[4],d=6,p=8,h=255,u=0;u<e.length;u++)for(var g=new Uint8Array(e[u]),f=g.length,m=0;m<f;m+=4)h&=g[m+3];var b=255!=h,y=UPNG.encode.framize(e,t,i,n,a,s),v={},w=[],x=[];if(0!=o){var _=[];for(m=0;m<y.length;m++)_.push(y[m].img.buffer);var A=UPNG.encode.concatRGBA(_),S=UPNG.quantize(A,o),k=0,O=new Uint8Array(S.abuf);for(m=0;m<y.length;m++){var I=(G=y[m].img).length;for(x.push(new Uint8Array(S.inds.buffer,k>>2,I>>2)),u=0;u<I;u+=4)G[u]=O[k+u],G[u+1]=O[k+u+1],G[u+2]=O[k+u+2],G[u+3]=O[k+u+3];k+=I}for(m=0;m<S.plte.length;m++)w.push(S.plte[m].est.rgba)}else for(u=0;u<y.length;u++){var $=y[u],E=new Uint32Array($.img.buffer),C=$.rect.width,T=(f=E.length,new Uint8Array(f));for(x.push(T),m=0;m<f;m++){var j=E[m];if(0!=m&&j==E[m-1])T[m]=T[m-1];else if(m>C&&j==E[m-C])T[m]=T[m-C];else{var P=v[j];if(null==P&&(v[j]=P=w.length,w.push(j),w.length>=300))break;T[m]=P}}}var R=w.length;for(R<=256&&0==c&&(p=R<=2?1:R<=4?2:R<=16?4:8,p=Math.max(p,l)),u=0;u<y.length;u++){($=y[u]).rect.x,$.rect.y,C=$.rect.width;var L=$.rect.height,N=$.img;new Uint32Array(N.buffer);var M=4*C,D=4;if(R<=256&&0==c){M=Math.ceil(p*C/8);for(var U=new Uint8Array(M*L),B=x[u],F=0;F<L;F++){m=F*M;var z=F*C;if(8==p)for(var H=0;H<C;H++)U[m+H]=B[z+H];else if(4==p)for(H=0;H<C;H++)U[m+(H>>1)]|=B[z+H]<<4-4*(1&H);else if(2==p)for(H=0;H<C;H++)U[m+(H>>2)]|=B[z+H]<<6-2*(3&H);else if(1==p)for(H=0;H<C;H++)U[m+(H>>3)]|=B[z+H]<<7-1*(7&H)}N=U,d=3,D=1}else if(0==b&&1==y.length){U=new Uint8Array(C*L*3);var W=C*L;for(m=0;m<W;m++){var G,V=4*m;U[G=3*m]=N[V],U[G+1]=N[V+1],U[G+2]=N[V+2]}N=U,d=2,D=3,M=3*C}$.img=N,$.bpl=M,$.bpp=D}return{ctype:d,depth:p,plte:w,frames:y}},UPNG.encode.framize=function(e,t,i,o,r,n){for(var a=[],s=0;s<e.length;s++){var l,c=new Uint8Array(e[s]),d=new Uint32Array(c.buffer),p=0,h=0,u=t,g=i,f=o?1:0;if(0!=s){for(var m=n||o||1==s||0!=a[s-2].dispose?1:2,b=0,y=1e9,v=0;v<m;v++){for(var w=new Uint8Array(e[s-1-v]),x=new Uint32Array(e[s-1-v]),_=t,A=i,S=-1,k=-1,O=0;O<i;O++)for(var I=0;I<t;I++)d[R=O*t+I]!=x[R]&&(I<_&&(_=I),I>S&&(S=I),O<A&&(A=O),O>k&&(k=O));-1==S&&(_=A=S=k=0),r&&(1==(1&_)&&_--,1==(1&A)&&A--);var $=(S-_+1)*(k-A+1);$<y&&(y=$,b=v,p=_,h=A,u=S-_+1,g=k-A+1)}w=new Uint8Array(e[s-1-b]),1==b&&(a[s-1].dispose=2),l=new Uint8Array(u*g*4),UPNG._copyTile(w,t,i,l,u,g,-p,-h,0),1==(f=UPNG._copyTile(c,t,i,l,u,g,-p,-h,3)?1:0)?UPNG.encode._prepareDiff(c,t,i,l,{x:p,y:h,width:u,height:g}):UPNG._copyTile(c,t,i,l,u,g,-p,-h,0)}else l=c.slice(0);a.push({rect:{x:p,y:h,width:u,height:g},img:l,blend:f,dispose:0})}if(o)for(s=0;s<a.length;s++)if(1!=(L=a[s]).blend){var E=L.rect,C=a[s-1].rect,T=Math.min(E.x,C.x),j=Math.min(E.y,C.y),P={x:T,y:j,width:Math.max(E.x+E.width,C.x+C.width)-T,height:Math.max(E.y+E.height,C.y+C.height)-j};a[s-1].dispose=1,s-1!=0&&UPNG.encode._updateFrame(e,t,i,a,s-1,P,r),UPNG.encode._updateFrame(e,t,i,a,s,P,r)}if(1!=e.length)for(var R=0;R<a.length;R++){var L;(L=a[R]).rect.width,L.rect.height}return a},UPNG.encode._updateFrame=function(e,t,i,o,r,n,a){for(var s=Uint8Array,l=Uint32Array,c=new s(e[r-1]),d=new l(e[r-1]),p=r+1<e.length?new s(e[r+1]):null,h=new s(e[r]),u=new l(h.buffer),g=t,f=i,m=-1,b=-1,y=0;y<n.height;y++)for(var v=0;v<n.width;v++){var w=n.x+v,x=n.y+y,_=x*t+w,A=u[_];0==A||0==o[r-1].dispose&&d[_]==A&&(null==p||0!=p[4*_+3])||(w<g&&(g=w),w>m&&(m=w),x<f&&(f=x),x>b&&(b=x))}-1==m&&(g=f=m=b=0),a&&(1==(1&g)&&g--,1==(1&f)&&f--),n={x:g,y:f,width:m-g+1,height:b-f+1};var S=o[r];S.rect=n,S.blend=1,S.img=new Uint8Array(n.width*n.height*4),0==o[r-1].dispose?(UPNG._copyTile(c,t,i,S.img,n.width,n.height,-n.x,-n.y,0),UPNG.encode._prepareDiff(h,t,i,S.img,n)):UPNG._copyTile(h,t,i,S.img,n.width,n.height,-n.x,-n.y,0)},UPNG.encode._prepareDiff=function(e,t,i,o,r){UPNG._copyTile(e,t,i,o,r.width,r.height,-r.x,-r.y,2)},UPNG.encode._filterZero=function(e,t,i,o,r,n,a){var s,l=[],c=[0,1,2,3,4];-1!=n?c=[n]:(t*o>5e5||1==i)&&(c=[0]),a&&(s={level:0});for(var d,p=UZIP,h=0;h<c.length;h++){for(var u=0;u<t;u++)UPNG.encode._filterLine(r,e,u,o,i,c[h]);l.push(p.deflate(r,s))}var g=1e9;for(h=0;h<l.length;h++)l[h].length<g&&(d=h,g=l[h].length);return l[d]},UPNG.encode._filterLine=function(e,t,i,o,r,n){var a=i*o,s=a+i,l=UPNG.decode._paeth;if(e[s]=n,s++,0==n)if(o<500)for(var c=0;c<o;c++)e[s+c]=t[a+c];else e.set(new Uint8Array(t.buffer,a,o),s);else if(1==n){for(c=0;c<r;c++)e[s+c]=t[a+c];for(c=r;c<o;c++)e[s+c]=t[a+c]-t[a+c-r]+256&255}else if(0==i){for(c=0;c<r;c++)e[s+c]=t[a+c];if(2==n)for(c=r;c<o;c++)e[s+c]=t[a+c];if(3==n)for(c=r;c<o;c++)e[s+c]=t[a+c]-(t[a+c-r]>>1)+256&255;if(4==n)for(c=r;c<o;c++)e[s+c]=t[a+c]-l(t[a+c-r],0,0)+256&255}else{if(2==n)for(c=0;c<o;c++)e[s+c]=t[a+c]+256-t[a+c-o]&255;if(3==n){for(c=0;c<r;c++)e[s+c]=t[a+c]+256-(t[a+c-o]>>1)&255;for(c=r;c<o;c++)e[s+c]=t[a+c]+256-(t[a+c-o]+t[a+c-r]>>1)&255}if(4==n){for(c=0;c<r;c++)e[s+c]=t[a+c]+256-l(0,t[a+c-o],0)&255;for(c=r;c<o;c++)e[s+c]=t[a+c]+256-l(t[a+c-r],t[a+c-o],t[a+c-r-o])&255}}},UPNG.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var i=t,o=0;o<8;o++)1&i?i=3988292384^i>>>1:i>>>=1;e[t]=i}return e}(),update:function(e,t,i,o){for(var r=0;r<o;r++)e=UPNG.crc.table[255&(e^t[i+r])]^e>>>8;return e},crc:function(e,t,i){return 4294967295^UPNG.crc.update(4294967295,e,t,i)}},UPNG.quantize=function(e,t){var i,o=new Uint8Array(e),r=o.slice(0),n=new Uint32Array(r.buffer),a=UPNG.quantize.getKDtree(r,t),s=a[0],l=a[1],c=UPNG.quantize.planeDst,d=o,p=n,h=d.length,u=new Uint8Array(o.length>>2);if(o.length<2e7)for(var g=0;g<h;g+=4){var f=d[g]*(1/255),m=d[g+1]*(1/255),b=d[g+2]*(1/255),y=d[g+3]*(1/255);i=UPNG.quantize.getNearest(s,f,m,b,y),u[g>>2]=i.ind,p[g>>2]=i.est.rgba}else for(g=0;g<h;g+=4){for(f=d[g]*(1/255),m=d[g+1]*(1/255),b=d[g+2]*(1/255),y=d[g+3]*(1/255),i=s;i.left;)i=c(i.est,f,m,b,y)<=0?i.left:i.right;u[g>>2]=i.ind,p[g>>2]=i.est.rgba}return{abuf:r.buffer,inds:u,plte:l}},UPNG.quantize.getKDtree=function(e,t,i){null==i&&(i=1e-4);var o=new Uint32Array(e.buffer),r={i0:0,i1:e.length,bst:null,est:null,tdst:0,left:null,right:null};r.bst=UPNG.quantize.stats(e,r.i0,r.i1),r.est=UPNG.quantize.estats(r.bst);for(var n=[r];n.length<t;){for(var a=0,s=0,l=0;l<n.length;l++)n[l].est.L>a&&(a=n[l].est.L,s=l);if(a<i)break;var c=n[s],d=UPNG.quantize.splitPixels(e,o,c.i0,c.i1,c.est.e,c.est.eMq255);if(c.i0>=d||c.i1<=d)c.est.L=0;else{var p={i0:c.i0,i1:d,bst:null,est:null,tdst:0,left:null,right:null};p.bst=UPNG.quantize.stats(e,p.i0,p.i1),p.est=UPNG.quantize.estats(p.bst);var h={i0:d,i1:c.i1,bst:null,est:null,tdst:0,left:null,right:null};for(h.bst={R:[],m:[],N:c.bst.N-p.bst.N},l=0;l<16;l++)h.bst.R[l]=c.bst.R[l]-p.bst.R[l];for(l=0;l<4;l++)h.bst.m[l]=c.bst.m[l]-p.bst.m[l];h.est=UPNG.quantize.estats(h.bst),c.left=p,c.right=h,n[s]=p,n.push(h)}}for(n.sort((function(e,t){return t.bst.N-e.bst.N})),l=0;l<n.length;l++)n[l].ind=l;return[r,n]},UPNG.quantize.getNearest=function(e,t,i,o,r){if(null==e.left)return e.tdst=UPNG.quantize.dist(e.est.q,t,i,o,r),e;var n=UPNG.quantize.planeDst(e.est,t,i,o,r),a=e.left,s=e.right;n>0&&(a=e.right,s=e.left);var l=UPNG.quantize.getNearest(a,t,i,o,r);if(l.tdst<=n*n)return l;var c=UPNG.quantize.getNearest(s,t,i,o,r);return c.tdst<l.tdst?c:l},UPNG.quantize.planeDst=function(e,t,i,o,r){var n=e.e;return n[0]*t+n[1]*i+n[2]*o+n[3]*r-e.eMq},UPNG.quantize.dist=function(e,t,i,o,r){var n=t-e[0],a=i-e[1],s=o-e[2],l=r-e[3];return n*n+a*a+s*s+l*l},UPNG.quantize.splitPixels=function(e,t,i,o,r,n){var a=UPNG.quantize.vecDot;for(o-=4;i<o;){for(;a(e,i,r)<=n;)i+=4;for(;a(e,o,r)>n;)o-=4;if(i>=o)break;var s=t[i>>2];t[i>>2]=t[o>>2],t[o>>2]=s,i+=4,o-=4}for(;a(e,i,r)>n;)i-=4;return i+4},UPNG.quantize.vecDot=function(e,t,i){return e[t]*i[0]+e[t+1]*i[1]+e[t+2]*i[2]+e[t+3]*i[3]},UPNG.quantize.stats=function(e,t,i){for(var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=[0,0,0,0],n=i-t>>2,a=t;a<i;a+=4){var s=e[a]*(1/255),l=e[a+1]*(1/255),c=e[a+2]*(1/255),d=e[a+3]*(1/255);r[0]+=s,r[1]+=l,r[2]+=c,r[3]+=d,o[0]+=s*s,o[1]+=s*l,o[2]+=s*c,o[3]+=s*d,o[5]+=l*l,o[6]+=l*c,o[7]+=l*d,o[10]+=c*c,o[11]+=c*d,o[15]+=d*d}return o[4]=o[1],o[8]=o[2],o[9]=o[6],o[12]=o[3],o[13]=o[7],o[14]=o[11],{R:o,m:r,N:n}},UPNG.quantize.estats=function(e){var t=e.R,i=e.m,o=e.N,r=i[0],n=i[1],a=i[2],s=i[3],l=0==o?0:1/o,c=[t[0]-r*r*l,t[1]-r*n*l,t[2]-r*a*l,t[3]-r*s*l,t[4]-n*r*l,t[5]-n*n*l,t[6]-n*a*l,t[7]-n*s*l,t[8]-a*r*l,t[9]-a*n*l,t[10]-a*a*l,t[11]-a*s*l,t[12]-s*r*l,t[13]-s*n*l,t[14]-s*a*l,t[15]-s*s*l],d=c,p=UPNG.M4,h=[Math.random(),Math.random(),Math.random(),Math.random()],u=0,g=0;if(0!=o)for(var f=0;f<16&&(h=p.multVec(d,h),g=Math.sqrt(p.dot(h,h)),h=p.sml(1/g,h),!(0!=f&&Math.abs(g-u)<1e-9));f++)u=g;var m=[r*l,n*l,a*l,s*l];return{Cov:c,q:m,e:h,L:u,eMq255:p.dot(p.sml(255,m),h),eMq:p.dot(h,m),rgba:(Math.round(255*m[3])<<24|Math.round(255*m[2])<<16|Math.round(255*m[1])<<8|Math.round(255*m[0])<<0)>>>0}},UPNG.M4={multVec:function(e,t){return[e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3],e[4]*t[0]+e[5]*t[1]+e[6]*t[2]+e[7]*t[3],e[8]*t[0]+e[9]*t[1]+e[10]*t[2]+e[11]*t[3],e[12]*t[0]+e[13]*t[1]+e[14]*t[2]+e[15]*t[3]]},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},sml:function(e,t){return[e*t[0],e*t[1],e*t[2],e*t[3]]}},UPNG.encode.concatRGBA=function(e){for(var t=0,i=0;i<e.length;i++)t+=e[i].byteLength;var o=new Uint8Array(t),r=0;for(i=0;i<e.length;i++){for(var n=new Uint8Array(e[i]),a=n.length,s=0;s<a;s+=4){var l=n[s],c=n[s+1],d=n[s+2],p=n[s+3];0==p&&(l=c=d=0),o[r+s]=l,o[r+s+1]=c,o[r+s+2]=d,o[r+s+3]=p}r+=a}return o.buffer};var BROWSER_NAME={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",MOBILE_SAFARI:"MOBILE_SAFARI",ETC:"ETC"},_BROWSER_NAME$CHROME$,MAX_CANVAS_SIZE=(_BROWSER_NAME$CHROME$={},_defineProperty(_BROWSER_NAME$CHROME$,BROWSER_NAME.CHROME,16384),_defineProperty(_BROWSER_NAME$CHROME$,BROWSER_NAME.FIREFOX,11180),_defineProperty(_BROWSER_NAME$CHROME$,BROWSER_NAME.DESKTOP_SAFARI,16384),_defineProperty(_BROWSER_NAME$CHROME$,BROWSER_NAME.IE,8192),_defineProperty(_BROWSER_NAME$CHROME$,BROWSER_NAME.MOBILE_SAFARI,4096),_defineProperty(_BROWSER_NAME$CHROME$,BROWSER_NAME.ETC,8192),_BROWSER_NAME$CHROME$),isBrowser="undefined"!=typeof window,moduleMapper=isBrowser&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),CustomFile=isBrowser&&(moduleMapper&&moduleMapper.getOriginalSymbol(window,"File")||void 0!==window.File&&File),CustomFileReader=isBrowser&&(moduleMapper&&moduleMapper.getOriginalSymbol(window,"FileReader")||void 0!==window.FileReader&&FileReader);function getFilefromDataUrl(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();return new Promise((function(o){for(var r=e.split(","),n=r[0].match(/:(.*?);/)[1],a=globalThis.atob(r[1]),s=a.length,l=new Uint8Array(s);s--;)l[s]=a.charCodeAt(s);var c=new Blob([l],{type:n});c.name=t,c.lastModified=i,o(c)}))}function getDataUrlFromFile(e){return new Promise((function(t,i){var o=new CustomFileReader;o.onload=function(){return t(o.result)},o.onerror=function(e){return i(e)},o.readAsDataURL(e)}))}function loadImage(e){return new Promise((function(t,i){var o=new Image;o.onload=function(){return t(o)},o.onerror=function(e){return i(e)},o.src=e}))}function getBrowserName(){if(void 0!==getBrowserName.cachedResult)return getBrowserName.cachedResult;var e=BROWSER_NAME.ETC,t=navigator.userAgent;return/Chrom(e|ium)/i.test(t)?e=BROWSER_NAME.CHROME:/iP(ad|od|hone)/i.test(t)&&/WebKit/i.test(t)&&!/(CriOS|FxiOS|OPiOS|mercury)/i.test(t)?e=BROWSER_NAME.MOBILE_SAFARI:/Safari/i.test(t)?e=BROWSER_NAME.DESKTOP_SAFARI:/Firefox/i.test(t)?e=BROWSER_NAME.FIREFOX:(/MSIE/i.test(t)||1==!!document.documentMode)&&(e=BROWSER_NAME.IE),getBrowserName.cachedResult=e,getBrowserName.cachedResult}function approximateBelowMaximumCanvasSizeOfBrowser(e,t){for(var i=getBrowserName(),o=MAX_CANVAS_SIZE[i],r=e,n=t,a=r*n,s=r>n?n/r:r/n;a>o*o;){var l=(o+r)/2,c=(o+n)/2;l<c?(n=c,r=c*s):(n=l*s,r=l),a=r*n}return{width:r,height:n}}function getNewCanvasAndCtx(e,t){var i,o;try{if(null===(o=(i=new OffscreenCanvas(e,t)).getContext("2d")))throw new Error("getContext of OffscreenCanvas returns null")}catch(e){o=(i=document.createElement("canvas")).getContext("2d")}return i.width=e,i.height=t,[i,o]}function drawImageInCanvas(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=approximateBelowMaximumCanvasSizeOfBrowser(e.width,e.height),o=i.width,r=i.height,n=getNewCanvasAndCtx(o,r),a=_slicedToArray(n,2),s=a[0],l=a[1];return t&&/jpe?g/.test(t)&&(l.fillStyle="white",l.fillRect(0,0,s.width,s.height)),l.drawImage(e,0,0,s.width,s.height),s}function isIOS(){return void 0!==isIOS.cachedResult||(isIOS.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document),isIOS.cachedResult}function drawFileInCanvas(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(i,o){var r,n,a=function(){try{return n=drawImageInCanvas(r,t.fileType||e.type),i([r,n])}catch(e){return o(e)}},s=function(t){try{var i=function(e){try{throw e}catch(e){return o(e)}};try{return getDataUrlFromFile(e).then((function(e){try{return loadImage(e).then((function(e){try{return r=e,function(){try{return a()}catch(e){return o(e)}}()}catch(e){return i(e)}}),i)}catch(e){return i(e)}}),i)}catch(e){i(e)}}catch(e){return o(e)}};try{if(isIOS()||[BROWSER_NAME.DESKTOP_SAFARI,BROWSER_NAME.MOBILE_SAFARI].includes(getBrowserName()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(e).then((function(e){try{return r=e,a()}catch(e){return s()}}),s)}catch(e){s()}}))}function canvasToFile(e,t,i,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return new Promise((function(n,a){var s,l,c;if("image/png"===t)return l=e.getContext("2d").getImageData(0,0,e.width,e.height).data,c=UPNG.encode([l],e.width,e.height,256*r),(s=new Blob([c],{type:t})).name=i,s.lastModified=o,p.call(this);{return"function"==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?e.convertToBlob({type:t,quality:r}).then(function(e){try{return(s=e).name=i,s.lastModified=o,d.call(this)}catch(e){return a(e)}}.bind(this),a):getFilefromDataUrl(e.toDataURL(t,r),i,o).then(function(e){try{return s=e,d.call(this)}catch(e){return a(e)}}.bind(this),a);function d(){return p.call(this)}}function p(){return n(s)}}))}function cleanupCanvasMemory(e){e.width=0,e.height=0}function isAutoOrientationInBrowser(){return new Promise((function(e,t){var i,o,r,n;return void 0!==isAutoOrientationInBrowser.cachedResult?e(isAutoOrientationInBrowser.cachedResult):getFilefromDataUrl("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(a){try{return drawFileInCanvas(i=a).then((function(a){try{return canvasToFile(o=a[1],i.type,i.name,i.lastModified).then((function(i){try{return r=i,cleanupCanvasMemory(o),drawFileInCanvas(r).then((function(i){try{return n=i[0],isAutoOrientationInBrowser.cachedResult=1===n.width&&2===n.height,e(isAutoOrientationInBrowser.cachedResult)}catch(e){return t(e)}}),t)}catch(e){return t(e)}}),t)}catch(e){return t(e)}}),t)}catch(e){return t(e)}}),t)}))}function getExifOrientation(e){return new Promise((function(t,i){var o=new CustomFileReader;o.onload=function(e){var i=new DataView(e.target.result);if(65496!=i.getUint16(0,!1))return t(-2);for(var o=i.byteLength,r=2;r<o;){if(i.getUint16(r+2,!1)<=8)return t(-1);var n=i.getUint16(r,!1);if(r+=2,65505==n){if(1165519206!=i.getUint32(r+=2,!1))return t(-1);var a=18761==i.getUint16(r+=6,!1);r+=i.getUint32(r+4,a);var s=i.getUint16(r,a);r+=2;for(var l=0;l<s;l++)if(274==i.getUint16(r+12*l,a))return t(i.getUint16(r+12*l+8,a))}else{if(65280!=(65280&n))break;r+=i.getUint16(r,!1)}}return t(-1)},o.onerror=function(e){return i(e)},o.readAsArrayBuffer(e)}))}function handleMaxWidthOrHeight(e,t){var i,o=e.width,r=e.height,n=t.maxWidthOrHeight,a=e;if(isFinite(n)&&(o>n||r>n)){var s=_slicedToArray(getNewCanvasAndCtx(o,r),2);a=s[0],i=s[1],o>r?(a.width=n,a.height=r/o*n):(a.width=o/r*n,a.height=n),i.drawImage(e,0,0,a.width,a.height),cleanupCanvasMemory(e)}return a}function followExifOrientation(e,t){var i=e.width,o=e.height,r=_slicedToArray(getNewCanvasAndCtx(i,o),2),n=r[0],a=r[1];switch(t>4&&t<9?(n.width=o,n.height=i):(n.width=i,n.height=o),t){case 2:a.transform(-1,0,0,1,i,0);break;case 3:a.transform(-1,0,0,-1,i,o);break;case 4:a.transform(1,0,0,-1,0,o);break;case 5:a.transform(0,1,1,0,0,0);break;case 6:a.transform(0,1,-1,0,o,0);break;case 7:a.transform(0,-1,-1,0,o,i);break;case 8:a.transform(0,-1,1,0,0,i)}return a.drawImage(e,0,0,i,o),cleanupCanvasMemory(e),n}function compress(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Promise((function(o,r){var n,a,s,l,c,d,p,h,u,g,f,m,b,y,v,w,x,_;function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;n+=e,t.onProgress(Math.min(n,100))}function S(e){n=Math.min(Math.max(e,n),100),t.onProgress(n)}return n=i,a=t.maxIteration||10,s=1024*t.maxSizeMB*1024,A(),drawFileInCanvas(e,t).then(function(i){try{var n=_slicedToArray(i,2);return l=n[1],A(),c=handleMaxWidthOrHeight(l,t),A(),new Promise((function(i,o){var r;if(!(r=t.exifOrientation))return getExifOrientation(e).then(function(e){try{return r=e,n.call(this)}catch(e){return o(e)}}.bind(this),o);function n(){return i(r)}return n.call(this)})).then(function(i){try{return d=i,A(),isAutoOrientationInBrowser().then(function(i){try{return p=i?c:followExifOrientation(c,d),A(),h=t.initialQuality||1,u=t.fileType||e.type,canvasToFile(p,u,e.name,e.lastModified,h).then(function(t){try{{if(g=t,A(),f=g.size>s,m=g.size>e.size,!f&&!m)return S(100),o(g);var i;function n(){if(a--&&(v>s||v>b)){var t,i,o=_slicedToArray(getNewCanvasAndCtx(t=f?.95*_.width:_.width,i=f?.95*_.height:_.height),2);return x=o[0],o[1].drawImage(_,0,0,t,i),h*=.95,canvasToFile(x,u,e.name,e.lastModified,h).then((function(e){try{return w=e,cleanupCanvasMemory(_),_=x,v=w.size,S(Math.min(99,Math.floor((y-v)/(y-s)*100))),n}catch(e){return r(e)}}),r)}return[1]}return b=e.size,y=g.size,v=y,_=p,(i=function(e){for(;e;){if(e.then)return void e.then(i,r);try{if(e.pop){if(e.length)return e.pop()?d.call(this):e;e=n}else e=e.call(this)}catch(e){return r(e)}}}.bind(this))(n);function d(){return cleanupCanvasMemory(_),cleanupCanvasMemory(x),cleanupCanvasMemory(c),cleanupCanvasMemory(p),cleanupCanvasMemory(l),S(100),o(w)}}}catch(e){return r(e)}}.bind(this),r)}catch(e){return r(e)}}.bind(this),r)}catch(e){return r(e)}}.bind(this),r)}catch(e){return r(e)}}.bind(this),r)}))}var charAt=stringMultibyte.charAt,STRING_ITERATOR="String Iterator",setInternalState$2=internalState.set,getInternalState=internalState.getterFor(STRING_ITERATOR);defineIterator(String,"String",(function(e){setInternalState$2(this,{type:STRING_ITERATOR,string:toString(e),index:0})}),(function(){var e,t=getInternalState(this),i=t.string,o=t.index;return o>=i.length?{value:void 0,done:!0}:(e=charAt(i,o),t.index+=e.length,{value:e,done:!1})}));var domIterables={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},classList=documentCreateElement("span").classList,DOMTokenListPrototype=classList&&classList.constructor&&classList.constructor.prototype,domTokenListPrototype=DOMTokenListPrototype===Object.prototype?void 0:DOMTokenListPrototype,ITERATOR$2=wellKnownSymbol("iterator"),TO_STRING_TAG=wellKnownSymbol("toStringTag"),ArrayValues=es_array_iterator.values,handlePrototype$1=function(e,t){if(e){if(e[ITERATOR$2]!==ArrayValues)try{createNonEnumerableProperty(e,ITERATOR$2,ArrayValues)}catch(t){e[ITERATOR$2]=ArrayValues}if(e[TO_STRING_TAG]||createNonEnumerableProperty(e,TO_STRING_TAG,t),domIterables[t])for(var i in es_array_iterator)if(e[i]!==es_array_iterator[i])try{createNonEnumerableProperty(e,i,es_array_iterator[i])}catch(t){e[i]=es_array_iterator[i]}}};for(var COLLECTION_NAME$1 in domIterables)handlePrototype$1(global$1[COLLECTION_NAME$1]&&global$1[COLLECTION_NAME$1].prototype,COLLECTION_NAME$1);handlePrototype$1(domTokenListPrototype,"DOMTokenList");var ITERATOR$1=wellKnownSymbol("iterator"),nativeUrl=!fails((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,i="";return e.pathname="c%20d",t.forEach((function(e,o){t.delete("b"),i+=o+e})),isPure&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[ITERATOR$1]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==i||"x"!==new URL("http://x",void 0).host})),callWithSafeIterationClosing=function(e,t,i,o){try{return o?t(anObject(i)[0],i[1]):t(i)}catch(t){iteratorClose(e,"throw",t)}},arrayFrom=function(e){var t=toObject(e),i=isConstructor(this),o=arguments.length,r=o>1?arguments[1]:void 0,n=void 0!==r;n&&(r=functionBindContext(r,o>2?arguments[2]:void 0,2));var a,s,l,c,d,p,h=getIteratorMethod(t),u=0;if(!h||this==Array&&isArrayIteratorMethod(h))for(a=toLength(t.length),s=i?new this(a):Array(a);a>u;u++)p=n?r(t[u],u):t[u],createProperty(s,u,p);else for(d=(c=getIterator(t,h)).next,s=i?new this:[];!(l=d.call(c)).done;u++)p=n?callWithSafeIterationClosing(c,r,[l.value,u],!0):l.value,createProperty(s,u,p);return s.length=u,s},maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexNonASCII=/[^\0-\u007E]/,regexSeparators=/[.\u3002\uFF0E\uFF61]/g,OVERFLOW_ERROR="Overflow: input needs wider integers to process",baseMinusTMin=base-tMin,floor$2=Math.floor,stringFromCharCode=String.fromCharCode,ucs2decode=function(e){for(var t=[],i=0,o=e.length;i<o;){var r=e.charCodeAt(i++);if(r>=55296&&r<=56319&&i<o){var n=e.charCodeAt(i++);56320==(64512&n)?t.push(((1023&r)<<10)+(1023&n)+65536):(t.push(r),i--)}else t.push(r)}return t},digitToBasic=function(e){return e+22+75*(e<26)},adapt=function(e,t,i){var o=0;for(e=i?floor$2(e/damp):e>>1,e+=floor$2(e/t);e>baseMinusTMin*tMax>>1;o+=base)e=floor$2(e/baseMinusTMin);return floor$2(o+(baseMinusTMin+1)*e/(e+skew))},encode=function(e){var t,i,o=[],r=(e=ucs2decode(e)).length,n=initialN,a=0,s=initialBias;for(t=0;t<e.length;t++)(i=e[t])<128&&o.push(stringFromCharCode(i));var l=o.length,c=l;for(l&&o.push(delimiter);c<r;){var d=maxInt;for(t=0;t<e.length;t++)(i=e[t])>=n&&i<d&&(d=i);var p=c+1;if(d-n>floor$2((maxInt-a)/p))throw RangeError(OVERFLOW_ERROR);for(a+=(d-n)*p,n=d,t=0;t<e.length;t++){if((i=e[t])<n&&++a>maxInt)throw RangeError(OVERFLOW_ERROR);if(i==n){for(var h=a,u=base;;u+=base){var g=u<=s?tMin:u>=s+tMax?tMax:u-s;if(h<g)break;var f=h-g,m=base-g;o.push(stringFromCharCode(digitToBasic(g+f%m))),h=floor$2(f/m)}o.push(stringFromCharCode(digitToBasic(h))),s=adapt(a,p,c==l),a=0,++c}}++a,++n}return o.join("")},stringPunycodeToAscii=function(e){var t,i,o=[],r=e.toLowerCase().replace(regexSeparators,".").split(".");for(t=0;t<r.length;t++)i=r[t],o.push(regexNonASCII.test(i)?"xn--"+encode(i):i);return o.join(".")},nativeFetch=getBuiltIn("fetch"),NativeRequest=getBuiltIn("Request"),RequestPrototype=NativeRequest&&NativeRequest.prototype,Headers=getBuiltIn("Headers"),ITERATOR=wellKnownSymbol("iterator"),URL_SEARCH_PARAMS="URLSearchParams",URL_SEARCH_PARAMS_ITERATOR=URL_SEARCH_PARAMS+"Iterator",setInternalState$1=internalState.set,getInternalParamsState=internalState.getterFor(URL_SEARCH_PARAMS),getInternalIteratorState=internalState.getterFor(URL_SEARCH_PARAMS_ITERATOR),plus=/\+/g,sequences=Array(4),percentSequence=function(e){return sequences[e-1]||(sequences[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},percentDecode=function(e){try{return decodeURIComponent(e)}catch(t){return e}},deserialize=function(e){var t=e.replace(plus," "),i=4;try{return decodeURIComponent(t)}catch(e){for(;i;)t=t.replace(percentSequence(i--),percentDecode);return t}},find=/[!'()~]|%20/g,replace$1={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},replacer=function(e){return replace$1[e]},serialize=function(e){return encodeURIComponent(e).replace(find,replacer)},parseSearchParams=function(e,t){if(t)for(var i,o,r=t.split("&"),n=0;n<r.length;)(i=r[n++]).length&&(o=i.split("="),e.push({key:deserialize(o.shift()),value:deserialize(o.join("="))}))},updateSearchParams=function(e){this.entries.length=0,parseSearchParams(this.entries,e)},validateArgumentsLength=function(e,t){if(e<t)throw TypeError("Not enough arguments")},URLSearchParamsIterator=createIteratorConstructor((function(e,t){setInternalState$1(this,{type:URL_SEARCH_PARAMS_ITERATOR,iterator:getIterator(getInternalParamsState(e).entries),kind:t})}),"Iterator",(function(){var e=getInternalIteratorState(this),t=e.kind,i=e.iterator.next(),o=i.value;return i.done||(i.value="keys"===t?o.key:"values"===t?o.value:[o.key,o.value]),i})),URLSearchParamsConstructor=function(){anInstance(this,URLSearchParamsConstructor,URL_SEARCH_PARAMS);var e,t,i,o,r,n,a,s,l,c=arguments.length>0?arguments[0]:void 0,d=this,p=[];if(setInternalState$1(d,{type:URL_SEARCH_PARAMS,entries:p,updateURL:function(){},updateSearchParams:updateSearchParams}),void 0!==c)if(isObject(c))if(e=getIteratorMethod(c))for(i=(t=getIterator(c,e)).next;!(o=i.call(t)).done;){if((a=(n=(r=getIterator(anObject(o.value))).next).call(r)).done||(s=n.call(r)).done||!n.call(r).done)throw TypeError("Expected sequence with length 2");p.push({key:toString(a.value),value:toString(s.value)})}else for(l in c)has$1(c,l)&&p.push({key:l,value:toString(c[l])});else parseSearchParams(p,"string"==typeof c?"?"===c.charAt(0)?c.slice(1):c:toString(c))},URLSearchParamsPrototype=URLSearchParamsConstructor.prototype;if(redefineAll(URLSearchParamsPrototype,{append:function(e,t){validateArgumentsLength(arguments.length,2);var i=getInternalParamsState(this);i.entries.push({key:toString(e),value:toString(t)}),i.updateURL()},delete:function(e){validateArgumentsLength(arguments.length,1);for(var t=getInternalParamsState(this),i=t.entries,o=toString(e),r=0;r<i.length;)i[r].key===o?i.splice(r,1):r++;t.updateURL()},get:function(e){validateArgumentsLength(arguments.length,1);for(var t=getInternalParamsState(this).entries,i=toString(e),o=0;o<t.length;o++)if(t[o].key===i)return t[o].value;return null},getAll:function(e){validateArgumentsLength(arguments.length,1);for(var t=getInternalParamsState(this).entries,i=toString(e),o=[],r=0;r<t.length;r++)t[r].key===i&&o.push(t[r].value);return o},has:function(e){validateArgumentsLength(arguments.length,1);for(var t=getInternalParamsState(this).entries,i=toString(e),o=0;o<t.length;)if(t[o++].key===i)return!0;return!1},set:function(e,t){validateArgumentsLength(arguments.length,1);for(var i,o=getInternalParamsState(this),r=o.entries,n=!1,a=toString(e),s=toString(t),l=0;l<r.length;l++)(i=r[l]).key===a&&(n?r.splice(l--,1):(n=!0,i.value=s));n||r.push({key:a,value:s}),o.updateURL()},sort:function(){var e,t,i,o=getInternalParamsState(this),r=o.entries,n=r.slice();for(r.length=0,i=0;i<n.length;i++){for(e=n[i],t=0;t<i;t++)if(r[t].key>e.key){r.splice(t,0,e);break}t===i&&r.push(e)}o.updateURL()},forEach:function(e){for(var t,i=getInternalParamsState(this).entries,o=functionBindContext(e,arguments.length>1?arguments[1]:void 0,3),r=0;r<i.length;)o((t=i[r++]).value,t.key,this)},keys:function(){return new URLSearchParamsIterator(this,"keys")},values:function(){return new URLSearchParamsIterator(this,"values")},entries:function(){return new URLSearchParamsIterator(this,"entries")}},{enumerable:!0}),redefine(URLSearchParamsPrototype,ITERATOR,URLSearchParamsPrototype.entries,{name:"entries"}),redefine(URLSearchParamsPrototype,"toString",(function(){for(var e,t=getInternalParamsState(this).entries,i=[],o=0;o<t.length;)e=t[o++],i.push(serialize(e.key)+"="+serialize(e.value));return i.join("&")}),{enumerable:!0}),setToStringTag(URLSearchParamsConstructor,URL_SEARCH_PARAMS),_export({global:!0,forced:!nativeUrl},{URLSearchParams:URLSearchParamsConstructor}),!nativeUrl&&isCallable(Headers)){var wrapRequestOptions=function(e){if(isObject(e)){var t,i=e.body;if(classof(i)===URL_SEARCH_PARAMS)return(t=e.headers?new Headers(e.headers):new Headers).has("content-type")||t.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),objectCreate(e,{body:createPropertyDescriptor(0,String(i)),headers:createPropertyDescriptor(0,t)})}return e};if(isCallable(nativeFetch)&&_export({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return nativeFetch(e,arguments.length>1?wrapRequestOptions(arguments[1]):{})}}),isCallable(NativeRequest)){var RequestConstructor=function(e){return anInstance(this,RequestConstructor,"Request"),new NativeRequest(e,arguments.length>1?wrapRequestOptions(arguments[1]):{})};RequestPrototype.constructor=RequestConstructor,RequestConstructor.prototype=RequestPrototype,_export({global:!0,forced:!0},{Request:RequestConstructor})}}var web_urlSearchParams={URLSearchParams:URLSearchParamsConstructor,getState:getInternalParamsState},codeAt=stringMultibyte.codeAt,NativeURL=global$1.URL,URLSearchParams$1=web_urlSearchParams.URLSearchParams,getInternalSearchParamsState=web_urlSearchParams.getState,setInternalState=internalState.set,getInternalURLState=internalState.getterFor("URL"),floor$1=Math.floor,pow=Math.pow,INVALID_AUTHORITY="Invalid authority",INVALID_SCHEME="Invalid scheme",INVALID_HOST="Invalid host",INVALID_PORT="Invalid port",ALPHA=/[A-Za-z]/,ALPHANUMERIC=/[\d+-.A-Za-z]/,DIGIT=/\d/,HEX_START=/^0x/i,OCT=/^[0-7]+$/,DEC=/^\d+$/,HEX=/^[\dA-Fa-f]+$/,FORBIDDEN_HOST_CODE_POINT=/[\0\t\n\r #%/:<>?@[\\\]^|]/,FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT=/[\0\t\n\r #/:<>?@[\\\]^|]/,LEADING_AND_TRAILING_C0_CONTROL_OR_SPACE=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,TAB_AND_NEW_LINE=/[\t\n\r]/g,EOF,parseHost=function(e,t){var i,o,r;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return INVALID_HOST;if(!(i=parseIPv6(t.slice(1,-1))))return INVALID_HOST;e.host=i}else if(isSpecial(e)){if(t=stringPunycodeToAscii(t),FORBIDDEN_HOST_CODE_POINT.test(t))return INVALID_HOST;if(null===(i=parseIPv4(t)))return INVALID_HOST;e.host=i}else{if(FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT.test(t))return INVALID_HOST;for(i="",o=arrayFrom(t),r=0;r<o.length;r++)i+=percentEncode(o[r],C0ControlPercentEncodeSet);e.host=i}},parseIPv4=function(e){var t,i,o,r,n,a,s,l=e.split(".");if(l.length&&""==l[l.length-1]&&l.pop(),(t=l.length)>4)return e;for(i=[],o=0;o<t;o++){if(""==(r=l[o]))return e;if(n=10,r.length>1&&"0"==r.charAt(0)&&(n=HEX_START.test(r)?16:8,r=r.slice(8==n?1:2)),""===r)a=0;else{if(!(10==n?DEC:8==n?OCT:HEX).test(r))return e;a=parseInt(r,n)}i.push(a)}for(o=0;o<t;o++)if(a=i[o],o==t-1){if(a>=pow(256,5-t))return null}else if(a>255)return null;for(s=i.pop(),o=0;o<i.length;o++)s+=i[o]*pow(256,3-o);return s},parseIPv6=function(e){var t,i,o,r,n,a,s,l=[0,0,0,0,0,0,0,0],c=0,d=null,p=0,h=function(){return e.charAt(p)};if(":"==h()){if(":"!=e.charAt(1))return;p+=2,d=++c}for(;h();){if(8==c)return;if(":"!=h()){for(t=i=0;i<4&&HEX.test(h());)t=16*t+parseInt(h(),16),p++,i++;if("."==h()){if(0==i)return;if(p-=i,c>6)return;for(o=0;h();){if(r=null,o>0){if(!("."==h()&&o<4))return;p++}if(!DIGIT.test(h()))return;for(;DIGIT.test(h());){if(n=parseInt(h(),10),null===r)r=n;else{if(0==r)return;r=10*r+n}if(r>255)return;p++}l[c]=256*l[c]+r,2!=++o&&4!=o||c++}if(4!=o)return;break}if(":"==h()){if(p++,!h())return}else if(h())return;l[c++]=t}else{if(null!==d)return;p++,d=++c}}if(null!==d)for(a=c-d,c=7;0!=c&&a>0;)s=l[c],l[c--]=l[d+a-1],l[d+--a]=s;else if(8!=c)return;return l},findLongestZeroSequence=function(e){for(var t=null,i=1,o=null,r=0,n=0;n<8;n++)0!==e[n]?(r>i&&(t=o,i=r),o=null,r=0):(null===o&&(o=n),++r);return r>i&&(t=o,i=r),t},serializeHost=function(e){var t,i,o,r;if("number"==typeof e){for(t=[],i=0;i<4;i++)t.unshift(e%256),e=floor$1(e/256);return t.join(".")}if("object"==typeof e){for(t="",o=findLongestZeroSequence(e),i=0;i<8;i++)r&&0===e[i]||(r&&(r=!1),o===i?(t+=i?":":"::",r=!0):(t+=e[i].toString(16),i<7&&(t+=":")));return"["+t+"]"}return e},C0ControlPercentEncodeSet={},fragmentPercentEncodeSet=objectAssign({},C0ControlPercentEncodeSet,{" ":1,'"':1,"<":1,">":1,"`":1}),pathPercentEncodeSet=objectAssign({},fragmentPercentEncodeSet,{"#":1,"?":1,"{":1,"}":1}),userinfoPercentEncodeSet=objectAssign({},pathPercentEncodeSet,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),percentEncode=function(e,t){var i=codeAt(e,0);return i>32&&i<127&&!has$1(t,e)?e:encodeURIComponent(e)},specialSchemes={ftp:21,file:null,http:80,https:443,ws:80,wss:443},isSpecial=function(e){return has$1(specialSchemes,e.scheme)},includesCredentials=function(e){return""!=e.username||""!=e.password},cannotHaveUsernamePasswordPort=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},isWindowsDriveLetter=function(e,t){var i;return 2==e.length&&ALPHA.test(e.charAt(0))&&(":"==(i=e.charAt(1))||!t&&"|"==i)},startsWithWindowsDriveLetter=function(e){var t;return e.length>1&&isWindowsDriveLetter(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},shortenURLsPath=function(e){var t=e.path,i=t.length;!i||"file"==e.scheme&&1==i&&isWindowsDriveLetter(t[0],!0)||t.pop()},isSingleDot=function(e){return"."===e||"%2e"===e.toLowerCase()},isDoubleDot=function(e){return".."===(e=e.toLowerCase())||"%2e."===e||".%2e"===e||"%2e%2e"===e},SCHEME_START={},SCHEME={},NO_SCHEME={},SPECIAL_RELATIVE_OR_AUTHORITY={},PATH_OR_AUTHORITY={},RELATIVE={},RELATIVE_SLASH={},SPECIAL_AUTHORITY_SLASHES={},SPECIAL_AUTHORITY_IGNORE_SLASHES={},AUTHORITY={},HOST={},HOSTNAME={},PORT={},FILE={},FILE_SLASH={},FILE_HOST={},PATH_START={},PATH={},CANNOT_BE_A_BASE_URL_PATH={},QUERY={},FRAGMENT={},parseURL=function(e,t,i,o){var r,n,a,s,l=i||SCHEME_START,c=0,d="",p=!1,h=!1,u=!1;for(i||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(LEADING_AND_TRAILING_C0_CONTROL_OR_SPACE,"")),t=t.replace(TAB_AND_NEW_LINE,""),r=arrayFrom(t);c<=r.length;){switch(n=r[c],l){case SCHEME_START:if(!n||!ALPHA.test(n)){if(i)return INVALID_SCHEME;l=NO_SCHEME;continue}d+=n.toLowerCase(),l=SCHEME;break;case SCHEME:if(n&&(ALPHANUMERIC.test(n)||"+"==n||"-"==n||"."==n))d+=n.toLowerCase();else{if(":"!=n){if(i)return INVALID_SCHEME;d="",l=NO_SCHEME,c=0;continue}if(i&&(isSpecial(e)!=has$1(specialSchemes,d)||"file"==d&&(includesCredentials(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=d,i)return void(isSpecial(e)&&specialSchemes[e.scheme]==e.port&&(e.port=null));d="","file"==e.scheme?l=FILE:isSpecial(e)&&o&&o.scheme==e.scheme?l=SPECIAL_RELATIVE_OR_AUTHORITY:isSpecial(e)?l=SPECIAL_AUTHORITY_SLASHES:"/"==r[c+1]?(l=PATH_OR_AUTHORITY,c++):(e.cannotBeABaseURL=!0,e.path.push(""),l=CANNOT_BE_A_BASE_URL_PATH)}break;case NO_SCHEME:if(!o||o.cannotBeABaseURL&&"#"!=n)return INVALID_SCHEME;if(o.cannotBeABaseURL&&"#"==n){e.scheme=o.scheme,e.path=o.path.slice(),e.query=o.query,e.fragment="",e.cannotBeABaseURL=!0,l=FRAGMENT;break}l="file"==o.scheme?FILE:RELATIVE;continue;case SPECIAL_RELATIVE_OR_AUTHORITY:if("/"!=n||"/"!=r[c+1]){l=RELATIVE;continue}l=SPECIAL_AUTHORITY_IGNORE_SLASHES,c++;break;case PATH_OR_AUTHORITY:if("/"==n){l=AUTHORITY;break}l=PATH;continue;case RELATIVE:if(e.scheme=o.scheme,n==EOF)e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query=o.query;else if("/"==n||"\\"==n&&isSpecial(e))l=RELATIVE_SLASH;else if("?"==n)e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query="",l=QUERY;else{if("#"!=n){e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.path.pop(),l=PATH;continue}e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query=o.query,e.fragment="",l=FRAGMENT}break;case RELATIVE_SLASH:if(!isSpecial(e)||"/"!=n&&"\\"!=n){if("/"!=n){e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,l=PATH;continue}l=AUTHORITY}else l=SPECIAL_AUTHORITY_IGNORE_SLASHES;break;case SPECIAL_AUTHORITY_SLASHES:if(l=SPECIAL_AUTHORITY_IGNORE_SLASHES,"/"!=n||"/"!=d.charAt(c+1))continue;c++;break;case SPECIAL_AUTHORITY_IGNORE_SLASHES:if("/"!=n&&"\\"!=n){l=AUTHORITY;continue}break;case AUTHORITY:if("@"==n){p&&(d="%40"+d),p=!0,a=arrayFrom(d);for(var g=0;g<a.length;g++){var f=a[g];if(":"!=f||u){var m=percentEncode(f,userinfoPercentEncodeSet);u?e.password+=m:e.username+=m}else u=!0}d=""}else if(n==EOF||"/"==n||"?"==n||"#"==n||"\\"==n&&isSpecial(e)){if(p&&""==d)return INVALID_AUTHORITY;c-=arrayFrom(d).length+1,d="",l=HOST}else d+=n;break;case HOST:case HOSTNAME:if(i&&"file"==e.scheme){l=FILE_HOST;continue}if(":"!=n||h){if(n==EOF||"/"==n||"?"==n||"#"==n||"\\"==n&&isSpecial(e)){if(isSpecial(e)&&""==d)return INVALID_HOST;if(i&&""==d&&(includesCredentials(e)||null!==e.port))return;if(s=parseHost(e,d))return s;if(d="",l=PATH_START,i)return;continue}"["==n?h=!0:"]"==n&&(h=!1),d+=n}else{if(""==d)return INVALID_HOST;if(s=parseHost(e,d))return s;if(d="",l=PORT,i==HOSTNAME)return}break;case PORT:if(!DIGIT.test(n)){if(n==EOF||"/"==n||"?"==n||"#"==n||"\\"==n&&isSpecial(e)||i){if(""!=d){var b=parseInt(d,10);if(b>65535)return INVALID_PORT;e.port=isSpecial(e)&&b===specialSchemes[e.scheme]?null:b,d=""}if(i)return;l=PATH_START;continue}return INVALID_PORT}d+=n;break;case FILE:if(e.scheme="file","/"==n||"\\"==n)l=FILE_SLASH;else{if(!o||"file"!=o.scheme){l=PATH;continue}if(n==EOF)e.host=o.host,e.path=o.path.slice(),e.query=o.query;else if("?"==n)e.host=o.host,e.path=o.path.slice(),e.query="",l=QUERY;else{if("#"!=n){startsWithWindowsDriveLetter(r.slice(c).join(""))||(e.host=o.host,e.path=o.path.slice(),shortenURLsPath(e)),l=PATH;continue}e.host=o.host,e.path=o.path.slice(),e.query=o.query,e.fragment="",l=FRAGMENT}}break;case FILE_SLASH:if("/"==n||"\\"==n){l=FILE_HOST;break}o&&"file"==o.scheme&&!startsWithWindowsDriveLetter(r.slice(c).join(""))&&(isWindowsDriveLetter(o.path[0],!0)?e.path.push(o.path[0]):e.host=o.host),l=PATH;continue;case FILE_HOST:if(n==EOF||"/"==n||"\\"==n||"?"==n||"#"==n){if(!i&&isWindowsDriveLetter(d))l=PATH;else if(""==d){if(e.host="",i)return;l=PATH_START}else{if(s=parseHost(e,d))return s;if("localhost"==e.host&&(e.host=""),i)return;d="",l=PATH_START}continue}d+=n;break;case PATH_START:if(isSpecial(e)){if(l=PATH,"/"!=n&&"\\"!=n)continue}else if(i||"?"!=n)if(i||"#"!=n){if(n!=EOF&&(l=PATH,"/"!=n))continue}else e.fragment="",l=FRAGMENT;else e.query="",l=QUERY;break;case PATH:if(n==EOF||"/"==n||"\\"==n&&isSpecial(e)||!i&&("?"==n||"#"==n)){if(isDoubleDot(d)?(shortenURLsPath(e),"/"==n||"\\"==n&&isSpecial(e)||e.path.push("")):isSingleDot(d)?"/"==n||"\\"==n&&isSpecial(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&isWindowsDriveLetter(d)&&(e.host&&(e.host=""),d=d.charAt(0)+":"),e.path.push(d)),d="","file"==e.scheme&&(n==EOF||"?"==n||"#"==n))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==n?(e.query="",l=QUERY):"#"==n&&(e.fragment="",l=FRAGMENT)}else d+=percentEncode(n,pathPercentEncodeSet);break;case CANNOT_BE_A_BASE_URL_PATH:"?"==n?(e.query="",l=QUERY):"#"==n?(e.fragment="",l=FRAGMENT):n!=EOF&&(e.path[0]+=percentEncode(n,C0ControlPercentEncodeSet));break;case QUERY:i||"#"!=n?n!=EOF&&("'"==n&&isSpecial(e)?e.query+="%27":e.query+="#"==n?"%23":percentEncode(n,C0ControlPercentEncodeSet)):(e.fragment="",l=FRAGMENT);break;case FRAGMENT:n!=EOF&&(e.fragment+=percentEncode(n,fragmentPercentEncodeSet))}c++}},URLConstructor=function(e){var t,i,o=anInstance(this,URLConstructor,"URL"),r=arguments.length>1?arguments[1]:void 0,n=toString(e),a=setInternalState(o,{type:"URL"});if(void 0!==r)if(r instanceof URLConstructor)t=getInternalURLState(r);else if(i=parseURL(t={},toString(r)))throw TypeError(i);if(i=parseURL(a,n,null,t))throw TypeError(i);var s=a.searchParams=new URLSearchParams$1,l=getInternalSearchParamsState(s);l.updateSearchParams(a.query),l.updateURL=function(){a.query=String(s)||null},descriptors||(o.href=serializeURL.call(o),o.origin=getOrigin.call(o),o.protocol=getProtocol.call(o),o.username=getUsername.call(o),o.password=getPassword.call(o),o.host=getHost.call(o),o.hostname=getHostname.call(o),o.port=getPort.call(o),o.pathname=getPathname.call(o),o.search=getSearch.call(o),o.searchParams=getSearchParams.call(o),o.hash=getHash.call(o))},URLPrototype=URLConstructor.prototype,serializeURL=function(){var e=getInternalURLState(this),t=e.scheme,i=e.username,o=e.password,r=e.host,n=e.port,a=e.path,s=e.query,l=e.fragment,c=t+":";return null!==r?(c+="//",includesCredentials(e)&&(c+=i+(o?":"+o:"")+"@"),c+=serializeHost(r),null!==n&&(c+=":"+n)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==s&&(c+="?"+s),null!==l&&(c+="#"+l),c},getOrigin=function(){var e=getInternalURLState(this),t=e.scheme,i=e.port;if("blob"==t)try{return new URLConstructor(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&isSpecial(e)?t+"://"+serializeHost(e.host)+(null!==i?":"+i:""):"null"},getProtocol=function(){return getInternalURLState(this).scheme+":"},getUsername=function(){return getInternalURLState(this).username},getPassword=function(){return getInternalURLState(this).password},getHost=function(){var e=getInternalURLState(this),t=e.host,i=e.port;return null===t?"":null===i?serializeHost(t):serializeHost(t)+":"+i},getHostname=function(){var e=getInternalURLState(this).host;return null===e?"":serializeHost(e)},getPort=function(){var e=getInternalURLState(this).port;return null===e?"":String(e)},getPathname=function(){var e=getInternalURLState(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},getSearch=function(){var e=getInternalURLState(this).query;return e?"?"+e:""},getSearchParams=function(){return getInternalURLState(this).searchParams},getHash=function(){var e=getInternalURLState(this).fragment;return e?"#"+e:""},accessorDescriptor=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(descriptors&&objectDefineProperties(URLPrototype,{href:accessorDescriptor(serializeURL,(function(e){var t=getInternalURLState(this),i=toString(e),o=parseURL(t,i);if(o)throw TypeError(o);getInternalSearchParamsState(t.searchParams).updateSearchParams(t.query)})),origin:accessorDescriptor(getOrigin),protocol:accessorDescriptor(getProtocol,(function(e){var t=getInternalURLState(this);parseURL(t,toString(e)+":",SCHEME_START)})),username:accessorDescriptor(getUsername,(function(e){var t=getInternalURLState(this),i=arrayFrom(toString(e));if(!cannotHaveUsernamePasswordPort(t)){t.username="";for(var o=0;o<i.length;o++)t.username+=percentEncode(i[o],userinfoPercentEncodeSet)}})),password:accessorDescriptor(getPassword,(function(e){var t=getInternalURLState(this),i=arrayFrom(toString(e));if(!cannotHaveUsernamePasswordPort(t)){t.password="";for(var o=0;o<i.length;o++)t.password+=percentEncode(i[o],userinfoPercentEncodeSet)}})),host:accessorDescriptor(getHost,(function(e){var t=getInternalURLState(this);t.cannotBeABaseURL||parseURL(t,toString(e),HOST)})),hostname:accessorDescriptor(getHostname,(function(e){var t=getInternalURLState(this);t.cannotBeABaseURL||parseURL(t,toString(e),HOSTNAME)})),port:accessorDescriptor(getPort,(function(e){var t=getInternalURLState(this);cannotHaveUsernamePasswordPort(t)||(""==(e=toString(e))?t.port=null:parseURL(t,e,PORT))})),pathname:accessorDescriptor(getPathname,(function(e){var t=getInternalURLState(this);t.cannotBeABaseURL||(t.path=[],parseURL(t,toString(e),PATH_START))})),search:accessorDescriptor(getSearch,(function(e){var t=getInternalURLState(this);""==(e=toString(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",parseURL(t,e,QUERY)),getInternalSearchParamsState(t.searchParams).updateSearchParams(t.query)})),searchParams:accessorDescriptor(getSearchParams),hash:accessorDescriptor(getHash,(function(e){var t=getInternalURLState(this);""!=(e=toString(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",parseURL(t,e,FRAGMENT)):t.fragment=null}))}),redefine(URLPrototype,"toJSON",(function(){return serializeURL.call(this)}),{enumerable:!0}),redefine(URLPrototype,"toString",(function(){return serializeURL.call(this)}),{enumerable:!0}),NativeURL){var nativeCreateObjectURL=NativeURL.createObjectURL,nativeRevokeObjectURL=NativeURL.revokeObjectURL;nativeCreateObjectURL&&redefine(URLConstructor,"createObjectURL",(function(e){return nativeCreateObjectURL.apply(NativeURL,arguments)})),nativeRevokeObjectURL&&redefine(URLConstructor,"revokeObjectURL",(function(e){return nativeRevokeObjectURL.apply(NativeURL,arguments)}))}setToStringTag(URLConstructor,"URL"),_export({global:!0,forced:!nativeUrl,sham:!descriptors},{URL:URLConstructor});var $forEach=arrayIteration.forEach,STRICT_METHOD=arrayMethodIsStrict("forEach"),arrayForEach=STRICT_METHOD?[].forEach:function(e){return $forEach(this,e,arguments.length>1?arguments[1]:void 0)},handlePrototype=function(e){if(e&&e.forEach!==arrayForEach)try{createNonEnumerableProperty(e,"forEach",arrayForEach)}catch(t){e.forEach=arrayForEach}};for(var COLLECTION_NAME in domIterables)handlePrototype(global$1[COLLECTION_NAME]&&global$1[COLLECTION_NAME].prototype);handlePrototype(domTokenListPrototype);var propertyIsEnumerable=objectPropertyIsEnumerable.f,createMethod=function(e){return function(t){for(var i,o=toIndexedObject(t),r=objectKeys(o),n=r.length,a=0,s=[];n>a;)i=r[a++],descriptors&&!propertyIsEnumerable.call(o,i)||s.push(e?[i,o[i]]:o[i]);return s}},objectToArray={entries:createMethod(!0),values:createMethod(!1)},$entries=objectToArray.entries;_export({target:"Object",stat:!0},{entries:function(e){return $entries(e)}});var getOwnPropertyDescriptor=objectGetOwnPropertyDescriptor.f,$startsWith="".startsWith,min$1=Math.min,CORRECT_IS_REGEXP_LOGIC=correctIsRegexpLogic("startsWith"),MDN_POLYFILL_BUG=!(CORRECT_IS_REGEXP_LOGIC||(descriptor=getOwnPropertyDescriptor(String.prototype,"startsWith"),!descriptor||descriptor.writable)),descriptor;_export({target:"String",proto:!0,forced:!MDN_POLYFILL_BUG&&!CORRECT_IS_REGEXP_LOGIC},{startsWith:function(e){var t=toString(requireObjectCoercible(this));notARegexp(e);var i=toLength(min$1(arguments.length>1?arguments[1]:void 0,t.length)),o=toString(e);return $startsWith?$startsWith.call(t,o,i):t.slice(i,i+o.length)===o}});var floor=Math.floor,replace="".replace,SUBSTITUTION_SYMBOLS=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,SUBSTITUTION_SYMBOLS_NO_NAMED=/\$([$&'`]|\d{1,2})/g,getSubstitution=function(e,t,i,o,r,n){var a=i+e.length,s=o.length,l=SUBSTITUTION_SYMBOLS_NO_NAMED;return void 0!==r&&(r=toObject(r),l=SUBSTITUTION_SYMBOLS),replace.call(n,l,(function(n,l){var c;switch(l.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,i);case"'":return t.slice(a);case"<":c=r[l.slice(1,-1)];break;default:var d=+l;if(0===d)return n;if(d>s){var p=floor(d/10);return 0===p?n:p<=s?void 0===o[p-1]?l.charAt(1):o[p-1]+l.charAt(1):n}c=o[d-1]}return void 0===c?"":c}))},REPLACE=wellKnownSymbol("replace"),max=Math.max,min=Math.min,maybeToString=function(e){return void 0===e?e:String(e)},REPLACE_KEEPS_$0="$0"==="a".replace(/./,"$0"),REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE=!!/./[REPLACE]&&""===/./[REPLACE]("a","$0"),REPLACE_SUPPORTS_NAMED_GROUPS=!fails((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));fixRegexpWellKnownSymbolLogic("replace",(function(e,t,i){var o=REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE?"$":"$0";return[function(e,i){var o=requireObjectCoercible(this),r=null==e?void 0:getMethod(e,REPLACE);return r?r.call(e,o,i):t.call(toString(o),e,i)},function(e,r){var n=anObject(this),a=toString(e);if("string"==typeof r&&-1===r.indexOf(o)&&-1===r.indexOf("$<")){var s=i(t,n,a,r);if(s.done)return s.value}var l=isCallable(r);l||(r=toString(r));var c=n.global;if(c){var d=n.unicode;n.lastIndex=0}for(var p=[];;){var h=regexpExecAbstract(n,a);if(null===h)break;if(p.push(h),!c)break;""===toString(h[0])&&(n.lastIndex=advanceStringIndex(a,toLength(n.lastIndex),d))}for(var u="",g=0,f=0;f<p.length;f++){h=p[f];for(var m=toString(h[0]),b=max(min(toInteger(h.index),a.length),0),y=[],v=1;v<h.length;v++)y.push(maybeToString(h[v]));var w=h.groups;if(l){var x=[m].concat(y,b,a);void 0!==w&&x.push(w);var _=toString(r.apply(void 0,x))}else _=getSubstitution(m,a,b,y,w,r);b>=g&&(u+=a.slice(g,b)+_,g=b+m.length)}return u+a.slice(g)}]}),!REPLACE_SUPPORTS_NAMED_GROUPS||!REPLACE_KEEPS_$0||REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE);var IS_CONCAT_SPREADABLE=wellKnownSymbol("isConcatSpreadable"),MAX_SAFE_INTEGER=9007199254740991,MAXIMUM_ALLOWED_INDEX_EXCEEDED="Maximum allowed index exceeded",IS_CONCAT_SPREADABLE_SUPPORT=engineV8Version>=51||!fails((function(){var e=[];return e[IS_CONCAT_SPREADABLE]=!1,e.concat()[0]!==e})),SPECIES_SUPPORT=arrayMethodHasSpeciesSupport("concat"),isConcatSpreadable=function(e){if(!isObject(e))return!1;var t=e[IS_CONCAT_SPREADABLE];return void 0!==t?!!t:isArray(e)},FORCED=!IS_CONCAT_SPREADABLE_SUPPORT||!SPECIES_SUPPORT;_export({target:"Array",proto:!0,forced:FORCED},{concat:function(e){var t,i,o,r,n,a=toObject(this),s=arraySpeciesCreate(a,0),l=0;for(t=-1,o=arguments.length;t<o;t++)if(isConcatSpreadable(n=-1===t?a:arguments[t])){if(l+(r=toLength(n.length))>MAX_SAFE_INTEGER)throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);for(i=0;i<r;i++,l++)i in n&&createProperty(s,l,n[i])}else{if(l>=MAX_SAFE_INTEGER)throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);createProperty(s,l++,n)}return s.length=l,s}});var cnt=0,imageCompressionLibUrl,worker;function createWorker(e){var t=[];return"function"==typeof e?t.push("(".concat(e,")()")):t.push(e),new Worker(URL.createObjectURL(new Blob(t)))}function createSourceObject(e){return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}function stringify(e){return JSON.stringify(e,(function(e,t){return"function"==typeof t?"BIC_FN:::(function () { return ".concat(t.toString()," })()"):t}))}function parse(o){if("string"==typeof o)return o;var result={};return Object.entries(o).forEach((function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];if("string"==typeof value&&value.startsWith("BIC_FN:::"))try{result[key]=eval(value.replace(/^BIC_FN:::/,""))}catch(e){throw e}else result[key]=parse(value)})),result}function generateLib(){return createSourceObject("\n    // reconstruct library\n    function imageCompression (){return (".concat(imageCompression,").apply(null, arguments)}\n\n    imageCompression.getDataUrlFromFile = ").concat(imageCompression.getDataUrlFromFile,"\n    imageCompression.getFilefromDataUrl = ").concat(imageCompression.getFilefromDataUrl,"\n    imageCompression.loadImage = ").concat(imageCompression.loadImage,"\n    imageCompression.drawImageInCanvas = ").concat(imageCompression.drawImageInCanvas,"\n    imageCompression.drawFileInCanvas = ").concat(imageCompression.drawFileInCanvas,"\n    imageCompression.canvasToFile = ").concat(imageCompression.canvasToFile,"\n    imageCompression.getExifOrientation = ").concat(imageCompression.getExifOrientation,"\n    imageCompression.handleMaxWidthOrHeight = ").concat(imageCompression.handleMaxWidthOrHeight,"\n    imageCompression.followExifOrientation = ").concat(imageCompression.followExifOrientation,"\n    imageCompression.cleanupCanvasMemory = ").concat(imageCompression.cleanupCanvasMemory,"\n    imageCompression.isAutoOrientationInBrowser = ").concat(imageCompression.isAutoOrientationInBrowser,"\n    imageCompression.approximateBelowMaximumCanvasSizeOfBrowser = ").concat(imageCompression.approximateBelowMaximumCanvasSizeOfBrowser,"\n    imageCompression.getBrowserName = ").concat(imageCompression.getBrowserName,"\n\n    // functions / objects\n    getDataUrlFromFile = imageCompression.getDataUrlFromFile\n    getFilefromDataUrl = imageCompression.getFilefromDataUrl\n    loadImage = imageCompression.loadImage\n    drawImageInCanvas = imageCompression.drawImageInCanvas\n    drawFileInCanvas = imageCompression.drawFileInCanvas\n    canvasToFile = imageCompression.canvasToFile\n    getExifOrientation = imageCompression.getExifOrientation\n    handleMaxWidthOrHeight = imageCompression.handleMaxWidthOrHeight\n    followExifOrientation = imageCompression.followExifOrientation\n    cleanupCanvasMemory = imageCompression.cleanupCanvasMemory\n    isAutoOrientationInBrowser = imageCompression.isAutoOrientationInBrowser\n    approximateBelowMaximumCanvasSizeOfBrowser = imageCompression.approximateBelowMaximumCanvasSizeOfBrowser\n    getBrowserName = imageCompression.getBrowserName\n    isIOS = ").concat(isIOS,"\n    \n    getNewCanvasAndCtx = ").concat(getNewCanvasAndCtx,"\n    CustomFileReader = FileReader\n    CustomFile = File\n    MAX_CANVAS_SIZE = ").concat(JSON.stringify(MAX_CANVAS_SIZE),"\n    BROWSER_NAME = ").concat(JSON.stringify(BROWSER_NAME),"\n    function compress (){return (").concat(compress,").apply(null, arguments)}\n\n    // core-js\n    function _slicedToArray(arr, n) { return arr }\n    function _typeof(a) { return typeof a }\n    function _objectSpread2(target) {\n      for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i] != null ? arguments[i] : {};\n  \n        Object.assign(target, source)\n      }\n  \n      return target;\n    }\n\n    // Libraries\n    const parse = ").concat(parse,"\n    const UPNG = {}\n    UPNG.toRGBA8 = ").concat(UPNG.toRGBA8,"\n    UPNG.toRGBA8.decodeImage = ").concat(UPNG.toRGBA8.decodeImage,"\n    UPNG.decode = ").concat(UPNG.decode,"\n    UPNG.decode._decompress = ").concat(UPNG.decode._decompress,"\n    UPNG.decode._inflate = ").concat(UPNG.decode._inflate,"\n    UPNG.decode._readInterlace = ").concat(UPNG.decode._readInterlace,"\n    UPNG.decode._getBPP = ").concat(UPNG.decode._getBPP," \n    UPNG.decode._filterZero = ").concat(UPNG.decode._filterZero,"\n    UPNG.decode._paeth = ").concat(UPNG.decode._paeth,"\n    UPNG.decode._IHDR = ").concat(UPNG.decode._IHDR,"\n    UPNG._bin = parse(").concat(stringify(UPNG._bin),")\n    UPNG._copyTile = ").concat(UPNG._copyTile,"\n    UPNG.encode = ").concat(UPNG.encode,"\n    UPNG.encodeLL = ").concat(UPNG.encodeLL," \n    UPNG.encode._main = ").concat(UPNG.encode._main,"\n    UPNG.encode.compressPNG = ").concat(UPNG.encode.compressPNG," \n    UPNG.encode.compress = ").concat(UPNG.encode.compress,"\n    UPNG.encode.framize = ").concat(UPNG.encode.framize," \n    UPNG.encode._updateFrame = ").concat(UPNG.encode._updateFrame," \n    UPNG.encode._prepareDiff = ").concat(UPNG.encode._prepareDiff," \n    UPNG.encode._filterZero = ").concat(UPNG.encode._filterZero," \n    UPNG.encode._filterLine = ").concat(UPNG.encode._filterLine,"\n    UPNG.encode.concatRGBA = ").concat(UPNG.encode.concatRGBA,"\n    UPNG.crc = parse(").concat(stringify(UPNG.crc),")\n    UPNG.crc.table = ( function() {\n    var tab = new Uint32Array(256);\n    for (var n=0; n<256; n++) {\n      var c = n;\n      for (var k=0; k<8; k++) {\n        if (c & 1)  c = 0xedb88320 ^ (c >>> 1);\n        else        c = c >>> 1;\n      }\n      tab[n] = c;  }\n    return tab;  })()\n    UPNG.quantize = ").concat(UPNG.quantize," \n    UPNG.quantize.getKDtree = ").concat(UPNG.quantize.getKDtree," \n    UPNG.quantize.getNearest = ").concat(UPNG.quantize.getNearest," \n    UPNG.quantize.planeDst = ").concat(UPNG.quantize.planeDst," \n    UPNG.quantize.dist = ").concat(UPNG.quantize.dist,"     \n    UPNG.quantize.splitPixels = ").concat(UPNG.quantize.splitPixels," \n    UPNG.quantize.vecDot = ").concat(UPNG.quantize.vecDot," \n    UPNG.quantize.stats = ").concat(UPNG.quantize.stats," \n    UPNG.quantize.estats = ").concat(UPNG.quantize.estats,"\n    UPNG.M4 = parse(").concat(stringify(UPNG.M4),")\n    UPNG.encode.concatRGBA = ").concat(UPNG.encode.concatRGBA,'\n    UPNG.inflateRaw=function(){\n    var H={};H.H={};H.H.N=function(N,W){var R=Uint8Array,i=0,m=0,J=0,h=0,Q=0,X=0,u=0,w=0,d=0,v,C;\n      if(N[0]==3&&N[1]==0)return W?W:new R(0);var V=H.H,n=V.b,A=V.e,l=V.R,M=V.n,I=V.A,e=V.Z,b=V.m,Z=W==null;\n      if(Z)W=new R(N.length>>>2<<5);while(i==0){i=n(N,d,1);m=n(N,d+1,2);d+=3;if(m==0){if((d&7)!=0)d+=8-(d&7);\n        var D=(d>>>3)+4,q=N[D-4]|N[D-3]<<8;if(Z)W=H.H.W(W,w+q);W.set(new R(N.buffer,N.byteOffset+D,q),w);d=D+q<<3;\n        w+=q;continue}if(Z)W=H.H.W(W,w+(1<<17));if(m==1){v=b.J;C=b.h;X=(1<<9)-1;u=(1<<5)-1}if(m==2){J=A(N,d,5)+257;\n        h=A(N,d+5,5)+1;Q=A(N,d+10,4)+4;d+=14;var E=d,j=1;for(var c=0;c<38;c+=2){b.Q[c]=0;b.Q[c+1]=0}for(var c=0;\n                                                                                                        c<Q;c++){var K=A(N,d+c*3,3);b.Q[(b.X[c]<<1)+1]=K;if(K>j)j=K}d+=3*Q;M(b.Q,j);I(b.Q,j,b.u);v=b.w;C=b.d;\n        d=l(b.u,(1<<j)-1,J+h,N,d,b.v);var r=V.V(b.v,0,J,b.C);X=(1<<r)-1;var S=V.V(b.v,J,h,b.D);u=(1<<S)-1;M(b.C,r);\n        I(b.C,r,v);M(b.D,S);I(b.D,S,C)}while(!0){var T=v[e(N,d)&X];d+=T&15;var p=T>>>4;if(p>>>8==0){W[w++]=p}else if(p==256){break}else{var z=w+p-254;\n        if(p>264){var _=b.q[p-257];z=w+(_>>>3)+A(N,d,_&7);d+=_&7}var $=C[e(N,d)&u];d+=$&15;var s=$>>>4,Y=b.c[s],a=(Y>>>4)+n(N,d,Y&15);\n        d+=Y&15;while(w<z){W[w]=W[w++-a];W[w]=W[w++-a];W[w]=W[w++-a];W[w]=W[w++-a]}w=z}}}return W.length==w?W:W.slice(0,w)};\n      H.H.W=function(N,W){var R=N.length;if(W<=R)return N;var V=new Uint8Array(R<<1);V.set(N,0);return V};\n      H.H.R=function(N,W,R,V,n,A){var l=H.H.e,M=H.H.Z,I=0;while(I<R){var e=N[M(V,n)&W];n+=e&15;var b=e>>>4;\n        if(b<=15){A[I]=b;I++}else{var Z=0,m=0;if(b==16){m=3+l(V,n,2);n+=2;Z=A[I-1]}else if(b==17){m=3+l(V,n,3);\n          n+=3}else if(b==18){m=11+l(V,n,7);n+=7}var J=I+m;while(I<J){A[I]=Z;I++}}}return n};H.H.V=function(N,W,R,V){var n=0,A=0,l=V.length>>>1;\n        while(A<R){var M=N[A+W];V[A<<1]=0;V[(A<<1)+1]=M;if(M>n)n=M;A++}while(A<l){V[A<<1]=0;V[(A<<1)+1]=0;A++}return n};\n      H.H.n=function(N,W){var R=H.H.m,V=N.length,n,A,l,M,I,e=R.j;for(var M=0;M<=W;M++)e[M]=0;for(M=1;M<V;M+=2)e[N[M]]++;\n        var b=R.K;n=0;e[0]=0;for(A=1;A<=W;A++){n=n+e[A-1]<<1;b[A]=n}for(l=0;l<V;l+=2){I=N[l+1];if(I!=0){N[l]=b[I];\n          b[I]++}}};H.H.A=function(N,W,R){var V=N.length,n=H.H.m,A=n.r;for(var l=0;l<V;l+=2)if(N[l+1]!=0){var M=l>>1,I=N[l+1],e=M<<4|I,b=W-I,Z=N[l]<<b,m=Z+(1<<b);\n        while(Z!=m){var J=A[Z]>>>15-W;R[J]=e;Z++}}};H.H.l=function(N,W){var R=H.H.m.r,V=15-W;for(var n=0;n<N.length;\n                                                                                                 n+=2){var A=N[n]<<W-N[n+1];N[n]=R[A]>>>V}};H.H.M=function(N,W,R){R=R<<(W&7);var V=W>>>3;N[V]|=R;N[V+1]|=R>>>8};\n      H.H.I=function(N,W,R){R=R<<(W&7);var V=W>>>3;N[V]|=R;N[V+1]|=R>>>8;N[V+2]|=R>>>16};H.H.e=function(N,W,R){return(N[W>>>3]|N[(W>>>3)+1]<<8)>>>(W&7)&(1<<R)-1};\n      H.H.b=function(N,W,R){return(N[W>>>3]|N[(W>>>3)+1]<<8|N[(W>>>3)+2]<<16)>>>(W&7)&(1<<R)-1};H.H.Z=function(N,W){return(N[W>>>3]|N[(W>>>3)+1]<<8|N[(W>>>3)+2]<<16)>>>(W&7)};\n      H.H.i=function(N,W){return(N[W>>>3]|N[(W>>>3)+1]<<8|N[(W>>>3)+2]<<16|N[(W>>>3)+3]<<24)>>>(W&7)};H.H.m=function(){var N=Uint16Array,W=Uint32Array;\n        return{K:new N(16),j:new N(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new N(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new W(32),J:new N(512),_:[],h:new N(32),$:[],w:new N(32768),C:[],v:[],d:new N(32768),D:[],u:new N(512),Q:[],r:new N(1<<15),s:new W(286),Y:new W(30),a:new W(19),t:new W(15e3),k:new N(1<<16),g:new N(1<<15)}}();\n      (function(){var N=H.H.m,W=1<<15;for(var R=0;R<W;R++){var V=R;V=(V&2863311530)>>>1|(V&1431655765)<<1;\n        V=(V&3435973836)>>>2|(V&858993459)<<2;V=(V&4042322160)>>>4|(V&252645135)<<4;V=(V&4278255360)>>>8|(V&16711935)<<8;\n        N.r[R]=(V>>>16|V<<16)>>>17}function n(A,l,M){while(l--!=0)A.push(0,M)}for(var R=0;R<32;R++){N.q[R]=N.S[R]<<3|N.T[R];\n        N.c[R]=N.p[R]<<4|N.z[R]}n(N._,144,8);n(N._,255-143,9);n(N._,279-255,7);n(N._,287-279,8);H.H.n(N._,9);\n        H.H.A(N._,9,N.J);H.H.l(N._,9);n(N.$,32,5);H.H.n(N.$,5);H.H.A(N.$,5,N.h);H.H.l(N.$,5);n(N.Q,19,0);n(N.C,286,0);\n        n(N.D,30,0);n(N.v,320,0)}());return H.H.N}()\n    \n    const UZIP = {}\n    UZIP["parse"] = ').concat(UZIP_1.parse,"\n    UZIP._readLocal = ").concat(UZIP_1._readLocal,"\n    UZIP.inflateRaw = ").concat(UZIP_1.inflateRaw,"\n    UZIP.inflate = ").concat(UZIP_1.inflate,"\n    UZIP.deflate = ").concat(UZIP_1.deflate,"\n    UZIP.deflateRaw = ").concat(UZIP_1.deflateRaw,"\n    UZIP.encode = ").concat(UZIP_1.encode,"\n    UZIP._noNeed = ").concat(UZIP_1._noNeed,"\n    UZIP._writeHeader = ").concat(UZIP_1._writeHeader,"\n    UZIP.crc = parse(").concat(stringify(UZIP_1.crc),")\n    UZIP.crc.table = ( function() {\n      var tab = new Uint32Array(256);\n      for (var n=0; n<256; n++) {\n        var c = n;\n        for (var k=0; k<8; k++) {\n          if (c & 1)  c = 0xedb88320 ^ (c >>> 1);\n          else        c = c >>> 1;\n        }\n        tab[n] = c;  }\n      return tab;  })()\n    \n    UZIP.adler = ").concat(UZIP_1.adler,"\n    UZIP.bin = parse(").concat(stringify(UZIP_1.bin),")\n    UZIP.F = {}\n    UZIP.F.deflateRaw = ").concat(UZIP_1.F.deflateRaw,"\n    UZIP.F._bestMatch = ").concat(UZIP_1.F._bestMatch,"\n    UZIP.F._howLong = ").concat(UZIP_1.F._howLong,"\n    UZIP.F._hash = ").concat(UZIP_1.F._hash,"\n    UZIP.saved = ").concat(UZIP_1.saved,"\n    UZIP.F._writeBlock = ").concat(UZIP_1.F._writeBlock,"\n    UZIP.F._copyExact = ").concat(UZIP_1.F._copyExact,"\n    UZIP.F.getTrees = ").concat(UZIP_1.F.getTrees,"\n    UZIP.F.getSecond = ").concat(UZIP_1.F.getSecond,"\n    UZIP.F.nonZero = ").concat(UZIP_1.F.nonZero,"\n    UZIP.F.contSize = ").concat(UZIP_1.F.contSize,"\n    UZIP.F._codeTiny = ").concat(UZIP_1.F._codeTiny," \n    UZIP.F._lenCodes = ").concat(UZIP_1.F._lenCodes," \n    UZIP.F._hufTree = ").concat(UZIP_1.F._hufTree," \n    UZIP.F.setDepth = ").concat(UZIP_1.F.setDepth," \n    UZIP.F.restrictDepth = ").concat(UZIP_1.F.restrictDepth,"\n    UZIP.F._goodIndex = ").concat(UZIP_1.F._goodIndex," \n    UZIP.F._writeLit = ").concat(UZIP_1.F._writeLit," \n    UZIP.F.inflate = ").concat(UZIP_1.F.inflate," \n    UZIP.F._check = ").concat(UZIP_1.F._check," \n    UZIP.F._decodeTiny = ").concat(UZIP_1.F._decodeTiny," \n    UZIP.F._copyOut = ").concat(UZIP_1.F._copyOut," \n    UZIP.F.makeCodes = ").concat(UZIP_1.F.makeCodes," \n    UZIP.F.codes2map = ").concat(UZIP_1.F.codes2map," \n    UZIP.F.revCodes = ").concat(UZIP_1.F.revCodes," \n\n    // used only in deflate\n    UZIP.F._putsE = ").concat(UZIP_1.F._putsE,"\n    UZIP.F._putsF = ").concat(UZIP_1.F._putsF,"\n  \n    UZIP.F._bitsE = ").concat(UZIP_1.F._bitsE,"\n    UZIP.F._bitsF = ").concat(UZIP_1.F._bitsF,"\n\n    UZIP.F._get17 = ").concat(UZIP_1.F._get17,"\n    UZIP.F._get25 = ").concat(UZIP_1.F._get25,"\n    UZIP.F.U = function(){\n      var u16=Uint16Array, u32=Uint32Array;\n      return {\n        next_code : new u16(16),\n        bl_count  : new u16(16),\n        ordr : [ 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 ],\n        of0  : [3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],\n        exb  : [0,0,0,0,0,0,0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4,  4,  5,  5,  5,  5,  0,  0,  0,  0],\n        ldef : new u16(32),\n        df0  : [1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577, 65535, 65535],\n        dxb  : [0,0,0,0,1,1,2, 2, 3, 3, 4, 4, 5, 5,  6,  6,  7,  7,  8,  8,   9,   9,  10,  10,  11,  11,  12,   12,   13,   13,     0,     0],\n        ddef : new u32(32),\n        flmap: new u16(  512),  fltree: [],\n        fdmap: new u16(   32),  fdtree: [],\n        lmap : new u16(32768),  ltree : [],  ttree:[],\n        dmap : new u16(32768),  dtree : [],\n        imap : new u16(  512),  itree : [],\n        //rev9 : new u16(  512)\n        rev15: new u16(1<<15),\n        lhst : new u32(286), dhst : new u32( 30), ihst : new u32(19),\n        lits : new u32(15000),\n        strt : new u16(1<<16),\n        prev : new u16(1<<15)\n      };\n    } ();\n\n    (function(){\n      var U = UZIP.F.U;\n      var len = 1<<15;\n      for(var i=0; i<len; i++) {\n        var x = i;\n        x = (((x & 0xaaaaaaaa) >>> 1) | ((x & 0x55555555) << 1));\n        x = (((x & 0xcccccccc) >>> 2) | ((x & 0x33333333) << 2));\n        x = (((x & 0xf0f0f0f0) >>> 4) | ((x & 0x0f0f0f0f) << 4));\n        x = (((x & 0xff00ff00) >>> 8) | ((x & 0x00ff00ff) << 8));\n        U.rev15[i] = (((x >>> 16) | (x << 16)))>>>17;\n      }\n  \n      function pushV(tgt, n, sv) {  while(n--!=0) tgt.push(0,sv);  }\n  \n      for(var i=0; i<32; i++) {  U.ldef[i]=(U.of0[i]<<3)|U.exb[i];  U.ddef[i]=(U.df0[i]<<4)|U.dxb[i];  }\n  \n      pushV(U.fltree, 144, 8);  pushV(U.fltree, 255-143, 9);  pushV(U.fltree, 279-255, 7);  pushV(U.fltree,287-279,8);\n      /*\n        var i = 0;\n        for(; i<=143; i++) U.fltree.push(0,8);\n        for(; i<=255; i++) U.fltree.push(0,9);\n        for(; i<=279; i++) U.fltree.push(0,7);\n        for(; i<=287; i++) U.fltree.push(0,8);\n        */\n      UZIP.F.makeCodes(U.fltree, 9);\n      UZIP.F.codes2map(U.fltree, 9, U.flmap);\n      UZIP.F.revCodes (U.fltree, 9)\n  \n      pushV(U.fdtree,32,5);\n      //for(i=0;i<32; i++) U.fdtree.push(0,5);\n      UZIP.F.makeCodes(U.fdtree, 5);\n      UZIP.F.codes2map(U.fdtree, 5, U.fdmap);\n      UZIP.F.revCodes (U.fdtree, 5)\n  \n      pushV(U.itree,19,0);  pushV(U.ltree,286,0);  pushV(U.dtree,30,0);  pushV(U.ttree,320,0);\n      /*\n        for(var i=0; i< 19; i++) U.itree.push(0,0);\n        for(var i=0; i<286; i++) U.ltree.push(0,0);\n        for(var i=0; i< 30; i++) U.dtree.push(0,0);\n        for(var i=0; i<320; i++) U.ttree.push(0,0);\n        */\n    })()\n    "))}function generateWorkerScript(){return createWorker("\n    let scriptImported = false\n    self.addEventListener('message', async (e) => {\n      const { file, id, imageCompressionLibUrl, options } = e.data\n      options.onProgress = (progress) => self.postMessage({ progress, id })\n      try {\n        if (!scriptImported) {\n          // console.log('[worker] importScripts', imageCompressionLibUrl)\n          self.importScripts(imageCompressionLibUrl)\n          scriptImported = true\n        }\n        // console.log('[worker] self', self)\n        const compressedFile = await imageCompression(file, options)\n        self.postMessage({ file: compressedFile, id })\n      } catch (e) {\n        // console.error('[worker] error', e)\n        self.postMessage({ error: e.message + '\\n' + e.stack, id })\n      }\n    })\n  ")}function compressOnWebWorker(e,t){return new Promise((function(i,o){var r=cnt+=1;imageCompressionLibUrl||(imageCompressionLibUrl=generateLib()),worker||(worker=generateWorkerScript()),worker.addEventListener("message",(function e(n){if(n.data.id===r){if(void 0!==n.data.progress)return void t.onProgress(n.data.progress);worker.removeEventListener("message",e),n.data.error&&o(new Error(n.data.error)),i(n.data.file)}})),worker.addEventListener("error",o),worker.postMessage({file:e,id:r,imageCompressionLibUrl:imageCompressionLibUrl,options:_objectSpread2(_objectSpread2({},t),{},{onProgress:void 0})})}))}function imageCompression(e,t){return new Promise((function(i,o){var r,n,a,s,l,c;if(r=_objectSpread2({},t),a=0,s=r.onProgress,r.maxSizeMB=r.maxSizeMB||Number.POSITIVE_INFINITY,l="boolean"!=typeof r.useWebWorker||r.useWebWorker,delete r.useWebWorker,r.onProgress=function(e){a=e,"function"==typeof s&&s(a)},!(e instanceof Blob||e instanceof CustomFile))return o(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(e.type))return o(new Error("The file given is not an image"));if(c="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,!l||"function"!=typeof Worker||c)return compress(e,r).then(function(e){try{return n=e,h.call(this)}catch(e){return o(e)}}.bind(this),o);var d=function(){try{return h.call(this)}catch(e){return o(e)}}.bind(this),p=function(t){try{return compress(e,r).then((function(e){try{return n=e,d()}catch(e){return o(e)}}),o)}catch(e){return o(e)}};try{return compressOnWebWorker(e,r).then((function(e){try{return n=e,d()}catch(e){return p()}}),p)}catch(e){p()}function h(){try{n.name=e.name,n.lastModified=e.lastModified}catch(e){}return i(n)}}))}imageCompression.getDataUrlFromFile=getDataUrlFromFile,imageCompression.getFilefromDataUrl=getFilefromDataUrl,imageCompression.loadImage=loadImage,imageCompression.drawImageInCanvas=drawImageInCanvas,imageCompression.drawFileInCanvas=drawFileInCanvas,imageCompression.canvasToFile=canvasToFile,imageCompression.getExifOrientation=getExifOrientation,imageCompression.handleMaxWidthOrHeight=handleMaxWidthOrHeight,imageCompression.followExifOrientation=followExifOrientation,imageCompression.cleanupCanvasMemory=cleanupCanvasMemory,imageCompression.isAutoOrientationInBrowser=isAutoOrientationInBrowser,imageCompression.approximateBelowMaximumCanvasSizeOfBrowser=approximateBelowMaximumCanvasSizeOfBrowser,imageCompression.getBrowserName=getBrowserName,imageCompression.version="1.0.17"},function(e,t,i){e.exports=i.p+"images/close.5f38fbc.png"},function(e,t,i){e.exports=i.p+"images/recommand.163ee25.png"},function(e,t,i){e.exports=i.p+"images/close.5f38fbc.png"},function(e,t,i){e.exports=i.p+"images/arrow.4ee035b.png"},,,,,,function(e,t,i){e.exports=i.p+"images/edit.39cf929.png"},function(e,t,i){(function(){(null!==t?t:this).Lethargy=function(){function e(e,t,i,o){this.stability=null!=e?Math.abs(e):8,this.sensitivity=null!=t?1+Math.abs(t):100,this.tolerance=null!=i?1+Math.abs(i):1.1,this.delay=null!=o?o:150,this.lastUpDeltas=function(){var e,t,i;for(i=[],e=1,t=2*this.stability;1<=t?e<=t:e>=t;1<=t?e++:e--)i.push(null);return i}.call(this),this.lastDownDeltas=function(){var e,t,i;for(i=[],e=1,t=2*this.stability;1<=t?e<=t:e>=t;1<=t?e++:e--)i.push(null);return i}.call(this),this.deltasTimestamp=function(){var e,t,i;for(i=[],e=1,t=2*this.stability;1<=t?e<=t:e>=t;1<=t?e++:e--)i.push(null);return i}.call(this)}return e.prototype.check=function(e){var t;return null!=(e=e.originalEvent||e).wheelDelta?t=e.wheelDelta:null!=e.deltaY?t=-40*e.deltaY:null==e.detail&&0!==e.detail||(t=-40*e.detail),this.deltasTimestamp.push(Date.now()),this.deltasTimestamp.shift(),t>0?(this.lastUpDeltas.push(t),this.lastUpDeltas.shift(),this.isInertia(1)):(this.lastDownDeltas.push(t),this.lastDownDeltas.shift(),this.isInertia(-1))},e.prototype.isInertia=function(e){var t,i,o,r,n,a,s;return null===(t=-1===e?this.lastDownDeltas:this.lastUpDeltas)[0]?e:!(this.deltasTimestamp[2*this.stability-2]+this.delay>Date.now()&&t[0]===t[2*this.stability-1])&&(o=t.slice(0,this.stability),i=t.slice(this.stability,2*this.stability),s=o.reduce((function(e,t){return e+t})),n=i.reduce((function(e,t){return e+t})),a=s/o.length,r=n/i.length,Math.abs(a)<Math.abs(r*this.tolerance)&&this.sensitivity<Math.abs(r)&&e)},e.prototype.showLastUpDeltas=function(){return this.lastUpDeltas},e.prototype.showLastDownDeltas=function(){return this.lastDownDeltas},e}()}).call(this)},function(e,t,i){e.exports=i.p+"images/expand.f5e33fc.svg"},function(e,t,i){e.exports=i.p+"images/update-side.f885641.jpg"},function(e,t,i){e.exports=i.p+"images/infinity.e82d3fc.svg"},function(e,t,i){e.exports=i.p+"images/left.de9b35b.svg"},function(e,t,i){e.exports=i.p+"images/setting.9bb7a8a.png"},function(e,t,i){e.exports=i.p+"images/close.5575d99.png"},function(e,t,i){e.exports=i.p+"images/location.6694f8a.png"},function(e,t,i){e.exports=i.p+"images/spin.f9360d9.svg"},function(e,t,i){e.exports=i.p+"images/error.7c8e11f.png"},function(e,t,i){e.exports=i.p+"images/empty.c781995.png"},function(e,t,i){e.exports=i.p+"images/left.050db11.png"},function(e,t,i){e.exports=i.p+"images/right.7c65f69.png"},function(e,t,i){e.exports=i.p+"images/close.b9682ba.png"},function(e,t,i){var o,r,n;
/*!
	autosize 4.0.4
	license: MIT
	http://www.jacklmoore.com/autosize
*/r=[e,t],void 0===(n="function"==typeof(o=function(e,t){"use strict";var i,o,r="function"==typeof Map?new Map:(i=[],o=[],{has:function(e){return i.indexOf(e)>-1},get:function(e){return o[i.indexOf(e)]},set:function(e,t){-1===i.indexOf(e)&&(i.push(e),o.push(t))},delete:function(e){var t=i.indexOf(e);t>-1&&(i.splice(t,1),o.splice(t,1))}}),n=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(e){n=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}function a(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!r.has(e)){var t,i=null,o=null,a=null,s=function(){e.clientWidth!==o&&p()},l=function(t){window.removeEventListener("resize",s,!1),e.removeEventListener("input",p,!1),e.removeEventListener("keyup",p,!1),e.removeEventListener("autosize:destroy",l,!1),e.removeEventListener("autosize:update",p,!1),Object.keys(t).forEach((function(i){e.style[i]=t[i]})),r.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",l,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",p,!1),window.addEventListener("resize",s,!1),e.addEventListener("input",p,!1),e.addEventListener("autosize:update",p,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",r.set(e,{destroy:l,update:p}),"vertical"===(t=window.getComputedStyle(e,null)).resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),i="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),isNaN(i)&&(i=0),p()}function c(t){var i=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=i,e.style.overflowY=t}function d(){if(0!==e.scrollHeight){var t=function(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}(e),r=document.documentElement&&document.documentElement.scrollTop;e.style.height="",e.style.height=e.scrollHeight+i+"px",o=e.clientWidth,t.forEach((function(e){e.node.scrollTop=e.scrollTop})),r&&(document.documentElement.scrollTop=r)}}function p(){d();var t=Math.round(parseFloat(e.style.height)),i=window.getComputedStyle(e,null),o="content-box"===i.boxSizing?Math.round(parseFloat(i.height)):e.offsetHeight;if(o<t?"hidden"===i.overflowY&&(c("scroll"),d(),o="content-box"===i.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==i.overflowY&&(c("hidden"),d(),o="content-box"===i.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),a!==o){a=o;var r=n("autosize:resized");try{e.dispatchEvent(r)}catch(e){}}}}function s(e){var t=r.get(e);t&&t.destroy()}function l(e){var t=r.get(e);t&&t.update()}var c=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((c=function(e){return e}).destroy=function(e){return e},c.update=function(e){return e}):((c=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],(function(e){return a(e)})),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],s),e},c.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],l),e}),t.default=c,e.exports=t.default})?o.apply(t,r):o)||(e.exports=n)},function(e,t,i){e.exports=i.p+"images/alarm.12375fc.png"},function(e,t,i){e.exports=i.p+"images/error.cb0c05c.png"},function(e,t,i){
/*! @license DOMPurify 2.4.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.4.0/LICENSE */
e.exports=function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,i){return(t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,i)}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function o(e,r,n){return(o=i()?Reflect.construct:function(e,i,o){var r=[null];r.push.apply(r,i);var n=new(Function.bind.apply(e,r));return o&&t(n,o.prototype),n}).apply(null,arguments)}function r(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}var a=Object.hasOwnProperty,s=Object.setPrototypeOf,l=Object.isFrozen,c=Object.getPrototypeOf,d=Object.getOwnPropertyDescriptor,p=Object.freeze,h=Object.seal,u=Object.create,g="undefined"!=typeof Reflect&&Reflect,f=g.apply,m=g.construct;f||(f=function(e,t,i){return e.apply(t,i)}),p||(p=function(e){return e}),h||(h=function(e){return e}),m||(m=function(e,t){return o(e,r(t))});var b,y=$(Array.prototype.forEach),v=$(Array.prototype.pop),w=$(Array.prototype.push),x=$(String.prototype.toLowerCase),_=$(String.prototype.match),A=$(String.prototype.replace),S=$(String.prototype.indexOf),k=$(String.prototype.trim),O=$(RegExp.prototype.test),I=(b=TypeError,function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return m(b,t)});function $(e){return function(t){for(var i=arguments.length,o=new Array(i>1?i-1:0),r=1;r<i;r++)o[r-1]=arguments[r];return f(e,t,o)}}function E(e,t,i){i=i||x,s&&s(e,null);for(var o=t.length;o--;){var r=t[o];if("string"==typeof r){var n=i(r);n!==r&&(l(t)||(t[o]=n),r=n)}e[r]=!0}return e}function C(e){var t,i=u(null);for(t in e)f(a,e,[t])&&(i[t]=e[t]);return i}function T(e,t){for(;null!==e;){var i=d(e,t);if(i){if(i.get)return $(i.get);if("function"==typeof i.value)return $(i.value)}e=c(e)}return function(e){return console.warn("fallback value for",e),null}}var j=p(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),P=p(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),R=p(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),L=p(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),N=p(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),M=p(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),D=p(["#text"]),U=p(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),B=p(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),F=p(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),z=p(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),H=h(/\{\{[\w\W]*|[\w\W]*\}\}/gm),W=h(/<%[\w\W]*|[\w\W]*%>/gm),G=h(/^data-[\-\w.\u00B7-\uFFFF]/),V=h(/^aria-[\-\w]+$/),q=h(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Y=h(/^(?:\w+script|data):/i),Q=h(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),X=h(/^html$/i),K=function(){return"undefined"==typeof window?null:window},Z=function(t,i){if("object"!==e(t)||"function"!=typeof t.createPolicy)return null;var o=null;i.currentScript&&i.currentScript.hasAttribute("data-tt-policy-suffix")&&(o=i.currentScript.getAttribute("data-tt-policy-suffix"));var r="dompurify"+(o?"#"+o:"");try{return t.createPolicy(r,{createHTML:function(e){return e},createScriptURL:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+r+" could not be created."),null}};return function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K(),o=function(e){return t(e)};if(o.version="2.4.0",o.removed=[],!i||!i.document||9!==i.document.nodeType)return o.isSupported=!1,o;var n=i.document,a=i.document,s=i.DocumentFragment,l=i.HTMLTemplateElement,c=i.Node,d=i.Element,h=i.NodeFilter,u=i.NamedNodeMap,g=void 0===u?i.NamedNodeMap||i.MozNamedAttrMap:u,f=i.HTMLFormElement,m=i.DOMParser,b=i.trustedTypes,$=d.prototype,J=T($,"cloneNode"),ee=T($,"nextSibling"),te=T($,"childNodes"),ie=T($,"parentNode");if("function"==typeof l){var oe=a.createElement("template");oe.content&&oe.content.ownerDocument&&(a=oe.content.ownerDocument)}var re=Z(b,n),ne=re?re.createHTML(""):"",ae=a,se=ae.implementation,le=ae.createNodeIterator,ce=ae.createDocumentFragment,de=ae.getElementsByTagName,pe=n.importNode,he={};try{he=C(a).documentMode?a.documentMode:{}}catch(e){}var ue={};o.isSupported="function"==typeof ie&&se&&void 0!==se.createHTMLDocument&&9!==he;var ge,fe,me=H,be=W,ye=G,ve=V,we=Y,xe=Q,_e=q,Ae=null,Se=E({},[].concat(r(j),r(P),r(R),r(N),r(D))),ke=null,Oe=E({},[].concat(r(U),r(B),r(F),r(z))),Ie=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),$e=null,Ee=null,Ce=!0,Te=!0,je=!1,Pe=!1,Re=!1,Le=!1,Ne=!1,Me=!1,De=!1,Ue=!1,Be=!0,Fe=!1,ze="user-content-",He=!0,We=!1,Ge={},Ve=null,qe=E({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ye=null,Qe=E({},["audio","video","img","source","image","track"]),Xe=null,Ke=E({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ze="http://www.w3.org/1998/Math/MathML",Je="http://www.w3.org/2000/svg",et="http://www.w3.org/1999/xhtml",tt=et,it=!1,ot=["application/xhtml+xml","text/html"],rt="text/html",nt=null,at=a.createElement("form"),st=function(e){return e instanceof RegExp||e instanceof Function},lt=function(t){nt&&nt===t||(t&&"object"===e(t)||(t={}),t=C(t),ge=ge=-1===ot.indexOf(t.PARSER_MEDIA_TYPE)?rt:t.PARSER_MEDIA_TYPE,fe="application/xhtml+xml"===ge?function(e){return e}:x,Ae="ALLOWED_TAGS"in t?E({},t.ALLOWED_TAGS,fe):Se,ke="ALLOWED_ATTR"in t?E({},t.ALLOWED_ATTR,fe):Oe,Xe="ADD_URI_SAFE_ATTR"in t?E(C(Ke),t.ADD_URI_SAFE_ATTR,fe):Ke,Ye="ADD_DATA_URI_TAGS"in t?E(C(Qe),t.ADD_DATA_URI_TAGS,fe):Qe,Ve="FORBID_CONTENTS"in t?E({},t.FORBID_CONTENTS,fe):qe,$e="FORBID_TAGS"in t?E({},t.FORBID_TAGS,fe):{},Ee="FORBID_ATTR"in t?E({},t.FORBID_ATTR,fe):{},Ge="USE_PROFILES"in t&&t.USE_PROFILES,Ce=!1!==t.ALLOW_ARIA_ATTR,Te=!1!==t.ALLOW_DATA_ATTR,je=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Pe=t.SAFE_FOR_TEMPLATES||!1,Re=t.WHOLE_DOCUMENT||!1,Me=t.RETURN_DOM||!1,De=t.RETURN_DOM_FRAGMENT||!1,Ue=t.RETURN_TRUSTED_TYPE||!1,Ne=t.FORCE_BODY||!1,Be=!1!==t.SANITIZE_DOM,Fe=t.SANITIZE_NAMED_PROPS||!1,He=!1!==t.KEEP_CONTENT,We=t.IN_PLACE||!1,_e=t.ALLOWED_URI_REGEXP||_e,tt=t.NAMESPACE||et,t.CUSTOM_ELEMENT_HANDLING&&st(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ie.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&st(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ie.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Ie.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Pe&&(Te=!1),De&&(Me=!0),Ge&&(Ae=E({},r(D)),ke=[],!0===Ge.html&&(E(Ae,j),E(ke,U)),!0===Ge.svg&&(E(Ae,P),E(ke,B),E(ke,z)),!0===Ge.svgFilters&&(E(Ae,R),E(ke,B),E(ke,z)),!0===Ge.mathMl&&(E(Ae,N),E(ke,F),E(ke,z))),t.ADD_TAGS&&(Ae===Se&&(Ae=C(Ae)),E(Ae,t.ADD_TAGS,fe)),t.ADD_ATTR&&(ke===Oe&&(ke=C(ke)),E(ke,t.ADD_ATTR,fe)),t.ADD_URI_SAFE_ATTR&&E(Xe,t.ADD_URI_SAFE_ATTR,fe),t.FORBID_CONTENTS&&(Ve===qe&&(Ve=C(Ve)),E(Ve,t.FORBID_CONTENTS,fe)),He&&(Ae["#text"]=!0),Re&&E(Ae,["html","head","body"]),Ae.table&&(E(Ae,["tbody"]),delete $e.tbody),p&&p(t),nt=t)},ct=E({},["mi","mo","mn","ms","mtext"]),dt=E({},["foreignobject","desc","title","annotation-xml"]),pt=E({},["title","style","font","a","script"]),ht=E({},P);E(ht,R),E(ht,L);var ut=E({},N);E(ut,M);var gt=function(e){var t=ie(e);t&&t.tagName||(t={namespaceURI:et,tagName:"template"});var i=x(e.tagName),o=x(t.tagName);return e.namespaceURI===Je?t.namespaceURI===et?"svg"===i:t.namespaceURI===Ze?"svg"===i&&("annotation-xml"===o||ct[o]):Boolean(ht[i]):e.namespaceURI===Ze?t.namespaceURI===et?"math"===i:t.namespaceURI===Je?"math"===i&&dt[o]:Boolean(ut[i]):e.namespaceURI===et&&!(t.namespaceURI===Je&&!dt[o])&&!(t.namespaceURI===Ze&&!ct[o])&&!ut[i]&&(pt[i]||!ht[i])},ft=function(e){w(o.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=ne}catch(t){e.remove()}}},mt=function(e,t){try{w(o.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){w(o.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!ke[e])if(Me||De)try{ft(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},bt=function(e){var t,i;if(Ne)e="<remove></remove>"+e;else{var o=_(e,/^[\r\n\t ]+/);i=o&&o[0]}"application/xhtml+xml"===ge&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var r=re?re.createHTML(e):e;if(tt===et)try{t=(new m).parseFromString(r,ge)}catch(e){}if(!t||!t.documentElement){t=se.createDocument(tt,"template",null);try{t.documentElement.innerHTML=it?"":r}catch(e){}}var n=t.body||t.documentElement;return e&&i&&n.insertBefore(a.createTextNode(i),n.childNodes[0]||null),tt===et?de.call(t,Re?"html":"body")[0]:Re?t.documentElement:n},yt=function(e){return le.call(e.ownerDocument||e,e,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT,null,!1)},vt=function(e){return e instanceof f&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof g)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore)},wt=function(t){return"object"===e(c)?t instanceof c:t&&"object"===e(t)&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},xt=function(e,t,i){ue[e]&&y(ue[e],(function(e){e.call(o,t,i,nt)}))},_t=function(e){var t;if(xt("beforeSanitizeElements",e,null),vt(e))return ft(e),!0;if(O(/[\u0080-\uFFFF]/,e.nodeName))return ft(e),!0;var i=fe(e.nodeName);if(xt("uponSanitizeElement",e,{tagName:i,allowedTags:Ae}),e.hasChildNodes()&&!wt(e.firstElementChild)&&(!wt(e.content)||!wt(e.content.firstElementChild))&&O(/<[/\w]/g,e.innerHTML)&&O(/<[/\w]/g,e.textContent))return ft(e),!0;if("select"===i&&O(/<template/i,e.innerHTML))return ft(e),!0;if(!Ae[i]||$e[i]){if(!$e[i]&&St(i)){if(Ie.tagNameCheck instanceof RegExp&&O(Ie.tagNameCheck,i))return!1;if(Ie.tagNameCheck instanceof Function&&Ie.tagNameCheck(i))return!1}if(He&&!Ve[i]){var r=ie(e)||e.parentNode,n=te(e)||e.childNodes;if(n&&r)for(var a=n.length-1;a>=0;--a)r.insertBefore(J(n[a],!0),ee(e))}return ft(e),!0}return e instanceof d&&!gt(e)?(ft(e),!0):"noscript"!==i&&"noembed"!==i||!O(/<\/no(script|embed)/i,e.innerHTML)?(Pe&&3===e.nodeType&&(t=e.textContent,t=A(t,me," "),t=A(t,be," "),e.textContent!==t&&(w(o.removed,{element:e.cloneNode()}),e.textContent=t)),xt("afterSanitizeElements",e,null),!1):(ft(e),!0)},At=function(e,t,i){if(Be&&("id"===t||"name"===t)&&(i in a||i in at))return!1;if(Te&&!Ee[t]&&O(ye,t));else if(Ce&&O(ve,t));else if(!ke[t]||Ee[t]){if(!(St(e)&&(Ie.tagNameCheck instanceof RegExp&&O(Ie.tagNameCheck,e)||Ie.tagNameCheck instanceof Function&&Ie.tagNameCheck(e))&&(Ie.attributeNameCheck instanceof RegExp&&O(Ie.attributeNameCheck,t)||Ie.attributeNameCheck instanceof Function&&Ie.attributeNameCheck(t))||"is"===t&&Ie.allowCustomizedBuiltInElements&&(Ie.tagNameCheck instanceof RegExp&&O(Ie.tagNameCheck,i)||Ie.tagNameCheck instanceof Function&&Ie.tagNameCheck(i))))return!1}else if(Xe[t]);else if(O(_e,A(i,xe,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==S(i,"data:")||!Ye[e])if(je&&!O(we,A(i,xe,"")));else if(i)return!1;return!0},St=function(e){return e.indexOf("-")>0},kt=function(t){var i,r,n,a;xt("beforeSanitizeAttributes",t,null);var s=t.attributes;if(s){var l={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ke};for(a=s.length;a--;){var c=i=s[a],d=c.name,p=c.namespaceURI;if(r="value"===d?i.value:k(i.value),n=fe(d),l.attrName=n,l.attrValue=r,l.keepAttr=!0,l.forceKeepAttr=void 0,xt("uponSanitizeAttribute",t,l),r=l.attrValue,!l.forceKeepAttr&&(mt(d,t),l.keepAttr))if(O(/\/>/i,r))mt(d,t);else{Pe&&(r=A(r,me," "),r=A(r,be," "));var h=fe(t.nodeName);if(At(h,n,r)){if(!Fe||"id"!==n&&"name"!==n||(mt(d,t),r=ze+r),re&&"object"===e(b)&&"function"==typeof b.getAttributeType)if(p);else switch(b.getAttributeType(h,n)){case"TrustedHTML":r=re.createHTML(r);break;case"TrustedScriptURL":r=re.createScriptURL(r)}try{p?t.setAttributeNS(p,d,r):t.setAttribute(d,r),v(o.removed)}catch(e){}}}}xt("afterSanitizeAttributes",t,null)}},Ot=function e(t){var i,o=yt(t);for(xt("beforeSanitizeShadowDOM",t,null);i=o.nextNode();)xt("uponSanitizeShadowNode",i,null),_t(i)||(i.content instanceof s&&e(i.content),kt(i));xt("afterSanitizeShadowDOM",t,null)};return o.sanitize=function(t){var r,a,l,d,p,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((it=!t)&&(t="\x3c!--\x3e"),"string"!=typeof t&&!wt(t)){if("function"!=typeof t.toString)throw I("toString is not a function");if("string"!=typeof(t=t.toString()))throw I("dirty is not a string, aborting")}if(!o.isSupported){if("object"===e(i.toStaticHTML)||"function"==typeof i.toStaticHTML){if("string"==typeof t)return i.toStaticHTML(t);if(wt(t))return i.toStaticHTML(t.outerHTML)}return t}if(Le||lt(h),o.removed=[],"string"==typeof t&&(We=!1),We){if(t.nodeName){var u=fe(t.nodeName);if(!Ae[u]||$e[u])throw I("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof c)1===(a=(r=bt("\x3c!----\x3e")).ownerDocument.importNode(t,!0)).nodeType&&"BODY"===a.nodeName||"HTML"===a.nodeName?r=a:r.appendChild(a);else{if(!Me&&!Pe&&!Re&&-1===t.indexOf("<"))return re&&Ue?re.createHTML(t):t;if(!(r=bt(t)))return Me?null:Ue?ne:""}r&&Ne&&ft(r.firstChild);for(var g=yt(We?t:r);l=g.nextNode();)3===l.nodeType&&l===d||_t(l)||(l.content instanceof s&&Ot(l.content),kt(l),d=l);if(d=null,We)return t;if(Me){if(De)for(p=ce.call(r.ownerDocument);r.firstChild;)p.appendChild(r.firstChild);else p=r;return ke.shadowroot&&(p=pe.call(n,p,!0)),p}var f=Re?r.outerHTML:r.innerHTML;return Re&&Ae["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&O(X,r.ownerDocument.doctype.name)&&(f="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+f),Pe&&(f=A(f,me," "),f=A(f,be," ")),re&&Ue?re.createHTML(f):f},o.setConfig=function(e){lt(e),Le=!0},o.clearConfig=function(){nt=null,Le=!1},o.isValidAttribute=function(e,t,i){nt||lt({});var o=fe(e),r=fe(t);return At(o,r,i)},o.addHook=function(e,t){"function"==typeof t&&(ue[e]=ue[e]||[],w(ue[e],t))},o.removeHook=function(e){if(ue[e])return v(ue[e])},o.removeHooks=function(e){ue[e]&&(ue[e]=[])},o.removeAllHooks=function(){ue={}},o}()}()},function(e,t,i){e.exports=i.p+"images/spin.053f510.svg"},function(e,t,i){e.exports=i.p+"images/top.79df55b.png"},function(e,t,i){e.exports=i.p+"images/note.d7ede44.png"},function(e,t,i){e.exports=i.p+"images/bold.08bc468.png"},function(e,t,i){e.exports=i.p+"images/plus.9b73992.png"},function(e,t,i){e.exports=i.p+"images/min.2ddeb34.png"},function(e,t,i){e.exports=i.p+"images/link.e1e6090.png"},function(e,t,i){e.exports=i.p+"images/pic.ce6b6ab.png"},function(e,t,i){e.exports=i.p+"images/added.e27311a.svg"},function(e,t,i){e.exports=i.p+"images/search_result.2f0ee91.svg"},function(e,t,i){e.exports=i.p+"images/popular.37b00cd.svg"},function(e,t,i){e.exports=i.p+"images/share_by_user.6dc1594.svg"},function(e,t,i){e.exports=i.p+"images/application.87292f2.svg"},function(e,t,i){e.exports=i.p+"images/news.eee6b7c.svg"},function(e,t,i){e.exports=i.p+"images/music_video.605f663.svg"},function(e,t,i){e.exports=i.p+"images/photos.0a1f40b.svg"},function(e,t,i){e.exports=i.p+"images/shopping.9a830b3.svg"},function(e,t,i){e.exports=i.p+"images/social.4dcfc82.svg"},function(e,t,i){e.exports=i.p+"images/sports.7b38f0b.svg"},function(e,t,i){e.exports=i.p+"images/life_style.4460e9b.svg"},function(e,t,i){e.exports=i.p+"images/games.d0c6657.svg"},function(e,t,i){e.exports=i.p+"images/education.eefa8c2.svg"},function(e,t,i){e.exports=i.p+"images/tech.5a20545.svg"},function(e,t,i){e.exports=i.p+"images/finance.ecb9742.svg"},function(e,t,i){e.exports=i.p+"images/read.59ac46b.svg"},function(e,t,i){e.exports=i.p+"images/others.29c4520.svg"},function(e,t,i){e.exports=i.p+"images/search.1ffd553.png"},function(e,t,i){e.exports=i.p+"images/defaultapp.d47f3f3.png"},function(e,t,i){e.exports=i.p+"images/holder.de15c91.png"},function(e,t,i){e.exports=i.p+"images/added.e27311a.svg"},function(e,t,i){e.exports=i.p+"images/networkerr.ab12fcc.png"},function(e,t,i){e.exports=i.p+"images/no-result.80a1e8b.png"},function(e,t,i){e.exports=i.p+"images/permission_img.1fa8fa6.svg"},function(e,t,i){e.exports=i.p+"images/close.0d8a2c5.svg"},function(e,t,i){e.exports=i.p+"images/custom.469c6c9.svg"},function(e,t,i){e.exports=i.p+"images/qrcode.3aadda2.jpg"},function(e,t){var i;!function(){function e(e){this.mode=l.MODE_8BIT_BYTE,this.data=e,this.parsedData=[];for(var t=0,i=this.data.length;i>t;t++){var o=[],r=this.data.charCodeAt(t);r>65536?(o[0]=240|(1835008&r)>>>18,o[1]=128|(258048&r)>>>12,o[2]=128|(4032&r)>>>6,o[3]=128|63&r):r>2048?(o[0]=224|(61440&r)>>>12,o[1]=128|(4032&r)>>>6,o[2]=128|63&r):r>128?(o[0]=192|(1984&r)>>>6,o[1]=128|63&r):o[0]=r,this.parsedData.push(o)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function t(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function o(e,t){if(null==e.length)throw new Error(e.length+"/"+t);for(var i=0;i<e.length&&0==e[i];)i++;this.num=new Array(e.length-i+t);for(var o=0;o<e.length-i;o++)this.num[o]=e[o+i]}function r(e,t){this.totalCount=e,this.dataCount=t}function n(){this.buffer=[],this.length=0}function a(){var e=!1,t=navigator.userAgent;if(/android/i.test(t)){e=!0;var i=t.toString().match(/android ([0-9]\.[0-9])/i);i&&i[1]&&(e=parseFloat(i[1]))}return e}function s(e,t){for(var i=1,o=function(e){var t=encodeURI(e).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return t.length+(t.length!=e?3:0)}(e),r=0,n=g.length;n>=r;r++){var a=0;switch(t){case c.L:a=g[r][0];break;case c.M:a=g[r][1];break;case c.Q:a=g[r][2];break;case c.H:a=g[r][3]}if(a>=o)break;i++}if(i>g.length)throw new Error("Too long data");return i}e.prototype={getLength:function(e){return this.parsedData.length},write:function(e){for(var t=0,i=this.parsedData.length;i>t;t++)e.put(this.parsedData[t],8)}},t.prototype={addData:function(t){var i=new e(t);this.dataList.push(i),this.dataCache=null},isDark:function(e,t){if(0>e||this.moduleCount<=e||0>t||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,i){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var o=0;o<this.moduleCount;o++){this.modules[o]=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++)this.modules[o][r]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,i),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=t.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,i)},setupPositionProbePattern:function(e,t){for(var i=-1;7>=i;i++)if(!(-1>=e+i||this.moduleCount<=e+i))for(var o=-1;7>=o;o++)-1>=t+o||this.moduleCount<=t+o||(this.modules[e+i][t+o]=i>=0&&6>=i&&(0==o||6==o)||o>=0&&6>=o&&(0==i||6==i)||i>=2&&4>=i&&o>=2&&4>=o)},getBestMaskPattern:function(){for(var e=0,t=0,i=0;8>i;i++){this.makeImpl(!0,i);var o=p.getLostPoint(this);(0==i||e>o)&&(e=o,t=i)}return t},createMovieClip:function(e,t,i){var o=e.createEmptyMovieClip(t,i);this.make();for(var r=0;r<this.modules.length;r++)for(var n=1*r,a=0;a<this.modules[r].length;a++){var s=1*a;this.modules[r][a]&&(o.beginFill(0,100),o.moveTo(s,n),o.lineTo(s+1,n),o.lineTo(s+1,n+1),o.lineTo(s,n+1),o.endFill())}return o},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){for(var e=p.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var i=0;i<e.length;i++){var o=e[t],r=e[i];if(null==this.modules[o][r])for(var n=-2;2>=n;n++)for(var a=-2;2>=a;a++)this.modules[o+n][r+a]=-2==n||2==n||-2==a||2==a||0==n&&0==a}},setupTypeNumber:function(e){for(var t=p.getBCHTypeNumber(this.typeNumber),i=0;18>i;i++){var o=!e&&1==(t>>i&1);this.modules[Math.floor(i/3)][i%3+this.moduleCount-8-3]=o}for(i=0;18>i;i++){o=!e&&1==(t>>i&1);this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=o}},setupTypeInfo:function(e,t){for(var i=this.errorCorrectLevel<<3|t,o=p.getBCHTypeInfo(i),r=0;15>r;r++){var n=!e&&1==(o>>r&1);6>r?this.modules[r][8]=n:8>r?this.modules[r+1][8]=n:this.modules[this.moduleCount-15+r][8]=n}for(r=0;15>r;r++){n=!e&&1==(o>>r&1);8>r?this.modules[8][this.moduleCount-r-1]=n:9>r?this.modules[8][15-r-1+1]=n:this.modules[8][15-r-1]=n}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var i=-1,o=this.moduleCount-1,r=7,n=0,a=this.moduleCount-1;a>0;a-=2)for(6==a&&a--;;){for(var s=0;2>s;s++)if(null==this.modules[o][a-s]){var l=!1;n<e.length&&(l=1==(e[n]>>>r&1)),p.getMask(t,o,a-s)&&(l=!l),this.modules[o][a-s]=l,-1==--r&&(n++,r=7)}if(0>(o+=i)||this.moduleCount<=o){o-=i,i=-i;break}}}},t.PAD0=236,t.PAD1=17,t.createData=function(e,i,o){for(var a=r.getRSBlocks(e,i),s=new n,l=0;l<o.length;l++){var c=o[l];s.put(c.mode,4),s.put(c.getLength(),p.getLengthInBits(c.mode,e)),c.write(s)}var d=0;for(l=0;l<a.length;l++)d+=a[l].dataCount;if(s.getLengthInBits()>8*d)throw new Error("code length overflow. ("+s.getLengthInBits()+">"+8*d+")");for(s.getLengthInBits()+4<=8*d&&s.put(0,4);s.getLengthInBits()%8!=0;)s.putBit(!1);for(;!(s.getLengthInBits()>=8*d)&&(s.put(t.PAD0,8),!(s.getLengthInBits()>=8*d));)s.put(t.PAD1,8);return t.createBytes(s,a)},t.createBytes=function(e,t){for(var i=0,r=0,n=0,a=new Array(t.length),s=new Array(t.length),l=0;l<t.length;l++){var c=t[l].dataCount,d=t[l].totalCount-c;r=Math.max(r,c),n=Math.max(n,d),a[l]=new Array(c);for(var h=0;h<a[l].length;h++)a[l][h]=255&e.buffer[h+i];i+=c;var u=p.getErrorCorrectPolynomial(d),g=new o(a[l],u.getLength()-1).mod(u);s[l]=new Array(u.getLength()-1);for(h=0;h<s[l].length;h++){var f=h+g.getLength()-s[l].length;s[l][h]=f>=0?g.get(f):0}}var m=0;for(h=0;h<t.length;h++)m+=t[h].totalCount;var b=new Array(m),y=0;for(h=0;r>h;h++)for(l=0;l<t.length;l++)h<a[l].length&&(b[y++]=a[l][h]);for(h=0;n>h;h++)for(l=0;l<t.length;l++)h<s[l].length&&(b[y++]=s[l][h]);return b};for(var l={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},c={L:1,M:0,Q:3,H:2},d={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},p={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;p.getBCHDigit(t)-p.getBCHDigit(p.G15)>=0;)t^=p.G15<<p.getBCHDigit(t)-p.getBCHDigit(p.G15);return(e<<10|t)^p.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;p.getBCHDigit(t)-p.getBCHDigit(p.G18)>=0;)t^=p.G18<<p.getBCHDigit(t)-p.getBCHDigit(p.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return p.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,i){switch(e){case d.PATTERN000:return(t+i)%2==0;case d.PATTERN001:return t%2==0;case d.PATTERN010:return i%3==0;case d.PATTERN011:return(t+i)%3==0;case d.PATTERN100:return(Math.floor(t/2)+Math.floor(i/3))%2==0;case d.PATTERN101:return t*i%2+t*i%3==0;case d.PATTERN110:return(t*i%2+t*i%3)%2==0;case d.PATTERN111:return(t*i%3+(t+i)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new o([1],0),i=0;e>i;i++)t=t.multiply(new o([1,h.gexp(i)],0));return t},getLengthInBits:function(e,t){if(t>=1&&10>t)switch(e){case l.MODE_NUMBER:return 10;case l.MODE_ALPHA_NUM:return 9;case l.MODE_8BIT_BYTE:case l.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(27>t)switch(e){case l.MODE_NUMBER:return 12;case l.MODE_ALPHA_NUM:return 11;case l.MODE_8BIT_BYTE:return 16;case l.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(41>t))throw new Error("type:"+t);switch(e){case l.MODE_NUMBER:return 14;case l.MODE_ALPHA_NUM:return 13;case l.MODE_8BIT_BYTE:return 16;case l.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),i=0,o=0;t>o;o++)for(var r=0;t>r;r++){for(var n=0,a=e.isDark(o,r),s=-1;1>=s;s++)if(!(0>o+s||o+s>=t))for(var l=-1;1>=l;l++)0>r+l||r+l>=t||(0!=s||0!=l)&&a==e.isDark(o+s,r+l)&&n++;n>5&&(i+=3+n-5)}for(o=0;t-1>o;o++)for(r=0;t-1>r;r++){var c=0;e.isDark(o,r)&&c++,e.isDark(o+1,r)&&c++,e.isDark(o,r+1)&&c++,e.isDark(o+1,r+1)&&c++,(0==c||4==c)&&(i+=3)}for(o=0;t>o;o++)for(r=0;t-6>r;r++)e.isDark(o,r)&&!e.isDark(o,r+1)&&e.isDark(o,r+2)&&e.isDark(o,r+3)&&e.isDark(o,r+4)&&!e.isDark(o,r+5)&&e.isDark(o,r+6)&&(i+=40);for(r=0;t>r;r++)for(o=0;t-6>o;o++)e.isDark(o,r)&&!e.isDark(o+1,r)&&e.isDark(o+2,r)&&e.isDark(o+3,r)&&e.isDark(o+4,r)&&!e.isDark(o+5,r)&&e.isDark(o+6,r)&&(i+=40);var d=0;for(r=0;t>r;r++)for(o=0;t>o;o++)e.isDark(o,r)&&d++;return i+10*(Math.abs(100*d/t/t-50)/5)}},h={glog:function(e){if(1>e)throw new Error("glog("+e+")");return h.LOG_TABLE[e]},gexp:function(e){for(;0>e;)e+=255;for(;e>=256;)e-=255;return h.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},u=0;8>u;u++)h.EXP_TABLE[u]=1<<u;for(u=8;256>u;u++)h.EXP_TABLE[u]=h.EXP_TABLE[u-4]^h.EXP_TABLE[u-5]^h.EXP_TABLE[u-6]^h.EXP_TABLE[u-8];for(u=0;255>u;u++)h.LOG_TABLE[h.EXP_TABLE[u]]=u;o.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),i=0;i<this.getLength();i++)for(var r=0;r<e.getLength();r++)t[i+r]^=h.gexp(h.glog(this.get(i))+h.glog(e.get(r)));return new o(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=h.glog(this.get(0))-h.glog(e.get(0)),i=new Array(this.getLength()),r=0;r<this.getLength();r++)i[r]=this.get(r);for(r=0;r<e.getLength();r++)i[r]^=h.gexp(h.glog(e.get(r))+t);return new o(i,0).mod(e)}},r.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],r.getRSBlocks=function(e,t){var i=r.getRsBlockTable(e,t);if(null==i)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var o=i.length/3,n=[],a=0;o>a;a++)for(var s=i[3*a+0],l=i[3*a+1],c=i[3*a+2],d=0;s>d;d++)n.push(new r(l,c));return n},r.getRsBlockTable=function(e,t){switch(t){case c.L:return r.RS_BLOCK_TABLE[4*(e-1)+0];case c.M:return r.RS_BLOCK_TABLE[4*(e-1)+1];case c.Q:return r.RS_BLOCK_TABLE[4*(e-1)+2];case c.H:return r.RS_BLOCK_TABLE[4*(e-1)+3];default:return}},n.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var i=0;t>i;i++)this.putBit(1==(e>>>t-i-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var g=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],f=function(){var e=function(e,t){this._el=e,this._htOption=t};return e.prototype.draw=function(e){function t(e,t){var i=document.createElementNS("http://www.w3.org/2000/svg",e);for(var o in t)t.hasOwnProperty(o)&&i.setAttribute(o,t[o]);return i}var i=this._htOption,o=this._el,r=e.getModuleCount();Math.floor(i.width/r),Math.floor(i.height/r),this.clear();var n=t("svg",{viewBox:"0 0 "+String(r)+" "+String(r),width:"100%",height:"100%",fill:i.colorLight});n.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),o.appendChild(n),n.appendChild(t("rect",{fill:i.colorLight,width:"100%",height:"100%"})),n.appendChild(t("rect",{fill:i.colorDark,width:"1",height:"1",id:"template"}));for(var a=0;r>a;a++)for(var s=0;r>s;s++)if(e.isDark(a,s)){var l=t("use",{x:String(s),y:String(a)});l.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),n.appendChild(l)}},e.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},e}(),m="svg"===document.documentElement.tagName.toLowerCase()?f:"undefined"!=typeof CanvasRenderingContext2D?function(){function e(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}function t(e,t){var i=this;if(i._fFail=t,i._fSuccess=e,null===i._bSupportDataURI){var o=document.createElement("img"),r=function(){i._bSupportDataURI=!1,i._fFail&&i._fFail.call(i)};return o.onabort=r,o.onerror=r,o.onload=function(){i._bSupportDataURI=!0,i._fSuccess&&i._fSuccess.call(i)},void(o.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")}!0===i._bSupportDataURI&&i._fSuccess?i._fSuccess.call(i):!1===i._bSupportDataURI&&i._fFail&&i._fFail.call(i)}if(this._android&&this._android<=2.1){var i=1/window.devicePixelRatio,o=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(e,t,r,n,a,s,l,c,d){if("nodeName"in e&&/img/i.test(e.nodeName))for(var p=arguments.length-1;p>=1;p--)arguments[p]=arguments[p]*i;else void 0===c&&(arguments[1]*=i,arguments[2]*=i,arguments[3]*=i,arguments[4]*=i);o.apply(this,arguments)}}var r=function(e,t){this._bIsPainted=!1,this._android=a(),this._htOption=t,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=t.width,this._elCanvas.height=t.height,e.appendChild(this._elCanvas),this._el=e,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return r.prototype.draw=function(e){var t=this._elImage,i=this._oContext,o=this._htOption,r=e.getModuleCount(),n=o.width/r,a=o.height/r,s=Math.round(n),l=Math.round(a);t.style.display="none",this.clear();for(var c=0;r>c;c++)for(var d=0;r>d;d++){var p=e.isDark(c,d),h=d*n,u=c*a;i.strokeStyle=p?o.colorDark:o.colorLight,i.lineWidth=1,i.fillStyle=p?o.colorDark:o.colorLight,i.fillRect(h,u,n,a),i.strokeRect(Math.floor(h)+.5,Math.floor(u)+.5,s,l),i.strokeRect(Math.ceil(h)-.5,Math.ceil(u)-.5,s,l)}this._bIsPainted=!0},r.prototype.makeImage=function(){this._bIsPainted&&t.call(this,e)},r.prototype.isPainted=function(){return this._bIsPainted},r.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},r.prototype.round=function(e){return e?Math.floor(1e3*e)/1e3:e},r}():function(){var e=function(e,t){this._el=e,this._htOption=t};return e.prototype.draw=function(e){for(var t=this._htOption,i=this._el,o=e.getModuleCount(),r=Math.floor(t.width/o),n=Math.floor(t.height/o),a=['<table style="border:0;border-collapse:collapse;">'],s=0;o>s;s++){a.push("<tr>");for(var l=0;o>l;l++)a.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+r+"px;height:"+n+"px;background-color:"+(e.isDark(s,l)?t.colorDark:t.colorLight)+';"></td>');a.push("</tr>")}a.push("</table>"),i.innerHTML=a.join("");var c=i.childNodes[0],d=(t.width-c.offsetWidth)/2,p=(t.height-c.offsetHeight)/2;d>0&&p>0&&(c.style.margin=p+"px "+d+"px")},e.prototype.clear=function(){this._el.innerHTML=""},e}();(i=function(e,t){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:c.H},"string"==typeof t&&(t={text:t}),t)for(var i in t)this._htOption[i]=t[i];"string"==typeof e&&(e=document.getElementById(e)),this._htOption.useSVG&&(m=f),this._android=a(),this._el=e,this._oQRCode=null,this._oDrawing=new m(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)}).prototype.makeCode=function(e){this._oQRCode=new t(s(e,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(e),this._oQRCode.make(),this._el.title=e,this._oDrawing.draw(this._oQRCode),this.makeImage()},i.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},i.prototype.clear=function(){this._oDrawing.clear()},i.CorrectLevel=c}(),function(e,t,o){function r(e,t){var o=function(){var e=arguments;if(u)return u.apply(null,e);var t={};return p(e,(function(e){p(e,(function(e,i){t[i]=e}))})),e[0]=t}({},w,t||{},function(e){if(e.dataset)return e.dataset;var t={};return e.hasAttributes()?(p(e.attributes,(function(e){var i=e.name;return 0!==i.indexOf("data-")||(i=i.replace(/^data-/i,"").replace(/-(\w)/g,(function(e,t){return t.toUpperCase()})),void(t[i]=e.value))})),t):{}}(e));o.imageSelector&&(o.image=a(o.imageSelector).map((function(e){return e.src})).join("||")),function(e,t){if(t&&"string"==typeof t){var i=(e.className+" "+t).split(/\s+/),o=" ";p(i,(function(e){o.indexOf(" "+e+" ")<0&&(o+=e+" ")})),e.className=o.slice(1,-1)}}(e,"share-component social-share"),function(e,t){var i=function(e){e.mobileSites.length||(e.mobileSites=e.sites);var t=(f?e.mobileSites:e.sites).slice(0),i=e.disabled;return"string"==typeof t&&(t=t.split(/\s*,\s*/)),"string"==typeof i&&(i=i.split(/\s*,\s*/)),g&&i.push("wechat"),i.length&&p(i,(function(e){t.splice(function(e,t,i){var o;if(t){if(h)return h.call(t,e,i);for(o=t.length,i=i?0>i?Math.max(0,o+i):i:0;o>i;i++)if(i in t&&t[i]===e)return i}return-1}(e,t),1)})),t}(t),o="prepend"==t.mode;p(o?i.reverse():i,(function(i){var r=n(i,t),a=t.initialized?c(e,"icon-"+i):d('<a class="social-share-icon icon-'+i+'"></a>');return!a.length||(a[0].href=r,"wechat"===i?a[0].tabindex=-1:a[0].target="_blank",void(t.initialized||(o?e.insertBefore(a[0],e.firstChild):e.appendChild(a[0]))))}))}(e,o),function(e,t){var o=c(e,"icon-wechat","a");if(0===o.length)return!1;var r=d('<div class="wechat-qrcode"><h4>'+t.wechatQrcodeTitle+'</h4><div class="qrcode"></div><div class="help">'+t.wechatQrcodeHelper+"</div></div>"),n=c(r[0],"qrcode","div");o[0].appendChild(r[0]),new i(n[0],{text:t.url,width:t.wechatQrcodeSize,height:t.wechatQrcodeSize})}(e,o),e.initialized=!0}function n(e,t){return t.summary=t.description,x[e].replace(/\{\{(\w)(\w*)\}\}/g,(function(i,r,n){var a=e+r+n.toLowerCase();return n=(r+n).toLowerCase(),encodeURIComponent((t[a]===o?t[n]:t[a])||"")}))}function a(i){return(t.querySelectorAll||e.jQuery||e.Zepto||s).call(t,i)}function s(e){var i=[];return p(e.split(/\s*,\s*/),(function(o){var r=o.match(/([#.])(\w+)/);if(null===r)throw Error("Supports only simple single #ID or .CLASS selector.");if(r[1]){var n=t.getElementById(r[2]);n&&i.push(n)}i=i.concat(c(e))})),i}function l(e){return(t.getElementsByName(e)[0]||0).content}function c(e,t,i){if(e.getElementsByClassName)return e.getElementsByClassName(t);var o=[],r=e.getElementsByTagName(i||"*");return t=" "+t+" ",p(r,(function(e){(" "+(e.className||"")+" ").indexOf(t)>=0&&o.push(e)})),o}function d(e){var i=t.createElement("div");return i.innerHTML=e,i.childNodes}function p(e,t){var i=e.length;if(i===o){for(var r in e)if(e.hasOwnProperty(r)&&!1===t.call(e[r],e[r],r))break}else for(var n=0;i>n&&!1!==t.call(e[n],e[n],n);n++);}var h=Array.prototype.indexOf,u=Object.assign,g=/MicroMessenger/i.test(navigator.userAgent),f=t.documentElement.clientWidth<=768,m=(t.images[0]||0).src||"",b=l("site")||l("Site")||t.title,y=l("title")||l("Title")||t.title,v=l("description")||l("Description")||"",w={url:location.href,origin:location.origin,source:b,title:y,description:v,image:m,imageSelector:o,weiboKey:"",wechatQrcodeTitle:"微信扫一扫：分享",wechatQrcodeHelper:"<p>微信里点“发现”，扫一下</p><p>二维码便可将本文分享至朋友圈。</p>",wechatQrcodeSize:100,sites:["weibo","qq","wechat","tencent","douban","qzone","linkedin","diandian","facebook","twitter","google"],mobileSites:[],disabled:[],initialized:!1},x={qzone:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url={{URL}}&title={{TITLE}}&desc={{DESCRIPTION}}&summary={{SUMMARY}}&site={{SOURCE}}",qq:"http://connect.qq.com/widget/shareqq/index.html?url={{URL}}&title={{TITLE}}&source={{SOURCE}}&desc={{DESCRIPTION}}&pics={{IMAGE}}",tencent:"http://share.v.t.qq.com/index.php?c=share&a=index&title={{TITLE}}&url={{URL}}&pic={{IMAGE}}",weibo:"http://service.weibo.com/share/share.php?url={{URL}}&title={{TITLE}}&pic={{IMAGE}}&appkey={{WEIBOKEY}}",wechat:"javascript:",douban:"http://shuo.douban.com/!service/share?href={{URL}}&name={{TITLE}}&text={{DESCRIPTION}}&image={{IMAGE}}&starid=0&aid=0&style=11",diandian:"http://www.diandian.com/share?lo={{URL}}&ti={{TITLE}}&type=link",linkedin:"http://www.linkedin.com/shareArticle?mini=true&ro=true&title={{TITLE}}&url={{URL}}&summary={{SUMMARY}}&source={{SOURCE}}&armin=armin",facebook:"https://www.facebook.com/sharer/sharer.php?u={{URL}}",twitter:"https://twitter.com/intent/tweet?text={{TITLE}}&url={{URL}}&via={{ORIGIN}}",google:"https://plus.google.com/share?url={{URL}}"};e.socialShare=function(e,t){(e="string"==typeof e?a(e):e).length===o&&(e=[e]),p(e,(function(e){e.initialized||r(e,t)}))},function(i){var o="addEventListener",r=t[o]?"":"on";~t.readyState.indexOf("m")?i():"load DOMContentLoaded readystatechange".replace(/\w+/g,(function(n,a){(a?t:e)[r?"attachEvent":o](r+n,(function(){i&&(6>a||~t.readyState.indexOf("m"))&&(i(),i=0)}),!1)}))}((function(){socialShare(".social-share, .share-component")}))}(window,document)},function(e,t,i){e.exports=i.p+"images/0.eaad457.svg"},function(e,t,i){e.exports=i.p+"images/10.4c57f00.svg"},function(e,t,i){e.exports=i.p+"images/15.d2b4e87.svg"},function(e,t,i){e.exports=i.p+"images/20.151fae4.svg"},function(e,t,i){e.exports=i.p+"images/25.08e5fd2.svg"},function(e,t,i){e.exports=i.p+"images/0.46cff52.svg"},function(e,t,i){e.exports=i.p+"images/10.41414fe.svg"},function(e,t,i){e.exports=i.p+"images/15.541edc8.svg"},function(e,t,i){e.exports=i.p+"images/20.7dc2d60.svg"},function(e,t,i){e.exports=i.p+"images/25.b869696.svg"},function(e,t,i){e.exports=i.p+"images/femael.fe86af2.png"},function(e,t,i){e.exports=i.p+"images/male.72d961f.png"},function(e,t,i){const o=i(881),r=i(882),n=i(900),a=i(901);function s(e,t,i,n,a){const s=[].slice.call(arguments,1),l=s.length,c="function"==typeof s[l-1];if(!c&&!o())throw new Error("Callback required as last argument");if(!c){if(l<1)throw new Error("Too few arguments provided");return 1===l?(i=t,t=n=void 0):2!==l||t.getContext||(n=i,i=t,t=void 0),new Promise((function(o,a){try{const a=r.create(i,n);o(e(a,t,n))}catch(e){a(e)}}))}if(l<2)throw new Error("Too few arguments provided");2===l?(a=i,i=t,t=n=void 0):3===l&&(t.getContext&&void 0===a?(a=n,n=void 0):(a=n,n=i,i=t,t=void 0));try{const o=r.create(i,n);a(null,e(o,t,n))}catch(e){a(e)}}t.create=r.create,t.toCanvas=s.bind(null,n.render),t.toDataURL=s.bind(null,n.renderToDataURL),t.toString=s.bind(null,(function(e,t,i){return a.render(e,i)}))},function(e,t){e.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},function(e,t,i){const o=i(766),r=i(778),n=i(883),a=i(884),s=i(885),l=i(886),c=i(887),d=i(797),p=i(888),h=i(891),u=i(892),g=i(767),f=i(893);function m(e,t,i){const o=e.size,r=u.getEncodedBits(t,i);let n,a;for(n=0;n<15;n++)a=1==(r>>n&1),n<6?e.set(n,8,a,!0):n<8?e.set(n+1,8,a,!0):e.set(o-15+n,8,a,!0),n<8?e.set(8,o-n-1,a,!0):n<9?e.set(8,15-n-1+1,a,!0):e.set(8,15-n-1,a,!0);e.set(o-8,8,1,!0)}function b(e,t,i){const r=new n;i.forEach((function(t){r.put(t.mode.bit,4),r.put(t.getLength(),g.getCharCountIndicator(t.mode,e)),t.write(r)}));const a=8*(o.getSymbolTotalCodewords(e)-d.getTotalCodewordsCount(e,t));for(r.getLengthInBits()+4<=a&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(0);const s=(a-r.getLengthInBits())/8;for(let e=0;e<s;e++)r.put(e%2?17:236,8);return function(e,t,i){const r=o.getSymbolTotalCodewords(t),n=d.getTotalCodewordsCount(t,i),a=r-n,s=d.getBlocksCount(t,i),l=s-r%s,c=Math.floor(r/s),h=Math.floor(a/s),u=h+1,g=c-h,f=new p(g);let m=0;const b=new Array(s),y=new Array(s);let v=0;const w=new Uint8Array(e.buffer);for(let e=0;e<s;e++){const t=e<l?h:u;b[e]=w.slice(m,m+t),y[e]=f.encode(b[e]),m+=t,v=Math.max(v,t)}const x=new Uint8Array(r);let _,A,S=0;for(_=0;_<v;_++)for(A=0;A<s;A++)_<b[A].length&&(x[S++]=b[A][_]);for(_=0;_<g;_++)for(A=0;A<s;A++)x[S++]=y[A][_];return x}(r,e,t)}function y(e,t,i,r){let n;if(Array.isArray(e))n=f.fromArray(e);else{if("string"!=typeof e)throw new Error("Invalid data");{let o=t;if(!o){const t=f.rawSplit(e);o=h.getBestVersionForData(t,i)}n=f.fromString(e,o||40)}}const d=h.getBestVersionForData(n,i);if(!d)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<d)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+d+".\n")}else t=d;const p=b(t,i,n),u=o.getSymbolSize(t),g=new a(u);return function(e,t){const i=e.size,o=l.getPositions(t);for(let t=0;t<o.length;t++){const r=o[t][0],n=o[t][1];for(let t=-1;t<=7;t++)if(!(r+t<=-1||i<=r+t))for(let o=-1;o<=7;o++)n+o<=-1||i<=n+o||(t>=0&&t<=6&&(0===o||6===o)||o>=0&&o<=6&&(0===t||6===t)||t>=2&&t<=4&&o>=2&&o<=4?e.set(r+t,n+o,!0,!0):e.set(r+t,n+o,!1,!0))}}(g,t),function(e){const t=e.size;for(let i=8;i<t-8;i++){const t=i%2==0;e.set(i,6,t,!0),e.set(6,i,t,!0)}}(g),function(e,t){const i=s.getPositions(t);for(let t=0;t<i.length;t++){const o=i[t][0],r=i[t][1];for(let t=-2;t<=2;t++)for(let i=-2;i<=2;i++)-2===t||2===t||-2===i||2===i||0===t&&0===i?e.set(o+t,r+i,!0,!0):e.set(o+t,r+i,!1,!0)}}(g,t),m(g,i,0),t>=7&&function(e,t){const i=e.size,o=h.getEncodedBits(t);let r,n,a;for(let t=0;t<18;t++)r=Math.floor(t/3),n=t%3+i-8-3,a=1==(o>>t&1),e.set(r,n,a,!0),e.set(n,r,a,!0)}(g,t),function(e,t){const i=e.size;let o=-1,r=i-1,n=7,a=0;for(let s=i-1;s>0;s-=2)for(6===s&&s--;;){for(let i=0;i<2;i++)if(!e.isReserved(r,s-i)){let o=!1;a<t.length&&(o=1==(t[a]>>>n&1)),e.set(r,s-i,o),n--,-1===n&&(a++,n=7)}if(r+=o,r<0||i<=r){r-=o,o=-o;break}}}(g,p),isNaN(r)&&(r=c.getBestMask(g,m.bind(null,g,i))),c.applyMask(r,g),m(g,i,r),{modules:g,version:t,errorCorrectionLevel:i,maskPattern:r,segments:n}}t.create=function(e,t){if(void 0===e||""===e)throw new Error("No input text");let i,n,a=r.M;return void 0!==t&&(a=r.from(t.errorCorrectionLevel,r.M),i=h.from(t.version),n=c.from(t.maskPattern),t.toSJISFunc&&o.setToSJISFunction(t.toSJISFunc)),y(e,i,a,n)}},function(e,t){function i(){this.buffer=[],this.length=0}i.prototype={get:function(e){const t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(let i=0;i<t;i++)this.putBit(1==(e>>>t-i-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=i},function(e,t){function i(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}i.prototype.set=function(e,t,i,o){const r=e*this.size+t;this.data[r]=i,o&&(this.reservedBit[r]=!0)},i.prototype.get=function(e,t){return this.data[e*this.size+t]},i.prototype.xor=function(e,t,i){this.data[e*this.size+t]^=i},i.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},e.exports=i},function(e,t,i){const o=i(766).getSymbolSize;t.getRowColCoords=function(e){if(1===e)return[];const t=Math.floor(e/7)+2,i=o(e),r=145===i?26:2*Math.ceil((i-13)/(2*t-2)),n=[i-7];for(let e=1;e<t-1;e++)n[e]=n[e-1]-r;return n.push(6),n.reverse()},t.getPositions=function(e){const i=[],o=t.getRowColCoords(e),r=o.length;for(let e=0;e<r;e++)for(let t=0;t<r;t++)0===e&&0===t||0===e&&t===r-1||e===r-1&&0===t||i.push([o[e],o[t]]);return i}},function(e,t,i){const o=i(766).getSymbolSize;t.getPositions=function(e){const t=o(e);return[[0,0],[t-7,0],[0,t-7]]}},function(e,t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const i=3,o=3,r=40,n=10;function a(e,i,o){switch(e){case t.Patterns.PATTERN000:return(i+o)%2==0;case t.Patterns.PATTERN001:return i%2==0;case t.Patterns.PATTERN010:return o%3==0;case t.Patterns.PATTERN011:return(i+o)%3==0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(o/3))%2==0;case t.Patterns.PATTERN101:return i*o%2+i*o%3==0;case t.Patterns.PATTERN110:return(i*o%2+i*o%3)%2==0;case t.Patterns.PATTERN111:return(i*o%3+(i+o)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}}t.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(e){const t=e.size;let o=0,r=0,n=0,a=null,s=null;for(let l=0;l<t;l++){r=n=0,a=s=null;for(let c=0;c<t;c++){let t=e.get(l,c);t===a?r++:(r>=5&&(o+=i+(r-5)),a=t,r=1),t=e.get(c,l),t===s?n++:(n>=5&&(o+=i+(n-5)),s=t,n=1)}r>=5&&(o+=i+(r-5)),n>=5&&(o+=i+(n-5))}return o},t.getPenaltyN2=function(e){const t=e.size;let i=0;for(let o=0;o<t-1;o++)for(let r=0;r<t-1;r++){const t=e.get(o,r)+e.get(o,r+1)+e.get(o+1,r)+e.get(o+1,r+1);4!==t&&0!==t||i++}return i*o},t.getPenaltyN3=function(e){const t=e.size;let i=0,o=0,n=0;for(let r=0;r<t;r++){o=n=0;for(let a=0;a<t;a++)o=o<<1&2047|e.get(r,a),a>=10&&(1488===o||93===o)&&i++,n=n<<1&2047|e.get(a,r),a>=10&&(1488===n||93===n)&&i++}return i*r},t.getPenaltyN4=function(e){let t=0;const i=e.data.length;for(let o=0;o<i;o++)t+=e.data[o];return Math.abs(Math.ceil(100*t/i/5)-10)*n},t.applyMask=function(e,t){const i=t.size;for(let o=0;o<i;o++)for(let r=0;r<i;r++)t.isReserved(r,o)||t.xor(r,o,a(e,r,o))},t.getBestMask=function(e,i){const o=Object.keys(t.Patterns).length;let r=0,n=1/0;for(let a=0;a<o;a++){i(a),t.applyMask(a,e);const o=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(a,e),o<n&&(n=o,r=a)}return r}},function(e,t,i){const o=i(889);function r(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}r.prototype.initialize=function(e){this.degree=e,this.genPoly=o.generateECPolynomial(this.degree)},r.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const i=o.mod(t,this.genPoly),r=this.degree-i.length;if(r>0){const e=new Uint8Array(this.degree);return e.set(i,r),e}return i},e.exports=r},function(e,t,i){const o=i(890);t.mul=function(e,t){const i=new Uint8Array(e.length+t.length-1);for(let r=0;r<e.length;r++)for(let n=0;n<t.length;n++)i[r+n]^=o.mul(e[r],t[n]);return i},t.mod=function(e,t){let i=new Uint8Array(e);for(;i.length-t.length>=0;){const e=i[0];for(let r=0;r<t.length;r++)i[r]^=o.mul(t[r],e);let r=0;for(;r<i.length&&0===i[r];)r++;i=i.slice(r)}return i},t.generateECPolynomial=function(e){let i=new Uint8Array([1]);for(let r=0;r<e;r++)i=t.mul(i,new Uint8Array([1,o.exp(r)]));return i}},function(e,t){const i=new Uint8Array(512),o=new Uint8Array(256);!function(){let e=1;for(let t=0;t<255;t++)i[t]=e,o[e]=t,e<<=1,256&e&&(e^=285);for(let e=255;e<512;e++)i[e]=i[e-255]}(),t.log=function(e){if(e<1)throw new Error("log("+e+")");return o[e]},t.exp=function(e){return i[e]},t.mul=function(e,t){return 0===e||0===t?0:i[o[e]+o[t]]}},function(e,t,i){const o=i(766),r=i(797),n=i(778),a=i(767),s=i(798),l=o.getBCHDigit(7973);function c(e,t){return a.getCharCountIndicator(e,t)+4}function d(e,t){let i=0;return e.forEach((function(e){const o=c(e.mode,t);i+=o+e.getBitsLength()})),i}t.from=function(e,t){return s.isValid(e)?parseInt(e,10):t},t.getCapacity=function(e,t,i){if(!s.isValid(e))throw new Error("Invalid QR Code version");void 0===i&&(i=a.BYTE);const n=8*(o.getSymbolTotalCodewords(e)-r.getTotalCodewordsCount(e,t));if(i===a.MIXED)return n;const l=n-c(i,e);switch(i){case a.NUMERIC:return Math.floor(l/10*3);case a.ALPHANUMERIC:return Math.floor(l/11*2);case a.KANJI:return Math.floor(l/13);case a.BYTE:default:return Math.floor(l/8)}},t.getBestVersionForData=function(e,i){let o;const r=n.from(i,n.M);if(Array.isArray(e)){if(e.length>1)return function(e,i){for(let o=1;o<=40;o++){if(d(e,o)<=t.getCapacity(o,i,a.MIXED))return o}}(e,r);if(0===e.length)return 1;o=e[0]}else o=e;return function(e,i,o){for(let r=1;r<=40;r++)if(i<=t.getCapacity(r,o,e))return r}(o.mode,o.getLength(),r)},t.getEncodedBits=function(e){if(!s.isValid(e)||e<7)throw new Error("Invalid QR Code version");let t=e<<12;for(;o.getBCHDigit(t)-l>=0;)t^=7973<<o.getBCHDigit(t)-l;return e<<12|t}},function(e,t,i){const o=i(766),r=o.getBCHDigit(1335);t.getEncodedBits=function(e,t){const i=e.bit<<3|t;let n=i<<10;for(;o.getBCHDigit(n)-r>=0;)n^=1335<<o.getBCHDigit(n)-r;return 21522^(i<<10|n)}},function(e,t,i){const o=i(767),r=i(894),n=i(895),a=i(896),s=i(898),l=i(799),c=i(766),d=i(899);function p(e){return unescape(encodeURIComponent(e)).length}function h(e,t,i){const o=[];let r;for(;null!==(r=e.exec(i));)o.push({data:r[0],index:r.index,mode:t,length:r[0].length});return o}function u(e){const t=h(l.NUMERIC,o.NUMERIC,e),i=h(l.ALPHANUMERIC,o.ALPHANUMERIC,e);let r,n;c.isKanjiModeEnabled()?(r=h(l.BYTE,o.BYTE,e),n=h(l.KANJI,o.KANJI,e)):(r=h(l.BYTE_KANJI,o.BYTE,e),n=[]);return t.concat(i,r,n).sort((function(e,t){return e.index-t.index})).map((function(e){return{data:e.data,mode:e.mode,length:e.length}}))}function g(e,t){switch(t){case o.NUMERIC:return r.getBitsLength(e);case o.ALPHANUMERIC:return n.getBitsLength(e);case o.KANJI:return s.getBitsLength(e);case o.BYTE:return a.getBitsLength(e)}}function f(e,t){let i;const l=o.getBestModeForData(e);if(i=o.from(t,l),i!==o.BYTE&&i.bit<l.bit)throw new Error('"'+e+'" cannot be encoded with mode '+o.toString(i)+".\n Suggested mode is: "+o.toString(l));switch(i!==o.KANJI||c.isKanjiModeEnabled()||(i=o.BYTE),i){case o.NUMERIC:return new r(e);case o.ALPHANUMERIC:return new n(e);case o.KANJI:return new s(e);case o.BYTE:return new a(e)}}t.fromArray=function(e){return e.reduce((function(e,t){return"string"==typeof t?e.push(f(t,null)):t.data&&e.push(f(t.data,t.mode)),e}),[])},t.fromString=function(e,i){const r=function(e,t){const i={},r={start:{}};let n=["start"];for(let a=0;a<e.length;a++){const s=e[a],l=[];for(let e=0;e<s.length;e++){const c=s[e],d=""+a+e;l.push(d),i[d]={node:c,lastCount:0},r[d]={};for(let e=0;e<n.length;e++){const a=n[e];i[a]&&i[a].node.mode===c.mode?(r[a][d]=g(i[a].lastCount+c.length,c.mode)-g(i[a].lastCount,c.mode),i[a].lastCount+=c.length):(i[a]&&(i[a].lastCount=c.length),r[a][d]=g(c.length,c.mode)+4+o.getCharCountIndicator(c.mode,t))}}n=l}for(let e=0;e<n.length;e++)r[n[e]].end=0;return{map:r,table:i}}(function(e){const t=[];for(let i=0;i<e.length;i++){const r=e[i];switch(r.mode){case o.NUMERIC:t.push([r,{data:r.data,mode:o.ALPHANUMERIC,length:r.length},{data:r.data,mode:o.BYTE,length:r.length}]);break;case o.ALPHANUMERIC:t.push([r,{data:r.data,mode:o.BYTE,length:r.length}]);break;case o.KANJI:t.push([r,{data:r.data,mode:o.BYTE,length:p(r.data)}]);break;case o.BYTE:t.push([{data:r.data,mode:o.BYTE,length:p(r.data)}])}}return t}(u(e,c.isKanjiModeEnabled())),i),n=d.find_path(r.map,"start","end"),a=[];for(let e=1;e<n.length-1;e++)a.push(r.table[n[e]].node);return t.fromArray(function(e){return e.reduce((function(e,t){const i=e.length-1>=0?e[e.length-1]:null;return i&&i.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)}),[])}(a))},t.rawSplit=function(e){return t.fromArray(u(e,c.isKanjiModeEnabled()))}},function(e,t,i){const o=i(767);function r(e){this.mode=o.NUMERIC,this.data=e.toString()}r.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(e){let t,i,o;for(t=0;t+3<=this.data.length;t+=3)i=this.data.substr(t,3),o=parseInt(i,10),e.put(o,10);const r=this.data.length-t;r>0&&(i=this.data.substr(t),o=parseInt(i,10),e.put(o,3*r+1))},e.exports=r},function(e,t,i){const o=i(767),r=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function n(e){this.mode=o.ALPHANUMERIC,this.data=e}n.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let i=45*r.indexOf(this.data[t]);i+=r.indexOf(this.data[t+1]),e.put(i,11)}this.data.length%2&&e.put(r.indexOf(this.data[t]),6)},e.exports=n},function(e,t,i){const o=i(897),r=i(767);function n(e){this.mode=r.BYTE,"string"==typeof e&&(e=o(e)),this.data=new Uint8Array(e)}n.getBitsLength=function(e){return 8*e},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(e){for(let t=0,i=this.data.length;t<i;t++)e.put(this.data[t],8)},e.exports=n},function(e,t,i){"use strict";e.exports=function(e){for(var t=[],i=e.length,o=0;o<i;o++){var r=e.charCodeAt(o);if(r>=55296&&r<=56319&&i>o+1){var n=e.charCodeAt(o+1);n>=56320&&n<=57343&&(r=1024*(r-55296)+n-56320+65536,o+=1)}r<128?t.push(r):r<2048?(t.push(r>>6|192),t.push(63&r|128)):r<55296||r>=57344&&r<65536?(t.push(r>>12|224),t.push(r>>6&63|128),t.push(63&r|128)):r>=65536&&r<=1114111?(t.push(r>>18|240),t.push(r>>12&63|128),t.push(r>>6&63|128),t.push(63&r|128)):t.push(239,191,189)}return new Uint8Array(t).buffer}},function(e,t,i){const o=i(767),r=i(766);function n(e){this.mode=o.KANJI,this.data=e}n.getBitsLength=function(e){return 13*e},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let i=r.toSJIS(this.data[t]);if(i>=33088&&i<=40956)i-=33088;else{if(!(i>=57408&&i<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");i-=49472}i=192*(i>>>8&255)+(255&i),e.put(i,13)}},e.exports=n},function(e,t,i){"use strict";var o={single_source_shortest_paths:function(e,t,i){var r={},n={};n[t]=0;var a,s,l,c,d,p,h,u=o.PriorityQueue.make();for(u.push(t,0);!u.empty();)for(l in s=(a=u.pop()).value,c=a.cost,d=e[s]||{})d.hasOwnProperty(l)&&(p=c+d[l],h=n[l],(void 0===n[l]||h>p)&&(n[l]=p,u.push(l,p),r[l]=s));if(void 0!==i&&void 0===n[i]){var g=["Could not find a path from ",t," to ",i,"."].join("");throw new Error(g)}return r},extract_shortest_path_from_predecessor_list:function(e,t){for(var i=[],o=t;o;)i.push(o),e[o],o=e[o];return i.reverse(),i},find_path:function(e,t,i){var r=o.single_source_shortest_paths(e,t,i);return o.extract_shortest_path_from_predecessor_list(r,i)},PriorityQueue:{make:function(e){var t,i=o.PriorityQueue,r={};for(t in e=e||{},i)i.hasOwnProperty(t)&&(r[t]=i[t]);return r.queue=[],r.sorter=e.sorter||i.default_sorter,r},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var i={value:e,cost:t};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=o},function(e,t,i){const o=i(800);t.render=function(e,t,i){let r=i,n=t;void 0!==r||t&&t.getContext||(r=t,t=void 0),t||(n=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),r=o.getOptions(r);const a=o.getImageWidth(e.modules.size,r),s=n.getContext("2d"),l=s.createImageData(a,a);return o.qrToImageData(l.data,e,r),function(e,t,i){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=i,t.width=i,t.style.height=i+"px",t.style.width=i+"px"}(s,n,a),s.putImageData(l,0,0),n},t.renderToDataURL=function(e,i,o){let r=o;void 0!==r||i&&i.getContext||(r=i,i=void 0),r||(r={});const n=t.render(e,i,r),a=r.type||"image/png",s=r.rendererOpts||{};return n.toDataURL(a,s.quality)}},function(e,t,i){const o=i(800);function r(e,t){const i=e.a/255,o=t+'="'+e.hex+'"';return i<1?o+" "+t+'-opacity="'+i.toFixed(2).slice(1)+'"':o}function n(e,t,i){let o=e+t;return void 0!==i&&(o+=" "+i),o}t.render=function(e,t,i){const a=o.getOptions(t),s=e.modules.size,l=e.modules.data,c=s+2*a.margin,d=a.color.light.a?"<path "+r(a.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",p="<path "+r(a.color.dark,"stroke")+' d="'+function(e,t,i){let o="",r=0,a=!1,s=0;for(let l=0;l<e.length;l++){const c=Math.floor(l%t),d=Math.floor(l/t);c||a||(a=!0),e[l]?(s++,l>0&&c>0&&e[l-1]||(o+=a?n("M",c+i,.5+d+i):n("m",r,0),r=0,a=!1),c+1<t&&e[l+1]||(o+=n("h",s),s=0)):r++}return o}(l,s,a.margin)+'"/>',h='viewBox="0 0 '+c+" "+c+'"',u='<svg xmlns="http://www.w3.org/2000/svg" '+(a.width?'width="'+a.width+'" height="'+a.width+'" ':"")+h+' shape-rendering="crispEdges">'+d+p+"</svg>\n";return"function"==typeof i&&i(null,u),u}},function(e,t,i){e.exports=i.p+"images/refresh.6bb41c0.svg"},function(e,t,i){e.exports=i.p+"images/next.42c899e.svg"},function(e,t,i){e.exports=i.p+"images/remove-account.dbff389.svg"},function(e,t,i){e.exports=i.p+"images/edit.1f58dcd.svg"},function(e,t,i){e.exports=i.p+"images/icon-download.1ceeaa3.svg"},function(e,t,i){e.exports=i.p+"images/pc.2c24744.svg"},function(e,t,i){e.exports=i.p+"images/pad.ad04b17.svg"},function(e,t,i){e.exports=i.p+"images/mobile.2e898a9.svg"},function(e,t,i){e.exports=i.p+"images/tips.c8b5b9a.svg"},function(e,t,i){e.exports=i.p+"images/avator.d181190.png"},function(e,t,i){e.exports=i.p+"images/douban_icon.a2ee6f8.png"},function(e,t,i){e.exports=i.p+"images/facebook_icon.8214bbc.png"},function(e,t,i){e.exports=i.p+"images/google_icon.e6f4a7e.png"},function(e,t,i){e.exports=i.p+"images/linked_icon.81a2e4d.png"},function(e,t,i){e.exports=i.p+"images/qq_icon.cc7a6d4.png"},function(e,t,i){e.exports=i.p+"images/all.056e60b.png"},function(e,t,i){e.exports=i.p+"images/barn-images.06fdb09.png"},function(e,t,i){e.exports=i.p+"images/bing.63f1e9a.png"},function(e,t,i){e.exports=i.p+"images/free-nature-stock.055d792.png"},function(e,t,i){e.exports=i.p+"images/infinity.a805a8d.png"},function(e,t,i){e.exports=i.p+"images/jay-mantri.c4e3fad.png"},function(e,t,i){e.exports=i.p+"images/life-of-pix.8d05ce1.png"},function(e,t,i){e.exports=i.p+"images/mmt.4fd5f2c.png"},function(e,t,i){e.exports=i.p+"images/picography.23b7fc6.png"},function(e,t,i){e.exports=i.p+"images/realistic-shots.fe0d48a.png"},function(e,t,i){e.exports=i.p+"images/skitter-photo.f0d1f9c.png"},function(e,t,i){e.exports=i.p+"images/startup-stock-photos.f18e9f1.png"},function(e,t,i){e.exports=i.p+"images/unsplash.40b97f2.png"},function(e,t,i){e.exports=i.p+"images/twitter_icon.9cd5d0f.png"},function(e,t,i){e.exports=i.p+"images/xinlang_icon.8ede9b1.png"},function(e,t,i){e.exports=i.p+"images/zone_icon.47ae7d6.png"},function(e,t,i){e.exports=i.p+"images/wallpaper_download.46fc473.png"},function(e,t,i){e.exports=function e(t,i,o){function r(a,s){if(!i[a]){if(!t[a]){if(n)return n(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[a]={exports:{}};t[a][0].call(c.exports,(function(e){return r(t[a][1][e]||e)}),c,c.exports,e,t,i,o)}return i[a].exports}for(var n=!1,a=0;a<o.length;a++)r(o[a]);return r}({1:[function(e,t,i){"use strict";var o=e("inherits"),r=e("multimath"),n=e("./mm_unsharp_mask"),a=e("./mm_resize");function s(e){var t=e||[],i={js:t.indexOf("js")>=0,wasm:t.indexOf("wasm")>=0};r.call(this,i),this.features={js:i.js,wasm:i.wasm&&this.has_wasm()},this.use(n),this.use(a)}o(s,r),s.prototype.resizeAndUnsharp=function(e,t){var i=this.resize(e,t);return e.unsharpAmount&&this.unsharp_mask(i,e.toWidth,e.toHeight,e.unsharpAmount,e.unsharpRadius,e.unsharpThreshold),i},t.exports=s},{"./mm_resize":4,"./mm_unsharp_mask":9,inherits:19,multimath:20}],2:[function(e,t,i){"use strict";function o(e){return e<0?0:e>255?255:e}t.exports={convolveHorizontally:function(e,t,i,r,n,a){var s,l,c,d,p,h,u,g,f,m,b,y=0,v=0;for(f=0;f<r;f++){for(p=0,m=0;m<n;m++){for(h=a[p++],u=a[p++],g=y+4*h|0,s=l=c=d=0;u>0;u--)d=d+(b=a[p++])*e[g+3]|0,c=c+b*e[g+2]|0,l=l+b*e[g+1]|0,s=s+b*e[g]|0,g=g+4|0;t[v+3]=o(d+8192>>14),t[v+2]=o(c+8192>>14),t[v+1]=o(l+8192>>14),t[v]=o(s+8192>>14),v=v+4*r|0}v=4*(f+1)|0,y=(f+1)*i*4|0}},convolveVertically:function(e,t,i,r,n,a){var s,l,c,d,p,h,u,g,f,m,b,y=0,v=0;for(f=0;f<r;f++){for(p=0,m=0;m<n;m++){for(h=a[p++],u=a[p++],g=y+4*h|0,s=l=c=d=0;u>0;u--)d=d+(b=a[p++])*e[g+3]|0,c=c+b*e[g+2]|0,l=l+b*e[g+1]|0,s=s+b*e[g]|0,g=g+4|0;t[v+3]=o(d+8192>>14),t[v+2]=o(c+8192>>14),t[v+1]=o(l+8192>>14),t[v]=o(s+8192>>14),v=v+4*r|0}v=4*(f+1)|0,y=(f+1)*i*4|0}}}},{}],3:[function(e,t,i){"use strict";t.exports="AGFzbQEAAAAADAZkeWxpbmsAAAAAAAEXA2AAAGAGf39/f39/AGAHf39/f39/fwACDwEDZW52Bm1lbW9yeQIAAAMEAwABAgYGAX8AQQALB1cFEV9fd2FzbV9jYWxsX2N0b3JzAAAIY29udm9sdmUAAQpjb252b2x2ZUhWAAIMX19kc29faGFuZGxlAwAYX193YXNtX2FwcGx5X2RhdGFfcmVsb2NzAAAK7AMDAwABC8YDAQ9/AkAgA0UNACAERQ0AA0AgDCENQQAhE0EAIQcDQCAHQQJqIQYCfyAHQQF0IAVqIgcuAQIiFEUEQEGAwAAhCEGAwAAhCUGAwAAhCkGAwAAhCyAGDAELIBIgBy4BAGohCEEAIQsgFCEHQQAhDiAGIQlBACEPQQAhEANAIAUgCUEBdGouAQAiESAAIAhBAnRqKAIAIgpBGHZsIBBqIRAgCkH/AXEgEWwgC2ohCyAKQRB2Qf8BcSARbCAPaiEPIApBCHZB/wFxIBFsIA5qIQ4gCEEBaiEIIAlBAWohCSAHQQFrIgcNAAsgC0GAQGshCCAOQYBAayEJIA9BgEBrIQogEEGAQGshCyAGIBRqCyEHIAEgDUECdGogCUEOdSIGQf8BIAZB/wFIGyIGQQAgBkEAShtBCHRBgP4DcSAKQQ51IgZB/wEgBkH/AUgbIgZBACAGQQBKG0EQdEGAgPwHcSALQQ51IgZB/wEgBkH/AUgbIgZBACAGQQBKG0EYdHJyIAhBDnUiBkH/ASAGQf8BSBsiBkEAIAZBAEobcjYCACADIA1qIQ0gE0EBaiITIARHDQALIAxBAWoiDCACbCESIAMgDEcNAAsLCx4AQQAgAiADIAQgBSAAEAEgAkEAIAQgBSAGIAEQAQs="},{}],4:[function(e,t,i){"use strict";t.exports={name:"resize",fn:e("./resize"),wasm_fn:e("./resize_wasm"),wasm_src:e("./convolve_wasm_base64")}},{"./convolve_wasm_base64":3,"./resize":5,"./resize_wasm":8}],5:[function(e,t,i){"use strict";var o=e("./resize_filter_gen"),r=e("./convolve").convolveHorizontally,n=e("./convolve").convolveVertically;t.exports=function(e){var t=e.src,i=e.width,a=e.height,s=e.toWidth,l=e.toHeight,c=e.scaleX||e.toWidth/e.width,d=e.scaleY||e.toHeight/e.height,p=e.offsetX||0,h=e.offsetY||0,u=e.dest||new Uint8Array(s*l*4),g=void 0===e.quality?3:e.quality,f=e.alpha||!1,m=o(g,i,s,c,p),b=o(g,a,l,d,h),y=new Uint8Array(s*a*4);return r(t,y,i,a,s,m),n(y,u,a,s,l,b),f||function(e,t,i){for(var o=3,r=t*i*4|0;o<r;)e[o]=255,o=o+4|0}(u,s,l),u}},{"./convolve":2,"./resize_filter_gen":6}],6:[function(e,t,i){"use strict";var o=e("./resize_filter_info");function r(e){return Math.round(16383*e)}t.exports=function(e,t,i,n,a){var s,l,c,d,p,h,u,g,f,m,b,y,v,w,x,_,A,S=o[e].filter,k=1/n,O=Math.min(1,n),I=o[e].win/O,$=Math.floor(2*(I+1)),E=new Int16Array(($+2)*i),C=0,T=!E.subarray||!E.set;for(s=0;s<i;s++){for(l=(s+.5)*k+a,c=Math.max(0,Math.floor(l-I)),p=(d=Math.min(t-1,Math.ceil(l+I)))-c+1,h=new Float32Array(p),u=new Int16Array(p),g=0,f=c,m=0;f<=d;f++,m++)g+=b=S((f+.5-l)*O),h[m]=b;for(y=0,m=0;m<h.length;m++)y+=v=h[m]/g,u[m]=r(v);for(u[i>>1]+=r(1-y),w=0;w<u.length&&0===u[w];)w++;if(w<u.length){for(x=u.length-1;x>0&&0===u[x];)x--;if(_=c+w,A=x-w+1,E[C++]=_,E[C++]=A,T)for(m=w;m<=x;m++)E[C++]=u[m];else E.set(u.subarray(w,x+1),C),C+=A}else E[C++]=0,E[C++]=0}return E}},{"./resize_filter_info":7}],7:[function(e,t,i){"use strict";t.exports=[{win:.5,filter:function(e){return e>=-.5&&e<.5?1:0}},{win:1,filter:function(e){if(e<=-1||e>=1)return 0;if(e>-1.1920929e-7&&e<1.1920929e-7)return 1;var t=e*Math.PI;return Math.sin(t)/t*(.54+.46*Math.cos(t/1))}},{win:2,filter:function(e){if(e<=-2||e>=2)return 0;if(e>-1.1920929e-7&&e<1.1920929e-7)return 1;var t=e*Math.PI;return Math.sin(t)/t*Math.sin(t/2)/(t/2)}},{win:3,filter:function(e){if(e<=-3||e>=3)return 0;if(e>-1.1920929e-7&&e<1.1920929e-7)return 1;var t=e*Math.PI;return Math.sin(t)/t*Math.sin(t/3)/(t/3)}}]},{}],8:[function(e,t,i){"use strict";var o=e("./resize_filter_gen"),r=!0;try{r=1===new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]}catch(e){}function n(e,t,i){if(r)t.set(function(e){return new Uint8Array(e.buffer,0,e.byteLength)}(e),i);else for(var o=i,n=0;n<e.length;n++){var a=e[n];t[o++]=255&a,t[o++]=a>>8&255}}t.exports=function(e){var t=e.src,i=e.width,r=e.height,a=e.toWidth,s=e.toHeight,l=e.scaleX||e.toWidth/e.width,c=e.scaleY||e.toHeight/e.height,d=e.offsetX||0,p=e.offsetY||0,h=e.dest||new Uint8Array(a*s*4),u=void 0===e.quality?3:e.quality,g=e.alpha||!1,f=o(u,i,a,l,d),m=o(u,r,s,c,p),b=this.__align(0+Math.max(t.byteLength,h.byteLength)),y=this.__align(b+r*a*4),v=this.__align(y+f.byteLength),w=v+m.byteLength,x=this.__instance("resize",w),_=new Uint8Array(this.__memory.buffer),A=new Uint32Array(this.__memory.buffer),S=new Uint32Array(t.buffer);return A.set(S),n(f,_,y),n(m,_,v),(x.exports.convolveHV||x.exports._convolveHV)(y,v,b,i,r,a,s),new Uint32Array(h.buffer).set(new Uint32Array(this.__memory.buffer,0,s*a)),g||function(e,t,i){for(var o=3,r=t*i*4|0;o<r;)e[o]=255,o=o+4|0}(h,a,s),h}},{"./resize_filter_gen":6}],9:[function(e,t,i){"use strict";t.exports={name:"unsharp_mask",fn:e("./unsharp_mask"),wasm_fn:e("./unsharp_mask_wasm"),wasm_src:e("./unsharp_mask_wasm_base64")}},{"./unsharp_mask":10,"./unsharp_mask_wasm":11,"./unsharp_mask_wasm_base64":12}],10:[function(e,t,i){"use strict";var o=e("glur/mono16");t.exports=function(e,t,i,r,n,a){var s,l,c,d,p;if(!(0===r||n<.5)){n>2&&(n=2);var h=function(e,t,i){for(var o,r,n,a,s=t*i,l=new Uint16Array(s),c=0;c<s;c++)o=e[4*c],r=e[4*c+1],n=e[4*c+2],a=o>=r&&o>=n?o:r>=n&&r>=o?r:n,l[c]=a<<8;return l}(e,t,i),u=new Uint16Array(h);o(u,t,i,n);for(var g=r/100*4096+.5|0,f=a<<8,m=t*i,b=0;b<m;b++)d=(s=h[b])-u[b],Math.abs(d)>=f&&(c=((l=(l=(l=s+(g*d+2048>>12))>65280?65280:l)<0?0:l)<<12)/(s=0!==s?s:1)|0,e[p=4*b]=e[p]*c+2048>>12,e[p+1]=e[p+1]*c+2048>>12,e[p+2]=e[p+2]*c+2048>>12)}}},{"glur/mono16":18}],11:[function(e,t,i){"use strict";t.exports=function(e,t,i,o,r,n){if(!(0===o||r<.5)){r>2&&(r=2);var a=t*i,s=4*a,l=2*a,c=2*a,d=4*Math.max(t,i),p=s,h=p+l,u=h+c,g=u+c,f=g+d,m=this.__instance("unsharp_mask",s+l+2*c+d+32,{exp:Math.exp}),b=new Uint32Array(e.buffer);new Uint32Array(this.__memory.buffer).set(b);var y=m.exports.hsv_v16||m.exports._hsv_v16;y(0,p,t,i),(y=m.exports.blurMono16||m.exports._blurMono16)(p,h,u,g,f,t,i,r),(y=m.exports.unsharp||m.exports._unsharp)(0,0,p,h,t,i,o,n),b.set(new Uint32Array(this.__memory.buffer,0,a))}}},{}],12:[function(e,t,i){"use strict";t.exports="AGFzbQEAAAAADAZkeWxpbmsAAAAAAAE0B2AAAGAEf39/fwBgBn9/f39/fwBgCH9/f39/f39/AGAIf39/f39/f30AYAJ9fwBgAXwBfAIZAgNlbnYDZXhwAAYDZW52Bm1lbW9yeQIAAAMHBgAFAgQBAwYGAX8AQQALB4oBCBFfX3dhc21fY2FsbF9jdG9ycwABFl9fYnVpbGRfZ2F1c3NpYW5fY29lZnMAAg5fX2dhdXNzMTZfbGluZQADCmJsdXJNb25vMTYABAdoc3ZfdjE2AAUHdW5zaGFycAAGDF9fZHNvX2hhbmRsZQMAGF9fd2FzbV9hcHBseV9kYXRhX3JlbG9jcwABCsUMBgMAAQvWAQEHfCABRNuGukOCGvs/IAC7oyICRAAAAAAAAADAohAAIgW2jDgCFCABIAKaEAAiAyADoCIGtjgCECABRAAAAAAAAPA/IAOhIgQgBKIgAyACIAKgokQAAAAAAADwP6AgBaGjIgS2OAIAIAEgBSAEmqIiB7Y4AgwgASADIAJEAAAAAAAA8D+gIASioiIItjgCCCABIAMgAkQAAAAAAADwv6AgBKKiIgK2OAIEIAEgByAIoCAFRAAAAAAAAPA/IAahoCIDo7Y4AhwgASAEIAKgIAOjtjgCGAuGBQMGfwl8An0gAyoCDCEVIAMqAgghFiADKgIUuyERIAMqAhC7IRACQCAEQQFrIghBAEgiCQRAIAIhByAAIQYMAQsgAiAALwEAuCIPIAMqAhi7oiIMIBGiIg0gDCAQoiAPIAMqAgS7IhOiIhQgAyoCALsiEiAPoqCgoCIOtjgCACACQQRqIQcgAEECaiEGIAhFDQAgCEEBIAhBAUgbIgpBf3MhCwJ/IAQgCmtBAXFFBEAgDiENIAgMAQsgAiANIA4gEKIgFCASIAAvAQK4Ig+ioKCgIg22OAIEIAJBCGohByAAQQRqIQYgDiEMIARBAmsLIQIgC0EAIARrRg0AA0AgByAMIBGiIA0gEKIgDyAToiASIAYvAQC4Ig6ioKCgIgy2OAIAIAcgDSARoiAMIBCiIA4gE6IgEiAGLwECuCIPoqCgoCINtjgCBCAHQQhqIQcgBkEEaiEGIAJBAkohACACQQJrIQIgAA0ACwsCQCAJDQAgASAFIAhsQQF0aiIAAn8gBkECay8BACICuCINIBW7IhKiIA0gFrsiE6KgIA0gAyoCHLuiIgwgEKKgIAwgEaKgIg8gB0EEayIHKgIAu6AiDkQAAAAAAADwQWMgDkQAAAAAAAAAAGZxBEAgDqsMAQtBAAs7AQAgCEUNACAGQQRrIQZBACAFa0EBdCEBA0ACfyANIBKiIAJB//8DcbgiDSAToqAgDyIOIBCioCAMIBGioCIPIAdBBGsiByoCALugIgxEAAAAAAAA8EFjIAxEAAAAAAAAAABmcQRAIAyrDAELQQALIQMgBi8BACECIAAgAWoiACADOwEAIAZBAmshBiAIQQFKIQMgDiEMIAhBAWshCCADDQALCwvRAgIBfwd8AkAgB0MAAAAAWw0AIARE24a6Q4Ia+z8gB0MAAAA/l7ujIglEAAAAAAAAAMCiEAAiDLaMOAIUIAQgCZoQACIKIAqgIg22OAIQIAREAAAAAAAA8D8gCqEiCyALoiAKIAkgCaCiRAAAAAAAAPA/oCAMoaMiC7Y4AgAgBCAMIAuaoiIOtjgCDCAEIAogCUQAAAAAAADwP6AgC6KiIg+2OAIIIAQgCiAJRAAAAAAAAPC/oCALoqIiCbY4AgQgBCAOIA+gIAxEAAAAAAAA8D8gDaGgIgqjtjgCHCAEIAsgCaAgCqO2OAIYIAYEQANAIAAgBSAIbEEBdGogAiAIQQF0aiADIAQgBSAGEAMgCEEBaiIIIAZHDQALCyAFRQ0AQQAhCANAIAIgBiAIbEEBdGogASAIQQF0aiADIAQgBiAFEAMgCEEBaiIIIAVHDQALCwtxAQN/IAIgA2wiBQRAA0AgASAAKAIAIgRBEHZB/wFxIgIgAiAEQQh2Qf8BcSIDIAMgBEH/AXEiBEkbIAIgA0sbIgYgBiAEIAIgBEsbIAMgBEsbQQh0OwEAIAFBAmohASAAQQRqIQAgBUEBayIFDQALCwuZAgIDfwF8IAQgBWwhBAJ/IAazQwAAgEWUQwAAyEKVu0QAAAAAAADgP6AiC5lEAAAAAAAA4EFjBEAgC6oMAQtBgICAgHgLIQUgBARAIAdBCHQhCUEAIQYDQCAJIAIgBkEBdCIHai8BACIBIAMgB2ovAQBrIgcgB0EfdSIIaiAIc00EQCAAIAZBAnQiCGoiCiAFIAdsQYAQakEMdSABaiIHQYD+AyAHQYD+A0gbIgdBACAHQQBKG0EMdCABQQEgARtuIgEgCi0AAGxBgBBqQQx2OgAAIAAgCEEBcmoiByABIActAABsQYAQakEMdjoAACAAIAhBAnJqIgcgASAHLQAAbEGAEGpBDHY6AAALIAZBAWoiBiAERw0ACwsL"},{}],13:[function(e,t,i){"use strict";function o(e,t){this.create=e,this.available=[],this.acquired={},this.lastId=1,this.timeoutId=0,this.idle=t||2e3}o.prototype.acquire=function(){var e,t=this;return 0!==this.available.length?e=this.available.pop():((e=this.create()).id=this.lastId++,e.release=function(){return t.release(e)}),this.acquired[e.id]=e,e},o.prototype.release=function(e){var t=this;delete this.acquired[e.id],e.lastUsed=Date.now(),this.available.push(e),0===this.timeoutId&&(this.timeoutId=setTimeout((function(){return t.gc()}),100))},o.prototype.gc=function(){var e=this,t=Date.now();this.available=this.available.filter((function(i){return!(t-i.lastUsed>e.idle&&(i.destroy(),1))})),0!==this.available.length?this.timeoutId=setTimeout((function(){return e.gc()}),100):this.timeoutId=0},t.exports=o},{}],14:[function(e,t,i){"use strict";t.exports=function(e,t,i,o,r,n){var a=i/e,s=o/t,l=(2*n+2+1)/r;if(l>.5)return[[i,o]];var c=Math.ceil(Math.log(Math.min(a,s))/Math.log(l));if(c<=1)return[[i,o]];for(var d=[],p=0;p<c;p++){var h=Math.round(Math.pow(Math.pow(e,c-p-1)*Math.pow(i,p+1),1/c)),u=Math.round(Math.pow(Math.pow(t,c-p-1)*Math.pow(o,p+1),1/c));d.push([h,u])}return d}},{}],15:[function(e,t,i){"use strict";function o(e){var t=Math.round(e);return Math.abs(e-t)<1e-5?t:Math.floor(e)}function r(e){var t=Math.round(e);return Math.abs(e-t)<1e-5?t:Math.ceil(e)}t.exports=function(e){var t,i,n,a,s,l,c=e.toWidth/e.width,d=e.toHeight/e.height,p=o(e.srcTileSize*c)-2*e.destTileBorder,h=o(e.srcTileSize*d)-2*e.destTileBorder;if(p<1||h<1)throw new Error("Internal error in pica: target tile width/height is too small.");var u,g=[];for(a=0;a<e.toHeight;a+=h)for(n=0;n<e.toWidth;n+=p)(t=n-e.destTileBorder)<0&&(t=0),t+(s=n+p+e.destTileBorder-t)>=e.toWidth&&(s=e.toWidth-t),(i=a-e.destTileBorder)<0&&(i=0),i+(l=a+h+e.destTileBorder-i)>=e.toHeight&&(l=e.toHeight-i),u={toX:t,toY:i,toWidth:s,toHeight:l,toInnerX:n,toInnerY:a,toInnerWidth:p,toInnerHeight:h,offsetX:t/c-o(t/c),offsetY:i/d-o(i/d),scaleX:c,scaleY:d,x:o(t/c),y:o(i/d),width:r(s/c),height:r(l/d)},g.push(u);return g}},{}],16:[function(e,t,i){"use strict";function o(e){return Object.prototype.toString.call(e)}t.exports.isCanvas=function(e){var t=o(e);return"[object HTMLCanvasElement]"===t||"[object OffscreenCanvas]"===t||"[object Canvas]"===t},t.exports.isImage=function(e){return"[object HTMLImageElement]"===o(e)},t.exports.isImageBitmap=function(e){return"[object ImageBitmap]"===o(e)},t.exports.limiter=function(e){var t=0,i=[];function o(){t<e&&i.length&&(t++,i.shift()())}return function(e){return new Promise((function(r,n){i.push((function(){e().then((function(e){r(e),t--,o()}),(function(e){n(e),t--,o()}))})),o()}))}},t.exports.cib_quality_name=function(e){switch(e){case 0:return"pixelated";case 1:return"low";case 2:return"medium"}return"high"},t.exports.cib_support=function(e){return Promise.resolve().then((function(){if("undefined"==typeof createImageBitmap)return!1;var t=e(100,100);return createImageBitmap(t,0,0,100,100,{resizeWidth:10,resizeHeight:10,resizeQuality:"high"}).then((function(e){var i=10===e.width;return e.close(),t=null,i}))})).catch((function(){return!1}))},t.exports.worker_offscreen_canvas_support=function(){return new Promise((function(e,t){if("undefined"!=typeof OffscreenCanvas){var i=btoa("(".concat(function(e){"undefined"!=typeof createImageBitmap?Promise.resolve().then((function(){var e=new OffscreenCanvas(10,10);return e.getContext("2d").rect(0,0,1,1),createImageBitmap(e,0,0,1,1)})).then((function(){return e.postMessage(!0)}),(function(){return e.postMessage(!1)})):e.postMessage(!1)}.toString(),")(self);")),o=new Worker("data:text/javascript;base64,".concat(i));o.onmessage=function(t){return e(t.data)},o.onerror=t}else e(!1)})).then((function(e){return e}),(function(){return!1}))},t.exports.can_use_canvas=function(e){var t=!1;try{var i=e(2,1).getContext("2d"),o=i.createImageData(2,1);o.data[0]=12,o.data[1]=23,o.data[2]=34,o.data[3]=255,o.data[4]=45,o.data[5]=56,o.data[6]=67,o.data[7]=255,i.putImageData(o,0,0),o=null,12===(o=i.getImageData(0,0,2,1)).data[0]&&23===o.data[1]&&34===o.data[2]&&255===o.data[3]&&45===o.data[4]&&56===o.data[5]&&67===o.data[6]&&255===o.data[7]&&(t=!0)}catch(e){}return t},t.exports.cib_can_use_region=function(){return new Promise((function(e){if("undefined"!=typeof createImageBitmap){var t=new Image;t.src="data:image/jpeg;base64,/9j/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAAAAABIAAAAAQAAAEgAAAAB/9sAQwAEAwMEAwMEBAMEBQQEBQYKBwYGBgYNCQoICg8NEBAPDQ8OERMYFBESFxIODxUcFRcZGRsbGxAUHR8dGh8YGhsa/9sAQwEEBQUGBQYMBwcMGhEPERoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoa/8IAEQgAAQACAwERAAIRAQMRAf/EABQAAQAAAAAAAAAAAAAAAAAAAAf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAF/P//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAQUCf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Bf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Bf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEABj8Cf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8hf//aAAwDAQACAAMAAAAQH//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8Qf//Z",t.onload=function(){createImageBitmap(t,0,0,t.width,t.height).then((function(i){i.width===t.width&&i.height===t.height?e(!0):e(!1)}),(function(){return e(!1)}))},t.onerror=function(){return e(!1)}}else e(!1)}))}},{}],17:[function(e,t,i){"use strict";t.exports=function(){var t,i=e("./mathlib");onmessage=function(e){var o=e.data.opts;if(!o.src&&o.srcBitmap){var r=new OffscreenCanvas(o.width,o.height),n=r.getContext("2d",{alpha:Boolean(o.alpha)});n.drawImage(o.srcBitmap,0,0),o.src=n.getImageData(0,0,o.width,o.height).data,r.width=r.height=0,r=null,o.srcBitmap.close(),o.srcBitmap=null}t||(t=new i(e.data.features));var a=t.resizeAndUnsharp(o);postMessage({data:a},[a.buffer])}}},{"./mathlib":1}],18:[function(e,t,i){var o,r,n,a,s,l;function c(e,t,i,o,r,n){var a,s,l,c,d,p,h,u,g,f,m,b,y,v;for(g=0;g<n;g++){for(h=g,u=0,c=d=(a=e[p=g*r])*o[6],m=o[0],b=o[1],y=o[4],v=o[5],f=0;f<r;f++)l=(s=e[p])*m+a*b+c*y+d*v,d=c,c=l,a=s,i[u]=c,u++,p++;for(u--,h+=n*(r-1),c=d=(a=e[--p])*o[7],s=a,m=o[2],b=o[3],f=r-1;f>=0;f--)l=s*m+a*b+c*y+d*v,d=c,c=l,a=s,s=e[p],t[h]=i[u]+c,p--,u--,h-=n}}t.exports=function(e,t,i,d){if(d){var p=new Uint16Array(e.length),h=new Float32Array(Math.max(t,i)),u=function(e){e<.5&&(e=.5);var t=Math.exp(.527076)/e,i=Math.exp(-t),c=Math.exp(-2*t),d=(1-i)*(1-i)/(1+2*t*i-c);return o=d,r=d*(t-1)*i,n=d*(t+1)*i,a=-d*c,s=2*i,l=-c,new Float32Array([o,r,n,a,s,l,(o+r)/(1-s-l),(n+a)/(1-s-l)])}(d);c(e,p,h,u,t,i),c(p,e,h,u,i,t)}}},{}],19:[function(e,t,i){"function"==typeof Object.create?t.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,t){if(t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}}},{}],20:[function(e,t,i){"use strict";var o=e("object-assign"),r=e("./lib/base64decode"),n=e("./lib/wa_detect"),a={js:!0,wasm:!0};function s(e){if(!(this instanceof s))return new s(e);var t=o({},a,e||{});if(this.options=t,this.__cache={},this.__init_promise=null,this.__modules=t.modules||{},this.__memory=null,this.__wasm={},this.__isLE=1===new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0],!this.options.js&&!this.options.wasm)throw new Error('mathlib: at least "js" or "wasm" should be enabled')}s.prototype.has_wasm=n,s.prototype.use=function(e){return this.__modules[e.name]=e,this.options.wasm&&this.has_wasm()&&e.wasm_fn?this[e.name]=e.wasm_fn:this[e.name]=e.fn,this},s.prototype.init=function(){if(this.__init_promise)return this.__init_promise;if(!this.options.js&&this.options.wasm&&!this.has_wasm())return Promise.reject(new Error('mathlib: only "wasm" was enabled, but it\'s not supported'));var e=this;return this.__init_promise=Promise.all(Object.keys(e.__modules).map((function(t){var i=e.__modules[t];return e.options.wasm&&e.has_wasm()&&i.wasm_fn?e.__wasm[t]?null:WebAssembly.compile(e.__base64decode(i.wasm_src)).then((function(i){e.__wasm[t]=i})):null}))).then((function(){return e})),this.__init_promise},s.prototype.__base64decode=r,s.prototype.__reallocate=function(e){if(!this.__memory)return this.__memory=new WebAssembly.Memory({initial:Math.ceil(e/65536)}),this.__memory;var t=this.__memory.buffer.byteLength;return t<e&&this.__memory.grow(Math.ceil((e-t)/65536)),this.__memory},s.prototype.__instance=function(e,t,i){if(t&&this.__reallocate(t),!this.__wasm[e]){var r=this.__modules[e];this.__wasm[e]=new WebAssembly.Module(this.__base64decode(r.wasm_src))}if(!this.__cache[e]){var n={memoryBase:0,memory:this.__memory,tableBase:0,table:new WebAssembly.Table({initial:0,element:"anyfunc"})};this.__cache[e]=new WebAssembly.Instance(this.__wasm[e],{env:o(n,i||{})})}return this.__cache[e]},s.prototype.__align=function(e,t){var i=e%(t=t||8);return e+(i?t-i:0)},t.exports=s},{"./lib/base64decode":21,"./lib/wa_detect":22,"object-assign":23}],21:[function(e,t,i){"use strict";t.exports=function(e){for(var t=e.replace(/[\r\n=]/g,""),i=t.length,o=new Uint8Array(3*i>>2),r=0,n=0,a=0;a<i;a++)a%4==0&&a&&(o[n++]=r>>16&255,o[n++]=r>>8&255,o[n++]=255&r),r=r<<6|"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(t.charAt(a));var s=i%4*6;return 0===s?(o[n++]=r>>16&255,o[n++]=r>>8&255,o[n++]=255&r):18===s?(o[n++]=r>>10&255,o[n++]=r>>2&255):12===s&&(o[n++]=r>>4&255),o}},{}],22:[function(e,t,i){"use strict";var o;t.exports=function(){if(void 0!==o)return o;if(o=!1,"undefined"==typeof WebAssembly)return o;try{var e=new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11]),t=new WebAssembly.Module(e);return 0!==new WebAssembly.Instance(t,{}).exports.test(4)&&(o=!0),o}catch(e){}return o}},{}],23:[function(e,t,i){
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
"use strict";var o=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function a(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach((function(e){o[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var i,s,l=a(e),c=1;c<arguments.length;c++){for(var d in i=Object(arguments[c]))r.call(i,d)&&(l[d]=i[d]);if(o){s=o(i);for(var p=0;p<s.length;p++)n.call(i,s[p])&&(l[s[p]]=i[s[p]])}}return l}},{}],24:[function(e,t,i){var o=arguments[3],r=arguments[4],n=arguments[5],a=JSON.stringify;t.exports=function(e,t){for(var i,s=Object.keys(n),l=0,c=s.length;l<c;l++){var d=s[l],p=n[d].exports;if(p===e||p&&p.default===e){i=d;break}}if(!i){i=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var h={};for(l=0,c=s.length;l<c;l++)h[d=s[l]]=d;r[i]=["function(require,module,exports){"+e+"(self); }",h]}var u=Math.floor(Math.pow(16,8)*Math.random()).toString(16),g={};g[i]=i,r[u]=["function(require,module,exports){var f = require("+a(i)+");(f.default ? f.default : f)(self);}",g];var f={};!function e(t){for(var i in f[t]=!0,r[t][1]){var o=r[t][1][i];f[o]||e(o)}}(u);var m="("+o+")({"+Object.keys(f).map((function(e){return a(e)+":["+r[e][0]+","+a(r[e][1])+"]"})).join(",")+"},{},["+a(u)+"])",b=window.URL||window.webkitURL||window.mozURL||window.msURL,y=new Blob([m],{type:"text/javascript"});if(t&&t.bare)return y;var v=b.createObjectURL(y),w=new Worker(v);return w.objectURL=v,w}},{}],"/index.js":[function(e,t,i){"use strict";function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o,r,n=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw r}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}var n=e("object-assign"),a=e("webworkify"),s=e("./lib/mathlib"),l=e("./lib/pool"),c=e("./lib/utils"),d=e("./lib/worker"),p=e("./lib/stepper"),h=e("./lib/tiler"),u={},g=!1;try{"undefined"!=typeof navigator&&navigator.userAgent&&(g=navigator.userAgent.indexOf("Safari")>=0)}catch(e){}var f=1;"undefined"!=typeof navigator&&(f=Math.min(navigator.hardwareConcurrency||1,4));var m={tile:1024,concurrency:f,features:["js","wasm","ww"],idle:2e3,createCanvas:function(e,t){var i=document.createElement("canvas");return i.width=e,i.height=t,i}},b={quality:3,alpha:!1,unsharpAmount:0,unsharpRadius:0,unsharpThreshold:0},y=!1,v=!1,w=!1,x=!1,_=!1;function A(){return{value:a(d),destroy:function(){if(this.value.terminate(),"undefined"!=typeof window){var e=window.URL||window.webkitURL||window.mozURL||window.msURL;e&&e.revokeObjectURL&&this.value.objectURL&&e.revokeObjectURL(this.value.objectURL)}}}}function S(e){if(!(this instanceof S))return new S(e);this.options=n({},m,e||{});var t="lk_".concat(this.options.concurrency);this.__limit=u[t]||c.limiter(this.options.concurrency),u[t]||(u[t]=this.__limit),this.features={js:!1,wasm:!1,cib:!1,ww:!1},this.__workersPool=null,this.__requested_features=[],this.__mathlib=null}S.prototype.init=function(){var t=this;if(this.__initPromise)return this.__initPromise;if("undefined"!=typeof ImageData&&"undefined"!=typeof Uint8ClampedArray)try{new ImageData(new Uint8ClampedArray(400),10,10),y=!0}catch(e){}"undefined"!=typeof ImageBitmap&&(ImageBitmap.prototype&&ImageBitmap.prototype.close?v=!0:this.debug("ImageBitmap does not support .close(), disabled"));var i=this.options.features.slice();if(i.indexOf("all")>=0&&(i=["cib","wasm","js","ww"]),this.__requested_features=i,this.__mathlib=new s(i),i.indexOf("ww")>=0&&"undefined"!=typeof window&&"Worker"in window)try{e("webworkify")((function(){})).terminate(),this.features.ww=!0;var o="wp_".concat(JSON.stringify(this.options));u[o]?this.__workersPool=u[o]:(this.__workersPool=new l(A,this.options.idle),u[o]=this.__workersPool)}catch(e){}var r,a,d=this.__mathlib.init().then((function(e){n(t.features,e.features)}));r=v?c.cib_support(this.options.createCanvas).then((function(e){t.features.cib&&i.indexOf("cib")<0?t.debug("createImageBitmap() resize supported, but disabled by config"):i.indexOf("cib")>=0&&(t.features.cib=e)})):Promise.resolve(!1),w=c.can_use_canvas(this.options.createCanvas),a=(a=v&&y&&-1!==i.indexOf("ww")?c.worker_offscreen_canvas_support():Promise.resolve(!1)).then((function(e){x=e}));var p=c.cib_can_use_region().then((function(e){_=e}));return this.__initPromise=Promise.all([d,r,a,p]).then((function(){return t})),this.__initPromise},S.prototype.__invokeResize=function(e,t){var i=this;return t.__mathCache=t.__mathCache||{},Promise.resolve().then((function(){return i.features.ww?new Promise((function(o,r){var n=i.__workersPool.acquire();t.cancelToken&&t.cancelToken.catch((function(e){return r(e)})),n.value.onmessage=function(e){n.release(),e.data.err?r(e.data.err):o(e.data)};var a=[];e.src&&a.push(e.src.buffer),e.srcBitmap&&a.push(e.srcBitmap),n.value.postMessage({opts:e,features:i.__requested_features,preload:{wasm_nodule:i.__mathlib.__}},a)})):{data:i.__mathlib.resizeAndUnsharp(e,t.__mathCache)}}))},S.prototype.__extractTileData=function(e,t,i,o,r){if(this.features.ww&&x&&(c.isCanvas(t)||_))return this.debug("Create tile for OffscreenCanvas"),createImageBitmap(o.srcImageBitmap||t,e.x,e.y,e.width,e.height).then((function(e){return r.srcBitmap=e,r}));if(c.isCanvas(t))return o.srcCtx||(o.srcCtx=t.getContext("2d",{alpha:Boolean(i.alpha)})),this.debug("Get tile pixel data"),r.src=o.srcCtx.getImageData(e.x,e.y,e.width,e.height).data,r;this.debug("Draw tile imageBitmap/image to temporary canvas");var n=this.options.createCanvas(e.width,e.height),a=n.getContext("2d",{alpha:Boolean(i.alpha)});return a.globalCompositeOperation="copy",a.drawImage(o.srcImageBitmap||t,e.x,e.y,e.width,e.height,0,0,e.width,e.height),this.debug("Get tile pixel data"),r.src=a.getImageData(0,0,e.width,e.height).data,n.width=n.height=0,r},S.prototype.__landTileData=function(e,t,i){var o;if(this.debug("Convert raw rgba tile result to ImageData"),t.bitmap)return i.toCtx.drawImage(t.bitmap,e.toX,e.toY),null;if(y)o=new ImageData(new Uint8ClampedArray(t.data),e.toWidth,e.toHeight);else if((o=i.toCtx.createImageData(e.toWidth,e.toHeight)).data.set)o.data.set(t.data);else for(var r=o.data.length-1;r>=0;r--)o.data[r]=t.data[r];return this.debug("Draw tile"),g?i.toCtx.putImageData(o,e.toX,e.toY,e.toInnerX-e.toX,e.toInnerY-e.toY,e.toInnerWidth+1e-5,e.toInnerHeight+1e-5):i.toCtx.putImageData(o,e.toX,e.toY,e.toInnerX-e.toX,e.toInnerY-e.toY,e.toInnerWidth,e.toInnerHeight),null},S.prototype.__tileAndResize=function(e,t,i){var o=this,r={srcCtx:null,srcImageBitmap:null,isImageBitmapReused:!1,toCtx:null};return Promise.resolve().then((function(){if(r.toCtx=t.getContext("2d",{alpha:Boolean(i.alpha)}),c.isCanvas(e))return null;if(c.isImageBitmap(e))return r.srcImageBitmap=e,r.isImageBitmapReused=!0,null;if(c.isImage(e))return v?(o.debug("Decode image via createImageBitmap"),createImageBitmap(e).then((function(e){r.srcImageBitmap=e})).catch((function(e){return null}))):null;throw new Error('Pica: ".from" should be Image, Canvas or ImageBitmap')})).then((function(){if(i.canceled)return i.cancelToken;o.debug("Calculate tiles");var n=h({width:i.width,height:i.height,srcTileSize:o.options.tile,toWidth:i.toWidth,toHeight:i.toHeight,destTileBorder:i.__destTileBorder}).map((function(t){return function(t){return o.__limit((function(){if(i.canceled)return i.cancelToken;var n={width:t.width,height:t.height,toWidth:t.toWidth,toHeight:t.toHeight,scaleX:t.scaleX,scaleY:t.scaleY,offsetX:t.offsetX,offsetY:t.offsetY,quality:i.quality,alpha:i.alpha,unsharpAmount:i.unsharpAmount,unsharpRadius:i.unsharpRadius,unsharpThreshold:i.unsharpThreshold};return o.debug("Invoke resize math"),Promise.resolve(n).then((function(n){return o.__extractTileData(t,e,i,r,n)})).then((function(e){return o.debug("Invoke resize math"),o.__invokeResize(e,i)})).then((function(e){return i.canceled?i.cancelToken:(r.srcImageData=null,o.__landTileData(t,e,r))}))}))}(t)}));function a(e){e.srcImageBitmap&&(e.isImageBitmapReused||e.srcImageBitmap.close(),e.srcImageBitmap=null)}return o.debug("Process tiles"),Promise.all(n).then((function(){return o.debug("Finished!"),a(r),t}),(function(e){throw a(r),e}))}))},S.prototype.__processStages=function(e,t,i,r){var a=this;if(r.canceled)return r.cancelToken;var s,l=o(e.shift(),2),c=l[0],d=l[1],p=0===e.length;return r=n({},r,{toWidth:c,toHeight:d,quality:p?r.quality:Math.min(1,r.quality)}),p||(s=this.options.createCanvas(c,d)),this.__tileAndResize(t,p?i:s,r).then((function(){return p?i:(r.width=c,r.height=d,a.__processStages(e,s,i,r))})).then((function(e){return s&&(s.width=s.height=0),e}))},S.prototype.__resizeViaCreateImageBitmap=function(e,t,i){var o=this,r=t.getContext("2d",{alpha:Boolean(i.alpha)});return this.debug("Resize via createImageBitmap()"),createImageBitmap(e,{resizeWidth:i.toWidth,resizeHeight:i.toHeight,resizeQuality:c.cib_quality_name(i.quality)}).then((function(e){if(i.canceled)return i.cancelToken;if(!i.unsharpAmount)return r.drawImage(e,0,0),e.close(),r=null,o.debug("Finished!"),t;o.debug("Unsharp result");var n=o.options.createCanvas(i.toWidth,i.toHeight),a=n.getContext("2d",{alpha:Boolean(i.alpha)});a.drawImage(e,0,0),e.close();var s=a.getImageData(0,0,i.toWidth,i.toHeight);return o.__mathlib.unsharp_mask(s.data,i.toWidth,i.toHeight,i.unsharpAmount,i.unsharpRadius,i.unsharpThreshold),r.putImageData(s,0,0),n.width=n.height=0,s=a=n=r=null,o.debug("Finished!"),t}))},S.prototype.resize=function(e,t,i){var o=this;this.debug("Start resize...");var r=n({},b);return isNaN(i)?i&&(r=n(r,i)):r=n(r,{quality:i}),r.toWidth=t.width,r.toHeight=t.height,r.width=e.naturalWidth||e.width,r.height=e.naturalHeight||e.height,0===t.width||0===t.height?Promise.reject(new Error("Invalid output size: ".concat(t.width,"x").concat(t.height))):(r.unsharpRadius>2&&(r.unsharpRadius=2),r.canceled=!1,r.cancelToken&&(r.cancelToken=r.cancelToken.then((function(e){throw r.canceled=!0,e}),(function(e){throw r.canceled=!0,e}))),r.__destTileBorder=Math.ceil(Math.max(3,2.5*r.unsharpRadius|0)),this.init().then((function(){if(r.canceled)return r.cancelToken;if(o.features.cib)return o.__resizeViaCreateImageBitmap(e,t,r);if(!w){var i=new Error("Pica: cannot use getImageData on canvas, make sure fingerprinting protection isn't enabled");throw i.code="ERR_GET_IMAGE_DATA",i}var n=p(r.width,r.height,r.toWidth,r.toHeight,o.options.tile,r.__destTileBorder);return o.__processStages(n,e,t,r)})))},S.prototype.resizeBuffer=function(e){var t=this,i=n({},b,e);return this.init().then((function(){return t.__mathlib.resizeAndUnsharp(i)}))},S.prototype.toBlob=function(e,t,i){return t=t||"image/png",new Promise((function(o){if(e.toBlob)e.toBlob((function(e){return o(e)}),t,i);else if(e.convertToBlob)o(e.convertToBlob({type:t,quality:i}));else{for(var r=atob(e.toDataURL(t,i).split(",")[1]),n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);o(new Blob([a],{type:t}))}}))},S.prototype.debug=function(){},t.exports=S},{"./lib/mathlib":1,"./lib/pool":13,"./lib/stepper":14,"./lib/tiler":15,"./lib/utils":16,"./lib/worker":17,"object-assign":23,webworkify:24}]},{},[])("/index.js")},function(e,t,i){e.exports=i.p+"images/empty.6075087.png"},function(e,t,i){e.exports=i.p+"images/libraryMask.124c230.jpg"},function(e,t,i){var o={"./chrome.png":938,"./close.png":803,"./edge.png":939,"./extfans.png":940,"./firefox.png":941,"./home.png":942,"./recommand.png":804};function r(e){var t=n(e);return i(t)}function n(e){if(!i.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}r.keys=function(){return Object.keys(o)},r.resolve=n,e.exports=r,r.id=937},function(e,t,i){e.exports=i.p+"images/chrome.b915791.png"},function(e,t,i){e.exports=i.p+"images/edge.ef8e0f9.png"},function(e,t,i){e.exports=i.p+"images/extfans.d471fcf.png"},function(e,t,i){e.exports=i.p+"images/firefox.6bc945d.png"},function(e,t,i){e.exports=i.p+"images/home.483cb16.png"},function(e,t,i){var o={"./1.png":944,"./2.png":945,"./3.png":946,"./4.png":947,"./5.png":948,"./6.png":949,"./arrow.png":806,"./close.png":805};function r(e){var t=n(e);return i(t)}function n(e){if(!i.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}r.keys=function(){return Object.keys(o)},r.resolve=n,e.exports=r,r.id=943},function(e,t,i){e.exports=i.p+"images/1.c6a8a92.png"},function(e,t,i){e.exports=i.p+"images/2.f260bed.png"},function(e,t,i){e.exports=i.p+"images/3.ca68e72.png"},function(e,t,i){e.exports=i.p+"images/4.e5f22bb.png"},function(e,t,i){e.exports=i.p+"images/5.9ede8df.png"},function(e,t,i){e.exports=i.p+"images/6.670ed54.png"},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";i.r(t),i.d(t,"level1",(function(){return Bc})),i.d(t,"level2",(function(){return Fc}));i(60),i(11),i(17),i(19);var o=i(7),r=i.n(o),n=i(1),a=i(248),s=i(759),l=(i(776),i(0)),c=i(26),d=n.b`:host {
  --topbar-bookmark-height: calc(30px + 6px);
  display: block;
  width: 100vw;
  height: var(--topbar-bookmark-height);
  background-color: #fff;
  border-bottom: 1px solid #e2e2e2;
  box-sizing: border-box;
  padding: 4px 8px;
  position: relative;
}
.bookmarks {
  width: 100%;
  height: 100%;
}
.bookmarks .bookmarks-topbar {
  width: inherit;
  height: inherit;
  display: flex;
  align-items: center;
  flex-flow: row nowrap;
}
.bookmarks .bookmarks-topbar .bookmark-dropdown-entry {
  display: block;
  width: 0;
  height: 100%;
  border-radius: 12px;
  background-repeat: no-repeat;
  background-size: 12px;
  background-position: center;
  margin-right: 3px;
  box-sizing: border-box;
}
.bookmarks .bookmarks-topbar .bookmark-split-line {
  display: block;
  width: 1px;
  height: 50%;
  background-color: #ccc;
  margin: 0 6px;
}
.bookmarks .bookmarks-topbar bookmark-item,
.bookmarks .bookmarks-topbar .bookmark-item {
  border-radius: calc(var(--topbar-bookmark-height) / 2);
  position: relative;
}
.bookmarks .bookmarks-topbar bookmark-item.active::before,
.bookmarks .bookmarks-topbar .bookmark-item.active::before {
  opacity: 0.05;
}
.bookmarks .bookmarks-topbar bookmark-item::before,
.bookmarks .bookmarks-topbar .bookmark-item::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  opacity: 0;
  background-color: #000;
  border-radius: inherit;
  transition: opacity 400ms;
}
.bookmarks .bookmarks-topbar bookmark-item:hover::before,
.bookmarks .bookmarks-topbar .bookmark-item:hover::before {
  transition: opacity 200ms;
  opacity: 0.1;
}
.bookmarks .bookmarks-topbar .bookmark-items {
  flex: 1;
  width: 0;
  height: 100%;
  margin: 0;
  padding: 0;
  display: inline-flex;
  flex-flow: row wrap;
  overflow: hidden;
}
.bookmarks .bookmarks-topbar .bookmark-items > bookmark-item {
  margin-left: 3px;
}
.bookmarks .bookmarks-topbar .bookmark-items > bookmark-item:first-child {
  margin-left: 0;
}
.bookmarks .bookmarks-topbar .other-bookmark {
  display: inline-flex;
  width: auto;
  height: 100%;
  align-items: center;
}
.bookmarks .bookmarks-popup-mask {
  position: fixed;
  top: -var(--topbar-bookmark-height);
  left: 0;
  width: 100%;
  height: calc(100% - var(--topbar-bookmark-height));
  z-index: 99999;
}
`,p=n.b`:host(bookmark-item) {
  display: block;
  width: auto;
  height: 26px;
}
:host(.first) .bookmark-item {
  margin-top: 0 !important;
}
.bookmark-item {
  height: 100%;
  width: inherit;
  max-width: inherit;
  box-sizing: border-box;
  padding: 2px 10px;
  position: relative;
  border-radius: calc(var(--topbar-bookmark-height) / 2);
  flex-flow: row nowrap;
  align-items: center;
  list-style: none;
}
.bookmark-item .bookmark-icon {
  width: 16px;
  height: 16px;
}
.bookmark-item .bookmark-text {
  font-size: 12px;
  color: #333;
  margin-left: 7px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  flex: 1;
}
.bookmark-item .item-folder-arrow {
  width: 12px;
  height: 12px;
  vertical-align: top;
}
.bookmark-item.popup {
  padding-left: 20px;
  padding-right: 20px;
  margin-top: 6px;
}
`,h=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};const u="STAR",g="FOLDER",f="ITEM";class m extends n.a{constructor(){super(...arguments),this.folder_arrow=!1,this.inPopup=!1}render(){return n.e`
      <div
        class="bookmark-item${this.inPopup?" popup":""}"
        style="${this.folder_arrow?"display: flex;":"display: inline-flex;"}"
      >
        ${this.type===u?n.e` <img class="bookmark-icon" src=${i(685)} /> `:null}
        ${this.type===g?n.e` <img class="bookmark-icon" src=${i(648)} /> `:null}
        ${this.type===f?n.e` <i-favicon class="bookmark-icon" .url=${this.url}></i-favicon> `:null}
        <span class="bookmark-text" style="${this.text?"":"margin-left: 0;"}">${this.text}</span>
        ${this.type===g&&this.folder_arrow?n.e`<img class="item-folder-arrow" src=${i(771)} />`:null}
      </div>
    `}}m.styles=p,h([Object(n.g)({type:String})],m.prototype,"url",void 0),h([Object(n.g)({type:String})],m.prototype,"type",void 0),h([Object(n.g)({type:String})],m.prototype,"text",void 0),h([Object(n.g)({type:Boolean})],m.prototype,"folder_arrow",void 0),h([Object(n.g)({type:Boolean})],m.prototype,"inPopup",void 0),window.customElements.define("bookmark-item",m);var b=i(326),y=i(157);
/**
 * @license
 * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const v=new WeakMap,w=Object(y.e)(e=>t=>{if(!(t instanceof y.b))throw new Error("cache can only be used in text bindings");let i=v.get(t);void 0===i&&(i=new WeakMap,v.set(t,i));const o=t.value;if(o instanceof b.a){if(e instanceof y.d&&o.template===t.options.templateFactory(e))return void t.setValue(e);{let e=i.get(o.template);void 0===e&&(e={instance:o,nodes:document.createDocumentFragment()},i.set(o.template,e)),Object(y.g)(e.nodes,t.startNode.nextSibling,t.endNode)}}if(e instanceof y.d){const o=t.options.templateFactory(e),r=i.get(o);void 0!==r&&(t.setValue(r.nodes),t.commit(),t.value=r.instance)}t.setValue(e)});var x=i(4),_=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};class A{constructor(){this.list=null,this.listInTopBar=[],this.listInDropdown=[],this.otherList=null,this.keep_open=!1,this.bookmarkBarHeight=36,this.popup_bottom=6,this.maxWidth=152,this.popupMaxWidth=2*this.maxWidth,this.minWidth=50}setKeepOpen(e){this.keep_open=e}async updateBookmarks(){const e=await new r.a(e=>chrome.bookmarks.getTree(e));let t,i;if(l.n){const{children:o}=e[0],[r,n]=["toolbar_____","unfiled_____"];[t,i]=[o.find(({id:e})=>e===r),o.find(({id:e})=>e===n)]}else[t,i]=e[0].children;this._updateList(t),this._updateOtherList(i)}_updateList(e){this.list=e}updateListInView(e,t){this.listInTopBar=e,this.listInDropdown=t}getListInView(){return[Object(x.j)(this.listInTopBar),Object(x.j)(this.listInDropdown)]}_updateOtherList(e){this.otherList=e}}_([x.g],A.prototype,"list",void 0),_([x.g],A.prototype,"listInTopBar",void 0),_([x.g],A.prototype,"listInDropdown",void 0),_([x.g],A.prototype,"otherList",void 0),_([x.g],A.prototype,"keep_open",void 0),_([x.b],A.prototype,"setKeepOpen",null),_([x.g],A.prototype,"maxWidth",void 0),_([x.g],A.prototype,"popupMaxWidth",void 0),_([x.g],A.prototype,"minWidth",void 0),_([x.b],A.prototype,"_updateList",null),_([x.b],A.prototype,"updateListInView",null),_([x.b],A.prototype,"getListInView",null),_([x.b],A.prototype,"_updateOtherList",null);var S=new A,k=i(328),O=i(329),I=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};class $ extends n.a{constructor(){super(...arguments),this.tree=[],this.open=!1,this.popupType="",this._open=!1,this._children=[],this._pos={},this._activeIndex=-1,this._update_threshold=180}handleOpenChange(e){this.hideAllChildrenPopup()}hideAllChildrenPopup(){this._open&&(this._open=!1),this._setActiveIndex(-1)}updated(e){e.has("open")&&this.handleOpenChange(this.open)}_clickToOpenFolder(e,t,i){S.setKeepOpen(!0);const o=e.currentTarget;this._setActiveIndex(i),this._openFolder(o,t,i)}_openFolder(e,t,i){this._pos={top:-5e3,right:-5e3},this._open||(this._open=!0),this._children=t,requestAnimationFrame(()=>{this._childrenPopup=this.shadowRoot.querySelector("bookmarks-popup"),this._updatePos(e)})}_whenMouseEnterItem(e,t,i){const o=e.currentTarget;this._update_throttle_timer&&(clearTimeout(this._update_throttle_timer),this._update_throttle_timer=void 0),this._update_throttle_timer=setTimeout(()=>{if(S.keep_open){if(Reflect.has(t,"children")){if(this._setActiveIndex(i),this._open){this._children=t.children;const e=Object.assign({},this._pos);Reflect.has(e,"bottom")&&Reflect.deleteProperty(e,"bottom"),this._pos=e,requestAnimationFrame(()=>{this._updatePos(o)})}else this._openFolder(o,t.children,i);return}this._setActiveIndex(-1),this._open&&(this._open=!1)}},this._update_threshold)}_updatePos(e){if(!this._childrenPopup)return;this._childrenPopup.hideAllChildrenPopup();const{innerHeight:t,innerWidth:i}=window,{x:o,y:r}=e.getBoundingClientRect(),{offsetWidth:n}=e.parentElement,{offsetHeight:a}=e,{offsetWidth:s,offsetHeight:l}=this._childrenPopup,c={},d=i-o-n,p=Math.max(o,d),h=()=>{let e;p===d?(e=i-d,this._popup_type="right"):(e=p-s,this._popup_type="left"),c.left=e};if(p>=s||i<s)if(this.popupType?"right"===this.popupType&&d>s?(c.left=i-d,this._popup_type=this.popupType):"left"===this.popupType&&o>s?(c.left=o-s,this._popup_type=this.popupType):h():h(),l>t)c.top=S.bookmarkBarHeight,c.bottom=S.popup_bottom;else{const e=t-r-S.popup_bottom;if(l<e)c.top=r;else{const t=l-e;c.top=r-t}}else if(i>s){c.left=o;const e=t-r-a,i=r-S.bookmarkBarHeight;Math.max(e,i)===e?(c.top=r+a,l>e&&(c.bottom=S.popup_bottom)):(c.bottom=t-r,l>i&&(c.top=S.bookmarkBarHeight))}this._pos=c}_clickToOpenUrl(e,t){this.closeFolder(),O.a.sendEvent({action:{openTopBookmark:c.a.getTargetLogDomain(e)}}),c.a.openUrl(e,s.settingStore.setting.link.bookmark,t)}_midClickToOpenUrl(e,t){O.a.sendEvent({action:{openTopBookmark:c.a.getTargetLogDomain(e)}}),c.a.openUrl(e,s.settingStore.setting.link.bookmark,t)}_setActiveIndex(e){this._activeIndex=e}render(){return n.e`
      <section class="bookmarks-popup">
        <ul
          class="bookmarks-popup-tree global-scrollbar"
          style="max-width: ${S.popupMaxWidth}px;min-width: ${S.maxWidth}px;"
          @scroll=${()=>this.hideAllChildrenPopup()}
        >
          ${0===this.tree.length?n.e`<li class="bookmark-item-empty">${i18n("empty")}</li>`:null}
          ${this.tree.map((e,t)=>n.e`
                  <bookmark-item
                    class="${this._activeIndex===t?"active":""}${0===t?" first":""}"
                    .title=${Reflect.has(e,"children")?"":e.title}
                    .text=${e.title}
                    .url=${e.url}
                    .type=${Reflect.has(e,"children")?"FOLDER":"ITEM"}
                    style="max-width: ${S.popupMaxWidth+"px"};height: 28px;"
                    ?folder_arrow=${!0}
                    ?inPopup=${!0}
                    @click=${i=>{Reflect.has(e,"children")?this._clickToOpenFolder(i,e.children,t):(this._setActiveIndex(-1),this._clickToOpenUrl(e.url,i))}}
                    @mouseenter=${i=>this._whenMouseEnterItem(i,e,t)}
                    @mousedown="${t=>{Reflect.has(e,"children")||1===t.button&&this._midClickToOpenUrl(e.url,t)}}"
                  ></bookmark-item>
                `)}
        </ul>
      </section>
      <!-- 试用上下树渲染会带来性能损耗 -->
      ${w(this._open?n.e`<bookmarks-popup
              .tree=${this._children}
              .popupType=${this._popup_type}
              .closeFolder=${this.closeFolder}
              ?open=${this._open}
              style="
              ${"top"in this._pos?"top: "+this._pos.top+"px; ":""}
              ${"left"in this._pos?"left: "+this._pos.left+"px; ":""}
              ${"right"in this._pos?"right: "+this._pos.right+"px; ":""}
              ${"bottom"in this._pos?"bottom: "+this._pos.bottom+"px; ":""}"
              @mouseenter=${()=>{this._update_throttle_timer&&(clearTimeout(this._update_throttle_timer),this._update_throttle_timer=void 0)}}
            ></bookmarks-popup>`:null)}
    `}}$.styles=[k.a,n.b`
      :host {
        width: auto;
        height: auto;
        min-width: 80px;
        position: fixed;
        overflow: hidden;
        background-color: #fff;
        border-radius: 6px;
        box-shadow: rgba(0, 0, 0, 0.2) 0 0 12px 3px;
      }

      .bookmarks-popup {
        width: 100%;
        height: 100%;
      }

      .bookmarks-popup .bookmarks-popup-tree {
        width: 100%;
        height: 100%;
        margin: 0;
        box-sizing: border-box;
        padding: 10px 0;
      }

      .bookmarks-popup .bookmarks-popup-tree .bookmark-item-empty {
        width: inherit;
        height: inherit;
        min-width: inherit;
        max-width: inherit;
        box-sizing: border-box;
        padding: 2px 10px;
      }

      .bookmarks-popup .bookmarks-popup-tree bookmark-item {
        position: relative;
      }

      .bookmarks-popup .bookmarks-popup-tree bookmark-item::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        background-color: #000;
        border-radius: inherit;
        transition: opacity 100ms;
      }
      // .bookmarks-popup .bookmarks-popup-tree bookmark-item.active::before {
      //   opacity: 0.1;
      // }
      .bookmarks-popup .bookmarks-popup-tree bookmark-item:hover::before {
        transition: opacity 100ms;
        opacity: 0.1;
      }
    `],I([Object(n.g)({type:Array})],$.prototype,"tree",void 0),I([Object(n.g)({type:Boolean})],$.prototype,"open",void 0),I([Object(n.g)({type:String})],$.prototype,"popupType",void 0),I([Object(n.g)({type:Object})],$.prototype,"closeFolder",void 0),I([Object(n.f)()],$.prototype,"_open",void 0),I([Object(n.f)()],$.prototype,"_children",void 0),I([Object(n.f)()],$.prototype,"_pos",void 0),I([Object(n.f)()],$.prototype,"_popup_type",void 0),window.customElements.define("bookmarks-popup",$);var E=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};class C extends a.a{constructor(){super(),this._zindex=1e7,this._activeIndex=-1,this._popup_index=-1,this._children=[],this._open=!1,this._popup_pos={},this._popup_zindex=-1,this._emitUpdateList=()=>{this._throttleUpdateList()},this._bookmarks_url="chrome://bookmarks",this._closeFolder=()=>{this._popup_pos={},S.keep_open&&S.setKeepOpen(!1),this._open&&(this._open=!1),this._popup_zindex=-1,this._activeIndex=-1},c.a.send({key:"bg-run-start-watch-bookmarks"})}firstUpdated(){this._itemsContainer=this.shadowRoot.querySelector(".bookmark-items"),this._bookmarksPopup=this.shadowRoot.querySelector(".bookmarks-popup-comp"),this._initPage()}_bookmarksToLocal(e){var t;const i=Math.ceil(window.screen.width/this._itemsContainer.clientWidth)*e,o=Object(x.j)((null===(t=S.list)||void 0===t?void 0:t.children)||[]);o.length>i&&o.splice(i),localStorage.setItem("bookmarks",JSON.stringify(o))}_initPage(){this._throttleUpdateList=c.a.throttle(this._updateList,40),S.updateBookmarks().finally(()=>{r.a.resolve().then(()=>this.updateComplete).then(()=>{this.style.display="block"}).then(()=>this.updateComplete).then(()=>new r.a(e=>setTimeout(e,100))).finally(()=>{const e=document.querySelector(".top-bookmark");e&&e.parentElement.removeChild(e)})}),this._updateListDisposer=Object(x.h)(()=>S.list,()=>this._throttleUpdateList(!0)),this._updateOtherListDisposer=Object(x.h)(()=>S.otherList,()=>this._throttleUpdateList(!0)),this._watchListDisposer=Object(x.h)(()=>S.listInTopBar.length,e=>this._bookmarksToLocal(e),{fireImmediately:!0}),window.addEventListener("resize",this._emitUpdateList),window.addEventListener("blur",this._closeFolder)}_updateList(e=!1){this._open&&this._closeFolder();const{offsetWidth:t}=this._itemsContainer,{minWidth:i}=S;let o=Math.floor(t/i);l.i&&o--;const{children:r}=S.list,n=r.slice(0,o),a=r.slice(o);S.updateListInView(n,a),this.updateComplete.then(()=>{let e=0;const t=this.shadowRoot.querySelectorAll('.bookmark-items>bookmark-item:not([type="STAR"])');for(let i=0,o=t.length-1;o>=i;o--){if(!(t[o].offsetTop>10))break;e++}0!==e&&(a.unshift(...n.splice(-e)),S.updateListInView(n,a))})}disconnectedCallback(){this._throttleUpdateList&&(window.removeEventListener("resize",this._emitUpdateList),window.removeEventListener("blur",this._closeFolder)),this._updateListDisposer&&this._updateListDisposer(),this._updateOtherListDisposer&&this._updateOtherListDisposer(),this._watchListDisposer&&this._watchListDisposer()}_clickToOpenFolder(e,t,i){if(S.keep_open)return this._popup_pos={},this._open=!1,S.setKeepOpen(!1),this._popup_zindex=-1,void(this._activeIndex=-1);this._popup_index=i,this._setActiveIndex(i),S.setKeepOpen(!0),this._open=!0,this._children=t;const{offsetLeft:o}=e.currentTarget;requestAnimationFrame(()=>{this._updatePopupPos(o),this._popup_zindex=this._zindex})}_whenMouseEnterItem(e,t,i){if(S.keep_open){this._setActiveIndex(i);const o=t=>{this._popup_zindex=-1,this._open||(this._open=!0),this._children=t,this._popup_pos={};const{offsetLeft:i}=e.currentTarget;requestAnimationFrame(()=>{this._updatePopupPos(i),this._popup_zindex=this._zindex})},r=e=>{this._popup_index!==i&&this._bookmarksPopup.hideAllChildrenPopup(),this._popup_index=i,o(e)};Array.isArray(t)?r(t):Reflect.has(t,"children")&&r(t.children)}}_updatePopupPos(e){const{innerWidth:t,innerHeight:i}=window,{offsetWidth:o,offsetHeight:r}=this._bookmarksPopup,n=Object.assign({},this._popup_pos);e+o>t?n.right=0:n.left=e,n.top=S.bookmarkBarHeight,r>i&&(n.bottom=S.popup_bottom),this._popup_pos=n}_clickToOpenUrl(e,t){O.a.sendEvent({action:{openTopBookmark:c.a.getTargetLogDomain(e)}}),c.a.openUrl(e,s.settingStore.setting.link.bookmark,t)}_setActiveIndex(e){this._activeIndex=e}render(){return n.e`
      <section class="bookmarks">
        <section class="bookmarks-topbar">
          <section class="bookmark-items">
            ${l.i?n.e`
                  <bookmark-item
                    type="STAR"
                    .text=${i18n("bookmarks")}
                    .url=${this._bookmarks_url}
                    style="max-width: ${S.maxWidth+"px"}"
                    @click=${e=>this._clickToOpenUrl(this._bookmarks_url,e)}
                    @mousedown="${e=>{1===e.button&&this._clickToOpenUrl(this._bookmarks_url,e)}}"
                    .title=${i18n("bookmarks")}
                  ></bookmark-item>
                  <!-- @mouseenter=${()=>{this._open&&(this._open=!1)}} -->
                `:null}
            ${S.listInTopBar.map((e,t)=>n.e`
                    <bookmark-item
                      class="${this._activeIndex===t?"active":""}"
                      .title=${Reflect.has(e,"children")?"":e.title}
                      .text=${e.title}
                      .url=${e.url}
                      .type=${Reflect.has(e,"children")?"FOLDER":"ITEM"}
                      style="max-width: ${S.maxWidth+"px"}"
                      @click=${i=>{Reflect.has(e,"children")?this._clickToOpenFolder(i,e.children,t):(this._setActiveIndex(-1),this._clickToOpenUrl(e.url,i))}}
                      @mousedown="${t=>{Reflect.has(e,"children")||1===t.button&&this._clickToOpenUrl(e.url,t)}}"
                      @mouseenter=${i=>this._whenMouseEnterItem(i,e,t)}
                    ></bookmark-item>
                  `)}
          </section>

          <i
            class="bookmark-item bookmark-dropdown-entry${-2===this._activeIndex?" active":""}"
            style="background-image: url(${i(686)});${0===S.listInDropdown.length?"visibility: hidden;":""}"
            @click=${e=>this._clickToOpenFolder(e,S.listInDropdown,-2)}
            @mouseenter=${e=>this._whenMouseEnterItem(e,S.listInDropdown,-2)}
          ></i>
          <i class="bookmark-split-line"></i>
          <section
            @click=${e=>this._clickToOpenFolder(e,S.otherList.children,-3)}
            @mouseenter=${e=>this._whenMouseEnterItem(e,S.otherList,-3)}
            class="bookmark-item other-bookmark${-3===this._activeIndex?" active":""}"
            style="max-width: ${S.maxWidth}px"
          >
            <img class="bookmark-icon" src=${i(648)} />
            <span class="bookmark-text">${i18n("other_bookmarks")}</span>
          </section>
        </section>

        <!-- 点击bookmarks弹出的文件夹框和背景透明mask -->
        <section
          class="bookmarks-popup"
          style="
            ${this._open?"":"display: none;"}
          "
        >
          <section class="bookmarks-popup-mask" @click=${()=>this._closeFolder()}></section>
          <bookmarks-popup
            class="bookmarks-popup-comp"
            style="z-index: ${this._popup_zindex};
            ${"top"in this._popup_pos?"top: "+this._popup_pos.top+"px; ":""}
            ${"left"in this._popup_pos?"left: "+this._popup_pos.left+"px; ":""}
            ${"right"in this._popup_pos?"right: "+this._popup_pos.right+"px; ":""}
            ${"bottom"in this._popup_pos?"bottom: "+this._popup_pos.bottom+"px; ":""}"
            .tree=${this._children}
            ?open=${this._open}
            .closeFolder=${this._closeFolder.bind(this)}
          ></bookmarks-popup>
        </section>
      </section>
    `}}C.styles=[d,p],E([Object(n.f)()],C.prototype,"_children",void 0),E([Object(n.f)()],C.prototype,"_open",void 0),E([Object(n.f)()],C.prototype,"_popup_pos",void 0),E([Object(n.f)()],C.prototype,"_popup_zindex",void 0),window.customElements.define("topbar-bookmarks",C);var T=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let j=class extends a.a{firstUpdated(){this.style.zIndex="100000"}render(){const{withPermissionTopBookmark:e}=s.settingStore;return n.e`
      <div class="newtab-topbar">
        ${e?n.e` <topbar-bookmarks style="display: none;"></topbar-bookmarks> `:null}
      </div>
    `}};j.styles=n.b`
    .newtab-topbar {
      position: relative;
      z-index: 102;
    }
  `,j=T([Object(n.c)("newtab-topbar")],j);var P=i(15),R=i.n(P),L=(i(31),i(144)),N=n.b`.main {
  width: 100vw;
  height: 100%;
}
.hide {
  display: none !important;
}
.main-left,
.main-right {
  position: absolute;
  top: 0;
  z-index: 2;
  width: var(--main-side-width);
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: #fff;
  opacity: 0;
}
.main-left[hidden],
.main-right[hidden] {
  display: none;
}
.main-left {
  left: 0;
}
.main-right {
  right: 0;
}
.main-middle {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.main-middle-center {
  width: 100vw;
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}
.main-middle-center:active,
.main-middle-center:focus {
  border: none !important;
  outline: none !important;
}
.search {
  margin-top: var(--search-margin-top);
}
.swiper-container {
  flex-shrink: 0;
  position: relative;
  padding: 0 0 20px;
  width: 100%;
  overflow-x: hidden;
  overflow-y: visible;
  margin-top: calc(var(--icon-padding-top) * -1);
}
.swiper-container .swiper-content {
  height: calc(var(--icon-box-height) + var(--icon-padding-top));
  width: calc(var(--icon-box-width) + var(--main-icons-margin) * 2);
  box-sizing: border-box;
}
.swiper-container .swiper-pagination {
  position: absolute;
  left: 50%;
  bottom: 0;
  transform: translateX(-50%);
  display: flex;
}
.swiper-container .swiper-pagination .dot {
  margin: 0 10px;
  display: block;
  width: 10px;
  height: 10px;
  background-color: #fff;
  opacity: 0.4;
  border-radius: 50%;
  cursor: pointer;
  transition: opacity 0.3s ease;
}
.swiper-container .swiper-pagination .dot:hover {
  opacity: 0.6;
}
.swiper-container .swiper-pagination .dot.active {
  opacity: 1;
}
.swiper-btn-prev,
.swiper-btn-next {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
}
.swiper-btn-next {
  right: calc(var(--main-side-width) / 2);
}
.swiper-btn-prev {
  left: calc(var(--main-side-width) / 2);
  transform: translateY(-50%) rotate(180deg);
}
.swiper-btn.hide {
  opacity: 0;
  pointer-events: none;
}
.swiper-btn {
  margin-top: calc(var(--search-height) / 2);
  opacity: 0.2;
  transition-property: opacity;
  transition-duration: 300ms;
  transition-timing-function: ease;
  cursor: pointer;
}
.swiper-btn img {
  height: var(--icon-width);
  max-width: 42px;
  max-height: 125px;
}
.swiper-btn:hover {
  opacity: 0.8;
}
.swiper-btn::after {
  content: none;
}
.btn-setting-box {
  position: absolute;
  right: 20px;
  top: var(--settings-icon-top-offset);
  display: flex;
  justify-content: flex-end;
  pointer-events: none;
}
i-updater {
  pointer-events: auto;
}
.btn-setting,
.setting-home-box .btn-setting-home {
  margin-left: 30px;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition-property: transform;
  transition-duration: 0.3s;
  transition-timing-function: ease;
  pointer-events: auto;
}
.btn-setting:hover {
  transform: scale(1.1);
}
.btn-settings {
  transition: transform 300ms ease 0s;
  width: 40px;
  height: 40px;
  background-color: rgba(0, 0, 0, 0.2);
  margin-left: 30px;
  border-radius: 50%;
  cursor: pointer;
  pointer-events: auto;
  display: flex;
  justify-content: center;
  align-items: center;
}
.btn-settings:hover {
  transform: scale(1.1);
}
.btn-settings .btn-settings-icon .icon-dash {
  width: 16px;
  height: 2px;
  background-color: #fff;
}
.btn-settings .btn-settings-icon .icon-dash:nth-child(2) {
  margin: 4px 0;
}
.setting-home-box {
  display: flex;
  flex-flow: column;
  justify-content: center;
  align-items: center;
}
.setting-home-box .btn-setting-home {
  margin: 0;
}
.setting-home-box .btn-setting-home:hover {
  transform: scale(1.1);
}
.setting-home-box .setting-home-text {
  position: absolute;
  top: -100px;
  text-align: center;
  font-size: 14px;
  font-family: PingFangSC-Regular, PingFang SC;
  font-weight: 400;
  color: #222222;
  line-height: 28px;
  min-width: 80px;
  padding: 0 10px;
  box-sizing: border-box;
  height: 28px;
  background: #ffffff;
  box-shadow: 0px 2px 6px 0px rgba(0, 0, 0, 0.2);
  border-radius: 8px;
  white-space: nowrap;
}
.sync {
  position: absolute;
  left: 20px;
  bottom: 20px;
  display: flex;
}
.sync .syncing-img {
  width: 20px;
  height: 20px;
  animation: round 0.8s linear infinite;
}
.sync-end {
  align-items: center;
  height: 20px;
  font-size: 12px;
  font-weight: 400;
  color: #ffffff;
  line-height: 20px;
}
.sync-end img {
  width: 20px;
  height: 20px;
  margin-right: 6px;
}
@keyframes round {
  0% {
    transform: rotate(0deg);
  }
  25% {
    transform: rotate(90deg);
  }
  50% {
    transform: rotate(180deg);
  }
  75% {
    transform: rotate(270deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.windmill {
  position: absolute;
  right: 20px;
  bottom: 0;
  display: flex;
  flex-direction: column;
}
.windmill img {
  z-index: 1;
  cursor: pointer;
  width: 40px;
  height: 40px;
}
.windmill span {
  display: block;
  margin-top: -30px;
  margin-left: auto;
  margin-right: auto;
  width: 5px;
  height: 56px;
  background-color: #fefefe;
}
.icp {
  position: fixed;
  bottom: 16px;
  left: 0;
  right: 0;
  text-align: center;
  pointer-events: none;
}
.icp-link {
  color: #fff;
  font-size: 12px;
  opacity: 0.3;
  text-decoration: none;
  pointer-events: all;
}
.icp-link:hover {
  opacity: 0.8;
}
.hide {
  display: none;
}
`,M=i(519);class D extends M.a{}const U=Object(M.b)(new D);var B=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};class F{constructor(){this.flipStatus=!1,this.iconEditing=!1,this.folderIndexs=null,this.folderFlipData=null,this.focusName=!1,this.offsetX=0,this.iconActive=!1}get folderStatus(){return null!==this.folderIndexs}get folderItem(){if(null===this.folderIndexs)return null;const e=this.folderIndexs[0],t=this.folderIndexs[1];return s.siteStore.sites[e][t]}changeIconEditing(e){this.iconEditing=e}openFolderWithIndexs(e){this.folderIndexs=e}closeFolder(){this.folderIndexs=null}changeFolderFlipData(e){if(e){const e={};this.folderFlipData=e}else this.folderFlipData=e}changeFlipStatus(e){this.flipStatus=e}changeFocusStatus(e){this.focusName=e}changeOffsetX(e){this.offsetX=e}changeIconActive(e){this.iconActive=e}}B([x.g],F.prototype,"flipStatus",void 0),B([x.g],F.prototype,"iconEditing",void 0),B([x.g],F.prototype,"folderIndexs",void 0),B([x.g],F.prototype,"folderFlipData",void 0),B([x.g],F.prototype,"focusName",void 0),B([x.g],F.prototype,"offsetX",void 0),B([x.g],F.prototype,"iconActive",void 0),B([x.e],F.prototype,"folderStatus",null),B([x.e],F.prototype,"folderItem",null),B([x.b],F.prototype,"changeIconEditing",null),B([x.b],F.prototype,"openFolderWithIndexs",null),B([x.b],F.prototype,"closeFolder",null),B([x.b],F.prototype,"changeFolderFlipData",null),B([x.b],F.prototype,"changeFlipStatus",null),B([x.b],F.prototype,"changeFocusStatus",null),B([x.b],F.prototype,"changeOffsetX",null),B([x.b],F.prototype,"changeIconActive",null);const z=new F,H=()=>{var e,t;if(z.iconActive){if(R()(e=s.pluginStore.pluginViews).call(e,"infinity://settings")||R()(t=s.pluginStore.pluginViews).call(t,"profile")){const e=s.pluginStore.pluginViews.slice(-1)[0];if("infinity://settings"===e||"profile"===e){const e=(innerWidth-parseInt(document.body.style.getPropertyValue("--icon-box-width")))/2;if(e<350&&e>10)return void z.changeOffsetX(Math.max(e-400,-e))}}z.changeOffsetX(0)}else z.changeOffsetX(0)};Object(x.c)(H,{delay:50}),window.addEventListener("resize",c.a.throttle(()=>{document.querySelector("i-menu").toHide(),H()},50)),U.setAddIconActiveStatus=e=>{z.changeIconActive(e)};var W=n.b`:host {
  display: block;
  --left: 0;
  --top: 0;
}
.menu-container {
  pointer-events: none;
  position: absolute;
  z-index: 999;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
}
.menu-box {
  padding: 7px 0;
  pointer-events: all;
  display: flex;
  flex-direction: column;
  background-color: #fff;
  position: absolute;
  left: var(--left);
  top: var(--top);
  -moz-user-select: none;
       user-select: none;
  box-shadow: 0px 4px 19px 0px rgba(0, 0, 0, 0.12);
  border-radius: 6px;
  overflow: hidden;
  transition: 0.3s opacity;
  opacity: 1;
}
.menu-box .menu-item {
  display: flex;
  justify-content: space-between;
  margin: 1px 0;
  cursor: pointer;
  font-size: 13px;
  line-height: 1.4;
  padding: 8px 20px;
  color: #333;
  transition: none;
  background-color: #ffffff;
}
.menu-box .menu-item .text {
  white-space: nowrap;
}
.menu-box .menu-item .keyboard {
  min-width: 42px;
  white-space: nowrap;
  margin-left: 18px;
  color: #999999;
}
.menu-box .menu-item:hover {
  background-color: #f1f1f1;
}
`,G=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let V=null,q=class extends n.a{constructor(){super(...arguments),this.show=!1,this.menus=[],this.position={left:0,top:0},this._renderMenu=()=>this.menus.map(e=>n.e`<span
        class="menu-item"
        @click="${t=>{this.toHide(),e.handler(t)}}"
      >
        <div class="text">${e.text}</div>
        <div class="keyboard">${e.keyboard}</div>
      </span> `)}static create(){if(V)return V;const e=document.body;return V=document.createElement("i-menu"),e.appendChild(V),V}firstUpdated(){}destroy(){this.parentNode.removeChild(this)}updated(){const{left:e,top:t}=this.position,i={left:e,top:t},{clientWidth:o,clientHeight:r}=this.$menuBox,{width:n,height:a}=document.body.getBoundingClientRect();n<e+o&&(i.left-=o),a<t+r&&(i.top-=r),this.style.setProperty("--left",i.left+"px"),this.style.setProperty("--top",i.top+"px")}toShow(e,t){this.menus=e,this.position=t,this.show=!0}toHide(){this.show&&(this.show=!1)}render(){return n.e`
      <div class="menu-container" .hidden="${!this.show}">
        <div class="menu-box">${this._renderMenu()}</div>
      </div>
    `}};q.styles=W,G([Object(n.h)(".menu-box")],q.prototype,"$menuBox",void 0),G([Object(n.g)({type:Boolean})],q.prototype,"show",void 0),G([Object(n.g)({type:Array,attribute:!1})],q.prototype,"menus",void 0),G([Object(n.g)({type:Object})],q.prototype,"position",void 0),q=G([Object(n.c)("i-menu")],q);var Y=i(606);const Q=e=>{const t=[];return e?(e.querySelectorAll("[flipkey]").forEach(e=>{t.push(e)}),t):t};class X{constructor({root:e=document.body,selector:t=Q,duration:i=300,easing:o="ease",viewBox:r}){this.root=null,this.viewBox=null,this.selector=null,this.duration=null,this.easing=null,this._first={},this._last={},this._animations={},this.root=e,this.viewBox=r,this.selector=t,this.duration=i,this.easing=o,this._first={},this._last={},this._animations={}}_read(e){const t={},i=this.selector(this.root);let o;return this.viewBox&&(o=this.viewBox.getBoundingClientRect()),i.forEach(i=>{const r=i.getAttribute("flipkey");if(r&&"undefined"!==r){t[r]&&console.warn("当前[flipkey]重复：",r);const n=i.getBoundingClientRect(),{left:a,top:s,width:l,height:c}=n,d={left:a,top:s,width:l,height:c};!function(e,t){return t?e.top+e.height>=t.top&&e.left+e.width>=t.left&&e.bottom-e.height<=t.bottom&&e.right-e.width<=t.right:e.top+e.height>=0&&e.left+e.width>=0&&e.bottom-e.height<=window.innerHeight&&e.right-e.width<=window.innerWidth}(n,o)?t[r]=null:(e&&(d.elm=i),t[r]=d)}}),t}read(e={}){const t=this._read();return this._first=Object.assign(Object.assign({},t),e),this._first}cancel(e){this._animations[e]&&this._animations[e].cancel()}play({keepScale:e="",props:t=["scale","position"],created:i=null}={keepScale:"",props:["scale","position"],created:null}){return new r.a(o=>{this._last=this._read(!0);let r=0,n=0;Object.keys(this._last).forEach(a=>{const s={},l={},c=this._last[a],d=this._first[a];if(!c)return;const p={},h={duration:this.duration,easing:this.easing};if(d?(R()(t).call(t,"position")&&(p.translateX=Math.round(d.left-c.left)||0,p.translateY=Math.round(d.top-c.top)||0),R()(t).call(t,"scale")&&(p.scaleX=c.width>10?d.width/c.width:1,p.scaleY=c.height>10?d.height/c.height:1,"width"===e?p.scaleY=p.scaleX:"height"===e&&(p.scaleX=p.scaleY))):"scale"===i&&(p.scaleX=p.scaleY=.3,s.opacity="0",l.opacity="1",h.duration=200),s.transform=`matrix(${p.scaleX||1},0,0,${p.scaleY||1},${p.translateX||0},${p.translateY||0})`,l.transform="matrix(1,0,0,1,0,0)",l.transform!==s.transform&&Object.keys(s).length&&Object.keys(l).length){r+=1;const e=c.elm;e.style.pointerEvents="none";const t=e.animate([s,l],h);this._animations[a]=t,t.onfinish=()=>{this._animations[a]=null,e.style.pointerEvents="",n+=1,n===r&&o(n)},t.oncancel=()=>{this._animations[a]=null,e.style.pointerEvents="",n+=1,n===r&&o(n)}}}),0===r&&o(0)})}}var K=i(505),Z=i(768),J=i(2),ee=(i(642),i(244)),te=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};class ie{constructor(){this.dragId="",this.dragIndexs=[],this.startMove=!1,this.mobileDrag=!1,this.dragXLimit=!1,this.dragStage=null,this.dragMergeHolderIndexs=null,this.dropTargetId="",this.dragIns=null,this.dragNone={dom:null,oraginOffsetX:0,oraginOffsetY:0,offsetX:0,offsetY:0,marginX:0,width:0,height:0,x:0,y:0},this.drag=Object.assign({},this.dragNone),this.folderTimer=null}get withHolderPageSites(){if(this.startMove&&this.dragIndexs.length>0){const e=s.siteStore.sites.length,t=s.siteStore.sites[e-1];return 2===this.dragIndexs.length&&1===t.length&&this.dragIndexs[0]===e-1?s.siteStore.sites:[...s.siteStore.sites,[]]}return s.siteStore.sites}setDragStatus(e,t=[]){this.dragId=e,this.dragIndexs=t}changeXLimitStatus(e){this.dragXLimit=e}setStartMove(e){this.startMove=e}clearDragStatus(){this.dragId="",this.dragIndexs=[],this.startMove=!1,this.dragStage=null,this.dragMergeHolderIndexs=null,this.dropTargetId=""}clearDragIndexs(){this.dragIndexs=[]}setMergeStatus(e,t){this.dragStage=e,this.dropTargetId=t}checkDragIndexs(){var e,t;const[i,o,r]=this.dragIndexs;let n=null;if(2===this.dragIndexs.length?n=s.siteStore.sites[i][o]:3===this.dragIndexs.length&&(n=null===(t=null===(e=s.siteStore.sites[i][o])||void 0===e?void 0:e.children)||void 0===t?void 0:t[r]),(null==n?void 0:n.id)===this.dragId)return;const a=s.siteStore.findIndex(0,this.dragId);this.dragIndexs=a||[]}setMobileDrag(e){this.mobileDrag=e}setHolderIndexs(e=[]){2===e.length&&2===this.dragIndexs.length&&e[0]===this.dragIndexs[0]&&e[1]>this.dragIndexs[1]?this.dragMergeHolderIndexs=[...this.dragIndexs]:this.dragMergeHolderIndexs=null}clearMergeStatus(){this.dragStage=null,this.dropTargetId=""}setDragIns(e){this.dragIns=e}sortSites(e,t){const[i,o,r]=this.dragIndexs,[n,a,l]=e;i===n&&(3===e.length&&3===this.dragIndexs.length?"left"===t&&l>r&&l%s.settingStore.setting.layout.col==0?t="right":"right"===t&&l<r&&l%s.settingStore.setting.layout.col==s.settingStore.setting.layout.col-1&&(t="left"):2===e.length&&2===this.dragIndexs.length&&("left"===t&&a>o&&a%s.settingStore.setting.layout.col==0?t="right":"right"===t&&a<o&&a%s.settingStore.setting.layout.col==s.settingStore.setting.layout.col-1&&(t="left")));const c=s.siteStore.sites[i][o];let d=c;3===this.dragIndexs.length&&(d=d.children[r]),"right"===t?2!==e.length||2===this.dragIndexs.length&&i===n&&o<a?3===e.length&&r>l&&(e[2]+=1):e[1]+=1:2===e.length&&2===this.dragIndexs.length&&i===n&&o<a?e[1]-=1:3===e.length&&r<l&&(e[2]-=1);const{data:p,clearPageIndex:h}=s.siteStore.delSites(this.dragIndexs,!1);s.siteStore.insertSite(e,p[0]);const u=s.siteStore.handelStatus(this.dragIndexs,e,c,d,h);this.dragIndexs=u}createFolder(e){const[t,i,o]=this.dragIndexs,[r,n]=e,a=s.siteStore.sites[t][i];let l=a;const d=s.siteStore.sites[r][n];3===this.dragIndexs.length&&(l=l.children[o]);const p={name:i18n("folder"),uuid:c.a.randomId("folder-"),id:c.a.randomId("folderId-"),children:[d,l],updatetime:Date.now()};s.siteStore.delSites(e,!1),s.siteStore.insertSite(e,p),this.setMergeStatus("merge",p.id);const{clearPageIndex:h}=s.siteStore.delSites(this.dragIndexs,!1),u=s.siteStore.handelStatus(this.dragIndexs,e,a,l,h);return this.dragIndexs=u,{folderId:p.id,uuid:p.uuid}}intoFolder(e){const[t,i,o]=this.dragIndexs,[r,n]=e,a=s.siteStore.sites[t][i];let l=a;const c=s.siteStore.sites[r][n];3===this.dragIndexs.length&&(l=l.children[o]);const d=c.children.length;oe.setMergeStatus("merge",c.id),s.siteStore.insertSite([...e,d],l);const{clearPageIndex:p}=s.siteStore.delSites(this.dragIndexs,!1),h=s.siteStore.handelStatus(this.dragIndexs,e,a,l,p);this.dragIndexs=h}}te([x.g],ie.prototype,"dragId",void 0),te([x.g],ie.prototype,"dragIndexs",void 0),te([x.g],ie.prototype,"startMove",void 0),te([x.g],ie.prototype,"mobileDrag",void 0),te([x.g],ie.prototype,"dragXLimit",void 0),te([x.g],ie.prototype,"dragStage",void 0),te([x.g],ie.prototype,"dragMergeHolderIndexs",void 0),te([x.g],ie.prototype,"dropTargetId",void 0),te([x.g],ie.prototype,"dragIns",void 0),te([x.e],ie.prototype,"withHolderPageSites",null),te([x.b],ie.prototype,"setDragStatus",null),te([x.b],ie.prototype,"changeXLimitStatus",null),te([x.b],ie.prototype,"setStartMove",null),te([x.b],ie.prototype,"clearDragStatus",null),te([x.b],ie.prototype,"clearDragIndexs",null),te([x.b],ie.prototype,"setMergeStatus",null),te([x.b],ie.prototype,"checkDragIndexs",null),te([x.b],ie.prototype,"setMobileDrag",null),te([x.b],ie.prototype,"setHolderIndexs",null),te([x.b],ie.prototype,"clearMergeStatus",null),te([x.b],ie.prototype,"setDragIns",null),te([x.b],ie.prototype,"sortSites",null),te([x.b],ie.prototype,"createFolder",null),te([x.b],ie.prototype,"intoFolder",null);const oe=new ie;Object(x.h)(()=>({dragId:oe.dragId,folderStatus:z.folderStatus}),e=>{var t;if(e.dragId){const i=document.body.querySelector(".drag-icon-box");if(i){let o=0,r=0;if(e.folderStatus)z.folderFlipData&&(r=116),oe.folderTimer=setTimeout(()=>{var e;const t=null===(e=document.querySelector("newtab-main").shadowRoot.querySelector("icon-folder").shadowRoot.querySelector("icon-box"))||void 0===e?void 0:e.shadowRoot.querySelector("icon-content");if(t){const{width:e,height:r}=t.getBoundingClientRect();i.style.width=e+"px",i.style.height=r+"px";const{width:n}=t.shadowRoot.querySelector(".icon-content").getBoundingClientRect();o=(e-n)/2,oe.drag.width=n}const r=i.querySelector(".icon-content"),n=i.querySelector(".icon-name");r.style.width="calc(var(--icon-width) * 0.8)",r.style.height="calc(var(--icon-width) * 0.8)",n.style.width="calc(var(--icon-width) * 1.2)",oe.drag.offsetX=.8*oe.drag.oraginOffsetX+o,oe.drag.offsetY=.8*oe.drag.oraginOffsetY,oe.drag.marginX=o;const a=oe.drag.x-oe.drag.offsetX,s=oe.drag.y-oe.drag.offsetY;i.style.left=a+"px",i.style.top=s+"px"},r);else{oe.folderTimer&&clearTimeout(oe.folderTimer);const e=null===(t=document.querySelector("newtab-main").shadowRoot.querySelector("newtab-icons").shadowRoot.querySelector("icon-box"))||void 0===t?void 0:t.shadowRoot.querySelector("icon-content");if(e){const{width:t,height:r}=e.getBoundingClientRect();i.style.width=t+"px",i.style.height=r+"px";const{width:n}=e.shadowRoot.querySelector(".icon-content").getBoundingClientRect();o=(t-n)/2,oe.drag.width=n}const r=i.querySelector(".icon-content"),n=i.querySelector(".icon-name");r.style.width="var(--icon-width)",r.style.height="var(--icon-width)",n.style.width="calc(var(--icon-width) * 1.5)",oe.drag.offsetX=oe.drag.oraginOffsetX+o,oe.drag.offsetY=oe.drag.oraginOffsetY,oe.drag.marginX=o;const a=oe.drag.x-oe.drag.offsetX,s=oe.drag.y-oe.drag.offsetY;i.style.left=a+"px",i.style.top=s+"px"}}}}),Object(x.c)(()=>{if(oe.dragIns){const e=document.querySelector("newtab-main");z.folderStatus?oe.dragIns.updateOption({dropPointShadowRoot:e.$folderBox.shadowRoot}):oe.dragIns.updateOption({dropPointShadowRoot:e.$items.shadowRoot}),z.iconEditing?oe.dragIns.updateOption({mobileStartDelayTime:0}):oe.dragIns.updateOption({mobileStartDelayTime:500})}},{delay:20});var re=i(45),ne=i(607),ae=i(312),se=i(128),le=i(165);const ce={IS_WEB:{list:["history","bookmarks","extension","chrome-apps","extensions"],exec:e=>{s.settingStore.toggleSettingHomeModal(),s.settingStore.setWebClickName(e)}},IS_FIREFOX:{list:["infinity://extension","infinity://chrome-apps"],exec:()=>{se.message.error(Object(J.i18n)("browser_does_not_support_this_feature",Object(le.d)(l.D.vendor)))}},IS_SAFARI:{list:["infinity://extension","infinity://chrome-apps","infinity://history","infinity://bookmarks"],exec:()=>{se.message.error(Object(J.i18n)("browser_does_not_support_this_feature",Object(le.d)(l.D.vendor)))}}};function de(e){var t;if("string"!=typeof e)return!0;let i,o=!1;return l.s?(i=ce.IS_WEB,e.startsWith("infinity://")?e=e.split("://")[1]:e.startsWith("chrome://")&&(e=e.split("://")[1].split("/")[0])):l.n?i=ce.IS_FIREFOX:l.r&&(i=ce.IS_SAFARI),i&&R()(t=i.list).call(t,e)&&(i.exec(e),o=!0),o}var pe=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let he=class extends a.a{constructor(){super(...arguments),this.icon=null,this.indexs=[],this.flipkey="",this.mousedown=!1,this.isFolderItem=!1,this.menu=null,this.menus=[{text:Object(J.i18n)("open_folder_icons"),handler:()=>{this.icon.children.forEach(e=>{if("web"===e.type){const t={url:e.target,active:!1};l.l?chrome.tabs.create(t):c.a.openUrl(e.target,!0)}})}},{text:Object(J.i18n)("rename_folder"),handler:()=>{z.changeFolderFlipData({}),z.openFolderWithIndexs(this.indexs),z.changeFocusStatus(!0)}},{text:Object(J.i18n)("del_folder"),handler:()=>{Y.IConfirm.create().toShow({title:Object(J.i18n)("del_folder"),text:Object(J.i18n)("confirm_del_folder"),onConfirm:()=>{s.siteStore.delSites(this.indexs)}})}},{text:Object(J.i18n)("unzip_folder_title"),handler:()=>{Y.IConfirm.create().toShow({title:Object(J.i18n)("unzip_folder_title"),text:Object(J.i18n)("unzip_folder_content"),onConfirm:()=>{s.siteStore.manualDestroyFolder(this.indexs)}})}}],this._mouseUp=()=>{window.removeEventListener("mouseup",this._mouseUp,{capture:!0}),this.mousedown=!1},this.onMousedown=e=>{const{button:t}=e;if(1===t)return e.stopPropagation(),void this._handleClick(e);if(0===t){if(!0===this.mousedown)return;this.mousedown=!0,window.addEventListener("mouseup",this._mouseUp,{capture:!0})}},this.onTouchStart=e=>{!0!==this.mousedown&&(this.mousedown=!0,e.target.addEventListener("touchend",this._mouseUp))},this._handleClick=e=>{if(this.menu.toHide(),this.icon.children)z.changeFolderFlipData({}),z.openFolderWithIndexs(this.indexs),O.a.sendEvent({action:"openFolder"});else{const t=this.icon;if(z.iconEditing){if(t.target===ee.i.target)return;s.siteStore.setEditSite(t.id),s.pluginStore.show("editIcon"),O.a.sendEvent({action:{openEditicon:c.a.getTargetLogDomain(t.target)}})}else{if(O.a.sendEvent({action:{openIcon:c.a.getTargetLogDomain(t.target)}}),de(t.target))return;const{link:i}=s.settingStore.setting;if(t.target.startsWith("chrome-app://"))return void c.a.openChromeApp(t.target.split("chrome-app://")[1],i.icon,e);if(t.target.startsWith("infinity://"))return l.h&&"infinity://history"===t.target?void c.a.openUrl("chrome://history/",i.icon,e):"infinity://gmail"===t.target?void c.a.openUrl("https://mail.google.com/mail/ca",i.icon,e):"infinity://chrome-apps"===t.target?(s.pluginStore.show(t.target),void Z.a.openModal()):!s.userStore.isLogin&&l.s?void s.userStore.toggleLoginTipModal():void s.pluginStore.show(t.target);c.a.openUrl(t.target,i.icon,e)}}}}static get styles(){return n.b`
      .icon-content {
        margin: auto;
        opacity: var(--icon-opacity);
        position: relative;
        cursor: pointer;
        transition-property: box-shadow, transform, border-radius, filter;
        transition-duration: 0.2s;
        transition-timing-function: ease;
        width: var(--icon-width);
        height: var(--icon-width);
      }
      .icon-content::after {
        position: absolute;
        content: '';
        width: 100%;
        height: 100%;
        z-index: -1;
      }
      .mousedown::after {
        transform: scale(1.2);
      }
      .with-drag {
        transition: none;
      }
      /* .icon-content:not(.folder) {
        backface-visibility: hidden;
      } */
      .folder-item {
        width: calc(var(--icon-width) * 0.8);
        height: calc(var(--icon-width) * 0.8);
        will-change: transform;
      }
      .mini-icon {
        /* backface-visibility: hidden; */
        overflow: hidden;
      }

      .mousedown:not(.with-drag) {
        transform: scale(0.9);
      }
      @media not all and (hover: none) {
        .icon-content:not(.with-drag):hover {
          animation: blinking ease 2s infinite;
          box-shadow: none;
        }
      }

      @keyframes blinking {
        0% {
          -webkit-filter: drop-shadow(0px 0px 3px rgba(33, 150, 243, 0.72));
        }
        50% {
          -webkit-filter: drop-shadow(0px 0px 10px rgba(33, 150, 243, 0.72));
        }
        100% {
          -webkit-filter: drop-shadow(0px 0px 3px rgba(33, 150, 243, 0.72));
        }
      }

      .del {
        position: absolute;
        width: 2vmin;
        height: 2vmin;
        max-width: 20px;
        max-height: 20px;
        min-width: 10px;
        min-height: 10px;
        box-sizing: border-box;
        padding: 0.5vmin;
        background-color: hsla(0, 0%, 100%, 0.5);
        border-radius: 50%;
        right: calc(0.25 * var(--icon-radius));
        top: calc(0.25 * var(--icon-radius));
        transform: translate(40%, -40%) scale(1.1);
        display: flex;
        justify-content: center;
        align-items: center;
        transition: transform, background-color 0.3s;
        cursor: auto;
      }
      .del i-usesvg {
        top: 0;
        width: 100%;
        height: 100%;
      }
      .del:hover {
        transform: translate(40%, -40%) scale(1.2);
        background-color: hsla(0, 0%, 100%, 1);
      }

      .icon-content.editing:not(.folder) {
        animation: spin 0.3s ease infinite;
        animation-delay: 0.3s;
        will-change: transform;
      }
      .mousedown.editing:not(.with-drag) {
        animation: spinscale 0.2s ease;
        /* animation-fill-mode: backwards; */
        animation-fill-mode: forwards;
        /* animation:none; */
      }
      @keyframes spinscale {
        from {
          transform: scale(1);
        }
        to {
          transform: scale(0.9);
        }
      }

      .icon-content.editing .op {
        display: block !important;
        position: absolute;
        width: 100%;
        height: 100%;
        border-radius: var(--icon-radius);
      }
      .icon-content.weather-item .edit-icon-box {
        display: none !important;
      }
      i-usesvg {
        position: relative;
        top: -5px;
        width: 100%;
        height: 100%;
        color: #ff4e50;
      }
      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        20% {
          transform: rotate(-2deg);
        }
        60% {
          transform: rotate(0deg);
        }
        80% {
          transform: rotate(2deg);
        }
        100% {
          transform: rotate(0deg);
        }
      }

      .icon-name {
        transition: 0.2s color;
        user-select: none;
      }
      .edit-icon-box {
        width: 100%;
        height: 100%;
        border-radius: var(--icon-radius);
        overflow: hidden;
        transition: opacity 0.3s;
        background: rgba(255, 255, 255, 0.4);
        opacity: 0;
      }
      .edit-icon {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 40%;
        height: 40%;
      }
      .edit-icon-box:hover {
        opacity: 1;
      }
      .with-drag:hover .edit-icon-box {
        opacity: 0;
      }
      .mobile-drag .edit-icon {
        opacity: 0 !important;
      }
      .icon-content.editing .red-tag {
        display: none;
      }

      .red-tag {
        /* backface-visibility: hidden; */
        display: block;
        position: absolute;
        right: calc(0.25 * var(--icon-radius));
        top: calc(0.25 * var(--icon-radius));
        transform: translate(40%, -40%);
        font-size: calc(var(--icon-width) * 0.15);
        padding: 0 calc(var(--icon-width) * 0.075);
        border-radius: calc(var(--icon-width) * 0.21);
        color: #fff;
        background-color: #ff4e50;
        line-height: 1;
        min-width: 12px;
        box-sizing: border-box;
        height: calc(var(--icon-width) * 0.21);
        min-height: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        user-select: none;
      }
      .red-tag > span {
        line-height: 1;
        margin-top: -1px;
      }
      .folder-item .red-tag {
        transform: translate(40%, -40%) scale(0.8);
      }
      .mini-icon-padding .red-tag {
        right: calc(0.2 * var(--icon-radius) + var(--icon-width) * 0.03);
        top: calc(0.2 * var(--icon-radius) + var(--icon-width) * 0.03);
        transform: translateX(50%) translateY(-50%) scale(0.3);
        z-index: 11;
      }

      .shake-item {
        transform: scale(1.1);
        filter: drop-shadow(0 0 5px rgba(33, 150, 243, 0.72)) !important;
        /* animation-name: shake;
        animation-duration: 300ms;
        animation-timing-function: ease-in-out;
        animation-iteration-count: 1; */
      }
      .hover-item {
        transition: all 0.2s;
        transform: scale(1.1);
        filter: drop-shadow(0 0 5px rgba(33, 150, 243, 0.72)) !important;
      }
      img {
        user-select: none;
      }
    `}async firstUpdated(){this.menu=q.create()}delAmimation(){return new r.a(e=>{this.$icon.animate([{transform:"scale(1)",opacity:1},{transform:"scale(0.1)",opacity:0}],{duration:300,easing:"ease-in-out"}).onfinish=e,setTimeout(()=>{e(null)},300)})}async _delItem(e){var t,i;if(e.stopPropagation(),await this.delAmimation(),s.siteStore.delSites(this.indexs),3===this.indexs.length){const[e,o]=this.indexs,r=s.siteStore.sites[e][o];0===(null===(t=r.children)||void 0===t?void 0:t.length)?(z.closeFolder(),s.siteStore.delSites(this.indexs)):1===(null===(i=r.children)||void 0===i?void 0:i.length)&&(z.closeFolder(),s.siteStore.destroyFolder(this.indexs))}}_rightClick(e){if(e.stopPropagation(),e.preventDefault(),s.userStore.isLogin||!l.s){if(this.icon.children){const t={left:e.pageX,top:e.pageY};return this.menus[0].text=Object(J.i18n)("open_all")+"("+this.icon.children.filter(e=>"web"===e.type).length+")",this.menu.toShow(this.menus,t),!1}this.menu.toHide(),z.changeIconEditing(!0)}else s.userStore.toggleLoginTipModal()}_clickIcon(e){e.stopPropagation(),this._handleClick(e)}_renderTag(e){return"infinity://gmail"===e.target?s.settingStore.setting.notice.gmailNumber&&Number(s.gmailStore.unreadEmailCount)?n.e` <div hidden class="red-tag">
            <span>${s.gmailStore.unreadEmailCount>99?"99+":s.gmailStore.unreadEmailCount}</span>
          </div>`:null:"infinity://todos"===e.target&&s.settingStore.setting.notice.todoNumber&&Number(s.todoStore.listLength)?n.e` <div hidden class="red-tag">
            <span>${s.todoStore.listLength>99?"99+":s.todoStore.listLength}</span>
          </div>`:null}render(){const{startMove:e,dragStage:t,dropTargetId:o,mobileDrag:r}=oe;if(!this.icon)return;const{bgType:a,bgImage:l,bgColor:c,children:d,bgColorImage:p,id:h,target:u}=this.icon;let g="box-sizing: border-box;background-size: cover;--svg-radius:var(--icon-radius);";g+="background-repeat: no-repeat;background-position: center;border-radius: var(--icon-radius);",g+="display: flex;justify-content: center;align-items: center;",u===ee.i.target?(g+=`background-color:${c||ee.i.bgColor};`,g+="background-size: 60% 60%;",g+="will-change: transform;",g+=`background-image:url(${Object(re.c)(l||ee.i.bgImage)});`):"image"===a?(g+=`background-color:${c||"transparent"};`,g+=`background-image:url(${Object(re.c)(l)});`):"color"===a&&p&&(g+=`background-color:${c||"transparent"};`,g+=`background-image:url(${Object(re.c)(p)});`),s.settingStore.setting.icon.shadow&&(g+="filter: drop-shadow(1px 1px 5px rgba(0, 0, 0, 0.2));"),d&&(g+="padding: var(--mini-icon-padding);background-color: hsla(0, 0%, 78.4%, 0.75);will-change:transform;");let f="visibility: var(--icon-visible);overflow: hidden;text-overflow: ellipsis;white-space: nowrap;text-align: center;margin: auto;margin-top: 8%;max-width: calc(var(--icon-box-width) / var(--icon-col) / 1.5);min-width: calc(var(--icon-font-size) * 3);font-size: var(--icon-font-size);height: calc(var(--icon-font-size) * 1.4);color: var(--icon-font-color);opacity: var(--icon-opacity);";return s.settingStore.setting.font.shadow&&(f+=" text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);"),this.isFolderItem?f+="width: calc(var(--icon-width) * 1.2);":f+="width: calc(var(--icon-width) * 1.5);",n.e`
      <div class="icon-item">
        <section
          class="${Object(K.a)({editing:z.iconEditing,"with-drag":e,mousedown:this.mousedown,"icon-content":!0,"icon-drag":!0,folder:d&&d.length,"folder-item":this.isFolderItem,"weather-item":u===ee.i.target,"shake-item":"merge"===t&&h===o,"hover-item":"hover"===t&&h===o,"mobile-drag":r})}"
          data-dragid="${h}"
          style="${g}"
          @contextmenu="${this._rightClick}"
          @mousedown="${this.onMousedown}"
          @touchstart="${this.onTouchStart}"
          @click="${this._clickIcon}"
          flipkey="${this.flipkey}"
        >
          ${"color"!==a||p||u===ee.i.target?"":Object(ne.a)(Object(ae.a)(this.icon))}
          ${d?n.e` <div
                class="mini-icon-box"
                style="width: 100%;height: 100%;display:flex;flex-wrap: wrap;align-content: flex-start;"
              >
                ${d.map((e,t)=>{if(t>8)return null;const{bgType:i,bgImage:o,bgColor:r,bgColorImage:a,target:s}=e;let l="position: relative;width:100%;height:100%;opacity:0.8;background-size: cover;background-repeat: no-repeat;background-position: center;";return l+="border-radius: var(--icon-radius);",l+="text-align: center; justify-content: center;align-items: center;",s===ee.i.target?(l+=`background-image:url(${Object(re.c)(o||ee.i.bgImage)});`,l+=`background-color:${r||ee.i.bgColor};background-size: 60% 60%;`):"image"===i?(l+=`background-color:${r||"transparent"};`,l+=`background-image:url(${Object(re.c)(o)});`):"color"===i&&(a?(l+=`background-color:${r||"transparent"};`,l+=`background-image:url(${Object(re.c)(a)});`):l+="overflow:hidden;"),n.e`<div
                    class="mini-icon-padding"
                    style="--svg-radius:var(--icon-radius);position: relative;width:33%;height:33%;box-sizing:border-box;padding:4%;flex-shrink:0;"
                  >
                    <div class="mini-icon" style="${l}">
                      ${"color"!==i||a||s===ee.i.target?"":Object(ne.a)(Object(ae.a)(e))}
                    </div>
                    ${this._renderTag(e)}
                  </div>`})}
              </div>`:n.e`
                <div class="op" style="display:none">
                  <div class="edit-icon-box">
                    <img
                      @dragstart="${e=>{e.preventDefault()}}"
                      draggable="false"
                      class="edit-icon"
                      src="${i(812)}"
                      alt=""
                    />
                  </div>
                  <span
                    class="del"
                    @mousedown="${e=>{e.stopPropagation()}}"
                    @touchstart="${e=>{e.stopPropagation()}}"
                    @click="${this._delItem}"
                  >
                    <i-usesvg type="infinity-pro-pure-icon-close"></i-usesvg>
                  </span>
                </div>
                ${this._renderTag(this.icon)}
              `}
        </section>
        <section class="icon-name" style="${f}">${this.icon.name}</section>
      </div>
    `}};pe([Object(n.g)({type:Object})],he.prototype,"icon",void 0),pe([Object(n.g)({type:Array})],he.prototype,"indexs",void 0),pe([Object(n.g)({type:String})],he.prototype,"flipkey",void 0),pe([Object(n.g)({type:Boolean})],he.prototype,"mousedown",void 0),pe([Object(n.g)({type:Boolean})],he.prototype,"isFolderItem",void 0),pe([Object(n.h)(".icon-content")],he.prototype,"$icon",void 0),he=pe([Object(n.c)("icon-content")],he);var ue=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let ge=class extends a.a{constructor(){super(...arguments),this.icon=null,this.indexs=[],this.flipkey="",this.isFolderItem=!1}static get styles(){return n.b`
      :host {
        width: 100%;
        height: 100%;
        box-sizing: border-box;
        will-change: transform;
      }
      .icon {
        width: 100%;
        height: 100%;
        box-sizing: border-box;
        display: flex;
        justify-content: center;
        align-items: center;
      }
      .hide {
        opacity: 0;
      }
      .icon-holder {
        background-color: red;
      }
    `}render(){return n.e`<div class="icon ${oe.startMove&&this.icon.id===oe.dragId?"hide":""}">
      <icon-content
        flipkey="${this.flipkey}"
        .isFolderItem=${this.isFolderItem}
        .icon=${this.icon}
        .indexs=${this.indexs}
      ></icon-content>
    </div>`}};ue([Object(n.g)({type:Object})],ge.prototype,"icon",void 0),ue([Object(n.g)({type:Array,hasChanged(e,t){if(e===t)return!1;if(e&&t&&Array.isArray(e)){if(e.every((e,i)=>e===t[i]))return!1}return!0}})],ge.prototype,"indexs",void 0),ue([Object(n.g)({type:String})],ge.prototype,"flipkey",void 0),ue([Object(n.g)({type:Boolean})],ge.prototype,"isFolderItem",void 0),ge=ue([Object(n.c)("icon-box")],ge);var fe=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let me=class extends a.a{constructor(){super(...arguments),this.flipping=null,this.folderName=""}firstUpdated(){this.$foldername.addEventListener("keydown",e=>{if("Enter"===e.key)return e.stopPropagation(),e.preventDefault(),this.$foldername.blur(),!1}),this.$foldername.addEventListener("blur",e=>{const t=e.target.value;s.siteStore.changeFolderName(z.folderIndexs,t)}),this.flipping=new X({root:this.$iconbox}),this.flipping.read()}update(e){this.flipping&&(z.changeFlipStatus(!0),this.flipping.read()),super.update(e)}updated(){var e;z.folderFlipData&&(this.$mask.animate([{opacity:"0"},{opacity:"1"}],{duration:window.__ANIMATION__.aniFolderBgTime,easing:window.__ANIMATION__.aniFolderBgFn}),this.$body.animate([{opacity:"0",transform:"scale(0.5)"},{opacity:"1",transform:"none"}],{duration:window.__ANIMATION__.aniFolderTime,easing:window.__ANIMATION__.aniFolderFn}),z.changeFolderFlipData(null),this.folderName=null===(e=z.folderItem)||void 0===e?void 0:e.name),this.flipping.play().then(()=>{z.changeFlipStatus(!1)}),z.focusName&&(this.focusName(),z.changeFocusStatus(!1))}close(){this.$foldername.blur(),z.closeFolder()}clickMask(e){e.stopPropagation(),document.querySelector("i-menu").toHide(),this.close()}_renderIcons(){if(!z.folderStatus)return null;const{children:e}=z.folderItem;return e?n.e` ${e.map((e,t)=>n.e`<icon-box
        class="icon-drop"
        data-dropid="${e.id}"
        .icon=${e}
        .isFolderItem=${!0}
        .indexs="${[...z.folderIndexs,t]}"
        flipkey="${e.id}"
      ></icon-box>`)}`:(z.closeFolder(),null)}_changeFolderName(e){const t=e.target.value;t.length>80&&(e.target.value=t.slice(0,80),s.siteStore.changeFolderName(z.folderIndexs,t.slice(0,80))),this.folderName=e.target.value}focusName(){this.shadowRoot.querySelector(".folder-name").focus()}render(){z.folderStatus?this.style.display="":this.style.display="none";const{name:e="",id:t=""}=z.folderItem||{};return n.e`
      <section @click="${this.clickMask}}" @contextmenu="${c.a.stopShowMenu}" class="mask"></section>
      <section class="icon-folder">
        <div class="name-box">
          <span class="folder-name-holder">${this.folderName}</span>
          <input type="text" @input="${this._changeFolderName}" class="folder-name" .value="${e}" />
        </div>
        <div class="icon-box-wrap" flipkey="${t}">
          <div
            style="
            margin: 10px 0;
            box-sizing: border-box;
            padding: calc(var(--icon-width) * 0.283);
            min-height: 100px;
            max-height: calc(100vh - 250px);
            "
            class="global-scrollbar"
          >
            <div class="icon-box icon-drop" data-dropid="end">${this._renderIcons()}</div>
          </div>
        </div>
      </section>
    `}};me.styles=[k.a,n.b`
      :host {
        position: absolute;
        top: 0;
        right: 0;
        left: 0;
        bottom: 0;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
      }
      .mask {
        position: absolute;
        z-index: 2;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0.7);
      }
      .icon-folder {
        margin-top: -3.5%;
        z-index: 2;
        position: fixed;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        pointer-events: none;
      }
      .name-box {
        position: relative;
        text-align: center;
        margin-bottom: 20px;
        pointer-events: all;
        min-height: 36px;
        box-sizing: border-box;
        height: calc(2.8vmin + 24px);
      }
      .folder-name-holder {
        opacity: 0;
        display: inline-block;
        min-width: 100px;
        max-width: 1000px;
        font-size: 2.8vmin;
        padding: 12px 40px;
        min-height: 36px;
        box-sizing: border-box;
        height: calc(2.8vmin + 24px);
        min-height: 36px;
        line-height: 1;
        word-break: keep-all;
        white-space: pre-wrap;
      }
      .folder-name {
        display: inline-block;
        position: absolute;
        left: 0;
        bottom: 0;
        width: 100%;
        box-sizing: border-box;
        font-size: 2.8vmin;
        padding: 12px 10px;
        color: rgb(255, 255, 255);
        background: transparent;
        border-radius: 4px;
        border: none;
        outline: none;
        line-height: 1;
        text-align: center;
        transition-duration: 0.2s;
        transition-timing-function: ease;
        transition-property: background-color;
        color: var(--icon-font-color);
      }
      .folder-name:hover {
        background-color: hsla(0, 0%, 78.4%, 0.2);
      }
      .folder-name:focus {
        outline: none;
        border: none;
        background-color: hsla(0, 0%, 78.4%, 0.2);
      }
      .icon-box-wrap {
        min-width: 400px;
        max-width: 80vw;
        width: calc(var(--icon-box-width) * 0.8);
        border-radius: 4px;
        background-color: hsla(0, 0%, 78.4%, 0.75);
        pointer-events: all;
        box-shadow: 0 calc(var(--main-ratio) * 2px) calc(var(--main-ratio) * 4px) rgba(0, 0, 0, 0.2);
      }
      .icon-box icon-box {
        height: calc(var(--icon-one-height) * 0.8);
      }
      .icon-box {
        display: grid;
        grid-template-columns: repeat(var(--icon-col), calc(100% / var(--icon-col)));
        row-gap: 20px;

        align-items: center;
        justify-items: center;
      }
    `],fe([Object(n.h)(".mask")],me.prototype,"$mask",void 0),fe([Object(n.h)(".icon-folder")],me.prototype,"$body",void 0),fe([Object(n.h)(".icon-box")],me.prototype,"$iconbox",void 0),fe([Object(n.h)(".folder-name")],me.prototype,"$foldername",void 0),fe([Object(n.f)()],me.prototype,"folderName",void 0),me=fe([Object(n.c)("icon-folder")],me);i(89);var be=n.b`[hidden] {
  display: none !important;
}
ul {
  list-style: none;
  margin: 0;
  padding: 0;
}
button,
input {
  margin: 0;
  padding: 0;
  border: none;
  outline: none;
  line-height: 1;
}
input[type='search']::-webkit-search-cancel-button {
  -webkit-appearance: none;
  display: none;
}
button {
  cursor: pointer;
}
.show-up {
  z-index: 11;
}
.newtab-search {
  width: var(--search-width);
  min-width: 200px;
  max-width: 80vw;
  min-height: 50px;
  margin-bottom: var(--search-margin-bottom);
}
.minimode.newtab-search {
  margin-bottom: 0;
}
.search-type {
  display: flex;
  flex-direction: row;
  margin-bottom: calc(var(--search-height) * 0.388);
  margin-left: calc(var(--search-height) * 0.273);
}
.search-type-item {
  font-weight: 300;
  font-size: calc(var(--search-height) * 0.288);
  margin-right: calc(var(--search-height) * 0.91);
  color: var(--icon-font-color);
  opacity: 0.5;
  cursor: pointer;
  transition-property: color, text-shadow;
  transition-duration: 0.2s;
  transition-timing-function: ease;
}
.search-type-item:hover {
  opacity: 0.75;
}
.search-type-item.active {
  opacity: 1;
}
.search-card {
  position: relative;
  height: var(--search-height);
  min-height: 20px;
  width: 100%;
  display: flex;
  align-items: center;
  flex-direction: row;
  overflow: hidden;
  border-radius: calc(var(--search-height) * var(--search-radius));
  opacity: var(--search-opacity);
}
.search-card.shadow {
  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.16), 0 0 0 1px rgba(0, 0, 0, 0.08);
}
.search-card:focus-within {
  opacity: 1;
}
.search-card-engine {
  width: calc(var(--search-height) * 1.091);
  min-width: 22px;
  height: 100%;
  flex-shrink: 0;
  flex-grow: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: #fff;
  color: #cccccc;
  border-radius: 0;
  transition-duration: 0.2s;
  transition-timing-function: ease;
  transition-property: background-color;
}
.search-card-engine:hover {
  background-color: #eee;
}
.search-card-engine .search-icon-img,
.search-card-engine .search-icon {
  border-radius: 4px;
  width: calc(var(--search-height) * 0.485);
  height: calc(var(--search-height) * 0.485);
  margin-right: calc(var(--search-height) * 0.1);
  object-fit: cover;
}
.search-card-engine .search-icon {
  margin-bottom: 0;
}
.icon-down {
  width: 0;
  height: 0;
  border-style: solid;
  border-width: 7px 4px 0;
  transform: scale(var(--search-ratio));
  border-color: #cccccc transparent transparent transparent;
}
.search-input-box {
  flex-grow: 1;
  flex-shrink: 1;
  height: 100%;
  position: relative;
  display: flex;
}
.search-card-input {
  font-family: 'PingFang SC', 'Microsoft Yahei', Helvetica, Arial, sans-serif;
  height: 100%;
  width: 100%;
  box-sizing: border-box;
  background-color: #fff;
  border-radius: 0;
  font-weight: 300;
  padding-left: calc(var(--search-height) * 0.155);
  padding-right: 2.5em;
  font-size: calc(var(--search-height) * 0.304);
  color: #333;
}
.search-card-input:not(:placeholder-shown) + .search-input-clear {
  opacity: 1;
  pointer-events: auto;
  cursor: pointer;
}
.search-card-input::placeholder {
  color: #999;
  font-size: calc(var(--search-height) * 0.304);
  font-weight: 300;
}
.search-input-clear {
  font-size: calc(var(--search-height) * 0.304);
  position: absolute;
  right: 1.5em;
  top: 50%;
  transform: translateY(-50%);
  color: #999;
  height: 1em;
  width: 1em;
  opacity: 0;
  pointer-events: none;
  transition: color 0.2s, opacity 0.2s;
}
.search-input-clear:hover {
  color: #333;
}
.search-card-btn {
  position: relative;
  width: calc(var(--search-height) * 1.136);
  min-width: 20px;
  height: 100%;
  flex-shrink: 0;
  flex-grow: 0;
  background-color: var(--search-btn-bgcolor);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
}
.icon-search {
  width: calc(var(--search-height) * 0.454);
  height: calc(var(--search-height) * 0.454);
}
.shortcut-list-ul {
  display: flex;
  flex-wrap: wrap;
  overflow: hidden;
}
.shortcut-list-ul-box {
  max-height: 100%;
}
.shortcut-list {
  position: absolute;
  margin-top: calc(var(--search-height) * 0.155);
  width: var(--search-width);
  overflow: hidden;
  border-radius: calc(var(--search-height) * var(--search-radius));
  background-color: #fff;
  transition-property: opacity;
  transition-duration: 300ms;
  transition-timing-function: ease;
}
.shortcut-list.hide {
  height: 0;
  opacity: 0;
  pointer-events: none;
}
.shortcut-list.hide .shortcut-list-ul-box {
  overflow: hidden;
}
.shortcut-list.show {
  height: auto;
  opacity: 1;
  pointer-events: auto;
}
.shortcut-list.show .shortcut-list-ul-box {
  overflow: auto;
}
.search-icon {
  width: calc(var(--search-height) * 0.543);
  height: calc(var(--search-height) * 0.543);
  margin-bottom: calc(var(--search-height) * 0.18);
  box-sizing: border-box;
  border-radius: 4px;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
}
.search-icon .bg-text {
  display: flex;
  justify-content: center;
  overflow: hidden;
  color: #fff;
  white-space: nowrap;
}
.drag-fake-wrapper {
  position: absolute;
  z-index: 9999;
  top: 0;
  right: 0;
  left: 0;
  bottom: 0;
  pointer-events: none;
}
.drag-fake-wrapper.hide {
  display: none !important;
}
.has-drag .force-default {
  opacity: 0.4;
}
.has-drag .del-shortcut {
  display: none !important;
}
.shortcut-item {
  position: relative;
  width: calc(100% / 6);
  min-height: 40px;
  padding: calc(var(--search-height) * 0.31) 4px calc(var(--search-height) * 0.22);
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  align-items: center;
  border-right: 1px solid #f3f3f3;
  border-bottom: 1px solid #f3f3f3;
  overflow: hidden;
  cursor: pointer;
}
.shortcut-item:hover {
  background-color: #f3f3f3;
}
.shortcut-item:hover .del-shortcut:not(.hide) {
  display: block;
}
.shortcut-item.fake .del-shortcut {
  display: none !important;
}
.shortcut-item.dragd {
  opacity: 0.7;
}
.shortcut-item img {
  width: calc(var(--search-height) * 0.543);
  height: calc(var(--search-height) * 0.543);
  margin-bottom: calc(var(--search-height) * 0.18);
  object-fit: cover;
}
.shortcut-item .name {
  width: 100%;
  color: #5c5c5c;
  font-size: calc(var(--search-height) * 0.233);
  font-weight: 200;
  word-break: break-all;
  text-overflow: ellipsis;
  overflow: hidden;
  white-space: nowrap;
  text-align: center;
}
.shortcut-item i-usesvg {
  color: #5c5c5c;
  width: calc(var(--search-height) * 0.543);
  height: calc(var(--search-height) * 0.543);
  transform: scale(0.6);
}
.del-shortcut {
  position: absolute;
  top: calc(var(--search-height) * -0.528);
  right: calc(var(--search-height) * -0.528);
  width: calc(var(--search-height) * 1.057);
  height: calc(var(--search-height) * 1.057);
  border-radius: 50%;
  background-color: #fff;
  background: rgba(0, 0, 0, 0.04);
  display: none;
}
.del-shortcut i-usesvg {
  color: #b6b6b6;
  position: absolute;
  width: calc(var(--search-height) * 0.317);
  height: calc(var(--search-height) * 0.317);
  left: calc(var(--search-height) * 0.176);
  bottom: calc(var(--search-height) * 0.176);
}
.search-suggest {
  position: absolute;
  margin-top: calc(var(--search-height) * 0.155);
  border-radius: calc(var(--search-height) * var(--search-radius));
  min-width: 200px;
  max-width: 80vw;
  width: var(--search-width);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  background-color: #fff;
  box-shadow: 0px 4px 19px 0px rgba(0, 0, 0, 0.12);
}
.search-suggest.hide {
  height: 0;
  opacity: 0;
  pointer-events: none;
}
.search-suggest.hide .search-suggest-list-ul {
  overflow: hidden;
}
.search-suggest.show {
  height: auto;
  opacity: 1;
  pointer-events: auto;
}
.search-suggest.show .search-suggest-list-ul {
  overflow: auto;
}
.search-icon-img {
  border-radius: 4px;
}
.suggest-item {
  flex-shrink: 0;
  height: calc(var(--search-height) * 0.705);
  min-height: 20px;
  display: flex;
  align-items: center;
  background-color: #fff;
  transition-property: background-color;
  transition-duration: 200ms;
  transition-timing-function: ease;
  cursor: pointer;
  font-size: calc(var(--search-height) * 0.247);
  color: #666;
  box-sizing: border-box;
}
.suggest-item .icon-box {
  width: calc(var(--search-height) * 1.234);
  min-width: 30px;
  flex-shrink: 0;
  flex-grow: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}
.suggest-item .icon-box .search-icon {
  width: calc(var(--search-height) * 0.423);
  height: calc(var(--search-height) * 0.423);
  border-radius: 50%;
  margin-bottom: 0;
}
.suggest-item .icon-box .search-icon-img {
  width: calc(var(--search-height) * 0.423);
  height: calc(var(--search-height) * 0.423);
  border-radius: 50%;
}
.suggest-item .icon-box .search-icon-img svg {
  border-radius: 50% !important;
}
.suggest-item .name {
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
  padding-right: 10px;
}
.suggest-item .name.add {
  color: #ff4e50;
}
.suggest-item:hover,
.suggest-item.active {
  background-color: #e6e6e6;
}
.suggest-tips {
  padding: 24px;
  box-sizing: border-box;
  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.1), 0 0 0 1px rgba(0, 0, 0, 0.05);
}
.suggest-tips.hide {
  display: none;
}
.suggest-tips:focus {
  outline: none;
  border: none;
}
.suggest-tips-title {
  height: 26px;
  font-size: 16px;
  font-weight: 500;
  color: #333333;
  line-height: 26px;
}
.suggest-tips-body {
  margin-top: 4px;
  margin-bottom: 8px;
  font-size: 14px;
  font-weight: 400;
  color: #656565;
  line-height: 20px;
}
.sugges-btns {
  display: flex;
  justify-content: flex-end;
  padding-bottom: 4px;
}
.sugges-btns .btn {
  margin-left: 14px;
  widows: 100px;
}
`,ye=i(37),ve=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let we=class extends n.a{constructor(){super(...arguments),this.zIndex=11,this.show=!1,this.box=null}clickModal(e){if(e.composedPath()[0]===this.box){const e=new CustomEvent("close",{detail:{message:""}});this.dispatchEvent(e)}}firstUpdated(){this.box=this.shadowRoot.querySelector(".i-mask")}render(){return n.e`
      <div
        @contextmenu="${c.a.stopShowMenu}"
        class="i-mask ${this.show?"show":"hide"}"
        @click="${this.clickModal}"
        style="z-index:${this.zIndex}"
      >
        <slot></slot>
      </div>
    `}};we.styles=n.b`
    .i-mask {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.7);
      transition-property: opacity;
      transition-duration: 300ms;
      transition-timing-function: ease;
    }
    .hide {
      opacity: 0;
      pointer-events: none;
    }
    .show {
      opacity: 1;
      pointer-events: auto;
    }
  `,ve([Object(n.g)({type:Number})],we.prototype,"zIndex",void 0),ve([Object(n.g)({type:Boolean})],we.prototype,"show",void 0),we=ve([Object(n.c)("i-mask")],we);var xe=i(617),_e=function(e,t){return(_e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Ae(e,t){function i(){this.constructor=e}_e(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}function Se(e){return"function"==typeof e}var ke=!1,Oe={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;ke=e},get useDeprecatedSynchronousErrorHandling(){return ke}};function Ie(e){setTimeout((function(){throw e}),0)}var $e={closed:!0,next:function(e){},error:function(e){if(Oe.useDeprecatedSynchronousErrorHandling)throw e;Ie(e)},complete:function(){}},Ee=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}();function Ce(e){return null!==e&&"object"==typeof e}var Te=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),je=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var t;if(!this.closed){var i=this._parentOrParents,o=this._ctorUnsubscribe,r=this._unsubscribe,n=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,i instanceof e)i.remove(this);else if(null!==i)for(var a=0;a<i.length;++a){i[a].remove(this)}if(Se(r)){o&&(this._unsubscribe=void 0);try{r.call(this)}catch(e){t=e instanceof Te?Pe(e.errors):[e]}}if(Ee(n)){a=-1;for(var s=n.length;++a<s;){var l=n[a];if(Ce(l))try{l.unsubscribe()}catch(e){t=t||[],e instanceof Te?t=t.concat(Pe(e.errors)):t.push(e)}}}if(t)throw new Te(t)}},e.prototype.add=function(t){var i=t;if(!t)return e.EMPTY;switch(typeof t){case"function":i=new e(t);case"object":if(i===this||i.closed||"function"!=typeof i.unsubscribe)return i;if(this.closed)return i.unsubscribe(),i;if(!(i instanceof e)){var o=i;(i=new e)._subscriptions=[o]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var r=i._parentOrParents;if(null===r)i._parentOrParents=this;else if(r instanceof e){if(r===this)return i;i._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return i;r.push(this)}var n=this._subscriptions;return null===n?this._subscriptions=[i]:n.push(i),i},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var i=t.indexOf(e);-1!==i&&t.splice(i,1)}},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function Pe(e){return e.reduce((function(e,t){return e.concat(t instanceof Te?t.errors:t)}),[])}var Re=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Le=function(e){function t(i,o,r){var n=e.call(this)||this;switch(n.syncErrorValue=null,n.syncErrorThrown=!1,n.syncErrorThrowable=!1,n.isStopped=!1,arguments.length){case 0:n.destination=$e;break;case 1:if(!i){n.destination=$e;break}if("object"==typeof i){i instanceof t?(n.syncErrorThrowable=i.syncErrorThrowable,n.destination=i,i.add(n)):(n.syncErrorThrowable=!0,n.destination=new Ne(n,i));break}default:n.syncErrorThrowable=!0,n.destination=new Ne(n,i,o,r)}return n}return Ae(t,e),t.prototype[Re]=function(){return this},t.create=function(e,i,o){var r=new t(e,i,o);return r.syncErrorThrowable=!1,r},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(je),Ne=function(e){function t(t,i,o,r){var n,a=e.call(this)||this;a._parentSubscriber=t;var s=a;return Se(i)?n=i:i&&(n=i.next,o=i.error,r=i.complete,i!==$e&&(Se((s=Object.create(i)).unsubscribe)&&a.add(s.unsubscribe.bind(s)),s.unsubscribe=a.unsubscribe.bind(a))),a._context=s,a._next=n,a._error=o,a._complete=r,a}return Ae(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;Oe.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,i=Oe.useDeprecatedSynchronousErrorHandling;if(this._error)i&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)i?(t.syncErrorValue=e,t.syncErrorThrown=!0):Ie(e),this.unsubscribe();else{if(this.unsubscribe(),i)throw e;Ie(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var i=function(){return e._complete.call(e._context)};Oe.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,i),this.unsubscribe()):(this.__tryOrUnsub(i),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),Oe.useDeprecatedSynchronousErrorHandling)throw e;Ie(e)}},t.prototype.__tryOrSetError=function(e,t,i){if(!Oe.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,i)}catch(t){return Oe.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(Ie(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(Le);var Me=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function De(e){return e}function Ue(e){return 0===e.length?De:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var Be=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var i=new e;return i.source=this,i.operator=t,i},e.prototype.subscribe=function(e,t,i){var o=this.operator,r=function(e,t,i){if(e){if(e instanceof Le)return e;if(e[Re])return e[Re]()}return e||t||i?new Le(e,t,i):new Le($e)}(e,t,i);if(o?r.add(o.call(r,this.source)):r.add(this.source||Oe.useDeprecatedSynchronousErrorHandling&&!r.syncErrorThrowable?this._subscribe(r):this._trySubscribe(r)),Oe.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){Oe.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),!function(e){for(;e;){var t=e,i=t.closed,o=t.destination,r=t.isStopped;if(i||r)return!1;e=o&&o instanceof Le?o:null}return!0}(e)?console.warn(t):e.error(t)}},e.prototype.forEach=function(e,t){var i=this;return new(t=Fe(t))((function(t,o){var r;r=i.subscribe((function(t){try{e(t)}catch(e){o(e),r&&r.unsubscribe()}}),o,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[Me]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:Ue(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=Fe(e))((function(e,i){var o;t.subscribe((function(e){return o=e}),(function(e){return i(e)}),(function(){return e(o)}))}))},e.create=function(t){return new e(t)},e}();function Fe(e){if(e||(e=Oe.Promise||Promise),!e)throw new Error("no Promise impl found");return e}function ze(e,t){return function(i){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new He(e,t))}}var He=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new We(e,this.project,this.thisArg))},e}(),We=function(e){function t(t,i,o){var r=e.call(this,t)||this;return r.project=i,r.count=0,r.thisArg=o||r,r}return Ae(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(Le);function Ge(e,t,i,o){return Se(i)&&(o=i,i=void 0),o?Ge(e,t,i).pipe(ze((function(e){return Ee(e)?o.apply(void 0,e):o(e)}))):new Be((function(o){!function e(t,i,o,r,n){var a;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(t)){var s=t;t.addEventListener(i,o,n),a=function(){return s.removeEventListener(i,o,n)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(t)){var l=t;t.on(i,o),a=function(){return l.off(i,o)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(t)){var c=t;t.addListener(i,o),a=function(){return c.removeListener(i,o)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var d=0,p=t.length;d<p;d++)e(t[d],i,o,r,n)}r.add(a)}(e,t,(function(e){arguments.length>1?o.next(Array.prototype.slice.call(arguments)):o.next(e)}),o,i)}))}function Ve(e){return e&&"function"==typeof e.schedule}var qe=function(e){return function(t){for(var i=0,o=e.length;i<o&&!t.closed;i++)t.next(e[i]);t.complete()}};function Ye(e,t){return new Be((function(i){var o=new je,r=0;return o.add(t.schedule((function(){r!==e.length?(i.next(e[r++]),i.closed||o.add(this.schedule())):i.complete()}))),o}))}function Qe(e,t){return t?Ye(e,t):new Be(qe(e))}function Xe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[e.length-1];return Ve(i)?(e.pop(),Ye(e,i)):Qe(e)}function Ke(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var Ze=Ke(),Je=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function et(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var tt=function(e){if(e&&"function"==typeof e[Me])return o=e,function(e){var t=o[Me]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(Je(e))return qe(e);if(et(e))return i=e,function(e){return i.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,Ie),e};if(e&&"function"==typeof e[Ze])return t=e,function(e){for(var i=t[Ze]();;){var o=void 0;try{o=i.next()}catch(t){return e.error(t),e}if(o.done){e.complete();break}if(e.next(o.value),e.closed)break}return"function"==typeof i.return&&e.add((function(){i.return&&i.return()})),e};var t,i,o,r=Ce(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+r+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function it(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[Me]}(e))return function(e,t){return new Be((function(i){var o=new je;return o.add(t.schedule((function(){var r=e[Me]();o.add(r.subscribe({next:function(e){o.add(t.schedule((function(){return i.next(e)})))},error:function(e){o.add(t.schedule((function(){return i.error(e)})))},complete:function(){o.add(t.schedule((function(){return i.complete()})))}}))}))),o}))}(e,t);if(et(e))return function(e,t){return new Be((function(i){var o=new je;return o.add(t.schedule((function(){return e.then((function(e){o.add(t.schedule((function(){i.next(e),o.add(t.schedule((function(){return i.complete()})))})))}),(function(e){o.add(t.schedule((function(){return i.error(e)})))}))}))),o}))}(e,t);if(Je(e))return Ye(e,t);if(function(e){return e&&"function"==typeof e[Ze]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new Be((function(i){var o,r=new je;return r.add((function(){o&&"function"==typeof o.return&&o.return()})),r.add(t.schedule((function(){o=e[Ze](),r.add(t.schedule((function(){if(!i.closed){var e,t;try{var r=o.next();e=r.value,t=r.done}catch(e){return void i.error(e)}t?i.complete():(i.next(e),this.schedule())}})))}))),r}))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function ot(e,t){return t?it(e,t):e instanceof Be?e:new Be(tt(e))}var rt=function(e){function t(t){var i=e.call(this)||this;return i.parent=t,i}return Ae(t,e),t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(Le),nt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ae(t,e),t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(Le);function at(e,t){if(!t.closed){if(e instanceof Be)return e.subscribe(t);var i;try{i=tt(e)(t)}catch(e){t.error(e)}return i}}function st(e,t,i){return void 0===i&&(i=Number.POSITIVE_INFINITY),"function"==typeof t?function(o){return o.pipe(st((function(i,o){return ot(e(i,o)).pipe(ze((function(e,r){return t(i,e,o,r)})))}),i))}:("number"==typeof t&&(i=t),function(t){return t.lift(new lt(e,i))})}var lt=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new ct(e,this.project,this.concurrent))},e}(),ct=function(e){function t(t,i,o){void 0===o&&(o=Number.POSITIVE_INFINITY);var r=e.call(this,t)||this;return r.project=i,r.concurrent=o,r.hasCompleted=!1,r.buffer=[],r.active=0,r.index=0,r}return Ae(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,i=this.index++;try{t=this.project(e,i)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t)},t.prototype._innerSub=function(e){var t=new rt(this),i=this.destination;i.add(t);var o=at(e,t);o!==t&&i.add(o)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(nt);function dt(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),st(De,e)}function pt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=Number.POSITIVE_INFINITY,o=null,r=e[e.length-1];return Ve(r)?(o=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(i=e.pop())):"number"==typeof r&&(i=e.pop()),null===o&&1===e.length&&e[0]instanceof Be?e[0]:dt(i)(Qe(e,o))}var ht=function(e){function t(t,i){var o=e.call(this,t,i)||this;return o.scheduler=t,o.work=i,o.pending=!1,o}return Ae(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(o,this.id,t),this},t.prototype.requestAsyncId=function(e,t,i){return void 0===i&&(i=0),setInterval(e.flush.bind(e,this),i)},t.prototype.recycleAsyncId=function(e,t,i){if(void 0===i&&(i=0),null!==i&&this.delay===i&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var i=!1,o=void 0;try{this.work(e)}catch(e){i=!0,o=!!e&&e||new Error(e)}if(i)return this.unsubscribe(),o},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,i=t.actions,o=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==o&&i.splice(o,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(function(e){function t(t,i){return e.call(this)||this}return Ae(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(je)),ut=function(e){function t(t,i){var o=e.call(this,t,i)||this;return o.scheduler=t,o.work=i,o}return Ae(t,e),t.prototype.requestAsyncId=function(t,i,o){return void 0===o&&(o=0),null!==o&&o>0?e.prototype.requestAsyncId.call(this,t,i,o):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame((function(){return t.flush(null)}))))},t.prototype.recycleAsyncId=function(t,i,o){if(void 0===o&&(o=0),null!==o&&o>0||null===o&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,i,o);0===t.actions.length&&(cancelAnimationFrame(i),t.scheduled=void 0)},t}(ht),gt=function(){function e(t,i){void 0===i&&(i=e.now),this.SchedulerAction=t,this.now=i}return e.prototype.schedule=function(e,t,i){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(i,t)},e.now=function(){return Date.now()},e}(),ft=function(e){function t(i,o){void 0===o&&(o=gt.now);var r=e.call(this,i,(function(){return t.delegate&&t.delegate!==r?t.delegate.now():o()}))||this;return r.actions=[],r.active=!1,r.scheduled=void 0,r}return Ae(t,e),t.prototype.schedule=function(i,o,r){return void 0===o&&(o=0),t.delegate&&t.delegate!==this?t.delegate.schedule(i,o,r):e.prototype.schedule.call(this,i,o,r)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var i;this.active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}},t}(gt),mt=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ae(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,i=this.actions,o=-1,r=i.length;e=e||i.shift();do{if(t=e.execute(e.state,e.delay))break}while(++o<r&&(e=i.shift()));if(this.active=!1,t){for(;++o<r&&(e=i.shift());)e.unsubscribe();throw t}},t}(ft))(ut);function bt(e,t){return function(i){return i.lift(new yt(e,t))}}var yt=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new vt(e,this.predicate,this.thisArg))},e}(),vt=function(e){function t(t,i,o){var r=e.call(this,t)||this;return r.predicate=i,r.thisArg=o,r.count=0,r}return Ae(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(Le);function wt(e,t){return"function"==typeof t?function(i){return i.pipe(wt((function(i,o){return ot(e(i,o)).pipe(ze((function(e,r){return t(i,e,o,r)})))})))}:function(t){return t.lift(new xt(e))}}var xt=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new _t(e,this.project))},e}(),_t=function(e){function t(t,i){var o=e.call(this,t)||this;return o.project=i,o.index=0,o}return Ae(t,e),t.prototype._next=function(e){var t,i=this.index++;try{t=this.project(e,i)}catch(e){return void this.destination.error(e)}this._innerSub(t)},t.prototype._innerSub=function(e){var t=this.innerSubscription;t&&t.unsubscribe();var i=new rt(this),o=this.destination;o.add(i),this.innerSubscription=at(e,i),this.innerSubscription!==i&&o.add(this.innerSubscription)},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this),this.unsubscribe()},t.prototype._unsubscribe=function(){this.innerSubscription=void 0},t.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e){this.destination.next(e)},t}(nt);function At(e){return function(t){return t.lift(new St(e))}}var St=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var i=new kt(e),o=at(this.notifier,new rt(i));return o&&!i.seenValue?(i.add(o),t.subscribe(i)):i},e}(),kt=function(e){function t(t){var i=e.call(this,t)||this;return i.seenValue=!1,i}return Ae(t,e),t.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},t.prototype.notifyComplete=function(){},t}(nt),Ot=new ft(ht),It={leading:!0,trailing:!1};function $t(e,t,i){return void 0===t&&(t=Ot),void 0===i&&(i=It),function(o){return o.lift(new Et(e,t,i.leading,i.trailing))}}var Et=function(){function e(e,t,i,o){this.duration=e,this.scheduler=t,this.leading=i,this.trailing=o}return e.prototype.call=function(e,t){return t.subscribe(new Ct(e,this.duration,this.scheduler,this.leading,this.trailing))},e}(),Ct=function(e){function t(t,i,o,r,n){var a=e.call(this,t)||this;return a.duration=i,a.scheduler=o,a.leading=r,a.trailing=n,a._hasTrailingValue=!1,a._trailingValue=null,a}return Ae(t,e),t.prototype._next=function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(Tt,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))},t.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},t.prototype.clearThrottle=function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)},t}(Le);function Tt(e){e.subscriber.clearThrottle()}var jt=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}(),Pt=new Be((function(e){return e.complete()}));function Rt(e){return e?function(e){return new Be((function(t){return e.schedule((function(){return t.complete()}))}))}(e):Pt}function Lt(e){return function(t){return 0===e?Rt():t.lift(new Nt(e))}}var Nt=function(){function e(e){if(this.total=e,this.total<0)throw new jt}return e.prototype.call=function(e,t){return t.subscribe(new Mt(e,this.total))},e}(),Mt=function(e){function t(t,i){var o=e.call(this,t)||this;return o.total=i,o.count=0,o}return Ae(t,e),t.prototype._next=function(e){var t=this.total,i=++this.count;i<=t&&(this.destination.next(e),i===t&&(this.destination.complete(),this.unsubscribe()))},t}(Le);const Dt=(e,t,i)=>{var o;for(let r=0;r<e.length;r++){const n=e[r];if(null===(o=n.matches)||void 0===o?void 0:o.call(n,t))return n;if(n===i)return null}return null},Ut=(e,t,i,o)=>{let r=e,n=9;for(;r&&n&&(n--,!(r instanceof Document))&&!(r instanceof ShadowRoot);)r=r.parentNode;return((e,t)=>{var i,o;let r=9;if(null===(i=null==e?void 0:e.matches)||void 0===i?void 0:i.call(e,t))return e;for(;r&&e;)if(r--,null===(o=null==(e=e.parentElement)?void 0:e.matches)||void 0===o?void 0:o.call(e,t))return e;return null})(r.elementFromPoint(i,o),t)},Bt=e=>{e.stopPropagation(),window.removeEventListener("click",Bt,!0)},Ft=()=>{window.addEventListener("click",Bt,!0),setTimeout(()=>{document.body.click()},0)},zt=(e,t)=>Math.max(Math.abs(e.x-t.x),Math.abs(e.y-t.y));class Ht{constructor(e){this.dragElement=null,this.startMove=!1,this.option=e,this.init()}init(){const{dragRoot:e,dragSelector:t,dropRoot:i=document.body,dropSelector:o="",dropLine:r=null,dropPointShadowRoot:n,moveDistanceLimit:a=4}=this.option;this.option.dropPointShadowRoot=n||i;const s=Ge(document,"mouseup"),l=Ge(document,"mousemove"),c=Ge(e,"mousedown").pipe(ze(e=>{const t=e.composedPath();return{event:e,path:t}})).pipe(ze(({event:i,path:o})=>({event:i,dragElement:Dt(o,t,e)})),bt(({dragElement:e,event:t})=>{if(0===t.button&&null!==e)return!0}),ze(({event:e,dragElement:t})=>{const i={type:"dragStart",payload:{x:e.clientX,y:e.clientY,dragElement:t}};return this.dragElement=t,this.startMove=!1,i})).pipe(wt(e=>Xe(e,Object.assign(Object.assign({},e),{fork:"forDrop"}),Object.assign(Object.assign({},e),{fork:"forMove"}))),st(e=>{if("forMove"===e.fork)return pt(l.pipe(At(s),$t(0,mt),ze(t=>{if(!this.startMove){zt(e.payload,{x:t.clientX,y:t.clientY})>a&&(this.startMove=!0)}return{type:"dragMove",payload:{x:t.clientX,y:t.clientY,startMove:this.startMove,dragElement:this.dragElement}}})),s.pipe(ze(e=>{const t={type:"dragEnd",payload:{x:e.clientX,y:e.clientY,dragElement:this.dragElement,startMove:this.startMove}};return this.startMove&&Ft(),this.dragElement=null,this.startMove=!1,t}),Lt(1)));if("forDrop"===e.fork){const{x:t,y:n}=e.payload;return(r?l:Ge(i,"mousemove")).pipe(At(s),$t(20),ze(e=>{if(!o)return{event:e,target:document.body};if(r){let i=e.clientX,a=e.clientY;"x"===r?a=n:"y"===r&&(i=t);return{event:e,target:Ut(this.option.dropPointShadowRoot,o,i,a)}}{const t=Dt(e.composedPath(),o,i);return{event:e,target:t}}}),bt(({target:e})=>!!e),ze(({target:e,event:t})=>({type:"drop",payload:{x:t.clientX,y:t.clientY,dragElement:this.dragElement,dropElement:e}})))}return Xe(e)}));this.drag$=c}subscribe(e){this.subscription&&this.subscription.unsubscribe(),this.subscription=this.drag$.subscribe(e)}updateOption(e){this.option=Object.assign(Object.assign({},this.option),e)}}function Wt(e){var t=e.error;e.subscriber.error(t)}var Gt;Gt||(Gt={});var Vt=function(){function e(e,t,i){this.kind=e,this.value=t,this.error=i,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,i){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return i&&i()}},e.prototype.accept=function(e,t,i){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,i)},e.prototype.toObservable=function(){var e,t;switch(this.kind){case"N":return Xe(this.value);case"E":return e=this.error,new Be(t?function(i){return t.schedule(Wt,0,{error:e,subscriber:i})}:function(t){return t.error(e)});case"C":return Rt()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}();function qt(e,t){void 0===t&&(t=Ot);var i,o=(i=e)instanceof Date&&!isNaN(+i)?+e-t.now():Math.abs(e);return function(e){return e.lift(new Yt(o,t))}}var Yt=function(){function e(e,t){this.delay=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new Qt(e,this.delay,this.scheduler))},e}(),Qt=function(e){function t(t,i,o){var r=e.call(this,t)||this;return r.delay=i,r.scheduler=o,r.queue=[],r.active=!1,r.errored=!1,r}return Ae(t,e),t.dispatch=function(e){for(var t=e.source,i=t.queue,o=e.scheduler,r=e.destination;i.length>0&&i[0].time-o.now()<=0;)i.shift().notification.observe(r);if(i.length>0){var n=Math.max(0,i[0].time-o.now());this.schedule(e,n)}else this.unsubscribe(),t.active=!1},t.prototype._schedule=function(e){this.active=!0,this.destination.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(!0!==this.errored){var t=this.scheduler,i=new Xt(t.now()+this.delay,e);this.queue.push(i),!1===this.active&&this._schedule(t)}},t.prototype._next=function(e){this.scheduleNotification(Vt.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.scheduleNotification(Vt.createComplete()),this.unsubscribe()},t}(Le),Xt=function(){return function(e,t){this.time=e,this.notification=t}}();var Kt=function(){function e(e,t,i){void 0===i&&(i=!1),this.accumulator=e,this.seed=t,this.hasSeed=i}return e.prototype.call=function(e,t){return t.subscribe(new Zt(e,this.accumulator,this.seed,this.hasSeed))},e}(),Zt=function(e){function t(t,i,o,r){var n=e.call(this,t)||this;return n.accumulator=i,n._seed=o,n.hasSeed=r,n.index=0,n}return Ae(t,e),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},t.prototype._tryNext=function(e){var t,i=this.index++;try{t=this.accumulator(this.seed,e,i)}catch(e){this.destination.error(e)}this.seed=t,this.destination.next(t)},t}(Le);function Jt(){}function ei(e,t,i){return function(o){return o.lift(new ti(e,t,i))}}var ti=function(){function e(e,t,i){this.nextOrObserver=e,this.error=t,this.complete=i}return e.prototype.call=function(e,t){return t.subscribe(new ii(e,this.nextOrObserver,this.error,this.complete))},e}(),ii=function(e){function t(t,i,o,r){var n=e.call(this,t)||this;return n._tapNext=Jt,n._tapError=Jt,n._tapComplete=Jt,n._tapError=o||Jt,n._tapComplete=r||Jt,Se(i)?(n._context=n,n._tapNext=i):i&&(n._context=i,n._tapNext=i.next||Jt,n._tapError=i.error||Jt,n._tapComplete=i.complete||Jt),n}return Ae(t,e),t.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.next(e)},t.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()},t}(Le);class oi{constructor(e){this.dragElement=null,this.touchTarget=null,this.mobileStartDelayLimit=2,this.startMove=!1,this.option=e,this.init()}init(){const{dragRoot:e,dragSelector:t,dropRoot:i,dropSelector:o,dropLine:r=null,dropPointShadowRoot:n,moveDistanceLimit:a=1}=this.option;this.option.dropPointShadowRoot=n||i;const s=Ge(e,"touchstart").pipe(ze(e=>{const t=e.composedPath();return this.touchTarget=t[0],{event:e,path:t}})).pipe(st(({event:e,path:t})=>{var i;return Xe({event:e,path:t}).pipe(qt(null!==(i=this.option.mobileStartDelayTime)&&void 0!==i?i:200),At(pt(Ge(this.touchTarget,"touchmove").pipe(function(e,t){var i=!1;return arguments.length>=2&&(i=!0),function(o){return o.lift(new Kt(e,t,i))}}(e=>e+1,0),bt(e=>e>this.mobileStartDelayLimit),ei(()=>{this.touchTarget=null})),Ge(this.touchTarget,"touchend").pipe(ei(()=>{this.touchTarget=null})))))}),ze(({event:i,path:o})=>({event:i,dragElement:Dt(o,t,e)})),bt(({dragElement:e})=>this.touchTarget&&null!==e),ze(({event:e,dragElement:t})=>{const i={type:"dragStart",payload:{x:e.touches[0].clientX,y:e.touches[0].clientY,dragElement:t}};return this.dragElement=t,this.startMove=!1,i})).pipe(wt(e=>Xe(e,Object.assign(Object.assign({},e),{fork:"forDrop"}),Object.assign(Object.assign({},e),{fork:"forMove"}))),st(e=>{if("forMove"===e.fork)return pt(Ge(this.touchTarget,"touchmove").pipe(At(Ge(this.touchTarget,"touchend")),$t(0,mt),ze(t=>{if(!this.startMove){zt(e.payload,{x:t.touches[0].clientX,y:t.touches[0].clientY})>a&&(this.startMove=!0)}return{type:"dragMove",payload:{x:t.touches[0].clientX,y:t.touches[0].clientY,startMove:this.startMove,dragElement:this.dragElement}}})),Ge(this.touchTarget,"touchend").pipe(ze(e=>{const t={type:"dragEnd",payload:{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY,dragElement:this.dragElement,startMove:this.startMove}};return this.startMove&&Ft(),this.dragElement=null,this.touchTarget=null,this.startMove=!1,t}),Lt(1)));if("forDrop"===e.fork){const{x:t,y:i}=e.payload;return Ge(this.touchTarget,"touchmove").pipe(At(Ge(this.touchTarget,"touchend")),$t(50),ze(e=>{if(!o)return{event:e,target:document.body};let n=e.touches[0].clientX,a=e.touches[0].clientY;"x"===r?a=i:"y"===r&&(n=t);return{event:e,target:Ut(this.option.dropPointShadowRoot,o,n,a)}}),bt(({target:e})=>!!e),ze(({target:e,event:t})=>({type:"drop",payload:{x:t.touches[0].clientX,y:t.touches[0].clientY,dragElement:this.dragElement,dropElement:e}})))}return Xe(e)}));this.drag$=s}subscribe(e){this.subscription&&this.subscription.unsubscribe(),this.subscription=this.drag$.subscribe(e)}updateOption(e){this.option=Object.assign(Object.assign({},this.option),e)}}class ri{constructor(e){this.pc=new Ht(e),window.TouchEvent&&(this.mobile=new oi(e))}subscribe(e){var t,i;this.mobile&&(null===(t=this.mobile.subscription)||void 0===t||t.unsubscribe(),this.mobile.subscription=this.mobile.drag$.subscribe(e)),this.pc&&(null===(i=this.pc.subscription)||void 0===i||i.unsubscribe(),this.pc.subscription=this.pc.drag$.subscribe(e))}updateOption(e){var t,i;null===(t=this.mobile)||void 0===t||t.updateOption(e),null===(i=this.pc)||void 0===i||i.updateOption(e)}}var ni=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let ai=class extends a.a{constructor(){super(...arguments),this.activeType=0,this.shortcutListStatus=!1,this.suggestList=[],this.suggesStatus=!1,this.suggesTipsStatus=!1,this.dragId=null,this.dragMoved=!1,this.dragFakeDom=null,this.suggestActiveIndex=null,this.dragOffsetX=0,this.dragOffsetY=0,this.focusElement=null,this.input=null,this.flipping=!1,this.oraginValue="",this.baseUrl="",this.setSearchCardMaxHeight=()=>{if(this.shortcutListStatus){const e=window.innerHeight,{top:t}=this.dragWrapper.getBoundingClientRect(),i=e-t;this.dragWrapper.style.maxHeight=Math.floor(i)-20+"px",this.$shortcutListUlBox.style.maxHeight=Math.floor(i)-20+"px"}else if(this.suggesStatus){const e=window.innerHeight,{top:t}=this.$suggesList.getBoundingClientRect(),i=e-t;this.$suggesList.style.maxHeight=Math.floor(i)-20+"px",this.$suggesListUl.style.maxHeight=Math.floor(i)-20+"px"}},this.initDrag=()=>{new ri({dragRoot:this.dragWrapper,dragSelector:".shortcut-drag",dropRoot:this.dragWrapper,dropSelector:".shortcut-drop",mobileStartDelayTime:0}).subscribe(e=>{switch(e.type){case"dragStart":document.querySelector("i-menu").toHide(),this.dragStart(e.payload);break;case"dragMove":this.dragMove(e.payload);break;case"dragEnd":this.dragEnd();break;case"drop":this.dragDrop(e.payload)}})},this.dragStart=({x:e,y:t,dragElement:i})=>{this.dragMoved=!1;const{left:o,top:r,width:n,height:a}=i.getBoundingClientRect();this.dragOffsetX=e-o,this.dragOffsetY=t-r,this.dragFakeDom=i.cloneNode(!0),this.dragFakeDom.style.position="fixed",this.dragFakeDom.style.top="-999px",this.dragFakeDom.style.left="-999px",this.dragFakeDom.style.width=n+"px",this.dragFakeDom.style.height=a+"px",this.dragFakeDom.classList.add("fake"),this.dragId=this.dragFakeDom.dataset.uuid,this.dragFakeWrapper.appendChild(this.dragFakeDom)},this.dragMove=({x:e,y:t,startMove:i})=>{const o=e-this.dragOffsetX,r=t-this.dragOffsetY;!this.dragMoved&&i?this.dragMoved=!0:i&&(this.dragFakeDom.style.left=o+"px",this.dragFakeDom.style.top=r+"px")},this.dragDrop=({dropElement:e})=>{if(this.flipping)return;const t=this.dragFakeDom.dataset.uuid,i=e.dataset.uuid;s.searchStore.sortShortcut(t,i)},this.dragEnd=()=>{this.dragMoved=!1,this.dragFakeDom&&(this.dragFakeWrapper.removeChild(this.dragFakeDom),this.dragFakeDom=null,this.dragId=null)},this.handleClick=e=>{s.searchStore.setActive(e),this.activeType=0,this.shortcutListStatus=!1},this.closeSugges=()=>{setTimeout(()=>{this.suggesStatus=!1,this.focusElement||(this.suggesTipsStatus=!1)},0)},this._renderShortcutList=e=>n.e` <div
      @contextmenu="${c.a.stopShowMenu}"
      data-uuid="all"
      class="shortcut-list shortcut-drop show-up ${this.dragMoved?"has-drag":""} ${this.shortcutListStatus?"show":"hide"}"
    >
      <div class="shortcut-list-ul-box global-scrollbar">
        <ul class="shortcut-list-ul">
          ${e.map((e,t)=>{if(!e)return null;let i=e.noDel;return 0===t&&(i=!0),n.e`<li
              class="shortcut-item shortcut-drop ${0===t?"force-default":""} ${this.dragId===e.uuid?"dragd":""}"
              data-uuid="${e.uuid}"
              flipkey="${e.uuid}"
              @click="${()=>{this.handleClick(t)}}"
            >
              ${Object(ne.a)(Object(xe.a)(e,!0,0!==t))}
              <span class="name">${e.name}</span>
              <div
                class="del-shortcut ${i?"hide":""}"
                @click="${t=>{t.stopPropagation(),this.delShortcutList(e.uuid)}}"
              >
                <i-usesvg type="infinity-pro-pure-icon-dustbin"></i-usesvg>
              </div>
            </li>`})}
          ${n.e`<li
            @click="${()=>{s.userStore.isLogin||!l.s?s.pluginStore.show("search"):s.userStore.toggleLoginTipModal()}}"
            class="shortcut-item"
            flipkey="add-btn"
          >
            <i-usesvg type="infinity-pro-pure-icon-plus"></i-usesvg>
            <span class="name">${Object(J.i18n)("add")}</span>
          </li>`}
        </ul>
      </div>
    </div>`,this._renderSuggestList=()=>n.e`<div
      @contextmenu="${c.a.stopShowMenu}"
      class="search-suggest search-suggest-list show-up ${this.suggesStatus?"show":"hide"}"
    >
      <ul class="search-suggest-list-ul global-scrollbar">
        ${this.suggestList.map((e,t)=>n.e`<li
            @mousedown="${t=>{if(0!==t.button)return t.stopPropagation(),void t.preventDefault();let i="",o="";e.types?i=e.types[0].url:e.target?i=e.target:o=e.text,e.text&&(this.input.value=e.text),this.toSearch(i,o,t)}}"
            class="suggest-item ${this.suggestActiveIndex===t?"active":""}"
          >
            ${e.uuid?n.e`<div class="icon-box">${Object(ne.a)(Object(xe.a)(e))}</div>
                  <span class="name add">${Object(J.i18n)("search_from",e.name)}</span>`:n.e`<div class="icon-box"></div>
                  <span class="name">${e.text}</span>`}
          </li>`)}
      </ul>
    </div>`,this._renderSuggestTips=()=>n.e`<ul
      @contextmenu="${c.a.stopShowMenu}"
      tabindex="0"
      @focus="${e=>{this.focusElement=e.target}}"
      @blur="${()=>{this.focusElement=null,this.closeSugges()}}"
      class="search-suggest suggest-tips show-up ${this.suggesTipsStatus?"show":"hide"}"
    >
      <div class="suggest-tips-title">${Object(J.i18n)("search_suggest")}</div>
      <div class="suggest-tips-body">${Object(J.i18n)("permission_serch_suggest_content")}</div>
      <div class="sugges-btns">
        <infinito-button class="btn" @mousedown="${this.closeSuggestTips}">${Object(J.i18n)("ignore")}</infinito-button>
        <infinito-button primary class="btn" @mousedown="${this.openSearchSuggest}"
          >${Object(J.i18n)("permission")}</infinito-button
        >
      </div>
    </ul>`}focusSearch(){setTimeout(()=>{s.searchStore.firstSync?this.input.focus():this.focusSearch()},50)}async firstUpdated(){var e;(this.input=this.shadowRoot.querySelector(".search-card-input"),l.h||l.s)&&(R()(e=document.referrer).call(e,l.w)&&!sessionStorage.getItem("tutorial_reffer")||this.focusSearch());this.initDrag(),this.flip=new X({root:this.dragWrapper}),this.flip.read(),this.addEventListener("keydown",e=>{if("ArrowUp"===e.key)return e.preventDefault(),e.stopPropagation(),this.changeSuggesIndex("up"),!1;"ArrowDown"===e.key&&this.changeSuggesIndex("down")}),this.addEventListener("dragstart",e=>{e.preventDefault(),e.stopPropagation()}),document.querySelector("#fake_focus").addEventListener("focus",()=>{var e;null===(e=this.input)||void 0===e||e.focus()}),window.addEventListener("resize",c.a.throttle(()=>{this.setSearchCardMaxHeight()},56))}update(e){this.flip&&this.flip.read(),super.update(e)}updated(e){e.has("shortcutListStatus")||e.has("suggesStatus")?this.setSearchCardMaxHeight():0===s.pluginStore.pluginViews.length&&(this.flipping=!0,this.flip.play({props:["position"]}).then(()=>{this.flipping=!1}))}changeSuggesIndex(e){null===this.suggestActiveIndex&&(this.oraginValue=this.input.value),"up"===e?null===this.suggestActiveIndex?this.suggestActiveIndex=this.suggestList.length-1:(this.suggestActiveIndex-=1,this.suggestActiveIndex<0&&(this.suggestActiveIndex=null,this.input.value=this.oraginValue)):null===this.suggestActiveIndex?this.suggestActiveIndex=0:(this.suggestActiveIndex+=1,this.suggestActiveIndex>this.suggestList.length-1&&(this.suggestActiveIndex=null,this.input.value=this.oraginValue)),this.baseUrl=void 0;const t=this.suggestList[this.suggestActiveIndex];if((null==t?void 0:t.types)?(this.baseUrl=t.types[0].url,this.input.value=this.oraginValue):(null==t?void 0:t.target)?(this.baseUrl=t.target,this.input.value=this.oraginValue):(null==t?void 0:t.text)?this.input.value=t.text:this.input.value=this.oraginValue,"number"==typeof this.suggestActiveIndex){this.$suggesListUl.querySelectorAll(".suggest-item ")[this.suggestActiveIndex].scrollIntoView({behavior:"smooth",block:"nearest"})}}async changeInputVal(){this.suggestActiveIndex=null,this.focusInput();const e=this.input.value;if(!e)return void setTimeout(()=>{this.suggestList=[],this.suggesStatus=!1},0);let t=[];if(s.settingStore.withPermissionSearchSuggest||s.settingStore.setting.search.searchSuggest&&(l.h||l.s)){const{data:i,error:o}=await ye.d.getSearchSuggest(e);!o&&this.input.value&&(t=i)}this.input.value?(0===t.length&&this.suggestList.length>0||(t.length>7&&(t.length=7),this.suggestList=s.searchStore.searchEngine.addList.concat(t)),this.suggesStatus=!0):this.suggesStatus=!1}toSearch(e,t,i){var o,r;this.baseUrl=void 0,this.suggesStatus=!1;const{link:n}=s.settingStore.setting;if(!e){const{current:t}=s.searchStore.searchEngine;e=(null===(r=null===(o=t.types)||void 0===o?void 0:o[this.activeType])||void 0===r?void 0:r.url)||t.target}t||(t=this.input.value),O.a.sendBaidu(e),O.a.sendEvent({action:{search:c.a.getTargetLogDomain(e)}}),s.settingStore.setting.search.keepSearchInput||setTimeout(()=>{this.input.value="",this.suggesStatus=!1,this.suggestList=[]},50),e.indexOf("%s")>-1?c.a.openUrl(e.replace(/%s/g,encodeURIComponent(t)),n.search,i):c.a.openUrl(e+encodeURIComponent(t),n.search,i)}delShortcutList(e){s.searchStore.delShortcut(e)}closeSuggestTips(e){0===e.button?(s.searchStore.closeSuggestTips(),this.focusElement=null):(e.stopPropagation(),e.preventDefault())}openSearchSuggest(e){0===e.button?(s.settingStore.openSearchSuggest(),this.focusElement=null):(e.stopPropagation(),e.preventDefault())}focusInput(){this.focusElement=this.input,this.input.value?this.suggesTipsStatus&&(this.suggesTipsStatus=!1):!s.searchStore.ignoreSuggest&&s.settingStore.setting.search.searchSuggest&&-1===s.settingStore.permission.searchSuggest&&(this.suggesTipsStatus=!0)}clearSearch(){this.input.value="",setTimeout(()=>{this.input.focus()},0)}render(){const{allItems:e,searchEngine:t}=s.searchStore,{types:o}=t.current,{shadow:r,hideButton:a,hideCategory:d}=s.settingStore.setting.search,{miniMode:p}=s.settingStore.setting.icon;return n.e`
      <div class="newtab-search ${p?"minimode":""}">
        <ul .hidden="${d}" class="search-type">
          ${o&&o.length>1?o.map((e,t)=>n.e`<li
                  @contextmenu="${c.a.stopShowMenu}"
                  class="search-type-item ${this.activeType===t?"active":""}"
                  @click="${()=>this.activeType=t}"
                >
                  ${e.name}
                </li>`):n.e`<li class="search-type-item holder">&nbsp;</li>`}
        </ul>
        <form
          class="${Object(K.a)({"search-card":!0,"show-up":this.suggesStatus,shadow:r})}"
          @contextmenu="${c.a.stopShowMenu}"
          @submit="${e=>{e.preventDefault(),e.stopPropagation(),this.toSearch(this.baseUrl,this.input.value,e)}}"
        >
          <button
            @click="${()=>{this.shortcutListStatus=!0,this.suggesStatus=!1}}"
            type="button"
            class="search-card-engine"
          >
            ${Object(ne.a)(Object(xe.a)(t.current))}
            <i class="icon-down"></i>
          </button>
          <div class="search-input-box">
            <input
              style="${oe.startMove?"cursor: default;":""}"
              @input="${this.changeInputVal}"
              @focus="${this.focusInput}"
              @blur="${()=>{this.focusElement=null,this.closeSugges()}}"
              class="search-card-input"
              type="text"
              autocomplete="off"
              placeholder="${Object(J.i18n)("input_and_search")}"
            />
            <i-svg
              @mousedown="${this.clearSearch}"
              class="search-input-clear"
              src="${i(777)}"
            ></i-svg>
          </div>

          <button
            @click="${e=>{e.stopPropagation(),e.preventDefault(),this.toSearch(void 0,void 0,e)}}"
            .hidden="${a}"
            class="search-card-btn"
            type="button"
          >
            <img class="icon-search" src="https://infinityicon.infinitynewtab.com/assets/search.svg" />
          </button>
        </form>
        <i-mask
          @close="${()=>{this.shortcutListStatus=!1,this.suggesStatus=!1}}"
          ?show="${this.shortcutListStatus}"
        ></i-mask>
        ${this._renderShortcutList(e)} ${this._renderSuggestList()}
        ${l.h||l.s?"":this._renderSuggestTips()}
      </div>
      <div class="drag-fake-wrapper ${this.dragId?"":"hide"}"></div>
    `}};ai.styles=[k.a,be],ni([Object(n.g)({type:Number})],ai.prototype,"activeType",void 0),ni([Object(n.g)({type:Boolean})],ai.prototype,"shortcutListStatus",void 0),ni([Object(n.g)({type:Array})],ai.prototype,"suggestList",void 0),ni([Object(n.g)({type:Boolean})],ai.prototype,"suggesStatus",void 0),ni([Object(n.g)({type:Boolean})],ai.prototype,"suggesTipsStatus",void 0),ni([Object(n.f)()],ai.prototype,"dragId",void 0),ni([Object(n.f)()],ai.prototype,"dragMoved",void 0),ni([Object(n.f)()],ai.prototype,"dragFakeDom",void 0),ni([Object(n.f)()],ai.prototype,"suggestActiveIndex",void 0),ni([Object(n.h)(".shortcut-list")],ai.prototype,"dragWrapper",void 0),ni([Object(n.h)(".shortcut-list-ul-box")],ai.prototype,"$shortcutListUlBox",void 0),ni([Object(n.h)(".search-suggest-list")],ai.prototype,"$suggesList",void 0),ni([Object(n.h)(".search-suggest-list-ul")],ai.prototype,"$suggesListUl",void 0),ni([Object(n.h)(".drag-fake-wrapper")],ai.prototype,"dragFakeWrapper",void 0),ai=ni([Object(n.c)("newtab-search")],ai);var si=i(813),li=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let ci=class extends a.a{constructor(){super(...arguments),this.isSliding=!1,this.currentPage=0,this.pageLength=1,this.lethargyX=new si.Lethargy(5),this.lethargyY=new si.Lethargy(5),this.mouseDownClientX=null,this.mouseMoveCount=0,this.firstTime=!0,this.layoutCol=s.settingStore.setting.layout.col,this.layoutRow=s.settingStore.setting.layout.row,this._touchDown=!1,this.pageOffset=0,this.inertia=localStorage.getItem("platforn-inertia"),this.wheelCount=0,this._mouseMove=c.a.throttle(e=>{if(null===this.mouseDownClientX)return;if(oe.dragId)return;this.mouseMoveCount+=1;const t=this.$items.style.transform.split("("),i=t[t.length-1].split("%")[0];let o;o=window.TouchEvent&&e instanceof TouchEvent?e.touches[0].clientX:e.clientX;const r=o-this.mouseDownClientX;this.pageOffset=r;let n=i+"% ";n+=r>0?"+ "+Math.abs(r)+"px":"- "+Math.abs(r)+"px",this.$items.style.transform=`translateX(calc(${n}))`},20),this._mouseUp=e=>{if(this._touchDown=!1,this.pageOffset=0,window.removeEventListener("mousemove",this._mouseMove),window.removeEventListener("mouseup",this._mouseUp),window.removeEventListener("touchmove",this._mouseMove),window.removeEventListener("touchend",this._mouseUp),this.mouseMoveCount<3)return this.mouseDownClientX=null,void(this.mouseMoveCount&&this.changePage(this.currentPage));let t;t=window.TouchEvent&&e instanceof TouchEvent?e.changedTouches[0].clientX:e.clientX;const i=t-this.mouseDownClientX;Math.abs(i)>150&&oe.withHolderPageSites.length>1?i>0?this.slideToLeft():this.slideToRight():(i||oe.withHolderPageSites.length<2)&&this.changePage(this.currentPage),this.mouseDownClientX=null},this._scrollEnd=()=>{!1!==this.isSliding&&(-1===this.currentPage?(this.$items.style.transitionProperty="none",this.currentPage=this.pageLength-1,setTimeout(()=>{requestAnimationFrame(()=>{this.$items.style.transform=`translateX(${-1*(this.currentPage+1)*100}%)`,this.isSliding=!1})},0)):this.currentPage>=this.pageLength?(this.$items.style.transitionProperty="none",this.currentPage=0,setTimeout(()=>{requestAnimationFrame(()=>{this.$items.style.transform=`translateX(${-1*(this.currentPage+1)*100}%)`,this.isSliding=!1})},0)):this.isSliding=!1)},this.lastWheelTime=performance.now(),this.wheelFilter=()=>{const e=performance.now(),t=this.lastWheelTime;return this.lastWheelTime=e,!(e-t<90)},this.wheelScroll=e=>{var t,i;if((null===(t=this.searchComponent)||void 0===t?void 0:t.shortcutListStatus)||(null===(i=this.searchComponent)||void 0===i?void 0:i.suggesStatus))return;if(z.folderStatus)return;let o,r;e.stopPropagation(),e.preventDefault(),Math.abs(e.deltaX)>Math.abs(e.deltaY)?(o=this.lethargyX.check({deltaY:e.deltaX}),r=e.deltaX):(o=this.lethargyY.check(e),r=e.deltaY),this.inertia?o&&Math.abs(r)>1&&this.wheelFilter()&&(r<0?this.slideToLeft(void 0,!0):this.slideToRight(void 0,!0)):(!1===o?(this.wheelCount+=1,this.wheelCount>40&&(this.inertia="true",localStorage.setItem("platforn-inertia",this.inertia))):this.wheelCount=0,o&&Math.abs(r)>1&&(r<0?this.slideToLeft(void 0,!0):this.slideToRight(void 0,!0)))}}static get styles(){return n.b`
      :host {
        display: block;
        height: 100%;
        overflow: hidden;
        box-sizing: border-box;
        padding-top: var(--icon-padding-top);
        width: 100%;
        margin-left: calc((100vw - var(--icon-box-width) - (var(--main-icons-margin) * 2)) / 2);
      }
      .items-container {
        height: 100%;
        display: flex;
        transition-property: transform;
        will-change: transform;
        width: 100%;
      }
      .linear {
        transition-timing-function: ease-in-out;
        transition-duration: 350ms;
      }
      .elastic {
        transition-timing-function: cubic-bezier(0.41, 1.5, 0.5, 1.01);
        transition-duration: 620ms;
      }
      .opacity {
        transition-timing-function: ease-in;
        transition-duration: 450ms;
      }
      .opacity .items-card-wrap {
        opacity: 0.1;
      }
      .items-card-wrap {
        width: var(--icon-box-width);
        margin: 0 var(--main-icons-margin);
        padding: 0;
        flex-shrink: 0;
        box-sizing: border-box;
        transition: opacity 620ms ease-in;
      }
      .items-card-wrap.active {
        opacity: 1;
      }
      .items-card {
        height: 100%;
        display: grid;
        grid-template-columns: repeat(var(--icon-col), calc(100% / var(--icon-col)));
        grid-template-rows: repeat(var(--icon-row), calc(100% / var(--icon-row)));
        align-items: center;
        justify-items: center;
      }

      .offset-animate-right {
        animation: offsetAnimateRight 0.5s ease-in-out;
      }
      .offset-animate-left {
        animation: offsetAnimateLeft 0.5s ease-in-out;
      }
      .merge-holder {
        width: 100%;
        height: 100%;
        box-sizing: border-box;
        opacity: 0;
      }
      @keyframes offsetAnimateRight {
        50% {
          transform: translateX(6%);
        }
      }

      @keyframes offsetAnimateLeft {
        50% {
          transform: translateX(-6%);
        }
      }
    `}async firstUpdated(){this.flipping=new X({root:this.$items,viewBox:document.querySelector("newtab-main").shadowRoot.querySelector("newtab-icons")}),this.flipping.read(),this.$items.addEventListener("transitionend",e=>{"opacity"===s.settingStore.setting.animation.easing?"opacity"===e.propertyName&&this._scrollEnd():"transform"===e.propertyName&&this._scrollEnd()}),this.addEventListener("mousedown",e=>{0===e.button&&!0!==this._touchDown&&(this._touchDown=!0,this.mouseDownClientX=e.clientX,this.mouseMoveCount=0,this.$items.style.transitionProperty="none",this.isSliding&&(this._scrollEnd(),this.isSliding=!1),window.addEventListener("mousemove",this._mouseMove),window.addEventListener("mouseup",this._mouseUp),document.querySelector("i-menu").toHide())}),this.addEventListener("touchstart",e=>{!0!==this._touchDown&&(this._touchDown=!0,this.mouseDownClientX=e.touches[0].clientX,this.mouseMoveCount=0,this.$items.style.transitionProperty="none",this.isSliding&&(this._scrollEnd(),this.isSliding=!1),window.addEventListener("touchmove",this._mouseMove),window.addEventListener("touchend",this._mouseUp),document.querySelector("i-menu").toHide())}),this.searchComponent=document.querySelector("newtab-main").shadowRoot.querySelector("newtab-search")}update(e){this.flipping&&!this.firstTime&&(z.changeFlipStatus(!0),this.flipping.read()),super.update(e)}updated(e){if(this.firstTime){if(s.siteStore.firstSync){this.firstTime=!1;const{col:e,row:t}=s.settingStore.setting.layout;this.layoutRow=t,this.layoutCol=e}}else{const{col:e,row:t}=s.settingStore.setting.layout;this.layoutCol!==e||this.layoutRow!==t?(0!==s.siteStore.currentPageIndex&&this.changePage(0),this.layoutRow=t,this.layoutCol=e,z.changeFlipStatus(!1),setTimeout(()=>{this.flipping.play({created:"scale",props:["position"]}).then(()=>{z.changeFlipStatus(!1)})},0)):requestAnimationFrame(()=>{this.flipping.play({created:"scale",props:["position"]}).then(()=>{z.changeFlipStatus(!1)})})}super.updated(e)}sendChangePage(e){const t=new CustomEvent("on-changepage",{detail:{type:e}});this.dispatchEvent(t)}slideToLeft(e=!1,t=!1){0!==this.pageOffset&&(e=!0),this.isSliding||(this.isSliding=!0,this.sendChangePage("left"),oe.withHolderPageSites.length<2&&t?this._offsetAnimate(-1).then(()=>{this.isSliding=!1}):this.changePage(this.currentPage-1,e)),e&&(this.isSliding=!1)}slideToRight(e=!1,t=!1){0!==this.pageOffset&&(e=!0),this.isSliding||(this.sendChangePage("right"),this.isSliding=!0,oe.withHolderPageSites.length<2&&t?this._offsetAnimate(1).then(()=>{this.isSliding=!1}):this.changePage(this.currentPage+1,e)),e&&(this.isSliding=!1)}_offsetAnimate(e){return new r.a(t=>{let i="";i=e>0?"offset-animate-left":"offset-animate-right",this.shadowRoot.querySelector(".active").classList.add(i),setTimeout(()=>{var e;null===(e=this.shadowRoot.querySelector("."+i))||void 0===e||e.classList.remove(i),t(null)},500)})}changePage(e,t=!1){let i=e;this.pageLength=oe.withHolderPageSites.length;let o=" ";if(this.pageOffset>0?o+="+ "+Math.abs(this.pageOffset)+"px":o+="- "+Math.abs(this.pageOffset)+"px",oe.withHolderPageSites.length<2)return s.siteStore.changeCurrentPage(0),this.currentPage=0,this.$items.style.transitionProperty=t?"none":"transform",void(this.$items.style.transform=`translateX(calc(-100%${o}))`);i<-1?i=-1:i>this.pageLength&&(i=this.pageLength),-1===i?s.siteStore.changeCurrentPage(this.pageLength-1):i===this.pageLength?s.siteStore.changeCurrentPage(0):s.siteStore.changeCurrentPage(i),this.currentPage=i,this.$items.style.transitionProperty=t?"none":"transform",l.r?requestAnimationFrame(()=>{this.$items.style.transform=`translateX(calc(${-1*(this.currentPage+1)*100}%${o}))`}):this.$items.style.transform=`translateX(calc(${-1*(this.currentPage+1)*100}%${o}))`}_renderItem(e,t){const i=oe.withHolderPageSites[e]||[];return n.e`
      <div class="items-card-wrap ${e===s.siteStore.currentPageIndex?"active":""}">
        <div data-dropid="end" class="items-card icon-drop">
          ${i.filter(e=>e).map((i,o)=>"merge"===oe.dragStage&&oe.dragMergeHolderIndexs&&t&&oe.dragMergeHolderIndexs[0]===e&&oe.dragMergeHolderIndexs[1]===o?n.e` <div
                      class="icon-drop merge-holder"
                      data-dropid="holder"
                      data-dropindexs="${[e,o].join(",")}"
                    ></div>
                    <icon-box
                      class="icon-drop"
                      flipkey="${t?i.id:""}"
                      data-dropid="${i.id}"
                      .icon=${i}
                      .indexs="${[e,o]}"
                    ></icon-box>`:n.e`<icon-box
                class="icon-drop"
                flipkey="${t?i.id:""}"
                data-dropid="${i.id}"
                .icon=${i}
                .indexs="${[e,o]}"
              ></icon-box>`)}
        </div>
      </div>
    `}_renderEmptyItem(){return n.e`
      <div class="items-card-wrap">
        <div class="items-card"></div>
      </div>
    `}renderPage(e){return e.length>1?n.e` <!-- 最后一页图标，仅补位 -->
        ${this._renderItem(this.pageLength-1,!1)}
        <!-- 真实图标 -->
        ${e.map((e,t)=>n.e`${this._renderItem(t,!0)} `)}
        <!-- 第一页图标，仅补位 -->
        ${this._renderItem(0,!1)}`:(this.$items&&(this.$items.style.transitionProperty="none",this.$items.style.transform="translateX(-100%)"),s.siteStore.changeCurrentPage(0),n.e`
        ${this._renderEmptyItem()}
        ${e.map((e,t)=>n.e`${this._renderItem(t,!0)} `)}
      `)}render(){const{withHolderPageSites:e}=oe;return this.pageLength=e.length,n.e`
      <div style="transform:translateX(-100%);" class="items-container ${s.settingStore.setting.animation.easing}">
        ${this.renderPage(e)}
      </div>
    `}};li([Object(n.h)(".items-container")],ci.prototype,"$items",void 0),ci=li([Object(n.c)("newtab-icons")],ci);var di=n.b`.icon-search {
  position: absolute;
  z-index: 1;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  padding-top: 6vh;
  padding-bottom: 6vh;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  background: rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(10px);
}
.icon-search.show {
  display: flex;
}
.icon-search.hide {
  display: none;
}
.input-box {
  flex-shrink: 0;
  width: 402px;
  height: 48px;
  border-radius: 24px;
  background: rgba(0, 0, 0, 0.15);
  overflow: hidden;
  display: flex;
  align-items: center;
}
.input-box .icon-search-img-box {
  flex-shrink: 0;
  display: flex;
  align-items: center;
  width: 50px;
  height: 100%;
}
.input-box .icon-search-img-box .img {
  margin-left: 14px;
  width: 20px;
  height: 20px;
}
.input-box .input {
  flex-grow: 1;
  height: 100%;
  box-sizing: border-box;
  border: 0;
  outline: 0;
  padding-right: 50px;
  padding-left: 0;
  font-size: 14px;
  font-weight: 500;
  color: #ffffff;
  background-color: transparent;
}
.input-box .input::placeholder {
  font-size: 14px;
  font-weight: 500;
  color: rgba(255, 255, 255, 0.6);
}
.icon-box {
  flex-shrink: 0;
  margin-top: 3vh;
  height: calc(85vh - 48px);
  width: 100%;
  box-sizing: border-box;
  padding: 10px 0;
}
`,pi=n.b`.icon-search-icons {
  --width: calc(var(--icon-box-width) + var(--main-icons-margin));
  margin-left: calc((100% - var(--width)) / 2);
  width: var(--width);
  display: grid;
  grid-template-columns: repeat(var(--icon-col), calc(100% / var(--icon-col)));
  place-items: center;
  box-sizing: border-box;
}
.icon-search-icons.less-one-line {
  display: flex;
  justify-content: center;
}
icon-box {
  width: calc((var(--icon-box-width) + var(--main-icons-margin)) / var(--icon-col));
  height: calc(var(--icon-box-height) / var(--icon-row));
}
`,hi=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let ui=class extends n.a{constructor(){super(...arguments),this.icons=[],this.cause="",this.stopClick=e=>{e.stopPropagation()}}firstUpdated(){this.flipping=new X({root:this.$items}),this.flipping.read()}update(e){this.flipping&&"allIcons"===this.cause&&this.flipping.read(),super.update(e)}updated(e){"allIcons"===this.cause&&this.flipping.play({created:"scale",props:["position"]}).then(()=>{}),super.updated(e)}render(){return n.e`
      <section
        class="icon-search-icons ${this.icons.length<s.settingStore.setting.layout.col?"less-one-line":""}"
        style="--less-icon:${s.settingStore.setting.layout.col-this.icons.length}"
      >
        ${this.icons.map(({item:e,indexs:t})=>n.e` <icon-box flipkey="${e.id}" .icon=${e} .indexs="${t}"></icon-box> `)}
      </section>
    `}};ui.styles=pi,hi([Object(n.h)(".icon-search-icons")],ui.prototype,"$items",void 0),hi([Object(n.g)({type:Array})],ui.prototype,"icons",void 0),hi([Object(n.g)({type:String})],ui.prototype,"cause",void 0),ui=hi([Object(n.c)("icon-search-icons")],ui);var gi=i(616),fi=i.n(gi),mi=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let bi=class extends n.a{constructor(){super(...arguments),this.show=!1,this.icons=[],this.allIcons=[],this.searchKey="",this.cause="",this.onInputChange=e=>{const t=e.currentTarget.value;this.searchKey=t},this.changeIcons=e=>{this.cause=e||"",this.searchKey?this.icons=this.allIcons.filter(({item:e})=>{const t=this.searchKey.toLowerCase(),i=(""+e.name||"").toLowerCase(),o=(e.target||"").toLowerCase().split("?")[0];return(e.initials||"").toLowerCase()===t||(R()(i).call(i,t)||R()(o).call(o,t))}):this.icons=this.allIcons},this.searchIcons=fi()(this.changeIcons.bind(this,"search"),200,{leading:!1}),this.onClose=e=>{if(s.settingStore.setting.icon.miniMode&&z.iconEditing)return void z.changeIconEditing(!1);const t=new CustomEvent("on-close");this.dispatchEvent(t),setTimeout(()=>{this.icons=[],this.searchKey="",this.$input.value=""},0),e.stopPropagation()},this.stopClick=e=>{e.stopPropagation()}}firstUpdated(){this.oncontextmenu=e=>(e.stopPropagation(),!1)}updated(e){e.has("allIcons")?this.changeIcons("allIcons"):e.has("searchKey")&&this.searchIcons(),e.has("show")&&!0===this.show&&(this.$input.focus(),this.cause="show"),super.updated(e)}render(){return n.e`
      <section @click="${this.onClose}" class="icon-search ${this.show?"show":"hide"}">
        <div @click="${this.stopClick}" class="input-box">
          <div class="icon-search-img-box">
            <img class="img" src="https://infinityicon.infinitynewtab.com/assets/search.svg" />
          </div>
          <input
            @contextmenu="${e=>{e.stopPropagation()}}"
            class="input"
            autocomplete="off"
            type="text"
            .placeholder="${i18n("search")}"
            @input=${e=>{this.onInputChange(e)}}
          />
        </div>
        <div class="icon-box global-scrollbar">
          <icon-search-icons .cause="${this.cause}" .icons="${this.icons}"></icon-search-icons>
        </div>
      </section>
    `}};bi.styles=[k.a,di],mi([Object(n.h)(".input")],bi.prototype,"$input",void 0),mi([Object(n.g)({type:Boolean})],bi.prototype,"show",void 0),mi([Object(n.f)()],bi.prototype,"icons",void 0),mi([Object(n.f)()],bi.prototype,"allIcons",void 0),mi([Object(n.f)()],bi.prototype,"searchKey",void 0),mi([Object(n.f)()],bi.prototype,"cause",void 0),bi=mi([Object(n.c)("icon-search")],bi);var yi=i(771),vi=i.n(yi),wi=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let xi=class extends n.a{constructor(){super(...arguments),this.show=!1}async checkShow(){if(document.querySelector("i-updating").classList.contains("hide")){if(localStorage.getItem("user-checkout-old-data"))this.show=!1;else{const{checkOldLocalData:e}=await i.e(9).then(i.bind(null,974)),t=await e();this.show=t}}else this.show=!1}firstUpdated(){l.l&&requestIdleCallback(async()=>{this.checkShow()})}toDetail(){s.pluginStore.showRepair(),setTimeout(()=>{this.checkShow()},20)}render(){return this.show?n.e`
      <div class="content">
        <div class="mask"></div>
        <div class="tips">
          <span class="desc">${i18n("check_olddata_desc")}</span>
          <span class="btn" @click="${this.toDetail}">&nbsp; ${i18n("show_detail")}<i-svg .src=${vi.a}></i-svg></span>
        </div>
      </div>
    `:null}};xi.styles=n.b`
    .content {
      position: absolute;
      z-index: 99;
      height: 32px;
      width: 100vw;
      pointer-events: none;
    }
    .mask {
      position: absolute;
      width: 100%;
      height: 32px;
      background: rgba(51, 51, 51, 0.2);
    }
    .tips {
      text-align: center;
      height: 32px;
      font-size: 13px;
      font-weight: 400;
      color: #ffffff;
      line-height: 32px;
      display: flex;
      justify-content: center;
      padding: 0 10px;
      width: 100vw;
      box-sizing: border-box;
    }
    .btn {
      display: inline-flex;
      align-items: center;
      cursor: pointer;
      pointer-events: auto;
    }
    .desc {
      display: block;
      max-width: calc(100vw - 200px);
      min-width: 100px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    i-svg {
      width: 14px;
      height: 14px;
      color: #ffffff;
    }
  `,wi([Object(n.g)({type:Boolean})],xi.prototype,"show",void 0),xi=wi([Object(n.c)("i-check-olddata")],xi);var _i=n.b`.title {
  font-size: 18px;
  font-weight: 500;
  color: #333333;
  line-height: 25px;
}
.tip {
  margin-top: 6px;
  font-size: 13px;
  font-weight: 400;
  color: #8e8e8e;
  line-height: 22px;
}
.footer {
  margin-top: 16px;
  display: flex;
  justify-content: flex-end;
}
.btn,
delay-button {
  max-width: 160px;
  font-size: 13px;
}
.btn {
  display: flex;
  align-items: center;
  padding: 0 18px;
  height: 34px;
  box-sizing: border-box;
  border-radius: 6px;
  font-weight: 400;
  color: #333333;
  line-height: 18px;
  outline: none;
  border: none;
  cursor: pointer;
  transition: background 0.2s ease-out;
}
.btn.hover-light:hover {
  background: rgba(255, 102, 102, 0.8);
}
.btn-main {
  background: #ff6666;
  font-weight: 500;
  color: #ffffff;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  display: block;
}
.btn-main:hover {
  background: #ff6666;
}
delay-button {
  margin-left: 16px;
}
.level-1 {
  position: absolute;
  top: 58px;
  right: -70px;
  width: 377px;
  min-height: 160px;
  padding: 20px;
  box-sizing: border-box;
  background: #ffffff;
  box-shadow: 0px 4px 19px 0px rgba(0, 0, 0, 0.12);
  border-radius: 6px;
  background-color: #fff;
}
.level-1 .arrow {
  position: absolute;
  top: -20px;
  right: 80px;
  width: 0;
  height: 0;
  border: 10px solid;
  border-color: transparent transparent #fff;
}
`,Ai=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let Si=class extends n.a{constructor(){super(...arguments),this.showList=!1,this.fontSize=13,this.list=[{label:i18n("two_hours_later"),delay:()=>Date.now()+72e5},{label:i18n("one_day_later"),delay:()=>{const e=new Date;return e.setHours(0,0,0,0),e.getTime()+864e5}},{label:i18n("one_week_later"),delay:()=>Date.now()+6048e5}],this.closeList=()=>{this.showList=!1},this.expandList=e=>{this.showList=!this.showList,e.stopImmediatePropagation()}}firstUpdated(){window.addEventListener("click",this.closeList)}disconnectedCallback(){window.removeEventListener("click",this.closeList),super.disconnectedCallback()}changeDelay(e){const t=new CustomEvent("on-changedelay",{bubbles:!0,composed:!0,detail:{value:e.delay()}});this.dispatchEvent(t)}render(){return n.e`<div class="delay-btn ${this.showList?"open":""}">
      <infinito-button @click="${this.expandList}">
        <div class="button-content" style="font-size:${this.fontSize}px;">
          <div class="btn-text">${i18n("show_later")}</div>
          <infinito-svg src="${i(814)}"></infinito-svg>
        </div>
      </infinito-button>
      <ul class="${this.showList?"show":"hide"}">
        ${this.list.map(e=>n.e`<li class="" @click="${()=>this.changeDelay(e)}">${e.label}</li> `)}
      </ul>
    </div>`}};Si.styles=[n.b`
      :host {
        --padding: 18px;
      }
      .delay-btn {
        height: 100%;
      }
      infinito-button {
        width: 100%;
        --button-padding: 0 var(--padding);
        height: inherit;
      }
      .btn-text {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      .button-content {
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
      infinito-svg {
        margin-left: 5px;
        width: 12px;
        height: 12px;
        color: #666;
      }
      .delay-btn {
        position: relative;
        border-radius: 6px;
        background: #eeeeee;
      }
      .open {
        border-bottom-left-radius: 0;
        border-bottom-right-radius: 0;
      }
      ul.show {
        opacity: 1;
      }
      ul.hide {
        opacity: 0;
        pointer-events: none;
      }
      ul {
        margin: 0;
        padding: 0;
        /* width: 100%; */
        /* position: absolute; */
        right: 0;
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        background: #eeeeee;
        border-bottom-left-radius: 6px;
        border-bottom-right-radius: 6px;
        transition: opacity 0.2s;
      }
      li {
        margin: 0;
        list-style: none;
        width: 100%;
        padding: 8px var(--padding);
        box-sizing: border-box;
        cursor: pointer;
        transition: background 0.2s ease-out;
        font-size: inherit;
        font-weight: 400;
        color: #616161;
        word-break: break-word;
        overflow-wrap: break-word;
      }
      li:last-of-type {
        border-bottom-left-radius: 6px;
        border-bottom-right-radius: 6px;
      }
      li:hover {
        background: #d9d9d9;
        color: #333;
      }
    `],Ai([Object(n.f)()],Si.prototype,"showList",void 0),Ai([Object(n.g)({type:Number})],Si.prototype,"fontSize",void 0),Si=Ai([Object(n.c)("delay-button")],Si);var ki=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let Oi=class extends n.a{firstUpdated(){}toSelectWay(){const e=new CustomEvent("on-toupdate");this.dispatchEvent(e)}render(){const{info:e}=this;return n.e`<div class="level-1">
      <div class="arrow"></div>
      <div class="title">${e.title}</div>
      <div class="tip">${e.shortTip}</div>
      <div class="footer">
        <button @click="${this.toSelectWay}" class="btn hover-light btn-main">${i18n("update_now")}</button>
        <delay-button style="--padding: 18px;height:34px;"></delay-button>
      </div>
    </div>`}};Oi.styles=_i,ki([Object(n.g)({type:Object})],Oi.prototype,"info",void 0),Oi=ki([Object(n.c)("update-level-1")],Oi);var Ii=n.b`.level-modal {
  width: 800px;
  height: 532px;
  display: flex;
  border-radius: 6px;
}
.left {
  flex-shrink: 0;
  width: 350px;
  height: 100%;
  border-top-left-radius: 6px;
  border-bottom-left-radius: 6px;
  overflow: hidden;
}
.left img {
  width: 100%;
  height: 100%;
}
.right {
  padding: 30px;
  display: flex;
  flex-direction: column;
  width: 450px;
  box-sizing: border-box;
}
.title {
  font-size: 24px;
  font-weight: 500;
  color: #333333;
  line-height: 37px;
  text-overflow: -o-ellipsis-lastline;
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
}
.tip {
  min-height: 50px;
  max-height: 80px;
  overflow: auto;
  margin-top: 10px;
  font-size: 13px;
  font-weight: 400;
  color: #999999;
  line-height: 22px;
}
.footer {
  display: flex;
  justify-content: center;
}
.btn {
  display: block;
  padding: 0 30px;
  box-sizing: border-box;
  height: 44px;
  border-radius: 6px;
  font-weight: 400;
  line-height: 22px;
  color: #333333;
  outline: none;
  border: none;
  cursor: pointer;
  transition: background 0.2s ease-out;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.btn.hover-light:hover {
  background: rgba(255, 102, 102, 0.8);
}
.btn-main {
  background: #ff6666;
  font-weight: 500;
  color: #ffffff;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  display: block;
}
.btn,
delay-button {
  max-width: 186px;
  font-size: 15px;
}
delay-button {
  margin-left: 16px;
}
.ic-content {
  margin: 30px 0;
  margin-top: 24px;
}
.conetnt-header {
  margin-bottom: 20px;
  text-align: center;
}
.conetnt-header img {
  width: 26px;
  height: 13px;
}
.conetnt-body {
  height: 140px;
  display: flex;
  overflow-x: hidden;
  overflow-y: auto;
}
.content-item {
  width: 100%;
  flex-shrink: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 0 20px;
  box-sizing: border-box;
  transition: transform 1s;
}
.content-item .item-title {
  font-size: 18px;
  font-weight: 500;
  color: #333333;
  line-height: 25px;
}
.content-item .item-body {
  margin-top: 16px;
  font-size: 14px;
  font-weight: 400;
  color: #656565;
  line-height: 22px;
}
.conetnt-footer {
  margin-top: 10px;
  display: flex;
  justify-content: center;
}
.conetnt-footer .dot {
  margin-right: 8px;
  display: block;
  width: 8px;
  height: 8px;
  box-sizing: border-box;
  border-radius: 50%;
  border: 2px solid #333333;
  cursor: pointer;
  background: #fff;
  transition: background 0.3s;
}
.conetnt-footer .dot:last-child {
  margin-right: 0;
}
.conetnt-footer .dot.active {
  background: #333333;
}
`,$i=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let Ei=class extends n.a{constructor(){super(...arguments),this.force=!1,this.contentActive=0,this.timer=null,this.setLoop=()=>{clearInterval(this.timer),this.timer=setInterval(()=>{const e=(this.contentActive+1)%this.info.content.length;this.contentActive=e},6e3)},this.activeThis=e=>{e!==this.contentActive&&(this.contentActive=e,this.setLoop())}}firstUpdated(){this.setLoop()}disconnectedCallback(){clearInterval(this.timer),super.disconnectedCallback()}toSelectWay(){const e=new CustomEvent("on-toupdate",{composed:!0,bubbles:!0});this.dispatchEvent(e)}render(){const{info:e}=this;return n.e` <infinito-modal style="--modal-padding:0px" .closeable="${!1}" .open=${!0}>
      <div class="level-modal level-2" slot="body">
        <div class="left">
          <img src="${i(815)}" alt="" />
        </div>
        <div class="right">
          <div class="title">${e.title}</div>
          <div class="tip global-scrollbar">${e.tip}</div>
          <div class="ic-content">
            <div class="conetnt-header">
              <img src="${i(816)}" alt="" />
            </div>
            <div class="conetnt-body global-scrollbar">
              ${e.content.map(e=>n.e`
                  <div style="transform: translateX(${-390*this.contentActive}px);" class="content-item">
                    <div class="item-title">${e.title}</div>
                    <div class="item-body">${Object(ne.a)(e.body)}</div>
                  </div>
                `)}
            </div>
            <div class="conetnt-footer">
              ${e.content.map((e,t)=>n.e`
                  <span
                    @click="${()=>this.activeThis(t)}"
                    class="dot ${t===this.contentActive?"active":""}"
                  ></span>
                `)}
            </div>
          </div>
          <div class="footer">
            <button @click="${this.toSelectWay}" class="btn hover-light btn-main">${i18n("update_now")}</button>
            ${this.force?null:n.e`<delay-button fontSize="${15}" style="--padding:20px;height:44px;"></delay-button>`}
          </div>
        </div>
      </div>
    </infinito-modal>`}};Ei.styles=[k.a,Ii],$i([Object(n.g)({type:Boolean})],Ei.prototype,"force",void 0),$i([Object(n.g)({type:Object})],Ei.prototype,"info",void 0),$i([Object(n.g)({type:Number})],Ei.prototype,"contentActive",void 0),Ei=$i([Object(n.c)("update-level-2")],Ei);var Ci=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let Ti=class extends n.a{render(){const{info:e}=this;return n.e` <update-level-2 .force="${!0}" .info="${this.info}"></update-level-2>`}};Ci([Object(n.g)({type:Object})],Ti.prototype,"info",void 0),Ti=Ci([Object(n.c)("update-level-3")],Ti);var ji=n.b`.tabs {
  position: relative;
  width: 100%;
  display: flex;
  justify-content: center;
  --point-height: 4px;
}
.tabs.vertically {
  align-items: center;
}
.tabs.horizontally {
  flex-direction: column;
}
.tabs[style]::after {
  content: '';
}
.tabs.vertically::after {
  --width: 28;
  position: absolute;
  width: calc(var(--width) * 1px);
  left: calc((var(--target-left) + (var(--target-width) - var(--width)) / 2) * 1px);
  border-bottom: var(--point-height) solid #333;
  bottom: 0;
  transition: left 0.2s, width 0.2s;
}
.tabs.horizontally::after {
  position: absolute;
  width: 100%;
  height: calc(var(--target-height, 0) * 1px);
  top: calc(var(--target-top, -500) * 1px);
  border-right: var(--point-height) solid #333;
  right: 0;
  transition: top 0.2s, height 0.2s;
}
.way-modal {
  width: 760px;
  height: 70vh;
  min-height: 532px;
  max-height: 1032px;
  background: #ffffff;
  border-radius: 6px;
}
.way-header {
  display: flex;
  align-items: center;
  margin: 0 20px;
  padding: 6px 0 0;
  border-bottom: 1px solid #ebebeb;
}
.way-header-back {
  width: 20px;
  height: 20px;
  margin-left: -10px;
  margin-right: 20px;
  cursor: pointer;
}
.way-header-list {
  flex-grow: 1;
  display: flex;
  align-items: center;
  justify-content: center;
}
.way-header-list .tab-item {
  cursor: pointer;
  margin-left: 40px;
  padding-bottom: 26px;
  font-size: 20px;
  font-weight: 400;
  color: #999;
}
.way-header-list .tab-item:first-of-type {
  margin-left: 10px;
}
.way-header-list .tab-item.active {
  color: #000;
}
.way-content {
  height: calc(70vh - 132px);
  max-height: 900px;
  min-height: 400px;
  margin: 20px auto;
  padding: 20px;
  overflow: auto;
  line-height: initial;
}
`,Pi=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let Ri=class extends n.a{constructor(){super(...arguments),this.list=[],this.active=0,this.activeInited=!1}firstUpdated(){this.$content.addEventListener("click",e=>{const t=e.target;this.openStore(t.getAttribute("extension-store"))}),requestAnimationFrame(()=>{this.setActiveStyle(),this.activeInited=!0})}openStore(e){if("chrome"===e)return chrome.tabs.create({url:"chrome://extensions/"})}download(e){window.open(e)}onClose(){const e=new CustomEvent("on-close-way",{composed:!0,bubbles:!0});this.dispatchEvent(e)}onBack(){const e=new CustomEvent("on-back-level");this.dispatchEvent(e)}_activeThis(e,t){this.active=t,this.$content.scrollTop=0}_renderWay(e,t){return Object(ne.a)(e[t].content)}setActiveStyle(){const e=this.$tabs.querySelectorAll(".tab-item");if(e&&e.length>0){const t=e[this.active],i=this.$tabs.style,{offsetTop:o,offsetLeft:r,offsetWidth:n,offsetHeight:a}=t;i.setProperty("--target-width",n+""),i.setProperty("--target-height",a+""),i.setProperty("--target-left",r+""),i.setProperty("--target-top",o+"")}}updated(e){e.has("active")&&this.activeInited&&this.setActiveStyle()}render(){const{list:e,active:t}=this;return n.e` <infinito-modal .closeable="${!1}" .open=${!0} .onCancel=${this.onClose}>
      <div class="way-modal" slot="body">
        <div class="way-header">
          <img class="way-header-back" @click="${this.onBack}" src="${i(817)}" alt="" />
          <div class="way-header-list">
            <div class="tabs vertically">
              ${e.map((e,t)=>n.e`
                  <div
                    @click="${e=>this._activeThis(e,t)}"
                    class="tab-item ${this.active===t?"active":""}"
                  >
                    <span>${e.title}</span>
                  </div>
                `)}
            </div>
          </div>
        </div>
        <div class="way-content global-scrollbar">${this._renderWay(e,t)}</div>
      </div>
    </infinito-modal>`}};Ri.styles=[k.a,ji],Pi([Object(n.g)({type:Array})],Ri.prototype,"list",void 0),Pi([Object(n.g)({type:Number})],Ri.prototype,"active",void 0),Pi([Object(n.h)(".way-content")],Ri.prototype,"$content",void 0),Pi([Object(n.h)(".tabs")],Ri.prototype,"$tabs",void 0),Ri=Pi([Object(n.c)("update-way")],Ri);var Li=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let Ni=class extends n.a{constructor(){super(...arguments),this.delay={version:"",date:0},this.step=0,this.platform="",this.localInfo={extId:l.D.extId,version:l.D.extVersion,lang:l.D.lang,platformVersion:l.D.platformVersion},this.info={level:0,latestVersion:"",currentVersion:l.D.extVersion,title:"",tip:"",shortTip:"",content:[],updateWayActive:0,updateWayList:[],contentHash:""},this.timer=null,this.GAP_TIME=12e4,this.init=()=>{const e=localStorage.getItem("infinity-updater");if(e)try{const{info:t,delay:i,updatetime:o}=JSON.parse(e);if(this.info.currentVersion!==t.currentVersion)return localStorage.removeItem("infinity-updater"),void this.requestLevel();this.info=t,this.delay=i,this.showCard(),Date.now()-o>this.GAP_TIME&&this.requestLevel()}catch(e){this.requestLevel()}else this.requestLevel()},this.requestLevel=async()=>{try{if(!c.a.requestFirefoxThrottle("get_ext_version",l.q?36e5:6e4,!0))return;const e=Object.keys(this.localInfo).map(e=>`${e}=${this.localInfo[e]}`),t="platform="+this.platform+"&"+e.join("&"),i=await window.fetch(l.y+"/get_ext_version?"+t),{code:o,data:r}=await i.json();if(0!==o)return;c.a.requestFirefoxThrottle("get_ext_version",!0,!0);const{level:n,latestVersion:a,contentHash:s}=r;if(0===n)return this.step=0,this.info.level=n,this.info.latestVersion=a,this.info.contentHash=s,void this.saveStorage();if(n===this.info.level&&a===this.info.latestVersion&&s===this.info.contentHash)return;this.getContent(t,{version:a,contentHash:s})}catch(e){}}}firstUpdated(){this.init(),this.timer=setInterval(()=>{this.requestLevel()},432e5)}saveStorage(){const e={info:this.info,delay:this.delay,updatetime:Date.now()};localStorage.setItem("infinity-updater",JSON.stringify(e))}async getContent(e,t){try{const i=await window.fetch(l.y+"/update_content?"+e),{code:o,data:r}=await i.json();if(0!==o)return;const{level:n,title:a,tip:s,shortTip:c,content:d,updateWayList:p,updateWayActive:h}=r;this.info.level=n,this.info.title=a,this.info.content=d,this.info.tip=s,this.info.shortTip=c,this.info.updateWayList=p,this.info.updateWayActive=h,this.info.latestVersion=t.version,this.info.contentHash=t.contentHash,this.showCard(),this.saveStorage()}catch(e){}}showCard(e){if(e)this.step=2;else{const{date:e}=this.delay;this.info.level>0&&Date.now()>e&&(1===this.info.level?this.step=1:this.step=2)}2===this.step&&this.preRender()}preRender(){this.info.updateWayList.forEach(e=>{document.createElement("div").innerHTML=e.content})}showWay(){this.step=3}showCardDetail(){this.showCard(!0)}changeDelay(e){const{value:t}=e.detail;this.step=0,this.delay={version:this.info.latestVersion,date:t},this.saveStorage()}closeWay(){}_renderCard(){if(1===this.step)return n.e`
        <update-level-1
          @on-toupdate="${this.showCardDetail}"
          @on-changedelay="${this.changeDelay}"
          .info="${this.info}"
        ></update-level-1>
      `;if(2===this.step)switch(this.info.level){case 1:case 2:return n.e`
            <update-level-2
              @on-toupdate="${this.showWay}"
              @on-changedelay="${this.changeDelay}"
              .info="${this.info}"
            ></update-level-2>
          `;case 3:return n.e` <update-level-3 @on-toupdate="${this.showWay}" .info="${this.info}"></update-level-3> `;default:return null}else if(3===this.step)return n.e`
        <update-way
          @on-close-way="${()=>this.showCard(!0)}"
          @on-back-level="${()=>this.showCard(!0)}"
          .active="${this.info.updateWayActive}"
          .list="${this.info.updateWayList}"
        ></update-way>
      `;return null}render(){return this.info.level?n.e`<div @click="${this.showCard}" class="startup">
          <img class="starup-img" src="https://infinityicon.infinitynewtab.com/assets/btn-update.png" alt="" />
        </div>
        ${this._renderCard()}`:null}};Ni.styles=n.b`
    :host {
      position: relative;
      line-height: normal;
    }
    .startup {
      width: 40px;
      height: 40px;
      cursor: pointer;
      transition-property: transform;
      transition-duration: 0.3s;
      transition-timing-function: ease;
    }
    .startup:hover {
      transform: scale(1.1);
    }
    .starup-img {
      width: 40px;
      height: 40px;
    }
  `,Li([Object(n.f)()],Ni.prototype,"delay",void 0),Li([Object(n.f)()],Ni.prototype,"step",void 0),Li([Object(n.g)()],Ni.prototype,"platform",void 0),Li([Object(n.f)()],Ni.prototype,"localInfo",void 0),Li([Object(n.f)()],Ni.prototype,"info",void 0),Ni=Li([Object(n.c)("i-updater")],Ni);var Mi=i(160),Di=i(518),Ui=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let Bi=class extends a.a{constructor(){super(...arguments),this.capture=!1,this.sidePageAnimate={$el:null,cb:null,instanceIn:null,instanceOut:null},this.menu=null,this.menus=[{keyboard:"",text:i18n("edit_icon"),handler:()=>{s.userStore.isLogin||!l.s?z.changeIconEditing(!0):s.userStore.toggleLoginTipModal()}},{text:i18n("random_wallpaper"),handler:()=>{O.a.sendEvent({action:{randomWallpaper:"rightClickMenu"}}),this.changeWallpaper()}}],this.moveTimer=null,this.moveArea="",this.dropId="",this.dropIndexs=[],this.dragFolderOragin=null,this.dragFolderTimer=null,this.clearAsideMethod=null,this.iconSearchShow=!1,this.showIconSearch=e=>{oe.dragId||s.pluginStore.pluginViews.length||(null==e||e.preventDefault(),this.menu.toHide(),this.iconSearchShow=!0)},this.hideIconSearch=()=>{this.iconSearchShow=!1},this.clearDropStatus=()=>{this.moveTimer&&(clearTimeout(this.moveTimer),this.moveTimer=null,this.moveArea="",this.dropId="",this.dropIndexs=[])},this.dragToEnd=()=>{if(z.folderStatus)this.dropIndexs=[...z.folderIndexs,z.folderItem.children.length-1];else{const e=oe.withHolderPageSites[s.siteStore.currentPageIndex].length-1;this.dropIndexs=[s.siteStore.currentPageIndex,e<0?0:e]}const e=this.dropIndexs[1]===s.settingStore.setting.layout.row*s.settingStore.setting.layout.col-1?"left":"right";oe.sortSites(this.dropIndexs,e)},this._scheduler=(e,t)=>{if(t!==this.dropId||e!==this.moveArea){const i=200,o=500,r=350,{dragId:n}=oe;if(clearTimeout(this.moveTimer),this.moveArea=e,this.dropId=t,oe.checkDragIndexs(),0===oe.dragIndexs.length)return;"center"!==e||z.folderStatus||!s.siteStore.isIcon(0,n)?this.moveTimer=setTimeout(()=>{if(oe.clearMergeStatus(),"end"===t)if(z.folderStatus)this.dropIndexs=[...z.folderIndexs,z.folderItem.children.length-1];else{const e=oe.withHolderPageSites[s.siteStore.currentPageIndex].length-1;this.dropIndexs=[s.siteStore.currentPageIndex,e<0?0:e]}oe.sortSites(this.dropIndexs,e)},i):s.siteStore.isIcon(s.siteStore.currentPageIndex,t)?(oe.setMergeStatus("hover",t),oe.setHolderIndexs(this.dropIndexs),this.moveTimer=setTimeout(()=>{const{folderId:e}=oe.createFolder(this.dropIndexs);this.dropId=e,this.moveTimer=setTimeout(()=>{this._handleFolderStatus(this.dropId)},o)},r)):(oe.setMergeStatus("hover",t),oe.setHolderIndexs(this.dropIndexs),this.moveTimer=setTimeout(()=>{oe.intoFolder(this.dropIndexs),this.moveTimer=setTimeout(()=>{this._handleFolderStatus(this.dropId)},o)},r))}},this._toPrevPage=(e=!1)=>{this.$items.slideToLeft(e,!0)},this._toNextPage=()=>{this.$items.slideToRight(void 0,!0)},this._clearStatus=e=>{var t,i;!1!==this.capture&&(null===(t=this.sidePageAnimate.instanceIn)||void 0===t||t.cancel(),null===(i=this.sidePageAnimate.instanceOut)||void 0===i||i.cancel(),e.style.opacity="0",this.capture=!1)}}rotateWindMill(e){this._$windmill.style.transform=`rotate(${e}deg)`}flatIcons(e){const t=[];return e.forEach((e,i)=>{e.forEach((e,o)=>{Array.isArray(e.children)?e.children.forEach((e,r)=>{t.push({item:e,indexs:[i,o,r]})}):t.push({item:e,indexs:[i,o]})})}),t}async firstUpdated(){this.menu=q.create(),this.addEventListener("click",()=>{z.changeIconEditing(!1),this.menu.toHide()}),this.oncontextmenu=e=>(e.stopPropagation(),this.rightClickMenu(e)),this.$main.addEventListener("mouseleave",()=>{this.$main.blur()}),this.$main.addEventListener("wheel",this.$items.wheelScroll),window.addEventListener("keydown",e=>{this.keyboardScroll(e)}),this.initDrag(),document.body.addEventListener("mousemove",c.a.throttle(()=>{oe.setMobileDrag(!1)},50)),document.body.addEventListener("touchmove",c.a.throttle(()=>{oe.setMobileDrag(!0)},50)),document.addEventListener("keydown",e=>{!e.ctrlKey||"f"!==e.key.toLocaleLowerCase()||e.metaKey||e.altKey||e.shiftKey||this.showIconSearch(e)})}initDrag(){const e=new ri({dragRoot:this.$mainBox,dragSelector:".icon-drag",dropRoot:this.$mainBox,dropSelector:".icon-drop"});e.subscribe(e=>{switch(e.type){case"dragStart":this.dragStart(e.payload);break;case"dragEnd":this.dragEnd(e.payload);break;case"dragMove":this.dragMove(e.payload);break;case"drop":this.drop(e.payload)}}),oe.setDragIns(e)}dragStart({x:e,y:t,dragElement:i}){const{left:o,top:r,width:n,height:a}=i.getBoundingClientRect(),s=e-o,l=t-r;z.folderStatus?(oe.drag.oraginOffsetX=1.25*s,oe.drag.oraginOffsetY=1.25*l):(oe.drag.oraginOffsetX=s,oe.drag.oraginOffsetY=l),oe.drag.width=n,oe.drag.height=a,oe.drag.x=e,oe.drag.y=t;const c=i.parentElement.cloneNode(!0);c.classList.add("drag-icon-box"),c.style.transformOrigin="top left",c.style.position="fixed",c.style.zIndex="10",c.style.pointerEvents="none",c.style.display="none",c.style.overflow="visible",oe.drag.dom=c,document.body.appendChild(oe.drag.dom);const d=i.dataset.dragid,p=i.parentElement.parentNode.host.indexs;oe.setDragStatus(d,p)}dragEnd({x:e,y:t}){this.sidePageAnimate.$el&&this._clearStatus(this.sidePageAnimate.$el),oe.changeXLimitStatus(!1),oe.checkDragIndexs(),oe.dragIndexs.length&&oe.dragIndexs[0]!==s.siteStore.currentPageIndex?this.dragToEnd():z.folderStatus||oe.dragStage||3!==oe.dragIndexs.length||this.dragToEnd(),setTimeout(()=>{this.cancelDragAnimate(),this.dragEndAnimate(e,t),this.clearDropStatus()},20)}cancelDragAnimate(){this.$items.flipping.cancel(oe.dragId),this.$folderBox.flipping.cancel(oe.dragId)}dragEndAnimate(e,t){var i;if(!oe.startMove||0===oe.dragIndexs.length)return oe.drag=Object.assign({},oe.dragNone),this.tryRemoveFakerDom(),void oe.clearDragStatus();let o=null;if(3===oe.dragIndexs.length)if(z.folderStatus)o=this.$folderBox.shadowRoot.querySelector(`[flipkey="${oe.dragId}"]`).shadowRoot.querySelector("icon-content").shadowRoot.querySelector(".icon-content");else{const e=this.$items.shadowRoot.querySelector(`[flipkey="${oe.dropTargetId}"]`).shadowRoot.querySelector("icon-content").shadowRoot.querySelectorAll(".mini-icon");o=e[e.length-1]}else if(2===oe.dragIndexs.length){const e=this.$items.shadowRoot.querySelector(`[flipkey="${oe.dragId}"]`);o=null===(i=null==e?void 0:e.shadowRoot.querySelector("icon-content"))||void 0===i?void 0:i.shadowRoot.querySelector(".icon-content")}if(!o)return oe.drag=Object.assign({},oe.dragNone),this.tryRemoveFakerDom(),void oe.clearDragStatus();const{left:r,top:n,width:a}=o.getBoundingClientRect();if(r>0&&r<innerWidth){const i=r-e+oe.drag.offsetX-oe.drag.marginX+"px",o=n-t+oe.drag.offsetY+"px",s=a/oe.drag.width,l=oe.drag.dom.animate([{transform:"translate(0,0) scale(1)"},{transform:`translate(${i},${o}) scale(${Math.min(s,1)})`}],{duration:200,easing:"ease-in"});oe.clearDragIndexs(),l.onfinish=()=>{oe.drag=Object.assign({},oe.dragNone),this.tryRemoveFakerDom(),oe.clearDragStatus()}}else o.animate([{transform:"scale(0.1)",opacity:"0.1"},{transform:"scale(1)",opacity:"1"}],{duration:300,easing:"ease-in"}),oe.drag=Object.assign({},oe.dragNone),this.tryRemoveFakerDom(),oe.clearDragStatus()}tryRemoveFakerDom(){try{document.body.removeChild(document.querySelector(".drag-icon-box"))}catch(e){}}dragMove({x:e,y:t,startMove:i}){if(!oe.drag.dom)return;oe.drag.x=e,oe.drag.y=t;const o=e-oe.drag.offsetX,r=t-oe.drag.offsetY;!oe.startMove&&i?(oe.setStartMove(!0),oe.setMobileDrag(!0),oe.changeXLimitStatus(!0),oe.drag.dom.style.left=o+"px",oe.drag.dom.style.top=r+"px",oe.drag.dom.style.display="block",this.menu.toHide()):oe.startMove&&(oe.drag.dom.style.left=o+"px",oe.drag.dom.style.top=r+"px"),this.dragOutFolder(e,t)}drop({dropElement:e,x:t,y:i}){var o;if(!oe.drag.dom)return;const{flipStatus:r}=z;if(r||this.$items.isSliding)return;const n=e.dataset.dropid;if("aside-left"===n)return this.clearDropStatus(),oe.clearMergeStatus(),this._captureToPrev(),void(this.clearAsideMethod="_stopCaptureToPrev");if("aside-right"===n)return this.clearDropStatus(),oe.clearMergeStatus(),this._captureToNext(),void(this.clearAsideMethod="_stopCaptureToNext");if(this.clearAsideMethod&&(this[this.clearAsideMethod](),this.clearAsideMethod=null),oe.dragId===n||"wrapper"===n)return this.clearDropStatus(),void oe.clearMergeStatus();this.dropIndexs=e.indexs||(null===(o=e.dataset.dropindexs)||void 0===o?void 0:o.split(",").map(e=>Number(e)));let a="";if("end"===n)a="right";else if("holder"===n)a="left";else{const{left:o,top:r,width:n,height:s}=e.shadowRoot.querySelector("icon-content").shadowRoot.querySelector(".icon-content").getBoundingClientRect(),l=t-oe.drag.offsetX+oe.drag.marginX+n/2,c=i-oe.drag.offsetY+s/2;a=this._calcArea({pointX:t,centerX:l,centerY:c,targetX:o,targetY:r,targetWidth:n,targetHeight:s})}this._scheduler(a,n)}_calcArea({pointX:e,centerX:t,centerY:i,targetX:o,targetY:r,targetWidth:n,targetHeight:a}){let s="";return s=e>o+n/2?"right":"left",t>o+.2*n&&i>r&&t<o+.8*n&&i<r+a&&(s="center"),s}dragOutFolder(e,t){if(!z.folderStatus)return clearTimeout(this.dragFolderTimer),this.dragFolderOragin=null,void(this.dragFolderTimer=null);const{width:i,height:o,left:r,top:n}=this.$folderBox.shadowRoot.querySelector(".icon-box-wrap").getBoundingClientRect();if(e>r&&t>n&&e<r+i&&t<n+o)clearTimeout(this.dragFolderTimer),this.dragFolderTimer=null;else{if(null!==this.dragFolderTimer)return;null===this.dragFolderOragin&&(this.dragFolderOragin={x:e,y:t}),this.dragFolderTimer=setTimeout(()=>{(Math.abs(e-this.dragFolderOragin.x)>20||Math.abs(t-this.dragFolderOragin.y)>20)&&z.closeFolder(),this.dragFolderTimer=null},250)}}_handleFolderStatus(e){z.changeFolderFlipData({});const t=s.siteStore.findIndex(s.siteStore.currentPageIndex,e);z.openFolderWithIndexs(t),oe.setMergeStatus("open",e)}updaterRightClick(e){e.stopPropagation(),e.preventDefault();const t=e.composedPath()[0];return!!c.a.isInputType(t)}rightClickMenu(e){var t;const i=e.composedPath()[0];if(c.a.isInputType(i))return this.menu.toHide(),!0;if(i&&"none"===i.getAttribute("data-menu"))return this.menu.toHide(),!1;{var o;let i={left:0,top:0};e instanceof MouseEvent?i={left:e.pageX,top:e.pageY}:window.TouchEvent&&e instanceof TouchEvent&&(i={left:e.touches[0].pageX,top:null===(t=e.touches[0])||void 0===t?void 0:t.pageY});const r=[...this.menus];s.userStore.isLogin&&r.unshift({text:i18n("backup_now"),handler:()=>{Y.IConfirm.create().toShow({title:i18n("backup_now"),text:i18n("confirm_cover_remote"),onConfirm:()=>{s.syncStore.manualBackup()}})}});const{type:n,id:a}=s.wallpaperStore;return a&&!R()(a).call(a,"__wp_")&&R()(o=["cloud","cloudAuto","color","bing"]).call(o,n)&&r.push({text:i18n("wallpaper_collect_current"),handler:()=>{var e;s.userStore.isLogin?R()(e=s.wallpaperStore.cloudCollection).call(e,a)||Object(Mi.collectionWallpaper)(a,1).then(()=>{s.wallpaperStore.addCollectionP(a)}).catch(console.warn):Di.default.popupLogin()}}),"color"!==n&&r.push({text:i18n("download_current_wallpaper"),handler:()=>{s.wallpaperStore.rawUrl?c.a.downloadImg(s.wallpaperStore.rawUrl,void 0,s.wallpaperStore.wpExt):c.a.downloadImg(Object(L.b)("wallpaper-src"),"wallpaper")}}),R()(n).call(n,"Auto")&&r.push({text:i18n("wallpaper_switch_to_next_wallpaper"),handler:()=>{s.wallpaperStore.switchToNextWallpaper()}}),r.push({text:i18n("search_icons"),keyboard:"Ctrl + F",handler:()=>{this.showIconSearch()}}),s.wallpaperStore.firstSync&&this.menu.toShow(r,i),z.changeIconEditing(!1),!1}}keyboardScroll(e){var t;const i=e.composedPath()[0];c.a.isInputType(i)||s.pluginStore.pluginViews.length>0||z.folderStatus||(null===(t=this.shadowRoot.querySelector("newtab-search"))||void 0===t?void 0:t.shortcutListStatus)||("ArrowLeft"===e.key?this._toPrevPage():"ArrowRight"===e.key&&this._toNextPage())}openSetting(){s.userStore.isLogin||!l.s?s.pluginStore.show("profile"):s.userStore.toggleLoginTipModal()}clickChangeWallpaper(){O.a.sendEvent({action:{randomWallpaper:"windmill"}}),this.changeWallpaper()}changeWallpaper(){s.wallpaperStore.randomWallpaper()}__captureToChangeAnimate(){this.sidePageAnimate.instanceIn=this.sidePageAnimate.$el.animate([{opacity:.05},{opacity:.3}],{duration:300}),this.sidePageAnimate.instanceIn.onfinish=async()=>{this.capture&&(this.sidePageAnimate.$el.style.opacity="0.3",this.capture&&(this.sidePageAnimate.cb(),this.sidePageAnimate.instanceOut=this.sidePageAnimate.$el.animate([{opacity:.3},{opacity:.05}],{duration:600}),this.sidePageAnimate.instanceOut.onfinish=async()=>{this.capture&&(this.sidePageAnimate.$el.style.opacity="0.05",this.capture&&this.__captureToChangeAnimate())}))}}_captureToChange(e,t){!0===this.capture||z.folderStatus||(this.capture=!0,this.clearDropStatus(),oe.clearMergeStatus(),this.sidePageAnimate.$el=e,this.sidePageAnimate.cb=t,this.__captureToChangeAnimate())}changePage(){this.clearDropStatus(),oe.clearMergeStatus()}_captureToPrev(){this._captureToChange(this.$left,this._toPrevPage)}_stopCaptureToPrev(){this._clearStatus(this.$left)}_captureToNext(){this._captureToChange(this.$right,this._toNextPage)}_stopCaptureToNext(){this._clearStatus(this.$right)}toPage(e){e!==s.siteStore.currentPageIndex&&this.$items.changePage(e)}handleMouseOver(e){const t=window.innerWidth,i=e.target.getBoundingClientRect(),{right:o}=i,r=t-o;this.$settingTips.offsetWidth>=2*r&&(this.$settingTips.style.right="0px"),this.$settingTips.style.top="50px"}_renderSyncTips(){return s.syncStore.autoSyncing?n.e`<div class="sync">
        <img class="syncing-img" src="${Object(re.a)("syncing.png",!1)}" alt="" />
      </div>`:s.syncStore.syncFail?n.e`
        <div class="sync sync-end">
          <img src="${Object(re.a)("sync_failed.png",!1)}" alt="" /> ${s.syncStore.isBackup?i18n("backup_failed"):i18n("sync_fail")}${s.syncStore.syncFailMsg?" : "+s.syncStore.syncFailMsg:""}
        </div>
      `:null}render(){const{firstSync:e,setting:t}=s.settingStore,{icon:i,search:o}=t,{withHolderPageSites:r}=oe;return this.style.display=e?"":"none",n.e`
      <main class="main">
        <i-check-olddata></i-check-olddata>
        <aside
          .hidden="${!1===oe.dragXLimit||r.length<2}"
          @mouseleave="${this._stopCaptureToPrev}"
          @mouseenter="${this._captureToPrev}"
          class="main-left icon-drop"
          data-dropid="aside-left"
        ></aside>
        <section class="main-middle ${this.iconSearchShow?"hide":""}">
          <icon-folder></icon-folder>
          <aside style="${"transition:none"}" tabindex="0" data-dropid="wrapper" class="main-middle-center icon-drop">
            <section .hidden="${o.hide}" class="search">
              <newtab-search></newtab-search>
            </section>
            <section .hidden="${i.miniMode}" class="swiper-container">
              <div
                class="swiper-content"
                style="transition: transform 300ms ease-out;${z.offsetX?`transform:translateX(${z.offsetX}px)`:""}"
              >
                <newtab-icons @on-changepage="${this.changePage}"></newtab-icons>
              </div>
              <div class="swiper-pagination ${r.length>1?"":"hide"}">
                ${r.map((e,t)=>n.e`
                    <span
                      @click="${()=>this.toPage(t)}"
                      class="dot ${t===s.siteStore.currentPageIndex?"active":""}"
                    ></span>
                  `)}
              </div>
            </section>
          </aside>
          <div
            .hidden="${!t.view.pagin||t.icon.miniMode}"
            @click="${()=>this._toPrevPage()}"
            @contextmenu="${c.a.stopShowMenu}"
            class="swiper-btn-prev swiper-btn"
          >
            <img src="https://infinityicon.infinitynewtab.com/assets/arrow_right.svg" alt="" />
          </div>
          <div
            .hidden="${!t.view.pagin||t.icon.miniMode}"
            @click="${this._toNextPage}"
            @contextmenu="${c.a.stopShowMenu}"
            class="swiper-btn-next swiper-btn"
          >
            <img src="https://infinityicon.infinitynewtab.com/assets/arrow_right.svg" alt="" />
          </div>
          <!-- web端需要显示设为主页按钮 -->
          <aside data-menu="none" class="btn-setting-box">
            ${l.s&&s.settingStore.setting.view.isShowHomepageBtn?n.e`
                  <div class="setting-home-box" data-menu="none">
                    <img
                      class="btn-setting-home"
                      data-menu="none"
                      src="https://infinityicon.infinitynewtab.com/assets/home.png"
                      @click=${e=>{e.stopPropagation(),s.settingStore.toggleSettingHomeModal()}}
                      @mouseover=${this.handleMouseOver}
                      @mouseout=${()=>{this.$settingTips.style.top="-100px"}}
                    />
                    <div class="setting-home-text">${i18n("set_to_homepage")}</div>
                  </div>
                `:null}
            ${l.s?null:n.e`<i-updater
                  @contextmenu="${this.updaterRightClick}"
                  data-menu="none"
                  platform="${l.D.platform}"
                ></i-updater>`}
            ${l.s||"basic"===l.e?n.e`
                  <div class="btn-settings" @click="${this.openSetting}" data-menu="none">
                    <div data-menu="none" class="btn-settings-icon">
                      <div data-menu="none" class="icon-dash"></div>
                      <div data-menu="none" class="icon-dash"></div>
                      <div data-menu="none" class="icon-dash"></div>
                    </div>
                  </div>
                `:n.e`
                  <img
                    data-menu="none"
                    @click="${this.openSetting}"
                    class="btn-setting"
                    src="https://infinityicon.infinitynewtab.com/assets/btn-setting.png"
                    alt=""
                  />
                `}
          </aside>

          ${t.view.windmill?n.e`<div data-menu="none" class="windmill">
                <img
                  id="windmill"
                  data-menu="none"
                  @click="${this.clickChangeWallpaper}"
                  src="https://infinityicon.infinitynewtab.com/assets/windmill.svg"
                />
                <span data-menu="none"></span>
              </div>`:null}
          ${this._renderSyncTips()}
        </section>
        <aside
          .hidden="${!1===oe.dragXLimit||r.length<2}"
          @mouseleave="${this._stopCaptureToNext}"
          @mouseenter="${this._captureToNext}"
          class="main-right icon-drop"
          data-dropid="aside-right"
        ></aside>
        <div class="icp ${J.IS_ZH&&l.s&&!s.settingStore.setting.view.isHideIcp?"":"hide"}">
          <a class="icp-link" target="_blank" href="https://beian.miit.gov.cn/#/Integrated/index"
            >渝ICP备15002199号-11</a
          >
        </div>
        <icon-search
          .allIcons="${this.flatIcons(s.siteStore.sites)}"
          .show="${this.iconSearchShow}"
          @on-close="${this.hideIconSearch}"
        ></icon-search>
      </main>
    `}};Bi.styles=N,Ui([Object(n.h)("newtab-icons")],Bi.prototype,"$items",void 0),Ui([Object(n.h)(".main-middle")],Bi.prototype,"$mainBox",void 0),Ui([Object(n.h)("icon-folder")],Bi.prototype,"$folderBox",void 0),Ui([Object(n.h)(".main-middle-center")],Bi.prototype,"$main",void 0),Ui([Object(n.h)(".main-left")],Bi.prototype,"$left",void 0),Ui([Object(n.h)(".main-right")],Bi.prototype,"$right",void 0),Ui([Object(n.h)("img#windmill")],Bi.prototype,"_$windmill",void 0),Ui([Object(n.h)(".setting-home-text")],Bi.prototype,"$settingTips",void 0),Ui([Object(n.g)({type:Boolean})],Bi.prototype,"iconSearchShow",void 0),Bi=Ui([Object(n.c)("newtab-main")],Bi);var Fi=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};class zi{constructor(){this.topSites=[],this.minWidth=60,this.maxWidth=160}getTopSites(){chrome.topSites.get(e=>this.setData(e))}setData(e){this.topSites=e,localStorage.setItem("topSites",JSON.stringify(e))}}Fi([x.g],zi.prototype,"topSites",void 0),Fi([x.b],zi.prototype,"getTopSites",null),Fi([x.b],zi.prototype,"setData",null);var Hi=new zi,Wi=(i(774),function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a});let Gi=class extends a.a{constructor(){super(...arguments),this.store=Hi}openUrl(e,t){O.a.sendEvent({action:{openTopsite:c.a.getTargetLogDomain(e)}}),c.a.openUrl(e,s.settingStore.setting.link.icon,t)}render(){return n.e`
      <div class="topbar-useful">
        <div class="flex">
          ${Hi.topSites.map(e=>n.e`
              <div
                class="item"
                .title=${e.title}
                style="max-width: ${Hi.maxWidth}px;min-width: ${Hi.minWidth}px;"
                @click=${t=>this.openUrl(e.url,t)}
                @mousedown="${t=>{1===t.button&&this.openUrl(e.url,t)}}"
              >
                <i-favicon style="border-radius: 50%; overflow: hidden;" .url="${e.url}"></i-favicon>
                <span>${e.title}</span>
              </div>
            `)}
        </div>
      </div>
    `}firstUpdated(){this.store.getTopSites(),this._hideFake()}_hideFake(){r.a.resolve().then(()=>this.updateComplete).then(()=>new r.a(e=>setTimeout(e,100))).finally(()=>{const e=document.querySelector(".top-useful");e&&e.parentElement.removeChild(e)})}};Gi.styles=n.b`
    .topbar-useful {
      width: 100%;
      height: 36px;
    }

    .flex {
      display: flex;
      align-items: center;
      height: 100%;
      font-size: 12px;
      box-sizing: border-box;
      padding: 4px 8px;
      flex-flow: row wrap;
      overflow: hidden;
    }
    .item:not(:last-child) {
      margin-right: 5px;
    }
    .item {
      display: inline-flex;
      height: 100%;
      align-items: center;
      border-radius: 24px;
      flex-shrink: 0;
      position: relative;
      box-sizing: border-box;
      padding: 2px 10px;
      cursor: pointer;
    }
    .item::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0;
      background-color: #151517;
      border-radius: inherit;
      transition: opacity 200ms;
      pointer-events: none;
      cursor: pointer;
    }
    .item:hover::before {
      opacity: 0.12;
    }

    img,
    i-favicon {
      width: 16px;
      height: 16px;
      margin-right: 0;
    }
    span {
      margin-left: 6px;
      color: #ececec;
      text-decoration: none;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      position: relative;
      z-index: 1;
    }
  `,Gi=Wi([Object(n.c)("topbar-useful")],Gi);var Vi=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let qi=class extends a.a{render(){return n.e`
      <div class="newtab-topsite">
        ${s.settingStore.withPermissionTopUseful?n.e`<topbar-useful></topbar-useful>`:null}
      </div>
    `}};qi=Vi([Object(n.c)("newtab-topsite")],qi);i(643);var Yi=i(210);var Qi=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let Xi=class extends n.a{constructor(){super(...arguments),this.show=!1,this.maskClosable=!0,this.duration=window.__ANIMATION__.aniSideTime,this.statusQueue=[]}firstUpdated(){var e,t;const i=null===(e=this.$slot.assignedNodes())||void 0===e?void 0:e.find(e=>1===e.nodeType);null===(t=null==i?void 0:i.style)||void 0===t||t.setProperty("backface-visibility","hidden")}updated(e){e.has("show")&&!0===this.show&&this.onShow()}shouldUpdate(e){return!this.$content||(!e.has("show")||!1!==this.show||(this.onHide().then(()=>{0===this.statusQueue.length&&this.requestUpdate()}),!1))}maskClose(){this.maskClosable&&this.close()}close(){const e=new CustomEvent("on-close",{bubbles:!0,composed:!0});this.dispatchEvent(e)}async onShow(){0===this.statusQueue.length&&await this.callLifeCycle("beforeShow"),await this.transformAnimate(),0===this.statusQueue.length&&await this.callLifeCycle("afterShow")}async onHide(){0===this.statusQueue.length&&await this.callLifeCycle("beforeHide"),await this.transformAnimate(!0),0===this.statusQueue.length&&await this.callLifeCycle("afterHide")}async callLifeCycle(e){"beforeHide"===e?this.$close.classList.add("hide-close"):"afterShow"===e&&this.$close.classList.remove("hide-close");const t=this.$slot.assignedNodes().find(e=>1===e.nodeType);(null==t?void 0:t[e])&&await t[e]()}transformAnimate(e=!1){return new r.a(t=>{const i=`transform ${window.__ANIMATION__.aniSideTime}ms ${window.__ANIMATION__.aniSideFn} 0s`;0===this.statusQueue.length&&this.$content.style.setProperty("transition",i),this.statusQueue.push(e),requestAnimationFrame(async()=>{await new r.a(e=>setTimeout(e,0)),e?(this.$mask.style.setProperty("pointer-events","none"),this.$content.style.setProperty("transform","translateX(calc(100% * var(--side-ratio))) scale(var(--side-ratio)) translateZ(0)")):(this.$mask.style.setProperty("pointer-events","auto"),this.$content.style.setProperty("transform","translateX(0) scale(var(--side-ratio)) translateZ(0)")),setTimeout(()=>{this.statusQueue.shift(),0===this.statusQueue.length&&this.$content.style.removeProperty("transition"),t(null)},window.__ANIMATION__.aniSideTime)})})}render(){return n.e`
      <div .hidden="${!this.show}">
        <div @click="${this.maskClose}" class="mask"></div>
        <div class="content">
          <div @click="${this.close}" class="close hide-close">
            <img class="img" src="${i(781)}" alt="" />
          </div>
          <slot></slot>
        </div>
      </div>
    `}};Xi.styles=n.b`
    :host {
      --side-width: 420px;
    }
    [hidden] {
      display: none !important;
    }
    .mask {
      position: absolute;
      z-index: 100;
      top: var(--top-bar-height);
      right: 0;
      left: 0;
      bottom: 0;
    }
    .content {
      position: absolute;
      will-change: transform;
      top: var(--top-bar-height);
      right: 0;
      z-index: 101;
      width: var(--side-width);
      max-width: calc(100vw - 50px);
      height: calc((1 / var(--side-ratio)) * (100% - var(--top-bar-height)));
      transform-origin: top right;
      transform: translateX(calc(100% * var(--side-ratio))) scale(var(--side-ratio)) translateZ(0);
      box-shadow: #555 0 0 calc(var(--side-ratio) * 8px);
    }
    .close {
      position: absolute;
      top: 10px;
      left: -46px;
      width: 36px;
      height: 36px;
      display: flex;
      justify-content: center;
      align-items: center;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    .close:hover {
      background-color: rgba(0, 0, 0, 0.15);
    }
    .close .img {
      width: 14px;
      height: 14px;
    }
    .hide-close {
      display: none;
    }
  `,Qi([Object(n.g)({type:Boolean})],Xi.prototype,"show",void 0),Qi([Object(n.g)({type:Boolean})],Xi.prototype,"maskClosable",void 0),Qi([Object(n.g)({type:Number})],Xi.prototype,"duration",void 0),Qi([Object(n.h)(".content")],Xi.prototype,"$content",void 0),Qi([Object(n.h)(".mask")],Xi.prototype,"$mask",void 0),Qi([Object(n.h)("slot")],Xi.prototype,"$slot",void 0),Qi([Object(n.h)(".close")],Xi.prototype,"$close",void 0),Xi=Qi([Object(n.c)("i-side2")],Xi);i(610);var Ki=i(818),Zi=i.n(Ki),Ji=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let eo=class extends n.a{constructor(){super(...arguments),this.title="",this.borderBottom=!0,this.showSetting=!1}handleSetting(e){e.stopPropagation();const t=new CustomEvent("on-setting",{bubbles:!0,composed:!0});this.dispatchEvent(t)}render(){return n.e`
      <div class="i-side2-header ${this.borderBottom?"border-bottom":""}">
        <slot name="content">
          <div class="default-content">
            <div class="default-title">${this.title}</div>
            ${this.showSetting?n.e`
                  <div class="default-setting" @click=${this.handleSetting}>
                    <i-svg class="default-setting-btn" src="${Zi.a}"></i-svg>
                  </div>
                `:""}
          </div>
        </slot>
        <slot name="setting"></slot>
      </div>
    `}};eo.styles=n.b`
    .i-side2-header {
      height: var(--side-header-height);
      box-sizing: border-box;
      border-bottom: 1px solid transparent;
      background-color: #fff;
    }

    .border-bottom {
      border-bottom-color: rgb(239, 239, 239);
    }
    .default-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      height: 100%;
      box-sizing: border-box;
      padding: 0 30px;
    }

    .default-title {
      font-size: 27px;
      color: rgb(51, 51, 51);
    }
    .default-setting {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 44px;
      height: 44px;
      margin-right: 23px;
      transition: all ease 0.2s;
      border-radius: 6px;
      cursor: pointer;
      transform: translateZ(10px);
    }
    .default-setting:hover {
      background: rgba(0, 0, 0, 0.05);
    }
    :host(.setting-active) .default-setting {
      background: rgba(0, 0, 0, 0.05);
    }
    .default-setting-btn {
      width: 28px;
      height: 28px;
    }
    .default-setting-btn:hover {
      opacity: 0.8;
    }
  `,Ji([Object(n.g)({type:String})],eo.prototype,"title",void 0),Ji([Object(n.g)({type:Boolean})],eo.prototype,"borderBottom",void 0),Ji([Object(n.g)({type:Boolean})],eo.prototype,"showSetting",void 0),eo=Ji([Object(n.c)("i-side2-header")],eo);var to=i(769),io=n.b`button {
  border: none;
  background: none;
  outline: none;
}
h1,
h2,
h3,
h4,
h5,
p {
  margin: 0;
}
.tips {
  padding: 24px 30px;
  height: 35px;
}
.tips > div {
  display: flex;
  justify-content: space-between;
  align-items: center;
  height: 100%;
}
.tips > div > span {
  font-size: 12px;
  color: #999999;
  cursor: text;
}
.tips i-svg {
  width: 20px;
  cursor: pointer;
}
.container {
  display: flex;
  flex-direction: column;
  height: calc(100% - var(--side-header-height));
  overflow: hidden;
}
.container .main-list {
  box-sizing: border-box;
  width: 100%;
  flex: 1;
  padding-left: 30px;
  overflow-x: hidden;
}
.container .side-weather-list {
  width: 360px;
}
.unit-setting-wrapper {
  box-sizing: border-box;
  position: absolute;
  top: 90px;
  width: 360px;
  height: 76px;
  padding: 0 24px;
  left: 30px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: #fff;
  box-shadow: 0px 2px 10px 0px rgba(0, 0, 0, 0.1);
  z-index: 9;
  border-radius: 6px;
}
.unit-setting-wrapper.hide {
  display: none;
}
.unit-setting-wrapper .unit {
  font-size: 20px;
  color: #999999;
}
.unit-setting-wrapper .unit .active {
  color: #333333;
}
.unit-setting-wrapper infinito-button {
  width: auto;
  height: auto;
}
/* weather-list */
.empty {
  margin: 75px 0 50px;
}
.empty img {
  display: block;
  margin: 0 auto;
  width: 86px;
  height: 86px;
}
.empty img + p {
  font-size: 14px;
  color: #999;
  text-align: center;
}
.item {
  box-sizing: border-box;
  padding: 12px 0;
}
.sort-item.hide {
  animation: hide 300ms 0s ease forwards;
}
@keyframes hide {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(200%);
  }
}
/* weather-item */
weather-item {
  display: block;
}
.drag-item {
  box-sizing: border-box;
  position: fixed;
  z-index: 9999;
  width: 360px;
  height: 99px;
  pointer-events: none;
  cursor: pointer;
}
.drag-item i-dot-expanded {
  opacity: 1;
}
.side-weather-item {
  position: relative;
  box-sizing: border-box;
  background: #0f7cff;
  border-radius: 6px;
  overflow: hidden;
  cursor: pointer;
}
.side-weather-item:hover i-dot-expanded {
  opacity: 1;
}
.side-weather-item.hide {
  animation: hide 300ms 0s ease forwards;
}
.side-weather-item .head-panel {
  box-sizing: border-box;
  position: relative;
  height: 99px;
  padding: 0 6px 0 20px;
}
.side-weather-item .head-panel .delete-btn {
  position: absolute;
  left: -12px;
  top: 50%;
  transform: translateY(-50%);
  color: red;
  transition: all 300ms;
  cursor: pointer;
}
.side-weather-item .head-panel .delete-btn img {
  width: 24px;
}
.side-weather-item .head-panel .drag-btn {
  position: absolute;
  top: 10px;
  right: 10px;
  cursor: pointer;
  transition: all 300ms;
}
.side-weather-item .head-panel .drag-btn img {
  width: 14px;
  height: 14px;
}
.side-weather-item .head-panel .hidden {
  opacity: 0;
}
.side-weather-item .info-content {
  display: flex;
  justify-content: space-between;
  align-items: center;
  height: 100%;
  color: #fff;
}
.side-weather-item .info-content .left {
  flex: 1;
  overflow: hidden;
  margin-right: 30px;
}
.side-weather-item .info-content .left .city-name {
  margin-bottom: 12px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  font-size: 18px;
  font-weight: 400;
}
.side-weather-item .info-content .left .weather-status-wrapper {
  display: flex;
  align-items: center;
}
.side-weather-item .info-content .left .weather-status-wrapper .weather-status {
  font-size: 12px;
  font-weight: 300;
}
.side-weather-item .info-content .left .weather-status-wrapper .icon-tmp {
  width: 30px;
  height: 30px;
  margin-right: 6px;
  margin-left: -2px;
}
.side-weather-item .info-content .left .weather-status-wrapper .icon-tmp img {
  width: 100%;
  height: 100%;
}
.side-weather-item .info-content .right {
  box-sizing: border-box;
  display: flex;
  align-items: center;
  height: 100%;
}
.side-weather-item .info-content .right .temp {
  font-family: PingFangSC-Thin, PingFang SC;
  font-size: 42px;
  font-weight: 100;
  color: #fff;
}
.side-weather-item .body-panel {
  height: 0;
  overflow: hidden;
}
.side-weather-item .body-panel.open {
  animation: open 300ms 0s ease forwards;
}
.side-weather-item .body-panel.close {
  animation: close 300ms 0s ease forwards;
}
.side-weather-item .body-panel.hidden {
  height: 0;
}
.side-weather-item ul {
  display: flex;
  margin: 0;
  padding: 0;
  padding-top: 23px;
  box-sizing: border-box;
}
.side-weather-item ul li {
  width: 25%;
  list-style: none;
  color: #fff;
  display: flex;
  flex-direction: column;
  align-items: center;
}
.side-weather-item ul li .date {
  margin-bottom: 16px;
  max-width: 100px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.side-weather-item ul li img {
  box-sizing: border-box;
  width: 34px;
  height: 34px;
  margin-bottom: 12px;
}
.side-weather-item ul li .temp {
  margin-bottom: 27px;
  font-size: 12px;
}
.side-weather-item ul li .detail-name {
  margin-bottom: 8px;
  font-size: 12px;
  text-align: center;
}
.side-weather-item ul li .detail-num {
  font-size: 12px;
}
i-dot-expanded {
  margin-left: 6px;
  margin-bottom: auto;
  margin-top: 10px;
  --dot-color: #fff;
  --dot-hover: rgba(0, 0, 0, 0.15);
  opacity: 0;
  transition: opacity 0.3s;
  outline: none;
}
i-dot-expanded:focus {
  opacity: 1;
  background: var(--dot-hover);
}
@keyframes open {
  from {
    height: 0;
  }
  to {
    height: 310px;
  }
}
@keyframes close {
  from {
    height: 310px;
  }
  to {
    height: 0;
  }
}
@keyframes hide {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(200%);
  }
}
`,oo=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let ro=class extends a.a{constructor(){super(...arguments),this.store=s.weatherStore,this.parentEle=this.parentElement}_slice(e,t=0,i=4){return e.slice(t,i)}renderDate(e){let t="";switch(new Date(e).getDay()){case 0:t=""+Object(J.i18n)("sun");break;case 1:t=""+Object(J.i18n)("mon");break;case 2:t=""+Object(J.i18n)("tue");break;case 3:t=""+Object(J.i18n)("wed");break;case 4:t=""+Object(J.i18n)("thu");break;case 5:t=""+Object(J.i18n)("fri");break;default:t=""+Object(J.i18n)("sat")}return t}renderTemp(e){return"celsius"===this.store.unit?e:Math.floor(1.8*e+32)}handleToggle(e){e.preventDefault(),e.stopPropagation(),"true"===this.open?this.open="false":this.open="true"}delete(e,t){this.dispatchEvent(new CustomEvent("on-delete",{detail:{cid:t},bubbles:!0,composed:!0}))}toTop(e,t){this.store.toTop(this.cid,t)}render(){var e,t,i,o,r;const a=this.store.formateList.filter(e=>e.cid===this.cid),{name:s="",items:l=[],cid:c="",top:d=0}=a.length?a[0]:{},p=c===(null===(e=this.store.formateList[0])||void 0===e?void 0:e.cid);return n.e`
      <div class="side-weather-item" style="background: ${null===(t=null==l?void 0:l[0])||void 0===t?void 0:t._bgColor}">
        <div
          class="head-panel"
          @click="${this.handleToggle}"
        >
          <div class="info-content">
            <div class="left">
              <h4 class="city-name">${s}</h4>
              <div class="weather-status-wrapper">
                <div class="icon-tmp">
                  <img
                    draggable="false"
                    src="${null===(i=null==l?void 0:l[0])||void 0===i?void 0:i._bgImg}"
                    @dragstart=${e=>e.preventDefault()}
                  />
                </div>
                <p class="weather-status">${null===(o=null==l?void 0:l[0])||void 0===o?void 0:o._text}</p>
              </div>
            </div>
            <div class="right">
              <div class="temp">${this.renderTemp(null===(r=null==l?void 0:l[0])||void 0===r?void 0:r.tmpMax)}</div>
              <i-dot-expanded>
                ${p?null:n.e`
                      <li class="weather-dot-item" @click=${e=>this.toTop(e,d)}>
                        ${Object(J.i18n)("set_top")}
                      </li>
                    `}
                <li class="weather-dot-item" @click="${e=>this.delete(e,c)}">${Object(J.i18n)("del_folder")}</li>
              </i-dot-expanded>
            </div>
          </div>
        </div>
        <div
          class="body-panel"
          class=${Object(K.a)({"body-panel":!0,open:"true"===this.open,close:"false"===this.open})}
          @click=${this.handleToggle}
        >
          <ul>
            ${this._slice(l).map(e=>n.e`
                <li>
                  <div class="date">${this.renderDate(e.time)}</div>
                  <img
                    draggable="false"
                    src="${e._bgImg}"
                    @dragstart=${e=>e.preventDefault()}
                  />
                  <div class="temp">${this.renderTemp(e.tmpMin)}/${this.renderTemp(e.tmpMax)}</div>
                  <div class="detail-name">${Object(J.i18n)("wind_force")}</div>
                  <div class="detail-name">${e.windScale?e.windScale:Object(J.i18n)("no_data")}</div>
                  <div class="detail-name">${Object(J.i18n)("relative_humidity")}</div>
                  <div class="detail-name">${e.humidity?e.humidity+"%":Object(J.i18n)("no_data")}</div>
                  <div class="detail-name">${Object(J.i18n)("air_pressure")}</div>
                  <div class="detail-num">${e.pressure?e.pressure+" hPa":Object(J.i18n)("no_data")}</div>
                </li>
              `)}
          </ul>
        </div>
      </div>
    `}createRenderRoot(){return this}};ro.styles=io,oo([Object(n.h)(".body-panel")],ro.prototype,"bodyPanel",void 0),oo([Object(n.g)({type:String,reflect:!0})],ro.prototype,"cid",void 0),oo([Object(n.g)({type:String,reflect:!0})],ro.prototype,"open",void 0),ro=oo([Object(n.c)("weather-item")],ro);var no=i(819),ao=i.n(no),so=i(782),lo=i.n(so),co=i(820),po=i.n(co),ho=i(821),uo=i.n(ho),go=i(822),fo=i.n(go),mo=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let bo=class extends a.a{constructor(){super(),this.store=s.weatherStore,this.selectedIdx=-1,document.addEventListener("keydown",e=>{const{citys:t}=this.store,i=e.keyCode;if(40===i||38===i){if(this.searchEle.blur(),t.length<1)return;for(const e in t)this.store.changeSelected(Number(e),!1);40===i?(this.selectedIdx<t.length-1&&this.selectedIdx++,this.scoll(this.selectedIdx,"down",!1)):(this.selectedIdx>0&&(this.selectedIdx--,this.scoll(this.selectedIdx,"up",!1)),-1===this.selectedIdx&&(this.selectedIdx=t.length-1,this.scoll(this.selectedIdx,"up",!0))),this.store.changeSelected(this.selectedIdx,!0)}if(13===i){const e=this.store.citys[this.selectedIdx];e&&this.addToLocal(e.cid,e.city)}})}scoll(e,t,i){const o=this.shadowRoot.querySelector(".list ul"),r=o.offsetTop;"up"===t&&e<5&&(o.scrollTop-=30),"down"===t&&e>5&&(o.scrollTop+=80),"up"===t&&i&&(o.scrollTop=r)}async handleSearch(e){const t=e.detail.text;await this.store.searchCitys(t),this.selectedIdx=-1}async reload(){const e=this.searchEle.value;await this.store.searchCitys(e),this.selectedIdx=-1}clear(){this.store.searchCitys("")}async addToLocal(e,t){try{await this.store.addCity(e,t),this.searchEle.clear()}catch(e){se.message.error(e.message)}}close(){this.store.closeModal(),this.searchEle.clear()}updated(){this.store.isShowModal?this.searchEle.focus():this.searchEle.clear()}render(){return n.e` <div class="box">
      <!-- <i-svg class="close" src="${ao.a}" @click="${this.close}"></i-svg> -->
      <div class="search-container">
        <span class="title">${Object(J.i18n)("add_city")}</span>
        <div class="search-wrapper">
          <i-search
            placeholder="${Object(J.i18n)("input_city")}"
            @i-search="${c.a.debounce(this.handleSearch,200)}"
            @i-clear=${this.clear}
          >
          </i-search>
        </div>
        <div class="list">
          <ul class="global-scrollbar">
            ${"none"!==this.store.searchState?this.renderSearchList():this.renderLocaleData()}
          </ul>
        </div>
      </div>
    </div>`}renderLocaleData(){const{localData:e,list:t}=this.store;if(!Object.keys(e||{}).length)return null;const{cid:i,city:o,country:r,selected:a}=e;return t.some(e=>e.cid===i)?null:n.e`
      <li class="default ${a?"selected":""}" @click="${()=>this.addToLocal(i,o)}">
        <div class="padding-box">
          <div class="pre">
            <i-svg class="location-icon" src="${po.a}"></i-svg>
            <span>${o}，${r}，${i}</span>
          </div>
        </div>
      </li>
    `}renderSearchList(){const{citys:e,searchState:t}=this.store;return"ing"===t?n.e`
        <div class="no-data">
          <i-svg class="empty-icon" src="${uo.a}"></i-svg>
          <p>${Object(J.i18n)("searching")}</p>
        </div>
      `:"done"===t?e.length?n.e`
        ${e.map(e=>n.e`
            <li
              class="default ${e.selected?"selected":""} ${e.isAdded?"disabled":""}"
              @click="${()=>this.addToLocal(e.cid,e.city)}"
            >
              <div class="padding-box">
                <div class="pre">
                  <span>${e.city}，${e.country}，${e.cid.substring(0,2)}</span>
                </div>
              </div>
            </li>
          `)}
      `:n.e`
          <div class="no-data">
            <i-svg class="empty-icon" src="${lo.a}"></i-svg>
            <p>${Object(J.i18n)("no_search_result")}</p>
          </div>
        `:"error"===t?n.e`
        <div class="no-data">
          <i-svg class="empty-icon" src="${fo.a}"></i-svg>
          <p>${Object(J.i18n)("search_error")} <span class="reload" @click=${this.reload}>${Object(J.i18n)("reload")}</span></p>
        </div>
      `:void 0}};bo.styles=[k.a,n.b`
      :host {
        display: block;
      }
      ul {
        margin: 0;
        padding: 0;
      }
      li {
        list-style: none;
      }
      .box {
        display: block;
        width: 410px;
        max-height: 540px;
        min-height: 400px;
        height: 60vh;
        background: white;
        border-radius: 6px;
      }
      .close {
        position: absolute;
        right: 20px;
        top: 20px;
        width: 14px;
        height: 14px;
        cursor: pointer;
        transition: opacity 0.3s;
      }
      .close:hover {
        opacity: 0.4;
      }
      .search-container {
        box-sizing: border-box;
        display: flex;
        flex-flow: column;
        width: 100%;
        height: 100%;
        padding: 40px 0;
      }
      .search-wrapper {
        padding: 0 30px;
      }
      .list {
        margin-top: 8px;
        flex: 1;
        overflow: hidden;
      }
      .list ul {
        height: 100%;
        overflow-y: auto;
      }
      .list li {
        margin: 0;
        height: 52px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        padding: 0 30px;
      }
      .list li:hover {
        background: #f7f7f7;
      }
      .list .selected {
        background: #f7f7f7;
      }
      .list .selected span,
      .list .selected i-svg {
        color: #333 !important;
        font-weight: 500 !important;
      }
      .list li:hover .list li .padding-box {
        border-color: #f7f7f7 !important;
      }
      .list .padding-box i-svg {
        width: 22px;
        color: rgb(101, 101, 101);
        margin-right: 8px;
      }
      .list .padding-box span {
        color: #999;
      }
      .list .disabled span {
        color: rgba(0, 0, 0, 0.4);
      }
      .list .disabled {
        cursor: not-allowed;
      }
      .list .padding-box .location-icon {
        width: 14px;
      }
      .list li .padding-box {
        display: flex;
        width: 350px;
        border-bottom: 1px solid #f7f7f7;
        height: 100%;
        align-items: center;
        justify-content: space-between;
      }
      .list li .padding-box .pre {
        display: flex;
        align-items: center;
      }
      .list li:hover span,
      .list li:hover i-svg {
        color: #333 !important;
      }
      .list .disabled:hover span.list .disabled:hover i-svg {
        color: rgba(0, 0, 0, 0.4);
      }
      .title {
        display: block;
        width: 100%;
        margin-bottom: 30px;
        color: #333;
        font-size: 20px;
        text-align: center;
      }
      .no-data {
        display: flex;
        width: 100%;
        height: 100%;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        color: #656565;
      }
      .no-data .empty-icon {
        width: 40px;
        height: 40px;
        margin-bottom: 20px;
      }
      .no-data .reload {
        color: #333;
        cursor: pointer;
      }
    `],mo([Object(n.g)({type:Number})],bo.prototype,"selectedIdx",void 0),mo([Object(n.h)("i-search")],bo.prototype,"searchEle",void 0),bo=mo([Object(n.c)("add-weather-modal")],bo);var yo=i(823),vo=i.n(yo),wo=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let xo=class extends a.a{constructor(){super(...arguments),this.store=s.weatherStore,this.flipping=!1,this.cloneEle=null,this.dragOffsetY=0,this.dropTime=0,this.endtime=0,this.startMove=!1,this.dragId=null,this.sortedList=[],this.opt="",this.itemHeight=99*s.settingStore.sideRatio,this.dragStart=({y:e,dragElement:t})=>{this.weatherMainContent.style.cursor="pointer";this.weatherWrapper.querySelectorAll(".item").forEach(e=>{e.querySelector("weather-item").removeAttribute("open")});const{top:i}=t.getBoundingClientRect();if(this.dragOffsetY=e-i>this.itemHeight?this.itemHeight:e-i,this.dragOffsetY=this.dragOffsetY<0?0:this.dragOffsetY,this.dragEndTimer&&(clearTimeout(this.dragEndTimer),this.dragEndTimer=void 0),!this.cloneEle){this.cloneEle=t.cloneNode(!0),this.cloneEle.className="drag-item";let e=document.body.style.getPropertyValue("--top-bar-height");e=Number(e.substring(0,e.length-2)),this.cloneEle.style.top=i/s.settingStore.sideRatio-e/s.settingStore.sideRatio+"px",this.cloneEle.dataset.id=t.dataset.id,this.weatherWrapper.appendChild(this.cloneEle),this.dragId=this.cloneEle.dataset.id}t.style.opacity=".4"},this.dragMove=({y:e})=>{let t=document.body.style.getPropertyValue("--top-bar-height");t=Number(t.substring(0,t.length-2)),this.cloneEle&&(this.cloneEle.style.top=(e-this.dragOffsetY)/s.settingStore.sideRatio-t+"px")},this.dragEnd=()=>{let e;if(this.startMove=!1,!this.cloneEle)return;const t=this.cloneEle.dataset.id;let i=document.body.style.getPropertyValue("--top-bar-height");i=Number(i.substring(0,i.length-2)),this.endtime=Date.now();if(this.endtime-this.dropTime>150){this.weatherWrapper.querySelectorAll(".weather-drag").forEach(o=>{if(o.dataset.id===t){const t=o.getBoundingClientRect().top;e=t/s.settingStore.sideRatio-i/s.settingStore.sideRatio}}),this.cloneEle.style.transition="all 0.3s ease-out",this.cloneEle.style.top=e+"px",this.dragEndTimer=setTimeout(()=>{this.cloneEle&&(this.weatherWrapper.removeChild(this.cloneEle),this.cloneEle=null,this.dragId=null),this.dragEndTimer=void 0},300)}else this.weatherWrapper.removeChild(this.cloneEle),this.cloneEle=null,this.dragId=null;this.weatherWrapper.querySelectorAll(".weather-drag").forEach(e=>{e.style.opacity="1"}),this.weatherMainContent.style.cursor="auto"},this.dragDrop=async({dropElement:e})=>{if(this.flipping)return;if(!this.cloneEle)return;this.dropTime=Date.now();const t=e.dataset.id,i=this.cloneEle.dataset.id;if(this.store.changeIndex(i,t),await this.updateComplete,t!==i){this.weatherWrapper.querySelectorAll(".weather-drag").forEach(e=>{const t=e.dataset.id;e.style.opacity=t===i?".4":"1"})}},this.closeModal=()=>{this.store.closeModal()}}firstUpdated(){this.initDrag();let e=300;s.settingStore.sideScaleRatio>1&&(e*=s.settingStore.sideScaleRatio),this.flip=new X({root:this.weatherWrapper,duration:e}),this.flip.read(),window.addEventListener("click",()=>this.store.closeSetting())}update(e){this.flip&&this.flip.read(),super.update(e)}updated(){this.flipping=!0,"delete"!==this.opt&&this.flip.play({props:["position"]}).then(()=>{this.flipping=!1})}initDrag(){new ri({dragRoot:this,dragSelector:".weather-drag",dropRoot:this.shadowRoot,dropSelector:".weather-drop",dropLine:"y"}).subscribe(e=>{switch(e.type){case"dragStart":this.startMove=!1;break;case"dragMove":!this.startMove&&e.payload.startMove?(this.startMove=!0,this.dragStart(e.payload)):e.payload.startMove&&(this.opt="other",this.dragMove(e.payload));break;case"drop":this.dragDrop(e.payload);break;case"dragEnd":this.dragEnd()}})}handleSetting(e){e.stopPropagation(),this.store.toggleSetting()}changeUnit(e){e.stopPropagation(),this.store.changeUnit()}handleTabClose(){this.weatherWrapper.parentElement.scrollTop=0;const e=this.weatherWrapper.querySelectorAll(".item");e.length&&setTimeout(()=>{e.forEach(e=>{e.querySelector("weather-item").removeAttribute("open")})},500)}afterHide(){this.handleTabClose()}render(){const{isShowModal:e,unit:t,isShowSetting:i,formateList:o,lastUpdated:r}=this.store;return n.e`
      <i-side2-header
        class="weather-drop"
        class=${Object(K.a)({"weather-drop":!0,"setting-active":i})}
        data-id="top"
        .showSetting=${!0}
        .title="${Object(J.i18n)("weather")}"
        @on-setting="${this.handleSetting}"
      >
        <div
          slot="setting"
          style=${Object(to.a)({display:i?"block":"none",position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px","z-index":"8"})}
        >
          <div class="unit-setting-wrapper ${i?"":"hide"}" @click=${e=>e.stopPropagation()}>
            <div style="display:${"celsius"!==t?"flex":"none"}" class="unit">
              C/<span class="active">F</span>
            </div>
            <div style="display:${"celsius"===t?"flex":"none"}" class="unit">
              <span class="active">C</span>/F
            </div>
            <infinito-button @click="${this.changeUnit}" .scaleRatio=${s.settingStore.sideScaleRatio}>
              ${Object(J.i18n)("switch_to")} ${"celsius"===t?""+Object(J.i18n)("fahrenheit"):""+Object(J.i18n)("celsius")}
            </infinito-button>
          </div>
        </div>
      </i-side2-header>
      <div class="container">
        <div class="last_time_update weather-drop" data-id="top">
          <span>${Object(J.i18n)("last_time_update")}: ${c.a.fmtTime(r)}</span>
        </div>
        <div class="global-scrollbar main-list weather-drop" id="weather-main-content" data-id="bottom">
          <div class="side-weather-list" style="position: relative;">
            ${o.length?this.renderCityList():n.e`
                  <div class="empty">
                    <img src=${vo.a} />
                    <p>${Object(J.i18n)("weather_empty")}</p>
                  </div>
                `}
          </div>
          <infinito-button class="add-city" @click="${this.addCity}" .scaleRatio=${s.settingStore.sideScaleRatio}
            >${Object(J.i18n)("add_city")}</infinito-button
          >
        </div>
      </div>
      <infinito-portal-entrance destination="weather">
        <infinito-modal .open=${e} style="--modal-padding: 0;" .onCancel="${this.closeModal}">
          <div slot="body">
            <add-weather-modal></add-weather-modal>
          </div>
        </infinito-modal>
      </infinito-portal-entrance>
    `}renderCityList(){const{formateList:e}=this.store;return n.e`
      ${e.map(e=>n.e`
            <div class="item sort-item weather-drop" data-id=${e.cid} flipkey=${e.cid}>
              <weather-item
                class="weather-drag"
                .cid=${e.cid}
                data-id=${e.cid}
                @on-delete=${this.handleDelete}
              ></weather-item>
            </div>
          `)}
    `}async handleDelete(e){this.opt="delete",e.target.parentNode.classList.add("hide"),setTimeout(()=>{this.store.deleteCityWeather(e.detail.cid);this.weatherWrapper.querySelectorAll(".sort-item").forEach(e=>e.classList.remove("hide"))},200)}addCity(){this.store.initLocal(),this.store.openModal()}};xo.styles=[io,k.a,n.b`
      :host {
        display: block;
        height: 100%;
        background-color: #fff;
      }
      .last_time_update {
        padding: 24px 30px;
        color: #999;
        font-size: 12px;
      }
      .add-city {
        --border-color: #efefef;
        --button-color: #efefef;
        --hover-color: #dfdfdf;
        --hover-font-color: #333;
        display: block;
        width: 360px;
        height: 52px;
        margin: 12px 0 15px 0;
      }
    `],wo([Object(n.f)()],xo.prototype,"dragId",void 0),wo([Object(n.h)(".drag-fake-wrapper")],xo.prototype,"dragFakeWrapper",void 0),wo([Object(n.h)("#weather-main-content")],xo.prototype,"weatherMainContent",void 0),wo([Object(n.h)(".side-weather-list")],xo.prototype,"weatherWrapper",void 0),wo([Object(n.h)(".main-list")],xo.prototype,"mainWrapper",void 0),wo([Object(n.g)({type:Array})],xo.prototype,"sortedList",void 0),wo([Object(n.g)({type:String})],xo.prototype,"opt",void 0),xo=wo([Object(n.c)("side-weather")],xo);var _o=n.b`.side-todos-container {
  display: flex;
  flex-direction: column;
  position: relative;
  width: 100%;
  height: calc(100% - var(--side-header-height));
  overflow: auto;
  padding-top: 30px;
  box-sizing: border-box;
}
.side-todos-container .list {
  flex: 1;
}
.side-todos-remove {
  display: flex;
  justify-content: space-between;
  padding: 15px 30px;
}
.side-todos-remove button {
  padding: 0;
  border: none;
  background: none;
  color: #a2a2a2;
  outline: none;
  cursor: not-allowed;
  font-weight: 500;
}
.side-todos-remove button:hover {
  opacity: 0.7;
}
.side-todos-remove button.allow {
  color: #333333;
  cursor: pointer;
}
.side-todos-input-wrapper {
  position: relative;
  padding: 0 30px;
}
.side-todos-input-wrapper .side-todos-input {
  box-sizing: border-box;
  width: 360px;
  height: 52px;
  background: #ffffff;
  border: 1px solid #999;
  border-radius: 6px;
  padding: 12px;
  padding-right: 50px;
  outline: none;
  color: #333;
  font-family: 'PingFang SC', 'Microsoft Yahei', Helvetica, Arial, sans-serif;
}
.side-todos-input-wrapper .side-todos-input:hover {
  border-color: #333;
}
.side-todos-input-wrapper .side-todos-input:focus {
  border-color: #333;
}
.side-todos-input-wrapper .icon {
  position: absolute;
  width: 14px;
  height: 14px;
  top: 18px;
  right: 50px;
  cursor: pointer;
}
.side-todos-input-wrapper .icon .clear-icon {
  width: 100%;
}
/**
 * checkbox 样式
 */
.i-checkbox {
  position: relative;
  box-sizing: border-box;
  width: 16px;
  height: 16px;
  margin: 3px 13px 0 0;
  border: 2px solid #333;
  border-radius: 6px;
}
.i-checkbox::after {
  content: ' ';
  position: absolute;
  top: 50%;
  left: 2px;
  display: table;
  width: 4px;
  height: 7px;
  border-top: 0;
  border-left: 0;
  opacity: 0;
  transform: rotate(45deg) scale(0) translate(-50%, -50%);
}
.i-checkbox.i-checkbox-checked {
  border-color: #999;
}
.i-checkbox.i-checkbox-checked::after {
  border: 2px solid #999;
  border-top: 0;
  border-left: 0;
  opacity: 1;
  transform: rotate(45deg) scale(1) translate(-50%, -50%);
}
.i-checkbox .i-checkbox-input {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  margin: 0;
  width: 100%;
  height: 100%;
  z-index: 1;
  cursor: pointer;
  opacity: 0;
}
/**
 * side-todo-item
 */
.side-todos-item {
  box-sizing: border-box;
  position: relative;
  padding: 24px 30px;
  min-height: 72px;
  cursor: pointer;
}
.side-todos-item::before {
  content: '';
  position: absolute;
  bottom: 0;
  left: 30px;
  right: 30px;
  height: 1px;
  background: #eeeeee;
}
.side-todos-item.normal:hover {
  background: #f6f6f6;
}
.side-todos-item.normal:hover .dot-container {
  opacity: 1;
}
.side-todos-item.normal:hover .side-todos-item-text {
  color: #999;
}
.side-todos-item.normal:focus-within {
  background: #f6f6f6;
}
.side-todos-item.normal:focus-within .dot-container {
  opacity: 1;
}
.side-todos-item.done .side-todos-item-text {
  text-decoration: line-through;
  color: #999;
}
.side-todos-item.done .date {
  color: #999 !important;
}
.side-todos-item .content {
  box-sizing: border-box;
  position: relative;
  display: flex;
  align-items: flex-start;
  cursor: pointer;
}
.side-todos-item .side-todos-item-text {
  font-family: PingFangSC-Regular, PingFang SC;
  box-sizing: border-box;
  flex: 1;
  font-size: 14px;
  color: #333;
  font-weight: 400;
  transition: all 0.1s ease-in-out;
  line-height: 22px;
  margin: 0;
  padding: 0;
  max-width: 300px;
  max-height: 90px;
  word-wrap: break-word;
  word-break: break-all;
}
.side-todos-item .side-todos-item-text.pure-text {
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 4;
  line-clamp: 4;
  -webkit-box-orient: vertical;
}
.side-todos-item .side-todos-item-text.global-scrollbar.edit-text {
  overflow-x: hidden;
  width: 100%;
  cursor: auto;
  outline: none;
  border: none;
  background: none;
  overflow: auto;
  resize: none;
}
.side-todos-item .date {
  display: flex;
  align-items: center;
  position: absolute;
  right: 30px;
  bottom: 8px;
  font-size: 12px;
  color: #333;
  font-weight: 400;
  cursor: default;
}
.side-todos-item .date.red {
  color: #ea4747;
}
.side-todos-item .date > img {
  display: block;
  width: 16px;
  margin-right: 7px;
}
.side-todos-item .date > i {
  font-style: normal;
}
.side-todos-item .dot-container {
  box-sizing: border-box;
  display: flex;
  flex-flow: column;
  align-items: center;
  justify-content: space-around;
  width: 32px;
  height: 32px;
  padding: 6px 0;
  margin-left: 12px;
  border-radius: 4px;
  margin-top: -10px;
  opacity: 0;
  transition: opacity 0.3s;
  outline: none;
}
.side-todos-item .dot-container:hover {
  background: rgba(0, 0, 0, 0.15);
}
.side-todos-item .dot-container:focus,
.side-todos-item .dot-container.active {
  opacity: 1;
  background: rgba(0, 0, 0, 0.15);
}
.side-todos-item .dot-container > span {
  width: 3px;
  height: 3px;
  border-radius: 50%;
  background: #333;
}
.side-todos-item .dot-container ul {
  display: none;
}
.side-todos-lists {
  width: 100%;
  height: auto;
}
`;function Ao(e,t){const i=[];if(void 0===e||void 0===t){const i=new Date;e=i.getFullYear(),t=i.getMonth()+1}const o=new Date(e,t-1,1);let r=o.getDay();0===r&&(r=7),e=o.getFullYear(),t=o.getMonth()+1;const n=new Date(e,t-1,0).getDate(),a=r,s=new Date(e,t,0).getDate();for(let o=0;o<42;o++){const r=o+1-a;let l=r,c=t;r<=0?(c=t-1,l=n+r):r>s&&(c=t+1,l-=s),0===c&&(c=12),13===c&&(c=1),i.push({year:e,month:c,date:r,showDate:l})}return{year:e,month:t,days:i}}var So=i(824),ko=i.n(So),Oo=i(825),Io=i.n(Oo),$o=i(826),Eo=i.n($o),Co=n.b`:host {
  --main-bg-color: #fff;
  --input-color: rgba(0, 0, 0, 0.65);
  --border-color: #c9c9c9;
  --th-color: rgba(0, 0, 0, 0.85);
  --td-color: var(--input-color);
  --td--prevmonth-color: rgba(0, 0, 0, 0.25);
}
.datepicker-wrapper {
  position: relative;
  width: 280px;
  height: 402px;
  background: var(--main-bg-color);
  border-radius: 6px;
}
.datepicker-header {
  padding: 16px;
  padding-bottom: 0;
  border-bottom: 1px solid var(--border-color);
}
.h-container {
  box-sizing: border-box;
  display: flex;
  width: 248px;
  height: 28px;
  border-radius: 4px;
  border: 1px solid var(--border-color);
  background: var(--main-bg-color);
}
.input-control {
  position: relative;
  flex: 1;
}
.icon {
  display: none;
  position: absolute;
  right: 5px;
  top: 3px;
  width: 10px;
  height: 10px;
  cursor: pointer;
}
.icon.show {
  display: block;
}
.icon:hover {
  opacity: 0.5;
}
.icon img {
  width: 100%;
  height: 100%;
}
.spacer {
  width: 1px;
  height: 12px;
  margin-top: 7px;
  background: var(--border-color);
}
input {
  width: 100%;
  height: 100%;
  padding: 10px 16px;
  color: var(--input-color);
  outline: none;
  border: none;
  background: none;
  box-sizing: border-box;
}
.year-month-wrapper {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 14px 0 8px;
}
.arrow {
  cursor: pointer;
}
.arrow img {
  width: 12px;
  height: 12px;
}
.arrow:hover {
  opacity: 0.5;
}
.year-month {
  margin: 0;
  font-size: 14px;
  color: rgba(0, 0, 0, 0.85);
}
.datepicker-body {
  padding: 16px 24px;
  border-bottom: 1px solid var(--border-color);
}
.datepicker-body table {
  width: 100%;
  border-collapse: collapse;
}
.datepicker-body th,
.datepicker-body td {
  height: 33px;
  line-height: 33px;
  text-align: center;
  padding: 0;
}
.datepicker-body th {
  color: var(--th-color);
  font-size: 14px;
  max-width: 34px;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}
.datepicker-body td {
  font-size: 14px;
  cursor: pointer;
  color: var(--td-color);
}
.datepicker-body td.gray {
  color: var(--td--prevmonth-color);
}
.datepicker-body td.today {
  background: #eeeeee;
  border-radius: 2px;
}
.datepicker-body td.active {
  color: #fff;
  background: #333333;
  border-radius: 2px;
}
.datepicker-footer {
  display: flex;
  justify-content: center;
}
infinito-button {
  margin-top: 10px;
  width: 76px;
  height: 32px;
  background: #333333;
  box-shadow: 0px 12px 48px 16px rgba(0, 0, 0, 0.03);
  border-radius: 6px;
  color: #fff;
  outline: none;
  border: none;
  cursor: pointer;
}
.timer-dropdown {
  display: none;
  position: absolute;
  top: 44px;
  right: 16px;
  width: 123px;
  background: #fff;
  box-shadow: 0px 9px 28px 8px rgba(0, 0, 0, 0.05), 0px 6px 16px 0px rgba(0, 0, 0, 0.08), 0px 3px 6px -4px rgba(0, 0, 0, 0.12);
  border-radius: 4px;
}
.timer-dropdown.show {
  display: block;
}
.timer-dropdown .body {
  display: flex;
}
.timer-dropdown .body .time-range-wrapper {
  box-sizing: border-box;
  flex: 1;
  height: 196px;
  overflow: auto;
}
.timer-dropdown .body .time-range-wrapper > div::after {
  content: '';
  display: block;
  height: 164px;
}
.timer-dropdown .body .time-range-wrapper .range-item {
  height: 32px;
  font-size: 14px;
  line-height: 32px;
  padding-left: 16px;
  color: var(--td-color);
  transition: all 300ms ease-in-out;
  cursor: pointer;
  text-align: center;
  padding-left: 5px;
  box-sizing: border-box;
}
.timer-dropdown .body .time-range-wrapper .range-item.active {
  background: #f5f5f5;
}
.timer-dropdown .body .time-range-wrapper .range-item:hover {
  background: #f6f6f6;
}
.timer-dropdown .body .space {
  width: 1px;
  height: 196px;
  background: #efefef;
}
.timer-dropdown .header {
  box-sizing: border-box;
  display: flex;
  height: 38px;
  text-align: center;
  font-size: 14px;
  font-weight: 400;
  line-height: 38px;
  color: rgba(0, 0, 0, 0.65);
  border-bottom: 1px solid #efefef;
}
.timer-dropdown .header .h-item {
  flex: 1;
}
`,To=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let jo=class extends n.a{constructor(){super(...arguments),this.HEIGHT=32,this.monthData={},this.choosedDate="",this.choosedTime="",this.choosedHour="",this.choosedMins="",this.showTime=!1,this.hours=[],this.mins=[],this.defaultDates={},this.showClearTime=!1}firstUpdated(){this.monthData=Ao(),this.datepickerWrapper.addEventListener("click",e=>{e.stopPropagation(),this.showTime=!1},!1);const{date:e,time:t,dueTimestamp:i}=this.defaultDates;if(this.choosedDate=e||this.format(new Date),this.choosedTime=t||"",this.choosedTime){const[e,t]=this.choosedTime.split(":");this.choosedHour=e,this.choosedMins=t}if(i)this.date=new Date(i);else{const t=c.a.internaDateToStan(e);t instanceof Date&&(this.date=new Date(t.getFullYear(),t.getMonth(),t.getDate(),+this.choosedHour,+this.choosedMins))}}updated(){const e=this.timeInput.value;this.showClearTime=!!e}setDefaultHour(){const e=(new Date).getHours();return e<=9?"0"+e:e}setDefaultMin(){const e=(new Date).getMinutes();return e<=9?"0"+e:e}async chooseTime(e){if(e.stopPropagation(),!this.choosedDate)return;this.showTime=!this.showTime;const{hours:t,mins:i}=function(){const e=[],t=[];for(let t=0;t<24;t++){const i=t<10?"0"+t:t;e.push(i)}for(let e=0;e<60;e++){const i=e<10?"0"+e:e;t.push(i)}return{hours:e,mins:t}}();this.hours=t,this.mins=i,this.choosedTime||(this.choosedHour=this.setDefaultHour()+"",this.choosedMins=this.setDefaultMin()+"",this.choosedTime=`${this.choosedHour}:${this.choosedMins}`,this.timeInput.value=this.choosedTime),await this.updateComplete,this.hoursPanel.scrollTop=Number(this.choosedHour)*this.HEIGHT,this.minsPanel.scrollTop=Number(this.choosedMins)*this.HEIGHT}selectHour(e,t){if(e.stopPropagation(),this.choosedHour=t,this.choosedTime){const e=this.choosedTime.split(":")[1];this.choosedTime=`${t}:${e}`,this.timeInput.value=`${t}:${e}`}else this.choosedTime=`${t}:${this.choosedMins}`,this.timeInput.value=`${t}:${this.choosedMins}`;this.hoursPanel.scrollTop=Number(t)*this.HEIGHT}selectMins(e,t){e.stopPropagation(),this.choosedMins=t,this.choosedTime=`${this.choosedHour}:${t}`,this.timeInput.value=`${this.choosedHour}:${t}`,this.minsPanel.scrollTop=Number(t)*this.HEIGHT,this.showTime=!1}listToMatrix(e,t){const i=[];for(let o=0,r=-1;o<e.length;o++)o%t==0&&(r++,i[r]=[]),i[r].push(e[o]);return i}format(e){return new Date(e).toLocaleDateString(l.D.lang)}changeMonth(e){const{monthData:{year:t,month:i}}=this;this.monthData=Ao(t,"prev"===e?i-1:i+1)}handleClick(e){const{classList:t,dataset:i}=e.target,o=this.shadowRoot.querySelectorAll("td");Array.from(o).map(e=>e.classList.remove("active")),t.add("active");const{monthData:{year:r,month:n}}=this,a=new Date(r,n-1,i.date);this.choosedDate=this.format(a),this.monthData.date=i.date}submit(e){e.stopPropagation(),void 0===this.monthData.date&&(this.monthData.date=(new Date).getDate()),this.choosedHour||(this.choosedHour=String(9));const t=new Date(this.monthData.year,this.monthData.month-1,this.monthData.date,+this.choosedHour,+this.choosedMins).valueOf();this.dispatchEvent(new CustomEvent("on-submit",{detail:{data:t},bubbles:!0,composed:!0}))}setClasses(e,t){const i=e=>e<=9?"0"+e:e;let{month:o,showDate:r}=t;o=i(o),r=i(r);const n=t.date<=0?t.year-1:t.year;let a=!1,s=!1;const l=c.a.internaDateToStan(e);l instanceof Date&&(a=Number(n)===l.getFullYear()&&Number(o)===l.getMonth()+1&&Number(r)===l.getDate());const d=new Date;s=Number(n)===d.getFullYear()&&Number(o)===d.getMonth()+1&&Number(r)===d.getDate();return{active:a,today:s}}render(){const{choosedDate:e,choosedTime:t,monthData:{year:i="",month:o="",days:r=[]},showTime:a,hours:s,mins:l}=this,c=this.listToMatrix(r,7);return n.e`
      <div class="datepicker-wrapper">
        <div class="datepicker-header">
          <div class="h-container">
            <div class="input-control">
              <input name="date" placeholder="${Object(J.i18n)("select_date")}" readonly value="${e}" />
              <div
                class="icon ${e?"show":""}"
                @click="${e=>{e.stopPropagation(),this.choosedDate="",this.choosedTime="",this.showTime=!1,this.choosedHour=this.setDefaultHour()+"",this.choosedMins=this.setDefaultMin()+"",this.timeInput.value=""}}"
              >
                <img src="${Eo.a}" />
              </div>
            </div>
            <div class="spacer"></div>
            <div class="input-control" @click="${e=>this.chooseTime(e)}">
              <input readonly id="timeInput" placeholder="${Object(J.i18n)("select_time")}" value="${t}" />
              <div
                class="icon ${this.showClearTime?"show":""}"
                @click=${e=>{e.stopPropagation(),this.choosedTime="",this.choosedHour=this.setDefaultHour()+"",this.choosedMins=this.setDefaultMin()+"",this.timeInput.value="",this.showClearTime=!1}}
              >
                <img src="${Eo.a}" />
              </div>
            </div>
          </div>
          <div class="year-month-wrapper">
            <div class="arrow left-arrow" @click="${()=>this.changeMonth("prev")}">
              <img src="${ko.a}" />
            </div>
            <div class="t">
              <h2 class="year-month">${Object(J.i18n)("year_month_date",[i,Object(J.i18n)("month_"+o)])}</h2>
            </div>
            <div class="arrow right-arrow" @click="${()=>this.changeMonth("next")}">
              <img src="${Io.a}" />
            </div>
          </div>
        </div>
        <div class="datepicker-body">
          <table>
            <thead>
              <tr>
                <th title="${Object(J.i18n)("sun_min")}">${Object(J.i18n)("sun_min")}</th>
                <th title="${Object(J.i18n)("mon_min")}">${Object(J.i18n)("mon_min")}</th>
                <th title="${Object(J.i18n)("tue_min")}">${Object(J.i18n)("tue_min")}</th>
                <th title="${Object(J.i18n)("wed_min")}">${Object(J.i18n)("wed_min")}</th>
                <th title="${Object(J.i18n)("thu_min")}">${Object(J.i18n)("thu_min")}</th>
                <th title="${Object(J.i18n)("fri_min")}">${Object(J.i18n)("fri_min")}</th>
                <th title="${Object(J.i18n)("sat_min")}">${Object(J.i18n)("sat_min")}</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              ${c.length?c.map(t=>n.e`<tr>
                      ${t.map(t=>n.e`<td
                          data-date="${t.date}"
                          class="? 'today' : ''}"
                          class=${Object(K.a)(this.setClasses(e,t))}
                          @click="${e=>this.handleClick(e)}"
                        >
                          ${t.showDate}
                        </td>`)}
                    </tr>`):""}
            </tbody>
          </table>
        </div>
        <div class="datepicker-footer">
          <infinito-button primary @click="${e=>this.submit(e)}">${Object(J.i18n)("done")}</infinito-button>
        </div>
        ${n.e`
          <div
            class=${Object(K.a)({"timer-dropdown":!0,show:a})}
          >
            <div class="header">
              <div class="h-item">${Object(J.i18n)("hour")}</div>
              <div class="h-item">${Object(J.i18n)("mins")}</div>
            </div>
            <div class="body">
              <div class="global-scrollbar time-range-wrapper hours-panel">
                <div>
                  ${s.length?s.map(e=>n.e` <div
                          class=${Object(K.a)({"range-item":!0,active:Number(e)===Number(this.choosedHour)})}
                          @click="${t=>this.selectHour(t,e)}"
                        >
                          ${e}
                        </div>`):""}
                </div>
              </div>
              <div class="space"></div>
              <div class="global-scrollbar time-range-wrapper mins-panel">
                <div>
                  ${l.length?l.map(e=>n.e` <div
                          class=${Object(K.a)({"range-item":!0,active:Number(e)===Number(this.choosedMins)})}
                          @click="${t=>this.selectMins(t,e)}"
                        >
                          ${e}
                        </div>`):""}
                </div>
              </div>
            </div>
          </div>
        `}
      </div>
    `}};jo.styles=[k.a,Co],To([Object(n.h)(".datepicker-wrapper")],jo.prototype,"datepickerWrapper",void 0),To([Object(n.h)("#timeInput")],jo.prototype,"timeInput",void 0),To([Object(n.h)(".hours-panel")],jo.prototype,"hoursPanel",void 0),To([Object(n.h)(".mins-panel")],jo.prototype,"minsPanel",void 0),To([Object(n.g)({type:Object})],jo.prototype,"monthData",void 0),To([Object(n.g)({type:String})],jo.prototype,"choosedDate",void 0),To([Object(n.g)({type:String})],jo.prototype,"choosedTime",void 0),To([Object(n.g)({type:String})],jo.prototype,"choosedHour",void 0),To([Object(n.g)({type:String})],jo.prototype,"choosedMins",void 0),To([Object(n.g)({type:Boolean})],jo.prototype,"showTime",void 0),To([Object(n.g)({type:Array})],jo.prototype,"hours",void 0),To([Object(n.g)({type:Array})],jo.prototype,"mins",void 0),To([Object(n.g)({type:Object})],jo.prototype,"defaultDates",void 0),To([Object(n.g)({type:Boolean})],jo.prototype,"showClearTime",void 0),To([Object(n.f)()],jo.prototype,"date",void 0),jo=To([Object(n.c)("i-datepicker")],jo);var Po=i(777),Ro=i.n(Po),Lo=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let No=class extends n.a{constructor(){super(...arguments),this.isShowClear=!1}firstUpdated(){this.submit()}submit(){this.inputEle.addEventListener("keypress",e=>{13===e.keyCode&&(this.add(this.inputEle.value),this.inputEle.value="",this.isShowClear=!1)},!1)}add(e){this.dispatchEvent(new CustomEvent("on-submit",{detail:{text:e},bubbles:!0,composed:!0}))}focusing(e=!0){e&&this.inputEle.focus()}clear(e){this.inputEle.value="",this.focusing(e),this.isShowClear=!1}handleChange(e){e.target.value?this.isShowClear=!0:this.isShowClear=!1}render(){return n.e`
      <div class="side-todos-input-wrapper">
        <input
          placeholder="${Object(J.i18n)("use_entry_key_add_todo_item")}"
          class="side-todos-input"
          maxlength="1000"
          @input=${this.handleChange}
        />
        ${this.isShowClear?n.e`
              <div class="icon">
                <img class="clear-icon" .src=${Ro.a} @click=${()=>this.clear(!0)} />
              </div>
            `:null}
      </div>
    `}};No.styles=_o,Lo([Object(n.g)({type:Boolean})],No.prototype,"isShowClear",void 0),Lo([Object(n.h)("input")],No.prototype,"inputEle",void 0),No=Lo([Object(n.c)("side-todo-input")],No);var Mo=i(827),Do=i.n(Mo),Uo=i(828),Bo=i.n(Uo),Fo=i(520),zo=n.b`.container {
  height: 100%;
  z-index: 100001;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.8);
  display: flex;
  flex-flow: column;
  justify-content: center;
  align-items: center;
}
.container[hidden] {
  display: none;
}
.container .top,
.container .bottom {
  flex-grow: 1;
}
.container .bottom {
  height: var(--modal-top, 15vh);
}
.body {
  width: 478px;
  padding: 30px;
  padding-bottom: 25px;
  box-sizing: border-box;
  background: #ffffff;
  box-shadow: 0px 2px 10px 0px rgba(0, 0, 0, 0.18);
  border-radius: 6px;
  position: relative;
  will-change: transform;
}
.body .close {
  position: absolute;
  right: 20px;
  top: 20px;
  cursor: pointer;
  transition: opacity 0.3s;
  opacity: 0.2;
}
.body .close:hover {
  opacity: 0.4;
}
.title,
.text {
  text-align: center;
  font-size: 14px;
  font-weight: 400;
  color: #333333;
  line-height: 24px;
}
.title {
  font-size: 13px;
  font-weight: 400;
  margin-bottom: 8px;
  color: #333;
}
.text {
  font-size: 11px;
  font-weight: 400;
  color: #ec414d;
  line-height: 20px;
  vertical-align: middle;
}
.text img {
  width: 14px;
  height: 14px;
  vertical-align: middle;
}
.footer {
  margin-top: 24px;
  display: flex;
  justify-content: center;
}
.footer infinito-button {
  width: 120px;
  height: 42px;
  --hover-color: #eee;
  --hover-font-color: #000;
}
.footer infinito-button[primary] {
  --hover-color: #000;
  --hover-font-color: #fff;
  width: 128px;
}
.footer infinito-button:not(:last-of-type) {
  margin-right: 20px;
}
`,Ho=i(829),Wo=i.n(Ho),Go=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let Vo=null,qo=class extends n.a{constructor(){super(...arguments),this.defaultData={title:i18n("no_permission_title"),text:i18n("no_permission_text"),onConfirm:()=>{}},this.show=!1,this.title=this.defaultData.title,this.text=this.defaultData.text,this.onCancel=()=>{},this.onConfirm=()=>{}}static create(){if(Vo)return Vo;const e=document.body;return Vo=document.createElement("i-permission-popup"),e.appendChild(Vo),Vo}shouldUpdate(e){return!e.has("show")||!1!==this.show||(setTimeout(()=>{this.requestUpdate()},1),!1)}updated(e){e.has("show")&&this.show&&(this.$container.animate([{opacity:"0"},{opacity:"1"}],{duration:300,easing:"ease-in"}),this.$body.animate([{opacity:"0",transform:"scale(0.8)"},{opacity:"1",transform:"none"}],{duration:300,easing:"ease-in"}))}toShow(e){this.show=!0;const t=Object.assign(Object.assign({},this.defaultData),e);this.title=t.title,this.text=t.text,this.onCancel=t.onCancel,this.onConfirm=t.onConfirm}toHide(){this.show=!1}render(){return n.e`
      <div class="container" .hidden="${!this.show}">
        <div class="top"></div>
        <section class="body">
          <span class="close" @click=${()=>this.toHide()}>
            <svg width="14px" height="14px" viewBox="0 0 14 14">
              <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" opacity="1">
                <g transform="translate(-1086.000000, -226.000000)" fill="#333333" fill-rule="nonzero">
                  <g transform="translate(320.000000, 206.000000)">
                    <g>
                      <g transform="translate(766.000000, 20.000000)">
                        <g>
                          <path
                            d="M13.2303076,0.802251953 C12.8052342,0.377204963 12.1160812,0.377207829 11.6910113,0.802258354 L7.05672461,5.43633398 L7.05672461,5.43633398 L2.38977766,0.769621758 C1.96470002,0.344565503 1.27553537,0.344566517 0.850458984,0.769624023 C0.425408624,1.19465551 0.425393322,1.883783 0.850424806,2.30883336 C0.850436954,2.30884551 0.850449102,2.30885766 0.85046125,2.3088698 L5.5174082,6.97558203 L5.5174082,6.97558203 L0.866831437,11.6259476 C0.441760949,12.0509988 0.441745304,12.7401586 0.866796493,13.1652291 C0.866798899,13.1652315 0.866801305,13.1652339 0.866803711,13.1652363 C1.29186357,13.5903075 1.98103035,13.5903186 2.40610392,13.1652611 L7.05671094,8.51483008 L7.05671094,8.51483008 L11.6909746,13.1489765 C12.1160521,13.5740432 12.8052287,13.5740389 13.2303008,13.1489668 C13.6553632,12.7239044 13.6553632,12.034742 13.2303008,11.6096796 C13.2302959,11.6096747 13.230291,11.6096699 13.2302862,11.609665 L8.59602734,6.97558203 L8.59602734,6.97558203 L13.2303169,2.34146831 C13.6553572,1.91644415 13.6553703,1.22733077 13.2303461,0.802290481 C13.2303333,0.802277638 13.2303205,0.802264795 13.2303076,0.802251953 Z"
                          ></path>
                        </g>
                      </g>
                    </g>
                  </g>
                </g>
              </g>
            </svg>
          </span>

          <div class="title">${this.title}</div>
          <div class="text">
            <img src=${Wo.a} width="14" />
            <span>${this.text}</span>
          </div>
          <div class="footer">
            <infinito-button
              @click="${()=>{this.toHide(),this.onConfirm()}}"
              primary
              >${i18n("confirm")}</infinito-button
            >
          </div>
        </section>
        <div class="bottom"></div>
      </div>
    `}};qo.styles=zo,Go([Object(n.g)({type:Boolean})],qo.prototype,"show",void 0),Go([Object(n.g)({type:String})],qo.prototype,"title",void 0),Go([Object(n.g)({type:String})],qo.prototype,"text",void 0),Go([Object(n.g)({attribute:!1})],qo.prototype,"onCancel",void 0),Go([Object(n.g)({attribute:!1})],qo.prototype,"onConfirm",void 0),Go([Object(n.h)(".container")],qo.prototype,"$container",void 0),Go([Object(n.h)(".body")],qo.prototype,"$body",void 0),qo=Go([Object(n.c)("i-permission-popup")],qo);var Yo=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let Qo=class extends a.a{constructor(){super(...arguments),this.store=s.todoStore,this.timer=null,this.MAX_LENGTH=1e3,this.isExpired=!1,this.data={},this.index=0}handleDotClick(e){e.stopPropagation();const t=document.createElement("div");t.className="dot-wrapper";const i=document.createElement("div");i.className="infinity-modal";const o=e.currentTarget.querySelector("ul").cloneNode(!0);if(this.dotEle.classList.add("active"),t.appendChild(i),t.appendChild(o),document.body.appendChild(t),"DIV"===e.currentTarget.tagName){const t=e.currentTarget.getBoundingClientRect(),{bottom:i,right:r,top:n}=t,a=window.innerWidth,l=document.body.clientHeight;o.style.right=a-r+"px";const c=o.clientHeight,d=this.dotEle.clientHeight*s.settingStore.sideScaleRatio;o.style.top=n+c+d>=l?n-c+"px":i+"px"}o.addEventListener("click",async e=>{const i=e.target;if("LI"===i.tagName){const e=i.classList;if(document.body.removeChild(t),this.dotEle.classList.remove("active"),e.contains("edit")&&this.handleEdit(),e.contains("delete")&&this.delete(),e.contains("show")){if("denied"===Notification.permission)return void qo.create().toShow();await Object(Fo.a)(),Object(x.i)(()=>{s.settingStore.permission.todoNotice=1,s.settingStore.permission.gmailNotice=1}),this.dotEle.focus(),this.showDate()}e.contains("remove")&&this.remove()}}),i.addEventListener("click",()=>{this.dotEle.classList.remove("active"),document.body.removeChild(t)})}firstUpdated(){this.invalidTime()}startSchedule(){const{dueDate:e="",done:t}=this.data;e&&!t&&(this.timer=setInterval(()=>{this.invalidTime()},2e3))}removeSchedule(){clearInterval(this.timer)}updated(){var e;this.checkboxEle.checked=null===(e=this.data)||void 0===e?void 0:e.done,this.invalidTime()}invalidTime(){const{dueDate:e="",dueTime:t="",done:i,dueTimestamp:o=null}=this.data;if(i||!e)return;const r=t||"23:59";let n=!1;const a=+new Date;let s;if("number"==typeof o)s=o;else{const t=c.a.internaDateToStan(e);if(t instanceof Date){const[e,i]=r.split(":");s=+new Date(t.getFullYear(),t.getMonth(),t.getDate(),e,i)}}n=s<a,this.isExpired=n}renderCheckbox(){const e=this.data.done;return n.e`
      <span class=${Object(K.a)({"i-checkbox":!0,"i-checkbox-checked":e})}>
        <input
          type="checkbox"
          class="i-checkbox-input"
          .checked=${e}
          @change=${this.handleCheckbox}
          @click=${e=>e.stopPropagation()}
        />
      </span>
    `}renderDot(){const{done:e,dueDate:t=""}=this.data;return n.e`
      <div class="dot-container" @click=${this.handleDotClick} tabindex="0">
        <span></span>
        <span></span>
        <span></span>
        <ul class="dot-ul">
          ${e?null:n.e`
                <li class="opt-item show" @click=${this.showDate}>
                  ${t?i18n("change_remind_time"):i18n("set_remind_time")}
                </li>
                ${t?n.e`<li class="opt-item remove" @click=${this.remove}>${i18n("cancel_remind_time")}</li>`:null}
                <li class="opt-item edit" @click=${this.handleEdit}>${i18n("edit_content")}</li>
              `}
          <li class="opt-item delete" @click=${this.delete}>${i18n("del_folder")}</li>
        </ul>
      </div>
    `}renderDate(){const{dueDate:e="",dueTime:t=""}=this.data;return e||t?n.e`
        <span class=${Object(K.a)({date:!0,red:this.isExpired})} @click=${e=>e.stopPropagation()}>
          <img src="${Bo.a}" />
          <i>${this.data.dueDate} ${this.data.dueTime}</i>
        </span>
      `:n.e``}render(){const{done:e,edit:t,text:i}=this.data,o={"side-todos-item":!0,done:e,edit:t,normal:!t};return n.e`
      ${t?n.e`
            <div class=${Object(K.a)(o)}>
              <div class="content">
                ${this.renderCheckbox()}
                <textarea
                  class="global-scrollbar side-todos-item-text edit-text"
                  @blur=${this.handleBlur}
                  @keydown=${this.handleKeyDown}
                  @keypress=${this.handleKeyPress}
                  @paste=${this.handleEditorPaste}
                  @click=${e=>e.stopPropagation()}
                >
${i}</textarea
                >
                ${this.renderDot()}
              </div>
              ${this.renderDate()}
            </div>
          `:n.e`
            <div class=${Object(K.a)(o)} @click=${this.toggle}>
              <div class="content">
                ${this.renderCheckbox()}
                <div class="side-todos-item-text pure-text">${i}</div>
                ${this.renderDot()}
              </div>
              ${this.renderDate()}
            </div>
          `}
    `}async handleEdit(){const e=this.textEle.clientHeight;this.store.edit(this.data.todoId),await this.updateComplete;const t=await this.editEle;if(t){if(t.style.height=e+10+"px",t.focus(),t.setSelectionRange){const e=2*t.value.length;setTimeout(()=>t.setSelectionRange(e,e),1)}else this.editEle.value=t.value;t.scrollTop=999999}}handleBlur(e){const t=e.target.value;t?(this.store.updateTodo(this.data.todoId,{text:t}),this.store.toggleState("done")):this.store.deleteTodo(this.data.todoId)}handleKeyDown(e){e.stopPropagation(),13!==e.keyCode&&27!==e.keyCode||(e.preventDefault(),this.store.updateTodo(this.data.todoId,{text:e.target.value}),this.store.toggleState("done"))}handleKeyPress(e){const t=e.target.value;if((null==t?void 0:t.length)>this.MAX_LENGTH)return se.message.error(i18n("limit_input_length")),e.stopPropagation(),e.preventDefault(),!1;e.stopPropagation(),Do()(e.target),this.store.toggleState("editing")}handleEditorPaste(e){const t=e.target.value,i=(e.originalEvent||e).clipboardData.getData("text/plain");if((null==t?void 0:t.length)+(null==i?void 0:i.length)>this.MAX_LENGTH){se.message.error(i18n("limit_input_length")),e.stopPropagation(),e.preventDefault();const o=t+i;return e.target.value=o.substring(0,this.MAX_LENGTH),!1}e.stopPropagation(),Do()(e.target),this.store.toggleState("editing")}showDate(){const e=document.createElement("div");e.className="dot-wrapper";const t=document.createElement("div");t.className="infinity-modal";const i=document.createElement("todo-tooltip");e.appendChild(t),e.appendChild(i),document.body.appendChild(e);const o=this.dotEle.getBoundingClientRect(),{top:r,left:n,width:a,height:s}=o;i.setAttribute("rect",JSON.stringify({top:r,left:n,width:a,height:s}));const{dueDate:l="",dueTime:c="",todoId:d,dueTimestamp:p}=this.data;i.setAttribute("time",JSON.stringify({dueDate:l,dueTime:c,dueTimestamp:p})),i.setAttribute("todoId",d),t.addEventListener("click",()=>document.body.removeChild(e))}remove(){this.store.removeTime(this.data.todoId)}delete(){this.store.deleteTodo(this.data.todoId)}handleCheckbox(){this.store.toggleTodo(this.data.todoId)}toggle(){"editing"!==this.store.currenetState&&this.handleCheckbox()}};Qo.styles=[k.a,_o],Yo([Object(n.j)(".edit-text")],Qo.prototype,"editEle",void 0),Yo([Object(n.h)(".dot-container")],Qo.prototype,"dotEle",void 0),Yo([Object(n.h)(".i-checkbox-input")],Qo.prototype,"checkboxEle",void 0),Yo([Object(n.h)(".side-todos-item")],Qo.prototype,"todoItemEle",void 0),Yo([Object(n.h)(".side-todos-item-text")],Qo.prototype,"textEle",void 0),Yo([Object(n.g)({type:Boolean})],Qo.prototype,"isExpired",void 0),Yo([Object(n.g)({type:Object})],Qo.prototype,"data",void 0),Yo([Object(n.g)({type:Number})],Qo.prototype,"index",void 0),Qo=Yo([Object(n.c)("side-todo-item")],Qo);var Xo=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let Ko=class extends n.a{render(){return n.e`
      <div class="side-todos-tips">
        <img src="${lo.a}" alt="${Object(J.i18n)("no_reminders")}" />
        <p>${Object(J.i18n)("current_no_reminders")}</p>
        <p>${Object(J.i18n)("enter_key_to_input_reminders")}</p>
      </div>
    `}};Ko.styles=n.b`
    .side-todos-tips {
      margin: 80px 0;
      text-align: center;
    }
    img {
      width: 40px;
      height: 40px;
      margin-bottom: 20px;
    }
    p {
      margin: 0;
      line-height: 22px;
      color: rgba(101,101,101,1);
    }
  `,Ko=Xo([Object(n.c)("side-todo-empty")],Ko);var Zo=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let Jo=class extends n.a{render(){const{dueDate:e="",dueTime:t="",dueTimestamp:i}=JSON.parse(this.time);return n.e`
      <div class="wrapper">
        <div class="arrow"></div>
        <i-datepicker
          defaultDates=${JSON.stringify({date:e,time:t,dueTimestamp:i})}
          @on-submit="${e=>this.settingTime(e.detail)}"
        ></i-datepicker>
      </div>
    `}firstUpdated(){this.initPosition()}settingTime({data:e}){const t=new Date(e),i=t.toLocaleDateString(l.D.lang),o=`${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`,r={todoId:this.todoId,dueDate:i,dueTime:o,dueTimestamp:e};s.todoStore.updateTodo(this.todoId,r);const n=document.querySelector(".dot-wrapper");n&&document.body.removeChild(n)}initPosition(){if(this.rect){const e=JSON.parse(this.rect),{top:t,left:i,width:o,height:r}=e,n=window.innerWidth,a=document.body.clientHeight,s=20;this.arrowDiv.style.top=t-s/2+o/2+"px",this.arrowDiv.style.right=n-i+"px";const l=this.clientHeight;if(this.style.right=n-i+s+"px",t+l/2>=a)this.style.bottom="0px";else{const e=t+r/2-l/2;this.style.top=e<=0?"0px":e+"px"}}}};Jo.styles=n.b`
    :host {
      position: absolute;
      z-index: 10000;
      display: block;
      width: 280px;
      height: 402px;
    }
    .wrapper {
      background: #fff;
      border-radius: 6px;
      box-shadow: 0px 12px 48px 16px rgba(0, 0, 0, 0.03), 0px 9px 28px 8px rgba(0, 0, 0, 0.05),
        0px 6px 16px 0px rgba(0, 0, 0, 0.08), 0px 3px 6px -4px rgba(0, 0, 0, 0.12);
      z-index: 1000;
    }
    .arrow {
      position: fixed;
      z-index: 1000;
      width: 0;
      height: 0;
      border: 10px solid transparent;
      border-left-color: #fff;
    }
  `,Zo([Object(n.h)(".arrow")],Jo.prototype,"arrowDiv",void 0),Zo([Object(n.g)({type:String,reflect:!0})],Jo.prototype,"rect",void 0),Zo([Object(n.g)({type:String,reflect:!0})],Jo.prototype,"time",void 0),Zo([Object(n.g)({type:String,reflect:!0})],Jo.prototype,"todoId",void 0),Jo=Zo([Object(n.c)("todo-tooltip")],Jo);var er=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let tr=class extends n.a{emit(e){this.dispatchEvent(new CustomEvent(e,{bubbles:!0,composed:!0}))}render(){return n.e`
      <div class="wrapper">
        <p>${i18n("confirm_delete_done_todos")}</p>
        <div class="btns">
          <infinito-button @click=${()=>this.emit("cancel")}> ${i18n("cancel")} </infinito-button>
          <infinito-button primary class="ok" @click=${()=>this.emit("ok")}> ${i18n("confirm")} </infinito-button>
        </div>
      </div>
    `}};tr.styles=n.b`
    infinito-button {
      width: 120px;
      height: 42px;
      line-height: 42px;
      font-weight: 500;
      border-radius: 4px;
      transition: opacity 300ms ease 0s;
    }
    infinito-button:not(:last-child) {
      margin-right: 16px;
    }
    .wrapper {
      width: 300px;
    }
    .btns {
      display: flex;
      justify-content: center;
      margin-top: 40px;
    }
    p {
      margin: 10px 0;
      text-align: center;
    }
  `,tr=er([Object(n.c)("todo-delete-tips")],tr);var ir=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let or=class extends a.a{constructor(){super(...arguments),this.store=s.todoStore,this.deleteModal=!1,this.cancelDelete=()=>{this.deleteModal=!1}}handleAddTodo({text:e}){const t=e.substring(0,200);this.store.addTodo(t)}afterShow(){this.handleTabOpend()}handleTabOpend(){this.inputEle.focusing(),this.$todoItem.forEach(e=>{e.invalidTime(),e.startSchedule()})}handleTabClose(){this.$todoItem.forEach(e=>{e.removeSchedule()}),this.inputEle.clear(!1)}afterHide(){this.handleTabClose()}render(){const{store:{hasDoneTodo:e,todoList:t}}=this;return n.e`
      <i-side2-header .title="${Object(J.i18n)("todos")}"></i-side2-header>
      <div class="side-todos-container">
        <div class="up">
          <side-todo-input @on-submit="${e=>this.handleAddTodo(e.detail)}"></side-todo-input>
          <div class="side-todos-remove">
            <button class="${e?"allow":""}" @click="${this.remove}">${Object(J.i18n)("remove_done")}</button>
          </div>
        </div>
        <div class="global-scrollbar list">
          <div class="side-todos-lists">
            ${t.length?t.map((e,t)=>n.e` <side-todo-item .data=${e} .index=${t}> </side-todo-item> `):n.e`<side-todo-empty></side-todo-empty>`}
          </div>
        </div>
      </div>
      <infinito-portal-entrance destination="delete-todo-modal">
        <infinito-modal
          style="--modal-padding: 30px; --modal-top: 30vh;"
          ?open=${this.deleteModal}
          .closeable=${!1}
          .onCancel=${this.cancelDelete}
        >
          <todo-delete-tips slot="body" @ok=${this.confirmDelete} @cancel=${this.cancelDelete}> </todo-delete-tips>
        </infinito-modal>
      </infinito-portal-entrance>
    `}remove(){this.store.hasDoneTodo&&(this.deleteModal=!0)}confirmDelete(){this.deleteModal=!1,this.store.removeTodo()}};or.styles=[k.a,_o,n.b`
      :host {
        display: block;
        height: 100%;
        background-color: #fff;
      }
    `],ir([Object(n.g)({type:Boolean})],or.prototype,"deleteModal",void 0),ir([Object(n.h)("side-todo-input")],or.prototype,"inputEle",void 0),ir([Object(n.i)("side-todo-item")],or.prototype,"$todoItem",void 0),or=ir([Object(n.c)("side-todos")],or);var rr=i(123),nr=i.n(rr),ar=i(55),sr=i.n(ar);function lr(e,t){return!(e!==t&&!e.contains(t))}function cr(e){return e&&e.replace(/&nbsp;|\u202F|\u00A0/g," ")}var dr=i(830),pr=i.n(dr),hr=n.b`:host {
  --border-color: #ededed;
}
/* side-notes-list */
.side-notes-list {
  height: calc(100% - 55px);
}
/* side-notes-item */
.note-item {
  position: relative;
  padding-left: 30px;
  height: 80px;
  background: #fff;
  z-index: 1;
  cursor: pointer;
}
.note-item.active {
  z-index: 2;
  background-color: #f9f9f9;
}
.note-item.active .border {
  border-color: #fff;
}
.note-item .sticky-tag {
  position: absolute;
  top: 0;
  left: 8px;
  width: 12px;
  height: 16px;
}
.note-item .border {
  box-sizing: border-box;
  display: flex;
  align-items: center;
  height: 100%;
  border-bottom: 1px solid #eeeeee;
}
.note-item .header {
  flex: 1;
  width: 3px;
}
.note-item .title {
  margin: 0;
  margin-bottom: 6px;
  font-size: 16px;
  color: #333;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.note-item .date {
  margin: 0;
  font-size: 12px;
  color: #999999;
}
/* note-editor */
.note-editor {
  display: flex;
  flex-direction: column;
  height: 100%;
}
.note-editor .main-body {
  box-sizing: border-box;
  display: flex;
  flex-flow: column;
  flex: 1;
  height: 0;
  height: 100%;
  padding: 20px 0;
  padding-bottom: 0;
  overflow: hidden;
}
.note-editor .main-body .time {
  margin-top: 0;
  margin-bottom: 15px;
  font-size: 12px;
  text-align: center;
  color: #999999;
}
.note-editor .edit-area {
  flex: 1;
  height: 0;
  display: flex;
  flex-flow: column;
  overflow: hidden;
}
.note-editor .edit-area .edit-wrapper {
  flex: 1;
  padding-left: 30px;
  margin-top: 10px;
}
.note-editor .btns {
  display: flex;
  justify-content: space-between;
  margin-top: 60px;
}
.note-editor button {
  padding: 0;
  margin: 0;
  width: 155px;
  height: 52px;
  border: 1px solid #333333;
  border-radius: 4px;
  outline: none;
  background: none;
  font-size: 16px;
  cursor: pointer;
  transition: all 300ms;
}
.note-editor button.primary {
  background: #333333;
  color: #fff;
}
.note-editor button:hover {
  opacity: 0.9;
}
.note-item:hover i-dot-expanded {
  opacity: 1;
}
i-dot-expanded {
  width: 32px;
  --dot-hover: rgba(0, 0, 0, 0.15);
  opacity: 0;
  outline: none;
  transition: opacity 0.3s;
  display: block;
  margin-right: 12px;
}
`,ur=i(831),gr=i.n(ur),fr=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let mr=class extends n.a{emit(e){this.dispatchEvent(new CustomEvent(e,{bubbles:!0,composed:!0}))}render(){return n.e`
      <div class="wrapper">
        <p>${i18n("confirm_delete_note")}</p>
        <div class="btns">
          <infinito-button @click=${()=>this.emit("cancel")}> ${i18n("cancel")} </infinito-button>
          <infinito-button primary class="ok" @click=${()=>this.emit("ok")}> ${i18n("confirm")} </infinito-button>
        </div>
      </div>
    `}};mr.styles=n.b`
    infinito-button {
      width: 120px;
      height: 42px;
      line-height: 42px;
      font-weight: 500;
      border-radius: 4px;
      transition: opacity 300ms ease 0s;
    }
    infinito-button:not(:last-child) {
      margin-right: 16px;
    }
    .wrapper {
      width: 300px;
    }
    .btns {
      display: flex;
      justify-content: center;
      margin-top: 40px;
    }
    p {
      margin: 10px 0;
      text-align: center;
    }
  `,mr=fr([Object(n.c)("note-delete-tips")],mr);var br=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let yr=class extends a.a{constructor(){super(...arguments),this.store=s.noteStore,this.data={}}check(e,t){e.stopPropagation(),this.store.updateId(t),this.dispatchEvent(new CustomEvent("check",{bubbles:!0,composed:!0}))}delete(){this.dispatchEvent(new CustomEvent("delete",{detail:{id:this.data.id},bubbles:!0,composed:!0}))}_formatTime(e){return c.a.fmtTime(e,{month:"long",day:"2-digit"})}setTop(){this.dispatchEvent(new CustomEvent("set-top",{detail:{id:this.data.id},bubbles:!0,composed:!0}))}cancelSetTop(){this.dispatchEvent(new CustomEvent("cancel-set-top",{detail:{id:this.data.id},bubbles:!0,composed:!0}))}render(){const{data:{title:e,time:t,id:o,sticky:r},store:a}=this;return n.e`
      <div class="note-item ${o===a.checkedId?"active":""}" @click="${e=>this.check(e,o)}">
        ${r?n.e`<img class="sticky-tag" .src=${i(832)} />`:null}

        <div class="border">
          <div class="header">
            <h3 class="title">${e||i18n("no_title")}</h3>
            <p class="date">${this._formatTime(t)}</p>
          </div>

          <i-dot-expanded class="note-item-menu" tabindex="0">
            ${r?n.e`<li class="note-dot-item" @click=${this.cancelSetTop}>${i18n("cancel_set_top")}</li>`:n.e`<li class="note-dot-item" @click=${this.setTop}>${i18n("set_top")}</li>`}
            <li class="note-dot-item" @click=${this.delete}>${i18n("del_folder")}</li>
          </i-dot-expanded>
        </div>
      </div>
    `}};yr.styles=hr,br([Object(n.g)({type:Object})],yr.prototype,"data",void 0),yr=br([Object(n.c)("side-notes-item")],yr);var vr=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let wr=class extends n.a{constructor(){super(...arguments),this.data=[]}render(){return n.e`
      <div class="global-scrollbar side-notes-list">
        ${this.data.map(e=>n.e`
            <side-notes-item
              .data=${e}
              @check=${this.handleCheck}
              @delete=${this.handleDelete}
              @set-top=${this.handleSetTop}
              @cancel-set-top=${this.handleCancelSetTop}
            ></side-notes-item>
          `)}
      </div>
    `}handleCheck(){this.dispatchEvent(new CustomEvent("on-check",{bubbles:!0,composed:!0}))}handleDelete(e){this.dispatchEvent(new CustomEvent("on-delete",{detail:{id:e.detail.id},bubbles:!0,composed:!0}))}handleSetTop({detail:e}){e.id&&s.noteStore.setTop(e.id)}handleCancelSetTop({detail:e}){e.id&&s.noteStore.cancelSetTop(e.id)}};wr.styles=[k.a,hr],vr([Object(n.g)({type:Array})],wr.prototype,"data",void 0),wr=vr([Object(n.c)("side-notes-list")],wr);var xr=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let _r=class extends a.a{constructor(){super(...arguments),this.store=s.noteStore}async add(){this.store.add({}),await this.updateComplete,this.dispatchEvent(new CustomEvent("add",{bubbles:!0,composed:!0}))}render(){return n.e`
      <div class="side-notes-add" @click="${e=>this.add()}">
        <svg viewBox="0 0 1024 1024">
          <path d="M32 416h960c19.2 0 32 12.8 32 32v128c0 19.2-12.8 32-32 32H32C12.8 608 0 595.2 0 576V448c0-19.2 12.8-32 32-32z"></path>
          <path d="M448 0h128c19.2 0 32 12.8 32 32v960c0 19.2-12.8 32-32 32H448c-19.2 0-32-12.8-32-32V32c0-19.2 12.8-32 32-32z"></path>
        </svg>
      </div>
    `}};_r.styles=n.b`
    :host {
      --border-color: #ededed;
    }
    .side-notes-add {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 54px;
      color: #333;
      cursor: pointer;
      border-top: 1px solid var(--border-color);
      transition: all 300ms ease-in-out;
    }
    .side-notes-add:hover {
      background: rgb(249, 249, 249);
    }
    .side-notes-add svg {
      width: 14px;
      height: 14px;
    }
  `,_r=xr([Object(n.c)("add-note-btn")],_r);var Ar=i(833),Sr=i.n(Ar),kr=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let Or=class extends n.a{render(){return n.e`
      <div class="wrapper">
        <img src="${Sr.a}" alt="icon" />
        <p>${Object(J.i18n)("add_first_note")}</p>
      </div>
    `}};Or.styles=n.b`
    .wrapper {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: calc(100% - 55px);
    }
    img {
      width: 86px;
      height: 86px;
    }
    p {
      margin: 0;
      color: #999;
      font-size: 14px;
    }
  `,Or=kr([Object(n.c)("note-empty")],Or);var Ir=i(834),$r=i.n(Ir),Er=i(835),Cr=i.n(Er),Tr=i(836),jr=i.n(Tr),Pr=i(837),Rr=i.n(Pr),Lr=i(838),Nr=i.n(Lr),Mr=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let Dr=class extends n.a{constructor(){super(...arguments),this.txt="",this.titleError="",this.urlError=""}firstUpdated(){this.titleInput&&this.titleInput.focus()}render(){return n.e`
      <div class="note-link">
        <h2>${Object(J.i18n)("add_link")}</h2>
        <div class="form">
          <div class="input-control">
            <div class="label">${Object(J.i18n)("text")}</div>
            <input
              name="title"
              .placeholder="${Object(J.i18n)("please_enter_text")}"
              .value=${this.txt}
              autocomplete="off"
              @input="${this.handleTxtChange}"
              @focus=${()=>{this.titleError=""}}
            />
            <span class="error">${this.titleError}</span>
          </div>
          <div class="input-control">
            <div class="label">URL</div>
            <input
              name="url"
              placeholder="${Object(J.i18n)("type_link")}"
              @input="${this.handleUrlChange}"
              @keypress=${e=>this.handleKeyUp(e)}
              @focus=${()=>{this.urlError=""}}
              autocomplete="off"
            />
            <span class="error">${this.urlError}</span>
          </div>
        </div>
        <div class="btns">
          <infinito-button style="width: 155px; height: 52px;" @click="${this.cancel}"
            >${Object(J.i18n)("cancel")}</infinito-button
          >
          <infinito-button style="width: 155px; height: 52px;" primary @click="${this.confirm}"
            >${Object(J.i18n)("confirm")}</infinito-button
          >
        </div>
      </div>
    `}reset(){this.titleInput.value="",this.urlInput.value=""}handleTxtChange(e){this.dispatchEvent(new CustomEvent("txt-change",{detail:{value:e.target.value}}))}handleUrlChange(e){this.dispatchEvent(new CustomEvent("url-change",{detail:{value:e.target.value}}))}handleKeyUp(e){13===e.keyCode&&this.confirm()}cancel(){this.dispatchEvent(new CustomEvent("cancel",{bubbles:!0,composed:!0})),this.reset()}confirm(){const e=this.titleInput.value;let t=this.urlInput.value;if(!e)return void(this.titleError=Object(J.i18n)("type_text"));if(!t)return void(this.urlError=Object(J.i18n)("please_type_link"));if(!this.isUrl(t))return void(this.urlError=Object(J.i18n)("please_type_right_link"));const i=t.startsWith("chrome://")||t.startsWith("http://")||t.startsWith("https://");t=i?t:"http://"+t,this.dispatchEvent(new CustomEvent("ok",{detail:{title:e,url:t}})),this.reset()}isUrl(e){return/^[^\u4e00-\u9fa5]+$/.test(e)}};Dr.styles=n.b`
    :host {
      box-sizing: border-box;
      display: block;
      width: 370px;
      height: 370px;
      padding: 20px;
    }
    h2 {
      margin: 0;
      margin-bottom: 30px;
      font-size: 20px;
      font-weight: 500;
      color: #333;
      text-align: center;
    }
    .input-control {
      position: relative;
      width: 100%;
      margin-bottom: 40px;
    }
    .error {
      position: absolute;
      right: 0;
      bottom: -20px;
      font-size: 12px;
      color: #ea4747;
    }
    input {
      width: 100%;
      padding: 10px 0;
      border: none;
      background: none;
      outline: none;
      border-bottom: 1px solid#656565;
    }
    .btns {
      display: flex;
      justify-content: space-between;
      margin-top: 60px;
    }
    infinito-button {
      width: 155px;
      height: 52px;
    }
  `,Mr([Object(n.g)({type:String})],Dr.prototype,"txt",void 0),Mr([Object(n.g)({type:String})],Dr.prototype,"titleError",void 0),Mr([Object(n.g)({type:String})],Dr.prototype,"urlError",void 0),Mr([Object(n.h)('input[name="title"]')],Dr.prototype,"titleInput",void 0),Mr([Object(n.h)('input[name="url"]')],Dr.prototype,"urlInput",void 0),Dr=Mr([Object(n.c)("add-note-link")],Dr);var Ur=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let Br=class extends a.a{constructor(){super(...arguments),this.store=s.noteStore,this.txt="",this.handleCancel=()=>{this.store.toogleLinkModal(),this.emit("cancelLink")}}emit(e,t){const i=new CustomEvent(e,{detail:Object.assign({},t),bubbles:!0,composed:!0});this.dispatchEvent(i)}render(){return n.e`
      <div class="edit-options">
        <div class="area fonts-area">
          <button
            class=${Object(K.a)({"bold-button":!0,active:this.store.boldActive})}
            @click="${this.toggleBold}"
          >
            <img src="${$r.a}" />
          </button>
          <button
            @click=${()=>{this.emit("increase",{focus:!0})}}
            @touchend=${e=>{e.stopPropagation(),e.preventDefault(),this.emit("increase",{focus:!1})}}
          >
            <img src="${Cr.a}" />
          </button>
          <button
            @click=${()=>{this.emit("decrease",{focus:!0})}}
            @touchend=${e=>{e.stopPropagation(),e.preventDefault(),this.emit("decrease",{focus:!1})}}
          >
              <img src="${jr.a}" />
            </button>
        </div>
        <div class="area media-area">
          <button @click=${this.createLink}><img src="${Rr.a}" /></button>
          <div class="insert-img-wrapper">
            <button @click="${this.handleUploadImg}"><img src="${Nr.a}" /></button>
            <input type="file" hidden @change=${this.uploadInputChange} accept="image/png, image/jpeg"/>
          </div>
        </div>
      </div>
      ${this.store.linkModal?n.e`
            <infinito-modal
              .open=${this.store.linkModal}
              .onCancel=${this.handleCancel}
            >
              <div slot="body">
                <add-note-link
                  .txt=${this.txt}
                  @cancel=${this.handleCancel}
                  @ok=${this.handleOk}
                >
                </add-note-link>
              </div>
            </infinito-modal>
          `:null}
    `}handleOk(e){this.store.toogleLinkModal(),this.emit("insertLink",Object.assign({},e.detail))}createLink(){this.store.toogleLinkModal(),this.emit("createLink")}toggleBold(e){const t=e.currentTarget.classList.contains("active");this.emit("bold",{state:!t}),this.store.setBoldActive(!t)}handleUploadImg(e){e.stopPropagation();const{isLogin:t}=s.userStore;t?this.input.click():Di.default.popupLogin()}async uploadInputChange(){const e=this.input.files[0];this.emit("insertImg",{file:e}),this.input.value=""}};Br.styles=n.b`
    .edit-options {
      display: flex;
      height: 55px;
    }
    .area {
      flex: 1;
      height: 100%;
      display: flex;
      align-items: center;
    }
    button {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 34px;
      height: 34px;
      padding: 0;
      border: none;
      border-radius: 6px;
      background: none;
      outline: none;
      transition: background .3s;
    }
    button:hover {
      background: rgba(0, 0, 0, .05);
    }
    button.active {
      background: rgba(0, 0, 0, .08);
    }
    img {
      width: 26px;
      height: 26px;
    }
    img {
      cursor: pointer;
    }
    .fonts-area button {
      margin-left: 30px;
    }
    .media-area {
      justify-content: flex-end;
    }
    .media-area button {
      margin-right: 30px;
    }
    .insert-img-wrapper {
      position: relative;
      width: 38px;
      height: 31px;
      margin-right: 30px;
      cursor: pointer;
    }
    .insert-img-wrapper:hover {
      opacity: .8;
    }
    .insert-img-wrapper button {
      margin: 0;
      cursor: pointer;
    }
  `,Ur([Object(n.g)({type:String,reflect:!0})],Br.prototype,"txt",void 0),Ur([Object(n.h)("input")],Br.prototype,"input",void 0),Br=Ur([Object(n.c)("note-editor-options")],Br);var Fr=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let zr=class extends a.a{constructor(){super(...arguments),this.store=s.noteStore}_formatTime(e){return e?c.a.fmtTime(e):""}render(){const{checkedNote:e}=this.store;return n.e`
      <div class="note-editor">
        <div class="main-body">
          <p class="time">${this._formatTime(null==e?void 0:e.time)}</p>
          <div class="edit-area">
            <slot name="title"></slot>
            <div class="global-scrollbar edit-wrapper">
              <slot name="editor"></slot>
            </div>
          </div>
        </div>
        <slot name="options"></slot>
      </div>
    `}};zr.styles=[k.a,hr],Fr([Object(n.h)(".edit-wrapper")],zr.prototype,"editWrapper",void 0),zr=Fr([Object(n.c)("note-editor")],zr);var Hr=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let Wr=class extends a.a{constructor(){super(...arguments),this.store=s.noteStore,this.MAX_LENGTH=2e5,this.deleteModal=!1,this.deleteId="",this.debounceHandleScrollCursor=c.a.debounce(this.handleScrollCursor,50),this.cancelDelete=()=>{this.deleteModal=!1}}opened(){this.inputEle&&this.inputEle.focus()}handleTabClose(){this.store.linkModal&&this.store.toogleLinkModal()}firstUpdated(){var e;if(this.editBox){if(document.execCommand("defaultParagraphSeparator",!1,"p"),this.editBox.addEventListener("contextmenu",e=>(e.stopPropagation(),!0),{capture:!0}),this.editBox.addEventListener("mouseup",()=>{const e=document.queryCommandState("bold");this.store.setBoldActive(e)}),null===(e=this.store)||void 0===e?void 0:e.checkedNote){const{content:e}=this.store.checkedNote;this.editBox.innerHTML=e?this.store.checkedNote.content:"<p><br></p>"}this.editBox.addEventListener("drop",e=>{e.preventDefault()})}}shouldUpdated(){const{content:e=""}=this.store.checkedNote;if(this.editBox&&cr(this.editBox.innerHTML)!==cr(e))return!0}updated(){var e;if(this.editBox&&(null===(e=this.store)||void 0===e?void 0:e.checkedNote)){const{content:e}=this.store.checkedNote;cr(this.editBox.innerHTML)!==cr(e)&&(this.editBox.innerHTML=e||"<p><br></p>"),e&&"<p><br></p>"!==e&&"<br>"!==e||this.store.setBoldActive(!1)}}afterShow(){this.opened()}afterHide(){this.handleTabClose()}render(){var e,t,i;const{store:o}=this;return n.e`
      <i-side2-header .title="${Object(J.i18n)("notes")}"></i-side2-header>
      <div class="side-notes">
        <div class="side-notes-left">
          ${o.isEmpty?n.e`<note-empty></note-empty>`:n.e` <side-notes-list
                .data=${o.noteList}
                @on-check=${this.handleCheck}
                @on-delete=${this.handleDelete}
              ></side-notes-list>`}
          <add-note-btn @add=${this.handleAdd}></add-note-btn>
        </div>
        <div class="side-notes-right">
          ${o.checkedNote?n.e`
                <note-editor>
                  <div slot="title" class="note-title-wrapper">
                    <input
                      name="title"
                      autocomplete="off"
                      .placeholder="${Object(J.i18n)("note_title")}"
                      .value=${null===(e=this.store.checkedNote)||void 0===e?void 0:e.title}
                      @keydown=${e=>{e.target.keyEvent=!0}}
                      @compositionstart=${e=>{e.target.isNeedPrevent=!0}}
                      @compositionend=${e=>{e.target.isNeedPrevent=!1}}
                      @input=${e=>{e.target.keyEvent||this.handleTitleInput(e)}}
                      @keyup=${e=>{e.target.isNeedPrevent||(this.handleTitleInput(e),e.target.keyEvent=!1)}}
                      @keypress=${e=>this.handleTitleKeyPress(e)}
                    />
                  </div>
                  <div
                    slot="editor"
                    class="note-editor"
                    contenteditable="true"
                    spellcheck="false"
                    style="font-size: ${null===(i=null===(t=this.store)||void 0===t?void 0:t.checkedNote)||void 0===i?void 0:i.fontSize}px"
                    @blur=${this.handleEditorBlur}
                    @keypress="${this.checkContent}"
                    @input=${this.handleEditorChange}
                    @click=${this.handleEditorClick}
                    @paste=${this.handleEditorPaste}
                  ></div>
                  <note-editor-options
                    slot="options"
                    @bold=${this.execBoldCommand}
                    @increase=${e=>this.handleChangeSize(e,"increase")}
                    @decrease=${e=>this.handleChangeSize(e,"decrease")}
                    @createLink=${this.handleCreateLink}
                    @insertLink=${this.handleInsertLink}
                    @cancelLink=${()=>this.reStorePosition()}
                    @insertImg=${this.handleInsertImg}
                  >
                  </note-editor-options>
                </note-editor>
              `:null}
        </div>
      </div>
      <infinito-portal-entrance destination="delete-note-modal">
        <infinito-modal
          style="--modal-padding: 30px; --modal-top: 30vh;"
          ?open=${this.deleteModal}
          .closeable=${!1}
          .onCancel=${this.cancelDelete}
        >
          <note-delete-tips slot="body" @ok=${this.confirmDelete} @cancel=${this.cancelDelete}> </note-delete-tips>
        </infinito-modal>
      </infinito-portal-entrance>
    `}createRenderRoot(){return this}handleCheck(){this.handleAdd()}handleDelete(e){this.deleteId=e.detail.id,this.deleteModal=!0}confirmDelete(){this.store.delete(this.deleteId),this.deleteModal=!1,this.handleAdd()}async handleAdd(){await this.updateComplete,this.inputEle&&this.inputEle.focus()}handleTitleInput(e){const t=e.target.value;this.updateContent({title:t})}handleTitleKeyPress(e){13===e.keyCode&&this.editBox.focus()}updateContent(e){const t=Object.assign(Object.assign(Object.assign({},this.store.checkedNote),e),{time:+new Date});this.store.updateNote(t)}saveCursorPosition(){const e=window.getSelection(),t={range:null,collapsed:!0,text:""};e.rangeCount>0&&lr(this.editBox,e.anchorNode)&&lr(this.editBox,e.focusNode)&&(t.collapsed=e.isCollapsed,t.range=e.getRangeAt(0),t.text=e.toString()),this.prevEditorSelection=t}reStorePosition(){var e;const t=window.getSelection();t.removeAllRanges();let i=null;return(null===(e=this.prevEditorSelection)||void 0===e?void 0:e.range)?i=this.prevEditorSelection.range:(i=document.createRange(),i.selectNodeContents(this.editBox),i.collapse(!1)),t.addRange(i),o=100,new r.a(e=>setTimeout(e,o));var o}handleEditorBlur(){this.saveCursorPosition()}checkContent(e){const t=e.target.innerHTML;if((null==t?void 0:t.length)>this.MAX_LENGTH)return se.message.error(Object(J.i18n)("limit_input_length")),e.stopPropagation(),e.preventDefault(),!1}handleEditorChange(e){const t=e.target.innerHTML;(null==t?void 0:t.length)>this.MAX_LENGTH&&"deleteContentBackward"!==e.inputType&&(se.message.error(Object(J.i18n)("limit_input_length")),e.target.blur()),this.updateContent({content:t})}handleEditorClick(e){const t=function(e,t,i=document.body){for(;!e.matches||!e.matches(t);)if(!(e=e.parentElement)||e===i){e=null;break}return e}(e.target,"a",this.editBox);if(t){const i=t.getAttribute("href");c.a.openUrl(i,s.settingStore.setting.link.icon,e)}}handleEditorPaste(e){var t;e.preventDefault();let i=null;const o=(e.originalEvent||e).clipboardData;let r=o.getData("text/html");if((null===(t=this.editBox.innerHTML)||void 0===t?void 0:t.length)+(null==r?void 0:r.length)>this.MAX_LENGTH)se.message.error(Object(J.i18n)("limit_input_length"));else{if(0===r.length){if(r=o.getData("text/plain"),0===r.length)return;i=r.split(/\r\n?|\n/g).map(e=>{if(0===nr()(e).call(e).length)return"<br/>";const t=document.createElement("div");return t.innerText=e.replace(/\s/g," "),t.outerHTML}).join("")}else i=pr.a.sanitize(r,{ALLOWED_TAGS:["a","img","ul","ol","nl","li","div","p","pre","code","br"],ALLOWED_ATTR:["href","target","src"],ALLOW_DATA_ATTR:!1});setTimeout(()=>{document.execCommand("insertHTML",!1,i),this.updateContent({content:this.editBox.innerHTML})},0)}}async execBoldCommand({detail:e}){var t;await this.reStorePosition();const i=window.getSelection(),o=i.getRangeAt(0);if(null===(t=this.prevEditorSelection)||void 0===t?void 0:t.collapsed)if(e.state)document.execCommand("insertHTML",!1,"<b>&#8203;</b>");else if(l.n){const e=document.createRange();e.setStartAfter(o.endContainer.parentNode),e.collapse(!0),i.removeAllRanges(),i.addRange(e)}else document.execCommand("insertHTML",!1,"&#8203;");else document.execCommand("bold",!1,null)}async handleChangeSize(e,t){var i;const o=e.detail.focus;let r=null===(i=this.store.checkedNote)||void 0===i?void 0:i.fontSize;switch(t){case"increase":r+=2;break;case"decrease":r-=2;break;default:return}if(r>=20&&(r=20),r<=12&&(r=12),o)await this.reStorePosition();else{window.getSelection().removeAllRanges()}this.updateContent({fontSize:r}),this.debounceHandleScrollCursor()}handleScrollCursor(){const e=this.noteEditor.editWrapper,{y:t}=function(){const e=window,t=e.document,i=e.getSelection();let o,r,n,a=0,s=0;if(i.rangeCount&&(o=i.getRangeAt(0).cloneRange(),o.getClientRects&&(o.collapse(!0),r=o.getClientRects(),r.length>0&&(n=r[0]),n&&(a=n.left,s=n.top)),0===a&&0===s||void 0===n)){const e=t.createElement("span");if(e.getClientRects){e.appendChild(t.createTextNode("​")),o.insertNode(e),n=e.getClientRects()[0],a=n.left,s=n.top;const i=e.parentNode;i.removeChild(e),i.normalize()}}return{x:a,y:s}}(),i=t+e.scrollTop-e.getBoundingClientRect().height;e.scrollTop=i}handleCreateLink(){var e,t;this.editOptions.txt=null!==(t=null===(e=this.prevEditorSelection)||void 0===e?void 0:e.text)&&void 0!==t?t:""}async handleInsertLink({detail:e}){var t;await this.reStorePosition();const{title:i,url:o}=e,r=document.createElement("a");r.classList.add("link"),r.setAttribute("href",o),r.innerText=i,(null===(t=this.prevEditorSelection)||void 0===t?void 0:t.text)?(this.prevEditorSelection.range.deleteContents(),this.prevEditorSelection.range.insertNode(r)):(document.execCommand("insertHTML",!1,r.outerHTML),document.execCommand("insertHTML",!1,"<span>&#8203;</span>"));const n=this.editBox.innerHTML;this.debounceHandleScrollCursor(),this.updateContent({content:n})}async handleInsertImg({detail:e}){await this.reStorePosition();const t=c.a.randomId("note-"),{file:i}=e;if((null==i?void 0:i.size)>16048584)return void se.message.error(Object(J.i18n)("note_upload_img_15"));const o=sr.a.createObjectURL(i),{width:n,height:a}=await function(e){return new r.a(t=>{const i=new Image;i.onload=function(){t({width:i.width,height:i.height})},i.src=e})}(o);!function(e){let t,i;if(window.getSelection&&(t=window.getSelection(),t.getRangeAt&&t.rangeCount)){i=t.getRangeAt(0),i.deleteContents();const o=document.createElement("div");o.innerHTML=e;const r=document.createDocumentFragment();let n,a;for(;n=o.firstChild;)a=r.appendChild(n);i.insertNode(r),a&&(i=i.cloneRange(),i.setStartAfter(a),i.collapse(!0),t.removeAllRanges(),t.addRange(i))}}(`<span\n        class="note-img-wrapper uploading"\n        data-width="${n}"\n        data-height="${a}"\n        data-picture="${t}.png"\n      ><img class="main-img" src=${o} /><img class="uploading-text" src=${gr.a} /></span>`),this.debounceHandleScrollCursor();try{const{data:e,error:r}=await this.store.upload(i,t);if(!Object.keys(e).length)throw new Error(r);{let{url:t,key:i}=e;i=i.split("/")[2];const r=this.editBox.querySelector(`span[data-picture="${i}"]`);r.classList.remove("uploading");r.querySelector(".main-img").src=t;r.querySelector(".uploading-text").remove(),sr.a.revokeObjectURL(o)}}catch(e){this.editBox.querySelector(`span[data-picture="${t}.png"]`).remove(),se.message.error(Object(J.i18n)("upload_image_error"))}const s=this.editBox.innerHTML;this.updateContent({content:s})}};Wr.styles=hr,Hr([Object(n.g)({type:Boolean})],Wr.prototype,"deleteModal",void 0),Hr([Object(n.g)({type:String})],Wr.prototype,"deleteId",void 0),Hr([Object(n.h)(".note-editor")],Wr.prototype,"editBox",void 0),Hr([Object(n.h)("note-editor")],Wr.prototype,"noteEditor",void 0),Hr([Object(n.h)("note-editor-options")],Wr.prototype,"editOptions",void 0),Hr([Object(n.h)('input[name="title"]')],Wr.prototype,"inputEle",void 0),Wr=Hr([Object(n.c)("side-notes")],Wr);var Gr=n.b`:host {
  position: relative;
  display: block;
  height: 100%;
  --point-height: 2px;
  --display: none;
}
.tabs {
  position: relative;
  width: 100%;
  height: 100%;
  display: flex;
}
.tabs.vertically {
  align-items: center;
}
.tabs.horizontally {
  flex-direction: column;
}
.tabs[style]::after {
  content: '';
}
.tabs.vertically::after {
  display: var(--display, none);
  --width: 28;
  position: absolute;
  width: calc(var(--width) * 1px);
  left: calc((var(--target-left) + (var(--target-width) - var(--width)) / 2) * 1px);
  border-bottom: var(--point-height) solid #333;
  bottom: 0;
  transition: left 0.2s, width 0.2s;
}
.tabs.horizontally::before {
  display: var(--display, none);
  content: '';
  position: absolute;
  z-index: 0;
  width: 100%;
  height: calc(var(--target-height, 0) * 1px);
  top: calc(var(--target-top, -9000) * 1px);
  left: 0;
  background: #f5f5f5;
  border-radius: 6px;
  transition: top 0.2s, height 0.2s;
}
`,Vr=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let qr=class extends n.a{constructor(){super(...arguments),this.type="vertically",this.active=0}setActiveStyle(){var e,t;const i=null===(t=null===(e=this.$slot)||void 0===e?void 0:e.assignedNodes())||void 0===t?void 0:t.filter(e=>1===e.nodeType);if(i&&i.length>0){const e=i[this.active],t=this.$tabsbox.style,{offsetTop:o,offsetLeft:r,offsetWidth:n,offsetHeight:a}=e;if(0===n&&0===a)return void t.setProperty("--display","none");t.setProperty("--display","block"),t.setProperty("--target-width",n+""),t.setProperty("--target-height",a+""),t.setProperty("--target-left",r+""),"horizontally"===this.type&&t.setProperty("--target-top",o+"")}}updated(e){e.has("active")&&this.setActiveStyle()}render(){return n.e`
      <div class="tabs ${this.type}">
        <slot></slot>
      </div>
    `}};qr.styles=Gr,Vr([Object(n.g)({type:String})],qr.prototype,"type",void 0),Vr([Object(n.g)({type:Number})],qr.prototype,"active",void 0),Vr([Object(n.h)(".tabs")],qr.prototype,"$tabsbox",void 0),Vr([Object(n.h)("slot")],qr.prototype,"$slot",void 0),qr=Vr([Object(n.c)("i-tabs")],qr);var Yr=n.b`:host {
  display: block;
  padding: 30px;
  padding-top: 41px;
  box-sizing: border-box;
  height: 100%;
  overflow-y: auto;
  text-align: center;
}
.card {
  padding: 8px 16px 12px;
  display: flex;
  flex-direction: column;
  background: #fff;
  border-radius: 6px;
  width: 100%;
  box-sizing: border-box;
}
.card {
  margin-bottom: 32px;
  text-align: left;
}
.card-header {
  display: flex;
  align-items: center;
  height: 20px;
}
.card-header .img-box {
  position: relative;
  margin-top: -8px;
  width: 52px;
  height: 52px;
  background: #ffffff;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
}
.card-header .added-icon {
  width: 14px;
  height: 14px;
  position: absolute;
  bottom: 6px;
  right: 4px;
}
.card-header .img-icon-box {
  width: 40px;
  height: 40px;
  border: 1px solid #eee;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
  box-sizing: border-box;
}
.card-header .img-icon {
  border-radius: 50%;
  object-fit: cover;
  box-sizing: border-box;
}
.card-header .title {
  max-width: 120px;
  margin-right: 6px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  height: 20px;
  font-size: 14px;
  font-weight: 500;
  color: #333333;
  line-height: 20px;
}
.card-content {
  margin-top: 16px;
  margin-bottom: 10px;
  font-size: 12px;
  font-weight: 400;
  color: #999999;
  line-height: 18px;
}
.card-content .desc {
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
}
.card-footer {
  display: flex;
  justify-content: flex-end;
}
.card-footer .add-btn {
  min-width: 94px;
  height: 34px;
}
`,Qr=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let Xr=class extends a.a{firstUpdated(){}addSearch(e){var t,i;s.searchStore.updateShortcut(e),O.a.sendEvent({action:{addDefaultSearchEngine:c.a.getTargetLogDomain(null===(i=null===(t=e.types)||void 0===t?void 0:t[0])||void 0===i?void 0:i.url)}})}render(){const{list:e,searchEngine:t}=s.searchStore;return n.e`
      ${e.filter(e=>!e.hide).map(e=>{const o=t.all.some(t=>e.uuid.toLocaleLowerCase()===t.uuid.toLocaleLowerCase());return n.e`
            <section class="card">
              <div class="card-header">
                <div class="img-box">
                  <div class="img-icon-box">
                    <img class="img-icon" width="32" height="32" src="${Object(re.b)(e.logo)}" alt="" />
                  </div>
                  ${o?n.e` <img class="added-icon" src="${i(839)}" alt="" />`:n.e``}
                </div>
                <div class="title">${e.name}</div>
              </div>
              <div class="card-content">
                <div class="desc">${e.desc}</div>
              </div>
              <div class="card-footer">
                ${o?n.e`<infinito-button white class="add-btn" disabled>${Object(J.i18n)("icon_added")}</infinito-button>`:n.e`<infinito-button white class="add-btn" @click="${()=>this.addSearch(e)}"
                      >${Object(J.i18n)("add")}</infinito-button
                    >`}
              </div>
            </section>
          `})}
      <span style="color: #b6b6b6;">${Object(J.i18n)("no_more")}</span>
    `}};Xr.styles=Yr,Xr=Qr([Object(n.c)("side-search-default")],Xr);var Kr=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};class Zr{constructor(){this.editing=!1,this.editData={},this.editIndex=null}changeStatus(e,t=null){this.editing=e,this.editIndex=t,this.editData={},null!==t&&("add"===this.editing?this.editData=Object.assign({},s.searchStore.searchEngine.addList[t]):"custom"===this.editing&&(this.editData=Object.assign({},s.searchStore.searchEngine.custom[t])))}async submit(e){const{editIndex:t}=this;let i=null;if("color"===e.bgType?delete e.logo:"image"===e.bgType&&(delete e.bgFont,delete e.bgText,delete e.bgColorImage),e.updatetime=await c.a.getTimestamp(),"add"===this.editing)i=s.searchStore.createEngineAdd(e,t);else if("custom"===this.editing){const o=Object.assign({},e);o.types=[{name:e.name,url:e.target}],i=s.searchStore.createEngine(o,t)}return Object(x.i)(()=>{this.editing=!1}),i}cancel(){this.editing=!1}}Kr([x.g],Zr.prototype,"editing",void 0),Kr([x.g],Zr.prototype,"editData",void 0),Kr([x.g],Zr.prototype,"editIndex",void 0),Kr([x.b],Zr.prototype,"changeStatus",null),Kr([x.b],Zr.prototype,"submit",null),Kr([x.b],Zr.prototype,"cancel",null);const Jr=new Zr;var en=n.b`.btn-add {
  width: 360px;
  height: 50px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #ffffff;
  border-radius: 6px;
  cursor: pointer;
}
.btn-add-text {
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 14px;
  font-weight: 500;
  color: #333333;
}
.btn-add-text i-usesvg {
  margin-right: 4px;
  width: 18px;
  height: 18px;
  color: #333;
}
.btn-add-text div {
  max-width: calc(100% - 100px);
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
}
custom-engine-card {
  margin-bottom: 20px;
}
`,tn=n.b`:host {
  display: block;
}
.container {
  position: relative;
  display: flex;
  background: #ffffff;
}
.main {
  display: flex;
  align-items: center;
  padding: 16px;
}
.main .left {
  flex-shrink: 0;
  margin-right: 14px;
  width: 56px;
  height: 56px;
  border: 1px solid #eeeeee;
  border-radius: 6px;
  overflow: hidden;
}
.main .left.add {
  border-radius: 50%;
}
.main .left.add svg {
  border-radius: 50% !important;
}
.main .left img {
  width: 100%;
  height: 100%;
}
.main .search-icon {
  width: 100%;
  height: 100%;
  box-sizing: border-box;
  border-radius: 4px;
  display: flex;
  justify-content: center;
  align-items: center;
}
.main .search-icon .bg-text {
  display: flex;
  justify-content: center;
  overflow: hidden;
  color: #fff;
  white-space: nowrap;
}
.main .right .name {
  width: 170px;
  height: 20px;
  font-size: 18px;
  font-weight: 500;
  color: #333333;
  line-height: 20px;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}
.main .right .target {
  margin-top: 6px;
  width: 224px;
  height: 18px;
  font-size: 12px;
  font-weight: 400;
  color: #999999;
  line-height: 18px;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}
.container:hover > .dot-container,
.dot-container.active {
  opacity: 1;
  pointer-events: auto;
  cursor: pointer;
}
.dot-container {
  position: absolute;
  top: 28px;
  right: 20px;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2;
  box-sizing: border-box;
  display: flex;
  flex-flow: column;
  align-items: center;
  justify-content: space-around;
  width: 32px;
  height: 32px;
  padding: 6px 0;
  border-radius: 4px;
  transition: opacity 0.3s;
  outline: none;
}
.dot-container:hover {
  background: #f2f2f2;
}
.dot-container:focus,
.dot-container.active {
  opacity: 1;
  background: #f2f2f2;
}
.dot-container > span {
  width: 3px;
  height: 3px;
  border-radius: 50%;
  background: #999;
}
.dot-container ul {
  display: none;
}
`,on=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let rn=class extends a.a{constructor(){super(...arguments),this.data={logo:"",name:"",target:""},this.isShortcut=!1,this.noDel=!1,this.type="add"}_edit(){const e=new CustomEvent("on-edit");this.dispatchEvent(e)}_del(){const e=new CustomEvent("on-del");this.dispatchEvent(e)}_add(){const e=new CustomEvent("on-add");this.dispatchEvent(e)}handleDotClick(e){e.stopPropagation();const t=document.createElement("div");t.className="dot-wrapper";const i=document.createElement("div");i.className="infinity-modal";const o=e.currentTarget.querySelector("ul").cloneNode(!0);if(this.dotEle.classList.add("active"),t.appendChild(i),t.appendChild(o),document.body.appendChild(t),"DIV"===e.currentTarget.tagName){const t=e.currentTarget.getBoundingClientRect(),{bottom:i,right:r,top:n}=t,a=window.innerWidth,l=document.body.clientHeight;o.style.right=a-r+"px";const c=o.clientHeight,d=this.dotEle.clientHeight*s.settingStore.sideScaleRatio;o.style.top=n+c+d>=l?n-c+"px":i+"px"}o.addEventListener("click",async e=>{const i=e.target;if("LI"===i.tagName){const e=i.classList;document.body.removeChild(t),this.dotEle.classList.remove("active"),e.contains("edit")?this._edit():e.contains("delete")?this._del():e.contains("add")&&this._add()}},{once:!0}),i.addEventListener("click",()=>{this.dotEle.classList.remove("active"),document.body.removeChild(t)},{once:!0})}render(){return n.e`
      <div class="container">
        <main class="main">
          <div
            class="${Object(K.a)({left:!0,add:"add"===this.type})}"
          >
            ${Object(ne.a)(Object(xe.a)(this.data,!1,!1,"6px"))}
          </div>
          <div class="right">
            <div class="name">${this.data.name}</div>
            <div class="target">${this.data.target}</div>
          </div>
        </main>
        <div class="dot-container" @click=${this.handleDotClick} tabindex="0">
          <span></span>
          <span></span>
          <span></span>
          <ul class="dot-ul">
            ${"custom"===this.type&&this.isShortcut?n.e`<li class="op-item added disabled">${i18n("icon_added")}</li>`:null}
            ${"custom"!==this.type||this.isShortcut?null:n.e`<li class="op-item add" @click=${this._add}>${i18n("add")}</li>`}
            <li class="op-item edit" @click="${this._edit}">${i18n("edit")}</li>
            <li .hidden="${this.noDel}" class="op-item delete" @click="${this._del}">${i18n("del_folder")}</li>
          </ul>
        </div>
      </div>
    `}};rn.styles=[tn],on([Object(n.g)({type:Object})],rn.prototype,"data",void 0),on([Object(n.g)({type:Boolean})],rn.prototype,"isShortcut",void 0),on([Object(n.g)({type:Boolean})],rn.prototype,"noDel",void 0),on([Object(n.g)({type:String})],rn.prototype,"type",void 0),on([Object(n.h)(".dot-container")],rn.prototype,"dotEle",void 0),rn=on([Object(n.c)("custom-engine-card")],rn);var nn=i(522),an=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let sn=class extends a.a{_addCustom(){Jr.changeStatus("custom")}_addShortcut(e){s.searchStore.updateShortcut(e)}_edit(e){Jr.changeStatus("custom",e)}_del(e){s.searchStore.delEngine(e)}async _onSubmit(e){const{bgType:t,bgColor:i,bgFont:o,bgText:r,name:n,target:a,bgImage:l,bgColorImage:d}=e.detail.value,p={bgType:t,logo:l,bgColor:i,bgFont:o,bgText:r,name:n,target:a,bgColorImage:d};null===Jr.editIndex&&O.a.sendEvent({action:{addCustomSearchEngine:c.a.getTargetLogDomain(a)}});const h=await Jr.submit(p);s.searchStore.updateShortcut(h)}cancel(){Jr.cancel()}_renderList(){const{custom:e,all:t,current:i}=s.searchStore.searchEngine;return n.e`
      ${e.map((e,o)=>{const r=t.some(t=>e.uuid===t.uuid);return n.e` <custom-engine-card
          @on-add="${()=>this._addShortcut(e)}"
          @on-edit="${()=>this._edit(o)}"
          @on-del="${()=>this._del(o)}"
          .isShortcut="${r}"
          .data="${e}"
          .noDel="${i.uuid===e.uuid}"
          type="custom"
        ></custom-engine-card>`})}
      <div @click="${this._addCustom}" class="btn-add">
        <div class="btn-add-text">
          <i-usesvg iconfont type="icon-icon-xinjian"></i-usesvg>
          <div>${Object(J.i18n)("add_new_search_engine")}</div>
        </div>
      </div>
    `}render(){const e=Object.assign(Object.assign({},nn.a.defaultValue),Jr.editData);return Jr.editData.logo&&(e.bgImage=Jr.editData.logo,Jr.editData.bgType||(e.bgType="image")),n.e`${Jr.editing?n.e`
          <i-editicon
            .sideRatio="${s.settingStore.sideRatio}"
            iconType="search-engine-custom"
            .value="${e}"
            @on-cancel="${this.cancel}"
            @on-submit="${this._onSubmit}"
          ></i-editicon>
        `:this._renderList()} `}};sn.styles=en,sn=an([Object(n.c)("custom-engine")],sn);var ln=n.b`.btn-add {
  width: 360px;
  height: 50px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #ffffff;
  border-radius: 6px;
  cursor: pointer;
}
.btn-add-text {
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 14px;
  font-weight: 500;
  color: #333333;
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
}
.btn-add-text i-usesvg {
  margin-right: 4px;
  width: 18px;
  height: 18px;
  color: #333;
}
.btn-add-text div {
  max-width: calc(100% - 100px);
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
}
custom-engine-card {
  margin-bottom: 20px;
}
.tips {
  width: 360px;
  height: 196px;
  margin-bottom: 20px;
}
.tips img {
  width: 100%;
  height: 100%;
}
`,cn=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let dn=class extends a.a{_addCustom(){Jr.changeStatus("add")}_edit(e){Jr.changeStatus("add",e)}_del(e){s.searchStore.delEngineAdd(e)}async _onSubmit(e){const{bgType:t,bgColor:i,bgFont:o,bgText:r,name:n,target:a,bgImage:s,bgColorImage:l}=e.detail.value,d={bgType:t,logo:s,bgColor:i,bgFont:o,bgText:r,name:n,target:a,bgColorImage:l};null===Jr.editIndex&&O.a.sendEvent({action:{addAddonSearchEngine:c.a.getTargetLogDomain(a)}}),await Jr.submit(d)}cancel(){Jr.cancel()}_renderList(){const{addList:e}=s.searchStore.searchEngine;return n.e`
      <div class="tips">
        <img src="${Object(re.a)("add_engine.gif",!1)}" alt="" />
      </div>
      ${e.map((e,t)=>n.e` <custom-engine-card
          @on-edit="${()=>this._edit(t)}"
          @on-del="${()=>this._del(t)}"
          type="add"
          .data="${e}"
        ></custom-engine-card>`)}
      <div @click="${this._addCustom}" class="btn-add">
        <div class="btn-add-text">
          <i-usesvg iconfont type="icon-icon-xinjian"></i-usesvg>
          <div>${Object(J.i18n)("add_new_search_engine")}</div>
        </div>
      </div>
    `}render(){const e=Object.assign(Object.assign({},nn.a.defaultValue),Jr.editData);return Jr.editData.logo&&(e.bgImage=Jr.editData.logo,Jr.editData.bgType||(e.bgType="image")),n.e`${Jr.editing?n.e`
          <i-editicon
            .sideRatio="${s.settingStore.sideRatio}"
            .value="${e}"
            @on-cancel="${this.cancel}"
            @on-submit="${this._onSubmit}"
            iconType="search-engnie-add"
          ></i-editicon>
        `:this._renderList()} `}};dn.styles=ln,dn=cn([Object(n.c)("custom-engine-add")],dn);var pn=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let hn=class extends a.a{constructor(){super(...arguments),this.active=0,this.tabs=[Object(J.i18n)("search_engine"),Object(J.i18n)("additional_search_engine")],this.clickTab=e=>{this.active!==e&&(this.active=e,Jr.cancel())}}render(){return n.e`
      <div class="header-box">
        <div class="header">
          ${this.tabs.map((e,t)=>n.e`
              <div @click="${()=>this.clickTab(t)}" class="tab ${this.active===t?"active":""}">
                <span class="text">${e}</span>
              </div>
            `)}
        </div>
      </div>
      <main class="main">
        ${0===this.active?n.e` <custom-engine></custom-engine> `:n.e` <custom-engine-add></custom-engine-add> `}
      </main>
    `}};hn.styles=n.b`
    :host {
      display: block;
      padding: 30px;
      padding-top: 18px;
      height: 100%;
      box-sizing: border-box;
      overflow-y: auto;
    }
    .main {
      margin-top: 18px;
    }
    .header-box {
      width: 360px;
      display: flex;
      justify-content: center;
    }
    .header {
      max-width: 100%;
      height: 32px;
      box-sizing: border-box;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border-radius: 8px;
      background: rgba(0, 0, 0, 0.05);
      font-size: 14px;
      font-weight: 400;
      color: #454545;
    }
    .header .tab {
      margin: 2px;
      padding: 4px 18px;
      box-sizing: content-box;
      height: 20px;
      line-height: 20px;
      cursor: pointer;
      border-radius: 6px;
      transition: background 0.2s, color 0.2s;
      word-break: keep-all;
      text-overflow: ellipsis;
      overflow: hidden;
    }
    .tab:hover {
      background: #ffffff;
      color: #333333;
    }
    .tab:last-of-type {
      margin-left: 0;
    }
    .tab.active {
      border-radius: 6px;
      background: #ffffff;
      color: #333333;
    }
  `,pn([Object(n.g)({type:Number})],hn.prototype,"active",void 0),hn=pn([Object(n.c)("side-search-custom")],hn);var un=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let gn=class extends a.a{constructor(){super(...arguments),this.tabsActive=0,this.tabs=[Object(J.i18n)("default"),Object(J.i18n)("custom")],this.firstShow=!1,this.changeTabs=e=>{this.tabsActive=e}}firstUpdated(){}beforeShow(){this.firstShow||(this.firstShow=!0,setTimeout(()=>{this.$itabs.setActiveStyle()},20))}render(){return n.e`
      <i-side2-header .title="${Object(J.i18n)("add_search_engine")}"></i-side2-header>
      <i-tabs class="nav" .active=${this.tabsActive}>
        ${this.tabs.map((e,t)=>n.e`
            <div @click="${()=>this.changeTabs(t)}" class="tab ${this.tabsActive===t?"active":""}">
              <span>${e}</span>
            </div>
          `)}
      </i-tabs>
      <main class="main">
        ${0===this.tabsActive?n.e`<side-search-default class="global-scrollbar"></side-search-default>`:n.e` <side-search-custom></side-search-custom>`}
      </main>
    `}};gn.styles=[k.a,n.b`
      :host {
        display: block;
        height: 100%;
        background-color: #fff;
      }
      .nav {
        height: 50px;
        margin: 0 30px;
        background-color: #fff;
      }
      .main {
        height: calc(100% - var(--side-header-height) - 50px);
        background-color: #ededed;
      }
      .tab {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100%;
        padding: 0 10px;
        font-weight: 400;
        color: rgba(101, 101, 101, 1);
        cursor: pointer;
        margin-right: 30px;
      }
      .tab:last-of-type {
        margin-right: 0;
      }
      .tab.active {
        font-weight: 500;
        color: #333333;
      }
    `],un([Object(n.g)({type:Number})],gn.prototype,"tabsActive",void 0),un([Object(n.h)("i-tabs")],gn.prototype,"$itabs",void 0),gn=un([Object(n.c)("side-search")],gn);i(330);var fn=i(102),mn=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};const bn=({type:e})=>"hosted_app"===e||"packaged_app"===e||"legacy_packaged_app"===e,yn=async()=>{let e=[];return e=await new r.a(e=>window.chrome.management.getAll(e)),e=e.filter(bn).map(e=>({name:e.name,uid:e.id,src:e.icons&&e.icons.length>0?e.icons[e.icons.length-1].url:null,url:"chrome-app://"+e.id,description:e.description,_footer:e.description||Object(J.i18n)("no_description")})),e},vn=[{type:"search",text:Object(J.i18n)("search_result"),logo:i(840)},{type:"popular",text:Object(J.i18n)("popular"),logo:i(841)},{source:"shareByUser",text:Object(J.i18n)("share_by_user"),logo:i(842)},{type:"app",text:Object(J.i18n)("application"),logo:i(843)},{type:"news",text:Object(J.i18n)("news"),logo:i(844)},{type:"music",text:Object(J.i18n)("music_video"),logo:i(845)},{type:"photos",text:Object(J.i18n)("photos"),logo:i(846)},{type:"shopping",text:Object(J.i18n)("shopping"),logo:i(847)},{type:"social",text:Object(J.i18n)("social"),logo:i(848)},{type:"sports",text:Object(J.i18n)("sports"),logo:i(849)},{type:"life",text:Object(J.i18n)("life_style"),logo:i(850)},{type:"games",text:Object(J.i18n)("games"),logo:i(851)},{type:"education",text:Object(J.i18n)("education"),logo:i(852)},{type:"tech",text:Object(J.i18n)("tech"),logo:i(853)},{type:"finance",text:Object(J.i18n)("finance"),logo:i(854)},{type:"read",text:Object(J.i18n)("read"),logo:i(855)},{type:"others",text:Object(J.i18n)("others"),logo:i(856)}];class wn{constructor(){this.listData=[],this.params={page:-1,type:"popular"},this.loading=null,this.activeNav=1,this.last=!1,this.networkError=!1,this.noAppPermission=null,this.reqPermission=async()=>{try{await fn.a.request(["management"]);const e=await yn();Object(x.i)(()=>{this.noAppPermission=!1,this.listData=e.concat(this.listData)})}catch(e){}}}async getList(e,t=!1){this.loading=!0,this.networkError=!1,this.last=!1,this.params=e;const{data:i,error:o}=await ye.b.getIcon(Object.assign({},e));o?Object(x.i)(()=>{o.__CANCEL__||(this.loading=!1,this.networkError=!0)}):Object(x.i)(()=>{this.loading=!1,i.totalPages===i.nextPage&&(this.last=!0),this.listData=t?this.listData.concat(i.icons):i.icons})}async loadNextPage(){if(this.last)return;let e=this.params.page;this.networkError||(e+=1),this.getList(Object.assign(Object.assign({},this.params),{page:e}),!0)}async search(e){this.getList(e)}async changeNav(e){if(this.activeNav=e,0===e)return;const t=vn[e],{type:i,source:o}=t,r={page:0};if(i&&(r.type=i),o&&(r.source=o),l.i&&"app"===i){let e=[];const t=await fn.a.has(["management"]);t&&(e=await yn()),Object(x.i)(()=>{this.listData=e,this.noAppPermission=!t})}else this.listData=[];this.getList(r,"app"===i)}}mn([x.g],wn.prototype,"listData",void 0),mn([x.g],wn.prototype,"params",void 0),mn([x.g],wn.prototype,"loading",void 0),mn([x.g],wn.prototype,"activeNav",void 0),mn([x.g],wn.prototype,"last",void 0),mn([x.g],wn.prototype,"networkError",void 0),mn([x.g],wn.prototype,"noAppPermission",void 0),mn([x.b],wn.prototype,"getList",null),mn([x.b],wn.prototype,"loadNextPage",null),mn([x.b],wn.prototype,"search",null),mn([x.b],wn.prototype,"changeNav",null),mn([x.b],wn.prototype,"reqPermission",void 0);const xn=new wn;var _n=n.b`:host {
  display: block;
  height: 100%;
}
[hidden] {
  display: none !important;
}
.content-header {
  display: flex;
  align-items: center;
  height: 80px;
  box-sizing: border-box;
  padding: 0 20px;
  border-bottom: 1px solid #efefef;
}
.content-header .default-title {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.content-header .default-title .search-box {
  background-color: #fff;
  width: 320px;
  height: 40px;
  border-radius: 6px;
}
.content-header .default-title .custom-btn {
  position: relative;
  background-color: #fff;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
  cursor: pointer;
}
.content-header .default-title .custom-btn:hover {
  opacity: 0.8;
}
.content-header .default-title .custom-btn .img {
  width: 24px;
  height: 24px;
}
.content-header .custom-title {
  display: flex;
  align-items: center;
  padding: 10px;
  font-size: 13px;
  font-weight: 500;
  color: #656565;
  line-height: 18px;
  cursor: pointer;
}
.content-header .custom-title .img {
  width: 16px;
  height: 16px;
  margin-right: 6px;
  color: #555;
}
.content-header .custom-title:hover {
  color: #555;
}
.content {
  height: calc(100% - 80px);
}
.custom-icon-scroll-box {
  height: 100%;
}
icons-custom {
  z-index: 1111;
}
icons-custom[show] {
  display: block;
}
`,An=(i(783),n.b`:host {
  --nav-item-height: 46px;
  display: flex;
  height: 100%;
  overflow: hidden;
}
.side-nav.hide-search {
  margin-top: calc(18px - var(--nav-item-height));
}
.aside-scrollbar {
  width: 160px;
  background-color: #fff;
}
.side-nav {
  position: relative;
  padding-top: 0;
  margin-top: 18px;
  padding-left: 10px;
  padding-right: 6px;
  padding-bottom: 20px;
  box-sizing: border-box;
  width: 100%;
  display: flex;
  flex-direction: column;
  background-color: #fff;
  overflow-y: auto;
  transition: margin 0.2s;
}
.side-nav .nav-item:first-child {
  pointer-events: none;
}
.side-nav .nav-item {
  position: relative;
  z-index: 1;
  padding: 12px 0;
  padding-left: 4px;
  font-size: 13px;
  font-weight: 400;
  color: #999;
  line-height: 18px;
  height: 18px;
  cursor: pointer;
  transition: color 0.2s, height 0.2s;
  display: flex;
  align-items: center;
}
.side-nav .nav-item:hover {
  color: #333333;
}
.side-nav .nav-item:hover:after {
  content: '';
  position: absolute;
  z-index: -1;
  left: 0;
  top: 0;
  height: 100%;
  width: 100%;
  transition: background 0.2s;
  background: rgba(245, 245, 245, 0.8);
  border-radius: 6px;
}
.side-nav .nav-item:hover .nav-item-logo {
  color: rgba(51, 51, 51, 0.8);
}
.side-nav .nav-item.active {
  color: #333;
  font-weight: 500;
  border-radius: 6px;
}
.side-nav .nav-item.active .nav-item-logo {
  color: #333;
}
.side-nav .nav-item-logo {
  width: 16px;
  height: 16px;
  margin-right: 10px;
  color: #bbb;
  transition: color 0.2s;
}
.side-nav .nav-item-text {
  word-break: keep-all;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.side-nav .nav-item-holder {
  flex-shrink: 0;
}
.side-nav::after {
  position: absolute;
  width: 100%;
  height: calc(var(--target-height, 0) * 1px);
  top: calc(var(--target-top, -500) * 1px);
  border-right: 2px solid #333;
  right: 0;
  transition: top 0.2s, height 0.2s;
}
.side-nav[style]::after {
  content: '';
}
.main {
  width: 220px;
  height: auto;
  box-sizing: content-box;
  padding-top: 32px;
  padding-bottom: 10px;
  padding-left: 20px;
}
.observer-holder {
  height: 40px;
}
.no-content {
  text-align: center;
}
.no-content img {
  display: block;
  margin: auto;
  margin-top: 100px;
  width: 86px;
  height: 86px;
}
.no-content span {
  margin-top: 6px;
  height: 24px;
  font-size: 14px;
  font-weight: 300;
  color: #999999;
  line-height: 24px;
}
.card {
  padding: 8px 16px 12px;
  display: flex;
  flex-direction: column;
  background: #fff;
  border-radius: 6px;
  width: 100%;
  box-sizing: border-box;
}
.card:not(:last-of-type) {
  margin-bottom: 32px;
}
.card-header {
  display: flex;
  align-items: center;
  height: 20px;
  justify-content: space-between;
}
.card-header .title-left {
  display: flex;
  align-items: center;
}
.card-header .img-box {
  position: relative;
  margin-top: -8px;
  width: 52px;
  height: 52px;
  background: #ffffff;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
}
.card-header .added-icon {
  width: 14px;
  height: 14px;
  position: absolute;
  bottom: 6px;
  right: 4px;
}
.card-header .img-icon {
  border-radius: 50%;
  object-fit: cover;
  box-sizing: border-box;
  border: 1px solid #eeeeee;
}
.card-header .title {
  max-width: 120px;
  margin-right: 6px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  height: 20px;
  font-size: 14px;
  font-weight: 500;
  color: #333333;
  line-height: 20px;
}
.card-header .link-box {
  flex-shrink: 0;
  position: relative;
  width: 18px;
  height: 18px;
  cursor: pointer;
}
.card-header .link-box:after {
  position: absolute;
  content: '';
  top: -6px;
  left: -6px;
  right: -6px;
  bottom: -6px;
}
.card-header .link,
.card-header .link-hover {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
}
.card-header .link-hover {
  visibility: hidden;
  color: #c3c3c3;
  transition: 0.2s color;
}
.card-header .link-box:hover .link-hover {
  visibility: visible;
  color: #333;
}
.card-header .link-box:hover .link {
  visibility: hidden;
}
.card-content {
  margin-top: 16px;
  margin-bottom: 10px;
  font-size: 12px;
  font-weight: 400;
  color: #999999;
  line-height: 18px;
}
.card-content .user-desc {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.card-content .desc {
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
}
.card-footer {
  display: flex;
  justify-content: flex-end;
}
.card-footer .add-btn {
  min-width: 94px;
  height: 34px;
}
.no-more,
.loading-more {
  margin-top: 20px;
  text-align: center;
  color: #b6b6b6;
  line-height: 1.3;
}
.loading-more-mask {
  position: absolute;
  top: 0;
  right: 0;
  left: 0;
  bottom: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: rgba(0, 0, 0, 0);
}
.loading-more-mask span {
  color: #b6b6b6;
}
.loading-more-mask[hidden] {
  display: none;
}
.loading-error-line[hidden],
.loading-error-mask[hidden] {
  display: none;
}
.loading-error-line {
  margin-top: 15px;
  display: flex;
  justify-content: center;
  align-items: center;
}
.loading-error-mask {
  position: absolute;
  top: 0;
  right: 0;
  left: 0;
  bottom: 0;
}
.loading-error-mask .loading-error-content {
  margin-top: 120px;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
}
.loading-error-mask .loading-error-content .img {
  width: 86px;
  height: 86px;
  margin-bottom: 10px;
}
.networkerr-text-box {
  height: 24px;
  line-height: 24px;
  background: #ebebeb;
  border-radius: 6px;
  display: flex;
  justify-content: center;
  align-items: center;
  max-width: 100%;
  padding: 0 10px;
  box-sizing: border-box;
  cursor: pointer;
}
.networkerr-text-box .networkerr-text {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  height: 17px;
  font-size: 12px;
  font-weight: 400;
  color: #333333;
  line-height: 17px;
  margin-right: 4px;
}
.networkerr-text-box .networkerr-text-reload {
  color: #333;
  width: 12px;
  height: 12px;
}
.networkerr-text-box:hover .networkerr-text,
.networkerr-text-box:hover .networkerr-text-reload {
  color: #555;
}
.no-app-permission-box {
  margin: -10px auto 25px;
  display: flex;
  justify-content: center;
  align-items: center;
}
.no-app-permission {
  display: flex;
  justify-content: center;
  align-items: center;
  max-width: 100%;
  cursor: pointer;
  height: 24px;
  background: #ebebeb;
  border-radius: 6px;
  padding: 0 10px;
  box-sizing: border-box;
}
.no-app-permission .dot {
  margin-right: 4px;
  width: 6px;
  height: 6px;
  background: #fb7f0c;
  border-radius: 50%;
}
.no-app-permission .text {
  height: 17px;
  font-size: 12px;
  font-weight: 400;
  color: #333333;
  line-height: 17px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.no-app-permission .text:hover {
  color: #555;
}
`),Sn=i(858),kn=i.n(Sn);async function On(e){e||(e=kn.a);const t=await async function({img:e,isApp:t}){const i=document.createElement("canvas");i.setAttribute("width","300"),i.setAttribute("height","300");const o=i.getContext("2d"),n=new Image;if(n.src=e,n.setAttribute("crossOrigin","Anonymous"),await new r.a((e,t)=>{n.addEventListener("load",e),n.addEventListener("error",t)}),t){const e={width:n.width,height:n.height},t=e.height/e.width;e.width=180,e.height=t*e.width,o.drawImage(n,(300-e.width)/2,(300-e.height)/2,e.width,e.height)}else o.drawImage(n,0,0,300,300);return i.toDataURL("image/png")}({img:e,isApp:!0}),{data:i,error:o}=await ye.f.uploadFile(c.a.convertBase64ToBlob(t),c.a.randomId("appicon-")+".png","custom-icon");return o?null:i.url}var In=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let $n=class extends a.a{constructor(){super(...arguments),this.observer=null,this.intiateScrollObserver=()=>{const e={root:this.$main,rootMargin:"0px 0px 200px"};this.observer=new IntersectionObserver(e=>{e[0].intersectionRatio>0&&this._scrollBottom()},e),this.observer.observe(this.$observer)},this.setActiveStyle=()=>{this.$itabs.setActiveStyle()}}firstUpdated(){this.intiateScrollObserver(),this._activeThis(1)}disconnectedCallback(){this.observer.disconnect(),super.disconnectedCallback()}_scrollBottom(){xn.last||xn.loading||xn.loadNextPage()}_activeThis(e){if(e!==xn.activeNav){if(0===xn.activeNav&&0!==e){const t=new CustomEvent("clear-search",{bubbles:!0,composed:!0,detail:{value:e}});this.dispatchEvent(t)}xn.changeNav(e),this.scrollToTop()}}scrollToTop(){this.$main.scrollTop=0}scrollSideToTop(){this.$side.scrollTop=0}async _addApp(e){const t={name:e.name,uuid:e.uid,bgType:"image",bgImage:e.src,updatetime:Date.now(),id:c.a.randomId("siteId-"),target:e.url};if(t.target.startsWith("infinity://")){if(t.type="app",t.target===ee.i.target){const{getCurrentWeather:e}=await Promise.resolve().then(i.bind(null,761)),o=e();t.name=o.name||ee.i.name,t.bgColor=o.bgColor||ee.i.bgColor,t.bgImage=o.bgImg||ee.i.bgImage,t.updatetime=Date.now()}}else t.type="web";if(t.target.startsWith("chrome-app://")&&(t.bgColor="#fff",t.bgImage=await On(t.bgImage),!t.bgImage))return void se.message.error(Object(J.i18n)("upload_file_error"));const o=s.siteStore.addSite(t,s.siteStore.currentPageIndex);O.a.sendEvent({action:{addDefaultIcon:c.a.getTargetLogDomain(t.target)}}),document.querySelector("newtab-main").toPage(o)}_openApp({url:e,uid:t},i){if(O.a.sendEvent({action:{openDefaultIcon:c.a.getTargetLogDomain(e)}}),de(e))return void i.stopPropagation();if("infinity://settings"===e){const e=new CustomEvent("open-setting",{bubbles:!0,composed:!0});return void this.dispatchEvent(e)}const{link:o}=s.settingStore.setting;e.startsWith("chrome-app://")?c.a.openChromeApp(t,o.icon,i):e.startsWith("infinity://")?"infinity://gmail"===e?c.a.openUrl("https://mail.google.com/mail/ca",o.icon,i):"infinity://chrome-apps"===e?(s.pluginStore.show(e),Z.a.openModal()):s.pluginStore.show(e):c.a.openUrl(e,o.icon,i)}_replaceErrorImg(e){e.currentTarget.src=i(859)}render(){const{activeNav:e}=xn,{uids:t}=s.siteStore;return n.e`
      <div
        class="aside-scrollbar global-scrollbar"
        style="
          flex-shrink: 0;
          height: 100%;
        "
      >
        <i-tabs
          type="horizontally"
          .active="${xn.activeNav}"
          class="side-nav ${0===e?"":"hide-search"}"
          style="overflow: hidden; height: auto;"
        >
          ${vn.map((e,t)=>n.e`<div
              @click="${()=>this._activeThis(t)}"
              class="nav-item ${t===xn.activeNav?"active":""}"
            >
              <i-svg class="nav-item-logo" src="${e.logo}"></i-svg>
              <span class="nav-item-text">${e.text}</span>
            </div>`)}
          <div class="nav-item-holder"></div>
        </i-tabs>
      </div>

      <div
        class="main-scrollbar global-scrollbar"
        style="
        height: 100%;
        position: relative;
        flex-grow: 1;
        "
      >
        <main class="main">
          ${xn.noAppPermission&&"app"===vn[e].type?n.e`
                <div class="no-app-permission-box">
                  <div
                    class="no-app-permission"
                    @click="${()=>{xn.reqPermission()}}"
                  >
                    <span class="dot"></span>
                    <span class="text">${Object(J.i18n)("get_app_permission")}</span>
                  </div>
                </div>
              `:null}
          ${xn.listData.map(o=>n.e`<section class="card">
              <div class="card-header">
                <div class="title-left">
                  <div class="img-box">
                    <img
                      class="img-icon"
                      width="40"
                      height="40"
                      loading="lazy"
                      @error="${this._replaceErrorImg}"
                      src="${Object(re.c)(o.src)}"
                      alt=""
                    />
                    ${t.has(o.uid+"#"+o.url)?n.e` <img class="added-icon" src="${i(860)}" alt="" />`:n.e``}
                  </div>
                  <div class="title">${o.name}</div>
                </div>

                <div @click="${e=>this._openApp(o,e)}" class="link-box">
                  <img class="link" src="${i(784)}" />
                  <i-svg class="link-hover" src="${i(784)}"></i-svg>
                </div>
              </div>
              <div class="card-content">
                ${"shareByUser"===vn[e].source?n.e` <div class="user-desc">${Object(J.i18n)("come_from")} ${o.userName}</div> `:""}
                <div class="desc">${o._footer}</div>
              </div>
              <div class="card-footer">
                <infinito-button white class="add-btn" @click="${()=>this._addApp(o)}"
                  >${Object(J.i18n)("add")}</infinito-button
                >
              </div>
            </section>`)}
          <!-- 末尾的网络错误 -->
          <div .hidden="${!(xn.networkError&&0!==xn.listData.length)}" class="loading-error-line">
            <div
              @click="${()=>{xn.loadNextPage()}}"
              class="networkerr-text-box"
            >
              <span class="networkerr-text">${Object(J.i18n)("icon_network_error")}</span
              ><i-svg class="networkerr-text-reload" src="${i(785)}"></i-svg>
            </div>
          </div>
          <!-- 铺满的网络错误 -->
          <div .hidden="${!(xn.networkError&&0===xn.listData.length)}" class="loading-error-mask">
            <div class="loading-error-content">
              <img class="img" src="${i(861)}" alt="" />
              <div
                @click="${()=>{xn.loadNextPage()}}"
                class="networkerr-text-box"
              >
                <span class="networkerr-text">${Object(J.i18n)("icon_network_error")}</span
                ><i-svg class="networkerr-text-reload" src="${i(785)}"></i-svg>
              </div>
            </div>
          </div>
          <!-- 末尾的loading -->
          <div .hidden="${!(0!==xn.listData.length&&xn.loading)}" class="loading-more">
            <infinito-spin spinning .isSvg=${l.p} style="width:60px;height:30px;margin:auto"></infinito-spin>
          </div>
          <!-- 铺满的loading -->
          <div .hidden="${!(0===xn.listData.length&&xn.loading)}" class="loading-more-mask">
            <infinito-spin spinning .isSvg=${l.p} style="width:60px;height:30px"></infinito-spin>
          </div>
          <!-- 没有更多了 -->
          <div .hidden="${!(xn.last&&0!==xn.listData.length)}" class="no-more">${Object(J.i18n)("no_more")}</div>
          <!-- 搜索没有数据 -->
          ${!1!==xn.loading||0!==xn.listData.length||xn.networkError?"":n.e`
                <div class="no-content">
                  <img src="${i(862)}" alt="" />
                  <span>${Object(J.i18n)("no_search_result")}</span>
                </div>
              `}
          <div class="observer-holder"></div>
        </main>
      </div>
    `}};$n.styles=[k.a,An],In([Object(n.h)("i-tabs")],$n.prototype,"$itabs",void 0),In([Object(n.h)(".aside-scrollbar")],$n.prototype,"$side",void 0),In([Object(n.h)(".main-scrollbar")],$n.prototype,"$main",void 0),In([Object(n.h)(".observer-holder")],$n.prototype,"$observer",void 0),In([Object(n.d)({once:!0})],$n.prototype,"_replaceErrorImg",null),$n=In([Object(n.c)("icons-default")],$n);i(649),i(650),i(651),i(652);var En=n.b`:host,
.mask {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
}
:host {
  display: none;
}
.ellipsis {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.mask {
  background-color: rgba(0, 0, 0, 0.4);
}
.custom-card {
  width: 360px;
  min-height: 264px;
  box-sizing: border-box;
  padding: 0;
  background: #ffffff;
}
.title-box,
.step-0 {
  margin-left: 20px;
  margin-right: 20px;
}
.title-box {
  margin-bottom: 4px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.title-box .title-side-back {
  cursor: pointer;
}
.title-box .title-side {
  display: flex;
  align-items: center;
  width: calc(100% - 30px);
}
.title-box .back {
  width: 20px;
  height: 20px;
  margin-right: 8px;
}
.title-box .title {
  height: 28px;
  font-size: 20px;
  font-weight: 500;
  color: #333333;
  line-height: 28px;
}
.title-box .close {
  width: 14px;
  height: 14px;
  cursor: pointer;
  transition: opacity 0.3s;
  opacity: 0.3;
}
.title-box .close:hover {
  opacity: 0.5;
}
i-input {
  display: block;
  margin-top: 20px;
}
.step-btn {
  width: 260px;
  height: 40px;
  margin: auto;
  margin-top: 30px;
}
.step-0 .step-btn {
  margin-top: 30px;
}
.step-0,
.step-1 {
  overflow: auto;
  overflow-x: hidden;
}
.step-1 {
  max-height: calc(100vh - 280px);
  max-height: calc((100vh - 280px * var(--side-ratio)) / var(--side-ratio));
}
.step-1 .item {
  margin-top: 20px;
  margin-left: 20px;
  margin-right: 20px;
}
.step-1 .label-box {
  max-width: 100%;
  margin-bottom: 10px;
  display: flex;
  align-items: center;
}
.step-1 .label-box .label {
  height: 20px;
  font-size: 14px;
  font-weight: 500;
  color: #333333;
  line-height: 20px;
  white-space: nowrap;
}
.step-1 .target-content {
  position: relative;
  height: 20px;
  font-size: 14px;
  font-weight: 400;
  color: #999999;
  line-height: 20px;
  display: flex;
  align-items: center;
}
.step-1 .target-content .target-name {
  position: relative;
  max-width: 40%;
}
.step-1 .target-content .target-gap {
  margin-left: 4px;
  margin-right: 4px;
  flex-shrink: 0;
  width: 1px;
  height: 14px;
  background-color: #999999;
}
.step-1 .imgs-box {
  display: flex;
}
.step-1 .img-item-box {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 60px;
}
.step-1 .img-item-box .name {
  margin-top: 8px;
  max-width: 80px;
  height: 16px;
  font-size: 11px;
  line-height: 16px;
  font-weight: 400;
  color: #b3b3b3;
}
.step-1 .active .img-item {
  box-shadow: 0px 4px 8px 0px rgba(59, 62, 64, 0.73);
}
.step-1 .active .name {
  font-weight: 500;
  color: #4d4d4d;
}
.step-1 .img-item {
  width: 60px;
  height: 60px;
  border-radius: 6px;
  cursor: pointer;
  transition: 0.2s box-shadow;
}
.step-1 .color-img {
  overflow: hidden;
}
.step-1 .cloud-imgs-box {
  display: flex;
}
.step-1 .cloud-imgs-box .cloud-img-box:not(:last-of-type) {
  margin-right: 10px;
}
.step-1 .color-img-box {
  margin-right: 17px;
  position: relative;
}
.step-1 .color-img-box:after {
  position: absolute;
  top: 8px;
  content: '';
  right: -17px;
  width: 1px;
  height: 48px;
  background: #eceeee;
}
.step-1 .local-img-box {
  position: relative;
  margin-left: 17px;
}
.step-1 .cloud-imgs-box + .local-img-box:after {
  position: absolute;
  top: 8px;
  content: '';
  left: -17px;
  width: 1px;
  height: 48px;
  background: #eceeee;
}
.step-1 .cloud-imgs-box {
  margin: 0 17px;
}
.step-1 .color-type-box {
  position: relative;
  margin-top: 18px;
  padding: 20px;
  padding-top: 1px;
  margin-left: 20px;
  margin-right: 20px;
  background: #f5f8fa;
}
.step-1 .color-type-box:after {
  position: absolute;
  content: '';
  top: -19px;
  left: 20px;
  width: 0;
  height: 0;
  border: 10px solid transparent;
  border-bottom: 10px solid #f5f8fa;
}
.permission-img {
  background: #ffffff;
  background-image: url("data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' rx='6' ry='6' stroke='%23C3C3C3FF' stroke-width='1' stroke-dasharray='5%2c 6' stroke-dashoffset='12' stroke-linecap='butt'/%3e%3c/svg%3e");
  display: flex;
  align-items: center;
  justify-content: center;
}
.permission-img img {
  width: 28px;
  height: 28px;
}
.error {
  margin-left: 6px;
  font-size: 14px;
  font-weight: 400;
  color: #ea4747;
}
`,Cn=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let Tn=class extends a.a{constructor(){super(...arguments),this.value=Object.assign({},nn.a.defaultValue),this.step=0,this.hasPermission=!1,this.subSpin=!1,this.imgType=null,this.imgIndex=0,this.localImageError=!1,this.localImagePreViewUrl="",this.cloudImgs=[],this.position="default",this.initName="",this.initTarget="",this.show=!1,this.isAutoName=!0,this.colors=["rgba(255,71,52,1)","rgba(255,122,9,1)","rgba(255,207,12,1)","rgba(42,233,121,1)","rgba(44,214,223,1)","rgba(0,116,255,1)","rgba(109,9,255,1)","rgba(255,36,160,1)"],this.close=()=>{const e=new CustomEvent("on-close");this.dispatchEvent(e),this.reset()},this.toNextStep=async()=>{const e=this.$step0.querySelectorAll("i-input"),t=await r.a.all(Array.prototype.map.call(e,async e=>await e.checkValidity()));if(R()(t).call(t,!1))return;const{name:i}=this.value;let o="";o=i.length>3?i.substr(0,2):i,this.cloudImgs=[],this.changeValue({bgText:o}),(this.hasPermission||l.s)&&this.getUrlIcon(),this.step=1},this.back=()=>{1===this.step&&(this.step=0,this.changeValue({bgType:"color"}),this.cloudImgs=[])},this.submit=async()=>{this.subSpin=!0;try{await this.saveImage()}catch(e){if(this.subSpin=!1,!this.localImagePreViewUrl)return;return void(e&&e.message?se.message.error(e.message):se.message.error(e||"upload error"))}this.subSpin=!1;const e={value:Object.assign({},this.value)};"color"!==this.value.bgType||this.value.bgColor||(e.value.bgColor=this.colors[0]),e.value.target=this.getFormateUrl(this.value.target),O.a.sendEvent({action:{addCustomIcon:c.a.getTargetLogDomain(e.value.target)}}),s.siteStore.submitSite(e.value),this.close()},this.getPermissionUrl=()=>{let e=[];return e=l.k?["http://*/","https://*/"]:l.r?"<all_urls>":["<all_urls>"],e}}changeValue(e){this.value=Object.assign(Object.assign({},this.value),e)}changeTarget(e){this.changeValue({target:e.currentTarget.value}),this.getTargetInfo()}async getTargetInfo(){let e=this.value.target;if(!e)return;R()(e).call(e,":")||(e="http://"+e);if(!/^https?:\/\/(.+\.)+.+/.test(e))return;const{data:t,error:i}=await ye.b.getUrlInfoWithPermission(e.split("?")[0]);if(1===this.step||(null==i?void 0:i.__CANCEL__))return;if(i)return this.isAutoName&&this.changeValue({name:""}),null;const{name:o}=t;this.changeValue({name:o}),this.isAutoName=!0}choosetextImg(){this.changeValue({bgType:"color"})}chooseCloudImg(e){this.changeValue({bgType:"image"}),this.imgType="cloud",this.imgIndex=e}chooseLocalImg(){this.changeValue({bgType:"image"}),this.imgType="local"}async saveImage(){if("color"===this.value.bgType){const e=await this.$texticon.getImg();this.changeValue({bgColorImage:e})}else if("image"===this.value.bgType){let e={};if("cloud"===this.imgType){const t=this.$cloudIcons.querySelectorAll("i-imgicon")[this.imgIndex];e=await t.getImg()}else if("local"===this.imgType){if(!this.localImagePreViewUrl)throw this.localImageError=!0,new Error("none img");e=await this.$localicon.getImg()}this.changeValue({bgImage:e.url,bgColor:e.bgColor})}}getFormateUrl(e){return R()(e).call(e,":")?e:"http://"+this.value.target}reset(e=!0){var t;this.step=0,this.value=Object.assign({},nn.a.defaultValue);this.$step0.querySelectorAll("i-input").forEach(e=>{e.reset()}),e&&(null===(t=this.$localicon)||void 0===t||t.reset())}updated(e){e.has("show")&&(this.show?this.value=Object.assign(Object.assign({},this.value),{name:this.initName,target:this.initTarget}):this.reset())}renderCloudImgs(){return n.e`
      <div class="cloud-imgs-box">
        ${this.cloudImgs.map((e,t)=>n.e`<div
            class="img-item-box cloud-img-box ${"image"===this.value.bgType&&"cloud"===this.imgType&&this.imgIndex===t?"active":""}"
          >
            <div class="img-item cloud-img">
              <i-imgicon
                .preViewImgUrl="${e.url}"
                .bgColor="${"transparent"}"
                .canDelete="${!1}"
                .active="${"image"===this.value.bgType&&"cloud"===this.imgType&&this.imgIndex===t}"
                @on-change="${()=>{this.chooseCloudImg(t)}}"
              ></i-imgicon>
            </div>
            <div class="name ellipsis">${i18n("icon")}${"0"+(t+1)}</div>
          </div>`)}
      </div>
    `}async getUrlIcon(){const e=this.getFormateUrl(this.value.target),t=(await ye.b.getLogoList(e)).data||[];if(t.length<2&&l.l){const i=await ye.b.getUrlIcon(e.split("?")[0]);i.data&&i.data.length>0&&(t.push(...i.data),t.length=2)}this.cloudImgs=t.map(e=>({url:e}))}async getPermission(){try{await fn.a.request([],this.getPermissionUrl()),this.hasPermission=!0,window.__INFINITY__.hasAllUrlPermission=this.hasPermission,this.getUrlIcon()}catch(e){console.log("getPermission ~ error",e)}}async checkPermission(){try{const e=await fn.a.has([],this.getPermissionUrl());this.hasPermission=!!e,window.__INFINITY__.hasAllUrlPermission=this.hasPermission}catch(e){console.log("checkPermission ~ error",e)}}renderPermissionIcon(){return n.e`
      <div class="cloud-imgs-box">
        <div class="img-item-box cloud-img-box ">
          <div @click="${this.getPermission}" class="img-item permission-img">
            <img src="${i(863)}" alt="" />
          </div>
          <div class="name ellipsis">${i18n("get_cloud_icon")}</div>
        </div>
      </div>
    `}firstUpdated(){this.checkPermission()}render(){const e=s.settingStore.sideRatio>.7?0:300*(s.settingStore.sideRatio-.7);return n.e`
      <infinito-modal style="--modal-padding:30px 0;" .onCancel="${this.close}" .open=${this.show}>
        <!-- <div class="mask"></div> -->
        <div class="custom-card ${this.position}" slot="body">
          <div class="title-box">
            <div @click="${this.back}" class="title-side ${1===this.step?"title-side-back":""}">
              ${1===this.step?n.e`<img src="${Object(re.a)("back.svg",!1)}" class="back" alt="" /> `:null}
              <span class="title ellipsis">${i18n("custom_site")}</span>
            </div>
            <!-- <img @click="${this.close}" src="${i(864)}" class="close" alt="" /> -->
          </div>
          <div .hidden=${0!==this.step} class="step-0">
            <div class="form-box">
              <i-input
                name="target"
                .value="${this.value.target}"
                .label="${i18n("website_address")}"
                .placeholder=${i18n("please_enter_url")}
                .validateMsg=${i18n("please_enter_url")}
                .validate="${async e=>!!e}"
                @on-change="${this.changeTarget}"
              ></i-input>
              <i-input
                name="name"
                .value="${this.value.name}"
                .label=${i18n("website_name")}
                .placeholder=${i18n("name_error")}
                @on-change="${e=>{this.changeValue({name:e.currentTarget.value}),this.isAutoName=!1}}"
              ></i-input>
            </div>
            <infinito-button
              class="step-btn"
              @click="${()=>{this.toNextStep()}}"
              >${i18n("next")}</infinito-button
            >
          </div>
          <div .hidden="${1!==this.step}" class="step-1 global-scrollbar">
            <div class="form-box">
              <div class="item">
                <div class="label-box">
                  <span class="label">${i18n("website_address")}</span>
                </div>
                <div class="target-content">
                  ${this.value.name?n.e`<div class="target-name ellipsis">${this.value.name}</div>
                        <div class="target-gap"></div>`:null}
                  <div class="target-target ellipsis">${this.value.target}</div>
                </div>
              </div>
              <div class="item">
                <div class="label-box">
                  <span class="label">${i18n("select_icon")}</span>
                  <span
                    .hidden="${"image"!==this.value.bgType||"local"!==this.imgType||!this.localImageError}"
                    class="error ellipsis"
                    >* ${i18n("please_upload_photos")}</span
                  >
                </div>
                <div class="imgs-box">
                  <div class="img-item-box color-img-box ${"color"===this.value.bgType?"active":""}">
                    <div class="img-item color-img" @click="${this.choosetextImg}">
                      <i-texticon
                        .bgColor="${this.value.bgColor||this.colors[0]}"
                        .bgFont="${this.value.bgFont}"
                        .bgText="${this.value.bgText}"
                      ></i-texticon>
                    </div>
                    <div class="name ellipsis">${i18n("color_icon")}</div>
                  </div>
                  ${this.cloudImgs.length?this.renderCloudImgs():!1===this.hasPermission&&l.l&&!l.h?this.renderPermissionIcon():null}
                  <div
                    class="img-item-box local-img-box ${"image"===this.value.bgType&&"local"===this.imgType?"active":""}"
                  >
                    <div class="img-item local-img">
                      <i-imgicon
                        class="local-img-icon"
                        .preViewImgUrl="${this.value.bgImage}"
                        .bgColor="${"transparent"}"
                        .canDelete="${!0}"
                        .active=${"image"===this.value.bgType&&"local"===this.imgType}
                        @on-change="${e=>{this.localImagePreViewUrl=e.detail.preViewImgUrl,this.localImagePreViewUrl&&this.chooseLocalImg()}}"
                      ></i-imgicon>
                    </div>
                    <div class="name ellipsis">${i18n("local_icon")}</div>
                  </div>
                </div>
              </div>
              <div .hidden="${"color"!==this.value.bgType}" class="color-type-box">
                <i-input name="displayname" .label=${i18n("icon_bg_text")} .placeholder=${i18n("please_input_bg_text")}>
                  <div class="bg-text" slot="input">
                    <i-textarea
                      .value="${this.value.bgText}"
                      .placeholder="${i18n("show_name")}"
                      @on-change="${e=>{this.changeValue({bgText:e.detail.value})}}"
                    ></i-textarea>
                  </div>
                </i-input>
                <i-input name="displayfont" .label=${i18n("font_size")}>
                  <div class="slider" style="margin-top: -2px;" slot="input">
                    <infinito-slider
                      style="--bg-color: #f5f8fa;"
                      @on-change="${e=>{this.changeValue({bgFont:e.detail.value})}}"
                      .value=${this.value.bgFont}
                      .min=${14}
                      .max=${74}
                    ></infinito-slider>
                  </div>
                </i-input>
                <i-input name="displaycolor" style="margin-top: 16px;" .label=${i18n("color")}>
                  <div class="color" style="margin-top:14px;" slot="input">
                    <i-colorpicker
                      .side="${!0}"
                      .value="${this.value.bgColor||this.colors[0]}"
                      .colors="${this.colors}"
                      .offsetRight="${e}"
                      @on-change="${e=>{this.changeValue({bgColor:e.detail.value})}}"
                    ></i-colorpicker>
                  </div>
                </i-input>
              </div>
            </div>
            <infinito-button class="step-btn" primary .loading="${this.subSpin}" @click="${this.submit}"
              >${i18n("add")}</infinito-button
            >
          </div>
        </div>
      </infinito-modal>
    `}};Tn.styles=[k.a,En],Cn([Object(n.f)()],Tn.prototype,"value",void 0),Cn([Object(n.f)()],Tn.prototype,"step",void 0),Cn([Object(n.f)()],Tn.prototype,"hasPermission",void 0),Cn([Object(n.f)()],Tn.prototype,"subSpin",void 0),Cn([Object(n.f)()],Tn.prototype,"imgType",void 0),Cn([Object(n.f)()],Tn.prototype,"imgIndex",void 0),Cn([Object(n.f)()],Tn.prototype,"localImageError",void 0),Cn([Object(n.f)()],Tn.prototype,"localImagePreViewUrl",void 0),Cn([Object(n.f)()],Tn.prototype,"cloudImgs",void 0),Cn([Object(n.g)({type:String})],Tn.prototype,"position",void 0),Cn([Object(n.g)({type:String})],Tn.prototype,"initName",void 0),Cn([Object(n.g)({type:String})],Tn.prototype,"initTarget",void 0),Cn([Object(n.g)({type:Boolean,reflect:!0})],Tn.prototype,"show",void 0),Cn([Object(n.h)(".step-0")],Tn.prototype,"$step0",void 0),Cn([Object(n.h)(".cloud-imgs-box")],Tn.prototype,"$cloudIcons",void 0),Cn([Object(n.h)("i-texticon")],Tn.prototype,"$texticon",void 0),Cn([Object(n.h)(".local-img-icon")],Tn.prototype,"$localicon",void 0),Tn=Cn([Object(n.c)("icons-custom")],Tn);var jn=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};class Pn{constructor(){this.customIconCardShow=!1,this.customIconUrl="",this.customIconTitle=""}showCustomIconCard(e="",t=""){this.customIconCardShow=!0,this.customIconUrl=e,this.customIconTitle=t}hideCustomIconCard(){this.customIconCardShow=!1,this.customIconUrl="",this.customIconTitle=""}}jn([x.g],Pn.prototype,"customIconCardShow",void 0),jn([x.g],Pn.prototype,"customIconUrl",void 0),jn([x.g],Pn.prototype,"customIconTitle",void 0),jn([x.b],Pn.prototype,"showCustomIconCard",null),jn([x.b],Pn.prototype,"hideCustomIconCard",null);const Rn=new Pn;var Ln=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let Nn=class extends a.a{constructor(){super(...arguments),this.handleSearch=e=>{const t=e.detail.text;t?(this.$iconsDefault.scrollToTop(),xn.search({page:0,type:"search",keyword:t}),0!==xn.activeNav&&(xn.changeNav(0),this.$iconsDefault.scrollSideToTop())):0===xn.activeNav&&xn.changeNav(1)},this.clear=()=>{0===xn.activeNav&&xn.changeNav(1)},this.clearSearch=()=>{var e;null===(e=this.$search)||void 0===e||e.clear(!1)},this.focusSearch=()=>{var e;c.a.isTouchScreendevice()||null===(e=this.$search)||void 0===e||e.focus()},this.showAddIcon=()=>{Rn.showCustomIconCard()}}setActiveStyle(){var e;null===(e=this.$iconsDefault)||void 0===e||e.setActiveStyle()}setActiveType(e){0===e&&(Rn.hideCustomIconCard(),0===xn.activeNav&&xn.changeNav(1),setTimeout(()=>{this.focusSearch()},20))}render(){return n.e` <div class="content-header">
        <div class="default-title">
          <i-search
            type="white"
            class="search-box"
            .searchBtnPosition="${"left"}"
            style="--height:40px"
            placeholder="${Object(J.i18n)("search_website")}"
            @i-search="${this.handleSearch}"
            @i-clear=${this.clear}
          >
          </i-search>
          <div @click="${()=>this.showAddIcon()}" class="custom-btn">
            <img src="${i(865)}" alt="" class="img" />
          </div>
        </div>
      </div>
      <div class="content">
        <icons-default @clear-search="${this.clearSearch}"></icons-default>
      </div>`}};Nn.styles=[k.a,_n],Ln([Object(n.h)("icons-default")],Nn.prototype,"$iconsDefault",void 0),Ln([Object(n.h)("i-search")],Nn.prototype,"$search",void 0),Nn=Ln([Object(n.c)("side-icons")],Nn);var Mn=n.b`.user-info {
  position: relative;
  display: flex;
  padding: 4px 0 12px 0;
}
.user-info > div {
  box-sizing: border-box;
  display: flex;
  align-items: center;
  width: 100%;
  cursor: pointer;
}
.user-info.login {
  padding-bottom: 24px;
}
.user-info .avatar-img {
  flex-shrink: 0;
  width: 56px;
  height: 56px;
  margin-right: 14px;
  border-radius: 50%;
  cursor: pointer;
}
.user-info .user-name-wrapper {
  flex: 1;
  overflow: hidden;
}
.user-info .qr-code {
  position: absolute;
  width: 24px;
  height: 24px;
  top: -16px;
  right: -16px;
  overflow: hidden;
  cursor: pointer;
}
.user-info .qr-code img {
  width: 100%;
}
.user-info .user-name {
  display: flex;
  align-items: center;
  margin-bottom: 2px;
  cursor: pointer;
}
.user-info .name {
  margin-right: 6px;
  font-size: 18px;
  font-weight: 500;
  cursor: pointer;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: pre;
  padding: 0 0 2px 4px;
}
.user-info .gender {
  width: 16px;
  height: 16px;
}
.user-info .email {
  font-size: 14px;
  font-weight: 300;
  color: #828282;
}
.user-info .svg {
  margin-left: auto;
  cursor: pointer;
}
.user-info i-svg {
  width: 16px;
  height: 16px;
}
.user-info + infinito-modal {
  --border-radius: 6px;
}
.synchronous {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  padding: 16px 0;
  border-width: 1px 0;
  border-style: solid;
  border-color: #eee;
}
.synchronous .title {
  color: #333;
  font-size: 12px;
  font-weight: 500;
}
.synchronous .time {
  margin-top: 8px;
  font-size: 12px;
  color: #6f6f6f;
}
.synchronous .time.hide {
  display: none;
}
.backup-wrapper,
.backup-wrapper .mange-backup,
.backup-wrapper .backup-btn {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 12px;
}
.backup-wrapper i-svg {
  width: 16px;
  height: 16px;
  cursor: pointer;
}
.backup-wrapper .mange-backup {
  margin: 0;
  cursor: pointer;
}
.backup-wrapper .mange-backup i-svg {
  margin-left: 5px;
}
.backup-wrapper span {
  color: #333;
  font-size: 12px;
  font-weight: 500;
}
.backup-wrapper .backup-btn {
  margin: 0;
  cursor: pointer;
}
.backup-wrapper .backup-btn i-svg {
  margin-right: 5px;
}
infinito-card[close] + infinito-card:not([close]) {
  margin-top: 30px;
}
infinito-card:not([close]) + infinito-card[close] {
  margin-top: 30px;
}
infinito-card {
  transition: margin-top 0.3s ease-in-out;
}
infinito-card p {
  margin: 0;
  margin-top: 12px;
  color: #656565;
  font-size: 12px;
  line-height: 22px;
}
infinito-card infinito-button {
  --button-color: #efefef;
  --border-color: none;
  --hover-color: #dfdfdf;
  --hover-font-color: #333;
  width: 122px;
  height: 42px;
}
infinito-card infinito-button.use-basic-version {
  width: 182px;
}
infinito-card .btns {
  display: flex;
  justify-content: space-between;
  margin-top: 24px;
}
infinito-card .btns.rating {
  padding: 0 30px;
}
infinito-card .payment .payment-cover {
  display: block;
  width: 280px;
  margin: 0 auto;
  margin-top: 40px;
}
infinito-card .payment + .btns {
  margin-bottom: 10px;
}
infinito-card .wechat_desc {
  -moz-user-select: text;
       user-select: text;
}
infinito-card .wechat {
  width: 132px;
  height: 132px;
  margin: 30px auto 0;
  box-shadow: 0px 12px 20px -8px rgba(0, 0, 0, 0.1);
}
infinito-card .wechat img {
  width: 100%;
  height: 100%;
}
.choose-plan {
  display: flex;
  justify-content: center;
  margin-top: 30px;
}
.suport {
  margin-top: 30px;
}
.suport infinito-button {
  position: relative;
  --hover-color: inherit;
  --button-padding: 0;
  --border-width: 0;
  width: 150px;
  height: 40px;
  transition: opacity 0.2s;
}
.suport infinito-button:hover {
  opacity: 0.7;
}
.suport infinito-button.facebook-group span {
  width: 105px;
  left: 35px;
  line-height: 20px;
}
.suport infinito-button.qq-group span {
  left: 60px;
  line-height: 20px;
}
.suport infinito-button img {
  width: 100%;
  height: 100%;
}
.suport infinito-button span {
  position: absolute;
  top: 10px;
  color: #fff;
  transition: all 300ms;
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
}
.suport infinito-button span:hover {
  opacity: 0.7;
}
.suport infinito-button span img {
  width: 100%;
  height: 100%;
}
.version {
  margin: 12px 0 8px;
}
ul {
  margin: 0;
  padding: 0;
  display: flex;
  flex-wrap: wrap;
}
li {
  list-style: none;
  width: 33%;
  margin-top: 16px;
}
li span {
  display: block;
  width: 100%;
  word-break: break-all;
  font-size: 14px;
  color: #333;
  text-decoration: none;
  cursor: pointer;
  transition: all 0.2s;
}
li span:hover {
  opacity: 0.8;
}
.icons {
  display: flex;
  flex-wrap: wrap;
}
.icons p {
  width: 40px;
  height: 40px;
  margin-top: 30px;
  margin-right: 30px;
  transition: all 300ms;
  cursor: pointer;
}
.icons p:hover {
  opacity: 0.6;
}
.icons p:nth-child(5n) {
  margin-right: 0;
}
.icons img {
  width: 100%;
  height: 100%;
}
.use-basic-account-migration {
  padding: 20px;
  background: #fff;
}
.use-basic-account-migration .logo {
  padding: 10px 0 30px;
}
.use-basic-account-migration .logo img {
  display: block;
  width: 68px;
  margin: 0 auto;
}
.use-basic-account-migration .control {
  margin-bottom: 20px;
}
.use-basic-account-migration .control .top {
  display: flex;
}
.use-basic-account-migration .control span {
  color: #333;
  font-weight: 500;
}
.use-basic-account-migration .control span.red-msg {
  margin-left: 4px;
  color: #ea4747;
  font-size: 14px;
  font-weight: 400;
}
.use-basic-account-migration .control input {
  width: 100%;
  padding: 10px 0;
  background: none;
  border: none;
  border-bottom: 1px solid #eee;
  outline: none;
}
.use-basic-account-migration .btns {
  margin: 60px 0 20px;
}
.use-basic-account-migration infinito-button {
  display: block;
  width: 220px;
  height: 38px;
  margin: 0 auto;
}
.use-basic-account-migration infinito-button.cancel {
  --border-color: #eee;
  --button-color: #eee;
  margin-top: 14px;
}
.backup-recovery {
  --padding-bottom: 0;
  --margin-left: 0;
  --margin-right: 0;
}
.backup-btn-box .backup-btn-card {
  padding: 0 20px;
}
.backup-btn-box .backup-btn-content {
  padding: 20px 0;
  border-top: 1px solid #eeeeee;
}
.backup-btn-box .backup-btn-card:first-of-type {
  margin-top: 4px;
}
.backup-btn-box .backup-btn-card:first-of-type .backup-btn-content {
  border-top-color: transparent;
}
.backup-btn-box .repair-card.focus {
  animation: focusblink 1.2s ease-in-out;
}
@keyframes focusblink {
  0% {
    transform: scale(0.95);
    box-shadow: 0px 4px 21px 0px rgba(0, 0, 0, 0);
    background: #fff;
  }
  35% {
    transform: scale(1.05);
    box-shadow: 0px 4px 21px 0px rgba(0, 0, 0, 0.2);
    background: #fcfcfc;
  }
  70% {
    transform: scale(1);
    box-shadow: 0px 4px 21px 0px rgba(0, 0, 0, 0);
    background: #fff;
  }
  100% {
    transform: scale(1);
    box-shadow: none;
    background: #fff;
  }
}
.backup-btn-box .backup-btn {
  min-height: 44px;
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  justify-content: center;
  cursor: pointer;
}
.backup-btn-box .backup-btn-title {
  display: flex;
  justify-content: space-between;
}
.backup-btn-box .backup-btn-title-text {
  font-size: 14px;
  font-weight: 400;
  color: #333333;
  line-height: 20px;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}
.backup-btn-box .backup-btn-desc {
  margin-top: 8px;
  font-size: 11px;
  font-weight: 400;
  color: #b3b3b3;
  line-height: 16px;
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
}
.backup-btn-box i-svg {
  width: 16px;
  height: 16px;
  color: #333234;
}
.icp {
  margin-top: 30px;
  text-align: center;
  pointer-events: none;
}
.icp-link {
  color: #333;
  font-size: 12px;
  opacity: 0.3;
  text-decoration: none;
  pointer-events: all;
}
.icp-link:hover {
  opacity: 0.9;
}
.hide {
  display: none;
}
`,Dn=i(786),Un=i.n(Dn),Bn=i(787),Fn=i.n(Bn),zn=i(788),Hn=i.n(zn),Wn=i(866),Gn=i.n(Wn),Vn=i(162);function qn(e){const t=document.createElement("div");t.innerHTML=e;const i=t.firstChild;return(null==i?void 0:i.textContent)?i.textContent.substring(0,20):t.textContent.substring(0,20)}const Yn=async e=>{let t="";const i={list:e.map(e=>{const{_v2:i={}}=e;return e.__select__&&(t=(null==i?void 0:i.id)||""+e.time),{content:e.text,time:e.time,id:i.id||""+e.time,title:i.title||qn(e.text),updatetime:i.updatetime||+Date.now(),fontSize:14}})};return i.checkedId=t||i.list[0].id,i},Qn={c34f380f9d9136fc3b4dbd32f24feea3:"c4ba1648d4014bad7fdea130cd421589","9001elkctdjjfkgmudthhs3li21nez":"6dcbbe4e9dc6ef2fd68da7d8befd117c"},Xn={c26068f55492ef9e93e05e34a3b31139:"C26068F55492EF9E93E05E34A3B31139"},Kn=((e=>{const t={};for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){t[e[i]]=i}})(Qn),{pagin:!1,scaleSide:1,scaleMain:1,rowGap:.2,colGap:.3,easing:"linear",iconShadow:!1,iconScale:.5,searchSuggest:!0,searchShadow:!0,searchScale:.82,searchRadius:.5,searchOpacity:1,fontShadow:!0,fontSize:15,folderInfo:{},noteFontsize:14,customItem:[3,4],url:"https://infinitypro-img.infinitynewtab.com/findaphoto/bigLink/default.png",rawUrl:"https://infinitypro-img.infinitynewtab.com/findaphoto/bigLink/default.png",wallpaperOpacity:40}),Zn=(e,t)=>{const i=[];return e.forEach(e=>{e.forEach(e=>{e.children&&1===e.children.length&&(Object.assign(e,e.children[0]),e.children=void 0)}),i.push(...((e,t)=>{const i=[];if(e.length<=t)return[e];const o=Math.ceil(e.length/t);for(let r=0;r<o;r++){const o=t*r;i.push(e.slice(o,o+t))}return i})(e,t))}),i.filter(e=>e.length)},Jn="eed2a9287b324510678cd5e714888e99",ea="https://infinityicon.infinitynewtab.com/assets/weather/default.png",ta="#36B3FF",ia=async e=>{function t(e){const t={uuid:e.seId||c.a.randomId("v1-search-"),logo:e.logo,name:e.name,desc:e.desc,updatetime:e.updatetime};return t.uuid=Xn[t.uuid]||t.uuid,e.bgColor&&("transparent"===e.bgColor?t.bgColor="transparent":t.bgColor="#"+e.bgColor),e.types&&(t.types=e.types),t}const i=t(e.current);e.current.isCustom?i.target=e.current.types[0].url:i.types=e.current.types;return{searchEngine:{current:i,all:(e.all||[]).map(e=>{const i=t(e);return e.isCustom?i.target=e.types[0].url:i.types=e.types,i}),addList:(e.additions||[]).map(e=>{const i=t(e);return i.target=e.url,i}),custom:(e.customEngines||[]).map(e=>{const i=t(e);return i.target=e.types[0].url,i})}}},oa=async(e,t)=>{function i(e){return Number((e/100).toFixed(2))}let o=!0;const r=function(e,t){let i=null;switch(e+"*"+t){case"2*4":case"2*5":i={iconScale:.5,colGap:.3,rowGap:.2,searchScale:.82};break;case"2*6":i={iconScale:.6,colGap:.3,rowGap:.3,searchScale:.9};break;case"2*7":i={iconScale:.7,colGap:.3,rowGap:.3,searchScale:.9};break;case"3*3":i={iconScale:.7,colGap:.24,rowGap:.2,searchScale:.82}}return i}(e.column,e.row);return r&&r.rowGap===t.rowGap&&r.colGap===t.colGap&&(o=!1),{setting:{notice:{gmail:e.isOpentGmailNotication,gmailVoice:e.isOpentGmailRingNotication,gmailNumber:e.isShowGmailNum,todoNumber:e.isShowToDoNumbersInIco},link:{icon:e.isOpenLinkInNewTab,search:e.isSearchInNewTab,bookmark:e.isOpenBookmarkInNewTab,history:e.isOpenBookmarkInNewTab},view:{topBookmark:e.isShowTopBar&&"bookmarks"===e.topBarType,topUseful:e.isShowTopBar&&"topsites"===e.topBarType,windmill:e.isShowRandomWallpaperBtn,pagin:t.pagin,scaleSide:t.scaleSide,scaleMain:t.scaleMain},layout:{row:e.column,col:e.row,rowGap:t.rowGap,colGap:t.colGap,custom:o,customItem:o?[e.column,e.row]:t.customItem},animation:{easing:t.easing},icon:{miniMode:e.isMinimalistMode,shadow:t.iconShadow,opacity:i(parseInt(e.iconOpacity,10)),radius:i(Math.floor(e.iconBorderRadius/2)),scale:t.iconScale,startAnimation:e.isOpenStartAnimation,isHideIconName:e.isHideIconName||!1},search:{hide:!e.isShowSearchBox,searchSuggest:t.searchSuggest,hideCategory:!e.isShowSearchType,hideButton:!e.isShowSearchBtn,shadow:t.searchShadow,scale:t.searchScale,radius:t.searchRadius,opacity:t.searchOpacity},font:{shadow:t.fontShadow,size:t.fontSize,color:e.fontColor},_v1Setting:{isAutoBackUp:e.isAutoBackUp,gmailUnreadNum:e.gmailUnreadNum,toDoNumber:e.toDoNumber,wallpaperType:e.wallpaperType,woeid:e.woeid,tempUnitC:e.tempUnitC,isBlurWallpaper:e.isBlurWallpaper,bingMd5:e.bingMd5,autoWallpaper:e.autoWallpaper,"random-wallpaper":e["random-wallpaper"]}}}};var ra=i(135),na=i.n(ra);const aa=async(e,t,i)=>{function o(e){var t;const{_v2:i={}}=e,o={name:e.name,id:e.id||c.a.randomId("site-"),uuid:(Qn[e.uid]?Qn[e.uid]:e.uid)||c.a.randomId("siteid-"),updatetime:e.updateTime||Date.now(),target:e.url||"",type:0===(null===(t=e.url)||void 0===t?void 0:t.indexOf("infinity://"))?"app":"web",bgImage:e.src,bgType:e.src?"image":"color",bgText:e.showText||"",bgFont:i.bgFont||30};return o.uuid===Jn&&(o.bgColor=ta,o.bgImage=ea),e.bgColor?"transparent"===e.bgColor||e.bgColor.startsWith("rgb")||e.bgColor.startsWith("#")?o.bgColor=e.bgColor:o.bgColor="#"+e.bgColor:o.bgColor="rgba(255,71,52,1)",o}const{folderInfo:r={}}=i,n={},a=e.map(e=>na()(e).call(e,(e,t)=>{const{_v2:i={}}=t,a=i.folderId;if(a){if(n[a])return n[a].children.push(o(t)),e;n[a]=Object.assign(Object.assign({},r[a]),{children:[o(t)]}),e.push(n[a])}else e.push(o(t));return e},[]));return{sites:Zn(a,t.row*t.column)}},sa=async e=>{const{todos:t=[],dones:i=[]}=e;return{todoList:[...t,...i].map(e=>{const{_v2:t={}}=e;return{done:e.isDo,text:e.text,todoId:e.todoId,time:t.time||Date.now(),updatetime:t.updatetime||Date.now(),dueDate:t.dueDate,dueTime:t.dueTime}})}},la=async(e,t)=>{const i={type:"cloud",url:e["random-wallpaper"]||t.url,rawUrl:e["random-wallpaper"]||t.rawUrl,opacity:t.wallpaperOpacity,blur:e.isBlurWallpaper?30:0};if("local"===e.wallpaperType&&(i.type="local"),"auto"===e.wallpaperType){i.type="cloudAuto",i.switchType="one-day",i.wpSource="InfinityLandscape";const e=new Date,t=`https://wallpaper.infinitynewtab.com/InfinityWallpaper/${e.getMonth()+1}_${e.getDate()}.jpg`;i.url=t,i.rawUrl=t}if("bing"===e.wallpaperType){i.type="bing",i.wpSource="bing",i.id=void 0;const t="https://img.infinitynewtab.com/bingWallpaper/bg.jpg?md5="+e.bingMd5;i.url=t,i.rawUrl=t}return i},ca={Google:{name:"Google",seId:"a22dcc25c75de3f58cb518e32c576865",logo:"https://infinity-permanent.infinitynewtab.com/infinity/search-add/google.png",desc:"",bgColor:"transparent",types:[{name:"web",url:"https://www.google.com/search?q="},{name:"images",url:"https://www.google.com/search?tbm=isch&q="},{name:"news",url:"https://www.google.com/search?tbm=nws&q="},{name:"videos",url:"https://www.google.com/search?tbm=vid&q="},{name:"maps",url:"https://www.google.com/maps/preview?q="}]},search:{name:"search",seId:"dd3af9cc97ad7de8984baaf59514bb52",logo:"https://infinity-permanent.infinitynewtab.com/infinity/search-add/mychromesearch.png",desc:"",bgColor:"transparent",types:[{name:"web",url:"https://mychromesearch.com/search?ac=6891140047&q="},{name:"images",url:"https://www.google.com/search?tbm=isch&q="},{name:"news",url:"https://www.google.com/search?tbm=nws&q="},{name:"videos",url:"https://www.google.com/search?tbm=vid&q="},{name:"maps",url:"https://www.google.com/maps/preview?q="}]},Yahoo:{name:"Yahoo",seId:"C26068F55492EF9E93E05E34A3B31139",logo:"https://infinity-permanent.infinitynewtab.com/infinity/search-add/yahoo.png",desc:"",bgColor:"transparent",types:[{name:"web",url:"https://search.yahoo.com/search?p="},{name:"images",url:"https://images.search.yahoo.com/search/images?p="},{name:"news",url:"https://news.search.yahoo.com/search?p="},{name:"videos",url:"https://video.search.yahoo.com/search/video?p="}]},Bing:{name:"Bing",seId:"5a6afaa65c95a841f6149c4e1591a637",logo:"https://infinity-permanent.infinitynewtab.com/infinity/search-add/bing_new.png",desc:"",bgColor:"transparent",types:[{name:"web",url:"https://www.bing.com/search?isource=infinity&iname=bing&itype=web&q="},{name:"images",url:"https://www.bing.com/images/search?isource=infinity&iname=bing&q="},{name:"news",url:"https://global.bing.com/news/search?isource=infinity&iname=bing&q="},{name:"videos",url:"https://www.bing.com/videos/search?isource=infinity&iname=bing&q="},{name:"maps",url:"https://www.bing.com/ditu/?isource=infinity&iname=bing&q="}]},"百度":{name:"Baidu",seId:"0c47016a8cd2d631bc618d4f3a741335",logo:"https://infinity-permanent.infinitynewtab.com/infinity/search-add/baidu.png",desc:"",bgColor:"transparent",types:[{name:"web",url:"https://www.baidu.com/s?tn=02003390_hao_pg&ie=utf-8&wd="},{name:"images",url:"https://image.baidu.com/search/index?tn=baiduimage&ie=utf-8&word="},{name:"news",url:"https://news.baidu.com/ns?tn=news&ie=utf-8&word="},{name:"videos",url:"http://video.baidu.com/v?ie=utf-8&word="},{name:"maps",url:"http://map.baidu.com/?newmap=1&ie=utf-8&s=s%26wd%3D"}]},Sogou:{name:"sogou",seId:"a3e908082e31a92396970f8b58583863",logo:"https://infinity-permanent.infinitynewtab.com/infinity/search-add/sougou.png",desc:"",bgColor:"transparent",types:[{name:"web",url:"https://www.sogou.com/sogou?pid=sogou-site-7985672db979303a&query="},{name:"images",url:"https://pic.sogou.com/pics?ie=utf8&query="},{name:"news",url:"http://news.sogou.com/news?ie=utf8&query="},{name:"videos",url:"http://v.sogou.com/v?ie=utf8&query="},{name:"weixin",url:"http://weixin.sogou.com/weixin?ie=utf8&query="}]},se360:{name:"360search",seId:"70adaba7374f6089aca0374dea85df00",logo:"https://infinity-permanent.infinitynewtab.com/infinity/search-add/360.png",desc:"",bgColor:"transparent",types:[{name:"web",url:"https://www.so.com/s?src=lm&ls=sm2054017&lm_extend=ctype:4&q="},{name:"images",url:"https://image.so.com/i?q="},{name:"news",url:"http://news.so.com/ns?q="},{name:"videos",url:"http://video.so.com/v?q="}]}},da={weather:{uid:"eed2a9287b324510678cd5e714888e99",name:"weather",url:"infinity://weather",src:"https://infinityicon.infinitynewtab.com/user-share-icon/b6a95410ed77627337567fea2cbb157c.png",iconType:"official"},todos:{uid:"c09f31db43d7faca5bf659fadad3967c",name:"todos",url:"infinity://todos",src:"https://infinityicon.infinitynewtab.com/user-share-icon/6e49210c084629259f22609980c48ecf.png",iconType:"official"},notepad:{uid:"ea5ac5d9e9e08c1d57ad413e9e38d376",name:"notes",url:"infinity://notes",src:"https://infinityicon.infinitynewtab.com/user-share-icon/006b88c07a2e87d5a61f3c969a70575c.png",iconType:"official"},bookmarks:{uid:"96646a13688f5bfd0aaf4811a579aee1",name:"bookmarks",url:"infinity://bookmarks",src:"https://infinityicon.infinitynewtab.com/user-share-icon/31a36139ccf4b9b005ec55445bf833b0.png",iconType:"official"},history:{uid:"4528cef4f8d66e661cb3143af733694e",name:"history",url:"infinity://history",src:"https://infinityicon.infinitynewtab.com/user-share-icon/faa06f85d37cdd552e2e57cb282ad0f7.png",iconType:"official"},gmail:{uid:"c5cb65ab55611b1d8bb2e09ad143b797",name:"Gmail",url:"infinity://gmail",src:"https://infinityicon.infinitynewtab.com/user-share-icon/7b6cee8dfbfeff522a7668c924429ad7.png",iconType:"official"},setting:{uid:"552fa3a378b29375843fa3d021cbe129",name:"settings",url:"infinity://settings",src:"https://infinityicon.infinitynewtab.com/user-share-icon/9622b98e90dd4f107d23481566095b34.png",iconType:"official"},apps:{uid:"194dd7b46ac16ac93becf5386f14bcca",name:"extension",url:"infinity://extension",src:"https://infinityicon.infinitynewtab.com/icon/194dd7b46ac16ac93becf5386f14bcca.png",iconType:"official"}},pa=e=>{var t,i;let o=e.settings,r=null===(t=e.otherData)||void 0===t?void 0:t.notes,n=null===(i=e.otherData)||void 0===i?void 0:i.todos,a=e.searches,s=e.icons;if(!(o&&r&&n&&a&&s)){const{setting:t,main:i}=e,l=JSON.parse(decodeURIComponent(t)),d=JSON.parse(decodeURIComponent(i));o||(o=(e=>{const t={column:2,row:5,isAutoBackUp:!1};if(e.iconNum){const[i,o]=e.iconNum.split("x");t.column=parseInt(i)||2,t.row=parseInt(o)||5}return t.isAutoBackUp=e.isAutoBackUp||!1,t.bingMd5=(new Date).getTime(),t.isOpenLinkInNewTab=e.openInNewtab,t.isSearchInNewTab=e.searchInNewtab,t.isOpenBookmarkInNewTab=e.OpenBookmarksInNewtab,t.isOpentGmailNotication=e.GmailMessage,t.isOpentGmailRingNotication=e.notificationSound,t.isShowSearchBox=e.searchBox,t.isShowSearchType=e.searchType,t.iconBorderRadius=e.iconFillet,t.iconOpacity=e.iconOpacity,t.tempUnitC="Celsius"===e.temperatureUnit,t.fontColor=e.fontColor,t.isMinimalistMode=e.minimalistMode,t.isShowTopBar=e.displayAtTop,t.topBarType="Bookmarksbar"===e.displayTopType?"bookmarks":"topsites",t.isOpenStartAnimation=e.startAnimation,t.wallpaperType="local","infinity"===e.bgType?t.wallpaperType="auto":"bing"===e.bgType?t.wallpaperType="bing":"random"===e.bgType&&(t.wallpaperType="random"),t["random-wallpaper"]=e.lastWallpaper,t.isBlurWallpaper=e.blurWallpaper,t})(l)),r||(r=(e=>{const t=e.notes||[];return t.length?t.map(e=>({title:e.title,content:e.text,time:Date.now(),id:"note-"+Date.now(),updatetime:Date.now(),fontSize:14})):[]})(l)),n||(n=(e=>{const t=e.todostrue||[],i=e.todosfalse||[];return[...t.map(e=>({text:e,done:!0})),...i.map(e=>({text:e,done:!1}))].map(e=>Object.assign(Object.assign({},e),{todoId:"todo-"+Date.now(),time:Date.now(),updatetime:Date.now()}))})(l)),a||(a=(e=>({current:ca[e.searchEngine]||ca.search,all:Object.keys(ca).filter(e=>"search"!==e).map(e=>ca[e]),customEngines:[],additions:[]}))(l)),s||(s=(e=>{try{for(let t=0;t<e.length;t++){const i=e[t];for(let e=0;e<i.length;e++){const t=i[e];let o={};if(t.bgColor&&"rgba(0,0,0,0)"===t.bgColor.replace(/\s/g,"")&&(t.bgColor="transparent"),Object.prototype.hasOwnProperty.call(da,t.type))o=da[t.type],o.name=t.name||o.name;else if("ico"!==t.type||t.title)if("custom"===t.type||t.title)o.bgColor=t.bgColor?t.bgColor:"transparent",o.iconType="custom",o.name=t.name,o.showText=t.title.substr(0,2),o.url=t.url,t.ico?(o.customType="image",o.src=t.ico):(o.customType="text",o.src=""),o.uid=c.a.randomId("basic-old");else{if("app"!==t.type)continue;o.bgColor=t.bgColor,o.iconType="app",o.src=t.ico,o.name=t.name,o.url=t.url}else{o.iconType="official",o.name=t.name,o.url=t.url;const e=t.ico.indexOf("ouddn.com");if(e>0){const i=t.ico.substr(e+9,t.ico.length);o.src="https://infinityicon.infinitynewtab.com"+i}else o.src=t.ico;if(0===o.src.indexOf("https")){let e;try{e=new sr.a(o.src),o.src=e.origin+e.pathname}catch(e){}}o.bgColor=t.bgColor?t.bgColor:"transparent",o.uid=c.a.randomId("basic-old")}i[e]=o}}}catch(e){console.error("兼容旧数据getV1Icons ~ e:",e)}return e||[[]]})(d))}return{v1sSettings:o,v1Notes:r,v1Todos:n,v1Searches:a,v1Icons:s}},ha=async e=>await(async e=>{const{v1sSettings:t,v1Icons:i,v1Notes:o,v1Searches:n,v1Todos:a}=pa(e),s=(e=>{let t={};switch(e.column+"*"+e.row){case"2*5":t={iconScale:.6,colGap:.5,rowGap:.35,searchScale:.93};break;case"3*4":t={iconScale:.8,colGap:.6,rowGap:.6,searchScale:.93};break;case"3*5":t={iconScale:.8,colGap:.5,rowGap:.7,searchScale:.93};break;case"3*6":t={iconScale:.75,colGap:.45,rowGap:.7,searchScale:.93}}return t})(t),l=Object.assign(Object.assign({},Kn),s),[c,d,p,h,u,g]=await r.a.all([oa(t,l),Yn(o),sa(a),ia(n),aa(i,t,l),la(t,l)]);return{setting:c,note:d,todo:p,searcher:h,site:u,wallpaper:g}})(e);i(867);var ua=n.b`.reward-modal-wrapper {
  width: 370px;
}
.reward-modal-wrapper .t {
  margin: 20px 0;
  color: #333;
  font-size: 20px;
  font-weight: 500;
  text-align: center;
}
.reward-modal-wrapper .reward-body {
  padding: 0 20px;
}
.reward-modal-wrapper .reward-head {
  display: flex;
  padding: 0 70px;
  justify-content: space-between;
  color: #999;
  font-size: 14px;
  border-bottom: 1px solid #EBEBEB;
}
.reward-modal-wrapper .reward-head > div {
  position: relative;
  padding-bottom: 13px;
  cursor: pointer;
}
.reward-modal-wrapper .reward-head > div::after {
  content: "";
  position: absolute;
  left: 0;
  bottom: 0;
  width: 100%;
  height: 2px;
  background: #fff;
}
.reward-modal-wrapper .reward-head > div.active {
  color: #333;
}
.reward-modal-wrapper .reward-head > div.active::after {
  background: #333;
}
.reward-modal-wrapper .reward-qrcode {
  padding-top: 25px;
}
.reward-modal-wrapper .reward-qrcode + p {
  margin: 22px 0 4px;
  font-size: 20px;
  text-align: center;
}
`,ga=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};const fa={0:i(868),10:i(869),15:i(870),20:i(871),25:i(872)},ma={0:i(873),10:i(874),15:i(875),20:i(876),25:i(877)};let ba=class extends n.a{constructor(){super(...arguments),this.payType="",this.donateMoney=""}render(){return n.e`
      ${"alipay"===this.payType?n.e`<img .src=${fa[this.donateMoney]} alt="qrcode" />`:n.e`<img .src=${ma[this.donateMoney]} alt="qrcode" />`}
    `}};ba.styles=n.b`
    :host {
      display: block;
      width: 220px;
      height: 220px;
      margin: 0 auto;
    }
    img {
      width: 220px;
      height: 220px;
    }
  `,ga([Object(n.g)({type:String})],ba.prototype,"payType",void 0),ga([Object(n.g)({type:String})],ba.prototype,"donateMoney",void 0),ba=ga([Object(n.c)("donate-qrcode")],ba);var ya=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let va=class extends n.a{constructor(){super(...arguments),this.open=!1,this.payType="",this.donateMoney="",this.handleClose=()=>{this.open=!1,this.dispatchEvent(new CustomEvent("on-cancel"))}}render(){return n.e`
      <infinito-modal .open=${this.open} .onCancel=${this.handleClose}>
        <div slot="body" class="reward-modal-wrapper">
          <h2 class="t">${Object(J.i18n)("give_money")}</h2>
          <div class="reward-body">
            <div class="reward-head">
              <div class="${"alipay"===this.payType?"active":""}" @click=${()=>this.payType="alipay"}>
                ${Object(J.i18n)("zhifubao")}
              </div>
              <div class="${"weixin"===this.payType?"active":""}" @click=${()=>this.payType="weixin"}>
                ${Object(J.i18n)("wechat")}
              </div>
            </div>
            <div class="reward-qrcode">
              <donate-qrcode payType="${this.payType}" donateMoney="${this.donateMoney}"></donate-qrcode>
            </div>
            <p>${Object(J.i18n)("currency_symbol")}${0===Number(this.donateMoney)?Object(J.i18n)("any_money"):this.donateMoney}</p>
          </div>
        </div>
      </infinito-modal>
    `}};va.styles=ua,ya([Object(n.g)({type:Boolean,reflect:!0})],va.prototype,"open",void 0),ya([Object(n.g)({type:String})],va.prototype,"payType",void 0),ya([Object(n.g)({type:String})],va.prototype,"donateMoney",void 0),va=ya([Object(n.c)("donate-section")],va);var wa=i(878),xa=i.n(wa),_a=i(879),Aa=i.n(_a),Sa=i(789),ka=i.n(Sa),Oa=i(790),Ia=i.n(Oa),$a=n.b`.login-wrapper {
  display: flex;
}
.login-wrapper .bg {
  width: 380px;
  min-height: 500px;
}
.login-wrapper .form {
  box-sizing: border-box;
  width: 420px;
  padding: 40px 45px 24px;
  background: #f9f9f9;
  border-radius: 0px 6px 6px 0px;
}
.login-wrapper .large-title {
  font-size: 28px;
  font-weight: 600;
  margin: 0;
  margin-bottom: 5px;
}
.login-wrapper .large-title + p {
  font-size: 14px;
  font-weight: 300;
  margin: 0;
  font-family: PingFangSC-Light, PingFang SC;
  height: 23px;
  color: #333;
  line-height: 20px;
}
.login-wrapper .form-control {
  margin-top: 30px;
}
.login-wrapper .form-control infinito-button {
  --button-color: #333;
  width: 100%;
  height: 52px;
}
.login-wrapper .form-control infinito-input {
  min-height: 80px;
}
.login-wrapper .no-account {
  display: flex;
  width: 100%;
  justify-content: space-between;
  margin-top: 10px;
  font-weight: 400;
  font-family: PingFangSC-Regular, PingFang SC;
}
.login-wrapper .no-account p {
  margin: 0;
  font-size: 13px;
  color: #333;
  text-decoration: none;
  cursor: pointer;
  transition: opacity 300ms;
}
.login-wrapper .no-account p:hover {
  opacity: 0.8;
}
.login-wrapper .third-party {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-top: 36px;
}
.login-wrapper .third-party span {
  font-size: 12px;
  color: #ccc;
}
.login-wrapper .third-party .icons {
  display: flex;
  width: 100%;
  margin-top: 20px;
  justify-content: center;
}
.login-wrapper .third-party p {
  cursor: pointer;
  margin-top: 0;
  margin-bottom: 0;
}
.login-wrapper .third-party p:not(:last-child) {
  margin-right: 30px;
}
.login-wrapper .third-party p:hover {
  opacity: 0.8;
}
.login-wrapper .third-party img {
  width: 32px;
  height: 32px;
}
.abandon-tips {
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s;
  width: 100%;
  padding: 11px 20px;
  box-sizing: border-box;
  position: absolute;
  bottom: 43px;
  left: 0;
  min-height: 30px;
  background: #ffefc7;
  border-radius: 4px;
  border: 1px solid #f6e4b6;
  font-size: 12px;
  color: #333333;
  line-height: 17px;
  --bubble-left: 9999px;
}
.abandon-tips:before,
.abandon-tips:after {
  pointer-events: none;
  content: '';
  width: 0;
  height: 0;
  position: absolute;
  border-style: solid;
  border-width: 7px 6px;
  border-color: #f6e4b6 transparent transparent;
  left: var(--bubble-left);
  bottom: -14px;
}
.abandon-tips:after {
  border-color: #ffefc7 transparent transparent;
  bottom: -13px;
}
.abandon:hover ~ .abandon-tips {
  opacity: 1;
  pointer-events: all;
}
.abandon {
  width: 32px;
  height: 32px;
  -webkit-mask-image: var(--logo);
          mask-image: var(--logo);
  background-color: #ccc;
  -webkit-mask-repeat: no-repeat;
          mask-repeat: no-repeat;
  -webkit-mask-size: contain;
          mask-size: contain;
}
`,Ea=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};const Ca=[{name:"google",src:"icon_google"},{name:"qq",src:"icon_qq"},{name:"wechat",src:"icon_wechat"},{name:"sina",src:"icon_sina",abandon:!0},{name:"facebook",src:"icon_facebook",abandon:!0}].map(e=>Object.assign(Object.assign({},e),{src:i(791)(`./${e.src}.png`)}));let Ta=class extends n.a{constructor(){super(...arguments),this.store=s.userStore,this.emailError="",this.passwordError="",this.modalOpen=!1,this.loading=!1}setBubbleLeft(e){const t=10+62*e+10;this.abandonTips.style.setProperty("--bubble-left",t+"px")}updated(e){e.forEach((e,t)=>{"modalOpen"===t&&(!1===e?setTimeout(()=>{this.emailInput.shadowRoot.querySelector("input").focus()},500):setTimeout(()=>{this.emailInput.value="",this.passwordInput.value="",this.passwordInput._show=!1,this.passwordError="",this.emailError=""},500))})}render(){return n.e`
      <div class="login-wrapper">
        <div
          class="bg"
          style=${Object(to.a)({background:`url(${Object(re.b)("https://infinityicon.infinitynewtab.com/assets/background_image/login-bg.png")})`,backgroundSize:"cover"})}
        ></div>
        <div class="form">
          <div>
            <h2 class="large-title">${Object(J.i18n)("welcome_infinity")}</h2>
            <p>${Object(J.i18n)("login_now")}</p>
          </div>
          <div class="form-control">
            <infinito-input
              name="email"
              placeholder="${J.IS_ZH?Object(J.i18n)("email_or_phone_number_tips"):Object(J.i18n)("email")}"
              .error=${this.emailError}
              @onfocus=${()=>{this.emailError=""}}
            >
            </infinito-input>
            <infinito-input
              name="password"
              type="password"
              .isShowEye=${!1}
              placeholder=${Object(J.i18n)("password")}
              .error=${this.passwordError}
              @onfocus=${()=>{this.passwordError=""}}
              @keyup=${this.handleKeyUp}
            >
            </infinito-input>
            <infinito-button primary .loading=${this.loading} @click="${this.handleLogin}">
              ${Object(J.i18n)("next")}
            </infinito-button>
          </div>
          <div class="no-account">
            <p style="margin-right:10px" @click="${this.toRegister}">${Object(J.i18n)("no_account_register")}</p>
            <p @click="${this.toFindPassword}">${Object(J.i18n)("forget_password")}</p>
          </div>
          <div class="third-party">
            <span>${Object(J.i18n)("thirt_party")}</span>
            <div class="icons">
              ${Ca.map((e,t)=>e.abandon?n.e`
                    <p
                      class="abandon"
                      style="--logo:url(${e.src})"
                      @mouseover="${()=>this.setBubbleLeft(t)}"
                      @click="${t=>this.onClick(t,e.name)}"
                    ></p>
                  `:n.e`
                  <p @click="${t=>this.onClick(t,e.name)}">
                    <img .src="${e.src}" />
                  </p>
                `)}
              <div class="abandon-tips">${Object(J.i18n)("login_abandon_tips")}</div>
            </div>
          </div>
        </div>
      </div>
    `}toFindPassword(e){e.preventDefault();let t="/find-password/index.html";l.l&&(t=window.chrome.runtime.getURL(t)),c.a.openUrl(t,!0,e)}toRegister(e){e.preventDefault();let t="/user-register/index.html";l.l&&(t=window.chrome.runtime.getURL(t)),c.a.openUrl(t,!0,e)}onClick(e,t){e.preventDefault(),this.store.thirdPartyLogin(t)}handleKeyUp(e){13===e.keyCode&&(e.preventDefault(),this.handleLogin(e))}async handleLogin(e){if(e.stopPropagation(),this.loading)return;const t=this.emailInput.value,i=this.passwordInput.value,o=this.checkEmailOrPhone(nr()(t).call(t));if(this.emailError=o.error,!this.emailError)if(i){try{this.loading=!0,await this.store.login({account:t,password:i,type:o.type}),setTimeout(()=>{this.emailInput.value="",this.passwordInput.value=""},1e3)}catch(e){"3006"===e.message&&setTimeout(()=>{this.passwordInput.value="",this.passwordInput.shadowRoot.querySelector("input").focus()},500)}this.loading=!1}else this.passwordError=Object(J.i18n)("password_dont_empty")}checkEmailOrPhone(e){return e?/^\w+([+-.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(e)?{type:"email"}:/^1[3456789]\d{9}$/.test(e)?{type:"phone"}:{error:J.IS_ZH?Object(J.i18n)("please_enter_right_account"):Object(J.i18n)("email_format_error")}:{error:Object(J.i18n)("cannot_empty")}}};Ta.styles=$a,Ea([Object(n.h)('infinito-input[name="email"]')],Ta.prototype,"emailInput",void 0),Ea([Object(n.h)(".abandon-tips")],Ta.prototype,"abandonTips",void 0),Ea([Object(n.h)('infinito-input[name="password"]')],Ta.prototype,"passwordInput",void 0),Ea([Object(n.g)({type:String})],Ta.prototype,"emailError",void 0),Ea([Object(n.g)({type:String})],Ta.prototype,"passwordError",void 0),Ea([Object(n.g)({type:Boolean,reflect:!0})],Ta.prototype,"modalOpen",void 0),Ea([Object(n.g)({type:Boolean})],Ta.prototype,"loading",void 0),Ta=Ea([Object(n.c)("user-login")],Ta);var ja=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let Pa=class extends n.a{constructor(){super(...arguments),this.store=s.userStore}render(){return n.e`
      <div class="loading-wrapper">
        <infinito-spin spinning .isSvg=${l.p}></infinito-spin>
        <div class="tips">${Object(J.i18n)("loging")}</div>
        <infinito-button @click="${this.handleClick}">${Object(J.i18n)("cancel_login")}</infinito-button>
      </div>
    `}async handleClick(){this.store.cancelLogin()}};Pa.styles=n.b`
    .loading-wrapper {
      display: flex;
      flex-flow: column;
      justify-content: center;
      align-items: center;
      width: 800px;
      height: 500px;
      background: #fff;
      border-radius: 6px;
    }
    .tips {
      margin: 80px 0 40px;
      font-size: 20px;
      font-weight: 300;
      color: #333;
    }
    infinito-button {
      --button-color: #efefef;
      --border-color: #efefef;
      --hover-color: #dfdfdf;
      --hover-font-color: #333;
      width: 155px;
      height: 52px;
    }
  `,Pa=ja([Object(n.c)("logining-loading")],Pa);var Ra=i(880),La=i.n(Ra),Na=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let Ma=class extends a.a{constructor(){super(...arguments),this.url="",this.expire=0,this.firestRender=!1,this.refreshQRcode=()=>{this.dispatchEvent(new CustomEvent("on-refresh"))}}updated(e){e.has("url")&&this.url&&(La.a.toCanvas(this.$qrcode,this.url,{width:200,height:200},e=>{e&&console.error(e)}),this.firestRender||(this.firestRender=!0))}transformTime(e){if(!e)return"";const t=Math.floor(e/60),i=e%60;return`${t<10?"0"+t:t}:${i<10?"0"+i:i}`}render(){return n.e`
      <div class="wrapper">
        <h2 class="title">${i18n("mobile_devices")}</h2>
        <div class="qrcode">
          <canvas id="qrcode"></canvas>
          <div
            class="qrcode-mask ${(this.url||this.firestRender)&&0===this.expire?"show":"hide"}"
            @click="${this.refreshQRcode}"
          >
            <img class="qrcode-refresh-btn" src="${i(902)}" alt="" />
          </div>
        </div>
        ${this.expire>0?n.e` <p class="expire-title">${this.transformTime(this.expire)}</p>`:0===this.expire&&(this.url||this.firestRender)?n.e` <p class="expire-title expired" @click="${this.refreshQRcode}">${i18n("refresh_qrcode")}</p>`:n.e` <p class="expire-title holder">&nbsp;</p>`}
        <p class="sub-title">${i18n("use_mobile_screen")}</p>
      </div>
    `}};Ma.styles=n.b`
    .wrapper {
      font-family: PingFangSC-Regular, PingFang SC;
      box-sizing: border-box;
      width: 350px;
      height: 380px;
      text-align: center;
      padding-top: 22px;
    }
    .title {
      margin: 0 0 30px 0;
      font-size: 20px;
      font-family: PingFangSC-Medium, PingFang SC;
      font-weight: 500;
      color: #333333;
      line-height: 28px;
    }
    .sub-title {
      margin: 0 0 16px 0;
      font-size: 14px;
      font-weight: 400;
      color: #656565;
      line-height: 20px;
    }
    .expire-title {
      margin: 0 0 16px 0;
      display: inline-block;
      height: 32px;
      font-size: 12px;
      font-weight: 400;
      color: #c7c7cc;
      line-height: 32px;
      transition: color 0.1s;
    }
    .expired {
      cursor: pointer;
    }
    .expired:hover {
      color: #999;
    }
    .qrcode {
      position: relative;
      margin: 0 auto;
      box-sizing: border-box;
      width: 200px;
      height: 200px;
    }
    .qrcode-mask.hide {
      background-color: rgba(255, 255, 255, 0);
      opacity: 0;
      pointer-events: none;
      cursor: none;
    }
    .qrcode-mask {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      background-color: rgba(255, 255, 255, 0.9);
      transition: background-color 0.1s;
    }
    .qrcode-mask:hover {
      background-color: rgba(255, 255, 255, 0.85);
    }
    .qrcode-mask:hover .qrcode-refresh-btn {
      opacity: 1;
    }
    .qrcode-refresh-btn {
      cursor: pointer;
      width: 36px;
      height: 36px;
      opacity: 0.8;
      transition: opacity 0.1s;
    }
    .desc {
      margin: 20px 0 12px;
      font-size: 14px;
      font-weight: 400;
      color: #656565;
      line-height: 20px;
    }
    .website {
      user-select: text;
      margin: 0;
      font-weight: 400;
      color: #656565;
      line-height: 22px;
    }
  `,Na([Object(n.g)({type:String})],Ma.prototype,"url",void 0),Na([Object(n.g)({type:Number})],Ma.prototype,"expire",void 0),Na([Object(n.f)()],Ma.prototype,"firestRender",void 0),Na([Object(n.h)("#qrcode")],Ma.prototype,"$qrcode",void 0),Ma=Na([Object(n.c)("mobile-qrcode")],Ma);var Da=n.b`.user-profile {
  display: flex;
  width: 560px;
  border-radius: var(--border-radius);
  overflow: hidden;
}
button {
  outline: none;
  border: none;
  padding: 0;
  margin: 0;
}
.text {
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}
.profile-side {
  position: relative;
  flex-grow: 0;
  width: 160px;
  background: #f5f5f5;
}
.profile-side .side-user {
  text-align: center;
  padding-top: 48px;
  padding-bottom: 44px;
}
.profile-side .side-user .user-avatar {
  border-radius: 50%;
  overflow: hidden;
  width: 60px;
  height: 60px;
  margin-bottom: 12px;
}
.profile-side .side-user .user-name {
  margin: 0;
  font-size: 16px;
  font-weight: 500;
  color: #333;
  line-height: 22px;
  height: 22px;
  padding: 0 20px;
}
.profile-side .side-content {
  height: 290px;
  box-sizing: border-box;
  border-top: solid 1px #eee;
  padding: 20px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}
.profile-side .side-content .settings-item:hover {
  background-color: rgba(51, 51, 51, 0.05);
}
.profile-side .side-content .settings-item {
  width: 120px;
  height: 32px;
  box-sizing: border-box;
  padding: 0 6px;
  border-radius: 4px;
  font-weight: 500;
  font-size: 14px;
  color: #333;
  background-color: transparent;
  margin-top: 12px;
  cursor: pointer;
  transition: background-color 0.3s;
}
.profile-side .side-content .settings-item.active {
  background-color: rgba(51, 51, 51, 0.05);
}
.profile-side .side-content .settings-item:first-child {
  margin-top: 0;
}
.profile-side .logout {
  margin: 0 auto;
  width: 120px;
  height: 32px;
  --border-color: #fff;
}
.profile-side .logout:hover {
  --border-color: #efefef;
}
.profile-content {
  flex-grow: 1;
  box-sizing: border-box;
  border-left: 1px solid #eee;
  font-size: 14px;
  font-weight: 400;
  color: #333333;
}
.profile-content .info-content {
  margin: 48px 60px 24px;
  border-bottom: 1px solid #eee;
  display: flex;
  flex-direction: column;
}
.profile-content .avatar-item {
  margin-bottom: 15px;
}
.profile-content .avatar-item .item-content {
  position: relative;
  width: 58px;
  height: 58px;
}
.profile-content .avatar-item .item-content .user-avatar,
.profile-content .avatar-item .item-content .loading,
.profile-content .avatar-item .item-content .edit-avatar,
.profile-content .avatar-item .item-content input[type='file'] {
  position: absolute;
  top: 0;
  left: 0;
  box-sizing: border-box;
  width: 58px;
  height: 58px;
  border-radius: 50%;
  cursor: pointer;
}
.profile-content .avatar-item .item-content input[type='file'] {
  padding-top: 58px;
}
.profile-content .avatar-item .item-content input[type='file'],
.profile-content .avatar-item .item-content .edit-avatar {
  opacity: 0;
  z-index: 1;
}
.profile-content .avatar-item .item-content .loading {
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: rgba(0, 0, 0, 0.2);
}
.profile-content .avatar-item .item-content .edit-avatar {
  display: flex;
  justify-content: center;
  align-items: center;
  transition: opacity 0.2s;
  background-color: rgba(0, 0, 0, 0.5);
  pointer-events: none;
}
.profile-content .avatar-item .item-content .edit-avatar .edit-avatar-img {
  width: 20px;
  height: 20px;
}
.profile-content .avatar-item .item-content:hover .edit-avatar {
  opacity: 1;
}
.profile-content .account-content {
  margin: 24px 60px;
}
.profile-content .info-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
}
.profile-content .item-title {
  width: 70px;
  margin-right: 8px;
  font-weight: 500;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}
.profile-content .item-contents {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-grow: 1;
}
.profile-content .item-content {
  max-width: 120px;
  color: #656565;
}
.profile-content .item-password {
  display: flex;
  align-items: center;
}
.profile-content .dot {
  display: block;
  width: 4px;
  height: 4px;
  background: #656565;
  border-radius: 50%;
  margin-right: 4px;
}
.profile-content .item-op {
  --border-color: #fff;
}
.profile-third .third-bind {
  margin: 68px 60px 0;
  height: 360px;
}
.remove-account {
  width: 280px;
  height: 32px;
  margin: 0 auto;
  --font-color: #ff5a5a;
}
.remove-account .btn-content {
  display: flex;
  justify-content: center;
  align-items: center;
}
.remove-account .img {
  width: 16px;
  height: 16px;
  margin-right: 8px;
}
`,Ua=i(523),Ba=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let Fa=class extends a.a{constructor(){super(...arguments),this.store=s.userStore,this.closeModal=()=>this.store.closeLogoutConfirm()}render(){return n.e`
      <infinito-modal .open=${this.store.isShowLogoutConfirm} .onCancel="${this.closeModal}">
        <div slot="body">
          <div class="container">
            ${"logout"===this.store.showConfirmOpt?n.e`
                  <h2 class="title">${Object(J.i18n)("ensure_logout")}</h2>
                  <p class="tips">${Object(J.i18n)("logout_tips")}</p>
                  <div class="options">
                    <div class="checkbox-div">
                      <input
                        type="checkbox"
                        id="checkbox"
                        @change="${this.handleChange}"
                        .disabled=${this.store.loading}
                      />
                      <label for="checkbox"></label>
                    </div>
                    <p @click=${this.handleClick}>${Object(J.i18n)("logout_clear_something")}</p>
                  </div>
                  <div class="btns">
                    <infinito-button primary .loading=${this.store.loading} @click="${()=>this.store.exitAccount()}"
                      >${Object(J.i18n)("confirm_logout")}</infinito-button
                    >
                    <infinito-button class="cancel" @click="${()=>this.store.closeLogoutConfirm()}"
                      >${Object(J.i18n)("cancel")}</infinito-button
                    >
                  </div>
                `:n.e`
                  <h2 class="title">${Object(J.i18n)("request_logout_confirm")}</h2>
                  <p class="tips">${Object(J.i18n)("logout_warn")}</p>
                  <div class="options">
                    <div class="checkbox-div">
                      <input
                        type="checkbox"
                        id="checkbox"
                        @change="${this.handleChange}"
                        .disabled=${this.store.loading}
                      />
                      <label for="checkbox"></label>
                    </div>
                    <p @click=${this.handleClick}>${Object(J.i18n)("logout_clear_something")}</p>
                  </div>
                  <div class="btns">
                    <infinito-button
                      class="cancel"
                      .disabled=${this.store.removeAccountDisableSec>0}
                      .loading=${this.store.loading}
                      @click="${()=>{this.store.removeAccountDisableSec>0||this.store.deleteAccount()}}"
                    >
                      ${Object(J.i18n)("remove_account")}${this.store.removeAccountDisableSec>0?`(${this.store.removeAccountDisableSec}s)`:""}
                    </infinito-button>
                    <infinito-button primary @click="${()=>this.store.closeLogoutConfirm()}">
                      ${Object(J.i18n)("cancel")}
                    </infinito-button>
                  </div>
                `}
          </div>
        </div>
      </infinito-modal>
    `}handleChange(e){this.store.loading||this.store.toggleClear(e.target.checked)}handleClick(){if(this.store.loading)return;const e=this.inputEle.checked;this.inputEle.checked=!e,this.store.toggleClear(this.inputEle.checked)}};Fa.styles=n.b`
    .container {
      box-sizing: border-box;
      width: 370px;
      padding: 0 20px;
    }
    .title {
      margin: 20px 0 24px;
      color: #333333;
      font-size: 20px;
      font-weight: 500;
      text-align: center;
    }
    .tips {
      margin: 0;
      font-size: 14px;
      font-weight: 400;
      color: #656565;
    }
    .options {
      display: flex;
      align-items: center;
      margin: 30px 0 40px;
    }
    .options p {
      margin: 0;
      margin-left: 10px;
    }
    .btns {
      margin-bottom: 12px;
      display: flex;
      justify-content: space-between;
    }
    infinito-button {
      width: 155px;
      height: 42px;
    }
    .cancel {
      --button-color: #efefef;
      --border-color: #efefef;
      --hover-color: #dfdfdf;
      --hover-font-color: #333;
    }
    .checkbox-div {
      position: relative;
      width: 16px;
      height: 16px;
    }
    label {
      box-sizing: border-box;
      position: absolute;
      top: 0;
      left: 0;
      width: 16px;
      height: 16px;
      border: 2px solid #333;
      border-radius: 8px;
      cursor: pointer;
    }
    label::after {
      content: '';
      width: 9px;
      height: 5px;
      position: absolute;
      top: 1px;
      left: 1px;
      border: 2px solid #333;
      border-top: none;
      border-right: none;
      background: transparent;
      opacity: 0;
      transform: rotate(-45deg);
    }

    input[type='checkbox'] {
      visibility: hidden;
    }
    input[type='checkbox']:checked + label::after {
      opacity: 1;
    }
  `,Ba([Object(n.h)("input")],Fa.prototype,"inputEle",void 0),Fa=Ba([Object(n.c)("logout-confirm")],Fa);var za=n.b`input {
  font-family: 'PingFang SC', 'Microsoft Yahei', Helvetica, Arial, sans-serif;
  width: 100%;
  height: 36px;
  box-sizing: border-box;
  background: #f5f5f5;
  border-radius: 4px;
  outline: none;
  border: none;
  padding: 0 12px;
  font-size: 14px;
  font-weight: 400;
  color: #333333;
}
input::placeholder {
  color: #adadad;
}
.container {
  box-sizing: border-box;
  width: 300px;
  padding: 20px;
}
.form-content {
  display: flex;
  flex-direction: column;
}
.modal-input {
  margin-bottom: 22px;
  background: #f5f5f5;
  border-radius: 4px;
  --error-left: 1px;
}
.footer {
  margin-top: 2px;
  width: 100%;
  display: flex;
  justify-content: space-between;
}
infinito-button {
  width: 120px;
  height: 36px;
}
.imgcode-input-box {
  display: flex;
  margin-bottom: 22px;
}
.imgcode-input-box .img-code {
  margin-left: 12px;
  width: 108px;
  height: 36px;
  background: #d6d6d6;
  border-radius: 4px;
  cursor: pointer;
}
.imgcode-input-box .img-code svg {
  width: 100%;
  height: 100%;
}
.imgcode-input-box .modal-input {
  margin-bottom: 0;
  width: 140px;
  height: 36px;
  background: #f5f5f5;
  border-radius: 4px;
}
.input-phone-prefix {
  flex-shrink: 0;
  width: 50px;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}
.input-phone-prefix .area-code {
  border-right: 1px solid rgba(28, 28, 30, 0.15);
  height: 14px;
  line-height: 20px;
  font-size: 14px;
  font-weight: 400;
  color: #1c1c1e;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}
.input-code-suffix {
  flex-shrink: 0;
  width: 98px;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  border-radius: 2px;
}
.input-code-suffix .send-code {
  --border-color: #f5f5f5;
  --border-raduis: 2px;
  margin-right: 4px;
  width: 90px;
  height: 30px;
  background: #ffffff;
  border-radius: 2px;
}
.input-code-suffix .sendcode-text {
  font-size: 12px;
}
i-mask {
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
i-mask.hide {
  display: none;
}
.area-list {
  position: absolute;
  margin-top: 42px;
  padding: 0;
  box-sizing: border-box;
  width: 260px;
  height: 250px;
  display: flex;
  flex-direction: column;
  overflow-y: scroll;
  border-radius: 4px;
  background-color: #fff;
}
.area-list.hide {
  height: 0;
  opacity: 0;
  pointer-events: none;
}
.area-list.show {
  height: auto;
  opacity: 1;
  pointer-events: auto;
}
.area-list.show-up {
  z-index: 11;
}
.area-list .area-item {
  display: flex;
}
[name='emailOrPhone'] {
  position: relative;
  z-index: 11;
}
.header {
  text-align: center;
  height: 25px;
  font-size: 18px;
  font-weight: 500;
  color: #1c1c1e;
  line-height: 25px;
}
.desc {
  margin: 16px auto;
  font-size: 14px;
  font-weight: 400;
  color: #3a3a3c;
  line-height: 20px;
}
.unbind-box {
  margin-top: 2px;
  margin-bottom: 24px;
  display: flex;
}
.unbind-box .unbind-btn {
  display: flex;
  align-items: center;
  height: 20px;
  font-size: 14px;
  font-weight: 400;
  color: #3a3a3c;
  line-height: 20px;
  transition: color 0.2s;
  cursor: pointer;
}
.unbind-box .unbind-btn img {
  margin-left: 4px;
}
.unbind-box .unbind-btn:hover {
  color: #333;
}
`,Ha=i(762),Wa=i(120),Ga=i.n(Wa),Va=n.b`:host {
  display: block;
  width: 260px;
  height: 36px;
  background: #f5f5f5;
  border-radius: 4px;
  --error-left: 1px;
}
.ellipsis {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.error {
  position: absolute;
  bottom: -17px;
  margin-left: var(--error-left);
  font-size: 12px;
  font-weight: 400;
  color: #ea4747;
}
.item {
  position: relative;
  height: 100%;
}
.input-box {
  height: 100%;
  display: flex;
  align-items: center;
}
.input {
  background-color: transparent;
  outline: none;
  border: none;
  height: 100%;
  width: 100%;
  box-sizing: border-box;
  padding: 0 12px;
  color: #333;
  font-size: 14px;
  font-weight: 400;
  line-height: 20px;
  font-family: 'PingFang SC', 'Microsoft Yahei', Helvetica, Arial, sans-serif;
}
.input::placeholder {
  color: #adadad;
}
.input:-moz-read-only {
  cursor: not-allowed;
  color: #999999;
}
.input:read-only {
  cursor: not-allowed;
  color: #999999;
}
`,qa=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};const Ya=async e=>"";let Qa=class extends n.a{constructor(){super(...arguments),this.name="",this.type="text",this.value="",this.placeholder=i18n("please_enter_text"),this.readonly=!1,this.validate=Ya,this.errMsg="",this.onChange=async e=>{const t=e.currentTarget.value;if(this.errMsg){const e=await this.validate(t);this.errMsg=e}this.value=t,this.emitChangeEvent(t)},this.emitChangeEvent=e=>{const t=new CustomEvent("on-change",{detail:{value:e}});this.dispatchEvent(t)},this.checkValidity=async()=>(this.errMsg=await this.validate(this.value),this.errMsg),this.clearValidate=()=>{this.errMsg=""}}render(){return n.e`
      <div class="item">
        <div class="input-box">
          <slot name="prefix"></slot>
          <slot name="input">
            <input
              class="input"
              .name="${this.name}"
              autocomplete="off"
              .type="${this.type}"
              .value="${this.value||""}"
              .placeholder="${this.placeholder}"
              .readOnly="${this.readonly}"
              @blur="${this.checkValidity}"
              @input=${e=>{this.onChange(e)}}
            />
          </slot>
          <slot name="suffix"></slot>
        </div>
        <span .hidden="${!this.errMsg}" class="error ellipsis">${this.errMsg}</span>
      </div>
    `}};Qa.styles=Va,qa([Object(n.g)({type:String})],Qa.prototype,"name",void 0),qa([Object(n.g)({type:String})],Qa.prototype,"type",void 0),qa([Object(n.g)({type:String})],Qa.prototype,"value",void 0),qa([Object(n.g)({type:String})],Qa.prototype,"placeholder",void 0),qa([Object(n.g)({type:Boolean})],Qa.prototype,"readonly",void 0),qa([Object(n.g)({attribute:!1})],Qa.prototype,"validate",void 0),qa([Object(n.g)({type:String})],Qa.prototype,"errMsg",void 0),Qa=qa([Object(n.c)("i-userinput")],Qa);var Xa=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let Ka=class extends a.a{constructor(){super(...arguments),this.store=s.userStore,this.saveLoading=!1,this.codeTime=0,this.codeTimer=null,this.imgcodeTime="",this.areaCode="86",this.areaCodeStatus=!1,this.imgToken="",this.imgData="",this._renderChangeNickname=()=>n.e`
      <div class="form">
        <div class="form-content">
          <i-userinput
            placeholder="${Object(J.i18n)("please_enter_nickname")}"
            .value=${this.store.userInfo.name}
            class="modal-input"
            name="username"
            .validate="${async e=>e?"":Object(J.i18n)("username_cannot_empty")}"
          ></i-userinput>
        </div>
        <div class="footer">
          <infinito-button @click="${this.closeModal}">${Object(J.i18n)("cancel")}</infinito-button>
          <infinito-button .loading=${this.saveLoading} @click="${this.onChangeNickName}" primary
            >${Object(J.i18n)("save")}</infinito-button
          >
        </div>
      </div>
    `,this._renderAreaCodeList=()=>n.e`<ul class="area-list show-up ${this.areaCodeStatus?"show":"hide"}">
      ${s.userStore.areaCodeList.map(e=>n.e`<li
          @click="${()=>{this.selectAreaCode(e.area_code)}}"
          class="area-item"
        >
          <span>${e.name}</span>
          <span>${e.area_code}</span>
        </li>`)}
    </ul>`,this._renderBindPhoneOrEmail=e=>n.e`
      <div class="form">
        <div class="form-content">
          <i-userinput
            placeholder="${this._getText("emailOrPhone",e)}"
            class="modal-input"
            name="emailOrPhone"
            .validate="${async t=>{if("bindEmail"===e||"modifyEmail-2"===e){if(!t)return Object(J.i18n)("please_enter_email");const e=Ha.b.isEmail(t,Object(J.i18n)("email_format_error"));if(e)return e}else if("bindPhone"===e||"modifyPhone-2"===e){if(!t)return Object(J.i18n)("please_enter_phone");const e=Ha.b.isPhone(t,Object(J.i18n)("enter_valid_phone_tips"));if(e)return e}return""}}"
          >
            <!-- ${"bindPhone"===e||"modifyPhone-2"===e?n.e` <div class="input-phone-prefix" slot="prefix">
                  <div class="area-code" @click="${this.showAreaCodeList}">+${this.areaCode}</div>
                </div>`:null} -->
          </i-userinput>
          <i-mask
            class="${this.areaCodeStatus?"show":"hide"}"
            @close="${()=>{this.areaCodeStatus=!1}}"
            ?show="${this.areaCodeStatus}"
          ></i-mask>
          ${this._renderAreaCodeList()}
          <div class="imgcode-input-box">
            <i-userinput
              placeholder="${Object(J.i18n)("img_verify_code")}"
              class="modal-input"
              name="imgcode"
              .validate="${async e=>e?"":Object(J.i18n)("please_enter_img_verify_code")}"
            ></i-userinput>
            ${l.D.supportCookie?n.e` <img
                  @click="${this.refreshVerifyImg}"
                  class="img-code"
                  src="${this.imgcodeTime?l.y+"/verify/get_img?t="+this.imgcodeTime:null}"
                  alt=""
                />`:n.e` <div @click="${this.getTokenImg}" class="img-code">${Object(ne.a)(this.imgData)}</div> `}
          </div>

          <i-userinput
            placeholder="${Object(J.i18n)("enter_verification_code_tips")}"
            class="modal-input"
            name="code"
            .validate="${async e=>e?"":Object(J.i18n)("enter_verification_code_tips")}"
          >
            <div class="input-code-suffix" slot="suffix">
              <infinito-button
                .disabled=${!!this.codeTime}
                class="send-code"
                @click="${()=>this.sendCode(e)}"
                white
              >
                <span class="sendcode-text"> ${this.codeTime?this.codeTime+"s":Object(J.i18n)("verity_code")} </span>
              </infinito-button>
            </div>
          </i-userinput>

          ${this.isRegistered()?null:n.e`
                <i-userinput
                  placeholder="${Object(J.i18n)("password")}"
                  class="modal-input"
                  type="password"
                  name="password"
                  .validate="${async e=>e?e.length<6?Object(J.i18n)("password_length_low"):"":Object(J.i18n)("password_dont_empty")}"
                ></i-userinput>
                <i-userinput
                  placeholder="${Object(J.i18n)("confirm_password_2")}"
                  class="modal-input"
                  type="password"
                  name="repeatPassword"
                  .validate="${async e=>e!==this.getIUserInputValue("password")?Object(J.i18n)("password_not_equals"):""}"
                ></i-userinput>
              `}
        </div>
        ${s.userStore.isLastId||"modifyPhone-2"!==e&&"modifyEmail-2"!==e?null:n.e`<div class="unbind-box">
              <div white class="unbind-btn" @click="${()=>this.onUnbind(e)}">
                ${Object(J.i18n)("unbind_btn")}
                <img width="9" height="9" src="${i(903)}" alt="" />
              </div>
            </div>`}

        <div class="footer">
          <infinito-button @click="${this.closeModal}">${Object(J.i18n)("cancel")}</infinito-button>
          <infinito-button .loading=${this.saveLoading} @click="${()=>this.onBind(e)}" primary
            >${Object(J.i18n)("confirm")}</infinito-button
          >
        </div>
      </div>
    `,this._renderVerifyPassword=e=>n.e` <div class="form">
      <div class="header">${"modifyPhone-1"===e?Object(J.i18n)("modify_phone_number"):Object(J.i18n)("modify_email")}</div>
      <div class="desc">${Object(J.i18n)("verify_password_desc")}</div>
      <div class="form-content">
        <i-userinput
          placeholder="${Object(J.i18n)("enter_password_tips")}"
          class="modal-input"
          type="password"
          name="password"
          .validate="${async e=>e?"":Object(J.i18n)("password_dont_empty")}"
        ></i-userinput>
      </div>
      <div class="footer">
        <infinito-button @click="${this.closeModal}">${Object(J.i18n)("cancel")}</infinito-button>
        <infinito-button .loading=${this.saveLoading} @click="${()=>this.toModifyPhoneOrEmail(e)}" primary
          >${Object(J.i18n)("confirm")}</infinito-button
        >
      </div>
    </div>`,this._renderForm=e=>"bindEmail"===e||"bindPhone"===e?(l.D.supportCookie?this.imgcodeTime||this.refreshVerifyImg():this.imgData||this.getTokenImg(),this._renderBindPhoneOrEmail(e)):"modifyPhone-2"===e||"modifyEmail-2"===e?this._renderBindPhoneOrEmail(e):"modifyPhone-1"===e||"modifyEmail-1"===e?this._renderVerifyPassword(e):"editNickName"===e?this._renderChangeNickname():void 0,this.closeModal=()=>{this.saveLoading=!1,this.codeTime=0,clearInterval(this.codeTimer),this.codeTimer=null,this.store.closeSecondProfileModal(),this.imgData="",this.imgToken="",this.imgcodeTime=""}}async onChangeNickName(){var e;if(this.saveLoading)return;if(!await this.validateAll(["username"]))return;const t={name:nr()(e=this.getIUserInputValue("username")).call(e),gender:this.store.userInfo.gender||"x"};this.saveLoading=!0,await this.store.modifyProfile(t),this.saveLoading=!1,this.closeModal()}async validateAll(e){return(await r.a.all(e.map(e=>this.shadowRoot.querySelector(`i-userinput[name="${e}"]`).checkValidity()))).every(e=>!e)}async onBind(e){const t=["emailOrPhone","code"];this.isRegistered()||t.push("password","repeatPassword");if(!await this.validateAll(t))return;const i={code:this.getIUserInputValue("code")};if(!this.isRegistered()){const e=this.getIUserInputValue("password");i.password=Ga()(e);const t=this.getIUserInputValue("repeatPassword");i.repeatPassword=Ga()(t)}const o=this.getIUserInputValue("emailOrPhone");let r={error:{message:"type error"}};"bindEmail"===e||"modifyEmail-2"===e?(i.email=o,this.saveLoading=!0,r=await ye.g.bindEmail(i)):"bindPhone"!==e&&"modifyPhone-2"!==e||(i.phone_number=o,i.country_code=this.areaCode,this.saveLoading=!0,r=await ye.g.bindPhoneNumber(i));const{error:n}=r;this.saveLoading=!1,n?se.message.error(n.message):("bindEmail"===e||"modifyEmail-2"===e?s.userStore.bindSuccess("email",i.email):"bindPhone"!==e&&"modifyPhone-2"!==e||s.userStore.bindSuccess("phone",i.phone_number),"bindEmail"===e||"bindPhone"===e?se.message.success(Object(J.i18n)("bind_success")):se.message.success(Object(J.i18n)("modify_success")),this.closeModal())}isRegistered(){return this.store.userInfo.email||this.store.userInfo.phone_number}async sendCode(e){let t={error:{message:"type error"}};if(!await this.validateAll(["emailOrPhone","imgcode"]))return;const i=this.getIUserInputValue("emailOrPhone"),o=this.getIUserInputValue("imgcode");"bindEmail"===e||"modifyEmail-2"===e?(this.codeTime=60,t=await ye.g.sendEmailCode({email:i,code:o,token:l.D.supportCookie?void 0:this.imgToken})):"bindPhone"!==e&&"modifyPhone-2"!==e||(this.codeTime=60,t=await ye.g.sendPhoneCode({phone_number:i,type:"bind",code:o,country_code:this.areaCode,token:l.D.supportCookie?void 0:this.imgToken}));const{error:r}=t;r&&3021===r.code||(l.D.supportCookie?this.refreshVerifyImg():this.getTokenImg()),r?(this.codeTime=0,se.message.error(r.message)):(se.message.success(Object(J.i18n)("send_success")),this.codeTimer=setInterval(()=>{this.codeTime<=0?clearInterval(this.codeTimer):this.codeTime-=1},1e3))}refreshVerifyImg(){this.imgcodeTime=""+Date.now()}async getTokenImg(){if(l.D.supportCookie)return;const{data:e,error:t}=await ye.g.geVerifyTokenImg();t||(this.imgData=e.img,this.imgToken=e.token)}getIUserInputValue(e){const t=this.shadowRoot.querySelector(`i-userinput[name="${e}"]`);return t?t.value:null}selectAreaCode(e){console.log(e)}showAreaCodeList(){}_getText(e,t,i){if("emailOrPhone"===e){return{bindEmail:Object(J.i18n)("please_enter_email"),bindPhone:Object(J.i18n)("please_enter_phone"),"modifyEmail-2":Object(J.i18n)("new_email"),"modifyPhone-2":Object(J.i18n)("new_phone_number")}[t]}if("unbindConfirmTitle"===e){return{"modifyEmail-2":Object(J.i18n)("unbind_email"),"modifyPhone-2":Object(J.i18n)("unbind_phone_number")}[t]}if("unbindConfirm"===e){return{"modifyEmail-2":Object(J.i18n)("confirm_unbind_email",i.email),"modifyPhone-2":Object(J.i18n)("confirm_unbind_phone_number",i.phone_number)}[t]}}async onUnbind(e){let t={error:{message:"type error"}};Y.IConfirm.create().toShow({title:this._getText("unbindConfirmTitle",e),text:this._getText("unbindConfirm",e,{email:s.userStore.userInfo.email,phone_number:s.userStore.getPhoneNumber()}),onConfirm:async()=>{this.saveLoading=!0,"modifyEmail-2"===e?t=await ye.g.unbindEmail():"modifyPhone-2"===e&&(t=await ye.g.unbindPhoneNumber());const{error:i}=t;this.saveLoading=!1,i?se.message.error(i.message):("modifyEmail-2"===e?s.userStore.unbindSuccess("email"):"modifyPhone-2"===e&&s.userStore.unbindSuccess("phone"),se.message.success(Object(J.i18n)("unbind_success")),this.closeModal())}})}async toModifyPhoneOrEmail(e){if(!await this.validateAll(["password"]))return;this.saveLoading=!0;const t=this.getIUserInputValue("password"),{error:i}=await ye.g.verifyPassword(t);this.saveLoading=!1,i?se.message.error(i.message):("modifyEmail-1"===e?this.store.showSecondProfileModal("modifyEmail-2"):"modifyPhone-1"===e&&this.store.showSecondProfileModal("modifyPhone-2"),l.D.supportCookie?this.refreshVerifyImg():this.getTokenImg())}render(){return n.e`
      <infinito-modal
        style="--modal-padding:0;"
        .open=${this.store.isShowSecondProfileModal}
        .closeable="${!1}"
        .onCancel="${this.closeModal}"
      >
        <div slot="body">
          <div class="container">${this._renderForm(this.store.secondProfileModalType)}</div>
        </div>
      </infinito-modal>
    `}};Ka.styles=za,Xa([Object(n.g)({type:Boolean})],Ka.prototype,"saveLoading",void 0),Xa([Object(n.f)()],Ka.prototype,"codeTime",void 0),Xa([Object(n.f)()],Ka.prototype,"codeTimer",void 0),Xa([Object(n.f)()],Ka.prototype,"imgcodeTime",void 0),Xa([Object(n.f)()],Ka.prototype,"areaCode",void 0),Xa([Object(n.f)()],Ka.prototype,"areaCodeStatus",void 0),Xa([Object(n.f)()],Ka.prototype,"imgToken",void 0),Xa([Object(n.f)()],Ka.prototype,"imgData",void 0),Ka=Xa([Object(n.c)("profile-modal")],Ka);var Za=i(779),Ja=i.n(Za),es=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let ts=class extends a.a{constructor(){super(...arguments),this.cropper=null,this.preViewImgData=null,this.avatar="",this.avatarLoading=!1,this.avatarKey="",this._curTab="account"}firstUpdated(){this.initCropper()}updated(){s.userStore.isModify||(this.avatar="",this.avatarKey="",this.avatarLoading=!1)}bindThird(e){s.userStore.thirdPartyBind(e.type)}unbindThird(e){Y.IConfirm.create().toShow({text:i18n("confirm_unbind"),title:i18n("hint"),onConfirm:async()=>{const{error:t}=await s.userStore.thirdPartyUnbind(e.type);t?se.message.error(t.message):(s.userStore.unbindSuccess("third",e.type),se.message.success(i18n("unbind_success")))}})}showSecondProfileModal(e){s.userStore.showSecondProfileModal(e)}removeAccount(){s.userStore.logout("remove")}editNickName(){s.userStore.showSecondProfileModal("editNickName")}editPassword(e){let t="/modify-password/index.html";l.l&&(t=window.chrome.runtime.getURL(t)),c.a.openUrl(t,!0,e)}_renderProfileThird(){return n.e`
      <div class="profile-content profile-third">
        <div class="third-bind">
          ${s.userStore.thirdAccountList.map(e=>e.abondon&&!e.bindStatus?null:n.e` <div class="info-item">
              <div class="item-title">${e.title}</div>
              <div class="item-contents">
                <div class="item-content text">
                  ${e.bindStatus?e.nick_name||i18n("is_binding"):i18n("not_binding")}
                </div>
                ${e.bindStatus?s.userStore.isLastId?null:n.e`<infinito-button white class="item-op" @click="${this.unbindThird.bind(this,e)}"
                      >${i18n("unbind")}</infinito-button
                    >`:n.e`
                      <infinito-button white class="item-op" @click="${this.bindThird.bind(this,e)}"
                        >${i18n("bind")}</infinito-button
                      >
                    `}
              </div>
            </div>`)}
        </div>
        <infinito-button class="remove-account" @click="${this.removeAccount}">
          <div class="btn-content">
            <img class="img" src="${i(904)}" alt="" />
            <span>${i18n("remove_account")}</span>
          </div>
        </infinito-button>
      </div>
    `}initCropper(){this.cropper=Ua.a.create({title:i18n("edit_avatar"),needBackground:!0}),this.cropper.addEventListener("on-change",async e=>{const{data:t}=e.detail;this.preViewImgData=t;const i=this.avatar;this.avatar=sr.a.createObjectURL(this.preViewImgData),sr.a.revokeObjectURL(i),setTimeout(async()=>{this.avatarLoading=!0;const e=await s.userStore.updateAvatar(this.preViewImgData);0===(null==e?void 0:e.code)?(this.avatarKey=e.data.key,await this.handleSave()):(this.avatar="",this.preViewImgData=null,se.message.error(i18n("upload_avatar_failure")),this.avatarLoading=!1)},300)})}chooseImage(){const e=this.avatarInput.files[0];if(!("image/jpeg"===e.type||"image/png"===e.type))return se.message.error(i18n("please_chose_picture")),void(this.avatarInput.value="");if(!(e.size/1024/1024<2))return se.message.error(i18n("oversize")),void(this.avatarInput.value="");const t=new FileReader;t.readAsDataURL(e),this.avatarInput.value=null,t.onload=()=>{this.cropper.init(t.result),this.cropper.show()}}async handleSave(){const e={name:s.userStore.userInfo.name,gender:s.userStore.userInfo.gender||"x",avatar:this.avatarKey};await s.userStore.modifyProfile(e),this.avatarLoading=!1}_renderProfileAccount(){const{userInfo:e}=s.userStore;return n.e`
      <div class="profile-content profile-account">
        <div class="info-content">
          <div class="info-item avatar-item">
            <div class="item-title">${i18n("current_avatar")}</div>
            <div class="item-contents">
              <div class="item-content">
                <img class="user-avatar" .src=${this.avatar||e.avatar||Vn.g} />
                <input
                  type="file"
                  title=""
                  name="avatar"
                  accept="image/png, image/jpeg"
                  @change=${this.chooseImage}
                  @drop=${this.chooseImage}
                />
                ${this.avatarLoading?n.e`
                      <div class="loading">
                        <img src=${Ja.a} width="42px" />
                      </div>
                    `:n.e`<div class="edit-avatar">
                      <img src="${i(905)}" alt="" class="edit-avatar-img" />
                    </div>`}
              </div>
            </div>
          </div>
          <div class="info-item">
            <div class="item-title">${i18n("nickname")}</div>
            <div class="item-contents">
              <div class="item-content text">${e.name}</div>
              <infinito-button white class="item-op" @click="${this.editNickName}">${i18n("edit")}</infinito-button>
            </div>
          </div>
        </div>
        <div class="account-content">
          ${e.phone_number||e.email?n.e` <div class="info-item">
                <div class="item-title">${i18n("password")}</div>
                <div class="item-contents">
                  <div class="item-content text item-password">
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                  </div>
                  <infinito-button white class="item-op" @click="${this.editPassword}"
                    >${i18n("modify_this")}</infinito-button
                  >
                </div>
              </div>`:null}
          ${J.IS_ZH||e.phone_number?n.e`
                <div class="info-item">
                  <div class="item-title">${i18n("phone_number")}</div>
                  <div class="item-contents">
                    <div class="item-content text">
                      ${e.phone_number?s.userStore.getPhoneNumber():i18n("not_binding")}
                    </div>
                    ${e.phone_number?n.e`<infinito-button
                          white
                          class="item-op"
                          @click="${()=>this.showSecondProfileModal("modifyPhone-1")}"
                          >${i18n("modify_this")}</infinito-button
                        >`:n.e`<infinito-button
                          white
                          class="item-op"
                          @click="${()=>this.showSecondProfileModal("bindPhone")}"
                          >${i18n("bind")}</infinito-button
                        >`}
                  </div>
                </div>
              `:null}

          <div class="info-item">
            <div class="item-title">${i18n("email")}</div>
            <div class="item-contents">
              <div class="item-content text">${e.email?e.email:i18n("not_binding")}</div>
              ${e.email?n.e`<infinito-button
                    white
                    class="item-op"
                    @click="${()=>this.showSecondProfileModal("modifyEmail-1")}"
                    >${i18n("modify_this")}</infinito-button
                  >`:n.e`<infinito-button white class="item-op" @click="${()=>this.showSecondProfileModal("bindEmail")}"
                    >${i18n("bind")}</infinito-button
                  >`}
            </div>
          </div>
        </div>
      </div>
    `}switchTab(e){this._curTab=e}logout(){s.userStore.logout("logout")}render(){const{userInfo:e}=s.userStore;return n.e`
      <section class="user-profile">
        <div class="profile-side">
          <div class="side-user">
            <img class="user-avatar" .src=${e.avatar||Vn.g} />
            <p class="user-name text">${e.name}</p>
          </div>
          <div class="side-content">
            <div class="settings-items">
              <button
                type="button"
                @click="${this.switchTab.bind(this,"account")}"
                class="${Object(K.a)({"settings-item":!0,text:!0,active:"account"===this._curTab})}"
              >
                ${i18n("basic_info")}
              </button>
              <button
                type="button"
                @click="${this.switchTab.bind(this,"third")}"
                class="${Object(K.a)({text:!0,"settings-item":!0,active:"third"===this._curTab})}"
              >
                ${i18n("account_setting")}
              </button>
            </div>
            <infinito-button white class="logout" @click="${this.logout}">${i18n("logout")}</infinito-button>
          </div>
        </div>
        ${"account"===this._curTab?this._renderProfileAccount():"third"===this._curTab?this._renderProfileThird():null}
      </section>
      <infinito-portal-entrance destination="logout-confirm">
        <logout-confirm></logout-confirm>
      </infinito-portal-entrance>
      <infinito-portal-entrance destination="profile-modal">
        <profile-modal></profile-modal>
      </infinito-portal-entrance>
    `}};ts.styles=Da,es([Object(n.f)()],ts.prototype,"avatar",void 0),es([Object(n.f)()],ts.prototype,"avatarLoading",void 0),es([Object(n.f)()],ts.prototype,"avatarKey",void 0),es([Object(n.f)()],ts.prototype,"_curTab",void 0),es([Object(n.h)('input[name="avatar"]')],ts.prototype,"avatarInput",void 0),ts=es([Object(n.c)("user-profile")],ts);var is=i(611),os=i.n(is),rs=i(906),ns=i.n(rs),as=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let ss=class extends a.a{constructor(){super(...arguments),this.platform="",this.manualBackup=()=>{Y.IConfirm.create().toShow({title:Object(J.i18n)("backup_now"),text:Object(J.i18n)("confirm_cover_remote"),onConfirm:()=>{s.syncStore.manualBackup(),this.platform="pc"}})},this.recover=(e,t)=>{Y.IConfirm.create().toShow({title:Object(J.i18n)("revovery_data"),text:Object(J.i18n)("confirm_recovery_data"),onConfirm:()=>{if("v1"===e){const e=s.userStore.userInfo.email?"basic":"pro";s.syncStore.getV1RemoteData(e,!0)}else s.syncStore.getDetail(e,t,"all",!0)}})},this.platformIcons={pc:i(907),pad:i(908),mobile:i(909)},this._renderManualList=()=>{let e=Object.keys(s.syncStore.manualSyncList);e=this.sortPlatforms(e,["pc","pad","mobile"]),this.platform=this.platform||e[0];let t=s.syncStore.manualSyncList[this.platform];return t||(this.platform=e[0],t=s.syncStore.manualSyncList[this.platform]),t.map(t=>n.e` <div class="item">
        <span class="title"
          >${t.time}
          ${1===e.length&&"mobile"===e[0]?n.e` <i-svg class="platform-icon" .src="${this.platformIcons.mobile}"></i-svg> `:null}
        </span>
        <span @click="${()=>this.recover(t.id,"manual")}" class="op"
          ><i-svg .src="${ns.a}"></i-svg> ${Object(J.i18n)("recover_this")}</span
        >
      </div>`)},this.selectPlatform=e=>{this.platform=e},this._renderManualListPlatforms=()=>{let e=Object.keys(s.syncStore.manualSyncList);return e=this.sortPlatforms(e,["pc","pad","mobile"]),this.platform=this.platform||e[0],e.length>1?n.e` <div class="platforms">
        ${e.map(e=>n.e`
            <span class="platform ${e===this.platform?"active":""}">
              <i-svg
                @click="${this.selectPlatform.bind(null,e)}"
                class="platform-icon"
                .src="${this.platformIcons[e]}"
              ></i-svg>
            </span>
          `)}
      </div>`:null}}sortPlatforms(e,t){return os()(e).call(e,(e,i)=>t.indexOf(e)-t.indexOf(i))}render(){return n.e`
      <div class="container">
        <img
          class="left-img"
          src="${Object(re.b)("https://infinityicon.infinitynewtab.com/assets/images/sync-left.jpg")}"
          alt=""
        />
        <div class="right">
          <div class="right-header">
            <div class="title">${Object(J.i18n)("history_backup_list")}</div>
            <div class="tips">${Object(J.i18n)("backup_tips")}</div>
          </div>
          <div class="right-card">
            <div class="item header">
              <div class="header-left">
                <span class="title">${Object(J.i18n)("manul_backup")}</span>
                ${this._renderManualListPlatforms()}
              </div>
              <span @click="${this.manualBackup}" class="op"
                ><i-svg .src="${ka.a}"></i-svg> ${Object(J.i18n)("backup_now")}</span
              >
            </div>
            ${0===Object.keys(s.syncStore.manualSyncList).length?n.e`<div class="item-none item-none-first">${Object(J.i18n)("none_manual_backup")}</div> `:this._renderManualList()}
          </div>
          <div class="right-card">
            <div class="item header">
              <span class="title">${Object(J.i18n)("scheduled_backup")}</span>
            </div>
            ${s.syncStore.autosSyncList.map(e=>n.e` <div class="item ">
                <span class="title">${e.time}</span>
                ${e.id===s.syncStore.syncId?n.e`<span class="op op-none">${Object(J.i18n)("current_node")}</span>`:n.e`<span @click="${()=>this.recover(e.id,"auto")}" class="op"
                      ><i-svg .src="${ns.a}"></i-svg> ${Object(J.i18n)("recover_this")}</span
                    >`}
              </div>`)}
            ${0===s.syncStore.autosSyncList.length&&!s.userStore.userInfo["backup-version-v2"]&&s.userStore.userInfo["auto-backup"]?n.e`
                  <div class="item ">
                    <span class="title">${c.a.fmtTime(Number(s.userStore.userInfo["auto-backup"]))}</span>
                    <span @click="${()=>this.recover("v1","auto")}" class="op"
                      ><i-svg .src="${ns.a}"></i-svg> ${Object(J.i18n)("recover_this")}</span
                    >
                  </div>
                `:""}
            ${0===s.syncStore.autosSyncList.length&&0===s.userStore.userInfo["auto-backup"]?n.e`<div class="item-none item-none-first">${Object(J.i18n)("none_auto_backup")}</div>
                  <div class="item-none">${Object(J.i18n)("none_auto_backup_desc")}</div>`:""}
          </div>
        </div>
      </div>
    `}};ss.styles=n.b`
    .container {
      width: 614px;
      box-sizing: border-box;
      display: flex;
      border-radius: 6px;
      overflow: hidden;
    }
    .left-img {
      width: 200px;
      /* height: 437px; */
      max-height: 500px;
    }
    .right {
      flex-grow: 1;
      padding: 30px;
      box-sizing: border-box;
    }
    .right-header {
      margin-top: 4px;
      padding-bottom: 20px;
      border-bottom: 1px solid #eee;
    }
    .right-header .title {
      font-size: 20px;
      font-weight: 500;
      color: #333333;
      line-height: 28px;
    }
    .right-header .tips {
      margin-top: 4px;
      font-size: 12px;
      font-weight: 400;
      color: #999999;
      line-height: 17px;
    }
    .right-card {
      margin-top: 30px;
    }
    .item {
      margin-top: 14px;
      display: flex;
      justify-content: space-between;
    }
    .item .title {
      font-size: 12px;
      font-weight: 400;
      color: #999999;
      line-height: 17px;
      display: inline-flex;
      align-items: center;
    }
    .item.header .title {
      font-size: 14px;
      font-weight: 500;
      color: #333333;
      line-height: 20px;
    }
    .item .op {
      display: flex;
      align-items: center;
      font-size: 12px;
      font-weight: 400;
      color: #333333;
      line-height: 17px;
      cursor: pointer;
    }
    .op.op-none {
      opacity: 0.5;
      cursor: initial;
    }
    i-svg {
      width: 18px;
      height: 13px;
      margin-right: 2px;
    }
    .item-none {
      height: 17px;
      font-size: 12px;
      font-weight: 400;
      color: #999999;
      line-height: 17px;
    }
    .item-none-first {
      margin-top: 6px;
    }
    .platform-icon {
      display: inline-block;
      width: 16px;
      height: 16px;
      margin-right: 0;
    }
    .title .platform-icon {
      margin-left: 8px;
    }
    .platform {
      margin-left: 12px;
      display: flex;
      padding: 2px;
      border-radius: 4px;
      transition: background-color, 0.1s;
      cursor: pointer;
    }
    .platforms .platform:first-of-type {
      margin-left: 0;
    }
    .platform:hover,
    .platform.active {
      background-color: #fff;
    }
    .platform:hover .platform-icon,
    .platform.active .platform-icon {
      opacity: 1;
    }
    .platforms .platform-icon {
      opacity: 0.5;
      transition: opacity 0.1s;
    }

    .platforms {
      margin-left: 8px;
      display: flex;
      align-items: center;
      padding: 0 2px;
      height: 24px;
      background: #f3f3f3;
      border-radius: 6px;
    }
    .header-left {
      display: flex;
      align-items: center;
    }
  `,as([Object(n.f)()],ss.prototype,"platform",void 0),ss=as([Object(n.c)("modal-sync-list")],ss);var ls=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let cs=class extends a.a{constructor(){super(...arguments),this.store=s.userStore,this.showQrcode=!1,this.toggleQrcode=async()=>{this.showQrcode=!this.showQrcode,this.showQrcode&&s.userStore.mobileloginExpire<=0&&await s.userStore.getMobileloginUrl()},this.refreshQRcode=()=>{s.userStore.getMobileloginUrl(!0)},this.closeProfile=()=>{this.store.closeProfileModal(),this.store.closeModify()},this.handleCancel=()=>{this.store.closeModal(),this.store.cancelLogin()},this.openSyncList=()=>{this.store.openSyncListModal()},this.closeSyncList=()=>{this.store.closeSyncListModal()}}render(){const{isLogin:e,userInfo:t,modalOpen:i,logining:o,profileModal:r,syncListModal:a}=this.store;return n.e`
      ${e?n.e`
            <div class="user-info login">
              <div @click=${this.openProfile}>
                <div
                  class="avatar-img"
                  style="background: url(${t.avatar||Vn.g}); background-size: cover;"
                ></div>
                <div class="user-name-wrapper">
                  <div class="user-name">
                    <div class="name">${t.name}</div>
                    <!-- ${"male"===t.gender?n.e`<img class="gender" .src=${Aa.a} />`:null}
                    ${"female"===t.gender?n.e`<img class="gender" .src=${xa.a} />`:null} -->
                  </div>
                </div>
                <div class="svg">
                  <i-svg .src="${vi.a}"></i-svg>
                </div>
              </div>
              ${Vn.f?n.e`
                    <div class="qr-code" @click=${this.toggleQrcode}>
                      <img .src=${Ia.a} />
                    </div>
                  `:null}
            </div>
            <div class="synchronous">
              <div>
                <div class="title">${Object(J.i18n)("backup_with_device")}</div>
                <div class="time ${s.syncStore.isOpenSync?"":"hide"}">
                  ${s.syncStore.lastSyncTime?Object(J.i18n)("last_sync_time",c.a.fmtTime(Number(s.syncStore.lastSyncTime))):Object(J.i18n)("no_backup_time")}
                </div>
              </div>
              <infinito-switch
                .checked=${s.syncStore.isOpenSync}
                @change=${e=>s.syncStore.changeSyncSwitch(e.detail.checked)}
              ></infinito-switch>
            </div>
            <div class="backup-wrapper">
              <div @click="${this.openSyncList}" class="mange-backup">
                <span>${Object(J.i18n)("manage_backup_node")}</span>
                <i-svg .src=${vi.a}></i-svg>
              </div>
              <div @click="${this.manualBackup}" class="backup-btn">
                <i-svg .src="${ka.a}"></i-svg>
                <span>${Object(J.i18n)("backup_now")}</span>
              </div>
            </div>
          `:n.e`
            <div class="user-info">
              <div @click=${this.handleModal}>
                <div class="avatar-img" style="background: url(${Vn.g}); background-size: cover;"></div>
                <div>
                  <div class="user-name">
                    <div class="name">${Object(J.i18n)("login_register")}</div>
                  </div>
                  <div class="email">${Object(J.i18n)("want_more")}</div>
                </div>
              </div>
            </div>
          `}

      <infinito-portal-entrance destination="modal">
        <infinito-modal style="--modal-padding: 0;" .open=${i} .onCancel=${this.handleCancel}>
          <div slot="body">
            ${o?n.e`<logining-loading></logining-loading>`:n.e`<user-login ?modalOpen=${this.store.modalOpen}></user-login>`}
          </div>
        </infinito-modal>
        <infinito-modal
          style="--modal-padding: 0;"
          class="user-profile"
          .open=${r}
          .onCancel=${this.closeProfile}
        >
          <div slot="body">
            <user-profile></user-profile>
          </div>
        </infinito-modal>
      </infinito-portal-entrance>
      <infinito-portal-entrance destination="modal-sync-list">
        <infinito-modal
          style="--modal-padding: 0;overflow:hidden"
          .open=${a}
          .onCancel=${this.closeSyncList}
        >
          <div slot="body">
            <modal-sync-list></modal-sync-list>
          </div>
        </infinito-modal>
      </infinito-portal-entrance>
      <infinito-portal-entrance destination="mobile-qrcode">
        <infinito-modal .open=${this.showQrcode} .onCancel=${this.toggleQrcode}>
          <div slot="body">
            <mobile-qrcode
              @on-refresh="${this.refreshQRcode}"
              .url=${s.userStore.mobileloginUrl}
              .expire=${s.userStore.mobileloginExpire}
            ></mobile-qrcode>
          </div>
        </infinito-modal>
      </infinito-portal-entrance>
    `}openProfile(){this.store.openProfileModal(),this.store.getUserProfile()}handleModal(){this.store.openModal()}manualBackup(){Y.IConfirm.create().toShow({title:Object(J.i18n)("backup_now"),text:Object(J.i18n)("confirm_cover_remote"),onConfirm:()=>{s.syncStore.manualBackup()}})}createRenderRoot(){return this}};ls([Object(n.g)({type:Boolean})],cs.prototype,"showQrcode",void 0),cs=ls([Object(n.c)("user-card")],cs);var ds=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let ps=class extends a.a{constructor(){super(...arguments),this.showCard=!1,this.list=[{key:""}]}_permissionAll(){s.settingStore.requestAllPermission()}_permission(e){s.settingStore.requestPermission(e,!0)}render(){return n.e`
      <div class="wrapper">
        <div class="header">${Object(J.i18n)("need_you_permission")}</div>
        <div class="items global-scrollbar">
          ${s.settingStore.needPermissionList.map(e=>n.e` <div class="item">
              <div class="item-header">
                <div class="item-title">${e.title}</div>
                <infinito-button
                  class="item-btn"
                  primary
                  @click="${()=>{this._permission(e.key)}}"
                >
                  ${Object(J.i18n)("permission")}
                </infinito-button>
              </div>
              <div class="item-content">
                <span>${e.content}</span>
              </div>
            </div>`)}
        </div>
        <div class="footer">
          <infinito-button @click="${this._permissionAll}" class="footer-btn" primary
            >${Object(J.i18n)("permission_all")}</infinito-button
          >
        </div>
      </div>
    `}};ps.styles=[k.a,n.b`
      .wrapper {
        width: 370px;
        box-sizing: border-box;
      }
      .header {
        margin-top: 16px;
        margin-bottom: 20px;
        margin-left: 20px;
        margin-right: 20px;
        font-size: 20px;
        font-weight: 500;
        color: rgba(51, 51, 51, 1);
        line-height: 28px;
        text-align: center;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      .items {
        max-height: 420px;
      }
      .item {
        margin-left: 20px;
        margin-right: 20px;
        display: flex;
        flex-direction: column;
        padding: 14px 0;
        border-bottom: 1px solid #eeeeee;
      }
      .item:last-of-type {
        border-bottom: none;
      }
      .item-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .item-title {
        max-width: 200px;
        font-size: 16px;
        font-weight: 500;
        color: rgba(51, 51, 51, 1);
        line-height: 26px;
      }
      .item-btn {
        min-width: 56px;
        height: 28px;
        background: rgba(239, 239, 239, 1);
        border-radius: 6px;
        cursor: pointer;
        outline: none;
        border: none;
        font-size: 14px;
        font-weight: 500;
        color: rgba(51, 51, 51, 1);
        line-height: 20px;
        transition: background 0.3s, color 0.3s;
      }
      .item-btn:hover {
        background: rgba(51, 51, 51, 1);
        color: rgba(255, 255, 255, 1);
      }
      .item-content {
        margin-top: 4px;
        font-size: 14px;
        font-weight: 400;
        color: rgba(101, 101, 101, 1);
        line-height: 20px;
        word-break: break-all;
      }
      .footer {
        margin-left: 20px;
        margin-right: 20px;
        margin-top: 20px;
        text-align: center;
      }
      .footer-btn {
        width: 100%;
        height: 52px;
        border-radius: 6px;
        font-weight: 500;
        color: rgba(255, 255, 255, 1);
        line-height: 22px;
        --hover-color: #000;
        --font-size: 16px;
      }
    `],ds([Object(n.g)({type:Boolean})],ps.prototype,"showCard",void 0),ps=ds([Object(n.c)("user-permission-modal")],ps);var hs=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let us=class extends a.a{constructor(){super(...arguments),this.showCard=!1,this._openCard=()=>{this.showCard=!0},this._closeCard=()=>{this.showCard=!1}}render(){const e=s.settingStore.needPermissionList.length;return 0===e&&(this.showCard=!1),n.e`
      ${e>0?n.e` <infinito-card>
            <div class="entry" @click=${this._openCard}>
              <div class="tips">
                <span class="circle"></span>
                <span>${Object(J.i18n)("fully_authorized_to_use")}(${e})</span>
              </div>
              <i-svg class="svg" .src="${vi.a}"></i-svg>
            </div>
          </infinito-card>`:n.e``}
      <infinito-portal-entrance destination="user-permission">
        <infinito-modal
          .open=${this.showCard&&e>0}
          .onCancel=${this._closeCard}
        >
          <div slot="body">
            <user-permission-modal></user-permission-modal>
          </div>
        </infinito-modal>
      </infinito-portal-entrance>
    `}};us.styles=n.b`
    .entry {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 14px;
      font-weight: 400;
      color: rgba(51, 51, 51, 1);
      line-height: 26px;
      cursor: pointer;
      margin-bottom: -10px;
    }
    .entry .circle {
      margin-right: 8px;
      display: inline-block;
      border-radius: 50%;
      width: 12px;
      height: 12px;
      background: rgba(255, 127, 59, 1);
    }
    .entry .svg {
      width: 18px;
      height: 18px;
    }
    .card {
      width: 410px;
      min-height: 200px;
      border-radius: 6px;
    }
  `,hs([Object(n.g)({type:Boolean})],us.prototype,"showCard",void 0),us=hs([Object(n.c)("user-permission")],us);var gs=i(213),fs=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let ms=class extends n.a{constructor(){super(...arguments),this.show=!1,this.firstShowQQ=!0,this.qq="172263837",this.loading=!1}async generateRepairFile(){this.loading=!0;try{const e=await s.syncStore.getAllBackupData(),t=await gs.a.exportDebugData()||{},i={version:"v2-repair",browserEnv:l.c,editionEnv:l.e,backupType:"local",time:(new Date).getTime(),extVersion:l.D.extVersion,backupData:e,data:t};c.a.exportJsonFile(i,"infinityRepair-"),O.a.sendEvent({action:"exportRepair"})}catch(e){}this.loading=!1}async getQQ(){const{data:e,error:t}=await ye.c.getRepairConcat();t||(null==e?void 0:e.qq)&&(this.qq=e.qq,this.firstShowQQ=!1)}updated(e){e.has("show")&&!0===this.show&&this.firstShowQQ&&this.getQQ()}render(){return n.e`
      <div class="layout-body">
        <div class="layout-title">${i18n("repair_data_title")}</div>
        <div class="layout-content">
          <div class="main">
            <div class="desc">${i18n("repair_data_desc_contnet")}</div>
            <div class="concat">
              <div class="concat-title">${i18n("repair_concat")}</div>
              <div class="concat-qq">
                <span>${i18n("repair_concat_qq")}</span><span class="concat-text">${this.qq}</span>
              </div>
              <div class="concat-email">
                <span>${i18n("repair_concat_email")}</span><span class="concat-text">infinitynewtab@gmail.com</span>
              </div>
            </div>
          </div>
          <div class="footer">
            <infinito-button .disabled="${this.loading}" primary @click="${this.generateRepairFile}">
              ${i18n("repair_export_btn")}</infinito-button
            >
          </div>
        </div>
      </div>
    `}};ms.styles=[n.b`
      .layout-body {
        box-sizing: border-box;
        width: 360px;
        padding: 20px 40px;
      }
      .layout-title {
        margin-top: 30px;
        margin-bottom: 14px;
        text-align: center;
        font-size: 18px;
        font-weight: 500;
        color: #333333;
        line-height: 26px;
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
      }

      .desc {
        margin-top: 14px;
        margin-bottom: 16px;
        font-size: 12px;
        font-weight: 400;
        color: #b3b3b3;
        line-height: 19px;
      }
      .concat-title {
        margin-bottom: 8px;
        font-size: 12px;
        font-weight: 500;
        color: #333333;
        line-height: 16px;
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
      }
      .concat-qq,
      .concat-email {
        margin-bottom: 4px;
        font-size: 12px;
        font-weight: 400;
        color: #4d4d4d;
        line-height: 16px;
        white-space: nowrap;
      }
      .footer infinito-button {
        margin-top: 24px;
        margin-bottom: 10px;
        height: 42px;
      }
      .concat-text {
        user-select: text;
      }
    `],fs([Object(n.g)({type:Boolean})],ms.prototype,"show",void 0),fs([Object(n.f)()],ms.prototype,"qq",void 0),fs([Object(n.f)()],ms.prototype,"loading",void 0),ms=fs([Object(n.c)("modal-repair-contact")],ms);var bs=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let ys=class extends n.a{constructor(){super(...arguments),this.show=!1,this.loading=!1,this.contactModal=!1,this.updateText=i18n("update_data"),this.generateBackupFile=async()=>{localStorage.setItem("backup-file",""+Date.now());const e=await s.syncStore.getAllBackupData(),t={version:"v2",browserEnv:l.c,editionEnv:l.e,backupType:"local",time:(new Date).getTime(),extVersion:l.D.extVersion,data:e};c.a.exportJsonFile(t,"infinityBackup-")},this.showContactModal=()=>{const e=new CustomEvent("on-contact",{bubbles:!0,composed:!0});this.dispatchEvent(e)}}firstUpdated(){this.updateText=i18n("update_data")}async reUpdate(){this.loading=!0;const e=localStorage.getItem("backup-file");let t=0;e&&Date.now()-Number(e)<6e4?t=0:(this.updateText=i18n("repair_auto_backup"),await this.generateBackupFile(),t=2e3),setTimeout(()=>{localStorage.removeItem("user-checkout-old-data"),localStorage.setItem("bg-updating",""+Date.now()),localStorage.setItem("updating-manual","true"),Yi.slave.sendMessage("tabs-reload"),c.a.send({key:"bg-update",data:"9.9.9"}),setTimeout(()=>{location.reload()},20)},t)}close(){const e=new CustomEvent("on-closerepair",{bubbles:!0,composed:!0});this.dispatchEvent(e),this.show=!1}render(){return n.e`
      <infinito-modal style="--modal-padding:0;" .onCancel="${this.close}" .open=${this.show}>
        <div class="layout-body" slot="body">
          <div class="layout-title">${i18n("update_or_repair_data")}</div>
          <div class="layout-content">
            <div class="main">
              <div class="desc">${i18n("update_desc_1")}</div>
              <div class="desc">${i18n("update_desc_2")}</div>
              <div class="desc desc-tip">
                <img src="${i(910)}" alt="" />
                <span>${i18n("update_desc_3")}</span>
              </div>
            </div>
            <div class="footer">
              <infinito-button primary @click="${this.generateBackupFile}"
                >${i18n("export_local_data")}</infinito-button
              >
              <infinito-button .disabled="${this.loading}" @click="${this.reUpdate}"
                >${this.updateText}</infinito-button
              >
              <div class="btn contact">
                <span @click="${this.showContactModal}">${i18n("contact_engineer")}</span>
              </div>
            </div>
          </div>
        </div>
      </infinito-modal>
    `}};ys.styles=[n.b`
      .layout-body {
        box-sizing: border-box;
        width: 360px;
        padding: 20px 40px;
      }
      .layout-title {
        margin-top: 30px;
        margin-bottom: 14px;
        text-align: center;
        font-size: 18px;
        font-weight: 500;
        color: #333333;
        line-height: 26px;
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
      }

      .desc {
        margin-bottom: 12px;
        font-size: 12px;
        font-weight: 400;
        color: #b3b3b3;
        line-height: 20px;
      }
      .desc-tip {
        margin-top: 8px;
        margin-bottom: 24px;
        font-size: 12px;
        font-weight: 400;
        color: #ff3838;
        line-height: 16px;
      }
      .desc-tip img,
      .desc-tip span {
        vertical-align: middle;
      }
      .concat-title {
        margin-bottom: 8px;
        font-size: 12px;
        font-weight: 500;
        color: #333333;
        line-height: 16px;
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
      }
      .concat-qq,
      .concat-email {
        margin-bottom: 4px;
        font-size: 12px;
        font-weight: 400;
        color: #4d4d4d;
        line-height: 16px;
        white-space: nowrap;
        text-overflow: ellipsis;
      }
      .footer infinito-button {
        margin-bottom: 10px;
        height: 42px;
      }
      .btn.contact {
        margin-top: 16px;
        margin-bottom: 20px;
        text-align: center;
        font-size: 14px;
        font-weight: 500;
        color: #b3b3b3;
        line-height: 20px;
      }
      .btn.contact span {
        cursor: pointer;
      }
    `],bs([Object(n.g)({type:Boolean})],ys.prototype,"show",void 0),bs([Object(n.g)({type:Boolean})],ys.prototype,"loading",void 0),bs([Object(n.f)()],ys.prototype,"contactModal",void 0),bs([Object(n.f)()],ys.prototype,"updateText",void 0),ys=bs([Object(n.c)("side-repair-modal")],ys);var vs=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};const ws=[{src:"twitter_icon",title:"twitter"},{src:"linked_icon",title:"linkedin"},{src:"facebook_icon",title:"facebook"},{src:"google_icon",title:"google"},{src:"zone_icon",title:"qzone"},{src:"qq_icon",title:"qq"},{src:"douban_icon",title:"douban"},{src:"xinlang_icon",title:"weibo"}].map(e=>Object.assign(Object.assign({},e),{src:i(801)(`./${e.src}.png`)})),xs=[{href:"https://twitter.com/infinitynewtab",src:"twitter_icon",title:Object(J.i18n)("twitter")},{href:"https://www.facebook.com/people/Infinity-Newtab/100017954043897",src:"facebook_icon",title:Object(J.i18n)("facebook")},{href:"http://weibo.com/u/5868302170",src:"xinlang_icon",title:Object(J.i18n)("xin_lang_weibo")}].map(e=>Object.assign(Object.assign({},e),{src:i(801)(`./${e.src}.png`)}));let _s=class extends a.a{constructor(){super(...arguments),this.payType="alipay",this.donateMoney="10",this.showDonateMoney=!1,this.repairModal=!1,this.focusRepair=!1,this.repairContactModal=!1,this.closeModal=()=>{this.showDonateMoney=!1},this.openWallPaperSource=()=>{},this.recoveryFromFile=async()=>{let e=".infinity,text/plain,application/json";l.r&&(e="*");const t=await c.a.chooseFile(e,"readAsText");try{const e=JSON.parse(t);let i={};if("v2"===e.version)i=e.data;else{if(10!==e.version)return void Di.default.error(Object(J.i18n)("recover_error_version"));i=await ha(e)}s.syncStore.useLocalDataWithCheck(i),O.a.sendEvent({action:"localRecovery"})}catch(e){Di.default.error(Object(J.i18n)("recover_error")),console.error("recovery error:",e)}},this.generateBackupFile=async()=>{localStorage.setItem("backup-file",""+Date.now());const e=await s.syncStore.getAllBackupData(),t={version:"v2",browserEnv:l.c,editionEnv:l.e,backupType:"local",time:(new Date).getTime(),extVersion:l.D.extVersion,data:e};c.a.exportJsonFile(t,"infinityBackup-"),O.a.sendEvent({action:"localBackup"})},this.openRepairModal=async()=>{localStorage.setItem("user-checkout-old-data","true");let e=!1;if(l.l){const{checkOldLocalData:t}=await i.e(9).then(i.bind(null,974));e=await t()}e?this.repairModal=!0:this.openRepairContactModal()},this.closeRepairModal=()=>{this.repairModal=!1},this.closeContactModal=()=>{this.repairContactModal=!1},this.openRepairContactModal=()=>{this.repairContactModal=!0}}changeWallPaper(e){e.stopPropagation();this.shadowRoot.querySelector(".wallpaper-source").classList.toggle("open")}giveFiveStar(e){const t=window.chrome.runtime.id;if(l.i){const i=Object(Vn.c)(t);c.a.openUrl(i,!0,e)}if(l.n&&c.a.openUrl(Vn.a,!0,e),l.k){const i=Object(Vn.d)(t);c.a.openUrl(i,!0,e)}if(l.r){const e="itms-apps://apps.apple.com/cn/app/"+"id1600202109";window.open(e,"_blank")}}feedback(e){c.a.openUrl("https://infinity.mikecrm.com/x5tPd5V",!0,e)}radioChange(e){this.donateMoney=e.detail.selected}giveMoney(e){e.stopPropagation(),e.preventDefault(),this.showDonateMoney=!0}follow(e,t){c.a.openUrl(t,!0,e)}share(e){const{href:t}=e.currentTarget;c.a.openUrl(t,!0,e)}showRepairAnimation(){try{this.shadowRoot.querySelector(".repair-card").scrollIntoView({block:"nearest"})}catch(e){}setTimeout(()=>{this.focusRepair=!0},0)}firstUpdated(){if(l.d){const e=new Date(Number(l.d));console.log("versionTime:"+e.toLocaleString())}document.body.addEventListener("click",this.openWallPaperSource);const e=l.i?"Chorme":l.n?"Firefox":"Edge";window.socialShare(this.container,{url:"https://infinitynewtab.com",source:"infinitynewtab",image:"https://infinity-permanent.infinitynewtab.com/infinity/share/home.jpg",title:Object(J.i18n)("share_title",e),description:Object(J.i18n)("share_desc"),sites:["twitter","facebook","google","linkedin","qzone","qq","douban","weibo"]}),this.$repair.addEventListener("animationcancel",e=>{"focusblink"===e.animationName&&(this.focusRepair=!1,s.pluginStore.blurRepair())}),this.$repair.addEventListener("animationend",e=>{"focusblink"===e.animationName&&(this.focusRepair=!1,s.pluginStore.blurRepair())})}disconnectedCallback(){document.body.removeEventListener("click",this.openWallPaperSource)}render(){return n.e`
      <div style="height:100%;box-sizing: border-box; padding: 30px;padding-right:0;" class="global-scrollbar">
        <div style="width:360px;" class="container">
          <user-permission></user-permission>
          <infinito-card style="--padding-width:20px 20px 12px 20px">
            <user-card></user-card>
          </infinito-card>
          <infinito-card class="backup-recovery" cTitle="${Object(J.i18n)("backup_and_recovery")}">
            <div class="backup-btn-box">
              <div class="backup-btn-card">
                <div class="backup-btn-content">
                  <div class="backup-btn" @click="${this.generateBackupFile}">
                    <div class="backup-btn-title">
                      <span class="backup-btn-title-text">${Object(J.i18n)("export_local_data")}</span>
                      <i-svg .src=${vi.a}></i-svg>
                    </div>
                    <span class="backup-btn-desc">${Object(J.i18n)("export_local_data_desc")}</span>
                  </div>
                </div>
              </div>
              <div class="backup-btn-card">
                <div class="backup-btn-content">
                  <div class="backup-btn" @click="${this.recoveryFromFile}">
                    <div class="backup-btn-title">
                      <span class="backup-btn-title-text">${Object(J.i18n)("import_data")}</span>
                      <i-svg .src=${vi.a}></i-svg>
                    </div>
                    <span class="backup-btn-desc">${Object(J.i18n)("import_data_desc")}</span>
                  </div>
                </div>
              </div>
              <div class="backup-btn-card repair-card ${this.focusRepair?"focus":""}">
                <div class="backup-btn-content">
                  <div class="backup-btn" @click="${this.openRepairModal}">
                    <div class="backup-btn-title">
                      <span class="backup-btn-title-text">${Object(J.i18n)("repair_data")}</span>
                      <i-svg .src=${vi.a}></i-svg>
                    </div>
                    <span class="backup-btn-desc">${Object(J.i18n)("repair_data_title")}</span>
                  </div>
                </div>
              </div>
            </div>
          </infinito-card>
          <side-repair-modal
            .show="${this.repairModal}"
            @on-contact="${this.openRepairContactModal}"
            @on-closerepair="${this.closeRepairModal}"
          ></side-repair-modal>
          <infinito-portal-entrance destination="modal-repair-contact">
            <infinito-modal .open=${this.repairContactModal} .onCancel=${this.closeContactModal}>
              <div slot="body">
                <modal-repair-contact .show=${this.repairContactModal}></modal-repair-contact>
              </div>
            </infinito-modal>
          </infinito-portal-entrance>

          <infinito-card cTitle="${Object(J.i18n)("user_evaluation")}">
            <p>${l.s?Object(J.i18n)("give_some_feedback_to_improve_web"):Object(J.i18n)("give_some_feedback_to_improve")}</p>
            <div class="btns rating">
              ${l.s?null:n.e` <infinito-button @click="${this.giveFiveStar}">${Object(J.i18n)("five_star")}</infinito-button> `}

              <infinito-button @click="${this.feedback}">${Object(J.i18n)("feedback")}</infinito-button>
            </div>
          </infinito-card>
          ${J.IS_ZH?n.e`
                <infinito-card cTitle="${Object(J.i18n)("give_money")}">
                  <div class="payment">
                    <p>${Object(J.i18n)("give_money_thanks")}</p>
                    <img class="payment-cover" .src=${Un.a} />
                  </div>
                  <div class="choose-plan">
                    <infinito-radio-group selected="${this.donateMoney}" @on-change=${this.radioChange}>
                      <infinito-radio value="10">${Object(J.i18n)("currency_symbol")}10</infinito-radio>
                      <infinito-radio value="15">${Object(J.i18n)("currency_symbol")}15</infinito-radio>
                      <infinito-radio value="20">${Object(J.i18n)("currency_symbol")}20</infinito-radio>
                      <infinito-radio value="25">${Object(J.i18n)("currency_symbol")}25</infinito-radio>
                      <infinito-radio value="0">${Object(J.i18n)("currency_symbol")}${Object(J.i18n)("any_money")}</infinito-radio>
                    </infinito-radio-group>
                  </div>
                  <div class="btns" style="justify-content: center;">
                    <infinito-button @click="${this.giveMoney}}">${Object(J.i18n)("i_want_to_reward")}</infinito-button>
                  </div>
                </infinito-card>
                <infinito-card cTitle="${Object(J.i18n)("follow_wechat")}">
                  <p class="wechat_desc">${Object(J.i18n)("follow_wechat_desc")}</p>
                  <div class="wechat">
                    <img .src="${Gn.a}" />
                  </div>
                </infinito-card>
              `:null}
          <infinito-card cTitle="${Object(J.i18n)("share")}">
            <div class="icons social-share" data-initialized="true">
              ${ws.map(e=>n.e`
                    <p class="icon-${e.title}" @click=${this.share}>
                      <img .src="${e.src}" />
                    </p>
                  `)}
            </div>
          </infinito-card>
          <infinito-card cTitle="${Object(J.i18n)("follow_us")}">
            <div class="icons">
              ${xs.map(e=>n.e`
                    <p @click="${t=>this.follow(t,e.href)}">
                      <img .src="${e.src}" />
                    </p>
                  `)}
            </div>
          </infinito-card>
          <infinito-card cTitle="${Object(J.i18n)("support")}">
            <div class="btns suport">
              <infinito-button
                class="facebook-group"
                @click=${e=>this.handleOpenUrl(e,"https://www.facebook.com/groups/464169353959006/")}
              >
                <img src="${Fn.a}" />
                <span>${Object(J.i18n)("facebook_group")}</span>
              </infinito-button>
              <infinito-button
                class="qq-group"
                @click=${e=>this.handleOpenUrl(e,"http://qm.qq.com/cgi-bin/qm/qr?k=WYvnxT5rIeATl2wm4T2Dkc0sajWbbCjE&group_code=194737859")}
              >
                <img src="${Hn.a}" />
                <span>${Object(J.i18n)("qq_group")}</span>
              </infinito-button>
            </div>
          </infinito-card>
          <infinito-card cTitle="${Object(J.i18n)("about")}">
            <p class="version">v${l.z}</p>
            <ul class="about-us">
              <li @click=${e=>this.handleOpenUrl(e,"https://policies.extfans.com/policies/about.html")}>
                <span>${Object(J.i18n)("about_us")}</span>
              </li>
              <li @click=${e=>this.handleOpenUrl(e,"https://policies.extfans.com/policies/contact.html")}>
                <span>${Object(J.i18n)("contact_us")}</span>
              </li>
              <li title=${Object(J.i18n)("privacy_policy")} @click=${e=>this.handleOpenUrl(e,c.a.getPrivacyUrl())}>
                <span>${Object(J.i18n)("privacy_policy")}</span>
              </li>
              <li @click=${e=>this.handleOpenUrl(e,"https://policies.extfans.com/policies/terms.html")}>
                <span>${Object(J.i18n)("term_of_use")}</span>
              </li>
            </ul>
          </infinito-card>

          <div class="icp ${J.IS_ZH&&l.s?"":"hide"}">
            <a class="icp-link" target="_blank" href="https://beian.miit.gov.cn/#/Integrated/index"
              >渝ICP备15002199号-11</a
            >
          </div>
        </div>
        <infinito-portal-entrance destination="donate">
          <donate-section
            .open=${this.showDonateMoney}
            .payType=${this.payType}
            .donateMoney=${this.donateMoney}
            @on-cancel=${this.closeModal}
          ></donate-section>
        </infinito-portal-entrance>
      </div>
    `}handleOpenUrl(e,t){c.a.openUrl(t,!0,e)}};_s.styles=[k.a,Mn],vs([Object(n.g)({type:String})],_s.prototype,"payType",void 0),vs([Object(n.g)({type:String})],_s.prototype,"donateMoney",void 0),vs([Object(n.g)({type:Boolean})],_s.prototype,"showDonateMoney",void 0),vs([Object(n.g)({type:Boolean})],_s.prototype,"show",void 0),vs([Object(n.g)({type:Boolean})],_s.prototype,"repairModal",void 0),vs([Object(n.g)({type:Boolean})],_s.prototype,"focusRepair",void 0),vs([Object(n.g)({type:Boolean})],_s.prototype,"repairContactModal",void 0),vs([Object(n.h)(".social-share")],_s.prototype,"container",void 0),vs([Object(n.h)(".repair-card")],_s.prototype,"$repair",void 0),_s=vs([Object(n.c)("side-user")],_s);var As=i(147),Ss=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};const ks=[{key:"history",label:Object(J.i18n)("open_newtab_history"),type:"switch"}],Os=[{key:"bookmark",label:Object(J.i18n)("open_newtab_bookmarks"),type:"switch"}],Is=[{key:"icon",label:Object(J.i18n)("open_new_tab"),type:"switch"},{key:"search",label:Object(J.i18n)("open_newtab_show_search"),type:"switch"},...l.s||l.r?[]:Os,...l.h||l.s||l.r?[]:ks],$s=[...l.h||l.s?[]:[{key:"gmail",label:Object(J.i18n)("gamil_notice"),type:"switch"},...l.r?[]:[{key:"gmailVoice",label:Object(J.i18n)("gmail_notice_voice"),type:"switch"}],{key:"gmailNumber",label:Object(J.i18n)("show_gamil_unread_number"),type:"switch",miniHide:!0}],{key:"todoNumber",label:Object(J.i18n)("show_reminders_number"),type:"switch",miniHide:!0}],Es=[{key:"scaleMain",label:Object(J.i18n)("scale_main"),type:"slider",min:.5,max:1.5,step:.01,percentage:!0},{key:"scaleSide",label:Object(J.i18n)("scale_side"),type:"slider",min:.5,max:1.5,step:.01,percentage:!0},{key:"windmill",label:Object(J.i18n)("wind_mill"),type:"switch"},...l.s||l.r?[]:[{key:"topUseful",label:Object(J.i18n)("top_use_ful"),type:"switch"},{key:"topBookmark",label:Object(J.i18n)("top_bookmark"),type:"switch"}],{key:"pagin",label:Object(J.i18n)("pagin"),type:"switch",miniHide:!0},...l.s?[{key:"isShowHomepageBtn",label:Object(J.i18n)("hide_homepage_btn"),type:"switch"}]:[],...l.s&&J.IS_ZH?[{key:"isHideIcp",label:"隐藏备案号",type:"switch"}]:[]],Cs=[{key:"colGap",label:Object(J.i18n)("col_gap"),type:"slider",min:0,max:1,step:.01,percentage:!0},{key:"rowGap",label:Object(J.i18n)("row_gap"),type:"slider",min:0,max:1,step:.01,percentage:!0},{cardKey:"icon",key:"scale",label:Object(J.i18n)("scale"),type:"slider",min:.1,max:1,step:.01,percentage:!0}],Ts=[{key:"isHideIconName",label:Object(J.i18n)("hide_icon_name"),type:"switch"},{key:"shadow",label:Object(J.i18n)("shadow"),type:"switch"},{key:"startAnimation",label:Object(J.i18n)("start_animation"),type:"switch"},{key:"radius",label:Object(J.i18n)("redius"),type:"slider",min:0,max:.5,step:.01,percentage:!0},{key:"opacity",label:Object(J.i18n)("opacity"),type:"slider",min:.1,max:1,step:.01,percentage:!0},{key:"scale",label:Object(J.i18n)("scale"),type:"slider",min:.1,max:1,step:.01,percentage:!0}],js=[{key:"hide",label:Object(J.i18n)("hide_search_input"),type:"switch"},{key:"searchSuggest",label:Object(J.i18n)("search_suggest"),type:"switch"},{key:"keepSearchInput",label:Object(J.i18n)("keep_search_input"),type:"switch"},{key:"hideCategory",label:Object(J.i18n)("hide_search_category"),type:"switch"},{key:"hideButton",label:Object(J.i18n)("hide_search_button"),type:"switch"},{key:"scale",label:Object(J.i18n)("search_size"),type:"slider",min:.5,max:1.5,step:.01,percentage:!0},{key:"radius",label:Object(J.i18n)("search_redius"),type:"slider",min:0,max:.5,step:.01,percentage:!0},{key:"opacity",label:Object(J.i18n)("search_opacity"),type:"slider",min:.1,max:1,step:.01,percentage:!0}],Ps=[{key:"shadow",label:Object(J.i18n)("text_shadow"),type:"switch",miniHide:!0},{key:"size",label:Object(J.i18n)("font_size"),type:"slider",min:12,max:30,miniHide:!0}];class Rs{constructor(){if(this.layoutView={key:"layout",title:Object(J.i18n)("layout"),children:Cs,custom:!0,miniHide:!0},this.viewData=[{key:"wallpaper",title:Object(J.i18n)("wallpaper"),custom:!0},{key:"link",title:Object(J.i18n)("target_open_way"),tip:Object(J.i18n)("only_used_infinity"),children:Is},{key:"notice",title:Object(J.i18n)("notice"),children:$s},{key:"view",title:Object(J.i18n)("view"),children:Es},Object.assign({},this.layoutView),{key:"icon",title:Object(J.i18n)("icon"),children:Ts,miniHide:!0},{key:"search",title:Object(J.i18n)("search_input"),children:js},{key:"font",title:Object(J.i18n)("font"),children:Ps,custom:!0},{key:"animation",title:Object(J.i18n)("animation"),tip:Object(J.i18n)("animation_tips"),custom:!0,miniHide:!0}],this.layout={list:[[2,4],[2,5],[2,6],[2,7],[3,3]],activeIndex:null,modal:!1},this.animationList=[{label:Object(J.i18n)("default"),easing:"linear",icon:Object(re.a)("setting/animate-default.png"),iconActive:Object(re.a)("setting/animate-default-active.png")},{label:Object(J.i18n)("cubic_bezier"),easing:"elastic",icon:Object(re.a)("setting/animate-bounce.png"),iconActive:Object(re.a)("setting/animate-bounce-active.png")},{label:Object(J.i18n)("ease_in"),easing:"opacity",icon:Object(re.a)("setting/animate-easin.png"),iconActive:Object(re.a)("setting/animate-easin-active.png")}],this.animationIndex=null,this.fontColors=["rgba(255,255,255,0.8)","#df5f47","#efa738","#faec63","#73b364","#60c0d6","#57a0ee","#6c4cb9"],this.closed=new Set,l.s){const e=this.viewData.findIndex(({key:e})=>"view"===e);this.viewData.splice(e,0,{key:"language",title:Object(J.i18n)("language"),custom:!0})}}chooseLayout(e){if(e===this.layout.list.length-1)s.settingStore.changeSetting("layout","custom",!0),s.settingStore.setting.layout.row===s.settingStore.setting.layout.customItem[0]&&s.settingStore.setting.layout.col===s.settingStore.setting.layout.customItem[1]||s.settingStore.changeSetting("layout","customItem",[s.settingStore.setting.layout.row,s.settingStore.setting.layout.col]);else{const t=this.layout.list[e];s.settingStore.changeSetting("layout","custom",!1),s.settingStore.changeSetting("layout","row",t[0]),s.settingStore.changeSetting("layout","col",t[1]);const i=Object(As.a)(t[0],t[1]);i&&s.settingStore.setIconSpace(i)}}changeLayoutModal(e){e&&this.chooseLayout(5),this.layout.modal=e}chooseAnimation(e){const t=this.animationList[e];s.settingStore.changeSetting("animation","easing",t.easing)}chooseFontClolor(e){s.settingStore.changeSetting("font","color",e)}close(e){this.closed.add(e)}open(e){this.closed.delete(e)}}Ss([x.g],Rs.prototype,"layout",void 0),Ss([x.g],Rs.prototype,"animationIndex",void 0),Ss([x.g],Rs.prototype,"closed",void 0),Ss([x.b],Rs.prototype,"chooseLayout",null),Ss([x.b],Rs.prototype,"changeLayoutModal",null),Ss([x.b],Rs.prototype,"chooseAnimation",null),Ss([x.b],Rs.prototype,"chooseFontClolor",null),Ss([x.b],Rs.prototype,"close",null),Ss([x.b],Rs.prototype,"open",null);const Ls=new Rs;Object(x.c)(()=>{if(s.settingStore.firstSync){const{col:e,row:t,custom:i,customItem:o}=s.settingStore.setting.layout,r=5;Object(x.i)(()=>{if(Ls.layout.list[r]=o,i)Ls.layout.activeIndex=r;else{const i=[t,e],o=Ls.layout.list.findIndex(e=>i.join(",")===e.join(","));Ls.layout.activeIndex=o}})}}),Object(x.c)(()=>{if(s.settingStore.firstSync){const{easing:e}=s.settingStore.setting.animation;Object(x.i)(()=>{const t=Ls.animationList.findIndex(t=>t.easing===e);Ls.animationIndex=t})}});var Ns=n.b`.side-setting {
  height: calc(100% - 56px);
}
.side-setting .header-box {
  width: 420px;
  display: flex;
  justify-content: center;
}
.side-setting .header {
  max-width: 360px;
  margin: 12px 0;
  height: 32px;
  box-sizing: border-box;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 8px;
  background: rgba(0, 0, 0, 0.05);
  font-size: 14px;
  font-weight: 400;
  color: #454545;
}
.side-setting .header .tab {
  margin: 2px;
  padding: 4px 18px;
  box-sizing: content-box;
  height: 20px;
  line-height: 20px;
  cursor: pointer;
  border-radius: 6px;
  transition: background 0.2s, color 0.2s;
  word-break: keep-all;
  text-overflow: ellipsis;
  overflow: hidden;
}
.side-setting .header .tab:hover {
  background: #ffffff;
  color: #333333;
}
.side-setting .header .tab:last-of-type {
  margin-left: 0;
}
.side-setting .header .active {
  border-radius: 6px;
  background: #ffffff;
  color: #333333;
}
infinito-card {
  width: 360px;
  transition: margin-top 0.3s ease-in-out;
}
infinito-card[close] + infinito-card:not([close]) {
  margin-top: 30px;
}
infinito-card:not([close]) + infinito-card[close] {
  margin-top: 30px;
}
.tips {
  margin-top: 6px;
  display: block;
  font-size: 13px;
  font-weight: 400;
  color: #999999;
  line-height: 18px;
}
.rule-box {
  display: flex;
  justify-content: space-between;
  margin-top: 24px;
}
.rule-box .rule {
  color: #454545;
  font-weight: 400;
  word-break: keep-all;
  text-overflow: ellipsis;
  overflow: hidden;
  margin-right: 10px;
  height: 20px;
  line-height: 20px;
}
.rule-box.slider-type {
  flex-direction: column;
}
.rule-box.slider-type .rule-option {
  margin: 10px 0 0;
  padding-left: 4px;
  box-sizing: border-box;
  width: calc(100% + 10px);
}
.rule-box.scale-side {
  margin: 0 0 -16px;
  padding: 20px 0;
  box-sizing: border-box;
}
.layout-custom {
  margin: 24px 0 -20px;
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  grid-row-gap: 20px;
  grid-column-gap: 20px;
}
.layout-custom .item {
  max-width: 94px;
  display: flex;
  flex-direction: column;
  align-items: center;
  cursor: pointer;
}
.layout-custom .active i-svg,
.layout-custom .active .item-text {
  color: #333333;
}
.layout-custom .active .item-card {
  border: 2px solid #333333;
}
.layout-custom .active .item-card-holder {
  background-color: #fff;
}
.layout-custom .active .item-card-holder.hard {
  background: #333;
}
.layout-custom .item-card {
  width: 100%;
  height: 53px;
  box-sizing: border-box;
  display: grid;
  justify-items: stretch;
  align-items: stretch;
  border-radius: 6px;
  overflow: hidden;
}
.layout-custom .item-card-holder {
  background-color: #f5f5f5;
}
.layout-custom .item-card-holder.hard {
  background: #ebebeb;
}
.layout-custom .item:last-of-type .item-card {
  display: flex;
  justify-content: center;
  align-items: center;
  background: #f5f5f5;
}
.layout-custom i-svg {
  width: 24px;
  height: 24px;
  color: #999999;
}
.layout-custom .item-text {
  margin-top: 6px;
  color: #999999;
}
.animation-card {
  margin-top: 24px;
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  grid-column-gap: 20px;
}
.animation-card .animation-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  cursor: pointer;
}
.animation-card .item-card {
  background: #f5f5f5;
  border-radius: 6px;
}
.animation-card .item-card img {
  width: 100%;
}
.animation-card .item-card .animateimg {
  display: block;
}
.animation-card .item-text {
  margin-top: 10px;
  color: #999999;
}
.animation-card .active .item-text {
  color: #333333;
}
.rule-box.colors {
  flex-direction: column;
  position: relative;
}
.rule-box.colors .rule-option {
  margin: 20px 0 2px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.btn {
  position: relative;
  display: block;
  outline: 0;
  border: 0;
  width: 122px;
  height: 42px;
  background: #efefef;
  border-radius: 6px;
  font-weight: 500;
  color: #333333;
  cursor: pointer;
}
.btn:hover {
  background: #dedede;
}
.reset-btn {
  margin: 24px auto 0;
}
.language-card .language-item {
  margin-top: 24px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-flow: row nowrap;
}
.language-card .language-select-wrap .label {
  max-width: 110px;
}
.language-card .language-select-wrap .language-select {
  flex: 1;
  width: 0;
  max-width: 120px;
  height: 24px;
  background: #ffffff;
  border-radius: 4px;
  border: 1px solid #dcdcdc;
  line-height: 24px;
  color: #656565;
  font-size: 12px;
}
.wallpaper-container {
  width: 100%;
  margin: 20px 0 0;
}
.wallpaper-container .wp-inner-container {
  position: relative;
  box-sizing: border-box;
  width: 100%;
  height: 180px;
  border-radius: 4px;
  transition: background-color 200ms ease 0s;
}
.wallpaper-container .wp-download-button {
  width: 36px;
  height: 36px;
  position: absolute;
  top: 12px;
  right: 12px;
  border-radius: 50%;
  background-color: rgba(0, 0, 0, 0.2);
  z-index: 2;
  display: flex;
  justify-content: center;
  align-items: center;
  transition: background-color 200ms;
  cursor: pointer;
}
.wallpaper-container .wp-download-button:hover {
  background-color: rgba(0, 0, 0, 0.6);
}
.wallpaper-container .wp-inner-container .wp-hover-mask:hover {
  background-color: rgba(0, 0, 0, 0.24);
}
.wallpaper-container .wp-inner-container .wp-hover-mask:hover .wph-mask-button {
  display: block;
}
@media only screen and (hover: none) {
  .wallpaper-container .wp-inner-container .wp-hover-mask {
    background-color: rgba(0, 0, 0, 0.24);
  }
  .wallpaper-container .wp-inner-container .wp-hover-mask .wph-mask-button {
    display: block;
  }
}
.wallpaper-container .wp-hover-mask {
  position: absolute;
  z-index: 1;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  background-color: transparent;
  transition: background-color 150ms;
  cursor: pointer;
  display: flex;
  justify-content: center;
  align-items: center;
}
.wallpaper-container .wp-hover-mask .wph-mask-button {
  display: none;
  max-width: 145px;
  height: 40px;
  background: rgba(51, 51, 51, 0.6);
  border-radius: 4px;
  border: none;
  font-size: 14px;
  font-family: PingFangSC-Regular, PingFang SC;
  color: #ffffff;
  line-height: 20px;
  box-sizing: border-box;
  padding: 0 4px;
  text-align: center;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  cursor: pointer;
  padding: 0 15px;
}
.wallpaper-container .slider-wrapper {
  margin-top: 30px;
}
.wallpaper-container .mask:first-child {
  margin-bottom: 25px;
}
.wallpaper-container .mask > p {
  font-size: 14px;
  color: #454545;
  font-weight: 400;
  margin-bottom: 17px;
}
`,Ms=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let Ds=class extends n.a{constructor(){super(...arguments),this.checked=!1}_changeHandler(e){e.stopPropagation(),this.checked=e.target.checked,this.dispatchEvent(new CustomEvent("change",{detail:{checked:this.checked},bubbles:!0,composed:!0}))}render(){return n.e`
      <div id="container">
        <input
          hidden
          type="checkbox"
          id="switch"
          .checked=${this.checked}
          @change="${this._changeHandler}"
        >
        <label class="switch" for="switch"></label>
      </div>
    `}};Ds.styles=n.b`
    .switch {
      box-sizing: border-box;
      display: inline-block;
      position: relative;
      width: 24px;
      height: 16px;
      border-radius: 20px;
      border: 2px solid rgba(51, 51, 51, .2);
      transition: background 0.28s cubic-bezier(0.4, 0, 0.2, 1);
      vertical-align: middle;
      cursor: pointer;
    }
    .switch::before {
      content: '';
      position: absolute;
      top: 1px;
      left: 1px;
      width: 10px;
      height: 10px;
      background: rgba(51, 51, 51, .2);
      border-radius: 50%;
      transition: left 0.28s cubic-bezier(0.4, 0, 0.2, 1), background 0.28s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.28s cubic-bezier(0.4, 0, 0.2, 1);
    }
    /* .switch:active::before {
      box-shadow: 0 2px 8px rgba(0,0,0,0.28), 0 0 0 20px rgba(128,128,128,0.1);
    } */
    input:checked + .switch {
      border: 2px solid rgba(51, 51, 51, 1);
    }
    input:checked + .switch::before {
      left: 9px;
      background: rgba(51, 51, 51, 1);
    }
    /* input:checked + .switch:active::before {
      box-shadow: 0 2px 8px rgba(0,0,0,0.28), 0 0 0 20px rgba(0,150,136,0.2);
    } */
  `,Ms([Object(n.g)({type:Boolean})],Ds.prototype,"checked",void 0),Ds=Ms([Object(n.c)("i-switch")],Ds);i(644);var Us=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let Bs=class extends n.a{constructor(){super(...arguments),this.value="",this.label="",this.min="",this.max="",this.step="",this.floatScaleRatio=1,this.rect={top:null,left:null,width:null,height:null,right:null},this.floatScale=!1,this.start=null}shouldUpdate(e){if(e.has("floatScale")&&!1===this.floatScale&&this.$container&&this.start){const e={left:this.rect.left-20*this.floatScaleRatio+"px",top:this.rect.top+"px",width:this.rect.width/this.floatScaleRatio+"px",transform:`scale(${this.floatScaleRatio})`};return this.$itemBox.animate([this.start,e],{duration:400,easing:"ease-in-out"}).onfinish=()=>{this.$container.style.opacity="0",this.requestUpdate()},!1}return!0}updated(e){e.has("floatScale")&&!0===this.floatScale&&(this.$container.offsetHeight,this.$container.style.opacity="1",this.start={left:this.rect.left-20*this.floatScaleRatio+"px",top:this.rect.top+"px",width:this.rect.width/this.floatScaleRatio+"px",transform:`scale(${this.floatScaleRatio})`})}render(){const{top:e,left:t,width:i}=this.rect,o=this.floatScaleRatio;return n.e`
      <div class="float-scale" .hidden="${!this.floatScale}">
        <div
          class="item-box"
          style="transform:scale(${o});width:${i/o}px; left:${t-20*o}px;top:${e}px;"
        >
          <span class="rule">${this.label}</span>
          <div class="item">
            <infinito-slider
              .value=${this.value}
              .min=${this.min}
              .max=${this.max}
              .step=${this.step}
              .translator=${e=>Math.round(100*e)+"%"}
            ></infinito-slider>
          </div>
        </div>
      </div>
    `}};Bs.styles=n.b`
    .float-scale {
      opacity: 0;
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.3);
      z-index: 99999;
      transition: 0.3s opacity;
    }
    .item-box {
      padding: 20px;
      position: absolute;
      background-color: #fff;
      box-shadow: 0px 24px 30px -18px rgba(0, 0, 0, 0.23);
      border-radius: 6px;
      transform-origin: left top;
    }
    .item {
      margin: 10px 0;
      background-color: #fff;
      padding-left: 4px;
      box-sizing: border-box;
      width: calc(100% + 10px);
    }
  `,Us([Object(n.g)()],Bs.prototype,"value",void 0),Us([Object(n.g)()],Bs.prototype,"label",void 0),Us([Object(n.g)()],Bs.prototype,"min",void 0),Us([Object(n.g)()],Bs.prototype,"max",void 0),Us([Object(n.g)()],Bs.prototype,"step",void 0),Us([Object(n.g)({type:Number})],Bs.prototype,"floatScaleRatio",void 0),Us([Object(n.g)({type:Object})],Bs.prototype,"rect",void 0),Us([Object(n.g)({type:Boolean})],Bs.prototype,"floatScale",void 0),Us([Object(n.h)(".float-scale")],Bs.prototype,"$container",void 0),Us([Object(n.h)(".item-box")],Bs.prototype,"$itemBox",void 0),Bs=Us([Object(n.c)("side-float-scale")],Bs);var Fs=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let zs=class extends n.a{constructor(){super(...arguments),this.show=!1}_changeLayoutCustom(e,t){const{customItem:i}=s.settingStore.setting.layout,o=[...i];"row"===e?o[0]=t.detail.value:"col"===e&&(o[1]=t.detail.value),s.settingStore.changeSetting("layout","customItem",o)}_submitLayoutModal(){Ls.changeLayoutModal(!1)}_renderDefaultCard(e){var t;if(e)return null===(t=e.children)||void 0===t?void 0:t.map(t=>{var i;const{key:o,type:r,label:a}=t,l=null!==(i=t.cardKey)&&void 0!==i?i:e.key;if(!o)return null;if("switch"===r)return n.e`
          <div class="rule-box">
            <span class="rule">${a}</span>
            <span class="rule-option">
              <i-switch
                @change="${e=>s.settingStore.changeSetting(l,o,e.detail.checked)}"
                ?checked=${s.settingStore.setting[l][o]}
              ></i-switch>
            </span>
          </div>
        `;if("slider"===r){const{min:e=1,max:i=10,step:r=1,percentage:c=!1}=t;return n.e`
          <div class="rule-box slider-type">
            <span class="rule">${a}</span>
            <span class="rule-option">
              <infinito-slider
                @on-change="${e=>s.settingStore.changeSetting(l,o,e.detail.value)}"
                .value=${s.settingStore.setting[l][o]}
                .min=${e}
                .max=${i}
                .step=${r}
                .translator=${c?e=>Math.round(100*e)+"%":null}
              ></infinito-slider>
            </span>
          </div>
        `}return null})}render(){if(!this.show)return null;const{customItem:e}=s.settingStore.setting.layout;return n.e`
      <infinito-modal style="--modal-padding:0;" .onCancel="${this._submitLayoutModal}" .open=${this.show}>
        <div class="layout-body" slot="body">
          <div class="layout-title">${Object(J.i18n)("custom_layout")}</div>
          <div class="scroll-body global-scrollbar">
            <div class="rule-box slider-type">
              <span class="rule">${Object(J.i18n)("col_num")}</span>
              <span class="rule-option">
                <infinito-slider
                  @on-change="${e=>this._changeLayoutCustom("row",e)}"
                  .value=${e[0]}
                  .min=${1}
                  .max=${8}
                ></infinito-slider>
              </span>
            </div>
            <div class="rule-box slider-type">
              <span class="rule">${Object(J.i18n)("row_num")}</span>
              <span class="rule-option">
                <infinito-slider
                  @on-change="${e=>this._changeLayoutCustom("col",e)}"
                  .value=${e[1]}
                  .min=${1}
                  .max=${8}
                ></infinito-slider>
              </span>
            </div>
            ${this._renderDefaultCard(this.card)}
          </div>
        </div>
      </infinito-modal>
    `}};zs.styles=[k.a,n.b`
      .layout-title {
        margin-top: 20px;
        margin-bottom: 20px;
        text-align: center;
        font-size: 20px;
        font-weight: 500;
        color: rgba(51, 51, 51, 1);
      }
      .layout-body {
        box-sizing: border-box;
        width: 360px;
        padding-top: 20px;
        padding-bottom: 20px;
      }
      .layout-btns {
        margin-bottom: 20px;
        padding-left: 20px;
        padding-right: 20px;
      }
      .rule-box {
        width: 290px;
        display: flex;
        justify-content: space-between;
        margin-bottom: 20px;
        margin-left: 40px;
        margin-top: 0;
      }

      .rule-box.slider-type {
        flex-direction: column;
        .rule-option {
          margin: 10px 0 0;
          padding-left: 4px;
        }
      }
      .btn {
        position: relative;
        display: block;
        outline: 0;
        border: 0;
        width: 122px;
        height: 42px;
        background: rgba(239, 239, 239, 1);
        border-radius: 6px;
        font-weight: 500;
        color: rgba(51, 51, 51, 1);
        cursor: pointer;
      }
      .btn:hover {
        background: rgba(222, 222, 222, 1);
      }
      .submit-btn {
        margin: 50px auto 0;
        width: 280px;
        max-width: 100%;
        height: 52px;
        background: rgba(51, 51, 51, 1);
        color: #fff;
        font-size: 16px;
      }
      .submit-btn:hover {
        background: rgba(51, 51, 51, 0.9);
      }
      .scroll-body {
        max-height: calc(100vh - 200px);
        min-height: 100px;
      }
    `],Fs([Object(n.g)({type:Boolean})],zs.prototype,"show",void 0),Fs([Object(n.g)({type:Object})],zs.prototype,"card",void 0),zs=Fs([Object(n.c)("side-layout-modal")],zs);var Hs=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let Ws=class extends a.a{constructor(){super(...arguments),this.floatScaleShow=!1,this.hidden=!1,this.floatScaleRatio=1,this.floatScaleRect={left:null,top:null,width:null,height:null},this._languageList={"zh-CN":"中文简体",cs:"čeština",da:"dansk",de:"Deutsche",el:"Ελληνικά",en:"English","en-US":"English (United States)","en-GB":"English (United Kingdom)",es:"Español","es-419":"Español (América Latina y el Caribe)",fi:"Suomalainen",fr:"français",hu:"Magyar",it:"italiano",ja:"日本語",ko:"한국어",ms:"Orang Malaysia",no:"norsk",nl:"Nederlands",pl:"Polskie","pt-BR":"Portugues (brasil)","pt-PT":"Portugues (portugal)",ro:"Română",ru:"русский язык",sk:"Slovák",sv:"svenska",th:"ไทย",tr:"Türk",uk:"Український",vi:"Tiếng Việt","zh-TW":"中文繁體",hi:"हिंदी",id:"bahasa Indonesia"}}updated(e){this.hidden&&s.settingStore.sendSettingValue(),super.updated(e)}closeModal(){Ls.changeLayoutModal(!1)}_renderDefaultCard(e){var t;const{miniMode:i}=s.settingStore.setting.icon,{key:o}=e;return null===(t=e.children)||void 0===t?void 0:t.map((t,r)=>{const{key:a,type:l,label:c}=t;if(!a)return null;if(i&&t.miniHide)return null;if("search"===o&&s.settingStore.setting.search.hide&&0!==r)return null;if("switch"===l)return n.e`
          <div class="rule-box">
            <span class="rule">${c}</span>
            <span class="rule-option">
              <i-switch
                @change="${t=>{"isShowHomepageBtn"===a?s.settingStore.changeSetting(e.key,a,!t.detail.checked):s.settingStore.changeSetting(e.key,a,t.detail.checked)}}"
                ?checked=${"isShowHomepageBtn"===a?!s.settingStore.setting[e.key][a]:s.settingStore.setting[e.key][a]}
              ></i-switch>
            </span>
          </div>
        `;if("slider"===l){const{min:i=1,max:o=10,step:r=1,percentage:l=!1}=t;return"scaleSide"===a?n.e`
            <div class="rule-box slider-type scale-side">
              <span class="rule">${c}</span>
              <span class="rule-option">
                <infinito-slider
                  @on-start="${e=>{this.floatScaleShow=!0,this.floatScaleRatio=s.settingStore.setting.view.scaleSide,this.floatScaleRect=e.target.parentElement.parentElement.getBoundingClientRect()}}"
                  @on-end="${e=>{this.floatScaleShow=!1,this.floatScaleRatio=s.settingStore.setting.view.scaleSide,this.floatScaleRect=e.target.parentElement.parentElement.getBoundingClientRect()}}"
                  @on-change="${t=>s.settingStore.changeSetting(e.key,a,t.detail.value)}"
                  .value=${s.settingStore.setting[e.key][a]}
                  .min=${i}
                  .max=${o}
                  .step=${r}
                  .translator=${l?e=>Math.round(100*e)+"%":null}
                ></infinito-slider>
              </span>
              <infinito-portal-entrance destination="side-float-scale">
                <side-float-scale
                  .label="${c}"
                  .floatScale=${this.floatScaleShow}
                  .floatScaleRatio=${this.floatScaleRatio}
                  .value=${s.settingStore.setting[e.key][a]}
                  .min=${i}
                  .max=${o}
                  .step=${r}
                  .rect=${this.floatScaleRect}
                ></side-float-scale>
              </infinito-portal-entrance>
            </div>
          `:n.e`
          <div class="rule-box slider-type">
            <span class="rule">${c}</span>
            <span class="rule-option">
              <infinito-slider
                @on-change="${t=>s.settingStore.changeSetting(e.key,a,t.detail.value)}"
                .value=${s.settingStore.setting[e.key][a]}
                .min=${i}
                .max=${o}
                .step=${r}
                .translator=${l?e=>Math.round(100*e)+"%":null}
              ></infinito-slider>
            </span>
          </div>
        `}return null})}_choosLayout(e){document.querySelector("newtab-main").toPage(0),Ls.chooseLayout(e)}_openLayoutModal(){Ls.changeLayoutModal(!0)}_renderCustomLayoutCard(e,t){const i=[];for(;e;){let o=!(--e%2);[...Array(t)].forEach(()=>{o=!o,i.push(o)})}return i.map(e=>n.e`<div
          class="${Object(K.a)({"item-card-holder":!0,hard:e})}"
        ></div> `)}_renderCustomLayout(){const{list:e,activeIndex:t}=Ls.layout;return n.e` <div class="layout-custom">
      ${e.map((i,o)=>{const r=i[0],a=i[1];return o===e.length-1?n.e`
            <div @click="${this._openLayoutModal}" class="item ${o===t?"active":""}">
              <div class="item-card item-card-custom">
                <i-svg src="${Object(re.a)("setting/edit.svg",!1)}"></i-svg>
              </div>
              ${s.settingStore.setting.layout.custom?n.e`<div class="item-text">${Object(J.i18n)("custom")}(${r}x${a})</div>`:n.e`<div class="item-text">${Object(J.i18n)("custom")}</div>`}
            </div>
          `:n.e`
          <div @click="${()=>this._choosLayout(o)}" class="item ${o===t?"active":""}">
            <div
              style="grid-template-columns: repeat(${a}, 1fr);grid-template-rows: repeat(${r}, 1fr);"
              class="item-card"
            >
              ${this._renderCustomLayoutCard(r,a)}
            </div>
            <div class="item-text">${r}x${a}</div>
          </div>
        `})}
    </div>`}_choosAnimation(e){Ls.chooseAnimation(e)}_renderAnimation(){const{animationIndex:e,animationList:t}=Ls;return n.e` <div class="animation-card">
      ${t.map((t,i)=>n.e`
          <div @click="${()=>this._choosAnimation(i)}" class="animation-item">
            <div class="item-card">
              <img class="animateimg" src="${i===e?t.iconActive:t.icon}" alt="" />
            </div>
            <div class="item-text">${t.label}</div>
          </div>
        `)}
    </div>`}_pickColor(e){const{value:t}=e.detail;Ls.chooseFontClolor(t)}_renderFontColor(){const{fontColors:e}=Ls,{color:t}=s.settingStore.setting.font,i=s.settingStore.sideRatio>.7?0:300*(s.settingStore.sideRatio-.7);return n.e`
      <div class="rule-box colors">
        <span class="rule">${Object(J.i18n)("font_color")}</span>
        <i-colorpicker
          side
          class="rule-option"
          .colors=${e}
          .value="${t}"
          .offsetRight="${i}"
          @on-change="${this._pickColor}"
        ></i-colorpicker>
      </div>
    `}async _switchLanguage(e){try{const t=e.target.value,i=await fetch(`${l.B}/_locales/${t.replace("-","_")}/messages.json?v=1648693770916`).then(e=>e.json());Object.keys(i).length>50&&(await Object(J.setLangToLocal)(i),localStorage.setItem("langCode",t),localStorage.setItem("setLangCode","1"),Yi.slave.sendMessage("tabs-reload"),location.reload())}catch(e){Di.default.error(Object(J.i18n)("network_error"))}}downloadWallpaper(){c.a.downloadImg(s.wallpaperStore.rawUrl,void 0,s.wallpaperStore.wpExt)}_openWallpaperModal(){s.pluginStore.show("infinity://wallpaper")}changeMask(e,t){const{value:i}=e.detail;t?s.wallpaperStore.setOpacity(i):s.wallpaperStore.setBlur(i)}_renderWallpaperCard(){return n.e`
      <div class="wallpaper-container">
        <div class="wp-inner-container">
          <wp-item-raw
            .type=${s.wallpaperStore.type}
            .content=${"color"===s.wallpaperStore.type?s.wallpaperStore.color:s.wallpaperStore.urlInUI}
          ></wp-item-raw>
          <div
            class="wp-download-button"
            @click=${this.downloadWallpaper}
            style="${"color"===s.wallpaperStore.type?"display: none;":""}"
          >
            <img
              class="wp-download-icon"
              src=${i(933)}
              decoding="async"
              importance="auto"
              width="20"
            />
          </div>

          <div class="wp-hover-mask" @click=${this._openWallpaperModal}>
            <input class="wph-mask-button" type="button" value=${Object(J.i18n)("change_wallpaper")} />
          </div>
        </div>
        <div class="slider-wrapper">
          <div class="mask">
            <p>${Object(J.i18n)("mask_density")}</p>
            <div
              style="
                padding-left: 4px;
                box-sizing: border-box;
                width: calc(100% + 10px);
                  "
            >
              <infinito-slider
                @on-change="${e=>this.changeMask(e,!0)}"
                .value="${s.wallpaperStore.opacity}"
                .min=${0}
                .max=${100}
                suffix="%"
              >
              </infinito-slider>
            </div>
          </div>
          ${l.n?null:n.e`
                <div class="mask">
                  <p>${Object(J.i18n)("ambiguity")}</p>
                  <div
                    style="
                padding-left: 4px;
                box-sizing: border-box;
                width: calc(100% + 10px);
                  "
                  >
                    <infinito-slider
                      @on-change="${e=>this.changeMask(e)}"
                      .value="${s.wallpaperStore.blur}"
                      .min=${0}
                      .max=${100}
                      suffix="%"
                    >
                    </infinito-slider>
                  </div>
                </div>
              `}
        </div>
      </div>
    `}_renderLanguageCard(){const{_languageList:e}=this,t=l.D.lang;return n.e`
      <div class="language-card">
        <div class="language-items">
          <div class="language-item language-select-wrap">
            <span class="label">${Object(J.i18n)("language_select")}</span>
            <select class="language-select" @change=${this._switchLanguage}>
              ${Object.keys(e).map(i=>n.e` <option value=${i} ?selected=${t===i}>${e[i]}</option> `)}
            </select>
          </div>
        </div>
      </div>
    `}_renderCard(e){if(!e.custom)return this._renderDefaultCard(e);switch(e.key){case"layout":return n.e`${this._renderCustomLayout()}`;case"animation":return this._renderAnimation();case"font":return n.e` ${this._renderDefaultCard(e)} ${this._renderFontColor()} `;case"language":return this._renderLanguageCard();case"wallpaper":return this._renderWallpaperCard();default:return this._renderDefaultCard(e)}}resetModal(){Y.IConfirm.create().toShow({text:Object(J.i18n)("request_reset_all_settings"),title:Object(J.i18n)("hint"),onConfirm:()=>{O.a.sendEvent({settingAction:"reset"}),s.settingStore.reset()}})}setMiniModel(e){s.settingStore.changeSetting("icon","miniMode",e)}render(){const{miniMode:e}=s.settingStore.setting.icon;return n.e`
      <div class="side-setting">
        <div class="header-box">
          <div class="header">
            <div @click="${()=>this.setMiniModel(!1)}" class="tab ${e?"":"active"}">
              ${Object(J.i18n)("normal_model")}
            </div>
            <div @click="${()=>this.setMiniModel(!0)}" class="tab ${e?"active":""}">
              ${Object(J.i18n)("mini_mode")}
            </div>
          </div>
        </div>
        <div
          class="global-scrollbar"
          style="
        height:100%;
      box-sizing: border-box;
      padding: 0 30px 30px;
      padding-right:0;
      "
        >
          ${Ls.viewData.map(t=>e&&t.miniHide?null:n.e`
              <infinito-card cTitle="${t.title}">
                ${t.tip&&n.e` <span class="tips">${Object(J.i18n)("only_used_infinity")}</span>`} ${this._renderCard(t)}
              </infinito-card>
            `)}
          <infinito-card cTitle="${Object(J.i18n)("reset_setting")}">
            <span style="margin-top:12px;" class="tips">${Object(J.i18n)("set_setting_default")}</span>
            <infinito-button
              class="btn reset-btn"
              @click="${this.resetModal}"
              .scaleRatio=${s.settingStore.sideScaleRatio}
              style="--border-color: #efefef;"
              >${Object(J.i18n)("restore_setting")}</infinito-button
            >
          </infinito-card>
        </div>
      </div>
    `}};Ws.styles=[k.a,Ns],Hs([Object(n.f)()],Ws.prototype,"floatScaleShow",void 0),Hs([Object(n.g)({type:Boolean,reflect:!0})],Ws.prototype,"hidden",void 0),Hs([Object(n.f)()],Ws.prototype,"floatScaleRatio",void 0),Hs([Object(n.f)()],Ws.prototype,"floatScaleRect",void 0),Ws=Hs([Object(n.c)("side-setting")],Ws);var Gs=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let Vs=class extends a.a{constructor(){super(...arguments),this.tabsActive=0,this.tabs=[{text:Object(J.i18n)("add"),icon:"icon-tianjia",borderBottom:!1},{text:Object(J.i18n)("me"),icon:"icon-wode2x",borderBottom:!0},{text:Object(J.i18n)("settings"),icon:"icon-shezhi2x",borderBottom:!0}]}firstUpdated(){this.addEventListener("open-setting",()=>{this.activeThis(2)})}updated(e){var t;e.has("tabsActive")&&(0===this.tabsActive?(this._setIconsActiveStyle(),null===(t=this.$sideIcons)||void 0===t||t.clearSearch(),this.$sideIcons.focusSearch(),this.$sideIcons.setActiveType(0)):2===this.tabsActive&&this.$sideSetting.closeModal(),U.setAddIconActiveStatus(0===this.tabsActive))}_setIconsActiveStyle(){setTimeout(()=>{this.$sideIcons.setActiveStyle()},0)}beforeShow(){var e,t,i;if(R()(e=s.pluginStore.pluginViews).call(e,"infinity://settings")&&(this.tabsActive=2),R()(t=s.pluginStore.pluginViews).call(t,"profile")&&s.pluginStore.focusRepair&&(this.tabsActive=1),0===this.tabsActive&&(this._setIconsActiveStyle(),null===(i=this.$sideIcons)||void 0===i||i.clearSearch(),l.r))return new r.a(e=>{requestAnimationFrame(e)})}afterShow(){0===this.tabsActive?this.$sideIcons.focusSearch():1===this.tabsActive&&s.pluginStore.focusRepair&&this.$sideUser.showRepairAnimation()}afterHide(){switch(this.tabsActive){case 0:this.$sideIcons.setActiveType(0);break;case 1:this.$sideUser.closeRepairModal();break;case 2:this.$sideSetting.closeModal(),s.settingStore.sendSettingValue()}}activeThis(e){this.tabsActive=e,1===this.tabsActive&&this.$sideUser.closeRepairModal()}render(){return n.e`
      <i-side2-header .borderBottom="${this.tabs[this.tabsActive].borderBottom}">
        <nav slot="content" class="side-header">
          ${this.tabs.map((e,t)=>n.e`
              <div @click="${()=>this.activeThis(t)}" class="item ${this.tabsActive===t?"active":""}">
                <i-usesvg style="width:24px;height:24px" iconfont type="${e.icon}"></i-usesvg>
                <span>${e.text}</span>
              </div>
            `)}
        </nav>
      </i-side2-header>
      <icons-custom
        @on-close="${()=>{Rn.hideCustomIconCard()}}"
        .show="${Rn.customIconCardShow}"
      ></icons-custom>
      <side-layout-modal
        .card="${Ls.layoutView}"
        ?show="${Ls.layout.modal}"
      ></side-layout-modal>
      <div class="side-content">
        <side-icons .hidden="${0!==this.tabsActive}"></side-icons>
        <side-user .hidden="${1!==this.tabsActive}"></side-user>
        <side-setting .hidden="${2!==this.tabsActive}"></side-setting>
      </div>
    `}};Vs.styles=n.b`
    :host {
      display: block;
      height: 100%;
    }
    [hidden] {
      display: none !important;
    }
    .side-header {
      display: flex;
      justify-content: space-between;
      padding: 21px 58px;
      box-sizing: border-box;
      height: 100%;
      width: 100%;
    }
    .item {
      padding: 0 10px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      align-items: center;
      font-size: 12px;
      font-weight: 500;
      color: rgba(51, 51, 51, 1);
      line-height: 17px;
      opacity: 0.4;
      cursor: pointer;
      transition-property: opacity;
      transition-duration: 0.3s;
      transition-timing-function: ease;
      backface-visibility: hidden;
    }
    .item.active {
      opacity: 1;
    }
    .side-content {
      height: calc(100% - var(--side-header-height));
      overflow: hidden;
      background-color: rgb(245, 245, 245);
      backface-visibility: hidden;
      transform: translateZ(0);
    }
    icons-custom {
      z-index: 1111;
    }
    icons-custom[show] {
      display: block;
    }
  `,Gs([Object(n.g)({type:Number})],Vs.prototype,"tabsActive",void 0),Gs([Object(n.h)("side-setting")],Vs.prototype,"$sideSetting",void 0),Gs([Object(n.h)("side-icons")],Vs.prototype,"$sideIcons",void 0),Gs([Object(n.h)("side-user")],Vs.prototype,"$sideUser",void 0),Vs=Gs([Object(n.c)("side-profile")],Vs);var qs=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let Ys=class extends a.a{constructor(){super(...arguments),this.initIEditicon=()=>{}}afterHide(){s.siteStore.clearEditSite()}beforeShow(){this.initIEditicon()}afterShow(){this.initIEditicon()}_close(){const e=new CustomEvent("on-close",{bubbles:!0,composed:!0});this.dispatchEvent(e)}_onSubmit(e){s.siteStore.submitSite(e.detail.value),requestAnimationFrame(()=>{setTimeout(()=>{this._close()},0)})}render(){let e=null;if(s.siteStore.editingId){const t=document.querySelector("newtab-main").iconSearchShow,i=s.siteStore.findIcon(t?0:s.siteStore.currentPageIndex,s.siteStore.editingId);e=Object.assign(Object.assign({},nn.a.defaultValue),i)}return n.e`
      <i-side2-header .title="${i18n("edit_icon")}"></i-side2-header>
      <div class="side-editicon global-scrollbar">
        <div class="scroll-container-body">
          ${s.siteStore.editingId?n.e`
                <i-editicon
                  .sideRatio="${s.settingStore.sideRatio}"
                  .value="${e}"
                  .readonlyTarget="${"app"===e.type}"
                  @on-cancel="${this._close}"
                  @on-submit="${this._onSubmit}"
                  iconType="custom-icon"
                ></i-editicon>
              `:null}
        </div>
      </div>
    `}};Ys.styles=[k.a,n.b`
      :host {
        display: block;
        height: 100%;
      }
      .side-editicon {
        height: calc(100% - var(--side-header-height));
        padding: 24px 0;
        box-sizing: border-box;
        background-color: #f6f6f6;
        overflow-y: auto;
      }
      .scroll-container-body {
        width: 360px;
        box-sizing: content-box;
        padding-left: 30px;
      }
    `],qs([Object(n.h)("i-editicon")],Ys.prototype,"$editicon",void 0),qs([Object(n.h)(".global-scrollbar")],Ys.prototype,"$scrollBar",void 0),Ys=qs([Object(n.c)("side-editicon")],Ys);var Qs=n.b`.ellipsis {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.inline-block {
  display: inline-block;
}
.wrapper {
  background-color: #fff;
  width: 100%;
  height: 100%;
}
.main {
  padding: 30px 0 30px 30px;
  box-sizing: border-box;
  width: 390px;
}
.header {
  width: 100%;
  margin-bottom: 30px;
  height: 34px;
  font-size: 32px;
  font-weight: 500;
  color: #e82222;
  line-height: 34px;
}
.title {
  width: 100%;
  margin: 10px 0;
  height: 26px;
  font-size: 18px;
  font-weight: 500;
  color: #444444;
  line-height: 26px;
}
.card {
  margin: 10px 0;
}
.des {
  margin-bottom: 10px;
  font-size: 13px;
  font-weight: 400;
  color: #656565;
  line-height: 22px;
  -moz-user-select: text;
       user-select: text;
}
.des-img {
  width: 100%;
  min-height: 202px;
}
.gap-line {
  margin-top: 30px;
  margin-bottom: 20px;
  width: 100%;
  height: 1px;
  background-color: #eeeeee;
}
.wx-qr-img {
  display: block;
  width: 120px;
  height: 120px;
  margin: auto;
}
.wx-des {
  margin-top: 12px;
  margin-bottom: 4px;
  font-size: 12px;
  font-weight: 400;
  color: #656565;
  line-height: 22px;
}
.ad {
  font-size: 12px;
  font-weight: 400;
  color: #e82222;
  line-height: 22px;
}
.setting-btn {
  margin: auto;
  margin-top: 16px;
  margin-bottom: 70px;
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 160px;
  height: 48px;
  padding: 0 20px;
  background: #151515;
  border-radius: 24px;
  font-size: 16px;
  font-family: PingFangSC-Medium, PingFang SC;
  font-weight: 500;
  color: #ffffff;
  line-height: 22px;
  border: none;
  outline: none;
  cursor: pointer;
  transition: all 0.3s ease-out;
}
.setting-btn:hover {
  transform: translateY(-4px);
  box-shadow: 0px 8px 16px 0px rgba(110, 70, 255, 0.3);
}
.setting-btn > img {
  margin-right: 12px;
}
`,Xs=n.b`:host {
  display: inline-block;
  width: inherit;
  height: inherit;
}
.img {
  max-width: 100%;
  cursor: zoom-in;
}
`,Ks=n.b`.viewer {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 999;
  display: flex;
  align-items: center;
  justify-content: center;
}
.mask {
  position: absolute;
  width: 100vw;
  height: 100vh;
  background-color: rgba(0, 0, 0, 0.7);
}
.img {
  position: relative;
  max-width: 80vw;
  max-height: 80vh;
  background-color: #fff;
}
.viewer-close {
  background-color: #000;
  border-radius: 50%;
  cursor: pointer;
  height: 80px;
  overflow: hidden;
  position: absolute;
  right: -40px;
  top: -40px;
  transition: opacity 0.15s;
  opacity: 0.7;
  width: 80px;
}
.viewer-close:hover {
  opacity: 0.9;
}
.close-img {
  margin-top: 49px;
  margin-left: 18px;
  width: 14px;
  height: 14px;
}
`,Zs=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let Js=class extends n.a{constructor(){super(...arguments),this.src="",this.showStatus=!1,this.originRect=null}show(e,t){this.originRect=t.getBoundingClientRect(),this.src=e,this.showStatus=!0}startAnimate(){const e=this.$img.getBoundingClientRect(),t={},i={},o=this.originRect.width/e.width,r=this.originRect.height/e.height,n=Math.round(this.originRect.left-e.left),a=Math.round(this.originRect.top-e.top);t.transform=`matrix(${o},0,0,${r},${n},${a})`,i.transform="matrix(1,0,0,1,0,0)",this.$img.style.transformOrigin="top left",this.$img.animate([t,i],{duration:200,easing:"ease"})}updated(e){e.has("showStatus")&&this.showStatus}close(){this.showStatus=!1}render(){return n.e`
      ${this.showStatus?n.e`<div class="viewer">
            <div @click="${this.close}" class="mask"></div>
            <img class="img" src="${this.src}" alt="" />
            <div @click="${this.close}" class="viewer-close">
              <img class="close-img" src="${i(781)}" alt="" />
            </div>
          </div>`:null}
    `}};Js.styles=[Ks],Zs([Object(n.f)()],Js.prototype,"src",void 0),Zs([Object(n.f)()],Js.prototype,"showStatus",void 0),Zs([Object(n.h)(".img")],Js.prototype,"$img",void 0),Js=Zs([Object(n.c)("i-viewer-root")],Js);var el,tl=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let il=el=class extends n.a{constructor(){super(...arguments),this.src=""}viewImage(e){el.$wrapper.show(this.src,e.target)}render(){return n.e` <img class="img" @click="${this.viewImage}" src="${this.src}" alt="" /> `}};il.styles=[Xs],il.$wrapper=document.querySelector("i-viewer-root"),tl([Object(n.g)({type:String})],il.prototype,"src",void 0),il=el=tl([Object(n.c)("i-viewer")],il);var ol=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};const rl="edge"===l.D.runtimePlatform;let nl=class extends a.a{constructor(){super(...arguments),this.tabsActive=0,this.firstShow=!1}afterHide(){sessionStorage.setItem("tutorial_reffer",""+Date.now())}firstUpdated(){}handleSetting(){Object(L.c)(location.origin+"/sethome",{isNewTab:!0})}getImgUrl(e){return`https://infinityicon.infinitynewtab.com/assets/crx_install/${l.D.isZh?"zh":"en"}/${rl?"edge":"chrome"}/${e}?imageView2/2/format/webp`}render(){return n.e`
      <div class="wrapper global-scrollbar">
        <main class="main ">
          <div class="header ellipsis inline-block">${i18n("instann_crx_title")}</div>
          <div class="title ellipsis inline-block">${i18n("how_to_install_crx")}</div>
          <section class="card">
            <div class="des">${i18n(rl?"edge_install_crx_item_1":"install_crx_item_1")}</div>
            <i-viewer class="des-img" src="${this.getImgUrl("item1.png")}"> </i-viewer>
          </section>
          <section class="card">
            <div class="des">${i18n(rl?"edge_install_crx_item_2":"install_crx_item_2")}</div>
            <i-viewer class="des-img" src="${this.getImgUrl("item2.png")}"> </i-viewer>
          </section>
          <section class="card">
            <div class="des">${i18n(rl?"edge_install_crx_item_3":"install_crx_item_3")}</div>
            <i-viewer class="des-img" src="${this.getImgUrl("item3.png")}"> </i-viewer>
          </section>
          <div class="gap-line inline-block"></div>
          ${l.D.isZh?n.e`
                <div class="weixin">
                  <img
                    class="wx-qr-img"
                    src="https://infinityicon.infinitynewtab.com/assets/crx_install/qrcode.png"
                    alt=""
                  />
                  <div class="wx-des">${i18n("install_crx_wx_des")}</div>
                </div>
              `:null}
          <div class="ad">${i18n("install_crx_home_des")}</div>
          <button class="setting-btn" @click=${this.handleSetting}>
            <img
              src="https://infinityicon.infinitynewtab.com/assets/btn-setting-home.png@2x.png"
              width="16"
              height="16"
            />
            ${i18n("set_to_homepage")}
          </button>
        </main>
      </div>
    `}};nl.styles=[k.a,Qs],ol([Object(n.g)({type:Number})],nl.prototype,"tabsActive",void 0),nl=ol([Object(n.c)("side-tutorial")],nl);var al=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};const sl=[{name:"google",src:"icon_google"},{name:"qq",src:"icon_qq"},{name:"wechat",src:"icon_wechat"},{name:"sina",src:"icon_sina",abandon:!0},{name:"facebook",src:"icon_facebook",abandon:!0}].map(e=>Object.assign(Object.assign({},e),{src:i(791)(`./${e.src}.png`)}));let ll=class extends a.a{constructor(){super(...arguments),this.store=s.userStore,this.emailError="",this.passwordError="",this.loading=!1,this.handleCancel=()=>{this.store.toggleReLogin()}}setBubbleLeft(e){const t=10+62*e+10;this.abandonTips.style.setProperty("--bubble-left",t+"px")}render(){return n.e`
      <infinito-modal style="--modal-padding: 0;" .open=${this.store.isExpired} .onCancel=${this.handleCancel}>
        <div class="login-wrapper" slot="body">
          <div
            class="bg"
            style=${Object(to.a)({background:`url(${Object(re.b)("https://infinityicon.infinitynewtab.com/assets/background_image/login-bg2.png")})`,backgroundSize:"cover"})}
          ></div>
          <div class="form">
            <div>
              <h2 class="large-title">${Object(J.i18n)("please_re_login")}</h2>
              <p>${Object(J.i18n)("account_expired")}</p>
            </div>
            <div class="form-control">
              <infinito-input
                name="email"
                placeholder="${J.IS_ZH?Object(J.i18n)("email_or_phone_number_tips"):Object(J.i18n)("email")}"
                .error=${this.emailError}
                @onfocus=${()=>{this.emailError=""}}
              >
              </infinito-input>
              <infinito-input
                name="password"
                type="password"
                placeholder=${Object(J.i18n)("password")}
                .error=${this.passwordError}
                @onfocus=${()=>{this.passwordError=""}}
                @keyup=${this.handleKeyUp}
              >
              </infinito-input>
              <infinito-button primary .loading=${this.loading} @click="${this.handleLogin}">
                ${Object(J.i18n)("login")}
              </infinito-button>
            </div>
            <div class="no-account" style="justify-content: center;">
              <p @click="${this.toFindPassword}">${Object(J.i18n)("forget_password")}</p>
            </div>
            <div class="third-party">
              <span>${Object(J.i18n)("thirt_party")}</span>
              <div class="icons">
                ${sl.map((e,t)=>e.abandon?n.e`
                      <p
                        class="abandon"
                        style="--logo:url(${e.src})"
                        @mouseover="${()=>this.setBubbleLeft(t)}"
                        @click="${t=>this.onClick(t,e.name)}"
                      ></p>
                    `:n.e`
                    <p @click="${t=>this.onClick(t,e.name)}">
                      <img .src="${e.src}" />
                    </p>
                  `)}
                <div class="abandon-tips">${Object(J.i18n)("login_abandon_tips")}</div>
              </div>
            </div>
          </div>
        </div>
      </infinito-modal>
    `}toFindPassword(e){e.preventDefault();let t="/find-password/index.html";l.l&&(t=window.chrome.runtime.getURL(t)),c.a.openUrl(t,!0,e)}toRegister(e){e.preventDefault();let t="/user-register/index.html";l.l&&(t=window.chrome.runtime.getURL(t)),c.a.openUrl(t,!0,e)}handleKeyUp(e){13===e.keyCode&&(e.preventDefault(),this.handleLogin(e))}onClick(e,t){e.preventDefault(),this.store.thirdPartyLogin(t)}async handleLogin(e){if(e.stopPropagation(),this.loading)return;const t=this.emailInput.value,i=this.passwordInput.value,o=this.checkEmailOrPhone(nr()(t).call(t));if(this.emailError=o.error,!this.emailError)if(i){try{this.loading=!0,await this.store.login({account:t,password:i,type:o.type}),setTimeout(()=>{this.emailInput.value="",this.passwordInput.value=""},1e3)}catch(e){"3006"===e.message&&setTimeout(()=>{this.passwordInput.value="",this.passwordInput.shadowRoot.querySelector("input").focus()},500)}this.loading=!1}else this.passwordError=Object(J.i18n)("password_dont_empty")}checkEmailOrPhone(e){return e?/^\w+([+-.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(e)?{type:"email"}:/^1[3456789]\d{9}$/.test(e)?{type:"phone"}:{error:J.IS_ZH?Object(J.i18n)("please_enter_right_account"):Object(J.i18n)("email_format_error")}:{error:Object(J.i18n)("cannot_empty")}}};ll.styles=$a,al([Object(n.h)('infinito-input[name="email"]')],ll.prototype,"emailInput",void 0),al([Object(n.h)(".abandon-tips")],ll.prototype,"abandonTips",void 0),al([Object(n.h)('infinito-input[name="password"]')],ll.prototype,"passwordInput",void 0),al([Object(n.g)({type:String})],ll.prototype,"emailError",void 0),al([Object(n.g)({type:String})],ll.prototype,"passwordError",void 0),al([Object(n.g)({type:Boolean})],ll.prototype,"loading",void 0),ll=al([Object(n.c)("user-relogin")],ll);var cl=n.b`ul {
  margin: 0;
  padding: 0;
}
.container {
  width: 564px;
  box-sizing: border-box;
  padding: 30px;
  background: #ffffff;
  border-radius: 6px;
  font-size: 16px;
  color: #333;
  font-weight: 500;
  line-height: 22px;
}
.header {
  text-align: center;
  height: 30px;
  font-size: 22px;
  line-height: 30px;
}
.main {
  margin: 26px auto;
  max-height: 400px;
}
.main.collect {
  min-height: 180px;
  max-height: 380px;
  height: calc(100vh - 343px);
}
.main.userdata {
  min-height: 180px;
  max-height: 480px;
  height: calc(100vh - 246px);
}
.tips {
  margin: 28px 0;
  font-weight: 500;
  font-size: 16px;
}
.item {
  margin-top: 10px;
  margin-left: 1em;
  font-size: 14px;
  font-weight: 400;
  line-height: 20px;
}
.item:before {
  content: '•';
  color: #333;
  display: inline-block;
  margin-right: 0.3em;
}
.link {
  color: #5ddb64;
  text-decoration: underline;
}
.footer {
  margin-bottom: 20px;
  display: flex;
  justify-content: center;
}
.btn {
  margin-right: 20px;
  width: 130px;
  height: 44px;
  background: #ffffff;
  border-radius: 4px;
  font-size: 14px;
  font-weight: 400;
  color: #333333;
  line-height: 20px;
}
.switch {
  margin-right: 14px;
  flex-grow: 0;
  flex-shrink: 0;
  display: flex;
  align-items: center;
}
.btn:last-of-type {
  margin-right: 0;
}
.checkcard {
  display: flex;
  align-items: center;
  margin-bottom: 26px;
  width: 484px;
  min-height: 64px;
  box-sizing: border-box;
  padding: 8px 16px;
  border-radius: 4px;
  border: 1px solid #cccccc;
  font-size: 14px;
  font-weight: 400;
  color: #333333;
  line-height: 20px;
}
.checkcard.active {
  border: 1px solid #000000;
  color: #000000;
}
.uninstalltext {
  margin-bottom: 50px;
  text-align: center;
  font-size: 16px;
  font-weight: 400;
  color: #333333;
  line-height: 22px;
}
.items {
  margin-left: 2em;
  list-style: initial;
}
.items li {
  margin-top: 20px;
  margin-bottom: 20px;
  font-weight: 400;
  font-size: 15px;
}
p {
  margin-top: 20px;
  font-weight: 400;
  font-size: 15px;
}
.category-title {
  font-weight: 500;
}
`,dl=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let pl=class extends a.a{agree(){s.privacyStore.agreeUserData()}refuse(){s.privacyStore.refuseUserData()}render(){return n.e`<infinito-modal .closeable="${!1}" .open=${!0}>
      <div slot="body">
        <div class="container">
          <div class="header">${i18n("privacy_and_data_20_8_18")}</div>
          <div class="global-scrollbar main userdata">
            <p class="category-title">${i18n("privacy_data_title_1")}</p>
            <ul class="items">
              <li>${i18n("privacy_data_item_1_1")}</li>
              <li>${i18n("privacy_data_item_1_2")}</li>
            </ul>
            <p class="category-title">${i18n("privacy_data_title_2")}</p>
            <ul class="items">
              <li>${i18n("privacy_data_item_2_1")}</li>
              <li>${i18n("privacy_data_item_2_2")}</li>
              <li>${i18n("privacy_data_item_2_3")}</li>
              <li>${i18n("privacy_data_item_2_4")}</li>
              <li>${i18n("privacy_data_item_2_5")}</li>
              <li>${i18n("privacy_data_item_2_6")}</li>
              <li>${i18n("privacy_data_item_2_7")}</li>
              <li>${i18n("privacy_data_item_2_8")}</li>
            </ul>
            <p class="category-title">${i18n("privacy_data_title_3")}</p>
            <ul class="items">
              <li>${i18n("privacy_data_item_3_1")}</li>
            </ul>
            <p class="category-title">${i18n("privacy_data_title_5")}</p>
            <ul class="items">
              <li>${i18n("privacy_data_item_5_1")}</li>
            </ul>
            <p class="tips">
              ${Object(ne.a)(i18n("privacy_data_item_9",`<a style="color: #5ddb64;text-decoration: underline;" target="_blank" href="${c.a.getPrivacyUrl()}"> ${i18n("privacy_title")} </a>`))}
            </p>
          </div>
          <div class="footer">
            <infinito-button class="btn" @click="${this.agree}">${i18n("uninstall_agree")}</infinito-button>
            <infinito-button class="btn" @click="${this.refuse}">${i18n("privacy_disagree")}</infinito-button>
          </div>
        </div>
      </div>
    </infinito-modal> `}};pl.styles=[k.a,cl],pl=dl([Object(n.c)("modal-userdata")],pl);var hl=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let ul=class extends a.a{constructor(){super(...arguments),this.checked=!1}submit(){this.checked?s.privacyStore.agreeCollectData():s.privacyStore.refuseCollectData()}check(){this.checked=!this.checked}render(){return n.e`<infinito-modal .closeable="${!1}" .open=${!0}>
      <div slot="body">
        <div class="container">
          <div class="header">${i18n("privacy_and_data_20_8_18")}</div>
          <div class="main collect global-scrollbar">
            <p class="category-title">${i18n("privacy_data_title_4")}</p>
            <ul class="items">
              <li>${i18n("privacy_data_item_4_1")}</li>
              <li>${i18n("privacy_data_item_4_2")}</li>
              <li>${i18n("privacy_data_item_4_3")}</li>
              <li>${i18n("privacy_data_item_2_8")}</li>
              <li>${i18n("privacy_data_item_4_8")}</li>
              <li>${i18n("privacy_data_item_4_9")}</li>
              <li>${i18n("privacy_data_item_4_10")}</li>
              <li>${i18n("privacy_data_item_4_11")}</li>
              <li>${i18n("privacy_data_item_4_13")}</li>
              <li>${i18n("privacy_data_item_4_5")}</li>
              <li>${i18n("privacy_data_item_4_6")}</li>
              <li>${i18n("privacy_data_item_4_7")}</li>
            </ul>
          </div>
          <div
            class="${Object(K.a)({checkcard:!0,active:this.checked})}"
          >
            <div class="switch">
              <infinito-switch .checked=${this.checked} @change=${this.check}></infinito-switch>
            </div>
            <p class="checktext">${this.checked?i18n("privacy_data_yes"):i18n("privacy_data_no")}</p>
          </div>
          <div class="footer">
            <infinito-button class="btn" @click="${this.submit}">${i18n("done")}</infinito-button>
          </div>
        </div>
      </div>
    </infinito-modal>`}};ul.styles=[k.a,cl],hl([Object(n.f)()],ul.prototype,"checked",void 0),ul=hl([Object(n.c)("modal-collectdata")],ul);var gl=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let fl=class extends a.a{agree(){chrome.management.uninstallSelf()}refuse(){s.privacyStore.resetUserData()}render(){return n.e`<infinito-modal .closeable="${!1}" .open=${!0}>
      <div slot="body">
        <div class="container">
          <div class="header">${i18n(Vn.i)}</div>
          <div class="main">
            <p class="uninstalltext">${i18n(Vn.h)}</p>
          </div>
          <div class="footer">
            <infinito-button class="btn" @click="${this.agree}">${i18n("confirm")}</infinito-button>
            <infinito-button class="btn" @click="${this.refuse}">${i18n("cancel")}</infinito-button>
          </div>
        </div>
      </div>
    </infinito-modal> `}};fl.styles=cl,fl=gl([Object(n.c)("modal-uninstall")],fl);var ml=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let bl=class extends a.a{firstUpdated(){}render(){if(!l.n)return;const{userDate:e,collectData:t}=s.privacyStore;return 0===e?n.e`<modal-userdata></modal-userdata>`:1===e&&0===t?n.e`<modal-collectdata></modal-collectdata>`:-1===e?n.e`<modal-uninstall></modal-uninstall>`:void 0}};bl.styles=cl,bl=ml([Object(n.c)("modal-privacy")],bl);var yl=n.b`.modal-wallpaper {
  width: 700px;
  height: 520px;
  box-shadow: 0px 2px 20px 0px rgba(0, 0, 0, 0.1);
  border-radius: 6px;
  box-sizing: border-box;
  padding-top: 24px;
  display: flex;
  flex-direction: column;
}
.modal-wallpaper .modal-wallpaper-header {
  display: flex;
  border-bottom: 1px solid #eee;
  overflow-y: hidden;
  overflow-x: auto;
  position: relative;
  box-sizing: border-box;
  margin-left: 30px;
  margin-right: 60px;
}
.modal-wallpaper .modal-wallpaper-header > .title {
  font-size: 18px;
  color: #999;
  padding-bottom: 24px;
  cursor: pointer;
}
.modal-wallpaper .modal-wallpaper-header > .title:nth-child(n + 2)::before {
  content: '';
  display: inline-block;
  width: 16px;
}
.modal-wallpaper .modal-wallpaper-header > .title.active {
  color: #333;
}
.modal-wallpaper .modal-wallpaper-header .mw-header-bar {
  position: absolute;
  bottom: 0;
  width: 24px;
  height: 3px;
  background-color: #333;
  left: 0;
  transition: left 150ms ease 0s;
  display: none;
}
.modal-wallpaper .modal-wallpaper-header .mw-header-bar.active {
  display: block;
}
.modal-wallpaper .modal-wallpaper-content {
  flex: 1;
  height: 0;
  flex-shrink: 0;
  position: relative;
  overflow: hidden;
}
.modal-wallpaper .modal-wallpaper-content .content-cloud-wallpaper,
.modal-wallpaper .modal-wallpaper-content .content-auto-wallpaper {
  display: block;
  width: 100%;
  height: 100%;
}
`,vl=i(760),wl=i(802),xl=i(35),_l=i.n(xl),Al=i(209),Sl=i(772),kl=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};const Ol=i(934)({features:["js","wasm"]});class Il{constructor(){this.cloudItems=[],this.setCloudItems=e=>this.cloudItems=e,this.appendCloudItems=e=>this.cloudItems.push(...e),this.recentItems=[],this.localItems=[],this.setLocalItems=e=>this.localItems=e,this.appendLocalItem=e=>{if(-1===this.localItems.findIndex(({id:t})=>t===e.id)){const t=Object(x.j)(this.localItems);this.setLocalItems([e].concat(t))}},this.collectItems=[],this.inLoading=!1,this.setInLoading=e=>this.inLoading=e,this.empty=!1,this.setEmpty=e=>this.empty=e,this.inLoadingNext=!1,this.setInLoadingNext=e=>this.inLoadingNext=e,this.error=!1,this.setError=e=>this.error=e,this.commonColorItems=[],this.filterCondition={},this._pageCount=0,this.mapToIcon={},this.removeFilterTag=()=>this.filterCondition.tag&&(this.filterCondition.tag=null),this.removeFilterColor=()=>this.filterCondition.color&&(this.filterCondition.color=null),this.localPObjectStore=_l.a.createInstance({name:"idb-wallpaper",storeName:"store-local-wallpaper"}),this._loadLocalWallpapers()}setRecentItems(e){this.recentItems=e}async removeLocalItem(e){const t=this.localItems.findIndex(({id:t})=>t===e);-1!==t&&this.localItems.splice(t,1),await this.localPObjectStore.removeItem(e)}setCollectItems(e){this.collectItems=e}removeCollectItem(e){const t=this.collectItems.findIndex(({id:t})=>t===e);-1!==t&&this.collectItems.splice(t,1)}showItemExtraOpts(e){this.itemExtraOptsState===e?this.itemExtraOptsState=void 0:this.itemExtraOptsState=e}hideItemExtraOpts(){this.itemExtraOptsState=void 0}likeWp(e,t){const i=this.cloudItems.find(({id:t})=>t===e);i&&(1===t?i.like++:i.like>0&&i.like--)}initDataIfNeeded(){this.commonColorItems=[{id:window.__INFINITY__.wpColorId+"_1",type:"color",content:"#E1E1E1"},{id:window.__INFINITY__.wpColorId+"_2",type:"color",content:"#EE6D52"},{id:window.__INFINITY__.wpColorId+"_3",type:"color",content:"#FBAF42"},{id:window.__INFINITY__.wpColorId+"_4",type:"color",content:"#FFE000"},{id:window.__INFINITY__.wpColorId+"_5",type:"color",content:"#84D071"},{id:window.__INFINITY__.wpColorId+"_6",type:"color",content:"#6BC7DB"},{id:window.__INFINITY__.wpColorId+"_7",type:"color",content:"#4F9FED"},{id:window.__INFINITY__.wpColorId+"_8",type:"color",content:"#8D68E0"}],window.__INFINITY__.wallpaper_sources.forEach(e=>{this.mapToIcon[e.value]=e.icon})}async _loadLocalWallpapers(){const e=[];await this.localPObjectStore.iterate(t=>{const i=sr.a.createObjectURL(t.file);if(t.rawUrl=t.url=i,t.smallFile){const e=sr.a.createObjectURL(t.smallFile);t.content=e}else t.content=i;e.push(t)}),this.setLocalItems(e)}isFilterTag(e){return this.filterCondition.tag===e}setFilterTag(e){this.filterCondition.tag=e}isFilterColor(e){return this.filterCondition.color===e}setFilterColor(e){this.filterCondition.color=e}isFilterOrder(e){return this.filterCondition.order===e}setFilterOrder(e){this.filterCondition.order=e}clearState(){this.error&&this.setError(!1),this.empty&&this.setEmpty(!1),this.inLoading&&this.setInLoading(!1),this.inLoadingNext&&this.setInLoadingNext(!1)}async loadNextPage(){if(!(this.filterCondition.page>this._pageCount)){this.clearState(),this.setInLoadingNext(!0);try{const e=await this.loadWallpapersRaw(this.filterCondition);this.filterCondition.page=e.nextPage,this._pageCount=e.totalPages,this.appendCloudItems(e.data)}finally{this.setInLoadingNext(!1)}}}async loadCloudWallpapers(){const e=await this.loadWallpapersRaw(Object.assign(this.filterCondition,{page:0}));return this.filterCondition.page=e.nextPage,this._pageCount=e.totalPages,e.data}async loadWallpapersRaw(e){const{result:t,error:i}=await ye.h.getWallpaperListByType(e);if(i)throw i.__CANCEL__||(this.setError(!0),Di.default.error(i.message),this.setInLoading(!1)),i;if(t.success)return t.data=Object(Al.b)(t.data),t;throw Di.default.error(i18n("unknown_mistake")),this.setError(!0),new Error(t)}async loadLocalImage(e){if(e.size>window.__INFINITY__.xMaxLocalFileSize)return void Di.default.error(i18n("wallpaper_upload_file_size_exceed"));let t,i=e;try{Object(Al.e)(e)&&(t=Di.default.loading(i18n("wallpaper_loading")),await c.a.sleep(150),i=await Object(wl.a)(e,{maxSizeMB:window.__INFINITY__.maxLocalFileSize/1024/1024,maxWidthOrHeight:window.__INFINITY__.minFileMaxWidthOrHeight,useWebWorker:!1}));const o=await this.addFileToLocal(i);return this.appendLocalItem(o),o}catch(e){Di.default.error(i18n("wallpaper_apply_from_local_error"))}finally{t&&t()}}_getItemTime(e){var t;return"local"===e.type?s.wallpaperStore.localRecentUsedOrder[e.id]:R()(t=["cloud","color"]).call(t,e.type)?s.wallpaperStore.cloudRecentUsedOrder[e.id]:void 0}async loadRecentUsedP(){const{localRecentUsed:e,cloudRecentUsed:t,customColorItems:i}=s.wallpaperStore,{localItems:o,commonColorItems:r}=this,n=[];if(0!==t.length){const e=[],o=[],a=[];if(t.forEach(t=>{s.wallpaperStore.isLibraryItem(t)?o.push(t):s.wallpaperStore.isColorItem(t)?a.push(t):e.push(t)}),e.length>0){const t=await Object(Mi.getWallpapersById)(e.join(","));if(t.error)throw t.error;n.push(...Object(Al.b)(t.data))}if(o.length>0){const e=await Object(Mi.getUserWallpaperLibraryItemsById)(o.join(","));if(e.error)throw e.error;n.push(...Object(Al.d)(e.items))}a.length>0&&a.forEach(e=>{let t=r.find(({id:t})=>t===e);t||(t=i.find(({id:t})=>t===e)),t&&n.push(t)})}return os()(n).call(n,(e,t)=>{const i=this._getItemTime(e),o=this._getItemTime(t);return i>o?-1:i<o?1:0}),n}async loadCollectP(){const{cloudCollection:e,customColorItems:t}=s.wallpaperStore,{commonColorItems:i}=this,o=[];if(0!==e.length){const r=[],n=[],a=[];if(e.forEach(e=>{s.wallpaperStore.isLibraryItem(e)?n.push(e):s.wallpaperStore.isColorItem(e)?a.push(e):r.push(e)}),r.length>0){const e=await Object(Mi.getWallpapersById)(r.join(","));if(e.error)throw e.error;o.push(...Object(Al.b)(e.data))}if(n.length>0){const e=await Object(Mi.getUserWallpaperLibraryItemsById)(n.join(","));if(e.error)throw e.error;o.push(...Object(Al.d)(e.items))}a.length>0&&a.forEach(e=>{let r=i.find(({id:t})=>t===e);r||(r=t.find(({id:t})=>t===e)),r&&o.push(r)})}return o}async resizeImage(e){const t=await Object(le.b)(e),i=document.createElement("canvas");i.width=Mi.imgConfig.smallWidth*window.devicePixelRatio,i.height=Mi.imgConfig.smallWidth/t.naturalWidth*t.naturalHeight*window.devicePixelRatio;return await Ol.resize(t,i).then(e=>Ol.toBlob(e))}async addFileToLocal(e){const t={type:"local",id:`${window.__INFINITY__.wpId}${Object(Sl.a)()}`,file:e};t.similarColor=await c.a.getSimilarColor(e);const i=sr.a.createObjectURL(e),o=await this.resizeImage(i);t.smallFile=o,await this.localPObjectStore.setItem(t.id,t);const r=sr.a.createObjectURL(o);return t.rawUrl=t.url=i,t.content=r,t}}kl([x.g],Il.prototype,"cloudItems",void 0),kl([x.b],Il.prototype,"setCloudItems",void 0),kl([x.b],Il.prototype,"appendCloudItems",void 0),kl([x.g],Il.prototype,"recentItems",void 0),kl([x.b],Il.prototype,"setRecentItems",null),kl([x.g],Il.prototype,"localItems",void 0),kl([x.b],Il.prototype,"setLocalItems",void 0),kl([x.b],Il.prototype,"removeLocalItem",null),kl([x.g],Il.prototype,"collectItems",void 0),kl([x.b],Il.prototype,"setCollectItems",null),kl([x.b],Il.prototype,"removeCollectItem",null),kl([x.g],Il.prototype,"itemExtraOptsState",void 0),kl([x.b],Il.prototype,"showItemExtraOpts",null),kl([x.b],Il.prototype,"hideItemExtraOpts",null),kl([x.g],Il.prototype,"inLoading",void 0),kl([x.b],Il.prototype,"setInLoading",void 0),kl([x.g],Il.prototype,"empty",void 0),kl([x.b],Il.prototype,"setEmpty",void 0),kl([x.g],Il.prototype,"inLoadingNext",void 0),kl([x.b],Il.prototype,"setInLoadingNext",void 0),kl([x.g],Il.prototype,"error",void 0),kl([x.b],Il.prototype,"setError",void 0),kl([x.b],Il.prototype,"likeWp",null),kl([x.g],Il.prototype,"commonColorItems",void 0),kl([x.b],Il.prototype,"initDataIfNeeded",null),kl([x.g],Il.prototype,"filterCondition",void 0),kl([x.b],Il.prototype,"setFilterTag",null),kl([x.b],Il.prototype,"setFilterColor",null),kl([x.b],Il.prototype,"setFilterOrder",null),kl([x.b],Il.prototype,"removeFilterTag",void 0),kl([x.b],Il.prototype,"removeFilterColor",void 0),kl([x.b],Il.prototype,"clearState",null);var $l=new Il,El=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let Cl=class extends a.a{constructor(){super(...arguments),this._collectWallpaper=async({detail:e})=>{var t;if(!e)return;if(!s.userStore.isLogin)return void Di.default.popupLogin();const i=R()(t=vl.a.cloudCollection).call(t,e);i?vl.a.removeCollectionP(e):vl.a.addCollectionP(e);if(!vl.a.isLocal(e)){const t=await Object(Mi.collectionWallpaper)(e,Number(!i));t.error&&console.warn(t.error)}}}_openCustomColorPopup(){this.openCustomColorPopup()}async _removeCustomColor(e,t){e.stopPropagation();try{if(s.userStore.isLogin){const{error:e}=await Object(Mi.removeCustomColor)(t);if(e)throw e}vl.a.removeCustomColor(t),Di.default.success(i18n("wallpaper_delete_color_success"))}catch(e){console.warn(e)}finally{$l.hideItemExtraOpts()}}_showItemExtraOpts(e,t){e.stopPropagation(),$l.showItemExtraOpts(t)}_applyColorP({target:e}){const{wp:t}=e.dataset;if(!t)return;const i=JSON.parse(t);vl.a.setColor(i)}render(){return n.e`
      <section class="${"solid-color-items"}" style=${this.show?"":"display: none;"}>
        <!-- custom color items -->
        <div class="custom-color-items">
          <strong class="color-items-title">${i18n("wallpaper_custom_color")}</strong>

          <div class="color-items-wrap" @click=${this._applyColorP}>
            <div class="custom-color-item-wrap custom-color-button" @click=${this._openCustomColorPopup}>
              <i-usesvg class="color-button-icon" iconfont type="icon-zidingyiyanse"></i-usesvg>
              <span class="color-button-text">${i18n("wallpaper_custom_color")}</span>
            </div>

            ${vl.a.customColorItems.map(e=>n.e`
                <div class="custom-color-item-wrap" @mouseleave=${()=>$l.hideItemExtraOpts()}>
                  <wp-item-raw
                    class="custom-color-item"
                    .type=${e.type}
                    .content=${e.content}
                    data-wp=${JSON.stringify(e)}
                  >
                  </wp-item-raw>
                  <div
                    class="popup-options-bar${$l.itemExtraOptsState===e.id?" active":""}"
                    @click=${t=>this._showItemExtraOpts(t,e.id)}
                    style=${vl.a.id===e.id?"display: none;":""}
                  >
                    <div class="popup-options-icon-wrap">
                      <i-usesvg class="popup-options-icon" color="#fff" iconfont type="icon-xingzhuangjiehe"></i-usesvg>
                    </div>
                    <ul class="popup-options">
                      <li class="popup-option-item" @click=${t=>this._removeCustomColor(t,e.id)}>
                        ${i18n("wallpaper_delete_color")}
                      </li>
                    </ul>
                  </div>
                </div>
              `)}
          </div>
        </div>

        <!-- common color list -->
        <div class="common-color-items">
          <strong class="color-items-title">${i18n("wallpaper_common_color")}</strong>
          <div class="color-items-wrap" @click=${this._applyColorP}>
            ${$l.commonColorItems.map(e=>n.e`
                  <wp-item-raw
                    class="common-color-item"
                    .type=${e.type}
                    .content=${e.content}
                    data-wp=${JSON.stringify(e)}
                  ></wp-item-raw>
                `)}
          </div>
        </div>
      </section>
    `}};Cl.styles=n.b`
    .solid-color-items {
      width: 100%;
    }

    .solid-color-items .color-items-title {
      font-size: 12px;
      color: #333;
      margin: 0;
    }

    .solid-color-items .color-items-wrap {
      display: flex;
      flex-flow: row wrap;
      align-content: flex-start;
      margin-top: 16px;
    }
    .solid-color-items .custom-color-items .custom-color-item-wrap {
      width: 203px;
      height: 114px;
      cursor: pointer;
      margin-bottom: 20px;
      position: relative;
      margin-right: 16px;
    }
    .solid-color-items .custom-color-items .custom-color-item-wrap:nth-child(3n) {
      margin-right: 0;
    }

    .solid-color-items .custom-color-items .custom-color-item {
      width: 100%;
      height: 100%;
    }

    .solid-color-items .custom-color-items .popup-options-bar {
      --side-length: 32px;

      position: absolute;
      top: 8px;
      right: 8px;
      width: var(--side-length);
      height: var(--side-length);

      opacity: 0;
      pointer-events: none;
      transition: opacity 200ms ease 0s;
    }

    .solid-color-items .custom-color-item-wrap:hover .popup-options-bar {
      opacity: 1;
      pointer-events: initial;
    }

    @media only screen and (hover: none) {
      .solid-color-items .custom-color-item-wrap .popup-options-bar {
        opacity: 1;
        pointer-events: initial;
      }
    }

    .solid-color-items .custom-color-items .popup-options-bar:not(.active) .popup-options {
      display: none;
    }

    .solid-color-items .custom-color-items .popup-options-bar .popup-options-icon-wrap {
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      transition: background-color 150ms ease-in 0s;
      cursor: pointer;
      border-radius: 4px;
    }
    .solid-color-items .custom-color-items .popup-options-bar .popup-options-icon-wrap:hover {
      background-color: rgba(0, 0, 0, 0.15);
    }

    .solid-color-items .custom-color-items .popup-options-bar .popup-options {
      position: absolute;
      top: var(--side-length);
      right: 0;
      list-style: none;

      box-sizing: border-box;
      padding: 5px 0;
      margin: 0;
      background-color: #fff;
      border-radius: 2px;
      font-size: 12px;
      color: #333;
      box-shadow: 0px 2px 16px 0px rgba(0, 0, 0, 0.1);
      max-width: 212px;
    }

    .solid-color-items .custom-color-items .popup-options-bar .popup-options .popup-option-item {
      width: 100%;
      box-sizing: border-box;
      padding: 0 24px;
      line-height: 27px;
      cursor: pointer;
      white-space: nowrap;
      text-overflow: ellipsis;
      overflow: hidden;
    }
    .solid-color-items .custom-color-items .popup-options-bar .popup-options .popup-option-item:hover {
      background-color: #f5f5f5;
    }

    .solid-color-items .custom-color-items .custom-color-button {
      box-sizing: border-box;
      border: 1px dashed #dadada;
      text-align: center;
      cursor: pointer;
    }

    .solid-color-items .custom-color-items .color-button-icon {
      margin-top: 28px;
      width: 100%;
      height: 28px;
    }
    .solid-color-items .custom-color-items .color-button-text {
      display: inline-block;
      margin-top: 14px;
    }

    .solid-color-items .common-color-items .color-items-title {
      display: inline-block;
    }

    .solid-color-items .common-color-items .common-color-item {
      width: 203px;
      height: 114px;
      cursor: pointer;
      margin-bottom: 20px;
      margin-right: 15px;
    }
    .solid-color-items .common-color-items .common-color-item:nth-child(3n) {
      margin-right: 0;
    }
  `,El([Object(n.g)({type:Boolean})],Cl.prototype,"show",void 0),El([Object(n.g)({type:Object})],Cl.prototype,"openCustomColorPopup",void 0),Cl=El([Object(n.c)("solid-color-items")],Cl);var Tl=n.b`.cloud-wallpaper {
  width: 100%;
  height: 100%;
  box-sizing: border-box;
  padding-bottom: 24px;
  display: flex;
  flex-flow: column nowrap;
}
.cloud-wallpaper ul {
  list-style: none;
  padding: 0;
  margin: 0;
}
.cloud-wallpaper .cloud-wallpaper-header {
  width: 100%;
  display: flex;
  align-items: center;
  flex-flow: row nowrap;
  justify-content: space-between;
  box-sizing: border-box;
  padding: 17px 30px 20px;
}
.cloud-wallpaper .cloud-wallpaper-header .header-filter-list {
  flex: 1;
  width: 0;
  max-width: 75%;
  overflow-x: auto;
}
.cloud-wallpaper .cloud-wallpaper-header .filter-list-wrap {
  display: flex;
}
.cloud-wallpaper .cloud-wallpaper-header .filter-list-wrap .filter-item {
  height: 26px;
  margin-right: 8px;
  background: #f5f5f5;
  border-radius: 4px;
  color: #454545;
  line-height: 26px;
  padding: 0 8px;
  white-space: nowrap;
  font-size: 12px;
  cursor: pointer;
  transition: color 200ms ease-in 0s, background-color 200ms ease-in 0s;
}
.cloud-wallpaper .cloud-wallpaper-header .filter-list-wrap .filter-item.active {
  color: #fff;
  background-color: #656565;
}
.cloud-wallpaper .cloud-wallpaper-header .filter-list-wrap .filter-item:last-child {
  margin-right: 0;
}
.cloud-wallpaper .cloud-wallpaper-header .header-wallpaper-sort {
  position: relative;
}
.cloud-wallpaper .cloud-wallpaper-header .header-wallpaper-sort .wallpaper-sort-wrap {
  cursor: pointer;
  display: flex;
  align-items: center;
}
.cloud-wallpaper .cloud-wallpaper-header .header-wallpaper-sort .wallpaper-sort-icon {
  width: 14px;
  height: 14px;
}
.cloud-wallpaper .cloud-wallpaper-header .header-wallpaper-sort .wallpaper-sort-text {
  color: #333;
  font-size: 14px;
  margin-left: 3px;
}
.cloud-wallpaper .cloud-wallpaper-header .header-wallpaper-sort .sort-options-popup {
  position: absolute;
  top: 26px;
  right: 0;
  background-color: #fff;
  border-radius: 2px;
  box-shadow: 0px 2px 10px 0px rgba(0, 0, 0, 0.16);
  padding: 0;
  margin: 0;
  list-style: none;
  z-index: 1;
  color: #656565;
  font-size: 12px;
  display: none;
  box-sizing: border-box;
  padding: 6px 0;
  text-align: left;
}
.cloud-wallpaper .cloud-wallpaper-header .header-wallpaper-sort .sort-options-popup .sort-option-item {
  width: 100%;
  box-sizing: border-box;
  padding: 0 16px;
  line-height: 30px;
  transition: all 200ms ease-in 0s;
  transition-property: color, background-color;
  white-space: nowrap;
  cursor: pointer;
}
.cloud-wallpaper .cloud-wallpaper-header .header-wallpaper-sort .sort-options-popup .sort-option-item:hover {
  background-color: #f5f5f5;
  color: #333;
}
.cloud-wallpaper .cloud-wallpaper-header .header-wallpaper-sort .sort-options-popup.active {
  display: initial;
}
.cloud-wallpaper .cloud-wallpaper-body {
  flex: 1;
  height: 0;
  width: 100%;
  box-sizing: border-box;
  padding-left: 30px;
  display: flex;
  overflow: hidden;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-filter {
  height: 100%;
  display: flex;
  flex-flow: column nowrap;
  margin-right: 15px;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-filter .color-filter .color-filter-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-filter .color-filter .color-filter-header .color-filter-title {
  color: #333;
  font-size: 12px;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-filter .color-filter .color-filter-header .clear-filter-text {
  font-size: 9px;
  color: #b3b3b3;
  cursor: pointer;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-filter .color-filter .color-filter-items {
  margin-top: 10px;
  display: flex;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-filter .color-filter .color-filter-items .color-filter-item:last-child {
  margin-right: 0;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-filter .color-filter .color-filter-items .color-filter-item {
  margin-right: 8px;
  width: 18px;
  height: 18px;
  border-radius: 4px;
  cursor: pointer;
  position: relative;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-filter .color-filter .color-filter-items .color-filter-item.active::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  padding-top: 6px;
  padding-left: 10px;
  border-bottom: 2px solid #fff;
  border-left: 2px solid #fff;
  transform: translate(-50%, -70%) rotate(-45deg);
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-filter .tag-filter {
  margin-top: 20px;
  flex: 1;
  height: 0;
  display: flex;
  flex-flow: column nowrap;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-filter .tag-filter .tag-filter-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-filter .tag-filter .tag-filter-header .tag-filter-title {
  color: #333;
  font-size: 12px;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-filter .tag-filter .tag-filter-header .clear-filter-text {
  font-size: 9px;
  color: #b3b3b3;
  cursor: pointer;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-filter .tag-filter .tag-filter-items {
  flex: 1;
  height: 0;
  margin-top: 10px;
  width: 203px;
  display: flex;
  flex-flow: row wrap;
  align-content: flex-start;
  overflow-y: auto;
  overflow-x: hidden;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-filter .tag-filter .tag-filter-items .tag-filter-item {
  padding: 5px 10px;
  background-color: #f5f5f5;
  color: #454545;
  flex-grow: 0;
  display: flex;
  align-items: center;
  border-radius: 4px;
  cursor: pointer;
  margin-bottom: 12px;
  margin-right: 12px;
  transition: color 200ms ease-in 0s, background-color 200ms ease-in 0s;
  font-size: 12px;
  line-height: 1.5em;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-filter .tag-filter .tag-filter-items .tag-filter-item.active {
  color: #fff;
  background-color: #656565;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content {
  flex: 1;
  width: 0;
  height: 100%;
  position: relative;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .wp-items {
  width: 100%;
  height: 100%;
  overflow-y: auto;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .wp-items .wp-item {
  display: inline-block;
  width: 203px;
  height: 114px;
  margin-right: 15px;
  margin-bottom: 20px;
  cursor: pointer;
  vertical-align: middle;
  position: relative;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .wp-items .wp-item .item-apply-loading {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1;
  background-color: rgba(0, 0, 0, 0.2);
  justify-content: center;
  align-items: center;
  display: none;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .wp-items .wp-item .item-apply-loading.loading {
  display: flex;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .wp-items .wp-item .item-apply-loading .apply-loading-icon {
  width: 80px;
  height: 40px;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .wp-items .wp-local-item:hover .item-extra-opts {
  opacity: 1;
  pointer-events: initial;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .wp-items .wp-local-item .item-extra-opts {
  --side-length: 32px;
  position: absolute;
  top: 8px;
  right: 8px;
  width: var(--side-length);
  height: var(--side-length);
  opacity: 0;
  pointer-events: none;
  transition: opacity 200ms ease 0s;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .wp-items .wp-local-item .item-extra-opts .opts-icon-wrap {
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  transition: background-color 150ms ease-in 0s;
  cursor: pointer;
  border-radius: 4px;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .wp-items .wp-local-item .item-extra-opts .opts-icon-wrap:hover {
  background-color: rgba(0, 0, 0, 0.15);
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .wp-items .wp-local-item .item-extra-opts:not(.active) .extra-options {
  display: none;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .wp-items .wp-local-item .item-extra-opts .extra-options {
  position: absolute;
  top: var(--side-length);
  right: 0;
  list-style: none;
  box-sizing: border-box;
  padding: 5px 0;
  margin: 0;
  background-color: #fff;
  border-radius: 2px;
  font-size: 12px;
  color: #333;
  box-shadow: 0px 2px 16px 0px rgba(0, 0, 0, 0.1);
  max-width: 212px;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .wp-items .wp-local-item .item-extra-opts .extra-options .extra-option {
  width: 100%;
  box-sizing: border-box;
  padding: 0 24px;
  line-height: 27px;
  cursor: pointer;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .wp-items .wp-local-item .item-extra-opts .extra-options .extra-option:hover {
  background-color: #f5f5f5;
}
@media only screen and (hover: none) {
  .cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .wp-items .wp-local-item .item-extra-opts {
    opacity: 1;
    pointer-events: initial;
  }
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content div:not(.wp-cloud-items) .wp-item:nth-child(3n) {
  margin-right: 0;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content div.wp-cloud-items .loading-next {
  width: 100%;
  text-align: center;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content div.wp-cloud-items .loading-next .loading-next-icon {
  display: inline-block;
  width: 80px;
  height: 40px;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content div.wp-cloud-items .wp-item:nth-child(2n) {
  margin-right: 0;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .wp-local-items .pick-local-button {
  display: inline-block;
  width: 203px;
  height: 114px;
  margin-right: 15px;
  margin-bottom: 20px;
  cursor: pointer;
  vertical-align: middle;
  box-sizing: border-box;
  border: 1px dashed #dadada;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .wp-local-items .pick-local-button .pick-local-icon {
  margin-top: 28px;
  width: 100%;
  height: 28px;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .wp-local-items .pick-local-button .pick-local-text {
  display: block;
  width: 100%;
  margin-top: 14px;
  text-align: center;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .cloud-wallpaper-loading,
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .cloud-wallpaper-empty {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: #fff;
  z-index: 1;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .cloud-wallpaper-empty {
  flex-flow: column nowrap;
  font-size: 14px;
  color: #999;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .cloud-wallpaper-empty > .empty-text {
  margin-top: 12px;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .cloud-wallpaper-loading > .spin {
  width: 80px;
  height: 40px;
}
.cloud-wallpaper .cloud-wallpaper-filter .color-filter-items {
  margin-top: 10px;
  display: flex;
}
.cloud-wallpaper .cloud-wallpaper-filter .color-filter-items .color-filter-item:last-child {
  margin-right: 0;
}
.cloud-wallpaper .cloud-wallpaper-filter .color-filter-items .color-filter-item {
  margin-right: 8px;
  width: 20px;
  height: 20px;
  border-radius: 4px;
  cursor: pointer;
  position: relative;
}
.cloud-wallpaper .cloud-wallpaper-filter .color-filter-items .color-filter-item.active::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  padding-top: 6px;
  padding-left: 10px;
  border-bottom: 2px solid #fff;
  border-left: 2px solid #fff;
  transform: translate(-50%, -70%) rotate(-45deg);
}
.cloud-wallpaper .cloud-wallpaper-filter .menu-filter {
  flex: 1;
  height: 0;
  flex-shrink: 0;
  display: flex;
  flex-flow: column nowrap;
  overflow: hidden;
}
.cloud-wallpaper .cloud-wallpaper-filter .menu-filter-items {
  margin-top: 10px;
  width: 235px;
  flex: 1;
  flex-shrink: 0;
  height: 0;
  display: flex;
  flex-flow: row wrap;
  align-content: flex-start;
  overflow-y: auto;
  overflow-x: hidden;
}
.cloud-wallpaper .cloud-wallpaper-filter .menu-filter-items .menu-filter-item {
  padding: 5px 10px;
  background-color: #f5f5f5;
  color: #454545;
  flex-grow: 0;
  display: inline-flex;
  align-items: center;
  border-radius: 4px;
  cursor: pointer;
  vertical-align: top;
  margin-bottom: 12px;
  margin-right: 12px;
  transition: color 200ms ease-in 0s, background-color 200ms ease-in 0s;
}
.cloud-wallpaper .cloud-wallpaper-filter .menu-filter-items .menu-filter-item .mf-item-icon {
  margin-right: 2px;
  width: 14px;
  height: 14px;
}
.cloud-wallpaper .cloud-wallpaper-filter .menu-filter-items .menu-filter-item .mf-item-text {
  font-size: 12px;
  line-height: 1.5em;
  vertical-align: middle;
  pointer-events: none;
}
.cloud-wallpaper .cloud-wallpaper-filter .menu-filter-items .menu-filter-item.active {
  color: #fff;
  background-color: #656565;
}
.cloud-wallpaper .cloud-wallpaper-filter .pick-local-wp {
  width: 220px;
  height: 38px;
  margin-top: 15px;
  display: flex;
  align-items: center;
}
.cloud-wallpaper .cloud-wallpaper-filter .pick-local-wp .pick-local-wp-icon {
  margin-right: 6px;
  width: 14px;
  height: 12px;
}
.cloud-wallpaper .cloud-wallpaper-filter .pick-local-wp .pick-local-wp-text {
  font-size: 14px;
  color: #fff;
  font-weight: 600;
}
.cloud-wallpaper .cloud-wallpaper-filter .pick-local-wp .pick-local-wp-el {
  display: none;
}
`,jl=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let Pl=class extends n.a{constructor(){super(...arguments),this.open=!1,this._color="rgba(255, 204, 0, 1)"}_setColor({detail:e}){if(!e)return;const[t]=e,{rgba:i}=t;this._color=`rgba(${i.r}, ${i.g}, ${i.b}, ${i.a})`}_addCustomColor(){s.wallpaperStore.addCustomColorItem(this._color),this.close()}render(){return n.e`
      <infinito-modal style="--modal-padding:0;" .open=${this.open} .onCancel=${this.close}>
        <section class="custom-color-editor" slot="body">
          <h3 class="color-editor-title">${i18n("wallpaper_add_custom_color")}</h3>

          <div class="color-editor-wrap">
            <color-picker value="${this._color}" @input="${this._setColor}"></color-picker>
          </div>

          <div class="editor-button-group">
            <infinito-button class="confirm-button" primary @click=${this._addCustomColor}>
              ${i18n("confirm")}</infinito-button
            >
            <infinito-button class="cancel-button" @click=${this.close}> ${i18n("cancel")} </infinito-button>
          </div>
        </section>
      </infinito-modal>
    `}};var Rl;Pl.styles=n.b`
    .custom-color-editor {
      width: 386px;
    }

    .custom-color-editor .color-editor-title {
      padding-top: 24px;
      font-size: 18px;
      color: #333;
      line-height: 25px;
      margin: 0;
      text-align: center;
    }

    .custom-color-editor .color-editor-wrap {
      width: 100%;
      margin-top: 30px;
      display: flex;
      justify-content: center;
      flex-flow: row nowrap;
    }

    .custom-color-editor .editor-button-group {
      margin-top: 30px;
      width: 100%;
      display: flex;
      flex-flow: row nowrap;
      justify-content: center;
      padding-bottom: 40px;
    }

    .custom-color-editor .editor-button-group > infinito-button {
      width: 120px;
      height: 42px;
    }

    .custom-color-editor .editor-button-group .confirm-button {
      margin-right: 16px;
    }
  `,jl([Object(n.g)({type:Boolean})],Pl.prototype,"open",void 0),jl([Object(n.g)({type:Object})],Pl.prototype,"close",void 0),Pl=jl([Object(n.c)("color-editor-popup")],Pl),function(e){e.collect="collect",e.discover="discover",e.nature="nature",e.ocean="ocean",e.architecture="architecture",e.animals="animals",e.travel="travel",e["food-drink"]="food-drink",e.anime="anime",e.athletics="athletics",e.technology="technology",e["street-photography"]="street-photography"}(Rl||(Rl={}));var Ll=i(3),Nl=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let Ml=class extends a.a{constructor(){super(...arguments),this._colorList=window.__INFINITY__.color_list,this._tagList=[{name:i18n("nature"),type:Rl.nature},{name:i18n("ocean"),type:Rl.ocean},{name:i18n("architecture"),type:Rl.architecture},{name:i18n("animals"),type:Rl.animals},{name:i18n("travel"),type:Rl.travel},{name:i18n("food_drink"),type:Rl["food-drink"]},{name:i18n("anime"),type:Rl.anime},{name:i18n("athletics"),type:Rl.athletics},{name:i18n("technology"),type:Rl.technology},{name:i18n("street_photography"),type:Rl["street-photography"]}],this._filterList=[{text:i18n("wallpaper_cloud"),type:"cloud"},{text:i18n("local_wallpaper2"),type:"local"},{text:i18n("solid_color_wallpaper"),type:"color"},{text:i18n("recently_use"),type:"recent"},{text:i18n("my_collection"),type:"collect"}],this._contentType="cloud",this.cancelRequest=()=>Object(Ll.b)("getWallpapers"),this._applyWallpaper=async({target:e})=>{const{index:t,wp:i}=e.dataset;if(void 0===i)return;const o=JSON.parse(i);if(!s.wallpaperStore.isCurrentWp(o.id))if("color"!==o.type)if("local"!==o.type){this._wpLoadingIndex=Number(t);try{if(!await Ll.a.get(o.url,void 0,{_single:"prefetch-image"}))throw new Error("Network Error");s.wallpaperStore.setCloudWallpaper(o),null!==this._wpLoadingIndex&&(this._wpLoadingIndex=null)}catch(e){e.__CANCEL__||Di.default.error(i18n("network_error"))}}else s.wallpaperStore.setLocalWallpaper($l.localItems[t]);else s.wallpaperStore.setColor(o)},this._once=!1,this.whenOpen=async()=>{try{switch(this._once||(await this._filterCloudP(),this._once=!0),this._contentType){case"recent":this._filterRecentUsed();break;case"collect":this._filterCollectP()}}catch(e){if(!e.__CANCEL__)throw e}},this._filterColor=({target:e})=>{const{color:t}=e.dataset;t&&($l.isFilterColor(t)||($l.setFilterColor(t),this._onCloudFilter()))},this._removeFilterColor=()=>{$l.removeFilterColor(),this._onCloudFilter()},this._removeFilterTag=()=>{$l.removeFilterTag(),this._onCloudFilter()},this._filterTag=({target:e})=>{const{tag:t}=e.dataset;t&&($l.isFilterTag(t)||($l.setFilterTag(t),this._onCloudFilter()))},this._scrollThreshold=100,this._lockLoadNext=!1,this._lockLoadNextOnce=!1,this._customColorPopup=!1,this._openCustomColorPopup=()=>{!this._customColorPopup&&(this._customColorPopup=!0)},this._closeCustomColorPopup=()=>{this._customColorPopup&&(this._customColorPopup=!1)},this._currentSortOption=i18n("wallpaper_sort_default"),this._sortOptionsPopup=!1,this._sortOptions=[{value:1,text:i18n("wallpaper_sort_option_1")},{value:2,text:i18n("wallpaper_sort_option_2")},{value:0,text:i18n("wallpaper_sort_default")}],this._openSortOptionsPopup=()=>{!this._sortOptionsPopup&&(this._sortOptionsPopup=!0)},this._closeSortOptionsPopup=()=>{this._sortOptionsPopup&&(this._sortOptionsPopup=!1)},this._applySort=({target:e})=>{const{value:t,text:i}=e.dataset;"string"==typeof t&&($l.isFilterOrder(t)||(this._currentSortOption=i,$l.setFilterOrder(t),this._onCloudFilter()))},this._collectWallpaper=async({detail:e})=>{var t;if(!e)return;if(!s.userStore.isLogin)return void Di.default.popupLogin();const i=R()(t=s.wallpaperStore.cloudCollection).call(t,e);i?(s.wallpaperStore.removeCollectionP(e),"collect"===this._contentType&&($l.removeCollectItem(e),this._renderEmptyOrNot($l.collectItems))):s.wallpaperStore.addCollectionP(e);if(!s.wallpaperStore.isLocal(e)){const t=await Object(Mi.collectionWallpaper)(e,Number(!i));t.error&&console.warn(t.error)}},this._likeWallpaper=async({detail:e})=>{var t;if(!e)return;if(!s.userStore.isLogin)return void Di.default.popupLogin();const i=R()(t=s.wallpaperStore.liked).call(t,e);i?s.wallpaperStore.removeLiked(e):s.wallpaperStore.addLiked(e),$l.likeWp(e,Number(!i));if(!s.wallpaperStore.isLocal(e)){(await Object(Mi.likeWallpaper)(e,Number(!i))).error}},this.hidePopupNeeded=()=>{this._closeSortOptionsPopup(),$l.hideItemExtraOpts()}}async _setContentType(e){if(this._contentType!==e){$l.clearState(),this.cancelRequest(),this._contentType=e;try{switch(e){case"cloud":await this._filterCloudP();break;case"recent":await this._filterRecentUsed();break;case"color":case"local":break;case"collect":await this._filterCollectP()}}catch(e){e.__CANCEL__||(console.error(e),Di.default.error(i18n("network_error")))}}}async _filterCloudP(){$l.setInLoading(!0);try{const e=await $l.loadCloudWallpapers();$l.setCloudItems(e),this._renderEmptyOrNot(e)}finally{$l.setInLoading(!1)}this._cloudItemsWrap||(this._cloudItemsWrap=this.shadowRoot.querySelector(".cloud-wallpaper .cloud-wallpaper-content .wp-cloud-items"))}async _filterRecentUsed(){$l.setInLoading(!0);try{const e=await $l.loadRecentUsedP();$l.setRecentItems(e),this._renderEmptyOrNot(e)}finally{$l.setInLoading(!1)}}_filterColorP(){}_filterLocalP(){}async _filterCollectP(){$l.setInLoading(!0);try{const e=await $l.loadCollectP();$l.setCollectItems(e),this._renderEmptyOrNot(e)}finally{$l.setInLoading(!1)}}_renderEmptyOrNot(e){Array.isArray(e)&&0===e.length?$l.setEmpty(!0):$l.setEmpty(!1)}async _removeLocalP(e){Y.IConfirm.create().toShow({text:i18n("wallpaper_confirm_delete_file"),onConfirm:()=>$l.removeLocalItem(e)})}_showItemExtraOpts(e,t){e.stopPropagation(),$l.showItemExtraOpts(t)}async _onCloudFilter(){$l.clearState(),this.cancelRequest(),$l.setInLoading(!0);try{const e=await $l.loadCloudWallpapers();$l.setCloudItems(e),this._renderEmptyOrNot(e),this._cloudItemsWrap&&this._cloudItemsWrap.scrollTo&&(this._lockLoadNextOnce=!0,this._cloudItemsWrap.scrollTo(0,0))}catch(e){e.__CANCEL__||(console.error(e),Di.default.error(i18n("network_error")))}$l.setInLoading(!1)}_clearFilter(){this._removeFilterTagAndColor(),$l.loadCloudWallpapers()}_removeFilterTagAndColor(){$l.removeFilterTag(),$l.removeFilterColor()}_scrollToLoadIfNeeded(e){if(this._lockLoadNextOnce)return void(this._lockLoadNextOnce=!1);if(this._lockLoadNext)return;const t=e.currentTarget,{scrollTop:i,scrollHeight:o,clientHeight:r}=t;o<=r||o-i-r<this._scrollThreshold&&(this._lockLoadNext=!0,$l.loadNextPage().finally(()=>this._lockLoadNext=!1))}async _pickLocalImage({currentTarget:e}){try{const[t]=e.files,i=await $l.loadLocalImage(t);i&&s.wallpaperStore.setLocalWallpaper(i)}finally{e.value=""}}_toggleSortOptionsPopup(e){e.stopPropagation(),this._sortOptionsPopup=!this._sortOptionsPopup}connectedCallback(){super.connectedCallback(),document.body.addEventListener("click",this.hidePopupNeeded)}disconnectedCallback(){super.disconnectedCallback(),document.body.removeEventListener("click",this.hidePopupNeeded)}render(){return n.e`
      <section class="cloud-wallpaper">
        <!-- left -->

        <div class="cloud-wallpaper-header">
          <div class="header-filter-list global-scrollbar">
            <ul class="filter-list-wrap">
              ${this._filterList.map(({text:e,type:t})=>n.e`
                    <li
                      @click=${()=>this._setContentType(t)}
                      class="filter-item${t===this._contentType?" active":""}"
                    >
                      ${e}
                    </li>
                  `)}
            </ul>
          </div>
          <div class="header-wallpaper-sort" style=${"cloud"!==this._contentType?"display: none;":""}>
            <span class="wallpaper-sort-wrap" @click=${this._toggleSortOptionsPopup}>
              <i-usesvg class="wallpaper-sort-icon" type="icon-zhu_shengxu" iconfont></i-usesvg>
              <span class="wallpaper-sort-text">${this._currentSortOption}</span>
            </span>
            <ul class="sort-options-popup${this._sortOptionsPopup?" active":""}" @click=${this._applySort}>
              ${this._sortOptions.map(({value:e,text:t})=>n.e` <li class="sort-option-item" data-value=${e} data-text=${t}>${t}</li> `)}
            </ul>
          </div>
        </div>

        <div class="cloud-wallpaper-body">
          <!--  -->
          ${this.renderAdvFilterNeeded()}
          <!--  -->

          ${this.renderContent(this._contentType)}
        </div>

        <color-editor-popup ?open=${this._customColorPopup} .close=${this._closeCustomColorPopup}></color-editor-popup>
      </section>
    `}renderAdvFilterNeeded(){return"cloud"!==this._contentType?null:n.e`
      <div class="cloud-wallpaper-filter">
        <div class="color-filter">
          <div class="color-filter-header">
            <span class="color-filter-title">${i18n("color")}</span>
            <span
              class="clear-filter-text"
              style=${$l.filterCondition.color?"":"display: none;"}
              @click=${this._removeFilterColor}
            >
              ${i18n("wallpaper_clear_filter")}
            </span>
          </div>

          <ul class="color-filter-items" @click=${this._filterColor}>
            ${this._colorList.map(e=>n.e`
                  <li
                    class="color-filter-item${$l.filterCondition.color===e?" active":""}"
                    style="background-color: #${e}"
                    data-color=${e}
                  ></li>
                `)}
          </ul>
        </div>

        <div class="tag-filter">
          <div class="tag-filter-header">
            <span class="tag-filter-title">${i18n("label")}</span>
            <span
              class="clear-filter-text"
              style=${$l.filterCondition.tag?"":"display: none;"}
              @click=${this._removeFilterTag}
            >
              ${i18n("wallpaper_clear_filter")}
            </span>
          </div>
          <ul class="tag-filter-items global-scrollbar" @click=${this._filterTag}>
            ${this._tagList.map(({name:e,type:t})=>n.e`
                <li
                  class="tag-filter-item${$l.filterCondition.tag===t?" active":""}"
                  data-tag=${t}
                >
                  ${e}
                </li>
              `)}
          </ul>
        </div>
      </div>
    `}renderContent(e){let t;switch(e){case"cloud":t=this.renderCloudContent();break;case"recent":t=this.renderRecentContent();break;case"color":t=this.renderColorContent();break;case"local":t=this.renderLocalContent();break;case"collect":t=this.renderCollectContent();break;default:t=this.renderCloudContent()}return n.e`
      <div class="cloud-wallpaper-content">
        <!-- wp item list -->
        ${t}
        <!-- empty -->
        <div class="cloud-wallpaper-empty" style="${$l.empty?"":"display: none;"}">
          <img class="empty-image" src=${i(935)} width="86" />
          <span class="empty-text">${i18n("wallpaper_empty_text")}</span>
        </div>
        <!-- error -->
        <div class="cloud-wallpaper-error" style="display: none;"></div>
        <!-- loading -->
        <div class="cloud-wallpaper-loading" style="${$l.inLoading?"":"display: none;"}">
          <infinito-spin class="spin" spinning .isSvg=${l.p}></infinito-spin>
        </div>
      </div>
    `}renderCloudContent(){return n.e`
      <div
        class="wp-cloud-items wp-items global-scrollbar"
        @scroll=${this._scrollToLoadIfNeeded}
        @click=${this._applyWallpaper}
      >
        ${$l.cloudItems.map((e,t)=>n.e`
            <div class="wp-cloud-item wp-item">
              <wp-item
                .wp=${e}
                data-index=${t}
                data-wp=${JSON.stringify(e)}
                @collect=${this._collectWallpaper}
                @like=${this._likeWallpaper}
                @mouseleave=${this.hidePopupNeeded}
              ></wp-item>

              <div class="item-apply-loading${this._wpLoadingIndex===t?" loading":""}">
                <infinito-spin .isSvg=${l.p} class="apply-loading-icon" spinning></infinito-spin>
              </div>
            </div>
          `)}

        <!-- loading next icon -->
        <div class="loading-next" style=${$l.inLoadingNext?"":"display: none;"}>
          <infinito-spin .isSvg=${l.p} class="loading-next-icon" spinning></infinito-spin>
        </div>
      </div>
    `}renderRecentContent(){return n.e`
      <div class="wp-recent-items wp-items global-scrollbar" @click=${this._applyWallpaper}>
        ${$l.recentItems.map((e,t)=>n.e`
            <div class="wp-item">
              <wp-item-raw
                .type=${e.type}
                .content=${e.content}
                data-index=${t}
                data-wp=${JSON.stringify(e)}
                @mouseleave=${this.hidePopupNeeded}
              ></wp-item-raw>

              <div class="item-apply-loading${this._wpLoadingIndex===t?" loading":""}">
                <infinito-spin .isSvg=${l.p} class="apply-loading-icon" spinning></infinito-spin>
              </div>
            </div>
          `)}
      </div>
    `}renderColorContent(){return n.e`
      <div class="wp-color-items wp-items global-scrollbar">
        <solid-color-items ?show=${!0} .openCustomColorPopup=${this._openCustomColorPopup}></solid-color-items>
      </div>
    `}renderLocalContent(){return n.e`
      <div class="wp-local-items wp-items global-scrollbar" @click=${this._applyWallpaper}>
        <label class="wp-item pick-local-button" for="pick-local-wp">
          <i-usesvg type="icon-bendibizhi" color="#333" iconfont class="pick-local-icon"></i-usesvg>
          <span class="pick-local-text">${i18n("pick_local_wallpaper")}</span>
          <input
            id="pick-local-wp"
            type="file"
            accept="image/*"
            @change=${this._pickLocalImage}
            style="display: none;"
          />
        </label>

        ${$l.localItems.map((e,t)=>n.e`
            <div class="wp-item wp-local-item">
              <wp-item-raw
                .type=${e.type}
                .content=${e.content}
                data-index=${t}
                data-wp=${JSON.stringify(e)}
                @mouseleave=${this.hidePopupNeeded}
              ></wp-item-raw>

              <div
                style=${s.wallpaperStore.id!==e.id?"":"display: none;"}
                class="item-extra-opts${$l.itemExtraOptsState===e.id?" active":""}"
                @click=${t=>this._showItemExtraOpts(t,e.id)}
              >
                <div class="opts-icon-wrap">
                  <i-usesvg class="opts-icon" color="#fff" iconfont type="icon-xingzhuangjiehe"></i-usesvg>
                </div>
                <ul class="extra-options">
                  <li class="extra-option" @click=${()=>this._removeLocalP(e.id)}>
                    ${i18n("wallpaper_delete_file")}
                  </li>
                </ul>
              </div>
            </div>
          `)}
      </div>
    `}renderCollectContent(){return n.e`
      <div class="wp-collect-items wp-items global-scrollbar" @click=${this._applyWallpaper}>
        ${$l.collectItems.map((e,t)=>n.e`
            <div class="wp-item wp-collect-item">
              <wp-item
                .wp=${e}
                data-index=${t}
                data-wp=${JSON.stringify(e)}
                @collect=${this._collectWallpaper}
                @like=${this._likeWallpaper}
                @mouseleave=${this.hidePopupNeeded}
                ?disableLike=${!0}
              ></wp-item>

              <div class="item-apply-loading${this._wpLoadingIndex===t?" loading":""}">
                <infinito-spin .isSvg=${l.p} class="apply-loading-icon" spinning></infinito-spin>
              </div>
            </div>
          `)}
      </div>
    `}};Ml.styles=[k.a,Tl],Nl([Object(n.f)()],Ml.prototype,"_contentType",void 0),Nl([Object(n.f)()],Ml.prototype,"_wpLoadingIndex",void 0),Nl([Object(n.f)()],Ml.prototype,"_customColorPopup",void 0),Nl([Object(n.f)()],Ml.prototype,"_currentSortOption",void 0),Nl([Object(n.f)()],Ml.prototype,"_sortOptionsPopup",void 0),Ml=Nl([Object(n.c)("cloud-wallpaper")],Ml);var Dl=n.b`.auto-wallpaper {
  width: 100%;
  height: 100%;
  display: flex;
  flex-flow: column nowrap;
}
.auto-wallpaper .ws-items {
  width: 100%;
  flex: 1;
  height: 0;
  background-color: #f5f5f5;
  box-sizing: border-box;
  padding-left: 30px;
  overflow-x: hidden;
  overflow-y: auto;
  display: flex;
  align-content: flex-start;
  flex-flow: row wrap;
}
.auto-wallpaper .ws-items:before,
.auto-wallpaper .ws-items:after {
  content: '';
  display: block;
  height: 20px;
  width: 100%;
}
.auto-wallpaper .ws-item {
  width: 200px;
  border-radius: 2px;
  position: relative;
  cursor: pointer;
  background-color: #fff;
  margin-top: 20px;
}
.auto-wallpaper .ws-item:nth-child(3n - 1) {
  margin-left: 20px;
  margin-right: 20px;
}
.auto-wallpaper .ws-item:hover .wsi-options-bar {
  pointer-events: initial;
  opacity: 1;
}
.auto-wallpaper .ws-item .wsi-options-bar {
  --side-length: 32px;
  position: absolute;
  top: 8px;
  right: 8px;
  width: var(--side-length);
  height: var(--side-length);
  opacity: 0;
  transition: opacity 200ms ease 0s;
  pointer-events: none;
}
.auto-wallpaper .ws-item .wsi-options-bar .wsi-option-icon-wrap {
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  transition: background-color 150ms ease-in 0s;
  cursor: pointer;
  border-radius: 4px;
}
.auto-wallpaper .ws-item .wsi-options-bar .wsi-option-icon-wrap:hover {
  background-color: rgba(0, 0, 0, 0.15);
}
.auto-wallpaper .ws-item .wsi-options-bar:not(.active) .wsi-popup-options {
  display: none;
}
.auto-wallpaper .ws-item .wsi-options-bar .wsi-popup-options {
  position: absolute;
  top: var(--side-length);
  right: 0;
  list-style: none;
  box-sizing: border-box;
  padding: 5px 0;
  margin: 0;
  background-color: #fff;
  border-radius: 2px;
  font-size: 12px;
  color: #333;
  box-shadow: 0px 2px 16px 0px rgba(0, 0, 0, 0.1);
  max-width: 212px;
}
.auto-wallpaper .ws-item .wsi-options-bar .wsi-popup-options .popup-option-item {
  width: 100%;
  box-sizing: border-box;
  padding: 0 24px;
  line-height: 27px;
  cursor: pointer;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}
.auto-wallpaper .ws-item .wsi-options-bar .wsi-popup-options .popup-option-item:hover {
  background-color: #f5f5f5;
}
@media only screen and (hover: none) {
  .auto-wallpaper .ws-item .wsi-options-bar {
    pointer-events: initial;
    opacity: 1;
  }
}
.auto-wallpaper .ws-item .ws-item-img {
  width: 100%;
  height: 73px;
  vertical-align: top;
  pointer-events: none;
  object-fit: cover;
  object-position: center;
}
.auto-wallpaper .ws-item .ws-item-info {
  width: 100%;
  box-sizing: border-box;
  padding: 12px 16px;
  display: flex;
  flex-flow: column nowrap;
  background-color: #fff;
  pointer-events: none;
}
.auto-wallpaper .ws-item .ws-item-name {
  margin-top: 2px;
  font-size: 14px;
  line-height: 20px;
  color: #333;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}
.auto-wallpaper .ws-item .ws-item-desc {
  margin-top: 4px;
  font-size: 12px;
  color: #333;
  line-height: 17px;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}
.auto-wallpaper .ws-item .ws-item-checked-icon {
  position: absolute;
  bottom: 33px;
  right: 10px;
  width: 20px;
  height: 20px;
  opacity: 0;
  transition: opacity 250ms ease 0s;
  pointer-events: none;
}
.auto-wallpaper .ws-item.ws-new-item {
  text-align: center;
  border: 1px dashed #dadada;
  cursor: default;
}
.auto-wallpaper .ws-item.ws-new-item .wsn-item-label {
  display: inline-block;
  width: 100%;
  height: 100%;
  cursor: pointer;
}
.auto-wallpaper .ws-item.ws-new-item .wsn-item-icon {
  display: block;
  margin: 0 auto;
  margin-top: 30px;
  width: 50px;
  height: 50px;
}
.auto-wallpaper .ws-item.ws-new-item .wsn-item-text {
  display: inline-block;
  margin-top: 21px;
  color: #999;
  display: -webkit-box;
  overflow: hidden;
  text-overflow: ellipsis;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
}
.auto-wallpaper .ws-item:before {
  --spacing: 0;
  --border-width: 3px;
  content: '';
  pointer-events: none;
  position: absolute;
  top: var(--spacing);
  left: var(--spacing);
  right: var(--spacing);
  bottom: var(--spacing);
  border-radius: inherit;
  border: var(--border-width) solid #ff8181;
  opacity: 0;
}
.auto-wallpaper .ws-item.active:before {
  opacity: 1;
}
.auto-wallpaper .ws-item.active .ws-item-checked-icon {
  opacity: 1;
}
`,Ul=i(342),Bl=i(775),Fl=i.n(Bl),zl=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};class Hl{constructor(){this.setSwitchType=e=>this.switchTypeInUI=e,this.setPSource=e=>this.pSource=e,this.customLibraryMap={},this.customLibrary=[],this.setCustomLibrary=e=>this.customLibrary=e,this.maxCountPerLibrary=20,this.maxFileLenPerUpload=20,this._maxPerQueue=4,this._uploadKey="custom-wallpaper-library",this.switch_interval_options={"when-newtab":l.s?i18n("wallpaper_switch_when_open_web"):i18n("wallpaper_switch_when_open"),"per-hour":i18n("wallpaper_switch_per_hour"),"twelve-hour":i18n("wallpaper_switch_per_twelve_hour"),"one-day":i18n("wallpaper_switch_everyday")},this.iOptionsModalShow=!1,this.toggleIOptionsModal=e=>{e.stopPropagation(),this.iOptionsModalShow?this.iOptionsModalShow=!1:this.iOptionsModalShow=!0}}setCustomLibraryMap(e,t){this.customLibraryMap[e]=t}delCustomLibraryMap(e){delete this.customLibraryMap[e]}clearCustomLibraryMap(){this.customLibraryMap={}}popCustomLibraryItem(e,t){const i=this.customLibraryMap[e],o=i.findIndex(({id:e})=>e===t);-1!==o&&i.splice(o,1)}appendCustomLibraryItem(e,t){const i=this.customLibraryMap[e];this.customLibraryMap[e]=i.concat(t)}getLibraryItems(e){return this.customLibraryMap[e]}getLibraryCoverImg(e){const t=this.customLibraryMap[e];return t&&t.length>0?t[0].content:null}popCustomLibrary(e){const t=this.customLibrary.findIndex(({libraryId:t})=>t===e);-1!==t&&this.customLibrary.splice(t,1)}appendCustomLibrary(e){this.customLibrary.push(e)}setCustomLibraryName(e,t){const i=this.customLibrary.findIndex(({libraryId:t})=>t===e);-1!==i&&(this.customLibrary[i].libraryName=t)}closeIOptionsModal(){this.iOptionsModalShow&&(this.iOptionsModalShow=!1)}async renameLibraryName(e,t){this.setCustomLibraryName(e,t),await Object(Mi.renameWallpaperLibrary)(e,t)}async removeWallpaperLibrary(e){const t=Di.default.loading(i18n("wallpaper_loading"));try{await Object(Mi.removeWallpaperLibrary)(e),this.delCustomLibraryMap(e),this.popCustomLibrary(e)}finally{t()}}async loadUserWallpaperLibrary(){const e=(await Object(Mi.getUserWallpaperLibrary)()).data;this.setCustomLibrary(e),e.length>0&&await r.a.all(e.map(({libraryId:e})=>(async()=>{const t=await Object(Mi.getWallpaperLibraryItems)(e);this.setCustomLibraryMap(e,t.items)})()))}_filesPreCheck(e){return e.filter(e=>!(e.size>window.__INFINITY__.xMaxLocalFileSize))}async addImagesToLibrary(e,t){const i=this._filesPreCheck(t);if(0===i.length)return void Di.default.error(i18n("wallpaper_upload_file_size_exceed"));i.length!==t.length&&Di.default.error(i18n("wallpaper_upload_file_size_exceed"));const o=await this._uploadFileToCloudRaw(e,i);return await Object(Mi.addImagesToLibrary)(e,o),Object(Al.d)(o)}async createWallpaperLibrary(e){const t=this._filesPreCheck(e);if(0===t.length)return;const i=Di.default.loading(i18n("wallpaper_loading"));try{const e=c.a.randomId(`${window.__INFINITY__.wpLibraryId}${Object(Sl.a)()}`),o=i18n("add_new_wallpaper_libary"),r=await this._uploadFileToCloudRaw(e,t),n=await Object(Mi.createWallpaperLibrary)({libraryName:o,libraryId:e,wallpapers:r});if(6001===n.code)return void Di.default.error(n.message);const a=Object(Al.d)(r);this.appendCustomLibrary({libraryId:e,libraryName:o}),this.setCustomLibraryMap(e,a)}catch(e){throw Di.default.error(i18n("wallpaper_create_library_error")),e}finally{i()}}async createWallpaperLibraryOnly(e,t){try{const i=await Object(Mi.createWallpaperLibrary)({libraryName:t,libraryId:e});if(6001===i.code)return void Di.default.error(i.message);this.appendCustomLibrary({libraryId:e,libraryName:t}),this.setCustomLibraryMap(e,[])}catch(e){throw Di.default.error(i18n("wallpaper_create_library_error")),e}}async _uploadFileToCloudRaw(e,t){const i=await this._handleLocalFiles(t),o=await this._uploadFileToCloud(i,e);return Array.apply(null,{length:o.length}).map((t,r)=>{const{id:n,similarColor:a}=i[r],{key:s,url:l}=o[r].data;return{id:n,key:s,url:l,libraryId:e,similarColor:a}})}_uploadFileToCloud(e,t){return r.a.all(e.map(({file:e,id:i})=>new r.a((o,r)=>{Object(Ul.uploadFile)(e,`${t}/${i}.${Fl.a.getExtension(e.type)}`,this._uploadKey).then(e=>{e.error?r(e):o(e)})})))}async _handleLocalFiles(e){const t=async e=>{let t=e;return Object(Al.e)(e)&&(t=await Object(wl.a)(e,{maxSizeMB:window.__INFINITY__.maxLocalFileSize/1024/1024,maxWidthOrHeight:window.__INFINITY__.minFileMaxWidthOrHeight,useWebWorker:!1})),{file:t,similarColor:await c.a.getSimilarColor(t)}},i=[];for(let o=0,n=e.length;o<n;o++)i.push(await t(e[o])),await new r.a(e=>setTimeout(e,100));return(e=>e.map(({file:e,similarColor:t})=>({id:c.a.randomId(`${window.__INFINITY__.wpLibraryItemId}${Object(Sl.a)()}`),file:e,similarColor:t})))(i)}}zl([x.g],Hl.prototype,"switchTypeInUI",void 0),zl([x.b],Hl.prototype,"setSwitchType",void 0),zl([x.g],Hl.prototype,"pSource",void 0),zl([x.b],Hl.prototype,"setPSource",void 0),zl([x.g],Hl.prototype,"customLibraryMap",void 0),zl([x.b],Hl.prototype,"setCustomLibraryMap",null),zl([x.b],Hl.prototype,"delCustomLibraryMap",null),zl([x.b],Hl.prototype,"clearCustomLibraryMap",null),zl([x.b],Hl.prototype,"popCustomLibraryItem",null),zl([x.b],Hl.prototype,"appendCustomLibraryItem",null),zl([x.g],Hl.prototype,"customLibrary",void 0),zl([x.b],Hl.prototype,"setCustomLibrary",void 0),zl([x.b],Hl.prototype,"popCustomLibrary",null),zl([x.b],Hl.prototype,"appendCustomLibrary",null),zl([x.b],Hl.prototype,"setCustomLibraryName",null),zl([x.g],Hl.prototype,"iOptionsModalShow",void 0),zl([x.b],Hl.prototype,"closeIOptionsModal",null),zl([x.b],Hl.prototype,"toggleIOptionsModal",void 0),zl([x.b],Hl.prototype,"removeWallpaperLibrary",null);var Wl=new Hl,Gl=i(773),Vl=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let ql=class extends a.a{constructor(){super(...arguments),this.library={},this._dirty=!1,this._once=!1,this._lockRemoveImage=!1,this._closeModal=()=>this._closePopup()}async _closePopup(){if(!this._once){this._once=!0;try{this._dirty&&(await this._modifyUserLibrary(this.library.libraryId),this._dirty=!1)}catch(e){}finally{this.closeLibraryEditPopup()}}}async _modifyUserLibrary(e){if(e!==vl.a.wpSource)return;const t=Wl.customLibraryMap[e];-1===t.findIndex(({_id:e})=>e===vl.a.id)&&(Gl.a.clearNextData(),Gl.a.setReady(!1),Gl.a.setOnlyOneItem(!1),await vl.a.timeToSwitchWallpaper());-1===t.findIndex(({_id:e})=>e===Gl.a.nextId)&&(Gl.a.clearNextData(),Gl.a.setReady(!1)),t.length>1?Gl.a.onlyOneItem&&(Gl.a.clearNextData(),Gl.a.setReady(!1),Gl.a.setOnlyOneItem(!1)):Gl.a.setOnlyOneItem(!0)}get _libraryCount(){return this._libraryItems.length}get _libraryItems(){const{libraryId:e}=this.library;return Wl.getLibraryItems(e)||[]}_checkSwitchType({target:e}){const{switchType:t}=e.dataset;t&&(Wl.switchTypeInUI!==t&&Wl.setSwitchType(t),Wl.closeIOptionsModal())}async _applyLibrary(){var e;try{const{libraryId:t}=this.library;if(!(null===(e=Wl.getLibraryItems(t))||void 0===e?void 0:e.length))return;if(vl.a.wpSource===t)return void(vl.a.switchType!==Wl.switchTypeInUI&&vl.a.setSwitchType(Wl.switchTypeInUI));if(!navigator.onLine)return void Di.default.error(i18n("wallpaper_no_network_connect"));this._applyUserLibraryAuto()}finally{this._closePopup()}}async _applyUserLibraryAuto(){const{libraryId:e,libraryName:t}=this.library,[i,o]=c.a.checkImage(),r=Di.default.popupLoading(()=>{Object(Ll.b)("getNextWallpaper"),o()});try{const o=await vl.a.getNextWp(e,void 0,"userLibrary");await i(o.url),vl.a.enableUserLibraryAuto({libraryId:e,libraryName:t},Wl.switchTypeInUI,o)}catch(e){!e.__CANCEL__&&e.message&&Di.default.error(e.message)}finally{r()}}_onChangeLibraryName({currentTarget:e}){this._renameLibraryName(e.value)}_renameLibraryName(e){e?(this.library.libraryName=e,this.new||(Wl.renameLibraryName(this.library.libraryId,e),vl.a.setWpSourceName(e))):Di.default.error(i18n("wallpaper_library_name_illegal"))}_onEnterKeyModifyLibraryName(e){const t=e.currentTarget;"Enter"===e.key&&(this._renameLibraryName(t.value),t.blur())}async _addImagesToLibrary({currentTarget:e}){let t=Array.from(e.files).filter(e=>/^image\//.test(e.type));if(0===t.length)return;this._dirty=!0;const i=Wl.maxCountPerLibrary-this._libraryCount;t.length>i&&(t=t.slice(0,i)),t.length>Wl.maxFileLenPerUpload&&(t=t.slice(0,Wl.maxFileLenPerUpload));const o=Di.default.loading(i18n("wallpaper_loading"));await c.a.sleep(150);try{this.new&&(await Wl.createWallpaperLibraryOnly(this.library.libraryId,this.library.libraryName),this.new=!1);const i=await Wl.addImagesToLibrary(this.library.libraryId,t);i&&Wl.appendCustomLibraryItem(this.library.libraryId,i)}catch(e){Di.default.error(i18n("wallpaper_add_images_to_library_error"))}finally{e.value="",o()}}async _removeImageFromLibrary(e){const{libraryId:t,id:i,key:o,_id:r}=e;if(this._dirty=!0,vl.a.wpSource!==t||1!==this._libraryItems.length){if(!this._lockRemoveImage){this._lockRemoveImage=!0;try{const e=o.split(".").reverse()[0],n=await Object(Mi.removeWallpaperLibraryItem)(t,i,e);if(n.error)throw n.error;if(0!==n.code)throw n;vl.a.dropCloudRecentUsed(r),Wl.popCustomLibraryItem(t,i)}catch(e){console.warn(e),Di.default.error(i18n("wallpaper_delete_library_item_failure"))}finally{this._lockRemoveImage=!1,this.requestUpdateInternal()}}}else Di.default.error(i18n("wallpaper_user_library_limit_text"))}_popupToShow(){this._once=!1,this.library.libraryId===vl.a.wpSource?Wl.setSwitchType(vl.a.switchType):Wl.setSwitchType("one-day")}_popupToHide(){}updated(e){e.has("open")&&(this.open?this._popupToShow():this._popupToHide())}_clearSideEffect(e){c.a.stopBubble(e),Wl.closeIOptionsModal()}_createWallpaperLibrary({currentTarget:e}){let t=Array.from(e.files).filter(e=>/^image\//.test(e.type));0!==t.length&&(t.length>Wl.maxFileLenPerUpload&&(t=t.slice(0,Wl.maxFileLenPerUpload)),Wl.createWallpaperLibrary(t))}render(){var e,t;return n.e`
      <infinito-modal style="--modal-padding:0;" .open=${this.open} .onCancel=${this._closeModal}>
        <section class="library-edit-panel" slot="body" @click=${this._clearSideEffect}>
          <div class="panel-wrap">
            <div class="panel-header">
              <input
                type="text"
                class="plibrary-name-input"
                .value=${this.library.libraryName}
                @change=${this._onChangeLibraryName}
                @keypress=${this._onEnterKeyModifyLibraryName}
                maxlength="80"
              />

              <span class="pheader-tips"> ${i18n("wallpaper_library_upload_tips")} </span>
            </div>

            <div class="panel-content">
              <div class="library-items global-scrollbar">
                <div
                  class="upload-button library-item"
                  style="${this._libraryCount>=Wl.maxCountPerLibrary?"display: none;":""}"
                >
                  <label class="upload-button-label" for="aitem-upload-input">
                    <i-usesvg class="upload-icon" color="#dbdbdb" iconfont type="icon-xingzhuangjiehe2x"></i-usesvg>
                    <span class="upload-text">${i18n("wallpaper_upload_form_local")}</span>
                  </label>
                  <input
                    id="aitem-upload-input"
                    type="file"
                    multiple
                    accept="image/*"
                    @change=${this._addImagesToLibrary}
                    style="display: none;"
                  />
                </div>
                ${null===(e=Wl.getLibraryItems(this.library.libraryId))||void 0===e?void 0:e.map(e=>n.e`
                    <div class="library-item">
                      <wp-item-raw class="library-item-content" .type=${e.type} .content=${e.content}></wp-item-raw>

                      <div class="library-item-remove" @click=${()=>this._removeImageFromLibrary(e)}>
                        <i-usesvg class="library-item-remove-icon" color="#fff" iconfont type="icon-guanbi1"></i-usesvg>
                      </div>
                    </div>
                  `)}
              </div>
            </div>

            <div class="modal-footer">
              <div class="footer-switch-info">
                <div class="footer-switch-wrap">
                  <strong class="switch-text">${i18n("wallpaper_auto_options_text")}:</strong>

                  <div class="switch-options-wrap">
                    <span class="current-option" @click=${Wl.toggleIOptionsModal}>
                      ${Wl.switch_interval_options[Wl.switchTypeInUI]}
                    </span>
                    <i-usesvg class="option-dropdown" iconfont type="icon-you1"></i-usesvg>

                    <ul
                      class="switch-popup-options${Wl.iOptionsModalShow?" active":""}"
                      @click=${this._checkSwitchType}
                    >
                      ${Object.entries(Wl.switch_interval_options).map(([e,t])=>n.e` <li class="popup-option" data-switch-type=${e}>${t}</li> `)}
                    </ul>
                  </div>
                </div>
              </div>

              <div class="footer-button">
                <!--               
                      <infinito-button class="save-button" @click=${this._createWallpaperLibrary}>
                        ${i18n("save")}
                      </infinito-button>
                 -->

                <infinito-button
                  class="sure-button"
                  primary
                  ?disabled=${!(null===(t=Wl.getLibraryItems(this.library.libraryId))||void 0===t?void 0:t.length)}
                  @click=${this._applyLibrary}
                  >${i18n("apply")}</infinito-button
                >
              </div>
            </div>
          </div>
        </section>
      </infinito-modal>
    `}};ql.styles=[k.a,n.b`
      .library-edit-panel {
        width: 652px;
        height: 480px;
      }

      .library-edit-panel .panel-wrap {
        width: 100%;
        height: 100%;

        display: flex;
        flex-flow: column nowrap;
      }
      .library-edit-panel .panel-header {
        width: 100%;
        border-bottom: 1px solid #eee;

        display: flex;
        align-items: center;
        flex-flow: row nowrap;

        box-sizing: border-box;
        padding: 24px 30px 16px;
      }

      .library-edit-panel .panel-header .plibrary-name-input {
        min-width: 180px;
        font-size: 16px;
        color: #333;
        line-height: 35px;

        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;

        font-weight: bold;
        border: 1px solid transparent;
        padding: 0;
        outline: none;
        box-sizing: border-box;

        transition-property: border-color padding color font-weight border-radius;
        transition-duration: 200ms;
        transition-delay: 0s;
        transition-timing-function: ease-out;
      }

      .library-edit-panel .panel-header .plibrary-name-input:focus {
        border: 2px solid #4378d2;
        padding: 0 12px;
        color: #666;
        font-weight: normal;
        border-radius: 3px;
      }

      .library-edit-panel .panel-header .pheader-tips {
        flex: 1;
        width: 0;

        color: #999;
        font-size: 12px;
        margin-left: 12px;

        overflow: hidden;
        text-overflow: ellipsis;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        text-align: right;
      }

      .library-edit-panel .panel-content {
        width: 100%;
        flex: 1;
        height: 0;
        overflow: hidden;
      }

      .library-edit-panel .panel-content .library-items {
        width: 100%;
        height: 100%;
        box-sizing: border-box;

        overflow-y: auto;

        display: flex;
        flex-flow: row wrap;
        align-content: flex-start;

        box-sizing: border-box;
        padding-left: 30px;
        padding-top: 24px;
      }

      .library-edit-panel .panel-content .library-item {
        width: 187px;
        height: 105px;
        position: relative;
        margin-bottom: 20px;
        margin-right: 16px;
      }

      .library-edit-panel .panel-content .library-item .library-item-remove {
        position: absolute;
        top: 0;
        right: 0;
        width: 18px;
        height: 18px;
        transform: translate(40%, -40%);
        background-color: rgba(0, 0, 0, 0.7);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        z-index: 1;
      }

      .library-edit-panel .panel-content .library-item .library-item-remove-icon {
        width: 10px;
        height: 10px;
      }

      .library-edit-panel .panel-content .upload-button {
        box-sizing: border-box;
        border: 2px dashed #dbdbdb;
        text-align: center;
      }

      .library-edit-panel .panel-content .upload-button .upload-button-label {
        display: flex;
        flex-flow: column nowrap;
        width: 100%;
        height: 100%;
        cursor: pointer;
        justify-content: space-around;
      }

      .library-edit-panel .panel-content .upload-button .upload-icon {
        width: 100%;
        height: 35px;
        margin-top: 6px;
      }
      .library-edit-panel .panel-content .upload-button .upload-text {
        font-size: 12px;
        color: #999;

        display: -webkit-box;
        overflow: hidden;
        text-overflow: ellipsis;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
      }

      .modal-footer {
        width: 100%;
        height: 80px;
        background-color: #fff;
        box-sizing: border-box;
        padding: 0 30px;

        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .modal-footer .footer-switch-info {
        flex: 1;
        width: 0;
      }

      .modal-footer .footer-switch-wrap {
        display: flex;
        align-items: center;
        flex-flow: row nowrap;

        font-size: 14px;
        color: #333;
      }

      .modal-footer .footer-switch-wrap .switch-text {
        white-space: nowrap;
      }

      .modal-footer .footer-switch-wrap .switch-options-wrap {
        margin-left: 6px;
        flex: 1;
        width: 0;
        position: relative;
        display: flex;
        align-items: center;
      }

      .modal-footer .switch-options-wrap .current-option {
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
        cursor: pointer;
        display: inline-block;
      }
      .modal-footer .current-option + .option-dropdown {
        width: 14px;
        height: 14px;
        margin-left: 4px;
      }

      .modal-footer .footer-switch-wrap .switch-popup-options {
        position: absolute;
        list-style: none;
        margin: 0;
        bottom: 28px;
        left: 0;
        border-radius: 6px;
        box-sizing: border-box;
        padding: 10px 0;
        background-color: #fff;
        box-shadow: 0px 2px 10px 0px rgba(0, 0, 0, 0.2);

        font-size: 14px;
        color: #333;
        line-height: 40px;

        opacity: 0;
        transform: scale(0.8);
        transition: opacity 100ms ease-in 0s, transform 150ms ease 0s;
        pointer-events: none;
        z-index: 1;
      }

      .modal-footer .footer-switch-wrap .switch-popup-options.active {
        opacity: 1;
        transform: scale(1);
        pointer-events: all;
      }

      .modal-footer .footer-switch-wrap .switch-popup-options .popup-option {
        width: 100%;
        box-sizing: border-box;
        padding: 0 14px;
        white-space: nowrap;
      }
      .modal-footer .footer-switch-wrap .switch-popup-options .popup-option:hover {
        background-color: #f6f6f6;
        cursor: pointer;
      }

      .modal-footer .footer-button {
        margin-left: 6px;
        height: 40px;
        display: flex;
        max-width: 178px;
        min-width: 80px;
      }

      .modal-footer .footer-button .save-button {
        margin-right: 14px;
      }

      .modal-footer .footer-button .sure-button {
        width: 100%;
        height: 100%;
      }
    `],Vl([Object(n.g)({type:Boolean})],ql.prototype,"open",void 0),Vl([Object(n.g)({type:Boolean})],ql.prototype,"new",void 0),Vl([Object(n.g)({type:Object})],ql.prototype,"library",void 0),Vl([Object(n.g)({type:Object})],ql.prototype,"closeLibraryEditPopup",void 0),ql=Vl([Object(n.c)("modal-library-edit")],ql);var Yl=i(507),Ql=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let Xl=class extends a.a{constructor(){super(...arguments),this._inLoading=!1,this._inLoadingNext=!1,this._libraryItems=[],this._bing={},this._scrollThreshold=100,this._lockLoadNext=!1}async _loadLibraryInfo(){const e=window.__INFINITY__.wallpaper_sources.find(({value:e})=>e===this.librarySource);this._libraryName=e.name,this._libraryDesc=e.desc}async _loadLibraryItems(){this._inLoading=!0;try{const e=await $l.loadWallpapersRaw({source:"all"===this.librarySource?"":this.librarySource,page:this._page});this._page=e.nextPage,this._pageCount=e.totalPages,this._libraryCount=e.count,this._libraryItems=e.data}catch(e){console.warn(e)}finally{this._inLoading=!1}}async _loadNextPage(){if(!(this._page>this._pageCount)){this._inLoading&&(this._inLoading=!1),this._inLoadingNext=!0;try{const e=await $l.loadWallpapersRaw({source:"all"===this.librarySource?"":this.librarySource,page:this._page});this._page=e.nextPage,this._pageCount=e.totalPages,this._libraryCount=e.count,this._libraryItems=this._libraryItems.concat(e.data)}finally{this._inLoadingNext=!1}}}_scrollToLoadIfNeeded(e){if(this._lockLoadNext)return;const t=e.currentTarget,{scrollTop:i,scrollHeight:o,clientHeight:r}=t;o<=r||o-i-r<this._scrollThreshold&&(this._lockLoadNext=!0,this._loadNextPage().then(()=>this._lockLoadNext=!1))}updated(e){e.has("open")&&(this.open?this.popupToShow():this.popupToHide())}async popupToShow(){if(this._inLoading&&(this._inLoading=!1),this._inLoadingNext&&(this._inLoadingNext=!1),this._libraryItems.length>0&&(this._libraryItems=[]),this._libraryCount=null,this._libraryName=null,this._libraryDesc=null,this._page=null,this._pageCount=null,this._bing={rawUrl:""},this.librarySource){if(this._loadLibraryInfo(),"bing"===this.librarySource)try{this._inLoading=!0;const e=await Object(Yl.b)();this._bing=e}catch(e){e.__CANCEL__||Di.default.error(e.message)}finally{this._inLoading=!1}else this._loadLibraryItems();this.librarySource===vl.a.wpSource?Wl.setSwitchType(vl.a.switchType):Wl.setSwitchType("one-day")}else Di.default.error(i18n("unknown_mistake"))}popupToHide(){}_checkSwitchType({target:e}){const{switchType:t}=e.dataset;t&&(Wl.switchTypeInUI!==t&&Wl.setSwitchType(t),Wl.closeIOptionsModal())}async _applyLibrary(){try{if("bing"===this.librarySource&&"bing"===vl.a.wpSource)return;if(vl.a.wpSource===this.librarySource)return void(vl.a.switchType!==Wl.switchTypeInUI&&vl.a.setSwitchType(Wl.switchTypeInUI));if(!navigator.onLine)return void Di.default.error(i18n("wallpaper_no_network_connect"));"bing"!==this.librarySource?await this._applyCloudAuto():await this._applyBingWallpaper()}finally{this.close()}}async _applyCloudAuto(){const[e,t]=c.a.checkImage(),i=Di.default.popupLoading(()=>{Object(Ll.b)("getNextWallpaper"),t()});try{const t=await vl.a.getNextWp(this.librarySource);await e(t.url),vl.a.enableCloudAuto(this.librarySource,Wl.switchTypeInUI,t)}catch(e){!e.__CANCEL__&&e.message&&Di.default.error(e.message)}finally{i()}}async _applyBingWallpaper(){const e=Di.default.popupLoading();try{await Object(Al.f)(this._bing.url),vl.a.enableBingWallpaper(this._bing)}catch(e){e.__CANCEL__||Di.default.error(i18n("network_error"))}finally{e()}}_clearSideEffect(e){c.a.stopBubble(e),Wl.closeIOptionsModal()}render(){return n.e`
      <infinito-modal style="--modal-padding:0;" .open=${this.open} .onCancel=${this.close}>
        <section class="library-preview-panel" slot="body" @click=${this._clearSideEffect}>
          <div class="library-preview-header">
            <div class="pheader-head">
              <h3 class="pheader-head-title">${this._libraryName}</h3>
              <span class="pheader-library-count">${this._libraryCount}</span>
            </div>

            <span class="pheader-desc">${this._libraryDesc}</span>
          </div>

          <div class="library-preview-content">
            ${"bing"===this.librarySource?n.e`
                  <div class="library-preview-bing">
                    <wp-item-raw type="image" .content=${this._bing.rawUrl}></wp-item-raw>
                  </div>
                `:n.e`
                  <div class="library-preview-items global-scrollbar" @scroll=${this._scrollToLoadIfNeeded}>
                    ${this._libraryItems.map(e=>n.e`
                          <wp-item-raw
                            class="library-preview-item"
                            .type=${e.type}
                            .content=${e.content}
                          ></wp-item-raw>
                        `)}
                    <!-- loading next icon -->
                    <div class="loading-next" style=${this._inLoadingNext?"":"display: none;"}>
                      <infinito-spin .isSvg=${l.p} class="loading-next-icon" spinning></infinito-spin>
                    </div>
                  </div>
                `}
            <!-- loading -->
            <div class="apreview-items-loading" style="${this._inLoading?"":"display: none;"}">
              <infinito-spin class="loading-element" spinning .isSvg=${l.p}></infinito-spin>
            </div>
          </div>

          <div class="library-preview-footer">
            <div class="footer-switch-info">
              <div class="footer-switch-wrap" style="${"bing"===this.librarySource?"display: none;":""}">
                <strong class="switch-text">${i18n("wallpaper_auto_options_text")}:</strong>

                <div class="switch-options-wrap">
                  <span class="current-option" @click=${Wl.toggleIOptionsModal}>
                    ${Wl.switch_interval_options[Wl.switchTypeInUI]}
                  </span>
                  <i-usesvg class="option-dropdown" iconfont type="icon-you1"></i-usesvg>

                  <ul
                    class="switch-popup-options${Wl.iOptionsModalShow?" active":""}"
                    @click=${this._checkSwitchType}
                  >
                    ${Object.entries(Wl.switch_interval_options).map(([e,t])=>n.e` <li class="popup-option" data-switch-type=${e}>${t}</li> `)}
                  </ul>
                </div>
              </div>
              <div class="limit-text" style="${"bing"!==this.librarySource?"display: none;":""}">
                ${i18n("wallpaper_switch_limit_with_bing")}
              </div>
            </div>

            <div class="ws-sure-button">
              <infinito-button class="sure-button" primary @click=${this._applyLibrary}>
                ${i18n("apply")}
              </infinito-button>
            </div>
          </div>
        </section>
      </infinito-modal>
    `}};Xl.styles=[k.a,n.b`
      .library-preview-panel {
        width: 652px;
        height: 480px;

        display: flex;
        flex-flow: column nowrap;
      }

      .library-preview-header {
        box-sizing: border-box;
        padding: 18px 30px;
        border-bottom: 1px solid #eee;
      }

      .library-preview-header .pheader-head {
        display: flex;
        align-items: center;
      }

      .library-preview-header .pheader-head .pheader-head-title {
        font-size: 18px;
        color: #333;
        margin: 0;
        line-height: 25px;
      }

      .library-preview-header .pheader-head .pheader-library-count {
        background-color: #f5f5f5;
        color: #999;
        font-size: 12px;
        margin-left: 6px;
        display: block;
        line-height: 19px;
        padding: 0 6px;
      }

      .library-preview-header .pheader-desc {
        color: #333;
        line-height: 17px;
        font-size: 12px;
        margin-top: 2px;
      }

      .library-preview-content {
        width: inherit;
        flex: 1;
        height: 0;
        box-sizing: border-box;
        padding: 14px 0;
        position: relative;
        overflow: hidden;
      }

      .library-preview-content .library-preview-bing {
        height: 100%;
        padding: 0 14px;
      }

      .library-preview-content .library-preview-items {
        width: 100%;
        height: 100%;
        box-sizing: border-box;
        padding-left: 30px;
        padding-right: 20px;

        display: flex;
        flex-flow: row wrap;
        align-content: flex-start;
        overflow-y: auto;
      }

      .library-preview-content .library-preview-items .library-preview-item {
        width: 187px;
        height: 105px;
        margin-bottom: 20px;
      }

      .library-preview-content .library-preview-items .loading-next {
        width: 100%;
        text-align: center;
      }
      .library-preview-content .library-preview-items .loading-next-icon {
        display: inline-block;
        width: 80px;
        height: 40px;
      }
      .library-preview-content .library-preview-items .library-preview-item:nth-child(3n-1) {
        margin-left: 16px;
        margin-right: 16px;
      }

      .library-preview-content .apreview-items-loading {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
      }
      .library-preview-content .apreview-items-loading > .loading-element {
        width: 80px;
        height: 40px;
      }

      .library-preview-footer {
        width: 100%;
        height: 80px;
        background-color: #fff;
        box-sizing: border-box;
        padding: 0 30px;

        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .library-preview-footer .footer-switch-info {
        flex: 1;
        width: 0;
      }

      .library-preview-footer .footer-switch-wrap {
        display: flex;
        align-items: center;
        flex-flow: row nowrap;

        font-size: 14px;
        color: #333;
      }

      .library-preview-footer .footer-switch-wrap .switch-text {
        white-space: nowrap;
      }

      .library-preview-footer .footer-switch-wrap .switch-options-wrap {
        margin-left: 6px;
        flex: 1;
        width: 0;
        position: relative;
        display: flex;
        align-items: center;
      }

      .library-preview-footer .switch-options-wrap .current-option {
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
        cursor: pointer;
        display: inline-block;
      }
      .library-preview-footer .current-option + .option-dropdown {
        width: 14px;
        height: 14px;
        margin-left: 4px;
      }

      .library-preview-footer .footer-switch-wrap .switch-popup-options {
        position: absolute;
        list-style: none;
        margin: 0;
        bottom: 28px;
        left: 0;
        border-radius: 6px;
        box-sizing: border-box;
        padding: 10px 0;
        background-color: #fff;
        box-shadow: 0px 2px 10px 0px rgba(0, 0, 0, 0.2);

        font-size: 14px;
        color: #333;
        line-height: 40px;

        opacity: 0;
        transform: scale(0.8);
        transition: opacity 100ms ease-in 0s, transform 150ms ease 0s;
        pointer-events: none;
        z-index: 1;
      }

      .library-preview-footer .footer-switch-wrap .switch-popup-options.active {
        opacity: 1;
        transform: scale(1);
        pointer-events: all;
      }

      .library-preview-footer .footer-switch-wrap .switch-popup-options .popup-option {
        width: 100%;
        box-sizing: border-box;
        padding: 0 14px;
        white-space: nowrap;
      }
      .library-preview-footer .footer-switch-wrap .switch-popup-options .popup-option:hover {
        background-color: #f6f6f6;
        cursor: pointer;
      }

      .library-preview-footer .limit-text {
        font-size: 14px;
        color: #999;
      }

      .library-preview-footer .ws-sure-button {
        margin-left: 6px;
        max-width: 178px;
        height: 40px;
        min-width: 80px;
      }

      .library-preview-footer .ws-sure-button .sure-button {
        width: 100%;
        height: 100%;
      }
    `],Ql([Object(n.g)({type:Boolean})],Xl.prototype,"open",void 0),Ql([Object(n.g)({type:String})],Xl.prototype,"librarySource",void 0),Ql([Object(n.g)({type:Object})],Xl.prototype,"close",void 0),Ql([Object(n.f)()],Xl.prototype,"_inLoading",void 0),Ql([Object(n.f)()],Xl.prototype,"_inLoadingNext",void 0),Ql([Object(n.f)()],Xl.prototype,"_libraryItems",void 0),Ql([Object(n.f)()],Xl.prototype,"_libraryCount",void 0),Ql([Object(n.f)()],Xl.prototype,"_libraryName",void 0),Ql([Object(n.f)()],Xl.prototype,"_libraryDesc",void 0),Ql([Object(n.f)()],Xl.prototype,"_bing",void 0),Xl=Ql([Object(n.c)("modal-library-preview")],Xl);var Kl=i(936),Zl=i.n(Kl),Jl=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let ec=class extends a.a{constructor(){super(...arguments),this._wallpaper_source_items=window.__INFINITY__.wallpaper_sources,this._itemOptionsPopup="",this._openOrCloseItemOptionsPopup=e=>{e.stopPropagation();const t=e.currentTarget,{itemPopup:i}=t.dataset;i===this._itemOptionsPopup?this._itemOptionsPopup="":this._itemOptionsPopup=i},this._editLibraryPopupShow=!1,this._isNewLibraryPopup=!1,this._library={},this._closeLibraryEditPopup=()=>{this._editLibraryPopupShow&&(this._editLibraryPopupShow=!1),this._isNewLibraryPopup&&(this._isNewLibraryPopup=!1),this._library={}},this._libraryPreviewPopupShow=!1,this._closeLibraryPreviewPopup=()=>{this._libraryPreviewPopupShow&&(this._libraryPreviewPopupShow=!1),this._libraryPreviewSource&&(this._libraryPreviewSource=null)},this._clearSideEffect=()=>{this._closeLibraryEditPopup(),this._closeLibraryPreviewPopup(),Wl.closeIOptionsModal(),this._itemOptionsPopup=""},this._hideItemOptionsPopup=()=>this._itemOptionsPopup&&(this._itemOptionsPopup="")}_checkPSourceAndOpen(e){e.stopPropagation(),this._itemOptionsPopup="";const{dataset:t}=e.target,{psource:i,pname:o}=t;i&&("userLibrary"in t?this._openAndSetLibraryPopup(i,o):this._openAndSetLibraryPreviewPopup(i))}_createWallpaperLibrary({currentTarget:e}){let t=Array.from(e.files).filter(e=>/^image\//.test(e.type));0!==t.length&&(t.length>Wl.maxFileLenPerUpload&&(t=t.slice(0,Wl.maxFileLenPerUpload)),Wl.createWallpaperLibrary(t))}_clickToCreateLibrary(e){return s.userStore.isLogin?1===Wl.customLibrary.length?(e.preventDefault(),void Di.default.error(i18n("wallpaper_create_library_limit"))):(this._isNewLibraryPopup=!0,void this._openAndSetLibraryPopup(`${window.__INFINITY__.wpLibraryId}${Object(Sl.a)()}`,i18n("add_new_wallpaper_libary"))):(e.preventDefault(),void Di.default.popupLogin())}_openAndSetLibraryPopup(e,t){this._library={libraryId:e,libraryName:t},this._editLibraryPopupShow=!0}_removeLibrary(e){Y.IConfirm.create().toShow({title:i18n("confirm_remove_wallpaper_library"),text:i18n("remove_wallpaper_library_warn"),onConfirm:()=>{const t=Wl.customLibraryMap[e];Array.isArray(t)&&s.wallpaperStore.removeCloudRecentUsedP(t.map(e=>e.id)),Wl.removeWallpaperLibrary(e)}})}_openAndSetLibraryPreviewPopup(e){this._libraryPreviewPopupShow=!0,this._libraryPreviewSource=e}connectedCallback(){super.connectedCallback(),document.body.addEventListener("click",this._clearSideEffect)}disconnectedCallback(){super.disconnectedCallback(),document.body.removeEventListener("click",this._clearSideEffect)}render(){return n.e`
      <section class="auto-wallpaper">
        <div class="ws-items global-scrollbar" @click=${this._checkPSourceAndOpen}>
          <div class="ws-item ws-new-item">
            <label class="wsn-item-label" for="_new-upload-el" @click=${this._clickToCreateLibrary}>
              <i-usesvg class="wsn-item-icon" color="#d4d4d4" iconfont type="icon-xinjianbizhiku"></i-usesvg>
              <span class="wsn-item-text">${i18n("chose_from_mypc")}</span>
            </label>
            <input
              id="new-upload-el"
              type="file"
              accept="image/*"
              multiple
              style="display: none;"
              @change=${this._createWallpaperLibrary}
            />
          </div>

          <!-- user wallpaper library -->
          ${Wl.customLibrary.map(({libraryId:e,libraryName:t})=>n.e`
              <div
                class="ws-item${Wl.pSource===e?" active":""}"
                data-psource=${e}
                data-pname=${t}
                data-user-library
                @mouseleave=${this._hideItemOptionsPopup}
              >
                <i-usesvg class="ws-item-checked-icon" color="#ff8181" iconfont type="icon-xuanzhong"></i-usesvg>
                <img
                  class="ws-item-img"
                  src=${Wl.getLibraryCoverImg(e)||Zl.a}
                  decoding="async"
                  importance="auto"
                  width="200"
                />
                <div class="ws-item-info">
                  <strong class="ws-item-name">${t}</strong>
                  <span class="ws-item-desc" style="${s.userStore.isLogin?"":"display: none;"}"
                    >${i18n("wallpaper_library_desc",s.userStore.userInfo.name)}</span
                  >
                </div>

                <div
                  class="wsi-options-bar${this._itemOptionsPopup===e?" active":""}"
                  @click=${this._openOrCloseItemOptionsPopup}
                  data-item-popup=${e}
                  style=${s.wallpaperStore.wpSource===e?"display: none;":""}
                >
                  <div class="wsi-option-icon-wrap">
                    <i-usesvg class="wsi-option-icon" iconfont type="icon-xingzhuangjiehe" color="#fff"></i-usesvg>
                  </div>
                  <ul class="wsi-popup-options">
                    <li class="popup-option-item" @click=${()=>this._removeLibrary(e)}>
                      ${i18n("wallpaper_remove_library")}
                    </li>
                  </ul>
                </div>
              </div>
            `)}

          <!-- cloud -->
          ${this._wallpaper_source_items.map(({img:e,name:t,desc:i,value:o})=>n.e`
              <div class="ws-item${Wl.pSource===o?" active":""}" data-psource=${o}>
                <i-usesvg class="ws-item-checked-icon" color="#ff8181" iconfont type="icon-xuanzhong"></i-usesvg>
                <img class="ws-item-img" src=${e} decoding="async" importance="auto" width="200" />
                <div class="ws-item-info">
                  <strong class="ws-item-name">${t}</strong>
                  <span class="ws-item-desc">${i}</span>
                </div>

                <!-- <div
                  class="wsi-options-bar${this._itemOptionsPopup===t?" active":""}"
                  @click=${this._openOrCloseItemOptionsPopup}
                  data-item-popup=${t}
                >
                  <div class="wsi-option-icon-wrap">
                    <i-usesvg class="wsi-option-icon" iconfont type="icon-xingzhuangjiehe"></i-usesvg>
                  </div>
                  <ul class="wsi-popup-options">
                    <li class="popup-option-item" @click=${()=>this._openAndSetLibraryPreviewPopup(o)}>
                      ${i18n("wallpaper_library_preview")}
                    </li>
                  </ul>
                </div> -->
              </div>
            `)}
        </div>

        <modal-library-edit
          ?open=${this._editLibraryPopupShow}
          .library=${this._library}
          .closeLibraryEditPopup=${this._closeLibraryEditPopup}
          .new=${this._isNewLibraryPopup}
        ></modal-library-edit>

        <modal-library-preview
          ?open=${this._libraryPreviewPopupShow}
          .librarySource=${this._libraryPreviewSource}
          .close=${this._closeLibraryPreviewPopup}
        ></modal-library-preview>
      </section>
    `}};ec.styles=[k.a,Dl],Jl([Object(n.f)()],ec.prototype,"_itemOptionsPopup",void 0),Jl([Object(n.f)()],ec.prototype,"_editLibraryPopupShow",void 0),Jl([Object(n.f)()],ec.prototype,"_isNewLibraryPopup",void 0),Jl([Object(n.f)()],ec.prototype,"_library",void 0),Jl([Object(n.f)()],ec.prototype,"_libraryPreviewPopupShow",void 0),Jl([Object(n.f)()],ec.prototype,"_libraryPreviewSource",void 0),ec=Jl([Object(n.c)("auto-wallpaper")],ec);var tc=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let ic=class extends a.a{constructor(){super(...arguments),this.type="image",this._inLoading=!1,this._showImage=({currentTarget:e})=>{this._url=this.content,this._inLoading=!1,e.style.display=""},this._loadError=({currentTarget:e})=>{e.style.display="none"}}updated(e){e.has("content")&&"color"!==this.type&&this._url!==this.content&&!this._inLoading&&(this._inLoading=!0)}render(){return n.e`
      <div
        class="wp-item-raw ${this.type}"
        style="${"color"===this.type?`background-color: ${this.content};`:""}"
      >
        ${"color"!==this.type?n.e`
              <img
                class="wp-item-image"
                src=${this.content}
                width=${Mi.imgConfig.smallWidth}
                @load=${this._showImage}
                @error=${this._loadError}
                decoding="async"
                importance="auto"
              />

              <div class="wp-item-loading pre-loading" style=${this._inLoading?"":"display: none;"}>
                <infinito-spin .isSvg=${l.p} class="pre-loading-icon" spinning></infinito-spin>
              </div>
            `:null}
      </div>
    `}};ic.styles=n.b`
    .wp-item-raw {
      width: 100%;
      height: 100%;
      position: relative;
      box-sizing: border-box;
    }

    .wp-item-raw.color {
      border: 1px solid #e9e9e9;
      border-radius: 4px;
    }

    .wp-item-raw .wp-item-image {
      width: 100%;
      height: 100%;
      border-radius: 4px;
      object-fit: cover;
      object-position: center;
    }

    .wp-item-raw .wp-item-loading {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1;
    }

    .wp-item-raw .pre-loading {
      background-color: #f5f5f5;
    }

    .wp-item-raw .pre-loading .pre-loading-icon {
      width: 80px;
      height: 40px;
    }
  `,tc([Object(n.g)({type:String})],ic.prototype,"type",void 0),tc([Object(n.g)({type:String})],ic.prototype,"content",void 0),tc([Object(n.f)()],ic.prototype,"_inLoading",void 0),ic=tc([Object(n.c)("wp-item-raw")],ic);var oc=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let rc=class extends a.a{constructor(){super(...arguments),this._emitCollectEvent=e=>{e.stopPropagation();const t=new CustomEvent("collect",{detail:this.wp.id});this.dispatchEvent(t)},this._emitLikeEvent=e=>{if(e.stopPropagation(),"cloud"!==this.wp.type)return;const t=new CustomEvent("like",{detail:this.wp.id});this.dispatchEvent(t)}}render(){return n.e`
      <div class="wp-item">
        <wp-item-raw .type=${this.wp.type} .content=${this.wp.content}></wp-item-raw>

        <div class="wp-item-mask">
          <!-- collect and like -->
          <div class="mask-wp-other">
            <i-usesvg
              iconfont
              type="icon-caozuo-shoucang-line"
              class="mask-wp-collect"
              .color=${vl.a.includeCollection(this.wp.id)?"#ff5353":"#fff"}
              @click=${this._emitCollectEvent}
              style=${this.disableCollect?"display: none;":""}
            >
            </i-usesvg>
            <span class="mask-wp-like" @click=${this._emitLikeEvent} style=${this.disableLike?"display: none;":""}>
              <i-usesvg
                class="wp-like-icon"
                iconfont
                .color=${vl.a.includeLiked(this.wp.id)?"#ffd45d":"#fff"}
                type="icon-zan-dianji2x"
              >
              </i-usesvg>
              <span class="wp-like-count">${this.wp.like}</span>
            </span>
          </div>
        </div>
      </div>
    `}};rc.styles=n.b`
    .wp-item {
      width: 100%;
      height: 100%;
      position: relative;
      box-sizing: border-box;
    }

    .wp-item .wp-item-mask {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.2);
      opacity: 0;
      transition: opacity 200ms ease-in 0s;
    }

    @media only screen and (hover: none) {
      .wp-item .wp-item-mask {
        opacity: 1;
      }
    }

    .wp-item:hover .wp-item-mask {
      opacity: 1;
    }

    .wp-item .wp-item-mask .mask-wp-other {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      padding: 4px 10px;

      box-sizing: border-box;
      display: flex;
      justify-content: space-between;
      align-items: center;

      background: linear-gradient(to top, rgba(0, 0, 0, 0.1) 0%, rgba(0, 0, 0, 0) 100%);
      // border-radius: 6px 6px 4px 4px;
    }

    .wp-item .wp-item-mask .mask-wp-collect {
      width: 16px;
      height: 16px;
      cursor: pointer;
    }

    .wp-item .wp-item-mask .mask-wp-like {
      cursor: pointer;
    }

    .wp-item .wp-item-mask .wp-like-icon {
      width: 16px;
      height: 16px;
      margin-right: 2px;
      vertical-align: middle;
    }

    .wp-item .wp-item-mask .wp-like-count {
      font-size: 12px;
      color: #fff;
      vertical-align: middle;
    }
  `,oc([Object(n.g)({type:Object})],rc.prototype,"wp",void 0),oc([Object(n.g)({type:Boolean})],rc.prototype,"disableLike",void 0),oc([Object(n.g)({type:Boolean})],rc.prototype,"disableCollect",void 0),rc=oc([Object(n.c)("wp-item")],rc);var nc=i(603),ac=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let sc=class extends a.a{constructor(){super(...arguments),this._tabList=["cloud-wallpaper","wallpaper-auto"],this._activeTab=this._tabList[0],this._activeDefaultTab=({currentTarget:e})=>{this._$headerBar.style.left=e.dataset.barLeft,this._activeTab=this._tabList[0]},this._activeWpSource=({currentTarget:e})=>{this._$headerBar.style.left=e.dataset.barLeft,this._activeTab=this._tabList[1]},this._life_once=!1,this._lockLoadUserWp=!1}initHeaderBar(){if(this._$headerBar){if(this._$headerBar.classList.contains("active"))return;const e=this._$headerItems.item(0);this._$headerBar.style.left=e.dataset.barLeft,this._$headerBar.classList.add("active")}}_initHeaderBarPos(){if(this._$headerItems&&0!==this._$headerItems.length){let e=1;for(const t of this._$headerItems){let i=t.offsetLeft+t.clientWidth/2;1===e&&(i-=15,e++),t.dataset.barLeft=i+"px"}}}loadUserWpNeededRaw(){const e=[];return e.push(Wl.loadUserWallpaperLibrary(),vl.a.loadCollectionP(),vl.a.loadLikedP()),r.a.all(e)}_loadUserWpNeeded(){Object(x.c)(()=>{const{isLogin:e}=nc.userStore;e&&this.loadUserWpNeededRaw().then(()=>{this._lockLoadUserWp=!0}).catch(()=>{Di.default.error(i18n("network_error"))})})}_registerReaction(){Object(x.h)(()=>vl.a.wpSource,e=>Wl.setPSource(e),{fireImmediately:!0}),Object(x.h)(()=>nc.userStore.isLogin,e=>{e||(vl.a.setCloudCollection([]),vl.a.setLiked([]),Wl.setCustomLibrary([]),Wl.clearCustomLibraryMap())})}async _afterShow(){await this.updateComplete,this._initHeaderBarPos(),this.initHeaderBar(),this._registerReaction(),$l.initDataIfNeeded()}updated(e){e.has("open")&&this.open&&(this._life_once||(this._afterShow(),this._life_once=!0),this._lockLoadUserWp||this._loadUserWpNeeded(),this._$cloudWallpaper&&this._$cloudWallpaper.whenOpen())}render(){return n.e`
      <div class="modal-wallpaper">
        <div class="modal-wallpaper-header">
          <div class="title${this._activeTab===this._tabList[0]?" active":""}" @click=${this._activeDefaultTab}>
            ${i18n("wallpaper_choose_single")}
          </div>
          <div class="title${this._activeTab===this._tabList[1]?" active":""}" @click=${this._activeWpSource}>
            ${i18n("wallpaper_choose_library")}
          </div>
          <i class="mw-header-bar"></i>
        </div>

        <div class="modal-wallpaper-content">
          <cloud-wallpaper
            class="content-cloud-wallpaper"
            style="${this._activeTab===this._tabList[0]?"":"display: none;"}"
          >
          </cloud-wallpaper>

          <auto-wallpaper
            class="content-auto-wallpaper"
            style="${this._activeTab===this._tabList[1]?"":"display: none;"}"
          >
          </auto-wallpaper>
        </div>
      </div>
    `}};sc.styles=yl,ac([Object(n.g)({type:Boolean})],sc.prototype,"open",void 0),ac([Object(n.h)(".modal-wallpaper-header .mw-header-bar")],sc.prototype,"_$headerBar",void 0),ac([Object(n.i)(".modal-wallpaper-header .title")],sc.prototype,"_$headerItems",void 0),ac([Object(n.f)()],sc.prototype,"_activeTab",void 0),ac([Object(n.h)(".modal-wallpaper-content >.content-cloud-wallpaper")],sc.prototype,"_$cloudWallpaper",void 0),sc=ac([Object(n.c)("wallpaper-default")],sc);var lc=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let cc=class extends a.a{constructor(){super(...arguments),this.show=!1,this.onCloseModal=()=>s.pluginStore.hideLast()}render(){return n.e`
      <infinito-portal-entrance destination="modal-wallpaper-default">
        <infinito-modal style="--modal-padding:0px" ?open=${this.show} .onCancel=${this.onCloseModal}>
          <wallpaper-default slot="body" ?open=${this.show}></wallpaper-default>
        </infinito-modal>
      </infinito-portal-entrance>
    `}};lc([Object(n.g)({type:Boolean})],cc.prototype,"show",void 0),cc=lc([Object(n.c)("modal-wallpaper-default")],cc);var dc=n.b`:host {
  --dot-color: #333;
  --dot-hover: #fff;
  border-radius: 4px;
  --padding: 6px 0;
  --dot-width: 3px;
}
:host([disabled]) {
  cursor: not-allowed !important;
}
:host(.active) {
  opacity: 1 !important;
}
:host(.active) #dot {
  background: var(--dot-hover);
}
:host(.note-item-menu:focus) #dot {
  background: var(--dot-hover);
}
:host(.small) {
  --padding: 4px 0;
  --dot-width: 4px;
}
::slotted(li) {
  box-sizing: border-box;
  padding: 7px 14px;
  margin: 0;
  list-style: none;
  text-align: center;
  transition: all 300ms;
  font-size: 14px;
}
::slotted(li:hover) {
  background: #f5f5f5;
}
ul {
  box-sizing: border-box;
  padding: 7px 0;
  margin: 0;
}
.dot-expanded-container {
  position: relative;
}
.dot {
  box-sizing: border-box;
  display: flex;
  flex-flow: column;
  align-items: center;
  justify-content: space-around;
  padding: var(--padding);
  width: 32px;
  height: 32px;
  border-radius: 4px;
}
.dot:hover {
  background: var(--dot-hover);
}
.dot span {
  width: var(--dot-width);
  height: var(--dot-width);
  border-radius: 50%;
  background: var(--dot-color);
}
.modal {
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: 99;
  display: block;
  cursor: default;
  position: fixed;
}
.drop-wrapper {
  display: none;
  position: fixed;
  background: #fff;
  box-shadow: 0px 2px 16px 0px rgba(0, 0, 0, 0.1);
  border-radius: 4px;
  font-size: 12px;
  color: #333;
  z-index: 999;
  overflow: hidden;
}
.drop-wrapper.drop-open {
  display: inline-block;
}
`,pc=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let hc=class extends n.a{constructor(){super(...arguments),this.isDropdown=!1,this.disabled=!1,this.liNodes=[],this.renderDot=e=>{if(e.preventDefault(),e.stopPropagation(),this.disabled)return;this.classList.add("active");const t=document.createElement("div");t.className="dot-wrapper",this.$ele=t;const i=document.createElement("div");i.className="infinity-modal";const o=document.createElement("ul");if(o.className="dot-ul",this.liNodes.forEach(e=>{e.style.cssText="",o.appendChild(e)}),t.appendChild(i),t.appendChild(o),document.body.appendChild(t),"DIV"===e.currentTarget.tagName){const t=e.currentTarget.getBoundingClientRect(),{bottom:i,right:r,top:n}=t,a=window.innerWidth,l=document.body.clientHeight;o.style.right=a-r+"px";const c=o.clientHeight,d=this.clientHeight*s.settingStore.sideScaleRatio;o.style.top=n+c+d>=l?n-c+"px":i+"px"}o.addEventListener("click",e=>{"LI"===e.target.tagName&&(document.body.removeChild(t),this.classList.remove("active"))}),i.addEventListener("click",()=>{document.body.removeChild(t),this.classList.remove("active")})}}firstUpdated(){this.dot.addEventListener("mousedown",e=>e.stopPropagation()),this.dot.addEventListener("touchstart",e=>e.stopPropagation()),this.dot.addEventListener("touchend",this.renderDot),this.dot.addEventListener("click",this.renderDot)}render(){const e={"drop-wrapper":!0,"drop-open":this.isDropdown};return n.e`
      <div class="dot-expanded-container">
        <div id="dot" class="dot">
          <span></span>
          <span></span>
          <span></span>
        </div>
        <div class=${Object(K.a)(e)}>
          <ul>
            <slot id="slot" @slotchange="${this.slotChange}"></slot>
          </ul>
        </div>
      </div>
    `}slotChange(){this.requestUpdate()}updated(){const e=this.liSlot.assignedNodes();if(e&&e.length)for(let t=0;t<e.length;t++){const i=e[t];"LI"===i.tagName&&this.liNodes.push(i)}}};hc.styles=dc,pc([Object(n.h)("#dot")],hc.prototype,"dot",void 0),pc([Object(n.h)(".drop-wrapper")],hc.prototype,"dropWrapper",void 0),pc([Object(n.h)("#slot")],hc.prototype,"liSlot",void 0),pc([Object(n.g)({type:Boolean,reflect:!0})],hc.prototype,"isDropdown",void 0),pc([Object(n.g)({type:Boolean,reflect:!0})],hc.prototype,"disabled",void 0),hc=pc([Object(n.c)("i-dot-expanded")],hc);var uc=n.b`.wrapper {
  position: relative;
  width: 800px;
  border-radius: 40px;
  overflow: hidden;
}
.wrapper .close-btn {
  position: absolute;
  display: flex;
  justify-content: center;
  align-items: center;
  width: 30px;
  height: 30px;
  top: 26px;
  right: 28px;
  cursor: pointer;
  transition: opacity 300ms;
}
.wrapper .close-btn:hover {
  opacity: 0.8;
}
.wrapper .close-btn img {
  width: 14px;
  height: 14px;
}
.bg {
  width: 100%;
  padding: 20px;
  box-sizing: border-box;
}
.bg img {
  display: block;
  width: 100%;
  height: 100%;
  border-radius: 20px;
}
.content {
  display: flex;
  width: 100%;
  box-sizing: border-box;
  min-height: 240px;
  padding: 20px;
}
.items {
  box-sizing: border-box;
  flex: 1;
  display: flex;
  flex-flow: column;
  align-items: center;
  overflow: hidden;
}
.tips {
  width: 100%;
  font-size: 22px;
  font-family: PingFangSC-Semibold, PingFang SC;
  font-weight: 600;
  color: #333333;
  line-height: 30px;
  margin: 0;
  text-align: center;
  word-break: break-word;
}
.setting-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 160px;
  height: 48px;
  margin-top: 27px;
  padding: 0 20px;
  background: #151515;
  border-radius: 24px;
  font-size: 16px;
  font-family: PingFangSC-Medium, PingFang SC;
  font-weight: 500;
  color: #FFFFFF;
  line-height: 22px;
  border: none;
  outline: none;
  cursor: pointer;
  transition: all 0.3s ease-out;
}
.setting-btn:hover {
  transform: translateY(-4px);
  box-shadow: 0px 8px 16px 0px rgba(110, 70, 255, 0.3);
}
.setting-btn > img {
  margin-right: 12px;
}
.hidden-option {
  margin-top: 24px;
  display: flex;
  align-items: center;
  cursor: pointer;
}
.hidden-option .text {
  padding-left: 8px;
  font-size: 12px;
  font-family: PingFangSC-Regular, PingFang SC;
  font-weight: 400;
  color: #9BA3AE;
  line-height: 17px;
}
.spacer {
  width: 1px;
  height: 160px;
  margin-top: -10px;
  background: #DEDEDE;
}
.browsers {
  display: flex;
  margin-top: 23px;
  justify-content: space-evenly;
  width: 100%;
}
.browsers.m-40 {
  justify-content: center;
}
.browsers.m-40 > div {
  width: 100px;
}
.browsers.m-40 > div:not(:last-child) {
  margin-right: 15px;
}
.browsers > div {
  display: flex;
  flex-flow: column;
  align-items: center;
  width: 80px;
  cursor: pointer;
  transition: opacity 300ms;
  text-align: center;
}
.browsers > div:hover {
  opacity: 0.8;
}
.browsers > div > div {
  position: relative;
}
.browsers img {
  width: 32px;
  height: 32px;
  margin-bottom: 8px;
}
.browsers img.recommand {
  position: absolute;
  top: 0;
  right: -12px;
  width: 24px;
  height: 12px;
}
.browsers p {
  margin: 0;
  font-size: 12px;
  font-family: PingFangSC-Regular, PingFang SC;
  font-weight: 400;
  color: #9BA3AE;
  line-height: 17px;
}
.checkbox-div {
  position: relative;
  width: 13px;
  height: 13px;
}
label {
  box-sizing: border-box;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border: 1px solid #9BA3AE;
  border-radius: 50%;
  cursor: pointer;
}
label::after {
  content: '';
  position: absolute;
  width: 4px;
  height: 2px;
  top: 3px;
  left: 2.5px;
  border: 2px solid #fff;
  border-top: none;
  border-right: none;
  background: transparent;
  opacity: 0;
  transform: rotate(-45deg);
}
input[type='checkbox'] {
  visibility: hidden;
}
input[type='checkbox']:checked + label {
  background: #000;
}
input[type='checkbox']:checked + label::after {
  opacity: 1;
}
`,gc=i(803),fc=i.n(gc),mc=i(804),bc=i.n(mc),yc=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};const{isZh:vc}=l.D,wc=[{name:i18n("extfans"),desc:"extfans",url:vc?"https://www.extfans.com/productivity/nnnkddnnlpamobajfibfdgfnbcnkgngh/":"https://www.extfans.com/productivity/dbfmnekepjoapopniengjbcpnbljalfg/"}],xc=[...vc?wc:[],{name:i18n("chrome"),desc:"chrome",url:vc?"https://chrome.google.com/webstore/detail/infinity-new-tab-pro/nnnkddnnlpamobajfibfdgfnbcnkgngh":"https://chrome.google.com/webstore/detail/infinity-new-tab/dbfmnekepjoapopniengjbcpnbljalfg?hl=en-US"},{name:i18n("edge"),desc:"edge",url:vc?"https://microsoftedge.microsoft.com/addons/detail/infinity-new-tab-pro/hajlmbnnniemimmaehcefkamdadpjlfa":"https://microsoftedge.microsoft.com/addons/detail/infinity-new-tab/aadnmeanpbokjjahcnikajejglihibpd?hl=en-US"},{name:i18n("firefox"),desc:"firefox",url:vc?"https://addons.mozilla.org/zh-CN/firefox/addon/infinity-new-tab-pro-firefox":"https://addons.mozilla.org/en-GB/firefox/addon/infinity-new-tab"},...vc?[]:wc].map(e=>Object.assign(Object.assign({},e),{src:i(937)(`./${e.desc}.png`)}));let _c=class extends a.a{render(){const{webClickName:e}=s.settingStore;return n.e`
      <div class="wrapper" @click=${e=>e.stopPropagation()}>
        <div class="close-btn" @click=${()=>s.settingStore.toggleSettingHomeModal()}>
          <img src=${fc.a} />
        </div>
        <div class="bg">
          <img
            class="btn-setting-home"
            src=${Object(re.b)("https://infinityicon.infinitynewtab.com/assets/settinghome-guide-bg.png")}
          />
        </div>
        <div class="content">
          ${e?null:n.e`
                <div class="items">
                  ${i18n("set_infinity_to_homepage").split("_#_").filter(Boolean).map(e=>n.e` <p class="tips">${e}</p> `)}
                  <button class="setting-btn" @click=${this.handleSetting}>
                    <img
                      src="https://infinityicon.infinitynewtab.com/assets/btn-setting-home.png@2x.png"
                      width="16"
                      height="16"
                    />
                    ${i18n("set_to_homepage")}
                  </button>
                  <div class="hidden-option">
                    <div class="checkbox-div">
                      <input
                        type="checkbox"
                        id="checkbox"
                        @change=${this.handleChange}
                        .checked=${!s.settingStore.setting.view.isShowHomepageBtn}
                      />
                      <label for="checkbox"></label>
                    </div>
                    <div class="text" @click=${this.handleInpuClick}>${i18n("hide_set_homepage_btn")}</div>
                  </div>
                </div>
                <div class="spacer"></div>
              `}
          <div class="items">
            ${e?n.e`
                  <div>
                    ${i18n("set_homepage_title2").split("_#_").filter(Boolean).map(e=>n.e` <p class="tips">${e}</p> `)}
                  </div>
                `:n.e`
                  <div>
                    ${i18n("set_homepage_desc").split("_#_").filter(Boolean).map(e=>n.e` <p class="tips">${e}</p> `)}
                  </div>
                `}
            <div
              class=${Object(K.a)({browsers:!0,"m-40":e})}
            >
              ${xc.map(e=>n.e`
                  <div class="b-items" @click=${()=>this.handleClick(e.url)}>
                    <div>
                      <img .src=${e.src} />
                      ${"extfans"===e.desc&&vc?n.e`<img class="recommand" .src=${bc.a} />`:null}
                    </div>
                    <p>${e.name}</p>
                  </div>
                `)}
            </div>
          </div>
        </div>
      </div>
    `}handleSetting(){Object(L.c)(location.origin+"/sethome",{isNewTab:!0})}handleClick(e){Object(L.c)(e,{isNewTab:!0})}handleChange(e){s.settingStore.toggleShowSettingHome(e.target.checked)}handleInpuClick(){const e=this.inputEle.checked;this.inputEle.checked=!e,s.settingStore.toggleShowSettingHome(this.inputEle.checked)}};_c.styles=uc,yc([Object(n.h)("input")],_c.prototype,"inputEle",void 0),_c=yc([Object(n.c)("setting-guide")],_c);var Ac=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let Sc=class extends a.a{constructor(){super(...arguments),this.open=!0}firstUpdated(){document.body.addEventListener("click",()=>{s.settingStore.showSettingHomeModal&&s.settingStore.closeSettingHomeModal()})}render(){return n.e`
      <infinito-portal-entrance destination="setting-home-modal">
        <infinito-modal
          style="--modal-padding: 0; --border-radius: 40px;"
          .closeable=${!1}
          ?open=${s.settingStore.showSettingHomeModal}
          .onCancel=${()=>s.settingStore.toggleSettingHomeModal()}
        >
          <setting-guide slot="body"></setting-guide>
        </infinito-modal>
      </infinito-portal-entrance>
    `}};Ac([Object(n.g)({type:Boolean})],Sc.prototype,"open",void 0),Sc=Ac([Object(n.c)("setting-home")],Sc);var kc=n.b`.wrapper {
  position: relative;
  width: 560px;
  border-radius: 40px;
  overflow: hidden;
}
.wrapper .close-btn {
  position: absolute;
  display: flex;
  justify-content: center;
  align-items: center;
  width: 30px;
  height: 30px;
  top: 26px;
  right: 28px;
  cursor: pointer;
  transition: opacity 300ms;
}
.wrapper .close-btn:hover {
  opacity: 0.8;
}
.wrapper .close-btn img {
  width: 14px;
  height: 14px;
}
.bg {
  width: 100%;
  padding: 20px;
  box-sizing: border-box;
}
.bg img {
  display: block;
  width: 100%;
  height: 100%;
  border-radius: 20px;
}
.content {
  display: flex;
  width: 100%;
  box-sizing: border-box;
  min-height: 170px;
  padding: 0 20px 20px;
}
.items {
  box-sizing: border-box;
  flex: 1;
  display: flex;
  flex-flow: column;
  align-items: center;
  overflow: hidden;
}
.tips {
  width: 100%;
  margin: 0;
  font-size: 24px;
  font-family: PingFangSC-Semibold, PingFang SC;
  font-weight: 600;
  color: #333333;
  line-height: 33px;
  text-align: center;
  word-break: break-word;
}
.setting-btn {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 160px;
  height: 48px;
  margin-top: 22px;
  padding: 0 20px;
  background: #151515;
  border-radius: 24px;
  font-size: 16px;
  font-family: PingFangSC-Medium, PingFang SC;
  font-weight: 500;
  color: #FFFFFF;
  line-height: 22px;
  border: none;
  outline: none;
  cursor: pointer;
  transition: background 300ms;
  z-index: 1;
}
.setting-btn:hover {
  background: #2B2932;
}
.setting-btn:hover > img {
  transform: translateX(4px);
}
.setting-btn > img {
  display: block;
  width: 12px;
  height: 12px;
  margin-left: 16px;
  transition: transform 0.3s ease-out;
}
.img-box img {
  position: absolute;
}
.img-box .img-1 {
  width: 21px;
  height: 21px;
  top: 199px;
  left: 85px;
  animation: animationFramesTwo 15s linear infinite;
}
.img-box .img-2 {
  width: 31px;
  height: 32px;
  top: 198px;
  right: 159px;
  animation: animationFramesOne 20s linear infinite alternate;
}
.img-box .img-3 {
  width: 21px;
  height: 21px;
  bottom: 94px;
  right: 26px;
  animation: animationFramesOne 14s linear infinite alternate;
}
.img-box .img-4 {
  width: 35px;
  height: 35px;
  bottom: 10px;
  right: 203px;
  animation: animationFramesTwo 10s linear infinite;
}
.img-box .img-5 {
  width: 19px;
  height: 20px;
  bottom: 62px;
  left: 138px;
  animation: animationFramesOne 17s linear infinite;
}
.img-box .img-6 {
  width: 31px;
  height: 35px;
  bottom: 11px;
  left: 53px;
  animation: animationFramesTwo 17s linear infinite;
}
@keyframes animationFramesOne {
  0% {
    transform: translate(0) rotate(0deg);
  }
  20% {
    transform: translate(73px, -1px) rotate(36deg);
  }
  40% {
    transform: translate(141px, 72px) rotate(72deg);
  }
  60% {
    transform: translate(83px, 122px) rotate(108deg);
  }
  80% {
    transform: translate(-40px, 72px) rotate(144deg);
  }
  to {
    transform: translate(0) rotate(0deg);
  }
}
@keyframes animationFramesTwo {
  0% {
    transform: translate(0) rotate(0deg) scale(1);
  }
  20% {
    transform: translate(73px, -1px) rotate(36deg) scale(0.9);
  }
  40% {
    transform: translate(141px, 72px) rotate(72deg) scale(1);
  }
  60% {
    transform: translate(83px, 122px) rotate(108deg) scale(1.2);
  }
  80% {
    transform: translate(-40px, 72px) rotate(144deg) scale(1.1);
  }
  to {
    transform: translate(0) rotate(0deg) scale(1);
  }
}
`,Oc=i(805),Ic=i.n(Oc),$c=i(806),Ec=i.n($c),Cc=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};const Tc=[];for(let e=1;e<7;e++)Tc.push(i(943)(`./${e}.png`));let jc=class extends a.a{render(){return n.e`
      <div class="wrapper" @click=${e=>e.stopPropagation()}>
        <div class="close-btn" @click=${()=>s.userStore.toggleLoginTipModal()}>
          <img src=${Ic.a} />
        </div>
        <div class="bg">
          <img
            class="btn-setting-home"
            src=${Object(re.b)("https://infinityicon.infinitynewtab.com/assets/login-tips-bg.png")}
          />
        </div>
        <div class="content">
          <div class="items">
            <p class="tips">Hello!</p>
            <p class="tips">${i18n("you_need_login")}</p>
            <button class="setting-btn" @click=${this.handleSetting}>
              ${i18n("login_now_btn")}
              <img src=${Ec.a} width="16" height="16" />
            </button>
          </div>
        </div>
        <div class="img-box">${Tc.map((e,t)=>n.e` <img class="img-${t+1}" src=${e} /> `)}</div>
      </div>
    `}handleSetting(){s.userStore.toggleLoginTipModal(),s.userStore.openModal()}};jc.styles=kc,jc=Cc([Object(n.c)("login-tips-content")],jc);var Pc=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let Rc=class extends a.a{firstUpdated(){document.querySelector('infinito-portal-destination[name="login-tips"]').addEventListener("click",()=>{s.userStore.closeLoginTipModal()})}render(){return n.e`
      <infinito-portal-entrance destination="login-tips">
        <infinito-modal
          style="--modal-padding: 0; --border-radius: 40px;"
          .closeable=${!1}
          ?open=${s.userStore.showLoginTipModal}
          .onCancel=${()=>s.userStore.toggleLoginTipModal()}
        >
          <login-tips-content slot="body"></login-tips-content>
        </infinito-modal>
      </infinito-portal-entrance>
    `}};Rc=Pc([Object(n.c)("login-tips")],Rc);var Lc=function(e,t,i,o){var r,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};i.e(32).then(i.bind(null,978)),i.e(28).then(i.bind(null,976)),i.e(31).then(i.bind(null,979)),i.e(36).then(i.bind(null,980)),async function(){if(l.l&&chrome.runtime.onMessage.addListener(({key:e,data:t})=>{switch(e){case"gmail-number-updated":s.gmailStore.update(t);break;case"tabs-update-bookmarks":S.updateBookmarks();break;case"login":s.userStore.login3rdSuccess(t);break;case"cancelLogin":s.userStore.cancelLogin();break;case"open-todo":s.pluginStore.show("infinity://todos")}}),Yi.slave.listenMessage("tabs-time-to-switch-wallpaper",()=>s.wallpaperStore.timeToSwitchWallpaper()),Yi.slave.listenMessage("tabs-sync",s.syncTabsStore),Yi.slave.listenMessage("tabs-sync-status",s.syncStore.changeSyncStatus),Yi.slave.listenMessage("tabs-reload",()=>location.reload()),Yi.slave.listenMessage("websocket-sync",s.syncStore.getAutoLatest),l.s){await Yi.slave.postTask("slave:prefetch")&&await i.e(10).then(i.bind(null,977))}}();let Nc=class extends a.a{firstUpdated(){var e;(this.addEventListener("on-close",e=>{e.stopPropagation(),this.hide()}),this.initNeededDom(["side-profile","wallpaper"]),l.s)&&(R()(e=document.referrer).call(e,l.w)&&!sessionStorage.getItem("tutorial_reffer")&&s.pluginStore.show("side-tutorial"))}initNeededDom(e){requestIdleCallback(t=>{for(;t.timeRemaining()&&e.length>0;)s.pluginStore.initDom(e.pop());e.length>0&&this.initNeededDom(e)})}hide(){s.pluginStore.hideLast()}render(){const{pluginsTags:e,pluginViews:t}=s.pluginStore;return n.e`
      ${e["side-profile"]?n.e`
            <i-side2 ?show=${R()(t).call(t,"infinity://settings")||R()(t).call(t,"profile")}>
              <side-profile></side-profile>
            </i-side2>
          `:null}
      ${e["side-weather"]?n.e`
            <i-side2 ?show="${R()(t).call(t,"infinity://weather")}">
              <side-weather></side-weather>
            </i-side2>
          `:null}
      ${e["side-todos"]?n.e`
            <i-side2 ?show="${R()(t).call(t,"infinity://todos")}">
              <side-todos></side-todos>
            </i-side2>
          `:null}
      ${e["side-notes"]?n.e`
            <i-side2 .duration="${250}" style="--side-width:780px" ?show="${R()(t).call(t,"infinity://notes")}">
              <side-notes></side-notes>
            </i-side2>
          `:null}
      ${e["side-search"]?n.e`
            <i-side2 ?show=${R()(t).call(t,"search")}>
              <side-search></side-search>
            </i-side2>
          `:null}
      ${e["side-editicon"]||z.iconEditing?n.e`
            <i-side2 ?show="${R()(t).call(t,"editIcon")}">
              <side-editicon></side-editicon>
            </i-side2>
          `:null}
      ${l.l&&e["side-history"]?n.e`
            <i-side2 ?show="${R()(t).call(t,"infinity://history")}">
              <side-history></side-history>
            </i-side2>
          `:null}
      ${l.l&&e["side-bookmarks"]?n.e`
            <i-side2 ?show="${R()(t).call(t,"infinity://bookmarks")}">
              <side-bookmarks></side-bookmarks>
            </i-side2>
          `:null}
      ${l.l&&e["side-extension"]?n.e`
            <i-side2 ?show="${R()(t).call(t,"infinity://extension")}">
              <side-extension></side-extension>
            </i-side2>
          `:null}
      <!-- 切换壁纸弹窗 -> 非自动切换类型 -->
      ${e.wallpaper?n.e`<modal-wallpaper-default
            ?show=${R()(t).call(t,"infinity://wallpaper")}
          ></modal-wallpaper-default>`:null}
      ${l.l&&e["chrome-apps"]?n.e`<chrome-apps></chrome-apps>`:null}
      ${l.s?n.e`<setting-home></setting-home>`:null} ${l.s?n.e`<login-tips></login-tips>`:null}
      ${l.s&&e["side-tutorial"]?n.e`
            <i-side2 .maskClosable=${!1} ?show="${R()(t).call(t,"side-tutorial")}">
              <side-tutorial></side-tutorial>
            </i-side2>
          `:null}
    `}createRenderRoot(){return this}};Nc=Lc([Object(n.c)("plugin-box")],Nc);const Mc=()=>{const e=document.querySelector(".main-middle");e.classList.add("hide"),requestIdleCallback(()=>{document.querySelector(".wallpaper").classList.add("ready"),e.parentNode.removeChild(e)}),document.querySelector("newtab-main").classList.remove("hide-opacity")};let Dc=0;const Uc=()=>{Dc+=1,setTimeout(()=>{window.__INFINITY__.startAnimationEnd?Mc():Dc>20?(window.__INFINITY__.startAnimationEnd=!0,Mc()):Uc()},30)},Bc=async()=>{console.time("level1-main"),await new r.a(e=>{Object(x.c)(()=>{s.settingStore.firstSync&&s.siteStore.firstSync&&s.searchStore.firstSync&&setTimeout(e,0)}),document.oncontextmenu=function(e){const t=e.composedPath()[0];return!!c.a.isInputType(t)},document.body.addEventListener("dragstart",e=>{e.preventDefault()}),c.a.send({key:"bg-open-newtab"})}),Array.prototype.filter.call(document.body.children,e=>"SCRIPT"!==e.nodeName).forEach(e=>{e.addEventListener("wheel",e=>{e.ctrlKey&&e.preventDefault()})}),window.__INFINITY__.startAnimationEnd?Mc():Uc(),console.timeEnd("level1-main")},Fc=async()=>{window.__INFINITY__.maxLocalFileSize=5242880,window.__INFINITY__.xMaxLocalFileSize=10485760,window.__INFINITY__.minFileMaxWidthOrHeight=8192,console.time("level2-plugin"),await new r.a(e=>{setTimeout(()=>{e(null)},0)});const{createWorkBox:e}=await i.e(11).then(i.bind(null,753));await e(),console.timeEnd("level2-plugin")}}])]);