var isLessonlyExtension=-1!=chrome.runtime.getManifest().name.toLowerCase().indexOf("lessonly");chrome.runtime.getPlatformInfo(function(e){"mac"==e.os&&$(".mac-permission-gif").show()}),navigator.mediaDevices.enumerateDevices().then(function(e){console.log("device",e);var t=!1,o=!1;for(var i in e)"audioinput"==e[i].kind&&(t=!0),"videoinput"==e[i].kind&&(o=!0);o?$(".text-content").html(chrome.i18n.getMessage("allow_permission_to_record_webcam")):t?$(".text-content").html(chrome.i18n.getMessage("allow_permission_to_record_audio")):$(".text-content").html(chrome.i18n.getMessage("no_recording_devices")),isLessonlyExtension&&($(".text-content").addClass("lessonly-text-content font-proxima"),$(".transparent-bg").addClass("white-bg"),$(".logo-64, #hippoWizBackground").hide(),$(".button-toolbar").addClass("lessonly-button-bar"),$(".goi-it-btn").text(chrome.i18n.getMessage("ok_text")).addClass("font-proxima")),navigator.getUserMedia({audio:t,video:o},function(e){e.getTracks()[0]&&e.getTracks()[0].stop(),e.getTracks()[1]&&e.getTracks()[1].stop(),$(".goi-it-btn").show(),$(".text-content").html(isLessonlyExtension?"<div class='lessonly-all-set'>"+chrome.i18n.getMessage("all_set_letsgo")+"</div><div class='lessonly-second-line'>Return to Lessonly to begin your recording</div>":chrome.i18n.getMessage("all_set_letsgo")),$(".arrow-white").hide(),$(".mac-permission-gif").hide(),$(".goi-it-btn").click(function(){window.close()}),$(".extension-pin-dismiss").click(function(){$(".pin-ext-icon").hide()})},function(e){$(".arrow-white").hide(),$(".arrow-white-right").show(),o?$(".text-content").html(chrome.i18n.getMessage("you_have_disabled_webcam_mic_access")):$(".text-content").html(chrome.i18n.getMessage("you_have_disabled_microphone_access")),$(".goi-it-btn").show(),$(".goi-it-btn").click(function(){window.close()}),$(".extension-pin-dismiss").click(function(){$(".pin-ext-icon").hide()})})}).catch(function(e){});