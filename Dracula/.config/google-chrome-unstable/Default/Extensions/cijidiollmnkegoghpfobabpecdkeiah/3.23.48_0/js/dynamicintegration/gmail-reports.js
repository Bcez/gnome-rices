var injectedAlready=document.getElementById("hippovideo-gmail-reports-injected"),authRequested;if(!injectedAlready){var reportsScriptInjected='<input type=hidden id="hippovideo-gmail-reports-injected" value=true />';$(reportsScriptInjected).appendTo("body");var port;$(document).ready(function(){function e(){$(".G-atb").css("z-index",1)}function a(e){if(!document.getElementById("gmailStatsIconContainer").contains(e.target)){var a=document.getElementById("gmailReportsContainer");!a||i(a)||document.getElementById("gmailReportsContainer").contains(e.target)||s(),$("#gmailStatsIconContainer").css("background-color","#fff"),$("#gmailStatsIcon").attr("src",chrome.extension.getURL("/images/injected/reports-orange.svg")),$("#hvEmailReports").hide()}document.getElementById("hvVidCampReportsPop")&&!document.getElementById("hvVidCampReportsPop").contains(e.target)&&"campaignsReportHeading"!=e.target.id&&"campaign-heading-label"!=$(e.target).attr("class")&&($("#hvVidCampReportsPop").hide(),$("#gmailReportHeading").addClass("active"),$("#campaignsReportHeading").removeClass("active"))}function t(e){document.getElementById("vidCampReportsIcon").contains(e.target)||($("#vidCampReportsIcon").css("background-color","#fff"),$("#vidCampReportsIconImg").attr("src",chrome.extension.getURL("/images/injected/settings-orange.svg")),$("#hvEmailSettings").hide())}function i(e){return"none"==window.getComputedStyle(e).display}function s(){$("body").find(".aeH").show(),$("body").find(".AO").show(),$("#gmailReportsContainer").hide()}function o(){$("body").find(".aeH").hide(),$("body").find(".AO").hide(),$("#gmailReportsContainer").show()}function n(){0==$("#hvEmailSettings").length&&chrome.storage.sync.get(["placeIconInGmailToolbox"],function(e){var a=void 0!=e.placeIconInGmailToolbox&&e.placeIconInGmailToolbox,t=a?"checked":"";$("#vidCampReportsIcon").append('<div id="hvEmailSettings" class="hv-email-reports hv-email-settings"></div>'),$("#hvEmailSettings").append('<div class="heading">'+Q.gmailSettings+"</div>"),$("#hvEmailSettings").append('<div id="hvEmailSettingsWrap"></div>'),$("#hvEmailSettingsWrap").append('<div class="main-area"><div class="desc-switch-wrap"><h4 class="minimal-icon-description">Minimize buttons</h4><div class="integration-switch-wrapper"><input type="checkbox" id="compose-icon-switch" class="integration-switch"'+t+' /><label class="slider" for="compose-icon-switch"></label></div></div><div class="icon-switch-content">You can minimize the buttons to icons if you find them intrusive.</div></div>'),q($("#hvEmailSettings").find("#compose-icon-switch"),"click",function(e){d(e)})}),$("#hvEmailSettings").show()}function d(e){var a=$(e.currentTarget).is(":checked");chrome.storage.sync.set({placeIconInGmailToolbox:a}),z.port.postMessage({changeGmailIconSettings:!0,integType:"gmail",scriptName:z.scriptName,payload:{windowId:z.hvWindowId,tabId:z.hvTabId},data:{changeValue:a},messageFromContentScript1234:!0})}function l(e){0==$("#hvEmailReports").length&&($("#gmailStatsIconContainer").append('<div id="hvEmailReports" class="hv-email-reports"></div>'),$("#hvEmailReports").append('<div id="gmailReportHeading" class="heading active">'+Q.gmailReports+"</div>"),$("#hvEmailReports").append('<div id="campaignsReportHeading" class="heading campaign-report-heading"><span class="campaign-heading-label">'+ae.campaigns+'</span><span id="hvNoOfCampaignsCount" class="notification-count hide">0</span></div>'),$("#hvEmailReports").append('<div id="hvEmailReportsWrap"></div>'),$("#hvEmailReportsWrap").append('<div class="main-area"></div>'),$("#hvEmailReportsWrap").append('<div class="footer"><span id="hvViewDetailedReports">'+Q.viewDetailedReport+"</span></div>"),q($("#hvEmailReports").find("#hvViewDetailedReports"),"click",function(e){O(" Email Reports - View Detail Report Button Clicked"),$("#hvEmailReports").hide(),$("#gmailStatsIconWrapper").parent().css("background-color","#ffffff"),$("#gmailStatsIconWrapper").find("img").attr("src",chrome.extension.getURL("/images/injected/reports-orange.svg")),r()}),q($("#hvEmailReports").find(".campaign-report-heading"),"click",function(e){S()})),$("#hvEmailReports").find(".main-area").empty();var a;if(e.status){var t=e.response;0==t.no_of_mails_sent?p():($("#hvEmailReports").find(".footer").show(),a='<div class="hv-brief-gmail-report">                                    <div class="viewbox"><label class="count">'+t.no_of_mails_sent+'</label><label class="label">'+Q.videoEmailsSent+'</label></div>                                    <div class="viewbox"><label class="count">'+t.no_of_mails_opened+'</label><label class="label">'+Q.videoEmailsOpened+'</label></div>                                    <div class="viewbox"><label class="count">'+t.no_of_mails_watched_100+'</label><label class="label">'+Q.videoWatchedHundred+'</label></div>                                    <div class="viewbox"><label class="count">'+t.no_of_mails_watched_50+'</label><label class="label">'+Q.videoWatchedFifty+"</label></div>                                </div>",$("#hvEmailReports").find(".main-area").append($(a)))}else $("#hvEmailReports").find(".footer").hide(),a='<div class="error-msg">'+Q.errorMsg+"</div>",$("#hvEmailReports").find(".main-area").append($(a));$("#hvEmailReports").show()}function p(){$("#hvEmailReports").find(".footer").hide(),content='<div class="empty-brief-report">                           <div class="header">'+Q.noReportsAvailable+'</div>                           <div class="image"><img src="'+chrome.extension.getURL("/images/injected/reports-empty-icon-orange.svg")+'"></div>                           <div class="bottom">'+Q.noMailsSent+'</div>                           <div><button id="openComposeFromGmailReports" class="hippo-btn reports-open-compose-btn">'+Q.composeVideoEmailNow+"</button></div>                       </div>",$("#hvEmailReports").find(".main-area").append($(content)),q($("#openComposeFromGmailReports"),"click",function(e){e.stopPropagation(),z.port.postMessage({openGmailComposeBox:!0,messageFromContentScript1234:!0,messageType:"gmail",integType:"gmail",scriptName:z.scriptName,payload:{windowId:z.hvWindowId,tabId:z.hvTabId}}),$("#hvEmailReports").hide()})}function r(){0==$("#gmailReportsContainer").length?(v(),g(),h(),w(),c(),m(),_(),C()):(o(),c())}function c(e,a){var t="all",i="sent_time",s="last_seven_days";"unopened"==$("#gmailReportsFilter").val()?t="unopened":"all"!=$("#gmailReportsFilter").val()&&("recent"==$("#gmailReportsFilter").val()?i="watch_time":"watched"==$("#gmailReportsFilter").val()&&(i="watch_rate")),e&&a?(s="custom",e=P(new Date($("#gmailReportsFromDate").val())),a=P(new Date($("#gmailReportsToDate").val()))):s=$("#gmailReportsDateRange").val(),b(t,i,s,e,a)}function m(){$("#gmailReportsFilter").on("change",function(e){c()}),$("#gmailReportsDateRange").on("change",function(e){"custom"!=$("#gmailReportsDateRange").val()&&c()}),$("#gmailReportsFromDate").on("change",function(e){""!==$("#gmailReportsFromDate").val()&&($("#gmailReportsToDate").attr("min",P(new Date($("#gmailReportsFromDate").val()))),$("#gmailReportsToDate").attr("max",P(new Date)),c(!0,!0))}),$("#gmailReportsToDate").on("change",function(e){""!==$("#gmailReportsToDate").val()&&($("#gmailReportsFromDate").attr("max",P(new Date($("#gmailReportsToDate").val()))),c(!0,!0))})}function v(){var e=$("body").find(".aeH"),a=$("body").find(".AO"),t=$(e).width();0==t&&(t=$(a).width());var i=$(e).height()+$(a).height(),s=$(e).offset().top,o=$(e).offset().left;$(e).hide(),$(a).hide();var n={width:t+"px",height:i+"px",top:s+"px",left:o+"px",position:"absolute",white:"#fff"};$("body").append('<div id="gmailReportsContainer" class="gmail-reports-container"></div>'),$("#gmailReportsContainer").css(n)}function g(){var e='<div class="gmail-reports-header"><div class="gmail-reports-title">'+Q.reports+'</div><div class="gmail-reports-close-btn"><img id="gmailReportsCloseBtn" src="'+chrome.extension.getURL("/images/injected/close-gray.svg")+'" data-tooltip="'+Q.closeReports+'"></div></div>';$(e).appendTo($("#gmailReportsContainer")),q($("#gmailReportsCloseBtn"),"click",function(e){s()})}function h(){var e='<div class="gmail-reports-control-area" id="gmailReportsControlArea">                                 <div class="gmail-reports-filter"><select class="gmail-reports-select" id="gmailReportsFilter">                                      <option value="all" selected>'+Q.allVideoEmails+'</option>                                      <option value="recent">'+Q.recentVideoEmails+'</option>                                      <option value="unopened">'+Q.unOpenedVideoEmails+'</option>                                      <option value="watched">'+Q.watchReport+'</option>                                  </select></div>                                  <div>                                      <label class="filter-by-label">'+Q.filterBy+'</label>                                      <select class="gmail-reports-select gmail-reports-date-range" id="gmailReportsDateRange">                                          <option value="this_week">'+Q.thisWeek+'</option>                                          <option value="yesterday">'+Q.yesterday+'</option>                                          <option value="today">'+Q.today+'</option>                                          <option value="last_week">'+Q.lastWeek+'</option>                                          <option value="last_seven_days" selected>'+Q.lastSevenDays+'</option>                                          <option value="this_month">'+Q.thisMonth+'</option>                                          <option value="last_month">'+Q.lastMonth+'</option>                                          <option value="custom">'+Q.customDateRange+'</option>                                      </select>                                      <label class="from-label">'+Q.from+'</label>                                      <input id="gmailReportsFromDate" class="gmail-reports-date" type="date">                                      <label class="to-label">'+Q.to+'</label>                                      <input id="gmailReportsToDate" class="gmail-reports-date" type="date">                                  </div>                              </div>';$(e).appendTo($("#gmailReportsContainer")),$("#gmailReportsFromDate").attr("max",P(new Date)),$("#gmailReportsFrgmailReportsToDateomDate").attr("max",P(new Date))}function w(){var e='<div id="gmailReportViewBoxes" class="gmail-reports-viewbox-container">                                <div class="viewbox"><label id="mailSendCount" class="count">0</label><label class="label">'+Q.videoEmailsSent.toUpperCase()+'</label></div>                                <div class="viewbox"><label id="mailOpenCount" class="count">0</label><label class="label">'+Q.videoEmailsOpened.toUpperCase()+'</label></div>                                <div class="viewbox"><label id="vidWatch100" class="count">0</label><label class="label">'+Q.videoWatchedHundred.toUpperCase()+'</label></div>                                <div class="viewbox"><label id="vidWatch50" class="count">0</label><label class="label">'+Q.videoWatchedFifty.toUpperCase()+'</label></div>                                <div class="viewbox"><label id="vidWatch25" class="count">0</label><label class="label">'+Q.videoWatchedTwentyFive.toUpperCase()+"</label></div>                             </div>";$(e).appendTo($("#gmailReportsContainer"))}function b(e,a,t,i,s){z.port.postMessage({requestGmailReports:!0,data:{filter:e,sort_by:a,date_range:t,start_date:i,end_date:s},messageFromContentScript1234:!0,messageType:"gmail",integType:"gmail",scriptName:z.scriptName,payload:{windowId:z.hvWindowId,tabId:z.hvTabId}})}function R(e){$(".rep-sub-lab").off("click"),$(".reports-mail-reply").off("click"),$("#gmailReportsTableContainer").remove(),x(),f(),V();var a=e.inputData;if(e.status){var t=e.response;M(t);var i=!1,s=!0;if(0==t.no_of_mails_sent&&(t.has_sent_mail?(E(),y(Q.noReportsAvailable),s=!1):(t=T(),i=!0)),s||i){var o='<div id="gmailReportsTableContainer" class="gmail-reports-table-container">                                        <table class="grtc-table" id="gmailReportsTable">                                            <tr class="grtc-tr">                                                <td class="grtc-td">'+Q.recipient+'</td>                                                <td class="grtc-td">'+Q.subject+'</td>                                                <td class="grtc-td">'+Q.sentTime+'</td>                                                <td class="grtc-td">'+Q.openTime+'</td>                                                <td class="grtc-td">'+Q.lastWatched+'</td>                                                <td class="grtc-td">'+Q.watched+'</td>                                                <td class="grtc-td">'+Q.watchedPerc+"</td>                                            </tr>                                        </table>                                      </div>";$(o).appendTo($("#gmailReportsContainer")),I(t.mails),i&&u()}}else y(Q.wentWrong);$("#gmailReportsFilter").attr("filter",a.filter),$("#gmailReportsDateRange").attr("sort-by",a.sort_by),$("#gmailReportsFromDate").attr("start-date",a.start_date),$("#gmailReportsToDate").attr("end-date",a.end_date)}function _(){var e=$("#gmailReportsContainer").width(),a=$("#gmailReportsContainer").height()-51,t='<div id="gmailReportsOverlay" class="gmail-reports-overlay">                           <div class="no-reports-available">'+Q.noReportsAvailable+'</div>                           <div class="no-reports-image"><img src="'+chrome.extension.getURL("/images/injected/reports-empty-icon-blue.svg")+'"></div>                           <div class="no-reports-description">'+Q.noReportsDescription+'</div>                           <div><button id="openVideoEmailComposeBtn" class="hippo-btn reports-open-compose-btn">'+Q.composeVideoEmailNow+"</button></div>                           </div>";$(t).appendTo($("#gmailReportsContainer"));var i={width:e+"px",height:a+"px"};$("#gmailReportsOverlay").css(i),f(),q($("#openVideoEmailComposeBtn"),"click",function(e){z.port.postMessage({openGmailComposeBox:!0,messageFromContentScript1234:!0,messageType:"gmail",integType:"gmail",scriptName:z.scriptName,payload:{windowId:z.hvWindowId,tabId:z.hvTabId}}),s()})}function u(){$("#gmailReportsOverlay").show()}function f(){$("#gmailReportsOverlay").hide()}function C(){var e='<div id="gmailReportsMsgArea" class="gmail-reports-msg-area">                           <div class="no-reports-available" id="gmailReportsMsgAreaText">'+Q.noReportsAvailable+'</div>                           <div class="no-reports-image"><img src="'+chrome.extension.getURL("/images/injected/reports-empty-icon-orange.svg")+'"></div>                           <div class="no-reports-description">'+Q.noReportsNormalCase+"</div>                           </div>";$(e).appendTo($("#gmailReportsContainer")),V()}function y(e){$("#gmailReportsMsgArea").show(),$("#gmailReportsMsgAreaText").text(e)}function V(){$("#gmailReportsMsgArea").hide()}function x(){$("#gmailReportViewBoxes").show()}function E(){$("#gmailReportViewBoxes").hide()}function T(){return{no_of_mails_sent:15,no_of_mails_opened:12,no_of_mails_watched_100:5,no_of_mails_watched_50:3,no_of_mails_watched_25:3,has_sent_mail:!0,mails:[{thread_id:"thread-a:r4369230703718333855",msg_id:"msg-a:r-4390586676214926105",legacy_thread_id:"165d6b710456f25e",mail_opened:!0,mail_opened_time:"2018-09-14T06:15:20.259Z",subject:"How Hippo Video Works",to:"mariappans@hippovideo.io",sent_time:"2018-09-14T06:14:24.421Z",assets:{914:{watched_perc:100,watched_100:1,watched_50:0,watched_25:0,no_of_times_watched:1,no_of_times_viewed:1,last_watched_time:"2018-09-14T06:32:50.468Z"}}},{thread_id:"thread-a:r-6372368575295948646",msg_id:"msg-a:r-435792851825240757",legacy_thread_id:"165d5f0500d49618",mail_opened:!0,mail_opened_time:"2018-09-15T02:37:08.636Z",subject:"How Hippo Video Gmail add on works",to:"support@hippovideo.io",sent_time:"2018-09-14T02:37:08.636Z",assets:{903:{watched_perc:75,watched_100:0,watched_50:1,watched_25:1,no_of_times_watched:2,no_of_times_viewed:4,last_watched_time:"2018-09-15T06:32:50.468Z"}}}],start_date:"Mon, 10 Sep 2018 13:35:22 -0000",end_date:"Mon, 17 Sep 2018 13:35:22 -0000"}}function I(e){for(var a=0;a<e.length;a++){var t=e[a];for(var i in t.assets){var o='<tr class="grtc-tr">';o+='<td class="grtc-td" data-tooltip-delay="2000" data-tooltip="'+t.to+'">'+t.to+'</td><td class="grtc-td rep-sub-lab"  thread-id="'+t.thread_id+'"  legacy-thread-id="'+t.legacy_thread_id+'" data-tooltip="'+t.subject+'" data-tooltip-delay="1000">'+t.subject+'</td><td class="grtc-td" data-tooltip="'+Q.mailSentAt+" "+D(t.sent_time)+'" data-tooltip-delay="2000">'+D(t.sent_time)+"</td>",t.mail_opened?o+='<td class="grtc-td" data-tooltip="'+Q.mailOpenedAt+" "+D(t.mail_opened_time)+'" data-tooltip-delay="2000">'+D(t.mail_opened_time)+"</td>":o+='<td class="grtc-td" data-tooltip="'+Q.mailNotYetOpened+'" data-tooltip-delay="2000">-</td>';var n=t.assets[i];0==n.no_of_times_watched?o+='<td class="grtc-td" data-tooltip="'+Q.videoNotYetWatched+'" data-tooltip-delay="2000">-</td><td class="grtc-td" data-tooltip="'+Q.videoNotYetWatched+'" data-tooltip-delay="2000">-</td>':(n.last_watched_time?o+='<td class="grtc-td" data-tooltip="'+Q.videoRecentlyWatchedAt+" "+D(n.last_watched_time)+'" data-tooltip-delay="2000">'+D(n.last_watched_time)+"</td>":o+='<td class="grtc-td" data-tooltip="'+Q.videoNotYetWatched+'" data-tooltip-delay="2000">-</td>',1==n.no_of_times_watched?o+='<td class="grtc-td" data-tooltip="'+Q.videoWatched+" "+n.no_of_times_watched+" "+Q.time+'" data-tooltip-delay="2000">'+n.no_of_times_watched+" "+Q.time+"</td>":o+='<td class="grtc-td" data-tooltip="'+Q.videoWatched+" "+n.no_of_times_watched+" "+Q.times+'" data-tooltip-delay="2000">'+n.no_of_times_watched+" "+Q.times+"</td>"),0==n.watched_perc?o+='<td class="grtc-td" data-tooltip="'+Q.videoNotYetWatched+'" data-tooltip-delay="2000">-':o+='<td class="grtc-td" data-tooltip="'+Q.watched_sc+" "+n.watched_perc+"% "+Q.ofTheVideo+'" data-tooltip-delay="2000">'+n.watched_perc+"%",o+='<div data-tooltip="'+Q.openReply+'" data-tooltip-delay="500" class="reports-mail-reply" thread-id="'+t.thread_id+'" legacy-thread-id="'+t.legacy_thread_id+'"><img src="'+chrome.extension.getURL("/images/injected/reports-reply-icon.png")+'"><label>Reply</label></div></td></tr>',$(o).appendTo($("#gmailReportsTable"))}}$(".rep-sub-lab").on("click",function(e){var a=$(e.target).attr("thread-id"),t=$(e.target).attr("legacy-thread-id"),i="null"==a?t:a;window.location.href="https://mail.google.com/mail/u/0/#sent/"+i,s()}),$(".reports-mail-reply").on("click",function(e){var a=e.target;"LABEL"!=a.tagName&&"IMG"!=a.tagName||(a=$(a).parent());var t=$(a).attr("thread-id"),i=$(e.target).attr("legacy-thread-id"),o="null"==t?i:t;window.location.href="https://mail.google.com/mail/u/0/#sent/"+o,s(),setTimeout(function(){$(".nr.wR").find(".ams.bkH").click()},2e3)})}function M(e){$("#mailSendCount").text(e.no_of_mails_sent),$("#mailOpenCount").text(e.no_of_mails_opened),$("#vidWatch100").text(e.no_of_mails_watched_100),$("#vidWatch50").text(e.no_of_mails_watched_50),$("#vidWatch25").text(e.no_of_mails_watched_25);var a=new Date(e.start_date+" UTC"),t=new Date(e.end_date+" UTC");$("#gmailReportsFromDate").val(P(a)),$("#gmailReportsToDate").val(P(t))}function P(e){var a=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,t=e.getDate()<10?"0"+e.getDate():e.getDate();return e.getFullYear()+"-"+a+"-"+t}function D(e){var a=new Date(e),t=a.getDate()<10?"0"+a.getDate():a.getDate(),i=a.getHours()<10?"0"+a.getHours():a.getHours(),s=a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes();return X[a.getMonth()]+" "+t+", "+i+":"+s}function S(e){0==ee.length?z.port.postMessage({requestCampaignsList:!0,messageFromContentScript1234:!0,messageType:"gmail",integType:"gmail",scriptName:z.scriptName,payload:{windowId:z.hvWindowId,tabId:z.hvTabId},data:{time_zone:Intl.DateTimeFormat().resolvedOptions().timeZone,page:e}}):($("#hvEmailReports").hide(),$("#hvVidCampReportsPop").show(),$("#gmailReportHeading").removeClass("active"),$("#campaignsReportHeading").addClass("active"))}function W(e){if(0==$("#hvVidCampReportsPop").length?($("#hvEmailReports").append($(te.hvVidCampReportsPop)),$("#hvVidCampReportsPop").append($(te.hvVidCampReportsPopCampListView)),$("#hvCampaignsListView").append($(te.hvVidCampReportsPopErrorCase)),$("#hvCampaignsListView").append($(te.hvVidCampReportsPopCampaignsList))):$("#hvVidCampReportsPop").show(),$("#gmailReportHeading").removeClass("active"),$("#campaignsReportHeading").addClass("active"),e.status){var a=e.response;0==a.current_page&&0==a.no_of_campaigns?A():($("#hvVidCampReportsPopErrorMsg").hide(),$("#hvVidCampReportsPopEmptyMsg").hide(),N(a),L(a))}else $("#hvVidCampReportsPopEmptyMsg").hide(),$("#hvVidCampReportsPopCampaignsList").hide(),$("#hvVidCampReportsPopErrorMsg").css("display","flex")}function A(){0==$("#hvVidCampReportsPopEmptyMsg").length&&($("#hvCampaignsListView").append($(te.hvVidCampReportsPopEmptyCase)),q($("#openVideoCampaignFromReports"),"click",function(e){$("#hvVidCampReportsPop").hide(),$("#gmailReportHeading").addClass("active"),$("#campaignsReportHeading").removeClass("active"),$("#hvSendVidCampBtnContainer").mouseup()})),$("#hvVidCampReportsPopErrorMsg").hide(),$("#hvVidCampReportsPopCampaignsList").hide(),$("#hvVidCampReportsPopEmptyMsg").css("display","flex")}function N(e){0==e.current_page&&$("#hvVidCampReportsPopCampaignsList").empty(),$("#hvVidCampReportsPopCampaignsList").show(),e.next_page?(0==$("#hvVidCampReportsPopViewMoreCamp").length&&($("#hvVidCampReportsPopCampaignsList").append($(te.hvVidCampReportsPopViewMoreCamp)),q($("#hvVidCampReportsPopViewMoreCamp"),"click",function(e){S($(e.currentTarget).attr("next-page-id"))})),$("#hvVidCampReportsPopViewMoreCamp").attr("next-page-id",e.next_page)):$("#hvVidCampReportsPopViewMoreCamp").hide(),$("#hvNoOfCampaignsCount").text(e.no_of_campaigns),$("#hvNoOfCampaignsCount").removeClass("hide")}function L(e){for(var a=e.list,t=0;t<a.length;t++){var i=a[t],s=i.id;if(0==$("#hv-campaign-"+s).length){var o=i.is_parent?"P":"C",n=i.is_parent?"parent-campaign":"child-campaign",d='<div id="hv-campaign-'+s+'" campaign-id="'+s+'" class="campaign-list-item">'+te.hvVidCampReportsPopCampListItem+"</div>";e.next_page?$(d).insertBefore($("#hvVidCampReportsPopViewMoreCamp")):$("#hvVidCampReportsPopCampaignsList").append($(d)),$("#hv-campaign-"+s).find(".campaign-type-span").text(o).addClass(n),$("#hv-campaign-"+s).find(".title").text(i.name).attr("title",i.name),$("#hv-campaign-"+s).find(".created-at").text(i.time),$("#hv-campaign-"+s).find(".sent-board").find(".count").text(i.mails_sent),$("#hv-campaign-"+s).find(".opened-board").find(".count").text(i.mails_opened)}}q($("#hvVidCampReportsPopCampaignsList").find(".campaign-list-item"),"click",function(e){k($(e.currentTarget).attr("campaign-id"),$(e.currentTarget).find(".title").text(),$(e.currentTarget).find(".campaign-type-span").hasClass("parent-campaign"))})}function k(e,a,t){if(0==ee.length)$("#hvCampaignsListView").hide("slide",{direction:"left"},100);else{var i=ee[ee.length-1];$("#"+i.id).hide("slide",{direction:"left"},100)}z.port.postMessage({requestCampaignSpecificReport:!0,data:{params:{time_zone:Intl.DateTimeFormat().resolvedOptions().timeZone,campaign_id:e},campaign_name:a,is_parent_campaign:t},messageFromContentScript1234:!0,messageType:"gmail",integType:"gmail",scriptName:z.scriptName,payload:{windowId:z.hvWindowId,tabId:z.hvTabId}})}function F(e){var a=ee.length,t=e.campaign_id,i="hvCampReportView-"+a+"-"+t;U(e,i),e.status?j(e.response.report,i):$("#"+i).append($(te.errorDiv))}function U(e,a){var t=e.is_parent_campaign?"P":"C",i=e.is_parent_campaign?"parent-campaign":"child-campaign";$("#hvVidCampReportsPop").append($(te.hvVidCampReportsPopReportView)),$("#hvVidCampReportsPopReportView").attr("id",a),ee.push({id:a,data:e}),$("#"+a).append(te.hvVidCampReportsPopReportViewHeader),$("#"+a).find(".head-card .title").text(e.campaign_name),$("#"+a).find(".head-card .campaign-type-span").text(t).addClass(i),H()}function j(e,a){$("#"+a).append($(te.hvVidCampReportsPopReportViewMainArea)),$("#"+a).append($(te.hvVidCampReportsPopChildCampaignView)),$("#"+a+" .child-campaign-view .close-btn span").on("click",function(e){B(e)}),$("#"+a+" .main-area .title-card .thumbnail img").attr("src",e.thumbnail),$("#"+a+" .main-area .title-card .video-title-panel .video-title").text(e.video_title),$("#"+a+" .main-area .title-card .video-title-panel .created-time").text(e.time),$("#"+a+" .main-area .title-card .video-title-panel .action-panel .sent label").text(ae.sent+(e.mails_sent?e.mails_sent:0)),e.mails_opened&&0!=e.mails_opened||(e.mails_opened=0,$("#"+a+" .main-area .title-card .video-title-panel .action-panel .opened div").hide()),$("#"+a+" .main-area .title-card .video-title-panel .action-panel .opened label").text(ae.opened+e.mails_opened),$("#"+a+" .main-area .stat-card .stat-container .watch_100 .stat .count").text(e.watched_100?e.watched_100:0),$("#"+a+" .main-area .stat-card .stat-container .watch_75_100 .stat .count").text(e.watched_75_100?e.watched_75_100:0),$("#"+a+" .main-area .stat-card .stat-container .watch_50_75 .stat .count").text(e.watched_50_75?e.watched_50_75:0),$("#"+a+" .main-area .stat-card .stat-container .watch_25_50 .stat .count").text(e.watched_25_50?e.watched_25_50:0),$("#"+a+" .main-area .stat-card .stat-container .watch_0_25 .stat .count").text(e.watched_0_25?e.watched_0_25:0),$("#"+a+" .main-area .stat-card .stat-container .unseen .stat .count").text(e.mails_unseen?e.mails_unseen:0),$("#"+a).append($(te.hvVidCampReportsPopViewDetailReport))}function B(e){screen=ee[ee.length-1],$("#"+screen.id).find(".child-campaign-view").hide("slide",{direction:"down"},400)}function H(){$(".hv-video-campaigns-go-back-btn").off("click").on("click",function(e){e.stopPropagation();var a=ee[ee.length-1];if($("#"+a.id).remove(),ee.pop(),0==ee.length)$("#hvCampaignsListView").show("slide",{direction:"left"},100);else{var t=ee[ee.length-1];$("#"+t.id).show("slide",{direction:"left"},100)}})}function O(e){z.port.postMessage({trackDynamicIntegActivity:!0,integType:"gmail",scriptName:z.scriptName,actionName:e,payload:{tabId:z.hvTabId,windowId:z.hvWindowId},messageFromContentScript1234:!0})}function G(){Y(J.refreshPage,!0,J.refresh)}function Y(e,a,t,i){var s=$(K.gmailAlertMsgEle);$(s).find(".bAq").text(e),$(s).find("#hvGmailAlertActionBtn").text(t),$(s).find("#hvGmailAlertActionBtn").attr("is-refresh",a),$(s).find("#hvGmailAlertActionBtn").attr("link-url",i),$(".b8.UC .vh").empty().append($(s)),$(".b8.UC").addClass("bAp"),setTimeout(function(e){$(".b8.UC").removeClass("bAp")},1e4),$("#hvGmailAlertActionBtn").off("click").on("click",function(e){if("true"==$("#hvGmailAlertActionBtn").attr("is-refresh"))window.location.reload();else{var a=$("#hvGmailAlertActionBtn").attr("link-url");a&&window.open(a)}})}function Z(e){"Extension context invalidated."==e.message?G():console.log(e)}function q(e,a,t){$(e).off(a).on(a,function(e){try{t(e)}catch(e){Z(e)}})}var z=function(){var e={hvTabId:void 0,hvWindowId:void 0},a=document.getElementById("hvTabId"),t=document.getElementById("hvWindowId");return a&&a.getAttribute("value")&&(e.hvTabId=a.getAttribute("value")),t&&t.getAttribute("value")&&(e.hvWindowId=t.getAttribute("value")),e}();z.scriptName="gmail-reports",z.port=chrome.extension.connect({name:"gmail-reports:"+z.hvWindowId+":"+z.hvTabId});var J={refreshPage:"We've released cool new updates. Please reload the page to view them.",refresh:"REFRESH"},K={gmailAlertMsgEle:'<span class="aT"><span class="bAq"></span><span class="bAo">&nbsp;&nbsp;<span class="ag a8k" id="hvGmailAlertActionBtn" tabindex="0" role="link"></span></span></span>'},Q={reports:"Video Email Reports",allVideoEmails:"All Video Emails",recentVideoEmails:"Recently Watched Video Emails",unOpenedVideoEmails:"Unopened Video Emails",watchReport:"Watch Report",filterBy:"Filter by",yesterday:"Yesterday",today:"Today",thisWeek:"This Week",lastWeek:"Last Week",lastSevenDays:"Last 7 days",thisMonth:"This Month",lastMonth:"Last Month",customDateRange:"Custom",from:"From",to:"To",videoEmailsSent:"Video emails sent",videoEmailsOpened:"Video emails opened",videoWatchedHundred:"Video watched 100%",videoWatchedFifty:"Video watched 50%",videoWatchedTwentyFive:"Video watched 25%",recipient:"RECIPIENT",subject:"SUBJECT",sentTime:"SENT",openTime:"OPENED",lastWatched:"LAST WATCHED",watched:"WATCHED",watchedPerc:"WATCHED %",time:"time",times:"times",closeReports:"Close Reports",mailSentAt:"Mail sent at",mailOpenedAt:"Mail opened at",mailNotYetOpened:"Mail not yet opened",videoNotYetWatched:"Video not yet watched",videoRecentlyWatchedAt:"Video recently watched at",videoWatched:"Video watched",openReply:"Open Reply",watched_sc:"Watched",ofTheVideo:"of the video",noReportsAvailable:"No Reports Available!",wentWrong:"Sorry, something went wrong",noReportsDescription:"You have not sent any video emails yet. Send a video email to get these reports.",composeVideoEmailNow:"Compose Video Email Now",noReportsNormalCase:"No video emails have been sent during the date range selected. Modify the date range to check the Reports.",gmailReports:"Gmail Reports",gmailSettings:"Settings",viewDetailedReport:"View detailed report",noMailsSent:"No video emails has been sent.",errorMsg:"Sorry, something went wrong"},X=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];z.port.onMessage.addListener(function(a,t,s){var o=a.data?a.data.payload||{}:{};if(o&&o.windowId==z.hvWindowId&&o.tabId==z.hvTabId){if("showGmailReports"==a.backgroundRecordingMessage){var d=document.getElementById("gmailReportsContainer"),p=document.getElementById("hvEmailReports");d&&!i(d)||p&&!i(p)||z.port.postMessage({requestBriefGmailReports:!0,messageType:"gmail",integType:"gmail",scriptName:z.scriptName,payload:{windowId:z.hvWindowId,tabId:z.hvTabId},messageFromContentScript1234:!0})}"gmailReportsResponse"==a.backgroundRecordingMessage&&(e(),R(a.data)),"briefGmailReportsResponse"==a.backgroundRecordingMessage&&(e(),l(a.data)),"showCampaignReports"==a.backgroundRecordingMessage&&(e(),n()),"campaignsListResponse"==a.backgroundRecordingMessage&&(e(),W(a.data)),"campaignSpecificReportResponse"==a.backgroundRecordingMessage&&(e(),F(a.data))}}),window.addEventListener("click",function(e){try{a(e),t(e)}catch(e){}}),window.addEventListener("mouseup",function(e){try{a(e),t(e)}catch(e){}});var ee=[],ae={campaigns:"Campaign Reports",errorMsg:"Sorry, something went wrong.",noReportsAvailable:"No reports available!",noReportsDescription:"No video campaigns has been sent.",sendVideoCampaignNow:"SEND VIDEO CAMPAIGN NOW",viewMore:"View More",sent:"Sent: ",opened:"Opened: ",watchRate:"Watch rate: ",watch_100:"100%",watch_75_100:"75-100%",watch_50_75:"50-75%",watch_25_50:"25-50%",watch_0_25:"0-25%",unseen:"Unseen",viewDetailedReport:"View detailed report",sendNewCampaign:"Send new campaign",campaignsSent:"Campaigns sent",close:"Close",emptyChildCampaign:"No campaigns has been sent from this group."},te={hvVidCampReportsPop:'<div id="hvVidCampReportsPop" class="hv-vid-camp-reports-pop"></div>',hvVidCampReportsPopHeading:'<div class="heading">                                            <label>'+ae.campaigns+'</label>                                            <span id="hvNoOfCampaignsCount">0</span>                                         </div>',hvVidCampReportsPopErrorCase:'<div id="hvVidCampReportsPopErrorMsg" class="error-msg">'+ae.errorMsg+"</div>",
hvVidCampReportsPopEmptyCase:'<div id="hvVidCampReportsPopEmptyMsg" class="empty-report">                                               <div class="header">'+ae.noReportsAvailable+'</div>                                               <div class="image"><img src="'+chrome.extension.getURL("/images/injected/reports-empty-icon-blue.svg")+'"></div>                                               <div class="bottom">'+ae.noReportsDescription+'</div>                                               <div><button id="openVideoCampaignFromReports" class="hippo-btn reports-open-compose-btn">'+ae.sendVideoCampaignNow+"</button></div>                                            </div>",hvVidCampReportsPopCampaignsList:'<div id="hvVidCampReportsPopCampaignsList" class="campaign-list"></div>',hvVidCampReportsPopViewMoreCamp:'<div id="hvVidCampReportsPopViewMoreCamp" class="view-more-campaigns" next-page-id="0"><span id="hvVidCampReportsPopViewMoreCampBtn">'+ae.viewMore+"</span></div>",hvVidCampReportsPopCampListItem:'<div class="campaign-type"><span class="campaign-type-span"></span></div>                                              <div class="title-board"><div class="title"></div><div class="created-at"></div></div>                                              <div class="stat-board sent-board"><div class="count"></div><img src="'+chrome.extension.getURL("/images/injected/mail-sent.svg")+'"></div>                                              <div class="stat-board opened-board"><div class="count"></div><img src="'+chrome.extension.getURL("/images/injected/mail-opened.svg")+'"></div>',hvVidCampReportsPopCampListView:'<div id="hvCampaignsListView" class="hv-campaign-list-view"></div>',hvVidCampReportsPopReportView:'<div id="hvVidCampReportsPopReportView" class="hv-camp-report-view"></div>',hvVidCampReportsPopReportViewHeader:'<div class="head-card">                                                    <div class="hv-video-campaigns-go-back-btn"><img src="'+chrome.extension.getURL("/images/injected/go-back-icon.svg")+'"></div>                                                    <label class="title"></label>                                                    <span class="campaign-type-span"></span>                                                  </div>',errorDiv:'<div class="hv-camp-error-msg">'+ae.errorMsg+"</div>",hvVidCampReportsPopReportViewMainArea:'<div class="main-area">                                                      <div class="title-card">                                                        <div class="thumbnail"><img></div>                                                        <div class="video-title-panel">                                                            <div class="video-title"></div>                                                            <div class="created-time"></div>                                                            <div class="action-panel">                                                                <div class="sent wrapper"><label></label></div>                                                                <div class="opened wrapper padding"><label></label></div>                                                            </div>                                                        </div>                                                      </div>                                                      <div class="stat-card">                                                        <label class="label">'+ae.watchRate+'</label>                                                        <div class="stat-container">                                                            <div class="stat-box watch_100">                                                                <div class="stat flex-display"><div class="count"></div><div class="label">'+ae.watch_100+'</div></div>                                                                <div class="actions">                                                                    <div class="stat-box-action hv-send-new-campaign top" trigger-type="watch_100"><div class="image"><img src="'+chrome.extension.getURL("/images/injected/add-icon.svg")+'"></div><label>'+ae.sendNewCampaign+'</label></div>                                                                    <div class="border"></div>                                                                    <div class="stat-box-action hv-view-sent-campaign bottom" trigger-type="watch_100"><div class="image"><img src="'+chrome.extension.getURL("/images/injected/mail-sent.svg")+'"></div><label>'+ae.campaignsSent+'</label></div>                                                                </div>                                                            </div>                                                            <div class="stat-box watch_75_100">                                                                <div class="stat flex-display"><div class="count"></div><div class="label">'+ae.watch_75_100+'</div></div>                                                                <div class="actions">                                                                    <div class="stat-box-action hv-send-new-campaign top" trigger-type="watch_75_100"><div class="image"><img src="'+chrome.extension.getURL("/images/injected/add-icon.svg")+'"></div><label>'+ae.sendNewCampaign+'</label></div>                                                                    <div class="border"></div>                                                                    <div class="stat-box-action hv-view-sent-campaign bottom" trigger-type="watch_75_100"><div class="image"><img src="'+chrome.extension.getURL("/images/injected/mail-sent.svg")+'"></div><label>'+ae.campaignsSent+'</label></div>                                                                </div>                                                            </div>                                                            <div class="stat-box watch_50_75">                                                                <div class="stat flex-display"><div class="count"></div><div class="label">'+ae.watch_50_75+'</div></div>                                                                <div class="actions">                                                                    <div class="stat-box-action hv-send-new-campaign top" trigger-type="watch_50_75"><div class="image"><img src="'+chrome.extension.getURL("/images/injected/add-icon.svg")+'"></div><label>'+ae.sendNewCampaign+'</label></div>                                                                    <div class="border"></div>                                                                    <div class="stat-box-action hv-view-sent-campaign bottom" trigger-type="watch_50_75"><div class="image"><img src="'+chrome.extension.getURL("/images/injected/mail-sent.svg")+'"></div><label>'+ae.campaignsSent+'</label></div>                                                                </div>                                                            </div>                                                            <div class="stat-box watch_25_50">                                                                <div class="stat flex-display"><div class="count"></div><div class="label">'+ae.watch_25_50+'</div></div>                                                                <div class="actions">                                                                    <div class="stat-box-action hv-send-new-campaign top" trigger-type="watch_25_50"><div class="image"><img src="'+chrome.extension.getURL("/images/injected/add-icon.svg")+'"></div><label>'+ae.sendNewCampaign+'</label></div>                                                                    <div class="border"></div>                                                                    <div class="stat-box-action hv-view-sent-campaign bottom" trigger-type="watch_25_50"><div class="image"><img src="'+chrome.extension.getURL("/images/injected/mail-sent.svg")+'"></div><label>'+ae.campaignsSent+'</label></div>                                                                </div>                                                            </div>                                                            <div class="stat-box watch_0_25">                                                                <div class="stat flex-display"><div class="count"></div><div class="label">'+ae.watch_0_25+'</div></div>                                                                <div class="actions">                                                                    <div class="stat-box-action hv-send-new-campaign top" trigger-type="watch_0_25"><div class="image"><img src="'+chrome.extension.getURL("/images/injected/add-icon.svg")+'"></div><label>'+ae.sendNewCampaign+'</label></div>                                                                    <div class="border"></div>                                                                    <div class="stat-box-action hv-view-sent-campaign bottom" trigger-type="watch_0_25"><div class="image"><img src="'+chrome.extension.getURL("/images/injected/mail-sent.svg")+'"></div><label>'+ae.campaignsSent+'</label></div>                                                                </div>                                                            </div>                                                            <div class="stat-box unseen">                                                                <div class="stat flex-display"><div class="count"></div><div class="label">'+ae.unseen+'</div></div>                                                                <div class="actions">                                                                    <div class="stat-box-action hv-send-new-campaign top" trigger-type="unseen"><div class="image"><img src="'+chrome.extension.getURL("/images/injected/add-icon.svg")+'"></div><label>'+ae.sendNewCampaign+'</label></div>                                                                    <div class="border"></div>                                                                    <div class="stat-box-action hv-view-sent-campaign bottom" trigger-type="unseen"><div class="image"><img src="'+chrome.extension.getURL("/images/injected/mail-sent.svg")+'"></div><label>'+ae.campaignsSent+"</label></div>                                                                </div>                                                            </div>                                                        </div>                                                      </div>                                                    </div>",hvVidCampReportsPopViewDetailReport:'<div class="hv-camp-view-detailed-report"><span>'+ae.viewDetailedReport+"</span></div>",hvVidCampReportsPopChildCampaignView:'<div class="child-campaign-view">                                                        <div class="close-btn"><span>'+ae.close+'</span></div>                                                        <div class="child-campaign-list"></div>                                                   </div>',emptyChildCampaign:'<div class="empty-child-campaign">'+ae.emptyChildCampaign+"</div>",childCampaignListItem:'<div id="childCampaignListItem" class="child-campaign-list-item">                                        <div class="ccl-title-card"><span class="ccl-title"></span><span class="created-at"></span></div>                                        <div class="ccl-action-card"><div class="ccl-image"><img src="'+chrome.extension.getURL("/images/injected/mail-sent.svg")+'"></div><span>'+ae.sent+'</span><span class="count"></span></div>                                    </div>'}})}