var injectedAlready=document.getElementById("hippowiz-slack-injected"),HTML_CONTENT={hippo_button:"<div class='c-button-unstyled c-icon_button c-icon_button--light c-icon_button--size_small c-wysiwyg_container__button hv-embed-main-container'> <button id='hippo_video_button' data-ref='hv-embed-main-container' data-type='record_and_library' class='toolbar-action-component toggle text-editor-extension hint--top hv-embed-main-icon' data-hint='Hippo Video' type='button'><img src='https://hippolms-wiz-static.s3.amazonaws.com/images/gmail_add_on/video-icon-orange.svg' class='icon_image'  height='24px' width='22px'> </button><span class='tooltiptext'>Hippo Video</span></div>"};if(!injectedAlready){var hippoCsInjected='<input type=hidden id="hippowiz-slack-injected" value=true />';$(hippoCsInjected).appendTo("body"),console.log("injected slack script"),$(document).ready(function(){function e(e){var t=document.getElementById(e);if(t&&t.getAttribute("value"))return t.getAttribute("value")}function t(){return{serviceName:d.serviceName,windowId:d.windowId,tabId:d.tabId}}function o(e){var t=e.workflowConfig.assetContent,o=t.videoShareUrl,n=t.thumbnailShareUrl,i=t.mfInVideo,a=t.mfFormValues;if(i.length>0){for(var r="",s=0;s<i.length;s++)r=r+encodeURIComponent(i[s])+"="+encodeURIComponent(a[i[s]])+"&";""!=r&&(o+=o.includes("?")?"&"+r:"?"+r,n+=n.includes("?")?"&"+r:"?"+r)}return o}function n(e){var o=t();o.messageFromContentScript1234=!0,o.msgType="workflow",o.payload={playUrl:e},o.urlToBeShortened=e,o.fetchShortenUrl=!0,d.port.postMessage(o)}function i(e){$(".ql-blank").length>0&&$(".ql-editor p").remove(),$(".ql-editor").append(e),$("#hvSlackPop").remove()}function a(){$(".hv-embed-main-container").remove(),$("[data-qa='message_input']").parent().parent().find(".c-texty_buttons").append($(HTML_CONTENT.hippo_button)),$(".hv-embed-main-icon").off("click"),$(".hv-embed-main-icon").on("click",s)}function r(){var e=t();e.messageFromContentScript1234=!0,e.initWorkflowPop=!0,e.msgType="workflow",e.payload={logPrefix:d.logPrefix,popType:"sales",popId:"hvSlackPop",assetContent:{},popConfig:{showEditOption:!0,showTemplatesOption:!1,showContactsOption:!1,showVideoPageLibrary:!0,addSalesUtmParams:!1,popReinitConditions:[],showMfForm:!0,fetchMfInVideo:!0,mandatoryEmailMf:!1,showCustomizeComponent:!0,showTelePrompter:!0,showLandingPageComponent:!0}},d.port.postMessage(e)}function s(e){$("#hvSlackPop").remove(),r()}var d=function(){var t={};return t.serviceName=e("hvIntegName"),t.windowId=Number(e("hvWindowId")),t.tabId=Number(e("hvTabId")),t.logPrefix=" SLACK_DYNAMIC :: ",t.port=chrome.extension.connect({name:t.serviceName+"::"+t.windowId+"::"+t.tabId}),t}();!function(){var e=t();e.messageFromContentScript1234=!0,e.injectHvWorkflowScripts=!0,d.port.postMessage(e)}(),d.port.onMessage.addListener(function(e,t,a){if(msgFromPort=e.backgroundRecordingMessage,"insertFromWorkflowPop"==msgFromPort&&e.data.serviceName==d.serviceName&&e.data.tabId==d.tabId){n(o(e.data))}"fetchShortenUrlResponse"==msgFromPort&&e.data.serviceName==d.serviceName&&e.data.tabId==d.tabId&&i(e.data.shortenUrl)}),MutationObserver=window.MutationObserver||window.WebKitMutationObserver,new MutationObserver(function(e,t){for(var o in e){var n=e[o];$(n.target).hasClass("p-message_input_field c-texty_input--multi_line c-texty_input ql-container")&&0==$(".hv-embed-main-container").length&&a(),$(n.target).hasClass("ql-editor ql-blank")&&0==$(".hv-embed-main-container").length&&a()}}).observe(document,{subtree:!0,childlist:!0,attributes:!0})})}