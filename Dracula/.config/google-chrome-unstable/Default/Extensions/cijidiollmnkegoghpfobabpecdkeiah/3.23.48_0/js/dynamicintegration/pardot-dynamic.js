var injectedAlready=document.getElementById("hippowiz-pardot-dynamic-injected"),shareUrl,isRecording=!1,waitingForUrl=!1,guestUrl,recordingConfiguration,assetId,mergFieldMappings={"First Name":"%%first_name%%",Email:"%%email%%","Last Name":"%%last_name%%","Company Name":"%%company%%","Phone Number":"%%phone%%",Address:"%%address_one%%",Country:"%%country%%",City:"%%city%%",State:"%%state%%",Title:"%%job_title%%"},HTML_CONTENT={hippo_button:"<div class='hv-embed-main-container'> <button id='hippo_video_button' data-ref='hv-embed-main-container' data-type='record_and_library' class='toolbar-action-component toggle text-editor-extension hint--top hv-embed-main-icon' data-hint='Hippo Video' type='button'><img src='https://hippolms-wiz-static.s3.amazonaws.com/images/gmail_add_on/video-icon-orange.svg' class='icon_image' >HIPPO VIDEO</button></div>"},copyToClipboard=void 0;if(!injectedAlready){var hippoCsInjected='<input type=hidden id="hippowiz-pardot-dynamic-injected" value=true />',copyToClipboardBtn='<button class="copy-to-clipboard" data-clipboard-target="#copy-to-clipboard-btn"></button>';$(hippoCsInjected).appendTo("body"),$(copyToClipboardBtn).appendTo("body");var port;console.log("injected pardot-dynamic script"),$(document).ready(function(){function e(e){var o=document.getElementById(e);if(o&&o.getAttribute("value"))return o.getAttribute("value")}function o(){return{serviceName:d.serviceName,windowId:d.windowId,tabId:d.tabId}}function t(e,o,t){if(e)return $("#copyLinkWithThumbnailTarget").remove(),$("body").append('<div id="copyLinkWithThumbnailTarget" aria-hidden="true" tabindex="-1" > '+i(o,t)+"</div>"),document.querySelector("#copyLinkWithThumbnailTarget")}function i(e,o){return'<div><a href="'+(e+=e.includes("?")?"&":"?")+'" target="_blank" tabindex="-1"><div id="copy-thumbnail-wrapper" style="max-height:200px; max-width:360px;"><img src="'+o+'" alt="'+e+'" style="max-height: 202px; max-width: 360px;" class="thumbnail-image"></div></a><a href="'+e+'" target="_blank" tabindex="-1"><div style="padding-top: 7px;">Watch Video</div></a><div><br></div></div>'}function n(){$(".hv-embed-main-container").remove(),$("<li>").append($(HTML_CONTENT.hippo_button)).appendTo($(".nav.nav-pills")[1]),$(".hv-embed-main-icon").off("click"),$(".hv-embed-main-icon").on("click",r),$(".rich-text-editor-component button.primary-button.save").addClass("hv-tool-bar-quill-override")}function a(){var e=o();e.messageFromContentScript1234=!0,e.initWorkflowPop=!0,e.msgType="workflow",e.payload={logPrefix:d.logPrefix,popType:"sales",popId:"hvPardotPop",assetContent:{},popConfig:{showEditOption:!0,showTemplatesOption:!1,showContactsOption:!1,showVideoPageLibrary:!0,addSalesUtmParams:!1,popReinitConditions:[],showMfForm:!1,fetchMfInVideo:!0,mandatoryEmailMf:!1,insertVideoText:"COPY TO CLIPBOARD",showCustomizeComponent:!0,showTelePrompter:!0,showLandingPageComponent:!0}},d.port.postMessage(e)}function r(e){$("#hvPardotPop").remove(),a()}var d=function(){var o={};return o.serviceName=e("hvIntegName"),o.windowId=Number(e("hvWindowId")),o.tabId=Number(e("hvTabId")),o.logPrefix=" PARDOT_DYNAMIC  :: ",o.port=chrome.extension.connect({name:o.serviceName+"::"+o.windowId+"::"+o.tabId}),o}();!function(){var e=o();e.messageFromContentScript1234=!0,e.injectHvWorkflowScripts=!0,d.port.postMessage(e)}(),d.port.onMessage.addListener(function(e,o,i){if(msgFromPort=e.backgroundRecordingMessage,"insertFromWorkflowPop"==msgFromPort&&"pardot-dynamic"==e.data.serviceName&&e.data.tabId==d.tabId){var n=e.data.workflowConfig.assetContent,a=n.videoShareUrl,r=n.thumbnailShareUrl,p="";n.mfInVideo.includes("email")||n.mfInVideo.includes("Email")||n.mfInVideo.push("Email");for(var s=0,c=0;c<n.mfInVideo.length;c++)mergFieldMappings.hasOwnProperty(n.mfInVideo[c])&&(s>0&&(p+="&"),p+=encodeURIComponent(n.mfInVideo[c])+"="+mergFieldMappings[n.mfInVideo[c]],++s);a+=a.includes("?")?"&"+p:"?"+p,r+=r.includes("?")?"&"+p:"?"+p,copyToClipboard&&copyToClipboard.destroy(),jQuery(function(){jQuery(".copy-to-clipboard").click()}),copyToClipboard=new ClipboardJS(".copy-to-clipboard",{target:function(){return t(!0,a,r)}}),copyToClipboard.on("success",function(e){$("#copyLinkWithThumbnailTarget").hide()}),$("#hvPardotPop").remove()}}),MutationObserver=window.MutationObserver||window.WebKitMutationObserver,new MutationObserver(function(e,o){for(var t in e){var i=e[t];$(i.target).hasClass("tab edit active")&&0==$(".hv-embed-main-container").length&&n(),$(i.target).hasClass("btn btn-primary")&&0==$(".hv-embed-main-container").length&&n()}}).observe(document,{subtree:!0,childlist:!0,attributes:!0})})}