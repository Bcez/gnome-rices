(function(){!function(e){var t,n,r,o,i,l,s,a;s=e.map,i=e.extend,l=e.inArray,r=function(e,t){return-1!==l(e,t)},o=function(e){return e.replace(/([\!\"\#\$\%\&'\(\)\*\+\,\.\/\:\;<\=>\?\@\[\\\]\^\`\{\|\}\~])/g,"\\$1")},n=function(e,t){return s(e,function(e){return e===t?null:e})},a=function(e){return s(e,function(t,n){return parseInt(n,10)===parseInt(e.indexOf(t),10)?t:null})},t=function(){function t(t,n){this.element=t,this.options=i(i({},e.selectorator.options),n),this.cachedResults={}}return t.prototype.query=function(t){var n;return(n=this.cachedResults)[t]||(n[t]=e(t.replace(/#([^\s]+)/g,"[id='$1']")))},t.prototype.getProperTagName=function(){return this.element[0]?this.element[0].tagName.toLowerCase():null},t.prototype.hasParent=function(){return this.element&&0<this.element.parent().length},t.prototype.isElement=function(){var e;return(e=this.element[0])&&e.nodeType===e.ELEMENT_NODE},t.prototype.validate=function(e,t,n,o){var i,l;if(null==n&&(n=!0),null==o&&(o=!1),l=this.query(e),n&&1<l.length||!n&&0===l.length){if(!t||-1!==e.indexOf(":"))return null;if(i=o?" > ":" ",e=t+i+e,l=this.query(e),n&&1<l.length||!n&&0===l.length)return null}return r(this.element[0],l.get())?e:null},t.prototype.generate=function(){var e,t,r,o,i;if(!(this.element&&this.hasParent()&&this.isElement()))return[""];for(i=[],o=[this.generateSimple,this.generateAncestor,this.generateRecursive],t=0,r=o.length;t<r;t++)if(e=o[t],(i=a(n(e.call(this))))&&i.length>0)return i;return a(i)},t.prototype.generateAncestor=function(){var n,r,o,i,l,s,a,u,c,g,h,p,f;for(p=[],h=this.element.parents(),n=0,l=h.length;n<l;n++){for(u=h[n],r=!0,f=this.generateSimple(null,!1),o=0,s=f.length;o<s;o++)for(f[o],g=new t(e(u),this.options).generateSimple(null,!1),i=0,a=g.length;i<a;i++)c=g[i],e.merge(p,this.generateSimple(c,!0,r));r=!1}return p},t.prototype.generateSimple=function(e,t,r){var o,i,l,a,u,c,g;for(c=this,c.getProperTagName(),g=function(n){return c.validate(n,e,t,r)},a=[[c.getIdSelector],[c.getClassSelector],[c.getIdSelector,!0],[c.getClassSelector,!0],[c.getNameSelector],[function(){return[c.getProperTagName()]}]],i=0,l=a.length;i<l;i++)if(o=a[i],u=o[0].call(c,o[1])||[],u=n(s(u,g)),u.length>0)return u;return[]},t.prototype.generateRecursive=function(){var e,n,r,o;return o=this.getProperTagName(),-1!==o.indexOf(":")&&(o="*"),n=this.element.parent(),r=new t(n).generate()[0],e=n.children(o).index(this.element),o=o+":eq("+e+")",""!==r&&(o=r+" > "+o),[o]},t.prototype.getIdSelector=function(e){var t;return null==e&&(e=!1),e=e?this.getProperTagName():"",t=this.element.attr("id"),"string"!=typeof t||r(t,this.getIgnore("id"))||""===t?null:[e+"#"+o(t)]},t.prototype.getClassSelector=function(e){var t,n,i;return null==e&&(e=!1),i=this.getProperTagName(),/^(body|html)$/.test(i)?null:(e=e?i:"",n=this.getIgnore("class"),t=(this.element.attr("class")||"").replace(/\{.*\}/,"").split(/\s/),s(t,function(t){return t&&!r(t,n)?e+"."+o(t):null}))},t.prototype.getNameSelector=function(){var e,t;return t=this.getProperTagName(),e=this.element.attr("name"),e&&!r(e,this.getIgnore("name"))?[t+"[name='"+e+"']"]:null},t.prototype.getIgnore=function(e){var t,n,r;return n=this.options.ignore||{},t="class"===e?"classes":e+"s",r=n[e]||n[t],"string"==typeof r?[r]:r},t}(),e.selectorator={options:{},unique:a,clean:n,escapeSelector:o},e.fn.selectorator=function(n){return new t(e(this),n)},e.fn.getSelector=function(e){return this.selectorator(e).generate()}}(jQuery)}).call(this);