function startRecInPresentPage(){var e='<div id="hv-embed-present-start">\t\t\t<img src="'+chrome.runtime.getURL("/images/injected/play-icon.png")+'">\t\t\t<span>Start Recording</span>\t\t\t</div>';$('<div class="hv-embed-overlay"></div>').appendTo("body"),$(e).appendTo("body"),$("#hv-embed-present-start").off("click"),$("#hv-embed-present-start").on("click",startPresentRecord),$("#hippo-overlay-background").hide()}function startPresentRecord(){$("#hv-embed-present-start").hide(),$(".hv-embed-overlay").hide(),requestFullScreen(document.body),port.postMessage({startCountDownGeneral:!0,messageFromContentScript1234:!0})}function enableCreateVideoBtn(){$("#hv-embed-main-btn").hasClass("jfk-button-disabled")&&($("#hv-embed-main-btn").removeClass("jfk-button-disabled"),$(".hv-embed-btn-img").css("opacity","1"),$("#hv-embed-main-container").bind("click",handleMenuClick))}function disableCreateVideoBtn(){$("#hv-embed-main-btn").hasClass("jfk-button-disabled")||($("#hv-embed-main-btn").addClass("jfk-button-disabled"),$(".hv-embed-btn-img").css("opacity","0.5"),$("#hv-embed-main-container").unbind("click"))}function hideWidget(){$("#hv-embed-main-btn").removeClass("jfk-button-checked jfk-button-clear-outline"),$(".hv-widget-container").fadeOut(function(){$(".hv-widget-container").remove()})}function getUserRecordingPreferences(){port.postMessage({getUserRecordingPreferences:!0,messageFromContentScript1234:!0})}function startRecording(){recordConfiguration.fromPopup=!0,recordConfiguration.initiator="google-slides",recordConfiguration.tabRecording=!1,recordConfiguration.separateLayer=!1,recordConfiguration.systemAudio=!0,userPreferencesSaved&&(void 0!=userPreferencesSaved.webcamPosition&&(recordConfiguration.webcamPosition=userPreferencesSaved.webcamPosition),void 0==userPreferencesSaved.webcamSize&&void 0==userPreferencesSaved.webCamSize||(recordConfiguration.webcamSize=userPreferencesSaved.webcamSize||userPreferencesSaved.webCamSize),void 0!=userPreferencesSaved.webcamShape&&(recordConfiguration.webcamShape=userPreferencesSaved.webcamShape)),port.postMessage({doBackgroundRecording:!0,config:recordConfiguration,messageFromContentScript1234:!0}),hideWidget(),disableCreateVideoBtn()}function requestFullScreen(e){var t=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullScreen;if(t)t.call(e);else if(void 0!==window.ActiveXObject){var n=new ActiveXObject("WScript.Shell");null!==n&&n.SendKeys("{F11}")}}var injectedAlready=document.getElementById("hippowiz-gs-injected"),isRecording=!1,server="cijidiollmnkegoghpfobabpecdkeiah"===chrome.runtime.id?"https://www.hippovideo.io":"http://localhost:3000";if(!injectedAlready){var hippoCsInjected='<input type=hidden id="hippowiz-gs-injected" value=true />';$(hippoCsInjected).appendTo("body");var port,userPreferencesSaved=void 0,recordConfiguration;console.log("injected google slide script"),$(document).ready(function(){function e(e){if("hv-embed-main-btn"==$(e.target).attr("id")){$(".hv-widget-container").length>0?hideWidget():t("hv-embed-main-container",$(e.target).attr("data-type"))}}function t(e,t){if(0==$("#"+e).has(".hv-widget-container").length){$('<div class="hv-widget-container hv-gs-widget-block"></div>').appendTo($("#"+e))}n(e,"hv-widget-container",t)}function n(e,t,n){currentWidgetId=t;var o=$("#"+e).find("."+t);o.empty().load(chrome.extension.getURL("html/injected/record-library-widget.html"),function(){for(var e=$(o),t=0;t<e.length;t++){var i=e[t],r=i.innerHTML.toString(),a=r.replace(/__MSG_(\w+)__/g,function(e,t){return t?chrome.i18n.getMessage(t):""});a!=r&&(i.innerHTML=a)}var d='<img class="hv-embed-dom-click hv-embed-widget-top-left-arrow" src="'+chrome.runtime.getURL("/images/injected/widget-top-arrow.png")+'">';$(d).appendTo(o),o.find(".hv-embed-record-button").html(chrome.i18n.getMessage("next")),o.find(".hv-embed-record-button").off("click"),o.find(".hv-embed-record-button").on("click",getUserRecordingPreferences),o.find(".hv-embed-widget").show(),o.find(".hv-embed-widget-top-left-arrow").show(),checkAndShowWidget(n)})}port=chrome.extension.connect({name:"googleslidescript"});var o=location.href.split("/"),i=o.pop();port.postMessage({askToInsertRecordLibraryScript:!0,messageFromContentScript1234:!0}),"docs.google.com"==location.host&&i.includes("edit")&&port.postMessage({getState:!0,messageFromContentScript1234:!0}),"docs.google.com"==location.host&&i.includes("present")&&port.postMessage({getState:!0,messageFromContentScript1234:!0});var r=document.getElementById("punch-start-presentation-left");if(r){var a=r.className;if(!document.getElementById("hv-embed-main-btn")){var d='<div id="hv-embed-main-container" data-type="record"><div role="button" id="hv-embed-main-btn" data-ref="hv-embed-main-container" data-type="record" class="'+a.replace("jfk-button-disabled","")+'" aria-disabled="false" style="margin-right:8px;user-select: none;">\t\t\t\t\t\t<span class="goog-inline-block">\t\t\t\t\t\t\t<img class="hv-embed-btn-img" style="position: relative;top: 6px;margin-right: 3px;" src="'+chrome.runtime.getURL("/images/injected/hippo-grey-logo.png")+'"/>\t\t\t\t\t\t\t&nbsp;\t\t\t\t\t\t</span>Record Presentation\t\t\t\t\t</div></div>';$(".docs-titlebar-buttons > div:nth-child(1)").after(d),$("#hv-embed-main-container").off("click"),$("#hv-embed-main-container").on("click",e),window.isFromHippoVideo&&setTimeout(function(){t("hv-embed-main-container","record")},3e3)}}port.onMessage.addListener(function(e,t,n){if("currentstate"==e.backgroundRecordingMessage){isRecording=!(!e.data.isRecording&&!e.data.isPaused);var o=location.href.split("/"),i=o.pop();"docs.google.com"==location.host&&i.includes("present")?e.data.recordingConfiguration.countdownComplete||void 0!=e.data.recordingConfiguration.showWebcamTour&&0!=e.data.recordingConfiguration.showWebcamTour||startRecInPresentPage():isRecording&&disableCreateVideoBtn()}if("recording_cancelled"==e.backgroundRecordingMessage&&enableCreateVideoBtn(),"bothstarted-popup"==e.backgroundRecordingMessage&&disableCreateVideoBtn(),"bothstarted-google-slides"==e.backgroundRecordingMessage){port.postMessage({imCountingDown:!0,messageFromContentScript1234:!0});var r=location.href.substr(location.href.lastIndexOf("/")+1)+"$";location.href=location.href.replace(new RegExp(r),"present"),disableCreateVideoBtn()}if("stopped_recording"==e.backgroundRecordingMessage){var a=location.href.split("/");if(!a.pop().includes("edit")){a.push("edit");var d=a.join("/");location.href=d}$("#hv-embed-main-btn").removeClass("jfk-button-disabled")}"stopWebcamTour"==e.backgroundRecordingMessage&&startRecInPresentPage(),"user_recording_preferences"===e.backgroundRecordingMessage&&(void 0==e.data.preference&&e.data.preference=={}||(userPreferencesSaved=e.data.preference),startRecording())}),$(document).click(function(e){"hv-embed-main-btn"===e.target.id||$(e.target).hasClass("hv-embed-dom-click")||hideWidget()})})}