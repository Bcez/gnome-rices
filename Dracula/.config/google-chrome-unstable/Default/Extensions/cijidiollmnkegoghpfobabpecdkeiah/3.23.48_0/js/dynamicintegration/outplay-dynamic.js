var injectedAlready=document.getElementById("hippowiz-outplay-dynamic-injected"),HTML_CONTENT={hippo_button:'<span class="emaileditor-hippo-icon">                         <button class="btn btn-light hippo-recorder-button" data-toggle="popover" type="button">                             <div class="w-100 h-100 d-flex align-items-center justify-content-center" data-toggle="tooltip" data-placement="auto" title="" data-original-title="Hippo Video">                                 <img width="22px" src="https://hippolms-wiz-static.s3.amazonaws.com/images/gmail_add_on/video-icon-orange.svg" alt="Hippo Video"> \t\t\t\t\t\t\t\t<span class="tooltiptext">Hippo Video</span> \t\t\t\t\t\t\t</div>                         </button>                     </span>',hippo_report_button:'<span _ngcontent-bkw-c96="" container="body" placement="auto" class="btn-with-checkbox">                                 <span _ngcontent-bkw-c96="" class="hv-integration-reports">                                     <img src='+chrome.extension.getURL("/images/injected/hv-integration-reports.svg")+' width="18px" height="18px" alt="Hippo Video"> \t\t\t\t\t\t\t\t\t<span class="tooltiptext">Video Reports</span> \t\t\t\t\t\t\t\t</span>                             </span>'},copyToClipboard=void 0;if(!injectedAlready){var hippoCsInjected='<input type=hidden id="hippowiz-outplay-dynamic-injected" value=true />',copyToClipboardBtn='<button class="copy-to-clipboard" data-clipboard-target="#copy-to-clipboard-btn" style="display:none;"></button>';$(hippoCsInjected).appendTo("body"),$(copyToClipboardBtn).appendTo("body"),console.log("injected outplay script"),$(document).ready(function(){function t(t){var e=document.getElementById(t);if(e&&e.getAttribute("value"))return e.getAttribute("value")}function e(){return{serviceName:b.serviceName,windowId:b.windowId,tabId:b.tabId}}function o(t,e){if(e.status&&t){var o=e.track_id,i=e.content.assetContent.videoShareUrl,n=e.content.assetContent.thumbnailShareUrl;i+=i.includes("?")?"&track_id="+o+"&":"?track_id="+o+"&",n+=n.includes("?")?"&track_id="+o+"&":"?track_id="+o+"&"}else{var r=e.assetContent;r||(r=e.content.assetContent);var i=r.videoShareUrl,n=r.thumbnailShareUrl;r.mfInVideo.includes("email")||r.mfInVideo.includes("Email")||r.mfInVideo.push("Email");var s="";if(t)for(var d=0;d<r.mfInVideo.length;d++)s+=encodeURIComponent(r.mfInVideo[d])+"="+encodeURIComponent(r.mfFormValues[r.mfInVideo[d]])+"&";else for(var d=0;d<r.mfInVideo.length;d++)s+=encodeURIComponent(r.mfInVideo[d])+"="+(v[r.mfInVideo[d]]?v[r.mfInVideo[d]]:"{{"+r.mfInVideo[d]+"}}")+"&";""!=s&&(i+=i.includes("?")?"&"+s:"?"+s,n+=n.includes("?")?"&"+s:"?"+s)}copyToClipboard&&copyToClipboard.destroy(),jQuery(function(){jQuery(".copy-to-clipboard").click()}),copyToClipboard=new ClipboardJS(".copy-to-clipboard",{target:function(){return a(i,n)}}),copyToClipboard.on("success",function(t){$("#copyLinkWithThumbnailTarget").hide()}),$("#hvOutplayPop").remove()}function a(t,e){return $("#copyLinkWithThumbnailTarget").remove(),$("body").append('<div id="copyLinkWithThumbnailTarget" aria-hidden="true" tabindex="-1" >'+i(t,e)+"</div>"),document.querySelector("#copyLinkWithThumbnailTarget")}function i(t,e){return'<a href="'+t+'" target="_blank" tabindex="-1"><img src="'+e+'" alt="'+t+'" style="cursor: pointer;" width="360" height="200"></a><div style="padding-top: 7px;"><a href="'+t+'" target="_blank" tabindex="-1" style="cursor: pointer;">Watch Video</a></div><div><br></div>'}function n(t){0==$(t).find(".emaileditor-toolbarbottom").find(".hippo-recorder-button").length&&($(t).find(".emaileditor-toolbarbottom").append($(HTML_CONTENT.hippo_button)[0]),$(".hippo-recorder-button").off("click").on("click",l))}function r(t){0==$(t).find(".hv-integration-reports").length&&($(".brand-sequences").length>0?$(".brand-sequences").parent().parent().prepend($(HTML_CONTENT.hippo_report_button)[0]):$(".brand-email").length>0&&$(".brand-email").parent().parent().prepend($(HTML_CONTENT.hippo_report_button)[0]),$(".hv-integration-reports").off("click").on("click",c))}function s(t){var o=e();o.messageFromContentScript1234=!0,o.initWorkflowPop=!0,o.msgType="workflow",o.payload={logPrefix:b.logPrefix,popType:"sales",popId:"hvOutplayPop",assetContent:{mfFormValues:g()},popConfig:{showEditOption:!0,showTemplatesOption:!1,showContactsOption:!1,showVideoPageLibrary:!0,addSalesUtmParams:!1,popReinitConditions:[],showMfForm:t,fetchMfInVideo:!0,mandatoryEmailMf:!0,insertVideoText:"COPY TO CLIPBOARD",showCustomizeComponent:!0,showTelePrompter:!0,showLandingPageComponent:!0,isMailFlow:t,customAppendingElementDetails:f()}},b.port.postMessage(o)}function d(t){var o=e();o.messageFromContentScript1234=!0,o.messageType="outplay_dynamic",o.getUTMToken=!0,o.popId=t.popId,o.content=t,o.serviceName=b.serviceName,b.port.postMessage(o)}function l(t){$("#hvOutplayPop").remove(),s(h(t.currentTarget))}function p(t){var o=g(!0),a=e();a.messageFromContentScript1234=!0,a.initReportPop=!0,a.randomId=t,a.msgType="workflow",a.reportBtn="hv-integration-reports",a.contactEmail=o.Email,a.contactName="",a.payload={popId:"hvOutplayReportPop",logPrefix:b.logPrefix},b.port.postMessage(a)}function c(t){$("#hvOutplayReportPop").remove();var e=u();$(t.currentTarget).attr("data-random-id",e),$(".hv-integration-reports").attr("disabled",!0),p(e)}function m(t){var e=t.workflowConfig;e.popConfig.isMailFlow?d(e):o(!1,e)}function u(){return Math.random().toString(36).substr(2,5)+Date.now()}function h(t){var e=!1;return $(".email-editor-modal").hasClass("show")&&$("#emailProspectTo").find("li").length<3&&(e=!0),e}function g(t){for(var e={},o="",a=$(".contact-details-block").find("input"),i=0;i<a.length;i++){var n=$(a[i]).attr("placeholder");if(void 0!=n)if(n.toLowerCase().includes("email")&&$(a[i]).val().includes("@")){if(e.Email=$(a[i]).val(),t)break}else n.toLowerCase().includes("name")?n.toLowerCase().includes("first")?e["First Name"]=$(a[i]).val():n.toLowerCase().includes("last")&&(e["Last Name"]=$(a[i]).val()):n.toLowerCase().includes("title")&&(e.Title=$(a[i]).val())}if(!t){if($("#emailProspectTo").length>0&&$("#emailProspectTo").find("li").length<3)for(var r=$($("#emailProspectTo").find("li")[0]).find("span"),i=0;i<r.length;i++){var s=$(r[i]).attr("title");void 0!=s&&0!=s&&s.includes("@")&&(o=s)}""!=o&&o!=e.Email&&(e={Email:o})}return e}function f(){var t=void 0;return $(".modal-create-email").length>0&&$(".modal-create-email").hasClass("show")?t="modal-create-email":$(".email-editor-modal").length>0&&$(".email-editor-modal").hasClass("show")&&(t="email-editor-modal"),void 0==t?void 0:{attributeName:"class",attributeValue:t}}var v={"First Name":"{{firstname}}",Email:"{{emailid}}","Last Name":"{{lastname}}","Company Name":"{{company}}","Phone Number":"{{phone}}",Title:"{{title}}",Country:"{{country}}",City:"{{city}}",State:"{{state}}"},b=function(){var e={};return e.serviceName=t("hvIntegName"),e.windowId=Number(t("hvWindowId")),e.tabId=Number(t("hvTabId")),e.logPrefix="OUTPLAY_DYNAMIC :: ",e.port=chrome.extension.connect({name:e.serviceName+"::"+e.windowId+"::"+e.tabId}),e}();!function(){var t=e();t.messageFromContentScript1234=!0,t.injectHvWorkflowScripts=!0,b.port.postMessage(t)}(),b.port.onMessage.addListener(function(t,e,a){msgFromPort=t.backgroundRecordingMessage,"insertFromWorkflowPop"==msgFromPort&&t.data.serviceName==b.serviceName&&t.data.tabId==b.tabId&&m(t.data),"insertVideoInOutplay"==msgFromPort&&t.data.serviceName==b.serviceName&&t.data.tabId==b.tabId&&o(!0,t.data)}),MutationObserver=window.MutationObserver||window.WebKitMutationObserver,new MutationObserver(function(t,e){for(var o in t){var a=t[o];($(a.target).hasClass("email-editor-modal")||$(a.target).hasClass("modal-create-email"))&&n(a.target),$(a.target).hasClass("prospect-mini-view")&&r(a.target)}}).observe(document,{subtree:!0,childlist:!0,attributes:!0})})}