function onPageLoad(e){function t(){document.removeEventListener("DOMContentLoaded",e),window.removeEventListener("load",e),e()}"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?t():(document.addEventListener("DOMContentLoaded",t),window.addEventListener("load",t))}function onPageLoaded(){if(document.getElementById("tmplToolbarUl"))for(var e=document.getElementById("tmplToolbarUl").children,t=0;t<e.length;t++){var n=e[t].getAttribute("title");if(n&&"bold"==n.toLowerCase()&&!document.getElementById("hippo-widget")){injectIcon(e[t],e[t].getAttribute("class"));break}}MutationObserver=window.MutationObserver||window.WebKitMutationObserver,new MutationObserver(function(e,t){for(var n in e){var o=e[n];"detailViewButtonLayerDiv"!=o.target.id&&"deskIntegDiv"!=o.target.id||0!=document.getElementsByClassName("hv-embed-main-container-report").length||insertReportsIcon(document.getElementById("fixedBtn")),"toolBarDiv_L1"==o.target.id&&injectIcon(o.target.firstChild.firstChild,o.target.firstChild.firstChild.className),"emailEditor"==o.target.id&&injectIframeScriptOnZohoOne()}}).observe(document,{subtree:!0,childlist:!0,attributes:!0})}function insertReportsIcon(e){if(window.location.href.includes("/tab/Leads/")||window.location.href.includes("/tab/Contacts/")){var t=document.createElement("span");t.id="hippo-widget",t.title="Hippo Video",t.innerHTML=HTML_CONTENT.report_button,e.prepend(t),t.addEventListener("click",initReportWorkflowPop)}}function injectIcon(e,t){var n=document.createElement("li");n.id="hippo-widget",n.className="hv-embed-main-container "+t,n.title="Hippo Video",n.innerHTML="<a><img src='https://hippolms-wiz-static.s3.amazonaws.com/images/gmail_add_on/video-icon-orange.svg' height='16px' width='16px' style='margin-top: 2px;'></img></a>",e.before(n),n.addEventListener("click",initiateWorkflowPop)}function initiateWorkflowPop(){var e=document.getElementsByClassName("selectedEmail")[0],t=e?e.getAttribute("email"):void 0,n={type:"hv_init_workflow_pop",data:{contactEmail:t}};parent.postMessage(n,"*"),parent.parent.postMessage(n,"*")}function initReportWorkflowPop(){var e=document.getElementById("subvalue_EMAIL").textContent,t=document.getElementById("subvalue_LASTNAME").textContent,n={type:"hv_init_report_workflow_pop",data:{lastName:t,contactEmail:e}};parent.postMessage(n,"*")}function injectIframeScriptOnZohoOne(){var e={type:"hv_inject_iframe_script"};parent.postMessage(e,"*")}var injectedAlready=document.getElementById("hv-zoho-crm-handler-injected"),HTML_CONTENT={report_button:'<div class="hv-embed-main-container-report hv-integration-reports-button" style="display:inline; background:none; border:none; cursor:pointer"><button data-ref="hv-embed-main-container-report" class="hv-integration-reports" type="button" style=" background:none; border:none; cursor:pointer; font-size:20px"><img src="'+chrome.extension.getURL("/images/injected/hv-integration-reports.svg")+'" style="width: 20px; height: 20px; margin-top: 5px;"></button></div>'};if(!injectedAlready&&(window.location.href.includes("crm.zoho.")||window.frameElement)){var hippowizExtension=document.createElement("input");hippowizExtension.type="hidden",hippowizExtension.id="hv-zoho-crm-handler-injected",hippowizExtension.value="true",document.body.appendChild(hippowizExtension),onPageLoad(onPageLoaded)}