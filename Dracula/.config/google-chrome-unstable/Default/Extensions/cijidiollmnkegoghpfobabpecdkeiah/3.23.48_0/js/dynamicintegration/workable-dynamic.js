var injectedAlready=document.getElementById("hippowiz-workable-dynamic-injected"),HTML_CONTENT={hippo_button:'<li>                         <a href="javascript::void(0)" class="hippo-recorder-button" rel="Hippo Video" role="button">                             <img src="https://hippolms-wiz-static.s3.amazonaws.com/images/gmail_add_on/video-icon-orange.svg" height="20px" width="20px" style="margin-bottom: 6px;"> \t\t\t\t\t\t\t<span class="tooltiptext">Hippo Video</span> \t\t\t\t\t\t</a>                     </li>',hippo_report_button:'<li>                                 <a href="javascript::void(0)" class="hv-integration-reports" rel="Hippo Video" role="button">                                     <img src='+chrome.extension.getURL("/images/injected/hv-integration-reports.svg")+' height="20px" width="25px" style="margin-bottom: 6px;margin-top: 11px;"> \t\t\t\t\t\t\t\t\t<span class="tooltiptext">Video Reports</span> \t\t\t\t\t\t\t\t</a>                             </li>'},copyToClipboard=void 0;if(!injectedAlready){var hippoCsInjected='<input type=hidden id="hippowiz-workable-dynamic-injected" value=true />',copyToClipboardBtn='<button class="copy-to-clipboard" data-clipboard-target="#copy-to-clipboard-btn" style="display:none;"></button>';$(hippoCsInjected).appendTo("body"),$(copyToClipboardBtn).appendTo("body"),console.log("injected workable script"),$(document).ready(function(){function t(t){var e=document.getElementById(t);if(e&&e.getAttribute("value"))return e.getAttribute("value")}function e(){return{serviceName:v.serviceName,windowId:v.windowId,tabId:v.tabId}}function o(t,e){if(e.status&&t){var o=e.track_id,n=e.content.assetContent.videoShareUrl,r=e.content.assetContent.thumbnailShareUrl;n+=n.includes("?")?"&track_id="+o+"&":"?track_id="+o+"&",r+=r.includes("?")?"&track_id="+o+"&":"?track_id="+o+"&"}else{var a="",d=e.assetContent;d||(d=e.content.assetContent);var n=d.videoShareUrl,r=d.thumbnailShareUrl;if(d.mfInVideo.includes("First Name")||d.mfInVideo.push("First Name"),t)for(var s=0;s<d.mfInVideo.length;s++)a+=encodeURIComponent(d.mfInVideo[s])+"="+encodeURIComponent(d.mfFormValues[d.mfInVideo[s]])+"&";else for(var s=0;s<d.mfInVideo.length;s++)a+=encodeURIComponent(d.mfInVideo[s])+"="+(h[d.mfInVideo[s]]?h[d.mfInVideo[s]]:"{{"+d.mfInVideo[s]+"}}")+"&";""!=a&&(n+=n.includes("?")?"&"+a:"?"+a,r+=r.includes("?")?"&"+a:"?"+a)}copyToClipboard&&copyToClipboard.destroy(),jQuery(function(){jQuery(".copy-to-clipboard").click()}),copyToClipboard=new ClipboardJS(".copy-to-clipboard",{target:function(){return i(n,r)}}),copyToClipboard.on("success",function(t){$("#copyLinkWithThumbnailTarget").remove()}),copyToClipboard.on("error",function(t){$("#copyLinkWithThumbnailTarget").remove()}),$("#hvWorkablePop").remove()}function i(t,e){return $("#copyLinkWithThumbnailTarget").remove(),$("body").append('<div id="copyLinkWithThumbnailTarget" aria-hidden="true" tabindex="-1" >'+n(t,e)+"</div>"),document.querySelector("#copyLinkWithThumbnailTarget")}function n(t,e){return'<a href="'+t+'" target="_blank" tabindex="-1"><img src="'+e+'" alt="'+t+'" style="cursor: pointer;" width="360" height="200"></a><div style="padding-top: 7px;"><a href="'+t+'" target="_blank" tabindex="-1" style="cursor: pointer;">Watch Video</a></div><div><br></div>'}function r(t){if(0==$(t).parent().find(".hippo-recorder-button").length)for(var e=$(t).siblings(),o=0;o<e.length;o++)if($(e[o]).hasClass("redactor-toolbar")){$(e[o]).append($(HTML_CONTENT.hippo_button)[0]),$(".hippo-recorder-button").off("click").on("click",p);break}}function a(){0==$(".hv-integration-reports").length&&($(".profile__tabs").find(".tabs-material").append($(HTML_CONTENT.hippo_report_button)[0]),$(".hv-integration-reports").off("click").on("click",l))}function d(t){var o=e();o.messageFromContentScript1234=!0,o.initWorkflowPop=!0,o.msgType="workflow",o.payload={logPrefix:v.logPrefix,popType:"sales",popId:"hvWorkablePop",assetContent:{mfFormValues:{Email:f(),"First Name":g()}},popConfig:{showEditOption:!0,showTemplatesOption:!1,showContactsOption:!1,showVideoPageLibrary:!0,addSalesUtmParams:!1,popReinitConditions:[],showMfForm:t,fetchMfInVideo:!0,mandatoryEmailMf:b(),insertVideoText:"COPY TO CLIPBOARD",showCustomizeComponent:!0,showTelePrompter:!0,showLandingPageComponent:!0,isMailFlow:t}},v.port.postMessage(o)}function s(t){var o=e();o.messageFromContentScript1234=!0,o.messageType="workable_dynamic",o.getUTMToken=!0,o.popId=t.popId,o.content=t,o.serviceName=v.serviceName,v.port.postMessage(o)}function p(t){$("#hvWorkablePop").remove(),d(!0)}function c(t){var o=f(),i=g(),n=e();n.messageFromContentScript1234=!0,n.initReportPop=!0,n.randomId=t,n.msgType="workflow",n.reportBtn="hv-integration-reports",n.contactEmail=o,n.contactName=i,n.payload={popId:"hvWorkableReportPop",logPrefix:v.logPrefix},v.port.postMessage(n)}function l(t){$("#hvWorkableReportPop").remove();var e=u();$(t.currentTarget).attr("data-random-id",e),$(".hv-integration-reports").attr("disabled",!0),c(e)}function m(t){var e=t.workflowConfig;e.popConfig.isMailFlow?s(e):o(!1,e)}function u(){return Math.random().toString(36).substr(2,5)+Date.now()}function b(){var t=!0;return(window.location.href.includes("settings/templates")||$(".message-form").find(".tags-list li").length>1)&&(t=!1),t}function f(){for(var t="",e=$('[data-ui="contact_details"]').find(".profile__subsection__content").find(".definition__title"),o=0;o<e.length;o++)if("Email"==$(e[o])[0].innerText){t=$($(e[o])[0]).siblings()[0].innerText;break}return t}function g(){return $('[data-ui="name"]').length>0?void 0==$('[data-ui="name"]')[0].innerText?"":$('[data-ui="name"]')[0].innerText:""}var h={"First Name":"[candidate_first_name]","Company Name":"[company]",Title:"[job]"},v=function(){var e={};return e.serviceName=t("hvIntegName"),e.windowId=Number(t("hvWindowId")),e.tabId=Number(t("hvTabId")),e.logPrefix="WORKABLE_DYNAMIC :: ",e.port=chrome.extension.connect({name:e.serviceName+"::"+e.windowId+"::"+e.tabId}),e}();!function(){var t=e();t.messageFromContentScript1234=!0,t.injectHvWorkflowScripts=!0,v.port.postMessage(t)}(),v.port.onMessage.addListener(function(t,e,i){msgFromPort=t.backgroundRecordingMessage,"insertFromWorkflowPop"==msgFromPort&&t.data.serviceName==v.serviceName&&t.data.tabId==v.tabId&&m(t.data),"insertVideoInWorkable"==msgFromPort&&t.data.serviceName==v.serviceName&&t.data.tabId==v.tabId&&o(!0,t.data)}),MutationObserver=window.MutationObserver||window.WebKitMutationObserver,new MutationObserver(function(t,e){for(var o in t){var i=t[o];$(i.target).hasClass("redactor-editor")&&r(i.target),$(i.target).hasClass("profile__actionbar")&&window.location.href.includes("backend/candidates")&&$(".profile__body").length>0&&$(".profile__tabs").length>0&&a()}}).observe(document,{subtree:!0,childlist:!0,attributes:!0})})}