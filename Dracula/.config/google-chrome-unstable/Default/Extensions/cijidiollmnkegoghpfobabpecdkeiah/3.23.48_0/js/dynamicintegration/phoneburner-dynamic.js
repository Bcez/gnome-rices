var injectedAlready=document.getElementById("hippowiz-phoneburner-dynamic-injected"),HTML_CONTENT={hippo_button:"<div class='hv-embed-main-container'> <button id='hippo_video_button' data-ref='hv-embed-main-container' data-type='record_and_library' class='toolbar-action-component toggle text-editor-extension hint--top hv-embed-main-icon' data-hint='Hippo Video' type='button'><img src='https://hippolms-wiz-static.s3.amazonaws.com/images/gmail_add_on/video-icon-orange.svg' class='icon_image'  height='24px' width='22px' > </button><span class='tooltiptext'>Hippo Video</span></div>"};if(!injectedAlready){var hippoCsInjected='<input type=hidden id="hippowiz-phoneburner-dynamic-injected" value=true />';$(hippoCsInjected).appendTo("body"),console.log("injected phoneburner-dynamic script"),$(document).ready(function(){function e(e){var t=document.getElementById(e);if(t&&t.getAttribute("value"))return t.getAttribute("value")}function t(){return{serviceName:c.serviceName,windowId:c.windowId,tabId:c.tabId}}function o(e){var t=e.track_id,o=e.content.assetContent.videoShareUrl,a=e.content.assetContent.thumbnailShareUrl;if(1==e.status)o+=o.includes("?")?"&track_id="+t:"?track_id="+t,a+=a.includes("?")?"&track_id="+t:"?track_id="+t;else{var r=e.content.assetContent.mfInVideo,i=e.content.assetContent.mfFormValues;if(r.length>0){for(var d="",s=0;s<r.length;s++)d=d+encodeURIComponent(r[s])+"="+encodeURIComponent(i[r[s]])+"&";""!=d&&(o+=o.includes("?")?"&"+d:"?"+d,a+=a.includes("?")?"&"+d:"?"+d)}}$(".redactor-styles").removeClass("redactor-placeholder");var c=n(o,a);$(".redactor-styles").append(c),$("#hvPhoneburnerPop").remove()}function n(e,t){return'<p><a href="'+e+'"><img src="'+t+'" alt="'+e+'" width="300" height="150"></a><br><a href="'+e+'" target="_blank" tabindex="-1"><div style="padding-top: 7px;">Watch Video</div></a></p>'}function a(){$(".hv-embed-main-container").remove(),$(".re-mergecodes").after($(HTML_CONTENT.hippo_button)),$(".hv-embed-main-icon").off("click"),$(".hv-embed-main-icon").on("click",s),$(".rich-text-editor-component button.primary-button.save").addClass("hv-tool-bar-quill-override")}function r(e){for(var t="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=o.length,a=0;a<e;a++)t+=o.charAt(Math.floor(Math.random()*n));return t}function i(e){var o="",n="",a=window.location.href;a.includes("contact/")&&(o=$("textarea.span12").text(),o=void 0==o?"":o,n=a);var r=t();r.messageFromContentScript1234=!0,r.initWorkflowPop=!0,r.msgType="workflow",r.payload={logPrefix:c.logPrefix,popType:"sales",popId:"hvPhoneburnerPop",assetContent:{uniqueId:e,mfFormValues:{Email:o,Referer:n}},popConfig:{showEditOption:!0,showTemplatesOption:!1,showContactsOption:!1,showVideoPageLibrary:!0,addSalesUtmParams:!1,popReinitConditions:[],showMfForm:!0,fetchMfInVideo:!0,mandatoryEmailMf:!0,showCustomizeComponent:!0,showTelePrompter:!0,showLandingPageComponent:!0}},c.port.postMessage(r)}function d(e){var o=e.workflowConfig,n=t();n.messageFromContentScript1234=!0,n.messageType="phoneburner_dynamic",n.getUTMToken=!0,n.popId=o.popId,n.content=o,n.serviceName=c.serviceName,c.port.postMessage(n)}function s(e){$("#hvPhoneburnerPop").remove();var t=r(20);$(e.currentTarget).attr("random-id",t),i(t)}var c=function(){var t={};return t.serviceName=e("hvIntegName"),t.windowId=Number(e("hvWindowId")),t.tabId=Number(e("hvTabId")),t.logPrefix=" PHONEBURNER_DYNAMIC :: ",t.port=chrome.extension.connect({name:t.serviceName+"::"+t.windowId+"::"+t.tabId}),t}();!function(){var e=t();e.messageFromContentScript1234=!0,e.injectHvWorkflowScripts=!0,c.port.postMessage(e)}(),c.port.onMessage.addListener(function(e,t,n){msgFromPort=e.backgroundRecordingMessage,"insertFromWorkflowPop"==msgFromPort&&e.data.serviceName==c.serviceName&&e.data.tabId==c.tabId&&d(e.data),"insertVideoInPhoneburnerMailBox"==msgFromPort&&e.data.serviceName==c.serviceName&&e.data.tabId==c.tabId&&o(e.data)}),MutationObserver=window.MutationObserver||window.WebKitMutationObserver,new MutationObserver(function(e,t){for(var o in e){var n=e[o];$(n.target).hasClass("redactor-toolbar")&&0==$(".hv-embed-main-container").length&&a()}}).observe(document,{subtree:!0,childlist:!0,attributes:!0})})}