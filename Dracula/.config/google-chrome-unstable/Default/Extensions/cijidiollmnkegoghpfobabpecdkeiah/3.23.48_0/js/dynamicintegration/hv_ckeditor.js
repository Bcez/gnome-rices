function onPageLoad(e){function t(){document.removeEventListener("DOMContentLoaded",e),window.removeEventListener("load",e),e()}"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?t():(document.addEventListener("DOMContentLoaded",t),window.addEventListener("load",t))}function onPageLoaded(){void 0==runtimePort&&(runtimePort=chrome.runtime.connect({name:"ckeditorscript"}),runtimePort.onMessage.addListener(function(e,t,n){var o=e.backgroundRecordingMessage;if(o&&o.ckeditorAction&&"prepend"==o.editorAction){var i=document.getElementsByClassName("cke_editable")[0].innerHTML;document.getElementsByClassName("cke_editable")[0].innerHTML=o.content+i,forceCkEditorUpdate(),document.getElementsByTagName("img")[0].addEventListener("load",forceCkEditorUpdate)}}))}function forceCkEditorUpdate(){eventFire(document.getElementsByClassName("cke_editable")[0],"focus"),setTimeout(function(){eventFire(document.getElementsByClassName("cke_editable")[0],"input")},500),eventFire(document.getElementsByClassName("cke_editable")[0],"keydown"),eventFire(document.getElementsByClassName("cke_editable")[0],"keyup")}function eventFire(e,t){if(e.fireEvent)e.fireEvent("on"+t);else{var n=document.createEvent("Events");n.initEvent(t,!0,!1),e.dispatchEvent(n)}}var injectedAlready=document.getElementById("hv-ckeditor-injected"),runtimePort;if(window.frameElement&&!injectedAlready){var hippowizExtension=document.createElement("input");hippowizExtension.type="hidden",hippowizExtension.id="hv-ckeditor-injected",hippowizExtension.value="true",document.body.appendChild(hippowizExtension),onPageLoad(onPageLoaded)}