function injectScript(){checkAndInjectCS(),setTimeout(checkAndInjectCS,1e3)}function onPageLoad(e){function t(){document.removeEventListener("DOMContentLoaded",e),window.removeEventListener("load",e),e()}"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?t():(document.addEventListener("DOMContentLoaded",t),window.addEventListener("load",t))}function onPageLoaded(){window.setTimeout(injectScript),dispatchEWEvent("ass_injected")}function embedWidgetMessage(e){runtimePort=initializeRuntimePort();try{runtimePort.postMessage({messageFromContentScript1234:!0,ewMessage:e.detail})}catch(e){console.warn("extension removed. please reload the page.")}}function checkAndInjectCS(){askedToInjectCS||(isHippovideoExtension&&(dynamicIntegInjected||(dynamicIntegInjected=!0,runtimePort=initializeRuntimePort(),runtimePort.postMessage({askToInjectDynamicIntegScript:!0,host:location.host,href:location.href,messageFromContentScript1234:!0}),moniterPasteEvent(runtimePort))),(location.host.includes("localhost")||location.host.includes("hippovideo.io")||location.host.includes("hippowiz.com"))&&(runtimePort=initializeRuntimePort()),null!=document.getElementById("hippowiz-ew-digest")&&askToInjectContentScript())}function dispatchEWEvent(e,t){var n=new CustomEvent(e,{detail:t});document.getElementById("hv-event-listener")&&document.getElementById("hv-event-listener").dispatchEvent(n)}function dispatchEventToProduct(e,t){var n=new CustomEvent(e,{detail:t});document.getElementById("hv_product_listener")&&document.getElementById("hv_product_listener").dispatchEvent(n)}function askToInjectContentScript(){runtimePort=initializeRuntimePort(),runtimePort.postMessage({askToInjectContentScript:!0,messageFromContentScript1234:!0})}function initializeRuntimePort(){return void 0==runtimePort&&(runtimePort=chrome.runtime.connect({name:"allsitescript"}),runtimePort.onMessage.addListener(function(e,t,n){e.relayMessage&&("product"==e.to?dispatchEventToProduct(e.type,e):"embed_widget"==e.to&&dispatchEWEvent(e.type,e))})),runtimePort}function moniterPasteEvent(e){moniterPasteEventBinded||(moniterPasteEventBinded=!0,document.addEventListener("paste",function(t){var n=void 0,i=void 0,o=void 0,d=(t.clipboardData||window.clipboardData).getData("text/html");if(d){(d.includes("/video/play/")||d.includes("/page/")&&d.includes("org_tok"))&&(n=window.location.hostname||"",o=window.location.pathname,i="Copy Link Html")}if(!n){var a=(t.clipboardData||window.clipboardData).getData("text");if(a){(a.includes("/video/play/")||a.includes("/page/")&&a.includes("org_tok"))&&(n=window.location.hostname||"",o=window.location.pathname,i="Copy Link Plain Text")}}n&&i&&o&&e&&e.postMessage({trackHippoVideoLinkPasting:!0,hostname:n,copyMedium:i,pathname:o,messageFromContentScript1234:!0})}))}var injectedAlready=document.getElementById("hippowiz-ass-injected"),askedToInjectCS,runtimePort,isHippovideoExtension=!0,dynamicIntegInjected,moniterPasteEventBinded=!1;if(!injectedAlready){dynamicIntegInjected=!1,askedToInjectCS=!1;var hippowizExtension=document.createElement("input");hippowizExtension.type="hidden",hippowizExtension.id="hippowiz-ass-injected",hippowizExtension.value="true",document.body.appendChild(hippowizExtension),hippowizExtension=document.createElement("input"),hippowizExtension.type="hidden",hippowizExtension.id="hvmessage-toextension-listener",hippowizExtension.value="none",document.body.appendChild(hippowizExtension),document.getElementById("hvmessage-toextension-listener").addEventListener("es_loaded",askToInjectContentScript,!1),document.getElementById("hvmessage-toextension-listener").addEventListener("ew_message",embedWidgetMessage,!1),onPageLoad(onPageLoaded)}