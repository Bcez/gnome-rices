var injectedAlready=document.getElementById("hippowiz-groove-dynamic-injected"),HTML_CONTENT={hippo_button:"<div class='hv-embed-main-container'><button class='tox-tbtn' data-ref='hv-embed-main-container' data-type='record_and_library' data-hint='Hippo Video' type='button'><span class='tox-icon tox-tbtn__icon-wrap'><img class='icon_image' height='22' width='22' src='https://hippolms-wiz-static.s3.amazonaws.com/images/gmail_add_on/video-icon-orange.svg'></span></button><span class='hv-tooltiptext'>Hippo Video</span></div>"},copyToClipboard=void 0;if(!injectedAlready){var hippoCsInjected='<input type=hidden id="hippowiz-groove-dynamic-injected" value=true />';$(hippoCsInjected).appendTo("body");var copyToClipboardBtn='<button class="copy-to-clipboard" data-clipboard-target="#copy-to-clipboard-btn" style="display:none;"></button>';$(copyToClipboardBtn).appendTo("body"),console.log("injected Groove dynamic script"),$(document).ready(function(){function e(e){var t=document.getElementById(e);if(t&&t.getAttribute("value"))return t.getAttribute("value")}function t(){return{serviceName:c.serviceName,windowId:c.windowId,tabId:c.tabId}}function o(e){var t,o,n,i;e=e.content,t=e.assetContent.videoShareUrl,o=e.assetContent.thumbnailShareUrl,i=e.assetContent.mfSelectionType,n={Email:"leads"==i?"{!Lead.Email}":"{!Contact.Email}","First Name":"leads"==i?"{!Lead.FirstName}":"{!Contact.FirstName}","Last Name":"leads"==i?"{!Lead.LastName}":"{!Contact.LastName}",Country:"leads"==i?"{!Lead.Country}":"{!Contact.MailingCountry}",City:"leads"==i?"{!Lead.City}":"{!Contact.MailingCity}","Phone Number":"leads"==i?"{!Lead.MobilePhone}":"{!Contact.MobilePhone}","Company Name":"leads"==i?"{!Lead.Company}":"{!company}",Title:"leads"==i?"{!Lead.Title}":"{!Contact.Title}",State:"leads"==i?"{!Lead.State}":"{!Contact.MailingState}"};var r=e.assetContent.mfInVideo;r=r||[],r.includes("Email")||r.includes("email")||r.push("Email");for(var d="utm_source=hv-campaigns&hreferer=groove_dynamic&",s=0;s<r.length;s++)d=d+encodeURIComponent(r[s])+"="+(n[r[s]]?n[r[s]]:"{!"+r[s]+'|| "" }')+"&";""!=d&&(t+=t.includes("?")?"&"+d:"?"+d,o+=o.includes("?")?"&"+d:"?"+d),jQuery(function(){jQuery(".copy-to-clipboard").click()}),copyToClipboard=new ClipboardJS(".copy-to-clipboard",{target:function(){return a(t,o)}}),copyToClipboard.on("success",function(e){$("#copyLinkWithThumbnailTarget").remove()}),$("#hvGroovePop").remove()}function a(e,t){return $("#copyLinkWithThumbnailTarget").remove(),$("body").append('<div id="copyLinkWithThumbnailTarget" aria-hidden="true" tabindex="-1" >'+n(e,t)+"</div>"),document.querySelector("#copyLinkWithThumbnailTarget")}function n(e,t){return'<a href="'+e+'" target="_blank" tabindex="-1"><img src="'+t+'" alt="'+e+'" style="cursor: pointer;" width="360" height="200"></a><div><a href="'+e+'" target="_blank" tabindex="-1" style="cursor: pointer;">Watch Video</a></div><div><br></div>'}function i(e){var t=$(e).find(".tox-toolbar__group");t.length>0&&$(t[t.length-1]).prepend($(HTML_CONTENT.hippo_button)),$(".hv-embed-main-container").on("click",s)}function r(e){var o=t();o.messageFromContentScript1234=!0,o.initWorkflowPop=!0,o.msgType="workflow",o.payload={logPrefix:c.logPrefix,popType:"sales",popId:"hvGroovePop",popConfig:{showEditOption:!0,showTemplatesOption:!1,showContactsOption:!1,showVideoPageLibrary:!0,addSalesUtmParams:!1,popReinitConditions:[],showMfForm:!1,showMfSelection:!0,fetchMfInVideo:!0,mandatoryEmailMf:!1,insertVideoText:"COPY TO CLIPBOARD",showCustomizeComponent:!0,showLandingPageComponent:!0,showTelePrompter:!0}},c.port.postMessage(o)}function d(e){var o=e.workflowConfig,a=t();a.messageFromContentScript1234=!0,a.messageType="groove_dynamic",a.getUTMToken=!0,a.popId=o.popId,a.content=o,a.serviceName=c.serviceName,c.port.postMessage(a)}function s(){$("#hvGroovePop").remove(),r()}var c=function(){var t={};return t.serviceName=e("hvIntegName"),t.windowId=Number(e("hvWindowId")),t.tabId=Number(e("hvTabId")),t.logPrefix=" GROOVE_DYNAMIC :: ",t.port=chrome.extension.connect({name:t.serviceName+"::"+t.windowId+"::"+t.tabId}),t}();!function(){var e=t();e.messageFromContentScript1234=!0,e.injectHvWorkflowScripts=!0,c.port.postMessage(e)}(),c.port.onMessage.addListener(function(e,t,a){if(msgFromPort=e.backgroundRecordingMessage,"insertFromWorkflowPop"==msgFromPort&&e.data.serviceName==c.serviceName&&e.data.tabId==c.tabId&&d(e.data),"insertVideoInGroove"==msgFromPort&&e.data.tabId==c.tabId){o(e.data)}}),MutationObserver=window.MutationObserver||window.WebKitMutationObserver,new MutationObserver(function(e,t){for(var o in e){var a=e[o];$(a.target).hasClass("tox-toolbar__primary")&&0==$(".hv-embed-main-container").length&&i(a.target)}}).observe(document,{subtree:!0,childlist:!0,attributes:!0})})}