var injectedAlready=document.getElementById("hippowiz-datazoic-dynamic-injected"),HTML_CONTENT={hippo_button:"<button id='hippo_video_button' data-ref='hv-embed-main-container' data-type='record_and_library' class='fr-command fr-btn fr-btn-font_awesome' data-hint='Hippo Video' type='button'><img src='https://hippolms-wiz-static.s3.amazonaws.com/images/gmail_add_on/video-icon-orange.svg' class='icon_image'><span class='fr-sr-only'>Hippo Video</span> </button>"};if(!injectedAlready){var hippoCsInjected='<input type=hidden id="hippowiz-datazoic-dynamic-injected" value=true />';$(hippoCsInjected).appendTo("body"),console.log("injected Datazoic dynamic script"),$(document).ready(function(){function e(e){var t=document.getElementById(e);if(t&&t.getAttribute("value"))return t.getAttribute("value")}function t(){return{serviceName:c.serviceName,windowId:c.windowId,tabId:c.tabId}}function o(e){var t=e.track_id,o=e.content.assetContent,i=o.mfInVideo,n=o.videoShareUrl,r=o.thumbnailShareUrl,d=o.html,s=o.videoTitle,c={Email:"{email_id}","First Name":"{contact_first_name}","Last Name":"{contact_last_name}",Country:"","Phone Number":"",City:"",Address:"",State:"",Title:"","Company Name":""};if(1==e.status)n+=n.includes("?")?"&track_id="+t:"?track_id="+t,r+=r.includes("?")?"&track_id="+t:"?track_id="+t;else{var p="";if(i.length>0){i.includes("email")||i.includes("Email")||i.push("Email");for(var m=0;m<i.length;m++)m>0&&(p+="&"),p+=i[m]+"="+c[i[m]]}else p="Email={email_id}&First Name={contact_first_name}&Last Name={contact_last_name}";n+=n.includes("?")?"&"+p:"?"+p,r+=r.includes("?")?"&"+p:"?"+p}if(d=a(d,o.thumbnailShareUrl,n,r,s),$("#contentEditor").length>0){var l=$(".fr-element.fr-view");$(l).append(d)}$("#hvDatazoicPop").remove()}function a(e,t,o,a,n){for(var r=$(e).find("a"),d=0;d<r.length;d++){var s=r[d],c=s.outerHTML.replace(/&amp;/g,"&");if(c.includes(t)){var p=i(o,a);e=e.includes(s.outerHTML)?e.replace(s.outerHTML,p):e.includes(c)?e.replace(c,p):e.replace(s.outerHTML,p)}}return e}function i(e,t){return'<a href="'+e+'" target="_blank" tabindex="-1"><img id="hv_thumbnail" src="'+t+'" alt="'+e+'" style="cursor: pointer; width:360px; height:200px; margin:0px"></a><div style="padding-top: 7px;"><a href="'+e+'" target="_blank" tabindex="-1" style="cursor: pointer;">Watch Video</a></div><div><br></div>'}function n(e){$("#hippo_video_button").remove(),$(e).length>0&&$(e).append($(HTML_CONTENT.hippo_button)),$("#hippo_video_button").on("click",s)}function r(e){var o=t();o.messageFromContentScript1234=!0,o.initWorkflowPop=!0,o.msgType="workflow",o.payload={logPrefix:c.logPrefix,popType:"sales",popId:"hvDatazoicPop",assetContent:{mfFormValues:{"First Name":""}},popConfig:{showEditOption:!0,showTemplatesOption:!1,showContactsOption:!1,showVideoPageLibrary:!0,addSalesUtmParams:!1,popReinitConditions:[],showMfForm:!1,fetchMfInVideo:!0,mandatoryEmailMf:!0,showCustomizeComponent:!0,showTelePrompter:!0,showLandingPageComponent:!0}},c.port.postMessage(o)}function d(e){var o=e.workflowConfig,a=t();a.messageFromContentScript1234=!0,a.messageType="datazoic_dynamic",a.getUTMToken=!0,a.popId=o.popId,a.content=o,a.serviceName=c.serviceName,c.port.postMessage(a)}function s(){$("#hvDatazoicPop").remove(),r()}var c=function(){var t={};return t.serviceName=e("hvIntegName"),t.windowId=Number(e("hvWindowId")),t.tabId=Number(e("hvTabId")),t.logPrefix=" DATAZOIC_DYNAMIC :: ",t.port=chrome.extension.connect({name:t.serviceName+"::"+t.windowId+"::"+t.tabId}),t}();!function(){var e=t();e.messageFromContentScript1234=!0,e.injectHvWorkflowScripts=!0,c.port.postMessage(e)}(),c.port.onMessage.addListener(function(e,t,a){if(msgFromPort=e.backgroundRecordingMessage,"insertFromWorkflowPop"==msgFromPort&&e.data.serviceName==c.serviceName&&e.data.tabId==c.tabId&&d(e.data),"insertVideoInDatazoicMailBox"==msgFromPort&&e.data.tabId==c.tabId){o(e.data)}}),MutationObserver=window.MutationObserver||window.WebKitMutationObserver,new MutationObserver(function(e,t){for(var o in e){var a=e[o];"bulkMailModal"==a.target.id&&0==$("#prwcontentEditor").length&&(n($(".fr-toolbar.fr-desktop.fr-top.fr-basic")),$("#hippo_video_button").removeClass(),$("#hippo_video_button").addClass($(".fr-toolbar.fr-desktop.fr-top.fr-basic")[0].children[0].className)),"prwcontentEditor"==a.target.id&&$("#hippo_video_button").length>0&&($("#hippo_video_button").removeClass(),$("#hippo_video_button").addClass($(".fr-toolbar.fr-desktop.fr-top.fr-basic")[0].children[0].className))}}).observe(document,{subtree:!0,childlist:!0,attributes:!0})})}