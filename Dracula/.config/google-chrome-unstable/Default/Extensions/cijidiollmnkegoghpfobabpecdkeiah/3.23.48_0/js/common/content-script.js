function devOnlyDebugLog(e){runtimePort.postMessage({devOnlyDebugLog:!0,messageFromContentScript1234:!0,data:e})}function webcamHideShow(e){$("#hvWebCam").hasClass("hv-icon-selected")?highlightsFocus.hideWebcam(e):highlightsFocus.showWebcam(e)}function initiateWebcamTour(){showWebcamTour=!0,runtimePort.postMessage({injectCsAndAssWhileWebcamTour:!0,senderInfo:{tabId:tabId},messageFromContentScript1234:!0}),startWebcamTour()}function startWebcamTour(){appendWebcamTourTemplate(),bindWebcamTourBtnEvents(),trackUserActivity("webcamtour::","tour started"),showWebcamTourMessage(1)}function appendWebcamTourTemplate(){var e=chrome.extension.getURL("/images/injected/arrow-flat-orange.svg"),i="<div id='hv-tour-container'>                                    <div id='hv-tour-inner-container'>                                        <div id='hv-tour-section-top'></div>                                        <div id='hv-tour-section-bottom'>                                            <div id='hv-tour-section-bottom-left'>Skip</div>                                            <div id='hv-tour-section-bottom-right' data-next-step='2'>Next                                                <span id='hv-tour-next-arrow'>&#8594;</span>                                            </div>                                        </div>                                    </div>                                    <img id='hv-tour-msg-arrow' src='"+e+"'/>                                </div>";$(i).appendTo("body")}function bindWebcamTourBtnEvents(){$("#hv-tour-section-bottom-left").unbind("click").bind("click",function(e){e.stopPropagation(),stopWebcamTour(),trackUserActivity("webcamtour::","tour skipped")}),$("#hv-tour-section-bottom-right").unbind("click").bind("click",function(e){e.stopPropagation(),gotoTourNextStep()})}function gotoTourNextStep(){var e=parseInt($("#hv-tour-section-bottom-right").attr("data-next-step"));if(e<1)return stopWebcamTour(),void trackUserActivity("webcamtour::","tour finished");showWebcamTourMessage(e)}function showWebcamTourMessage(e){var i=recordingConfiguration.webcamPosition||"bottom-left",o=recordingConfiguration.webcamSize||"large";switch(e){case 1:$("#hv-tour-container").show(),$("#hv-tour-section-top").text("Click on any area outside the webcam to minimize preview."),$("#hv-tour-container").addClass("hv-tour-container-webcam-bottom-center"),$("#hv-tour-msg-arrow").addClass("hv-tour-msg-arrow-webcam-center"),$("#hv-tour-section-bottom-right").attr("data-next-step",++e),trackUserActivity("webcamtour::","webcam at center");break;case 2:$("#hv-tour-section-top").text("Click twice on the minimized webcam preview to enlarge it back to the original size."),$("#hippo-overlay-frame").removeClass("hv-webcam-circle-center-align-tour"),$("#hv-tour-container").removeClass().addClass("hv-tour-container-webcam-"+i+"-"+o),$("#hv-tour-msg-arrow").removeClass().addClass("hv-tour-msg-arrow-webcam-"+i),$("#hv-tour-section-bottom-right").attr("data-next-step",++e),trackUserActivity("webcamtour::","webcam at corner");break;case 3:$("#hv-tour-section-top").text("Click on the toolbar below to explore more options.");var t="bottom-right"==i?"left":"right";$("#hv-tour-container").removeClass().addClass("hv-tour-container-markuptool-bottom-"+t),$("#hv-tour-msg-arrow").removeClass().addClass("hv-tour-msg-arrow-markuptool-bottom-"+t),$("#hv-tour-section-bottom-right").attr("data-next-step",++e),trackUserActivity("webcamtour::","markuptool minimized");break;case 4:highlightsFocus.openHighlights(),$("#hv-tour-section-bottom").addClass("flex-dir-row-reverse"),$("#hv-tour-section-top").text("Select from a wide range of mark-up tools to pause and play your video or toggle your webcam."),$("#hv-tour-section-bottom-left").hide(),$("hv-tour-msg-arrow").hide(),$("#hv-tour-section-bottom-right").attr("data-next-step",-1),$("#hv-tour-section-bottom-right").css({"padding-right":"20px"}).text("Finish"),trackUserActivity("webcamtour::","markuptool maximized")}}function disableMarkuptoolIcons(){$("#hvPause, #hvPlay, #hvStop").addClass("hv-icon-out-disable")}function enableMarkuptoolIcons(){$("#hvPause, #hvPlay, #hvStop").removeClass("hv-icon-out-disable")}function stopWebcamTour(e,i){cleanUpWebcamTourAssets(),cleanUpWebcamTourVariables(),enableMarkuptoolIcons(),$("#hippo-overlay-frame").removeClass("hv-webcam-circle-center-align-tour").addClass("hv-webcam-circle-center-align"),e||i||(highlightsFocus.selectHiglightOptions("hvCursorAnimation"),"google-slides"==recordingConfiguration.initiator?($("#hippo-overlay-frame").hide(),$("#hippo-overlay-background").remove(),removeHighlightComponent(),addWebcamPreviewAssets($("#hippo-overlay-frame")[0],recordingConfiguration)):startOverlayCountdown(),chrome.storage.sync.set({webcamTourShown:!0}),runtimePort.postMessage({stopWebcamTour:!0,senderInfo:{tabId:tabId},messageFromContentScript1234:!0}),runtimePort.postMessage({getHighlightState:!0,messageFromContentScript1234:!0}))}function hideMarkuptoolAndIcons(e){if(showWebcamTour){var i=parseInt($("#hv-tour-section-bottom-right").attr("data-next-step"));e&&-1!=i&&highlightsFocus.closeHighlights(),disableMarkuptoolIcons()}}function cleanUpWebcamTourAssets(){$("#hv-tour-container")&&$("#hv-tour-container").remove(),$("#hippo-overlay-background").removeClass("overlay-background-z-index")}function cleanUpWebcamTourVariables(){recordingConfiguration.showWebcamTour=!1,showWebcamTour=!1}function dataURItoBlob(e){for(var i=atob(e.split(",")[1]),o=e.split(",")[0].split(":")[1].split(";")[0],t=new ArrayBuffer(i.length),s=new Uint8Array(t),n=0;n<i.length;n++)s[n]=i.charCodeAt(n);return new Blob([t],{type:o})}function showOverlayCountdown(){if(runtimePort.postMessage({imCountingDown:!0,messageFromContentScript1234:!0}),!$("#onboard-frame").length&&(recordingConfiguration.webCam||recordingConfiguration.pseudoWebcam||recordingConfiguration.audio)){var e=document.createElement("iframe");e.src=chrome.runtime.getURL("html/injected/whilerecording.html"),e.setAttribute("allow","microphone; camera"),e.id="onboard-frame",e.style.cssText="position:fixed;top:0;left:0;width:100%;height:100%;z-index:1000;border:0;"}}function startOverlayCountdown(){$(".hv-feature-intro-div").fadeOut(100);var e=(new Date,3),i="41.5%",o="30%",t="generic_embed"==recordingConfiguration.initiator||"lessonly"==recordingConfiguration.initiator;injectWebcam(!1),$("#onboard-frame").remove(),!recordingConfiguration.separateLayer&&(recordingConfiguration.webCam||recordingConfiguration.pseudoWebcam||recordingConfiguration.audio)&&$("#hippo-inner-div").length>0&&(i=$("#hippo-inner-div").outerWidth()/2-$("#hippo-overlay-time").outerWidth()/2+$("#hippo-inner-div").position().left+"px",o=$("#hippo-inner-div").outerHeight()/2-$("#hippo-overlay-time").outerHeight()/2+$("#hippo-inner-div").position().top+"px"),$("#hippo-overlay-time").css("left",i),$("#hippo-overlay-time").css("top",o),t&&$("#hippo-overlay-time").addClass("hippo-embed-countdown"),$("#hippo-overlay-time").show(),$("#countdown").html(e);var s=setInterval(function(){$("#countdown").html(--e>0?e:t?chrome.i18n.getMessage("go"):'<span style="font-size: 32px !important;margin-top: 11px;margin-left: -11px;"> '+chrome.i18n.getMessage("go")+"</span>"),e<0&&(recordingConfiguration.highlights&&(devOnlyDebugLog("getMarkupToolState from countdown reached 0"),getMarkupToolState()),clearInterval(s),recordingConfiguration.separateLayer||0==recordingConfiguration.webCam&&0==recordingConfiguration.pseudoWebcam&&0==recordingConfiguration.audio?(recordInitiator&&$("#actiontoextension").val("started"),$("#hippo-overlay-time").fadeOut(200,function(){$(".hv-blink-left, .hv-blink-right").show(),$("#hippo-overlay-time").removeClass("hippo-embed-countdown"),countdownComplete=!0,runtimePort.postMessage({countdownComplete:!0,messageFromContentScript1234:!0,onlyScreenRecording:!recordingConfiguration.webCam&&!recordingConfiguration.pseudoWebcam&&!recordingConfiguration.audio})})):(recordInitiator&&$("#actiontoextension").val("started"),$("#hippo-overlay-frame").fadeIn(),$("#hippo-overlay-time").fadeOut(200,function(){recordingConfiguration.pseudoWebcam&&(overlayBackgroundBindEvents(),$("#hippo-overlay-background").show(),highlightsFocus.showWebcam()),$("#hippo-overlay-time").removeClass("hippo-embed-countdown"),$(".hv-blink-left, .hv-blink-right").show(),countdownComplete=!0,runtimePort.postMessage({countdownComplete:!0,messageFromContentScript1234:!0,onlyScreenRecording:!recordingConfiguration.webCam&&!recordingConfiguration.pseudoWebcam&&!recordingConfiguration.audio})})),initializeAndShowPreviewControls())},1e3)}function showCountdown(){if(runtimePort.postMessage({imCountingDown:!0,messageFromContentScript1234:!0}),countdownComplete=!1,recordInitiator&&!$("#onboard-frame").length&&(recordingConfiguration.webCam||recordingConfiguration.pseudoWebcam||recordingConfiguration.audio)){var e=document.createElement("iframe");e.src=chrome.runtime.getURL("html/injected/whilerecording.html"),e.setAttribute("allow","microphone; camera"),e.id="onboard-frame",e.style.cssText="position:fixed;top:0;left:0;width:100%;height:100%;z-index:1000;border:0;"}}function startCountdown(){$(".hv-feature-intro-div").fadeOut(100);var e=(new Date,3);$("#onboard-frame").remove(),$("#hippo-overlay-time-home").show(),recordingConfiguration.isNewRecordingScreen&&($(".hvrecorder-loading-wrapper").addClass("disp-none"),$(".hvrecorder-countdown-wrapper").removeClass("disp-none")),injectWebcam(!1),$("#countdown-home").html(e);var i=setInterval(function(){recordingConfiguration.isNewRecordingScreen?$(".hvrecorder-video-container #countdown-home").html(--e>0?e:chrome.i18n.getMessage("go")):$("#countdown-home").html(--e>0?e:"<span style='font-size: 30px !important;margin-top: 23px;margin-left: -6px;'>"+chrome.i18n.getMessage("go")+"</span>"),e<0&&(recordingConfiguration.highlights&&(devOnlyDebugLog("getMarkupToolState countdown reached 0 - startCountdown"),getMarkupToolState()),clearInterval(i),recordingConfiguration.separateLayer||0==recordingConfiguration.webCam&&0==recordingConfiguration.pseudoWebcam&&0==recordingConfiguration.audio?(recordInitiator&&$("#actiontoextension").val("started"),recordingConfiguration.isNewRecordingScreen&&$(".hvrecorder-countdown-wrapper").addClass("disp-none"),$("#hippo-overlay-time-home").fadeOut(200,function(){countdownComplete=!0,runtimePort.postMessage({countdownComplete:!0,messageFromContentScript1234:!0,onlyScreenRecording:!recordingConfiguration.webCam&&!recordingConfiguration.pseudoWebcam&&!recordingConfiguration.audio})})):(recordInitiator&&$("#actiontoextension").val("started"),recordingConfiguration.isNewRecordingScreen&&$(".hvrecorder-countdown-wrapper").addClass("disp-none"),$("#hippo-overlay-frame").fadeIn(),$("#hippo-overlay-time-home").fadeOut(200,function(){countdownComplete=!0,recordingConfiguration.pseudoWebcam&&$("#hippo-overlay-background").show(),runtimePort.postMessage({countdownComplete:!0,messageFromContentScript1234:!0,onlyScreenRecording:!recordingConfiguration.webCam&&!recordingConfiguration.pseudoWebcam&&!recordingConfiguration.audio})})),initializeAndShowPreviewControls())},1e3)}function injectWebcam(e){if(!recordingConfiguration.separateLayer&&(recordingConfiguration.pseudoWebcam||recordingConfiguration.webCam||!recordingConfiguration.screenRecord&&recordingConfiguration.audio)&&0==$("#hippo-overlay-frame").length)if(recordingConfiguration.screenRecord){$("#hippo-overlay-frame").remove();var i=document.createElement("iframe");if(i.id="hippo-overlay-frame",void 0==recordingConfiguration.webcamSize&&(recordingConfiguration.webcamSize="large"),void 0==recordingConfiguration.webcamShape&&(recordingConfiguration.webcamShape="rectangle"),void 0==recordingConfiguration.webcamPosition&&(recordingConfiguration.webcamPosition="bottom-left"),i.src=chrome.runtime.getURL("html/injected/preview-while-recording.html?sizePosition="+recordingConfiguration.webcamSize+"_"+recordingConfiguration.webcamPosition+"&shape="+recordingConfiguration.webcamShape),recordingConfiguration.pseudoWebcam){var o=recordingConfiguration.webcamSize+"_"+recordingConfiguration.webcamPosition+"_"+recordingConfiguration.aspectRatio,t=recordingConfiguration.lowerThird,s="html/injected/custom-webcam-preview.html?center=false&audioMeter=false&changeWebcamSize=true&sizePositionAspectRatio="+o+"&webcamShape=circle&isLowerThirdEnabled="+t;0==recordingConfiguration.isWebcamPreviewMaximized?s+="&camResizeValue=minimize":1!=recordingConfiguration.isWebcamPreviewMaximized&&void 0!=recordingConfiguration.isWebcamPreviewMaximized||(s+="&camResizeValue=maximize"),i.src=chrome.runtime.getURL(s),addWebcamPreviewAssets(i,recordingConfiguration)}i.setAttribute("allow","microphone; camera"),document.body.appendChild(i),"circle"==recordingConfiguration.webcamShape&&$("#hippo-overlay-frame").addClass("hv-webcam-shape-circle-"+recordingConfiguration.webcamSize),$("#hippo-overlay-frame").addClass("hv-webcam-rectangle-"+recordingConfiguration.webcamPosition),e&&$(i).show()}else appendWebCam(e)}function addWebcamPreviewAssets(e,i){if($("#hippo-overlay-background").length<=0){var o=document.createElement("div");o.id="hippo-overlay-background",document.body.appendChild(o),overlayBackgroundBindEvents()}i.showWebcamTour?$(e).addClass("hv-webcam-circle-center-align-tour"):0==i.countdownComplete?($("#hippo-overlay-background").hide(),$(e).addClass("hv-webcam-circle-center-align"),$(e).addClass("webcam-small-resize")):void 0==i.isWebcamPreviewMaximized||1==i.isWebcamPreviewMaximized?($("#hippo-overlay-background").show(),$(e).addClass("hv-webcam-circle-center-align"),$(e).addClass("webcam-small-resize")):($("#hippo-overlay-background").hide(),$(e).removeClass("hv-webcam-circle-center-align"),$(e).addClass("webcam-small-resize"))}function webcamPreviewDblClickHandler(){if(showWebcamTour){3==parseInt($("#hv-tour-section-bottom-right").attr("data-next-step"))&&gotoTourNextStep(),$("#hippo-overlay-background").removeClass("overlay-background-z-index")}$("#hippo-overlay-background").show(),toggleWebcam("maximize")}function overlayBackgroundBindEvents(){$("#hippo-overlay-background").unbind("click").bind("click",overlayBackgroundClickHandler)}function overlayBackgroundClickHandler(e){if(showWebcamTour){2==parseInt($("#hv-tour-section-bottom-right").attr("data-next-step"))&&gotoTourNextStep(),$("#hippo-overlay-background").addClass("overlay-background-z-index")}else $("#hippo-overlay-background").hide(),e&&runtimePort.postMessage({webcamPreviewMinimized:!0,senderInfo:{tabId:tabId},messageFromContentScript1234:!0});toggleWebcam("minimize")}function toggleWebcam(e){var i=showWebcamTour?"hv-webcam-circle-center-align-tour":"hv-webcam-circle-center-align",o=document.getElementById("hippo-overlay-frame").src;switch(e){case"minimize":$("#circleWebcamPreviewWithLowerthird"),$("#webcamPreview");$("#webcamPreview").addClass("sampleCheckClass"),$("#hippo-overlay-frame").removeClass(i),$("#hippo-overlay-frame").removeClass("webcam-small-resize"),$("#hippo-overlay-frame").hasClass("hv-webcam-shape-circle-small")&&$("#webcamPreview").addClass("webcamCircle_objPosition_small"),o.includes("camResizeValue=maximize")?o=o.replace("camResizeValue=maximize","camResizeValue=minimize"):o+="&camResizeValue=minimize";break;case"maximize":$("#hippo-overlay-frame").addClass(i),$("#hippo-overlay-frame").addClass("webcam-small-resize"),o.includes("camResizeValue=minimize")?o=o.replace("camResizeValue=minimize","camResizeValue=maximize"):o+="&camResizeValue=maximize"}}function injectHighlightAndFocus(){if($(".hv-highlight-feature-panel").length>0)return void hideMarkuptoolAndIcons(!0);var e=!1;recordingConfiguration&&recordingConfiguration.webCam&&!recordingConfiguration.screenRecord&&recordingConfiguration.isNewRecordingScreen&&(e=!0);var i=markupToolEnabled,o=recordingConfiguration.webcamPosition;recordingConfiguration.showWebcamTour&&(i=!0,o=o||"bottom-left");var t="Press "+("mac"===os?"Option":"Alt")+"  + O for Open",s="Press "+("mac"===os?"Option":"Alt")+" + H for Highlight",n=recordingConfiguration.pseudoWebcam?"hv-active-tool hv-icon-selected":"hv-icon-unslected disp-none",r={class:"hv-action-component hv-highlight-feature-panel"};e&&(r.css={display:"none"}),r.class="bottom-right"==o?r.class+" hv-act-comp-bottom-left":r.class+" hv-act-comp-bottom-right";var a=$("<div>",r);if("bottom-right"==o)if(i){var c='<div class="hv-highlight-options-div">                        <span class="hv-togarrow-spacer hv-close-highlights" id="hvCloseHighlight">                            <img src="'+highlightsFocus.minimizeIcon+'" class=" hv-togarrow-left" id="hvMinimizeImg" />                            <img src="'+highlightsFocus.minimizeIconActive+'" class=" hv-togarrow-left" id="hvMinimizeImgActive" />                        </span>                        <span class="hv-highlight-option hv-icon-out-space '+n+'" id="hvWebCam">                            <img src="'+highlightsFocus.webcamIcon+'"  id="hvWebCamImg" />                            <img src="'+highlightsFocus.webcamIconActive+'"  id="hvWebCamImgActive" />                        </span>                        <span class="hv-highlight-option hv-icon-out-space hv-icon-unslected" id="hvClearScreen">                            <img src="'+highlightsFocus.clearIcon+'"  id="hvClearImg" />                            <img src="'+highlightsFocus.clearIconActive+'"  id="hvClearImgActive" />                        </span>                        <span class="hv-highlight-option hv-icon-out-space hv-icon-unslected" id="hvEraser">                            <img src="'+highlightsFocus.eraseIcon+'" class=" hv-custom-mouse-erase-cursor" id="hvEraseImg" />                            <img src="'+highlightsFocus.eraseIconActive+'" class=" hv-custom-mouse-erase-cursor" id="hvEraseImgActive" />                        </span>                        <span class="hv-highlight-option hv-icon-out-space hv-icon-unslected" id="hvFocusArea">                            <img src="'+highlightsFocus.focusIcon+'"  id="hvFocusImg" />                            <img src="'+highlightsFocus.focusIconActive+'"  id="hvFocusImgActive" />                        </span>                        <span class="hv-highlight-option hv-icon-out-space hv-icon-unslected" id="hvPen">                            <img src="'+highlightsFocus.penIcon+'"  id="hvPenImg" />                            <img src="'+highlightsFocus.penIconActive+'"  id="hvPenImgActive" />                        </span>                        <span class="hv-highlight-option hv-icon-out-space hv-icon-unslected" id="hvCursorAnimation">                            <img src="'+highlightsFocus.mouseAnimationIcon+'" id="hvCursorAnimationImg" class=" hv-custom-mouse-pen-cursor" />                            <img src="'+highlightsFocus.mouseAnimationIconActive+'" id="hvCursorAnimationImgActive" class=" hv-custom-mouse-pen-cursor" />                        </span>                        <span class="hv-highlight-option hv-icon-out-space hv-icon-unslected" id="hvStop">                            <img src="'+highlightsFocus.stopIcon+'" id="hvStopImg"/>                            <img src="'+highlightsFocus.stopIconActive+'" id="hvStopImgActive"/>                        </span>                        <span class="hv-pause-play hv-icon-out-space" id="hvPause">                            <img src="'+highlightsFocus.pauseIcon+'" id="hvPauseImg"/>                            <img src="'+highlightsFocus.pauseIconActive+'" id="hvPauseImgActive"/>                        </span>                        <span class="hv-pause-play hv-icon-out-space disp-none" id="hvPlay">                            <img src="'+highlightsFocus.playIcon+'" id="hvPlayImg"/>                            <img src="'+highlightsFocus.playIconActive+'" id="hvPlayImgActive"/>                        </span>                        <div class="hv-choose-color-panel">                            <div id="#000000" class="hv-change-color-circle hv-black-color"></div>                            <div id="#ff0000" class="hv-change-color-circle hv-red-color"></div>                            <div id="#8170cd" class="hv-change-color-circle hv-violet-color"></div>                            <div id="#ff9a44" class="hv-change-color-circle hv-orange-color"></div>                            <div id="#7ddc68" class="hv-change-color-circle hv-green-color"></div>                            <div id="#1edde1" class="hv-change-color-circle hv-blue-color"></div>                        </div>                    </div>                    <div class="hv-collapsed disp-none hv-open-highlights hv-collapsed-move" id="hvOpenHighlight" title="'+t+'">                        <img id="collapsDotsIcon" src="'+highlightsFocus.collapsIcon+'" id="hvCollapseImg" class="hv-collapsed-icon" />                        <img id="collapsDotsIconActive" src="'+highlightsFocus.collapsIconActive+'" id="hvCollapseImgActive" class="hv-collapsed-icon" />                    </div>                    <div class="hv-tooltip-panel">'+s+"</div>",g=getMarkupToolFocusComponent();$(g).appendTo("body")}else var c='<div class="hv-highlight-options-div">                        <span class="hv-togarrow-spacer hv-close-highlights" id="hvCloseHighlight">                            <img src="'+highlightsFocus.minimizeIcon+'" class=" hv-togarrow-left" id="hvMinimizeImg" />                            <img src="'+highlightsFocus.minimizeIconActive+'" class=" hv-togarrow-left" id="hvMinimizeImgActive" />                        </span>                        <span class="hv-highlight-option hv-icon-out-space '+n+'" id="hvWebCam">                            <img src="'+highlightsFocus.webcamIcon+'"  id="hvWebCamImg" />                            <img src="'+highlightsFocus.webcamIconActive+'"  id="hvWebCamImgActive" />                        </span>                        <span class="hv-icon-out-space hv-icon-out-disable hv-icon-unslected" id="disabledState">                            <img src="'+highlightsFocus.clearIcon+'"  id="" />                        </span>                        <span class="hv-icon-out-space hv-icon-out-disable hv-icon-unslected" id="disabledState">                            <img src="'+highlightsFocus.eraseIcon+'" class=" hv-custom-mouse-erase-cursor" id="" />                        </span>                        <span class="hv-icon-out-space hv-icon-out-disable hv-icon-unslected" id="disabledState">                            <img src="'+highlightsFocus.focusIcon+'"  id="" />                        </span>                        <span class="hv-icon-out-space hv-icon-out-disable hv-icon-unslected" id="disabledState">                            <img src="'+highlightsFocus.penIcon+'"  id="" />                        </span>                        <span class="hv-icon-out-space hv-icon-out-disable active-tool hv-icon-selected" id="disabledState">                            <img src="'+highlightsFocus.mouseAnimationIcon+'" id="" class=" hv-custom-mouse-pen-cursor" />                        </span>                        <span class="hv-highlight-option hv-icon-out-space hv-icon-unslected" id="hvStop">                            <img src="'+highlightsFocus.stopIcon+'" id="hvStopImg"/>                            <img src="'+highlightsFocus.stopIconActive+'" id="hvStopImgActive"/>                        </span>                        <span class="hv-pause-play hv-icon-out-space" id="hvPause">                            <img src="'+highlightsFocus.pauseIcon+'" id="hvPauseImg"/>                            <img src="'+highlightsFocus.pauseIconActive+'" id="hvPauseImgActive"/>                        </span>                        <span class="hv-pause-play hv-icon-out-space disp-none" id="hvPlay">                            <img src="'+highlightsFocus.playIcon+'" id="hvPlayImg"/>                            <img src="'+highlightsFocus.playIconActive+'" id="hvPlayImgActive"/>                        </span>                    </div>                    <div class="hv-collapsed disp-none hv-open-highlights hv-collapsed-move" id="hvOpenHighlight" title="'+t+'">                        <img id="collapsDotsIcon" src="'+highlightsFocus.collapsIcon+'" class="hv-collapsed-icon" />                        <img id="collapsDotsIconActive" src="'+highlightsFocus.collapsIconActive+'" class="hv-collapsed-icon" />                        </div>                    <div class="hv-tooltip-panel">'+s+"</div>";else if(i){var c='<div class="hv-highlight-options-div">                    <span class="hv-pause-play hv-icon-out-space" id="hvPause">                        <img src="'+highlightsFocus.pauseIcon+'" id="hvPauseImg"/>                        <img src="'+highlightsFocus.pauseIconActive+'" id="hvPauseImgActive"/>                    </span>                    <span class="hv-pause-play hv-icon-out-space disp-none" id="hvPlay">                        <img src="'+highlightsFocus.playIcon+'" id="hvPlayImg"/>                        <img src="'+highlightsFocus.playIconActive+'" id="hvPlayImgActive"/>                    </span>                    <span class="hv-highlight-option hv-icon-out-space hv-icon-unslected" id="hvStop">                        <img src="'+highlightsFocus.stopIcon+'" id="hvStopImg"/>                        <img src="'+highlightsFocus.stopIconActive+'" id="hvStopImgActive"/>                    </span>                    <span class="hv-highlight-option hv-icon-out-space hv-icon-unslected" id="hvCursorAnimation">                        <img src="'+highlightsFocus.mouseAnimationIcon+'" id="hvCursorAnimationImg" class=" hv-custom-mouse-pen-cursor" />                        <img src="'+highlightsFocus.mouseAnimationIconActive+'" id="hvCursorAnimationImgActive" class=" hv-custom-mouse-pen-cursor" />                    </span>                    <span class="hv-highlight-option hv-icon-out-space hv-icon-unslected" id="hvPen">                        <img src="'+highlightsFocus.penIcon+'"  id="hvPenImg" />                        <img src="'+highlightsFocus.penIconActive+'"  id="hvPenImgActive" />                    </span>                    <span class="hv-highlight-option hv-icon-out-space hv-icon-unslected" id="hvFocusArea">                        <img src="'+highlightsFocus.focusIcon+'"  id="hvFocusImg" />                        <img src="'+highlightsFocus.focusIconActive+'"  id="hvFocusImgActive" />                    </span>                    <span class="hv-highlight-option hv-icon-out-space hv-icon-unslected" id="hvEraser">                        <img src="'+highlightsFocus.eraseIcon+'" class=" hv-custom-mouse-erase-cursor" id="hvEraseImg" />                        <img src="'+highlightsFocus.eraseIconActive+'" class=" hv-custom-mouse-erase-cursor" id="hvEraseImgActive" />                    </span>                    <span class="hv-highlight-option hv-icon-out-space hv-icon-unslected" id="hvClearScreen">                        <img src="'+highlightsFocus.clearIcon+'"  id="hvClearImg" />                        <img src="'+highlightsFocus.clearIconActive+'"  id="hvClearImgActive" />                    </span>                    <span class="hv-highlight-option hv-icon-out-space '+n+'" id="hvWebCam">                        <img src="'+highlightsFocus.webcamIcon+'"  id="hvWebCamImg" />                        <img src="'+highlightsFocus.webcamIconActive+'"  id="hvWebCamImgActive" />                    </span>                    <span class="hv-togarrow-spacer hv-close-highlights" id="hvCloseHighlight">                        <img src="'+highlightsFocus.minimizeIcon+'" class=" hv-togarrow-left" id="hvMinimizeImg" />                        <img src="'+highlightsFocus.minimizeIconActive+'" class=" hv-togarrow-left" id="hvMinimizeImgActive" />                    </span>                    <div class="hv-choose-color-panel">                        <div id="#000000" class="hv-change-color-circle hv-black-color"></div>                        <div id="#ff0000" class="hv-change-color-circle hv-red-color"></div>                        <div id="#8170cd" class="hv-change-color-circle hv-violet-color"></div>                        <div id="#ff9a44" class="hv-change-color-circle hv-orange-color"></div>                        <div id="#7ddc68" class="hv-change-color-circle hv-green-color"></div>                        <div id="#1edde1" class="hv-change-color-circle hv-blue-color"></div>                    </div>                </div>                <div class="hv-collapsed disp-none hv-open-highlights hv-collapsed-move" id="hvOpenHighlight" title="'+t+'">                    <img id="collapsDotsIcon" src="'+highlightsFocus.collapsIcon+'" id="hvCollapseImg" class="hv-collapsed-icon" />                    <img id="collapsDotsIconActive" src="'+highlightsFocus.collapsIconActive+'" id="hvCollapseImgActive" class="hv-collapsed-icon" />                </div>                <div class="hv-tooltip-panel">'+s+"</div>",g=getMarkupToolFocusComponent();$(g).appendTo("body")
}else var c='<div class="hv-highlight-options-div">                    <span class="hv-pause-play hv-icon-out-space" id="hvPause">                        <img src="'+highlightsFocus.pauseIcon+'" id="hvPauseImg"/>                        <img src="'+highlightsFocus.pauseIconActive+'" id="hvPauseImgActive"/>                    </span>                    <span class="hv-pause-play hv-icon-out-space disp-none" id="hvPlay">                        <img src="'+highlightsFocus.playIcon+'" id="hvPlayImg"/>                        <img src="'+highlightsFocus.playIconActive+'" id="hvPlayImgActive"/>                    </span>                    <span class="hv-highlight-option hv-icon-out-space hv-icon-unslected" id="hvStop">                        <img src="'+highlightsFocus.stopIcon+'" id="hvStopImg"/>                        <img src="'+highlightsFocus.stopIconActive+'" id="hvStopImgActive"/>                    </span>                    <span class="hv-icon-out-space hv-icon-out-disable active-tool hv-icon-selected" id="disabledState">                        <img src="'+highlightsFocus.mouseAnimationIcon+'" id="" class=" hv-custom-mouse-pen-cursor" />                    </span>                    <span class="hv-icon-out-space hv-icon-out-disable hv-icon-unslected" id="disabledState">                        <img src="'+highlightsFocus.penIcon+'"  id="" />                    </span>                    <span class="hv-icon-out-space hv-icon-out-disable hv-icon-unslected" id="disabledState">                        <img src="'+highlightsFocus.focusIcon+'"  id="" />                    </span>                    <span class="hv-icon-out-space hv-icon-out-disable hv-icon-unslected" id="disabledState">                        <img src="'+highlightsFocus.eraseIcon+'" class=" hv-custom-mouse-erase-cursor" id="" />                    </span>                    <span class="hv-icon-out-space hv-icon-out-disable hv-icon-unslected" id="disabledState">                        <img src="'+highlightsFocus.clearIcon+'"  id="" />                    </span>                    <span class="hv-highlight-option hv-icon-out-space '+n+'" id="hvWebCam">                        <img src="'+highlightsFocus.webcamIcon+'"  id="hvWebCamImg" />                        <img src="'+highlightsFocus.webcamIconActive+'"  id="hvWebCamImgActive" />                    </span>                    <span class="hv-togarrow-spacer hv-close-highlights" id="hvCloseHighlight">                        <img src="'+highlightsFocus.minimizeIcon+'" class=" hv-togarrow-left" id="hvMinimizeImg" />                        <img src="'+highlightsFocus.minimizeIconActive+'" class=" hv-togarrow-left" id="hvMinimizeImgActive" />                    </span>                </div>                <div class="hv-collapsed disp-none hv-open-highlights hv-collapsed-move" id="hvOpenHighlight" title="'+t+'">                    <img id="collapsDotsIcon" src="'+highlightsFocus.collapsIcon+'" id="hvCollapseImg" class="hv-collapsed-icon" />                    <img id="collapsDotsIconActive" src="'+highlightsFocus.collapsIconActive+'" id="hvCollapseImgActive" class="hv-collapsed-icon" />                </div>                <div class="hv-tooltip-panel">'+s+"</div>";$(c).appendTo(a),$(a).appendTo("body"),$(".hv-highlight-option").bind("click",highlightsFocus.highlightOptions),$(".hv-highlight-option, .hv-pause-play, #hvOpenHighlight").bind("mouseenter",highlightsFocus.markupToolHoverHandler),$(".hv-highlight-option, .hv-pause-play, #hvOpenHighlight").bind("mouseleave",highlightsFocus.markupToolHoverHandler),$(".hv-pause-play").bind("click",highlightsFocus.pausePlay),$(".hv-change-color-circle").bind("click",highlightsFocus.color),$(".hv-close-highlights").bind("click",highlightsFocus.closeHighlights),$(".hv-open-highlights").bind("click",highlightsFocus.openHighlights),$(".hv-highlight-option").on("mouseenter",highlightsFocus.tooltipShow),$(".hv-icon-out-disable").on("mouseenter",highlightsFocus.tooltipShow),$(".hv-tooltip-panel").on("mouseenter",highlightsFocus.checkColorPanelVisible),$(".hv-pause-play").on("mouseover",highlightsFocus.tooltipShow),$(".hv-close-highlights").on("mouseover",highlightsFocus.tooltipShow),window.addEventListener("keyup",highlightsFocus.onkeyupEvent),window.addEventListener("keydown",highlightsFocus.onkeydownEvent),i&&(window.addEventListener("resize",highlightsFocus.windowResize),highlightsFocus.canvas=document.getElementById("hvCanvas"),highlightsFocus.ctx=highlightsFocus.canvas.getContext("2d"),highlightsFocus.canvas.width=window.innerWidth,highlightsFocus.canvas.height=window.innerHeight,w=highlightsFocus.canvas.width,h=highlightsFocus.canvas.height);var d=document.body,l=document.documentElement,u=Math.max(d.scrollHeight,d.offsetHeight,l.clientHeight,l.scrollHeight,l.offsetHeight);i&&(highlightsFocus.canvas.height=u),$("#hvHighLightDiv").css("height",u+"px"),$("#hvHighLightDiv").css({"pointer-events":"none"}),$("#hvOverlayDiv").hide(),i&&(highlightsFocus.canvas.addEventListener("mousemove",function(e){highlightsFocus.findxy("move",e)},!1),highlightsFocus.canvas.addEventListener("mousedown",function(e){highlightsFocus.findxy("down",e)},!1),highlightsFocus.canvas.addEventListener("mouseup",function(e){highlightsFocus.findxy("up",e)},!1),highlightsFocus.canvas.addEventListener("mouseout",function(e){highlightsFocus.findxy("out",e)},!1)),markupToolIntro&&($(".hv-highlights-gotit").unbind("click"),$(".hv-highlights-gotit").bind("click",startOverlayCountdown),$(".hv-feature-intro-div").fadeIn(200),setTimeout(function(){$(".hv-highlights-gotit").is(":visible")&&($(".hv-feature-intro-div").fadeIn(500),runtimePort.postMessage({imCountingDown:!0,messageFromContentScript1234:!0}),startOverlayCountdown())},5e3),markupToolIntro=!1),runtimePort.postMessage({getHighlightState:!0,messageFromContentScript1234:!0}),hideMarkuptoolAndIcons(!1)}function getMarkupToolFocusComponent(){return'<div class="hv-feature-intro-div" style="display: none;">                  <div class="hv-feature-intro-div-inner">                      <p class="hv-intro-features-text">Highlight,draw on the screen while you record your video with the new Markup Tools available down here. you can also pause or stop your recording right from here. </p>                      <span class="hv-highlights-gotit radius hv-primary-btn">GOT IT</span>                      <img src="'+highlightsFocus.arrowPointer+'" class="hv-arrow-pointer" />                  </div>              </div>              <div class="hv-focus-overlay" id="hvOverlayDiv" style="display: none;">                  <div id="hvOverlayCircle"></div>                  </div>                  <div id="hvHighLightDiv" class="hv-highlight-div" style="pointer-events: none">                  <canvas id="hvCanvas" style="opacity:0.6;position: absolute;top: 0;height: 100%;left: 0;background-color: transparent;width: 100%;"></canvas>              </div>'}function getMarkupToolState(){runtimePort.postMessage({getMarkupToolEnabled:!0,messageFromContentScript1234:!0})}function removeWebcam(e){$("#hippo-overlay-frame").fadeOut(function(){$("#hippo-overlay-frame").remove()}),$("#hippo-overlay-div").remove(),$("#hippo-overlay-background").remove(),cleanUpWebcamTourAssets(),cleanUpWebcamTourVariables()}function removeHighlightComponent(e){window.removeEventListener("keyup",highlightsFocus.onkeyupEvent),window.removeEventListener("keydown",highlightsFocus.onkeydownEvent),window.removeEventListener("resize",highlightsFocus.windowResize),document.removeEventListener("mouseup",highlightsFocus.clickEffect),highlightsFocus.setCursor(),$(".hv-pen-cusor-area").remove(),$(".hv-action-component").remove(),$("#hvOverlayDiv").remove(),$("#hvHighLightDiv").remove()}function dispatchEWEvent(e,i){var o=new CustomEvent(e,{detail:i});$("#hv-event-listener").length>0&&$("#hv-event-listener")[0].dispatchEvent(o)}function sendEventToEmbedScript(e,i){var o={initiator:"hippovideo",type:e,detail:i};window.parent.postMessage(JSON.stringify(o),"*")}function appendWebCam(e){$("#hippo-overlay-frame").remove();var i=recordingConfiguration&&"lessonly"==recordingConfiguration.initiator,o=recordingConfiguration&&recordingConfiguration.showWebcamPreviewInParent,t=recordingConfiguration&&recordingConfiguration.webcamPreviewFrameId,s=recordingConfiguration&&recordingConfiguration.isNewRecordingScreen,n=recordingConfiguration&&recordingConfiguration.webCam&&"7000"==recordingConfiguration.webcamBitRate&&!recordingConfiguration.screenRecord,r=chrome.runtime.getURL("html/injected/preview-while-recording.html?center=true"+(recordingConfiguration.screenRecord||recordingConfiguration.webCam?"":"&onlyaudio")+(i?"&lessonlyRecording":"")+(n?"&changeWebcamQuality":""));if(o&&t){var a=chrome.runtime.getURL("html/injected/custom-webcam-preview.html?center=true"+(recordingConfiguration.screenRecord||recordingConfiguration.webCam?"":"&onlyaudio")+(i?"&lessonlyRecording":""));s&&(a+="&isNewRecordingScreen=true"),document.getElementById(t).src=a}else{var c=document.createElement("iframe");c.id="hippo-overlay-frame";var h=document.createElement("div");h.id="hippo-overlay-div";var g=document.createElement("div");g.id="hippo-inner-div";var d=document.createElement("div");d.id="hv-iframe-wrapper";var l=document.createElement("div");l.id="hippo-action-div",c.src=r,c.style.cssText="height: 300px;width: 100%;margin: 0px auto;z-index:1000000;border:0;display:none";chrome.i18n.getMessage("stop_recording"),chrome.i18n.getMessage("pause_text"),chrome.i18n.getMessage("resume");$(d).append(c),$(g).append('<div id="recording-blinking" style="display:none"><img src="'+chrome.extension.getURL("/images/injected/rec-icon.png")+'" alt="recording-icon" width="20"> RECORDING...</div>'),g.append(d),g.append(l),$(g).append('<div id="hv-recording-controls" style="display:none;margin: 0px 30px 10px 30px;">                    <div id="hv-recordingTimer" style="display:none;">00:00</div>                    <div class="hv-align-right">'+("hippo-website"==recordingConfiguration.initiator?"":'<a class="hv-cancel-btn" id="hv-cancel-recording">'+chrome.i18n.getMessage("cancel")+"</a>")+'<button class="hv-primary-btn-2" id="hv-previewcontrol-stop" style="width:170px;float:right">'+chrome.i18n.getMessage("finish_recording")+"</button>                    </div>                </div>"),h.append(g),c.setAttribute("allow","microphone; camera"),document.body.appendChild(h),i&&$("#hippo-inner-div").addClass("lessonly-recording-frame"),$(".hv-webcam-play-btn").bind("click",highlightsFocus.pausePlayWebcam),$(".hv-stop-recording-btn").bind("click",highlightsFocus.stopRecording),$("#hv-previewcontrol-stop").bind("click",highlightsFocus.stopRecording),$("#hv-cancel-recording").bind("click",highlightsFocus.cancelRecording),e&&$(c).show()}}function showAlert(e){console.log("showing alert",e);var i=document.createElement("iframe");i.id="hippo-alert-frame",i.setAttribute("allow","microphone; camera"),i.src=chrome.extension.getURL("html/injected/alert.html?type="+e),i.style.cssText="position: fixed;left: 0;top: 0;width: 100%;height: 100%;z-index:1000000;border:0;",document.body.appendChild(i)}function isInsideIFrame(){try{return window.self!==window.top}catch(e){return!0}}function initializeAndShowPreviewControls(){recordingConfiguration.screenRecord||recordingConfiguration.webCam||recordingConfiguration.pseudoWebcam||$("#hv-onlyAudioPreview").show(),$("#hv-recording-controls, #recording-blinking").show(),$("#hv-recordingTimer").show(),initializeTimer()}function initializeTimer(){clearInterval(updateTimeLooper),updateTimeLooper=setInterval(function(){fetchTimerAndUpdate()},100)}function fetchTimerAndUpdate(){runtimePort.postMessage({fetchTimerAndUpdate:!0,messageFromContentScript1234:!0})}function updateTimer(e){runtimePort.postMessage({updateTimer:!0,hvPlay:e,messageFromContentScript1234:!0})}function _resetTimer(){clearInterval(updateTimeLooper),runtimePort.postMessage({resetTimer:!0,messageFromContentScript1234:!0})}function preInitializeTimer(){runtimePort.postMessage({initializeTimer:!0,messageFromContentScript1234:!0})}function checkAndSetTime(e){recordDataStartTime||e>0?($("#hv-recordingTimer").show().html(convertTime(e)),$("#recordingTimer").html(convertTime(e))):$("#hv-recordingTimer").hide()}function convertTime(e){var i=Math.floor(e/1e3),o=Math.floor(i/60),t=i-60*o;return o+="",t+="",1===t.length&&(t="0"+t),o+":"+t}function trackUserActivity(e,i,o){var t={};t.messageFromContentScript1234=!0,t.trackUserActivity=!0,t.actionName=e+" "+i,t.assetId=o,runtimePort.postMessage(t)}function isDynamicIntegration(e){return dynamicIntegrations.includes(e)}var injectedAlready=document.getElementById("hippowiz-cs-injected");if(!injectedAlready){var hippowizExtension='<input type=hidden id="hippowiz-cs-injected" value=true />';$(hippowizExtension).appendTo("body"),hippowizExtension='<input type=hidden id="hippowiz-activity-logs" value="none" />',$(hippowizExtension).appendTo("body"),hippowizExtension='<input type=hidden id="hippowiz-activity-logs-secondary" value="none" />',$(hippowizExtension).appendTo("body"),hippowizExtension='<div class="hv-blink-right"></div><div class="hv-blink-left"></div>',$(hippowizExtension).appendTo("body");var runtimePort=chrome.runtime.connect({name:"mycontentscript"});runtimePort.onDisconnect.addListener(function(){removeHighlightComponent(),null!=document.getElementById("hippowiz-cs-injected")&&document.getElementById("hippowiz-cs-injected").remove()});var tabId,countdownComplete=!1,webcamUploaded=!1,screenrecordingUploaded=!1,recordInitiator=!1,recordingConfiguration,markupToolEnabled,os,markupToolIntro=!1,currentAction="hvCursorAnimation",actionStateMaintance=!0,updateTimeLooper,recordDataStartTime,showWebcamTour=!1,dynamicIntegrations=["google-slides","google-classroom","google-document","d2l","gmail","google-drive","slack","trello","outreach","linkedin","jira","freshsales","freshchat","googlechat","mailshake-dynamic","salesforce-dynamic","pardot-dynamic","hubspot-dynamic","pipedrive-dynamic","phoneburner-dynamic","outlook-dynamic","intercom-dynamic"],highlightsFocus={isEraser:!1,isPen:!1,cursorWidth:5,canvas:null,ctx:null,flag:!1,prevX:0,currX:0,prevY:0,currY:0,dot_flag:!1,penColor:"#000000",selectedColor:0,highlightCursorWidth:10,highlightCursorHeight:10,pauseIcon:chrome.extension.getURL("/images/injected/markuptool/hb-pause.svg"),pauseIconActive:chrome.extension.getURL("/images/injected/markuptool/hb-pause-active.svg"),playIcon:chrome.extension.getURL("/images/injected/markuptool/hb-play.svg"),playIconActive:chrome.extension.getURL("/images/injected/markuptool/hb-play-active.svg"),stopIcon:chrome.extension.getURL("/images/injected/markuptool/hb-stop.svg"),stopIconActive:chrome.extension.getURL("/images/injected/markuptool/hb-stop-active.svg"),cursorIcon:chrome.extension.getURL("/images/injected/markuptool/hb-select.png"),cursorIconActive:chrome.extension.getURL("/images/injected/markuptool/hb-select-active.png"),penIcon:chrome.extension.getURL("/images/injected/markuptool/hb-pen.svg"),penIconActive:chrome.extension.getURL("/images/injected/markuptool/hb-pen-active.svg"),focusIcon:chrome.extension.getURL("/images/injected/markuptool/hb-focus.svg"),focusIconActive:chrome.extension.getURL("/images/injected/markuptool/hb-focus-active.svg"),eraseIcon:chrome.extension.getURL("/images/injected/markuptool/hb-erase.svg"),eraseIconActive:chrome.extension.getURL("/images/injected/markuptool/hb-erase-active.svg"),clearIcon:chrome.extension.getURL("/images/injected/markuptool/hb-clear.svg"),clearIconActive:chrome.extension.getURL("/images/injected/markuptool/hb-clear-active.svg"),minimizeIcon:chrome.extension.getURL("/images/injected/markuptool/hb-minimize-icon.svg"),minimizeIconActive:chrome.extension.getURL("/images/injected/markuptool/hb-minimize-icon-hover.svg"),video:chrome.extension.getURL("/images/injected/hb-video-off.png"),collapsIcon:chrome.extension.getURL("/images/injected/collaps-icon.png"),collapsIconActive:chrome.extension.getURL("/images/injected/collaps-icon-active.png"),penColorIcon:chrome.extension.getURL("/images/injected/pen-with-color.svg"),penCursorIcon:chrome.extension.getURL("/images/injected/pen-cusor.svg"),eraseCursorIcon:chrome.extension.getURL("/images/injected/erase-cursor.svg"),arrowPointer:chrome.extension.getURL("/images/injected/arrow-pointer.png"),mouseAnimationIcon:chrome.extension.getURL("/images/injected/markuptool/hb-mouse-animation.svg"),mouseAnimationIconActive:chrome.extension.getURL("/images/injected/markuptool/hb-mouse-animation-active.svg"),webcamIcon:chrome.extension.getURL("/images/injected/markuptool/hb-webcam.svg"),webcamIconActive:chrome.extension.getURL("/images/injected/markuptool/hb-webcam-active.svg"),highlightsColors:["#000000","#ff0000","#8170cd","#ff9a44","#7ddc68","#1edde1"],isAlt:!1,clearAction:"hvCursor",highlightOptions:function(e){if(!showWebcamTour||!$(e.currentTarget).hasClass("hv-icon-out-disable")){var i=e.currentTarget.id;highlightsFocus.selectHiglightOptions(i,!0)}},markupToolHoverHandler:function(e){var i=e.currentTarget.id;$(e.currentTarget).hasClass("hv-icon-out-disable")||("hvOpenHighlight"==i?$("#"+i).toggleClass("hv-icon-hover"):$("#"+i).toggleClass("hv-icon-hover-transform"))},checkColorPanelVisible:function(e){$(".hv-choose-color-panel").is(":visible")&&highlightsFocus.tooltipHide()},pausePlay:function(e){e&&$(e.currentTarget).hasClass("hv-icon-out-disable")||$("#hvPause").hasClass(".hv-icon-out-disable")||($("#hvPause").hasClass("disp-none")?($("#hvPlay").addClass("disp-none"),$("#hvPause").removeClass("disp-none"),highlightsFocus.highlightsEvents("hvPlay")):($("#hvPlay").removeClass("disp-none"),$("#hvPause").addClass("disp-none"),highlightsFocus.highlightsEvents("hvPause")),highlightsFocus.pauseResumeWebcam())},pausePlayWebcam:function(e){"hvResumeWebcam"===e.currentTarget.id?($("#hvResumeWebcam").addClass("disp-none"),$("#hvPauseWebcam").removeClass("disp-none")):($("#hvResumeWebcam").removeClass("disp-none"),$("#hvPauseWebcam").addClass("disp-none")),highlightsFocus.pauseResumeWebcam()},hideWebcam:function(e){recordingConfiguration.pseudoWebcam&&($("#hvWebCam").removeClass("hv-active-tool hv-icon-selected").addClass("hv-icon-unslected"),$("#hvOverlayDiv").hide(),$("#hippo-overlay-frame").hide(),$("#hippo-overlay-frame").hasClass("hv-webcam-circle-center-align")&&$("#hippo-overlay-background").hide(),e&&highlightsFocus.highlightsEvents("hvWebCam_hide"))},showWebcam:function(e){recordingConfiguration.pseudoWebcam&&($("#hvWebCam").removeClass("hv-icon-unslected").addClass("hv-active-tool hv-icon-selected"),$("#hvOverlayDiv").hide(),$("#hippo-overlay-frame").show(),$("#hippo-overlay-frame").hasClass("hv-webcam-circle-center-align")&&$("#hippo-overlay-background").show(),e&&highlightsFocus.highlightsEvents("hvWebCam_show"))},pauseResumeWebcam:function(){runtimePort.postMessage({togglePauseResume:!0,messageFromContentScript1234:!0})},stopRecording:function(e){runtimePort.postMessage({stopBackgroundRecording:!0,messageFromContentScript1234:!0})},cancelRecording:function(e){runtimePort.postMessage({cancelBackgroundRecording:!0,messageFromContentScript1234:!0})},selectHiglightOptions:function(e,i){if("hvClearScreen"!==e&&(highlightsFocus.clearAction=e),$("#"+e).hasClass("hv-active-tool")&&i){if(highlightsFocus.resetValues(e),highlightsFocus.cursor(),"hvWebCam"!=e)return void highlightsFocus.highlightsEvents("hvCursor")}else if("hvCursor"==e&&!i)return highlightsFocus.resetValues(e),void highlightsFocus.cursor();switch(highlightsFocus.resetValues(e),"hvWebCam"!=e&&"hvWebCam_show"!=e&&"hvWebCam_hide"!=e&&($("#"+e).removeClass("hv-icon-unslected"),$("#"+e).addClass("hv-active-tool hv-icon-selected")),i&&"hvStop"!=e&&"hvWebCam"!=e&&highlightsFocus.highlightsEvents(e),"hvPen"!=e&&"hvEraser"!=e&&"hvFocusArea"!=e||$(document).bind("mousemove",highlightsFocus.mouseMove),highlightsFocus.isPen=!1,e){case"hvCursor":highlightsFocus.cursor();break;case"hvCursorAnimation":highlightsFocus.cursorAnimation();break;case"hvPen":highlightsFocus.tooltipHide(),$("#hvHighLightDiv").removeClass("disp-none"),highlightsFocus.pen(i),$(".hv-choose-color-panel").show();break;case"hvEraser":highlightsFocus.eraser(i);break;case"hvClearScreen":highlightsFocus.clearScreen();break;case"hvFocusArea":highlightsFocus.focusArea(i);break;case"hvStop":highlightsFocus.stopRecording();break;case"hvWebCam":webcamHideShow(i);break;case"hvWebCam_show":highlightsFocus.showWebcam(i);break;case"hvWebCam_hide":highlightsFocus.hideWebcam(i)}},resetValues:function(){var e=!!$("#hvWebCam").hasClass("hv-icon-selected");$(".hv-highlight-option").removeClass("hv-active-tool"),$(".hv-highlight-option").removeClass("hv-icon-selected"),$(".hv-highlight-option").addClass("hv-icon-unslected"),$(".hv-choose-color-panel").hide(),$("#hvHighLightDiv").removeClass("hv-add-highlight-div"),$("#hvHighLightDiv").removeClass("hv-add-eraser"),$("#hvCanvas").removeClass("hv-add-canvas"),$("#hvHighLightDiv").removeClass("hv-remove-highlight-div"),$("#hvCanvas").removeClass("hv-remove-canvas"),$(".hv-pen-cusor-area").remove(),recordingConfiguration.pseudoWebcam&&(e?$("#hvWebCam").removeClass("hv-icon-unslected").addClass("hv-active-tool hv-icon-selected"):$("#hvWebCam").removeClass("hv-active-tool hv-icon-selected").addClass("hv-icon-unslected")),$(document).unbind("mousemove"),document.removeEventListener("mouseup",highlightsFocus.clickEffect)},tooltipHide:function(e){$(".hv-tooltip-panel").hide()},tooltipShow:function(e){var i=e.currentTarget.id;if("disabledState"==i)return void highlightsFocus.tooltipHide();switch($(".hv-tooltip-panel").show(),clearTimeout(tooltipHideId),tooltipHideId=setTimeout(function(){$(".hv-tooltip-panel").hide()},3e3),i){case"hvCursor":$(".hv-tooltip-panel").text(chrome.i18n.getMessage("press")+" "+("mac"===os?chrome.i18n.getMessage("option"):chrome.i18n.getMessage("alt"))+" + "+chrome.i18n.getMessage("m_for_cursor"));break;case"hvCursorAnimation":$(".hv-tooltip-panel").text(chrome.i18n.getMessage("press")+" "+("mac"===os?chrome.i18n.getMessage("option"):chrome.i18n.getMessage("alt"))+" + "+chrome.i18n.getMessage("a_for_click_animation"));break;case"hvPen":$(".hv-tooltip-panel").text(chrome.i18n.getMessage("press")+" "+("mac"===os?chrome.i18n.getMessage("option"):chrome.i18n.getMessage("alt"))+" + "+chrome.i18n.getMessage("h_for_highlight"));break;case"hvEraser":$(".hv-tooltip-panel").text(chrome.i18n.getMessage("press")+" "+("mac"===os?chrome.i18n.getMessage("option"):chrome.i18n.getMessage("alt"))+" + "+chrome.i18n.getMessage("e_for_eraser"));break;case"hvClearScreen":$(".hv-tooltip-panel").text(chrome.i18n.getMessage("press")+" "+("mac"===os?chrome.i18n.getMessage("option"):chrome.i18n.getMessage("alt"))+" + "+chrome.i18n.getMessage("z_for_clear_screen"));break;case"hvFocusArea":$(".hv-tooltip-panel").text(chrome.i18n.getMessage("press")+" "+("mac"===os?chrome.i18n.getMessage("option"):chrome.i18n.getMessage("alt"))+" + "+chrome.i18n.getMessage("f_for_focus"));break;case"hvPause":case"hvPlay":$(".hv-tooltip-panel").text(chrome.i18n.getMessage("press")+" "+("mac"===os?chrome.i18n.getMessage("option"):chrome.i18n.getMessage("alt"))+" + "+chrome.i18n.getMessage("p_for_pause_play"));break;case"hvCloseHighlight":$(".hv-tooltip-panel").text(chrome.i18n.getMessage("press")+" "+("mac"===os?chrome.i18n.getMessage("option"):chrome.i18n.getMessage("alt"))+" + "+chrome.i18n.getMessage("c_for_close"));break;case"hvStop":$(".hv-tooltip-panel").text(chrome.i18n.getMessage("press")+" "+("mac"===os?chrome.i18n.getMessage("option"):chrome.i18n.getMessage("alt"))+" + "+chrome.i18n.getMessage("s_for_stop_recording"));break;case"hvWebCam":$(".hv-tooltip-panel").text("Press "+("mac"===os?"Option":"Alt")+" + O to Stop and Resume webcam");break;case"disabledState":recordingConfiguration.screenRecord?$(".hv-tooltip-panel").text(chrome.i18n.getMessage("upgrade_needed")):$(".hv-tooltip-panel").text("")}},color:function(e){highlightsFocus.highlightsEvents("hvColorChoose"),highlightsFocus.isEraser=!1,highlightsFocus.penColor=e.target.id,highlightsFocus.selectedColor=highlightsFocus.highlightsColors.indexOf(e.target.id),highlightsFocus.setCursor(e.target.id)},draw:function(){highlightsFocus.ctx.beginPath(),1==highlightsFocus.isEraser?highlightsFocus.ctx.globalCompositeOperation="destination-out":highlightsFocus.ctx.globalCompositeOperation="source-over",highlightsFocus.ctx.lineCap="round",highlightsFocus.ctx.moveTo(highlightsFocus.prevX,highlightsFocus.prevY),highlightsFocus.ctx.fillStyle=highlightsFocus.penColor,highlightsFocus.ctx.globalAlpha=1,highlightsFocus.ctx.lineTo(highlightsFocus.currX,highlightsFocus.currY),highlightsFocus.ctx.strokeStyle=highlightsFocus.penColor,highlightsFocus.ctx.lineWidth=highlightsFocus.cursorWidth,highlightsFocus.ctx.stroke()},clearScreen:function(){var e=document.body,i=document.documentElement,o=Math.max(e.scrollHeight,e.offsetHeight,i.clientHeight,i.scrollHeight,i.offsetHeight);highlightsFocus.canvas.height=o;var t=highlightsFocus.canvas.width,s=highlightsFocus.canvas.height;highlightsFocus.ctx.clearRect(0,0,t,s),highlightsFocus.selectHiglightOptions(highlightsFocus.clearAction,!1)},focusArea:function(e){$("#hvHighLightDiv").addClass("hv-remove-highlight-div"),$("#hvCanvas").addClass("hv-remove-canvas");var i=document.body,o=document.documentElement,t=Math.max(i.scrollHeight,i.offsetHeight,o.clientHeight,o.scrollHeight,o.offsetHeight);$("body").css({cursor:"default"}),$("#hvHighLightDiv").css("height",t+"px"),$("#hvOverlayDiv").show(),recordingConfiguration&&recordingConfiguration.pseudoWebcam&&overlayBackgroundClickHandler(e)},cursor:function(){$("#hvHighLightDiv").css({"pointer-events":"none"});var e=document.body,i=document.documentElement,o=Math.max(e.scrollHeight,e.offsetHeight,i.clientHeight,i.scrollHeight,i.offsetHeight);$("body").css({cursor:"default"}),$("#hvHighLightDiv").css("height",o+"px"),$("#hvOverlayDiv").hide(),$("#hvCanvas").addClass("hv-remove-canvas"),$("#hvCanvas").css("height",o+"px")},cursorAnimation:function(){document.addEventListener("mouseup",highlightsFocus.clickEffect),$("#hvHighLightDiv").css({"pointer-events":"none"});var e=document.body,i=document.documentElement,o=Math.max(e.scrollHeight,e.offsetHeight,i.clientHeight,i.scrollHeight,i.offsetHeight);$("body").css({cursor:"default"}),$("#hvHighLightDiv").css("height",o+"px"),$("#hvOverlayDiv").hide(),$("#hvCanvas").addClass("hv-remove-canvas"),$("#hvCanvas").css("height",o+"px")},clickEffect:function(e){var i=document.createElement("div");i.className="hv-clickEffect",i.style.top=e.clientY+"px",i.style.left=e.clientX+"px";document.body.appendChild(i),i.addEventListener("animationend",function(){i.parentElement.removeChild(i)}.bind(this));var o=document.createElement("div");o.className="hv-clickEffect2",o.style.top=e.clientY+"px",o.style.left=e.clientX+"px",setTimeout(function(){document.body.appendChild(o),o.addEventListener("animationend",function(){o.parentElement.removeChild(o)}.bind(this))},200)},pen:function(e){highlightsFocus.isEraser=!1,highlightsFocus.isPen=!0,highlightsFocus.setCursor(highlightsFocus.penColor),$("#hvHighLightDiv").addClass("hv-add-highlight-div");var i=document.body,o=document.documentElement,t=Math.max(i.scrollHeight,i.offsetHeight,o.clientHeight,o.scrollHeight,o.offsetHeight);$("#hvHighLightDiv").css("height",t+"px"),$("#hvCanvas").removeClass("hv-add-canvas-eraser"),$("#hvCanvas").addClass("hv-add-canvas"),$("#hvCanvas").css("height",t+"px"),$("#hvOverlayDiv").hide();var s='<svg class="hv-pen-cusor-area" xmlns="http://www.w3.org/2000/svg" width="'+highlightsFocus.highlightCursorWidth+'" height="'+highlightsFocus.highlightCursorHeight+'" viewBox="0 0 51 50.969"><metadata><?xpacket begin="\ufeff" id="W5M0MpCehiHzreSzNTczkc9d"?><x:xmpmeta xmlns:x="adobe:ns:meta/" x:xmptk="Adobe XMP Core 5.6-c138 79.159824, 2016/09/14-01:09:01"><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about=""/></rdf:RDF></x:xmpmeta><?xpacket end="w"?></metadata><defs><style>.cls-1 {fill: none;stroke: #313131;stroke-linecap: round;stroke-linejoin: round;stroke-width: 1px;stroke-dasharray: 5 4;}</style></defs><circle class="cls-1" cx="25.5" cy="25.469" r="25"/></svg>';$(s).appendTo("body"),recordingConfiguration&&recordingConfiguration.pseudoWebcam&&overlayBackgroundClickHandler(e)},eraser:function(e){highlightsFocus.isEraser=!0,$("body").css("cursor","url("+highlightsFocus.eraseCursorIcon+"), auto"),$("#hvHighLightDiv").css({"pointer-events":"all"}),$("#hvHighLightDiv").addClass("hv-add-eraser"),$("#hvCanvas").addClass("hv-add-canvas-eraser"),$("#hvCanvas").css("height",t+"px");var i=document.body,o=document.documentElement,t=Math.max(i.scrollHeight,i.offsetHeight,o.clientHeight,o.scrollHeight,o.offsetHeight);$("#hvHighLightDiv").css("height",t+"px"),$("#hvOverlayDiv").hide();var s='<svg class="hv-pen-cusor-area" xmlns="http://www.w3.org/2000/svg" width="'+highlightsFocus.highlightCursorWidth+'" height="'+highlightsFocus.highlightCursorHeight+'" viewBox="0 0 51 50.969"><metadata><?xpacket begin="\ufeff" id="W5M0MpCehiHzreSzNTczkc9d"?><x:xmpmeta xmlns:x="adobe:ns:meta/" x:xmptk="Adobe XMP Core 5.6-c138 79.159824, 2016/09/14-01:09:01"><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about=""/></rdf:RDF></x:xmpmeta><?xpacket end="w"?></metadata><defs><style>.cls-1 {fill: none;stroke: #313131;stroke-linecap: round;stroke-linejoin: round;stroke-width: 1px;stroke-dasharray: 5 4;}</style></defs><circle class="cls-1" cx="25.5" cy="25.469" r="25"/></svg>';$(s).appendTo("body"),recordingConfiguration&&recordingConfiguration.pseudoWebcam&&overlayBackgroundClickHandler(e)},mouseMove:function(e){var i=e.pageX,o=e.pageY,t=i/w,s=o/h;Xpos=Math.floor(100*t),Ypos=Math.floor(100*s);var n=i+"px",r=o+"px";$("#hvOverlayCircle").css({transform:"translate("+n+","+r+") translateZ(0px)"})},closeHighlights:function(e){$(".hv-highlight-options-div").is(":visible")&&(e&&highlightsFocus.highlightsEvents("hvCloseHighlight"),$(".hv-tooltip-panel").hide(),$(".hv-highlight-options-div").addClass("disp-none"),$(".hv-collapsed").removeClass("disp-none").css("top","-40px"),$(".hv-collapsed").show())},openHighlights:function(e){$(".hv-highlight-options-div").is(":visible")||(e&&highlightsFocus.highlightsEvents("hvOpenHighlight"),$(".hv-collapsed").addClass("disp-none"),$(".hv-highlight-options-div").removeClass("disp-none").show())},findxy:function(e,i){"down"==e&&(highlightsFocus.prevX=highlightsFocus.currX,highlightsFocus.prevY=highlightsFocus.currY,highlightsFocus.currX=i.offsetX-highlightsFocus.canvas.offsetLeft,highlightsFocus.currY=i.offsetY-highlightsFocus.canvas.offsetTop,highlightsFocus.currY+=15,highlightsFocus.currX+=5,highlightsFocus.flag=!0,highlightsFocus.dot_flag=!0,highlightsFocus.dot_flag&&(highlightsFocus.ctx.beginPath(),highlightsFocus.ctx.fillStyle=highlightsFocus.penColor,highlightsFocus.ctx.fillRect(highlightsFocus.currX,highlightsFocus.currY,2,2),highlightsFocus.ctx.closePath(),highlightsFocus.dot_flag=!1)),"up"!=e&&"out"!=e||(highlightsFocus.flag=!1),"move"==e&&($(".hv-pen-cusor-area").css({left:i.offsetX-highlightsFocus.canvas.offsetLeft-$(".hv-pen-cusor-area").width()/2+2,top:i.offsetY-highlightsFocus.canvas.offsetTop-$(".hv-pen-cusor-area").height()/2+17}),highlightsFocus.flag&&(highlightsFocus.prevX=highlightsFocus.currX,highlightsFocus.prevY=highlightsFocus.currY,highlightsFocus.currX=i.offsetX-highlightsFocus.canvas.offsetLeft+5,highlightsFocus.currY=i.offsetY-highlightsFocus.canvas.offsetTop+17,highlightsFocus.draw()))},windowResize:function(){var e=document.body,i=document.documentElement,o=Math.max(e.scrollHeight,e.offsetHeight,i.clientHeight,i.scrollHeight,i.offsetHeight);highlightsFocus.canvas.height=o,$("#hvHighLightDiv").css("height",o+"px")},highlightsEvents:function(e){showWebcamTour||runtimePort.postMessage({putHighlightState:!0,action:e,messageFromContentScript1234:!0})},setCursor:function(e){if(e){if(0==highlightsFocus.isEraser){
$("body").addClass("hv-"+e+"-cursor");var i='<svg xmlns="http://www.w3.org/2000/svg" width="20" viewBox="0 0 24.11 23.93"><defs><style>.cls-1,.cls-2{fill:#fff;stroke:#000;stroke-miterlimit:10;}.cls-2{fill-rule:evenodd;}</style></defs><title>highlight with color</title><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path class="cls-1" d="M22.58,1.35a2.91,2.91,0,0,1,0,4.11L21.21,6.82,17.11,2.72l1.37-1.37a2.91,2.91,0,0,1,4.11,0Z"/><polygon class="cls-1" points="2.05 17.77 0.69 23.25 6.16 21.88 19.85 8.19 15.74 4.09 2.05 17.77"/><path class="cls-2" style="fill:'+e+'" d="M20.11,15.94a3.5,3.5,0,1,1-3.5,3.5,3.5,3.5,0,0,1,3.5-3.5Z"/></g></g></svg>';i=encodeURIComponent(i.replace(/"/g,"'"));var o='url("data:image/svg+xml,'+i+'"), auto';$("body").css("cursor",o)}}else $("body").css({cursor:"default"})},onkeyupEvent:function(e){18==e.which&&(highlightsFocus.isAlt=!1)},onkeydownEvent:function(e){18==e.which&&(highlightsFocus.isAlt=!0),highlightsFocus.isPen&&[37,38,39,40].indexOf(e.keyCode)>-1&&e.preventDefault(),80!=e.which||1!=highlightsFocus.isAlt||showWebcamTour||highlightsFocus.pausePlay(),83!=e.which||1!=highlightsFocus.isAlt||showWebcamTour||highlightsFocus.stopRecording(),67==e.which&&1==highlightsFocus.isAlt&&(e.preventDefault(),highlightsFocus.closeHighlights(!0)),79==e.which&&1==highlightsFocus.isAlt&&(e.preventDefault(),highlightsFocus.openHighlights(!0)),markupToolEnabled&&(90==e.which&&1==highlightsFocus.isAlt&&(highlightsFocus.selectHiglightOptions("hvClearScreen",!0),clearScreen()),69==e.which&&1==highlightsFocus.isAlt&&(e.preventDefault(),highlightsFocus.selectHiglightOptions("hvEraser",!0),highlightsFocus.isEraser=!0),72==e.which&&1==highlightsFocus.isAlt&&(highlightsFocus.selectHiglightOptions("hvPen",!0),highlightsFocus.isEraser=!1,highlightsFocus.pen()),70==e.which&&1==highlightsFocus.isAlt&&(e.preventDefault(),highlightsFocus.selectHiglightOptions("hvFocusArea",!0),highlightsFocus.focusArea()),(77==e.which&&1==highlightsFocus.isAlt||27==e.which)&&(highlightsFocus.selectHiglightOptions("hvCursor",!0),highlightsFocus.cursor()),65==e.which&&1==highlightsFocus.isAlt&&highlightsFocus.selectHiglightOptions("hvCursorAnimation",!0),38==e.which&&highlightsFocus.cursorWidth<=200&&(highlightsFocus.cursorWidth+=1,highlightsFocus.highlightCursorWidth+=1,highlightsFocus.highlightCursorHeight+=1,$(".hv-pen-cusor-area").css({width:highlightsFocus.highlightCursorWidth,height:highlightsFocus.highlightCursorHeight})),38==e.which&&highlightsFocus.isAlt,40==e.which&&highlightsFocus.cursorWidth>=5&&(highlightsFocus.cursorWidth-=1,highlightsFocus.highlightCursorWidth-=1,highlightsFocus.highlightCursorHeight-=1,$(".hv-pen-cusor-area").css({width:highlightsFocus.highlightCursorWidth,height:highlightsFocus.highlightCursorHeight})),37==e.which&&0!==highlightsFocus.selectedColor&&(highlightsFocus.selectedColor=highlightsFocus.selectedColor-1,highlightsFocus.penColor=highlightsFocus.highlightsColors[highlightsFocus.selectedColor],highlightsFocus.setCursor(highlightsFocus.penColor)),39==e.which&&5!==highlightsFocus.selectedColor&&(highlightsFocus.selectedColor=highlightsFocus.selectedColor+1,highlightsFocus.penColor=highlightsFocus.highlightsColors[highlightsFocus.selectedColor],highlightsFocus.setCursor(highlightsFocus.penColor)),87==e.which&&1==highlightsFocus.isAlt&&highlightsFocus.selectHiglightOptions("hvWebCam",!0))}};$(window).off("focus"),$(window).on("focus",function(){highlightsFocus.isAlt=!1});var screenBlob,webcamBlob,tooltipHideId,injectedDescriptionText="";document.getElementsByClassName("quantumWizTextinputPaperinputInput")[1]&&chrome.storage.sync.get("wizUserEmail",function(e){e.wizUserEmail&&(document.getElementsByClassName("quantumWizTextinputPaperinputInput")[1].value=e.wizUserEmail,document.getElementsByClassName("freebirdFormviewerViewItemsTextTextItem")[1].style.display="none")}),devOnlyDebugLog("CONTENT SCRIPT INJECTED"),chrome.runtime.sendMessage({messageFromContentScript1234:!0,shouldIRecordNow:!0},function(e){if(tabId=e.tabId,recordInitiator||(recordingConfiguration=e.recordingConfiguration),recordingConfiguration&&(!recordingConfiguration.tabRecording||recordingConfiguration.tabRecording&&recordingConfiguration.recordingTabId==e.tabId)&&(1==e.response||e.showMarkupTools)){if(e.response&&recordingConfiguration.screenRecord&&(recordingConfiguration.webCam||recordingConfiguration.pseudoWebcam)){$("#hippo-overlay-frame").remove();var i=document.createElement("iframe");if(i.id="hippo-overlay-frame",void 0==recordingConfiguration.webcamSize&&(recordingConfiguration.webcamSize="large"),void 0==recordingConfiguration.webcamShape&&(recordingConfiguration.webcamShape="rectangle"),void 0==recordingConfiguration.webcamPosition&&(recordingConfiguration.webcamPosition="bottom-left"),i.src=chrome.runtime.getURL("html/injected/preview-while-recording.html?sizePosition="+recordingConfiguration.webcamSize+"_"+recordingConfiguration.webcamPosition+"&shape="+recordingConfiguration.webcamShape),recordingConfiguration.pseudoWebcam){var o=recordingConfiguration.webcamSize+"_"+recordingConfiguration.webcamPosition+"_"+recordingConfiguration.aspectRatio,t=recordingConfiguration.lowerThird,s="html/injected/custom-webcam-preview.html?center=false&audioMeter=false&changeWebcamSize=true&sizePositionAspectRatio="+o+"&webcamShape=circle&isLowerThirdEnabled="+t;0==recordingConfiguration.isWebcamPreviewMaximized?s+="&camResizeValue=minimize":1!=recordingConfiguration.isWebcamPreviewMaximized&&void 0!=recordingConfiguration.isWebcamPreviewMaximized||(s+="&camResizeValue=maximize"),i.src=chrome.runtime.getURL(s),addWebcamPreviewAssets(i,recordingConfiguration)}i.setAttribute("allow","microphone; camera"),document.body.appendChild(i),"circle"===recordingConfiguration.webcamShape&&$("#hippo-overlay-frame").addClass("hv-webcam-shape-circle-"+recordingConfiguration.webcamSize),$("#hippo-overlay-frame").addClass("hv-webcam-rectangle-"+recordingConfiguration.webcamPosition),$("#hippo-overlay-frame").show()}else e.response&&(recordingConfiguration.webCam||recordingConfiguration.pseudoWebcam)&&(appendWebCam(!0),initializeAndShowPreviewControls());if("google-slides"==e.recordingConfiguration.initiator){var n=e.recordingConfiguration;n&&void 0!=n.showWebcamTour&&1==n.showWebcamTour&&n.recordingTabId==tabId?(showWebcamTour=!0,initiateWebcamTour(),injectHighlightAndFocus()):n&&0==n.countdownComplete&&$("#hippo-overlay-frame").hide()}else e.showMarkupTools&&(devOnlyDebugLog("getMarkupToolState from shouldIRecordNow"),getMarkupToolState())}}),chrome.runtime.onMessage.addListener(function(e,i,o){if(e.ping){if(document.getElementById("hippowiz-cs-injected")&&o({message:"hi"}),recordInitiator||(recordingConfiguration=e.recordingConfiguration),!recordInitiator&&1==e.showCameraOnOtherTabs||e.recordingConfiguration&&tabId==e.recordingConfiguration.recordingTabId&&1==e.recordingConfiguration.showWebcamTour){!showWebcamTour&&recordingConfiguration.showWebcamTour&&initiateWebcamTour();var t=!0;recordingConfiguration&&!recordingConfiguration.showWebcamTour&&"google-slides"==recordingConfiguration.initiator&&0==recordingConfiguration.countdownComplete&&(t=!1),injectWebcam(t),initializeAndShowPreviewControls()}e.isRecording&&recordingConfiguration.highlights&&(devOnlyDebugLog("getMarkupToolState from add listener ping"),getMarkupToolState())}e.show_alert&&!isInsideIFrame&&(o({message:"okay"}),showAlert(e.show_alert))}),runtimePort.onMessage.addListener(function(e,i,o){if("fetchTimerAndUpdate"==e.backgroundRecordingMessage&&checkAndSetTime(e.data.currTime),"cancelFromWorkflowPop"==e.backgroundRecordingMessage&&_resetTimer(),e.backgroundRecordingMessage&&!recordInitiator&&("removeIframe"==e.backgroundRecordingMessage&&removeWebcam(),e.popupTabId&&tabId==e.popupTabId&&!isInsideIFrame()&&("requestedwebcam"==e.backgroundRecordingMessage?showOverlayCountdown():"requestedscreen"==e.backgroundRecordingMessage?showOverlayCountdown():("bothstarted-popup"==e.backgroundRecordingMessage||"bothstarted-zendesk_embed_form"==e.backgroundRecordingMessage||"bothstarted-freshdesk_embed_form"==e.backgroundRecordingMessage||"bothstarted-generic_embed"==e.backgroundRecordingMessage||"bothstarted-lessonly"==e.backgroundRecordingMessage||"bothstarted"==e.backgroundRecordingMessage||"bothstarted-google-document"==e.backgroundRecordingMessage||"bothstarted-google-classroom"==e.backgroundRecordingMessage||isDynamicIntegration(e.backgroundRecordingMessage.split("-")[1]))&&($("#recording-configuration").val(JSON.stringify(e.data)),recordingConfiguration=e.data,1==e.data.showHighlightsOnboarding?(runtimePort.postMessage({imCountingDown:!0,messageFromContentScript1234:!0}),recordingConfiguration.highlights&&(devOnlyDebugLog("getMarkupToolState from add listener both started"),getMarkupToolState()),markupToolIntro=!0):1==e.data.showWebcamTour?initiateWebcamTour():startOverlayCountdown()))),"stopWebcamTour"==e.backgroundRecordingMessage&&stopWebcamTour(e.data.tabId,e.data.stopRecording),e.backgroundRecordingMessage&&void 0!=document.getElementById("current-screen-recorded"))if("screendata-start"==e.backgroundRecordingMessage)screenBlob=void 0;else if("screendata-part"==e.backgroundRecordingMessage){var t=dataURItoBlob(e.data);screenBlob=void 0==screenBlob?t:new Blob([screenBlob,t],{type:"video/webm"})}else if("screendata-end"==e.backgroundRecordingMessage){if(video=document.getElementById("current-screen-recorded"),void 0==screenBlob)return;video.src=(window.URL?URL:webkitURL).createObjectURL(screenBlob),video.load()}else if("webcamdata-start"==e.backgroundRecordingMessage)webcamBlob=void 0;else if("webcamdata-part"==e.backgroundRecordingMessage){var t=dataURItoBlob(e.data);webcamBlob=void 0==webcamBlob?t:new Blob([webcamBlob,t],{type:"video/webm"})}else"webcamdata-end"==e.backgroundRecordingMessage&&(video=document.getElementById(recordingConfiguration.screenRecord?"hippo-overlay-screenrecord-home":"current-screen-recorded"),video.src=(window.URL?URL:webkitURL).createObjectURL(webcamBlob),video.load());if(e.backgroundRecordingMessage&&recordInitiator&&("requestedwebcam"==e.backgroundRecordingMessage?showCountdown():"paused_recording"==e.backgroundRecordingMessage?$("#actiontoextension").val("record_paused"):"resumed_recording"==e.backgroundRecordingMessage?$("#actiontoextension").val("record_resumed"):"record_aborted"==e.backgroundRecordingMessage?$("#actiontoextension").val("record_aborted"):"recording_cancelled"==e.backgroundRecordingMessage?$("#actiontoextension").val("recording_cancelled"):"requestedscreen"==e.backgroundRecordingMessage?(recordingConfiguration&&recordingConfiguration.isNewRecordingScreen&&$(".hvrecorder-loading-text").html("Awaiting Permission"),showCountdown()):"bothstarted"==e.backgroundRecordingMessage?($("#recording-configuration").val(JSON.stringify(e.data)),recordingConfiguration=e.data,1==e.data.showHighlightsOnboarding?(runtimePort.postMessage({imCountingDown:!0,messageFromContentScript1234:!0}),recordingConfiguration.highlights&&(devOnlyDebugLog("getMarkupToolState from bg message both started"),getMarkupToolState()),markupToolIntro=!0):1==e.data.showWebcamTour?initiateWebcamTour():startCountdown()):"stopped"==e.backgroundRecordingMessage?$("#actiontoextension").val("stopped"):"screendata"==e.backgroundRecordingMessage?(video=document.getElementById("current-screen-recorded"),video.src=e.data,video.load()):"webcamdata"==e.backgroundRecordingMessage?(video=document.getElementById(recordingConfiguration.screenRecord?"hippo-overlay-screenrecord-home":"current-screen-recorded"),video.src=e.data,video.load()):"proceed"==e.backgroundRecordingMessage?($("#actiontoextension").val("proceed"),removeWebcam(),devOnlyDebugLog("REMOVE HIHGLIGHT COMPONENT: PROCEED"),removeHighlightComponent()):"configuration"==e.backgroundRecordingMessage?($("#recording-configuration").val(JSON.stringify(e.data)),$("#actiontoextension").val("configuration")):"recording_cancelled"==e.backgroundRecordingMessage?($("#onboard-frame").remove(),$("#startRecording").removeClass("disabled")):"startedscreen"==e.backgroundRecordingMessage&&recordingConfiguration&&recordingConfiguration.isNewRecordingScreen&&$(".hvrecorder-loading-text").html("Get Ready !")),"askWebcamPermission"==e.backgroundRecordingMessage&&e.data.is_new_recording_screen&&$("#webcamPreviewFrame").css({position:"relative","z-index":"10000001"}),"startCountDown"==e.backgroundRecordingMessage){if(recordingConfiguration=e.data,e.popupTabId&&e.popupTabId!=tabId&&!recordingConfiguration.screenRecord)return;1==recordingConfiguration.showWebcamTour?recordingConfiguration.recordingTabId==tabId&&initiateWebcamTour():startOverlayCountdown()}if("removeUploadProgressOverlay"==e.backgroundRecordingMessage){var s=e.data,n=!1;void 0==s&&(n=!0),s&&tabId==s.tabId&&(n=!0),n&&($("#hvProgressOverlayIframeInjected").length>0&&$("#hvProgressOverlayIframeInjected").remove(),$("#hvProgressOverlayIframe").length>0&&$("#hvProgressOverlayIframe").remove(),$("#startRecording").removeClass("disabled"))}if("showUploadProgressOverlay"==e.backgroundRecordingMessage){var s=e.data;if(tabId==s.tabId){var r,a=$("#hvProgressOverlayIframeInjected").length>0;if(recordingConfiguration&&"popup-recorder"==recordingConfiguration.initiatorSubType)return void $("#actiontoextension").val("upload_progress_overlay");if(!a){var c='<input type=hidden id="hvProgressOverlayIframeInjected" value=true />';$(c).appendTo("body"),$("body").append('<div id="hvProgressOverlayIframe" style="position:fixed;width: 100%;height: 100%;z-index: 9999999;left:0;top:0;"></div>'),$("#actiontoextension").val("upload_progress_overlay"),r=document.createElement("iframe"),r.src=chrome.runtime.getURL("/html/injected/upload-status-overlay.html"),r.style="width:100%;height:100%;border:0;",$("#hvProgressOverlayIframe").append(r)}}}if("removeUploadWarningOverlay"==e.backgroundRecordingMessage&&($("#hvUploadWarningOverlayIframeInjected").length>0&&$("#hvUploadWarningOverlayIframeInjected").remove(),$("#hvUploadWarningOverlayIframe").length>0&&$("#hvUploadWarningOverlayIframe").remove(),$("#startRecording").removeClass("disabled")),"showUploadWarningOverlay"==e.backgroundRecordingMessage){var s=e.data;if(tabId==s.tabId){var r,a=$("#hvUploadWarningOverlayIframeInjected").length>0;if(!a){var c='<input type=hidden id="hvUploadWarningOverlayIframeInjected" value=true />';$(c).appendTo("body"),$("body").append('<div id="hvUploadWarningOverlayIframe" style="position:fixed;width: 100%;height: 100%;z-index: 99999;left:0;top:0;"></div>'),r=document.createElement("iframe"),r.src=chrome.runtime.getURL("/html/injected/upload-error-warning-overlay.html"),r.style="width:100%;height:100%;border:0;",$("#hvUploadWarningOverlayIframe").append(r)}}}if("highlightState"==e.backgroundRecordingMessage&&("hvPlay"!==e.data.current_action&&"hvPause"!==e.data.current_action||("hvPlay"==e.data.pause_play?(updateTimer(!0),initializeTimer(),$("#hvPlay").addClass("disp-none"),$("#hvPause").removeClass("disp-none")):(updateTimer(!1),clearInterval(updateTimeLooper),$("#hvPlay").removeClass("disp-none"),$("#hvPause").addClass("disp-none"))),"hvOpenHighlight"===e.data.current_action?highlightsFocus.openHighlights(!1):"hvCloseHighlight"===e.data.current_action?highlightsFocus.closeHighlights(!1):"hvPlay"!==e.data.current_action&&"hvPause"!==e.data.current_action&&highlightsFocus.selectHiglightOptions(e.data.current_action,!1)),"injectHighlight"==e.backgroundRecordingMessage){if("hvPlay"!==e.data.pause_play&&"hvPause"!==e.data.pause_play||("hvPlay"==e.data.current_action?($("#hvPlay").addClass("disp-none"),$("#hvPause").removeClass("disp-none")):($("#hvPlay").removeClass("disp-none"),$("#hvPause").addClass("disp-none"))),e.data.current_action&&(currentAction=e.data.current_action,actionStateMaintance=!1),recordingConfiguration.pseudoWebcam&&"hvWebCam_show"!=e.data.current_action&&"hvWebCam_hide"!=e.data.current_action)if(e.data.hvWebCam_show)highlightsFocus.showWebcam(!1);else if(e.data.hvWebCam_hide)highlightsFocus.hideWebcam(!1);else if(recordInitiator||"hippo-website"!=recordingConfiguration.initiator){if("popup"==recordingConfiguration.initiator)if(recordingConfiguration.countdownComplete)highlightsFocus.showWebcam(!1);else var h=setTimeout(function(){clearTimeout(h),highlightsFocus.showWebcam(!1)},2500)}else highlightsFocus.showWebcam(!1);"hvOpenHighlight"===e.data.savedState?highlightsFocus.openHighlights(!1):"hvCloseHighlight"===e.data.savedState&&highlightsFocus.closeHighlights(!1),"hvPlay"!==e.data.current_action&&"hvPause"!==e.data.current_action&&highlightsFocus.selectHiglightOptions(currentAction,actionStateMaintance)}if("MarkupToolEnabled"==e.backgroundRecordingMessage&&!isInsideIFrame()){markupToolEnabled=e.data.markupToolEnabled;var g=e.data.isRecording||!1;if(devOnlyDebugLog("GET MARKUP TOOL STATE IS RECORDING = "+g),!g)return devOnlyDebugLog("REMOVE HIHGLIGHT COMPONENT: GET MARKUP TOOL STATE"),void removeHighlightComponent();e.data.showWebcamTour?recordingConfiguration.recordingTabId==tabId?(os=e.data.os,devOnlyDebugLog("INJECT HIGHLIGHT AND FOCUS"),injectHighlightAndFocus()):(devOnlyDebugLog("REMOVE HIHGLIGHT COMPONENT: GET MARKUP TOOL STATE"),removeHighlightComponent()):(!recordingConfiguration.tabRecording||recordingConfiguration.tabRecording&&tabId==recordingConfiguration.recordingTabId)&&(os=e.data.os,devOnlyDebugLog("INJECT HIGHLIGHT AND FOCUS"),injectHighlightAndFocus())}if(document.getElementById("hippowiz-ew-digest")&&tabId==e.popupTabId){if("bothstarted-zendesk_embed_form"!=e.backgroundRecordingMessage&&"bothstarted-freshdesk_embed_form"!=e.backgroundRecordingMessage&&"bothstarted-generic_embed"!=e.backgroundRecordingMessage&&"bothstarted-lessonly"!=e.backgroundRecordingMessage||($("#hippovideo-loading-btn").hide(),$("#all-checkbox-overlay").show(),$("#hippovideo-finish-btn").show(),dispatchEWEvent("record_started")),"stopped_recording"==e.backgroundRecordingMessage&&($("#hippovideo-finish-btn").click(),$("#record-again-btn").click(function(){var e=$(".hippo-embed-description-field");"INPUT"==e.prop("tagName")||"TEXTAREA"==e.prop("tagName")?e.val(e.val().replace(injectedDescriptionText,"")):e.length>0&&(e[0].focus(),e.html(e.html().replace(injectedDescriptionText,"")))}),dispatchEWEvent("record_stopped")),"proceed"==e.backgroundRecordingMessage&&$(".hippo-zd-custom-field input").val().length>0&&void 0!=recordingConfiguration&&("generic_embed"==recordingConfiguration.initiator||"lessonly"==recordingConfiguration.initiator||"freshdesk_embed_form"==recordingConfiguration.initiator||"zendesk_embed_form"==recordingConfiguration.initiator||"zendesk_embed_form"==recordingConfiguration.initiator)){var d=$(".hippo-embed-description-field"),l=$(".hippo-zd-custom-field input").val();"INPUT"==d.prop("tagName")||"TEXTAREA"==d.prop("tagName")?(injectedDescriptionText="Check out the video "+l,d.val(d.val().replace(injectedDescriptionText,"")),d.val(d.val()+"\n"+injectedDescriptionText)):d.length>0&&(injectedDescriptionText="<span>"+chrome.i18n.getMessage("check_out_the_video")+'</span> <a href="'+l+'" target="_blank">'+l+"</a>",d[0].focus(),d.html(d.html().replace(injectedDescriptionText,"")),d.html(d.html()+"\n"+injectedDescriptionText)),runtimePort.postMessage({submitEmbedRecordUrl:!0,messageFromContentScript1234:!0}),dispatchEWEvent("record_complete",{recorded_url:l,asset_id:e.data})}"recorded_url"==e.backgroundRecordingMessage&&(embeddedRecordURL=e.data,$(".hippo-zd-custom-field input").val(e.data),$("#embed-recorded-view-btn").attr("href",e.data)),"initiated_recording"==e.backgroundRecordingMessage&&dispatchEWEvent("record_initiated",e.data),"paused_recording"==e.backgroundRecordingMessage&&dispatchEWEvent("record_paused"),"resumed_recording"==e.backgroundRecordingMessage&&dispatchEWEvent("record_resumed"),"aborted_recording"==e.backgroundRecordingMessage&&dispatchEWEvent("record_aborted"),"error_recording"==e.backgroundRecordingMessage&&dispatchEWEvent("record_error",{error:e.data.message,reason:e.data.name}),"preprocess_complete"==e.backgroundRecordingMessage&&dispatchEWEvent("preprocess_complete",{project_json:e.data}),"source_uploaded"==e.backgroundRecordingMessage&&dispatchEWEvent("source_uploaded"),"record_aborted"==e.backgroundRecordingMessage&&dispatchEWEvent("record_aborted")}if("stopped_recording"!=e.backgroundRecordingMessage&&"record_aborted"!=e.backgroundRecordingMessage||(devOnlyDebugLog("REMOVE HIHGLIGHT COMPONENT: STOP_RECORD"),removeHighlightComponent(),_resetTimer(),cleanUpWebcamTourAssets(),cleanUpWebcamTourVariables()),"screenpopopened"==e.backgroundRecordingMessage){$("#screenpop-back").remove();var r=document.createElement("iframe");r.src=chrome.runtime.getURL("html/injected/permissionback.html"),r.id="screenpop-back",r.style.cssText="position:fixed;top:0;left:0;width:100%;height:100%;z-index:1000000;border:0;",document.body.appendChild(r)}else"screenpopclosed"==e.backgroundRecordingMessage&&$("#screenpop-back").remove();"stopped_recording"==e.backgroundRecordingMessage&&($(".hv-blink-left, .hv-blink-right").hide(),clearInterval(updateTimeLooper)),"initiated_recording"==e.backgroundRecordingMessage&&(recordDataStartTime=void 0,_resetTimer()),"recording_data_started"==e.backgroundRecordingMessage&&(recordDataStartTime=e.data,preInitializeTimer()),"updated_user_preferences"==e.backgroundRecordingMessage&&recordingConfiguration&&(recordingConfiguration.pseudoWebcam="circle"==e.data.recordConfiguration.webcamShape&&e.data.recordingDefaults.screenRecord&&e.data.recordingDefaults.webCam),"webcamPreviewDoubleClicked"==e.backgroundRecordingMessage&&webcamPreviewDblClickHandler(),"webcamPreviewMinimized"==e.backgroundRecordingMessage&&tabId!=e.data.tabId&&overlayBackgroundClickHandler()}),$(document).ready(function(){$('<div id="hippo-overlay"><div id="hippo-overlay-time"><span id="countdown">3</span></div></div>').appendTo("body"),$("#hippo-overlay-time").css("background-image","url("+chrome.extension.getURL("/images/injected/hippo-wiz-numberbox.png")+")"),$("#hippo-overlay-time").hide(),sendEventToEmbedScript("cs_injected")}),null==document.getElementById("hippovideo-extension")&&null==document.getElementById("hippowiz-ew-digest")||(document.getElementById("hippovideo-extension")&&(document.getElementById("hippovideo-extension").value=!0),setInterval(function(){"startfromwidget"==$("#actiontoextension").val()&&(recordingConfiguration=jQuery.parseJSON($("#recording-configuration").val()),$("#actiontoextension").val("none"),runtimePort.postMessage({doBackgroundRecording:!0,config:recordingConfiguration,messageFromContentScript1234:!0})),"start"==$("#actiontoextension").val()&&(recordingConfiguration=jQuery.parseJSON($("#recording-configuration").val()),recordInitiator=!0,$("#actiontoextension").val("none"),runtimePort.postMessage({doBackgroundRecording:!0,config:recordingConfiguration,messageFromContentScript1234:!0})),"stop"==$("#actiontoextension").val()&&($("#actiontoextension").val("none"),runtimePort.postMessage({stopBackgroundRecording:!0,messageFromContentScript1234:!0})),"cancelfromwidget"==$("#actiontoextension").val()&&($("#actiontoextension").val("none"),runtimePort.postMessage({cancelBackgroundRecording:!0,fromAPI:!0,messageFromContentScript1234:!0}))},500)),window.onmessage=function(e){try{var i=JSON.parse(e.data);"hvalertpage"==i.initiator&&"close_clicked"==i.type&&$("#hippo-alert-frame").remove()}catch(e){}}}